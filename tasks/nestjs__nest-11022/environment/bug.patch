diff --git a/.eslintignore b/.eslintignore
index 4197b94e5..07c71c90c 100644
--- a/.eslintignore
+++ b/.eslintignore
@@ -1 +1,3 @@
-**/node_modules/**
\ No newline at end of file
+**/node_modules/**
+*.d.ts
+*.js
\ No newline at end of file
diff --git a/Readme.md b/Readme.md
index 0524401fb..16f48336d 100644
--- a/Readme.md
+++ b/Readme.md
@@ -11,7 +11,6 @@
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/l/@nestjs/core.svg" alt="Package License" /></a>
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/dm/@nestjs/common.svg" alt="NPM Downloads" /></a>
 <a href="https://circleci.com/gh/nestjs/nest" target="_blank"><img src="https://img.shields.io/circleci/build/github/nestjs/nest/master" alt="CircleCI" /></a>
-<a href="https://coveralls.io/github/nestjs/nest?branch=master" target="_blank"><img src="https://coveralls.io/repos/github/nestjs/nest/badge.svg?branch=master#9" alt="Coverage" /></a>
 <a href="https://discord.gg/G7Qnnhy" target="_blank"><img src="https://img.shields.io/badge/discord-online-brightgreen.svg" alt="Discord"/></a>
 <a href="https://opencollective.com/nest#backer" target="_blank"><img src="https://opencollective.com/nest/backers/badge.svg" alt="Backers on Open Collective" /></a>
 <a href="https://opencollective.com/nest#sponsor" target="_blank"><img src="https://opencollective.com/nest/sponsors/badge.svg" alt="Sponsors on Open Collective" /></a>
diff --git a/integration/graphql-code-first/schema.gql b/integration/graphql-code-first/schema.gql
index 59f110694..d7917fb4f 100644
--- a/integration/graphql-code-first/schema.gql
+++ b/integration/graphql-code-first/schema.gql
@@ -15,7 +15,7 @@ scalar Date
 
 type Query {
   recipe(id: String!): Recipe!
-  recipes(skip: Int = 0, take: Int = 25): [Recipe!]!
+  recipes(skip: Int! = 0, take: Int! = 25): [Recipe!]!
 }
 
 type Mutation {
diff --git a/integration/hello-world/e2e/exceptions.spec.ts b/integration/hello-world/e2e/exceptions.spec.ts
index 7cf8223ab..7edd3a961 100644
--- a/integration/hello-world/e2e/exceptions.spec.ts
+++ b/integration/hello-world/e2e/exceptions.spec.ts
@@ -1,39 +1,134 @@
-import { HttpStatus, INestApplication } from '@nestjs/common';
+import { HttpServer, HttpStatus, INestApplication } from '@nestjs/common';
+import {
+  FastifyAdapter,
+  NestFastifyApplication,
+} from '@nestjs/platform-fastify';
 import { Test } from '@nestjs/testing';
+import { expect } from 'chai';
 import * as request from 'supertest';
 import { ErrorsController } from '../src/errors/errors.controller';
 
 describe('Error messages', () => {
-  let server;
-  let app: INestApplication;
+  let server: HttpServer;
 
-  beforeEach(async () => {
-    const module = await Test.createTestingModule({
-      controllers: [ErrorsController],
-    }).compile();
+  describe('Express', () => {
+    let app: INestApplication;
+    beforeEach(async () => {
+      const module = await Test.createTestingModule({
+        controllers: [ErrorsController],
+      }).compile();
 
-    app = module.createNestApplication();
-    server = app.getHttpServer();
-    await app.init();
-  });
+      app = module.createNestApplication();
+      server = app.getHttpServer();
+      await app.init();
+    });
 
-  it(`/GET`, () => {
-    return request(server).get('/sync').expect(HttpStatus.BAD_REQUEST).expect({
-      statusCode: 400,
-      error: 'Bad Request',
-      message: 'Integration test',
+    it(`/GET`, () => {
+      return request(server)
+        .get('/sync')
+        .expect(HttpStatus.BAD_REQUEST)
+        .expect({
+          statusCode: 400,
+          error: 'Bad Request',
+          message: 'Integration test',
+        });
+    });
+
+    it(`/GET (Promise/async)`, () => {
+      return request(server)
+        .get('/async')
+        .expect(HttpStatus.BAD_REQUEST)
+        .expect({
+          statusCode: 400,
+          error: 'Bad Request',
+          message: 'Integration test',
+        });
     });
-  });
 
-  it(`/GET (Promise/async)`, () => {
-    return request(server).get('/async').expect(HttpStatus.BAD_REQUEST).expect({
-      statusCode: 400,
-      error: 'Bad Request',
-      message: 'Integration test',
+    it(`/GET (InternalServerError despite custom content-type)`, async () => {
+      return request(server)
+        .get('/unexpected-error')
+        .expect(HttpStatus.INTERNAL_SERVER_ERROR)
+        .expect({
+          statusCode: 500,
+          message: 'Internal server error',
+        });
+    });
+
+    afterEach(async () => {
+      await app.close();
     });
   });
 
-  afterEach(async () => {
-    await app.close();
+  describe('Fastify', () => {
+    let app: NestFastifyApplication;
+    beforeEach(async () => {
+      const module = await Test.createTestingModule({
+        controllers: [ErrorsController],
+      }).compile();
+
+      app = module.createNestApplication<NestFastifyApplication>(
+        new FastifyAdapter(),
+      );
+      server = app.getHttpServer();
+      await app.init();
+    });
+
+    it(`/GET`, async () => {
+      return app
+        .inject({
+          method: 'GET',
+          url: '/sync',
+        })
+        .then(({ payload, statusCode }) => {
+          expect(statusCode).to.equal(HttpStatus.BAD_REQUEST);
+          expect(payload).to.equal(
+            JSON.stringify({
+              statusCode: 400,
+              error: 'Bad Request',
+              message: 'Integration test',
+            }),
+          );
+        });
+    });
+
+    it(`/GET (Promise/async)`, async () => {
+      return app
+        .inject({
+          method: 'GET',
+          url: '/sync',
+        })
+        .then(({ payload, statusCode }) => {
+          expect(statusCode).to.equal(HttpStatus.BAD_REQUEST);
+          expect(payload).to.equal(
+            JSON.stringify({
+              statusCode: 400,
+              error: 'Bad Request',
+              message: 'Integration test',
+            }),
+          );
+        });
+    });
+
+    it(`/GET (InternalServerError despite custom content-type)`, async () => {
+      return app
+        .inject({
+          method: 'GET',
+          url: '/unexpected-error',
+        })
+        .then(({ payload, statusCode }) => {
+          expect(statusCode).to.equal(HttpStatus.INTERNAL_SERVER_ERROR);
+          expect(payload).to.equal(
+            JSON.stringify({
+              statusCode: 500,
+              message: 'Internal server error',
+            }),
+          );
+        });
+    });
+
+    afterEach(async () => {
+      await app.close();
+    });
   });
 });
diff --git a/integration/hello-world/e2e/middleware-with-versioning.spec.ts b/integration/hello-world/e2e/middleware-with-versioning.spec.ts
index c8d800a90..a16645b68 100644
--- a/integration/hello-world/e2e/middleware-with-versioning.spec.ts
+++ b/integration/hello-world/e2e/middleware-with-versioning.spec.ts
@@ -77,6 +77,26 @@ describe('Middleware', () => {
     });
   });
 
+  describe('when using default URI versioning with the global prefix', () => {
+    beforeEach(async () => {
+      app = await createAppWithVersioning(
+        {
+          type: VersioningType.URI,
+          defaultVersion: VERSION_NEUTRAL,
+        },
+        async (app: INestApplication) => {
+          app.setGlobalPrefix('api');
+        },
+      );
+    });
+
+    it(`forRoutes({ path: '/versioned', version: '1', method: RequestMethod.ALL })`, () => {
+      return request(app.getHttpServer())
+        .get('/api/v1/versioned')
+        .expect(200, VERSIONED_VALUE);
+    });
+  });
+
   describe('when using HEADER versioning', () => {
     beforeEach(async () => {
       app = await createAppWithVersioning({
@@ -133,6 +153,7 @@ describe('Middleware', () => {
 
 async function createAppWithVersioning(
   versioningOptions: VersioningOptions,
+  beforeInit?: (app: INestApplication) => Promise<void>,
 ): Promise<INestApplication> {
   const app = (
     await Test.createTestingModule({
@@ -141,6 +162,9 @@ async function createAppWithVersioning(
   ).createNestApplication();
 
   app.enableVersioning(versioningOptions);
+  if (beforeInit) {
+    await beforeInit(app);
+  }
   await app.init();
 
   return app;
diff --git a/integration/hello-world/src/errors/errors.controller.ts b/integration/hello-world/src/errors/errors.controller.ts
index 76f867bb7..7b2b9e1b8 100644
--- a/integration/hello-world/src/errors/errors.controller.ts
+++ b/integration/hello-world/src/errors/errors.controller.ts
@@ -1,4 +1,4 @@
-import { BadRequestException, Controller, Get } from '@nestjs/common';
+import { BadRequestException, Controller, Get, Header } from '@nestjs/common';
 
 @Controller()
 export class ErrorsController {
@@ -12,6 +12,12 @@ export class ErrorsController {
     this.throwError();
   }
 
+  @Get('unexpected-error')
+  @Header('Content-Type', 'application/pdf')
+  unexpectedError() {
+    throw new Error();
+  }
+
   throwError() {
     throw new BadRequestException({
       statusCode: 400,
diff --git a/integration/inspector/e2e/fixtures/post-init-graph.json b/integration/inspector/e2e/fixtures/post-init-graph.json
index f9b122ce2..dbd339045 100644
--- a/integration/inspector/e2e/fixtures/post-init-graph.json
+++ b/integration/inspector/e2e/fixtures/post-init-graph.json
@@ -1,7 +1,7 @@
 {
   "nodes": {
-    "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408": {
-      "id": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+    "cd386e3b-3d69-5901-952d-1f208af88d8c": {
+      "id": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "label": "InternalCoreModule",
       "metadata": {
         "type": "module",
@@ -10,10 +10,10 @@
         "internal": true
       }
     },
-    "0266246d-7911-5b7d-a84d-262fe9a2374f": {
-      "id": "0266246d-7911-5b7d-a84d-262fe9a2374f",
+    "be0abc22-6df8-5993-b558-46c0848a2b3f": {
+      "id": "be0abc22-6df8-5993-b558-46c0848a2b3f",
       "label": "InternalCoreModule",
-      "parent": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "parent": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -26,10 +26,10 @@
         "token": "InternalCoreModule"
       }
     },
-    "8a6da9c2-02e2-5673-a780-3e91cb35a740": {
-      "id": "8a6da9c2-02e2-5673-a780-3e91cb35a740",
+    "d8961021-03e5-50b1-9589-e6552d20eb4c": {
+      "id": "d8961021-03e5-50b1-9589-e6552d20eb4c",
       "label": "ModuleRef",
-      "parent": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "parent": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -42,10 +42,10 @@
         "token": "ModuleRef"
       }
     },
-    "d93f57f9-7088-5f85-84f4-b2a757f20434": {
-      "id": "d93f57f9-7088-5f85-84f4-b2a757f20434",
+    "952a9871-0035-5d69-9eed-bc675bbdd4ae": {
+      "id": "952a9871-0035-5d69-9eed-bc675bbdd4ae",
       "label": "ApplicationConfig",
-      "parent": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "parent": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -58,10 +58,10 @@
         "token": "ApplicationConfig"
       }
     },
-    "0f97a46c-8619-5a59-a84d-bc0af7a2f49c": {
-      "id": "0f97a46c-8619-5a59-a84d-bc0af7a2f49c",
+    "5ee7ae73-b49c-5410-bf8b-1cea1fc2727b": {
+      "id": "5ee7ae73-b49c-5410-bf8b-1cea1fc2727b",
       "label": "Reflector",
-      "parent": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "parent": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -73,10 +73,10 @@
         "token": "Reflector"
       }
     },
-    "1bd85856-6a0d-5ad9-b5ab-4e446f49a760": {
-      "id": "1bd85856-6a0d-5ad9-b5ab-4e446f49a760",
+    "c0b09f2c-4660-5a02-a030-78bfa806c398": {
+      "id": "c0b09f2c-4660-5a02-a030-78bfa806c398",
       "label": "Reflector",
-      "parent": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "parent": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -89,10 +89,10 @@
         "token": "Reflector"
       }
     },
-    "98fbcd2c-b5dc-5819-b1c1-a8540f39a343": {
-      "id": "98fbcd2c-b5dc-5819-b1c1-a8540f39a343",
+    "78cb636b-37ad-583d-8d4f-f322886f43f9": {
+      "id": "78cb636b-37ad-583d-8d4f-f322886f43f9",
       "label": "REQUEST",
-      "parent": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "parent": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -105,10 +105,10 @@
         "token": "REQUEST"
       }
     },
-    "cb90aade-4ecd-5820-9bdd-6d976425f35f": {
-      "id": "cb90aade-4ecd-5820-9bdd-6d976425f35f",
+    "e5157988-49ec-53a2-80c2-29ba86e03a03": {
+      "id": "e5157988-49ec-53a2-80c2-29ba86e03a03",
       "label": "INQUIRER",
-      "parent": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "parent": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -121,10 +121,10 @@
         "token": "INQUIRER"
       }
     },
-    "35988aac-c61e-5697-bf81-17b787df7199": {
-      "id": "35988aac-c61e-5697-bf81-17b787df7199",
+    "e4c58859-73a1-5981-b476-9af572c1bb63": {
+      "id": "e4c58859-73a1-5981-b476-9af572c1bb63",
       "label": "ExternalContextCreator",
-      "parent": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "parent": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -137,10 +137,10 @@
         "token": "ExternalContextCreator"
       }
     },
-    "1dc14da7-cdc3-5719-8615-d5e43b0bb589": {
-      "id": "1dc14da7-cdc3-5719-8615-d5e43b0bb589",
+    "7994dca3-7e8d-594a-bc99-19736b521b1a": {
+      "id": "7994dca3-7e8d-594a-bc99-19736b521b1a",
       "label": "ModulesContainer",
-      "parent": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "parent": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -153,10 +153,10 @@
         "token": "ModulesContainer"
       }
     },
-    "f3784e54-6f1e-5b0b-a054-8f0ce00b5a26": {
-      "id": "f3784e54-6f1e-5b0b-a054-8f0ce00b5a26",
+    "02d5a2da-8413-5244-aea2-e99a9b2a47a1": {
+      "id": "02d5a2da-8413-5244-aea2-e99a9b2a47a1",
       "label": "HttpAdapterHost",
-      "parent": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "parent": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -169,10 +169,10 @@
         "token": "HttpAdapterHost"
       }
     },
-    "a70e728e-bd78-59c8-82c3-677db604d485": {
-      "id": "a70e728e-bd78-59c8-82c3-677db604d485",
+    "82a7deba-d4bb-51f7-b591-6f0810c62dde": {
+      "id": "82a7deba-d4bb-51f7-b591-6f0810c62dde",
       "label": "HttpAdapterHost",
-      "parent": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "parent": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -185,10 +185,10 @@
         "token": "HttpAdapterHost"
       }
     },
-    "cba1025d-74a1-5c3a-9b99-2e3b1253fc59": {
-      "id": "cba1025d-74a1-5c3a-9b99-2e3b1253fc59",
+    "7c1ea1db-49b6-508f-8d1b-21c10acfe6fc": {
+      "id": "7c1ea1db-49b6-508f-8d1b-21c10acfe6fc",
       "label": "LazyModuleLoader",
-      "parent": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "parent": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -200,10 +200,10 @@
         "token": "LazyModuleLoader"
       }
     },
-    "5f2354a8-aa71-588e-8eb8-4327b44d1f77": {
-      "id": "5f2354a8-aa71-588e-8eb8-4327b44d1f77",
+    "b78ad2e1-5445-54bd-ae3a-599d272c8f3c": {
+      "id": "b78ad2e1-5445-54bd-ae3a-599d272c8f3c",
       "label": "SerializedGraph",
-      "parent": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "parent": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -216,8 +216,8 @@
         "token": "SerializedGraph"
       }
     },
-    "d8bd964c-de23-5d00-b06b-670ea2de73af": {
-      "id": "d8bd964c-de23-5d00-b06b-670ea2de73af",
+    "419c0cf1-5c75-5001-9c7c-f4068e096458": {
+      "id": "419c0cf1-5c75-5001-9c7c-f4068e096458",
       "label": "RootTestModule",
       "metadata": {
         "type": "module",
@@ -226,10 +226,10 @@
         "internal": false
       }
     },
-    "17793954-3040-5afe-85a1-ba6e552b63ac": {
-      "id": "17793954-3040-5afe-85a1-ba6e552b63ac",
+    "44aabda8-8671-524d-a160-51706ac058f8": {
+      "id": "44aabda8-8671-524d-a160-51706ac058f8",
       "label": "RootTestModule",
-      "parent": "d8bd964c-de23-5d00-b06b-670ea2de73af",
+      "parent": "419c0cf1-5c75-5001-9c7c-f4068e096458",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -242,10 +242,10 @@
         "token": "RootTestModule"
       }
     },
-    "08e91ffe-a032-53e5-95c1-ce31bdb9b62f": {
-      "id": "08e91ffe-a032-53e5-95c1-ce31bdb9b62f",
+    "0c116509-b402-5c8d-8806-5744e4dabe9d": {
+      "id": "0c116509-b402-5c8d-8806-5744e4dabe9d",
       "label": "ModuleRef",
-      "parent": "d8bd964c-de23-5d00-b06b-670ea2de73af",
+      "parent": "419c0cf1-5c75-5001-9c7c-f4068e096458",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -258,10 +258,10 @@
         "token": "ModuleRef"
       }
     },
-    "42009d50-15f3-5533-9fb0-56be650c07c4": {
-      "id": "42009d50-15f3-5533-9fb0-56be650c07c4",
+    "56db34a2-f833-58bc-be40-8e832cf47839": {
+      "id": "56db34a2-f833-58bc-be40-8e832cf47839",
       "label": "ApplicationConfig",
-      "parent": "d8bd964c-de23-5d00-b06b-670ea2de73af",
+      "parent": "419c0cf1-5c75-5001-9c7c-f4068e096458",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -274,8 +274,8 @@
         "token": "ApplicationConfig"
       }
     },
-    "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e": {
-      "id": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
+    "190c0792-40e6-59da-a900-900f5421fbf3": {
+      "id": "190c0792-40e6-59da-a900-900f5421fbf3",
       "label": "AppModule",
       "metadata": {
         "type": "module",
@@ -284,10 +284,10 @@
         "internal": false
       }
     },
-    "62ef898c-93f9-5411-9a5d-cfcdc73e93ee": {
-      "id": "62ef898c-93f9-5411-9a5d-cfcdc73e93ee",
+    "858c2700-7202-5270-ae4a-e079de2e594d": {
+      "id": "858c2700-7202-5270-ae4a-e079de2e594d",
       "label": "AppModule",
-      "parent": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
+      "parent": "190c0792-40e6-59da-a900-900f5421fbf3",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -300,10 +300,10 @@
         "token": "AppModule"
       }
     },
-    "c2d780da-354b-5695-bdd8-f57674f2ab43": {
-      "id": "c2d780da-354b-5695-bdd8-f57674f2ab43",
+    "e122a91a-deac-56ad-b5df-7ab279321fbe": {
+      "id": "e122a91a-deac-56ad-b5df-7ab279321fbe",
       "label": "ModuleRef",
-      "parent": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
+      "parent": "190c0792-40e6-59da-a900-900f5421fbf3",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -316,10 +316,10 @@
         "token": "ModuleRef"
       }
     },
-    "f4b08010-a828-5e57-b763-713ea8ce14a4": {
-      "id": "f4b08010-a828-5e57-b763-713ea8ce14a4",
+    "bf91d262-6ac2-58f8-8132-3f83a2947364": {
+      "id": "bf91d262-6ac2-58f8-8132-3f83a2947364",
       "label": "ApplicationConfig",
-      "parent": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
+      "parent": "190c0792-40e6-59da-a900-900f5421fbf3",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -335,7 +335,7 @@
     "c58d72a9-efa9-586a-a61d-a3f6fce0df77": {
       "id": "c58d72a9-efa9-586a-a61d-a3f6fce0df77",
       "label": "AppV1Controller",
-      "parent": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
+      "parent": "190c0792-40e6-59da-a900-900f5421fbf3",
       "metadata": {
         "type": "controller",
         "internal": false,
@@ -350,7 +350,7 @@
     "ff454cab-300d-5318-98cb-d702256ea27c": {
       "id": "ff454cab-300d-5318-98cb-d702256ea27c",
       "label": "AppV2Controller",
-      "parent": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
+      "parent": "190c0792-40e6-59da-a900-900f5421fbf3",
       "metadata": {
         "type": "controller",
         "internal": false,
@@ -432,7 +432,7 @@
         "static": true,
         "transient": false,
         "exported": false,
-        "token": "APP_INTERCEPTOR (UUID: 2039dbe9-fda1-5fe2-8253-79f85aa611ef)",
+        "token": "APP_INTERCEPTOR (UUID: 4d1c64db-1eb5-5dad-81a6-db033e2c90f9)",
         "subtype": "interceptor",
         "global": true
       }
@@ -449,13 +449,13 @@
         "static": true,
         "transient": false,
         "exported": false,
-        "token": "APP_INTERCEPTOR (UUID: c76291d7-e5f2-5f75-ac78-1a0c771cba56)",
+        "token": "APP_INTERCEPTOR (UUID: ef427625-59f9-584b-8807-11e761f447fb)",
         "subtype": "interceptor",
         "global": true
       }
     },
-    "ff654e54-b225-59ff-9435-5856c3f023e6": {
-      "id": "ff654e54-b225-59ff-9435-5856c3f023e6",
+    "881c95d9-c95d-5e43-8c9e-8c837f7ef5fc": {
+      "id": "881c95d9-c95d-5e43-8c9e-8c837f7ef5fc",
       "label": "CatsModule",
       "metadata": {
         "type": "module",
@@ -464,10 +464,10 @@
         "internal": false
       }
     },
-    "7d4d50c1-5e42-5e87-9756-a02629ebc2b2": {
-      "id": "7d4d50c1-5e42-5e87-9756-a02629ebc2b2",
+    "6400d5fb-c5eb-58c8-baa6-7854bfe9220d": {
+      "id": "6400d5fb-c5eb-58c8-baa6-7854bfe9220d",
       "label": "CatsModule",
-      "parent": "ff654e54-b225-59ff-9435-5856c3f023e6",
+      "parent": "881c95d9-c95d-5e43-8c9e-8c837f7ef5fc",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -480,10 +480,10 @@
         "token": "CatsModule"
       }
     },
-    "2bf0bce0-780f-5388-8203-53067826d97b": {
-      "id": "2bf0bce0-780f-5388-8203-53067826d97b",
+    "05955a45-ac72-5f10-9f1c-74b3ecade567": {
+      "id": "05955a45-ac72-5f10-9f1c-74b3ecade567",
       "label": "ModuleRef",
-      "parent": "ff654e54-b225-59ff-9435-5856c3f023e6",
+      "parent": "881c95d9-c95d-5e43-8c9e-8c837f7ef5fc",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -496,10 +496,10 @@
         "token": "ModuleRef"
       }
     },
-    "033d92e8-d925-56ab-80c9-c51418cf29f2": {
-      "id": "033d92e8-d925-56ab-80c9-c51418cf29f2",
+    "98eafd3a-b2d5-5d15-a269-21318db9ac47": {
+      "id": "98eafd3a-b2d5-5d15-a269-21318db9ac47",
       "label": "ApplicationConfig",
-      "parent": "ff654e54-b225-59ff-9435-5856c3f023e6",
+      "parent": "881c95d9-c95d-5e43-8c9e-8c837f7ef5fc",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -512,10 +512,10 @@
         "token": "ApplicationConfig"
       }
     },
-    "66da07f0-0d07-501b-b783-869c9dac4d0c": {
-      "id": "66da07f0-0d07-501b-b783-869c9dac4d0c",
+    "7ee7d0cd-f4e7-54e5-a204-025b0a180c2f": {
+      "id": "7ee7d0cd-f4e7-54e5-a204-025b0a180c2f",
       "label": "CatsService",
-      "parent": "ff654e54-b225-59ff-9435-5856c3f023e6",
+      "parent": "881c95d9-c95d-5e43-8c9e-8c837f7ef5fc",
       "metadata": {
         "type": "provider",
         "internal": false,
@@ -530,7 +530,7 @@
     "02df382a-48e1-54d2-a16c-2322f9a13ed4": {
       "id": "02df382a-48e1-54d2-a16c-2322f9a13ed4",
       "label": "RolesGuard",
-      "parent": "ff654e54-b225-59ff-9435-5856c3f023e6",
+      "parent": "881c95d9-c95d-5e43-8c9e-8c837f7ef5fc",
       "metadata": {
         "type": "injectable",
         "internal": false,
@@ -546,7 +546,7 @@
     "9cd5ba23-0bdc-52f0-9e25-c478e0689f88": {
       "id": "9cd5ba23-0bdc-52f0-9e25-c478e0689f88",
       "label": "CatsController",
-      "parent": "ff654e54-b225-59ff-9435-5856c3f023e6",
+      "parent": "881c95d9-c95d-5e43-8c9e-8c837f7ef5fc",
       "metadata": {
         "type": "controller",
         "internal": false,
@@ -569,8 +569,8 @@
         ]
       }
     },
-    "c3f045fc-20d0-5ef4-b271-7cb89aa8c5cf": {
-      "id": "c3f045fc-20d0-5ef4-b271-7cb89aa8c5cf",
+    "83323fa4-1058-50ca-afd1-186e9b44528e": {
+      "id": "83323fa4-1058-50ca-afd1-186e9b44528e",
       "label": "HelloModule",
       "metadata": {
         "type": "module",
@@ -579,10 +579,10 @@
         "internal": false
       }
     },
-    "02a39df5-5e06-5700-9d18-b60515336df3": {
-      "id": "02a39df5-5e06-5700-9d18-b60515336df3",
+    "ca6529cf-19c0-5d1a-ac52-6f21455fbca5": {
+      "id": "ca6529cf-19c0-5d1a-ac52-6f21455fbca5",
       "label": "HelloModule",
-      "parent": "c3f045fc-20d0-5ef4-b271-7cb89aa8c5cf",
+      "parent": "83323fa4-1058-50ca-afd1-186e9b44528e",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -595,10 +595,10 @@
         "token": "HelloModule"
       }
     },
-    "b5b055a4-1c73-535a-a11f-532afa5cd3a5": {
-      "id": "b5b055a4-1c73-535a-a11f-532afa5cd3a5",
+    "884b8400-c115-5286-9d7e-9d2603ff1688": {
+      "id": "884b8400-c115-5286-9d7e-9d2603ff1688",
       "label": "ModuleRef",
-      "parent": "c3f045fc-20d0-5ef4-b271-7cb89aa8c5cf",
+      "parent": "83323fa4-1058-50ca-afd1-186e9b44528e",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -611,10 +611,10 @@
         "token": "ModuleRef"
       }
     },
-    "04381b7d-6c07-566e-8406-1a7512b287ad": {
-      "id": "04381b7d-6c07-566e-8406-1a7512b287ad",
+    "faa1f549-1f2f-56e3-8462-79a2c818d33e": {
+      "id": "faa1f549-1f2f-56e3-8462-79a2c818d33e",
       "label": "ApplicationConfig",
-      "parent": "c3f045fc-20d0-5ef4-b271-7cb89aa8c5cf",
+      "parent": "83323fa4-1058-50ca-afd1-186e9b44528e",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -627,10 +627,10 @@
         "token": "ApplicationConfig"
       }
     },
-    "faa725fd-ae13-5c49-9ca5-061fbbab787e": {
-      "id": "faa725fd-ae13-5c49-9ca5-061fbbab787e",
+    "f95f0452-ba3c-5749-aead-d4d34a6235d3": {
+      "id": "f95f0452-ba3c-5749-aead-d4d34a6235d3",
       "label": "HelloService",
-      "parent": "c3f045fc-20d0-5ef4-b271-7cb89aa8c5cf",
+      "parent": "83323fa4-1058-50ca-afd1-186e9b44528e",
       "metadata": {
         "type": "provider",
         "internal": false,
@@ -643,10 +643,10 @@
         "token": "HelloService"
       }
     },
-    "d77a662b-e5f5-523d-946b-211624d7497c": {
-      "id": "d77a662b-e5f5-523d-946b-211624d7497c",
+    "028385ff-10ad-5a1c-851e-d4ca2bdf8e5d": {
+      "id": "028385ff-10ad-5a1c-851e-d4ca2bdf8e5d",
       "label": "UsersService",
-      "parent": "c3f045fc-20d0-5ef4-b271-7cb89aa8c5cf",
+      "parent": "83323fa4-1058-50ca-afd1-186e9b44528e",
       "metadata": {
         "type": "provider",
         "internal": false,
@@ -662,7 +662,7 @@
     "6676173c-ce2a-51d3-952a-93fa8c7a3923": {
       "id": "6676173c-ce2a-51d3-952a-93fa8c7a3923",
       "label": "Meta",
-      "parent": "c3f045fc-20d0-5ef4-b271-7cb89aa8c5cf",
+      "parent": "83323fa4-1058-50ca-afd1-186e9b44528e",
       "metadata": {
         "type": "provider",
         "internal": false,
@@ -678,7 +678,7 @@
     "beeb3251-4b2b-5810-a4ec-ed05623a7557": {
       "id": "beeb3251-4b2b-5810-a4ec-ed05623a7557",
       "label": "Guard",
-      "parent": "c3f045fc-20d0-5ef4-b271-7cb89aa8c5cf",
+      "parent": "83323fa4-1058-50ca-afd1-186e9b44528e",
       "metadata": {
         "type": "injectable",
         "internal": false,
@@ -695,7 +695,7 @@
     "0ea50366-8cd7-5410-91f4-5a140b2a5fe9": {
       "id": "0ea50366-8cd7-5410-91f4-5a140b2a5fe9",
       "label": "Interceptor",
-      "parent": "c3f045fc-20d0-5ef4-b271-7cb89aa8c5cf",
+      "parent": "83323fa4-1058-50ca-afd1-186e9b44528e",
       "metadata": {
         "type": "injectable",
         "internal": false,
@@ -709,10 +709,10 @@
         "subtype": "interceptor"
       }
     },
-    "d8184163-323d-511e-b2a0-368003f3425a": {
-      "id": "d8184163-323d-511e-b2a0-368003f3425a",
+    "317c5d2d-4c46-5b39-83e8-c27aa64a1edd": {
+      "id": "317c5d2d-4c46-5b39-83e8-c27aa64a1edd",
       "label": "UserByIdPipe",
-      "parent": "c3f045fc-20d0-5ef4-b271-7cb89aa8c5cf",
+      "parent": "83323fa4-1058-50ca-afd1-186e9b44528e",
       "metadata": {
         "type": "injectable",
         "internal": false,
@@ -725,10 +725,10 @@
         "subtype": "pipe"
       }
     },
-    "c6535829-8ec6-5852-b1f5-2a1332218877": {
-      "id": "c6535829-8ec6-5852-b1f5-2a1332218877",
+    "769e8ad6-f9f6-515d-83f5-9c6a8e6ebc54": {
+      "id": "769e8ad6-f9f6-515d-83f5-9c6a8e6ebc54",
       "label": "HelloController",
-      "parent": "c3f045fc-20d0-5ef4-b271-7cb89aa8c5cf",
+      "parent": "83323fa4-1058-50ca-afd1-186e9b44528e",
       "metadata": {
         "type": "controller",
         "internal": false,
@@ -750,7 +750,7 @@
             "subtype": "interceptor"
           },
           {
-            "id": "d8184163-323d-511e-b2a0-368003f3425a",
+            "id": "317c5d2d-4c46-5b39-83e8-c27aa64a1edd",
             "methodKey": "greeting",
             "subtype": "pipe"
           }
@@ -1471,8 +1471,8 @@
         "token": "HelperService"
       }
     },
-    "1ef97d71-97a2-5b1b-891c-5c823511343c": {
-      "id": "1ef97d71-97a2-5b1b-891c-5c823511343c",
+    "f5e96eaf-21c4-533f-8324-a118e7763b54": {
+      "id": "f5e96eaf-21c4-533f-8324-a118e7763b54",
       "label": "PropertiesModule",
       "metadata": {
         "type": "module",
@@ -1481,10 +1481,10 @@
         "internal": false
       }
     },
-    "2adbdd35-3104-5c91-8106-347bb586b56b": {
-      "id": "2adbdd35-3104-5c91-8106-347bb586b56b",
+    "652c9c93-f2ce-581f-9b87-0aa3182ef701": {
+      "id": "652c9c93-f2ce-581f-9b87-0aa3182ef701",
       "label": "PropertiesModule",
-      "parent": "1ef97d71-97a2-5b1b-891c-5c823511343c",
+      "parent": "f5e96eaf-21c4-533f-8324-a118e7763b54",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -1497,10 +1497,10 @@
         "token": "PropertiesModule"
       }
     },
-    "b24a24c0-4913-50f2-9b37-f2434cc60bc5": {
-      "id": "b24a24c0-4913-50f2-9b37-f2434cc60bc5",
+    "17db7eca-bb20-52e6-8651-473a37307dd4": {
+      "id": "17db7eca-bb20-52e6-8651-473a37307dd4",
       "label": "ModuleRef",
-      "parent": "1ef97d71-97a2-5b1b-891c-5c823511343c",
+      "parent": "f5e96eaf-21c4-533f-8324-a118e7763b54",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -1513,10 +1513,10 @@
         "token": "ModuleRef"
       }
     },
-    "a372752b-0bde-5c42-b235-e4e0b7535ecf": {
-      "id": "a372752b-0bde-5c42-b235-e4e0b7535ecf",
+    "1804e686-cc4b-50f9-9f1f-c412d8be76d0": {
+      "id": "1804e686-cc4b-50f9-9f1f-c412d8be76d0",
       "label": "ApplicationConfig",
-      "parent": "1ef97d71-97a2-5b1b-891c-5c823511343c",
+      "parent": "f5e96eaf-21c4-533f-8324-a118e7763b54",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -1529,10 +1529,10 @@
         "token": "ApplicationConfig"
       }
     },
-    "37849930-7360-509c-abde-733fb268c8dc": {
-      "id": "37849930-7360-509c-abde-733fb268c8dc",
+    "ce56b867-fe35-5579-b455-3f33e161c418": {
+      "id": "ce56b867-fe35-5579-b455-3f33e161c418",
       "label": "DependencyService",
-      "parent": "1ef97d71-97a2-5b1b-891c-5c823511343c",
+      "parent": "f5e96eaf-21c4-533f-8324-a118e7763b54",
       "metadata": {
         "type": "provider",
         "internal": false,
@@ -1544,10 +1544,10 @@
         "token": "DependencyService"
       }
     },
-    "f1efd40f-12c0-5bf8-a499-fa63f5b6a77c": {
-      "id": "f1efd40f-12c0-5bf8-a499-fa63f5b6a77c",
+    "bc426371-e5ad-55f4-895a-6701455d2b40": {
+      "id": "bc426371-e5ad-55f4-895a-6701455d2b40",
       "label": "PropertiesService",
-      "parent": "1ef97d71-97a2-5b1b-891c-5c823511343c",
+      "parent": "f5e96eaf-21c4-533f-8324-a118e7763b54",
       "metadata": {
         "type": "provider",
         "internal": false,
@@ -1559,10 +1559,10 @@
         "token": "PropertiesService"
       }
     },
-    "822f3a86-ab6f-58ec-8ca5-73d0f3371b8a": {
-      "id": "822f3a86-ab6f-58ec-8ca5-73d0f3371b8a",
+    "576fbd85-f97e-54b2-bf76-87ed5c2df2ed": {
+      "id": "576fbd85-f97e-54b2-bf76-87ed5c2df2ed",
       "label": "token",
-      "parent": "1ef97d71-97a2-5b1b-891c-5c823511343c",
+      "parent": "f5e96eaf-21c4-533f-8324-a118e7763b54",
       "metadata": {
         "type": "provider",
         "internal": false,
@@ -1575,10 +1575,10 @@
         "token": "token"
       }
     },
-    "d07d69a1-3a51-5605-8463-2d1625d2c1c6": {
-      "id": "d07d69a1-3a51-5605-8463-2d1625d2c1c6",
+    "d8a13bee-462c-5e09-862b-8a50ba181163": {
+      "id": "d8a13bee-462c-5e09-862b-8a50ba181163",
       "label": "Symbol(token)",
-      "parent": "1ef97d71-97a2-5b1b-891c-5c823511343c",
+      "parent": "f5e96eaf-21c4-533f-8324-a118e7763b54",
       "metadata": {
         "type": "provider",
         "internal": false,
@@ -1591,8 +1591,8 @@
         "token": "Symbol(token)"
       }
     },
-    "0e41b294-78d8-5f2a-8889-3a3ddc0f7c3d": {
-      "id": "0e41b294-78d8-5f2a-8889-3a3ddc0f7c3d",
+    "8d33008c-4294-5979-987b-4b50bb077c85": {
+      "id": "8d33008c-4294-5979-987b-4b50bb077c85",
       "label": "InputModule",
       "metadata": {
         "type": "module",
@@ -1601,10 +1601,10 @@
         "internal": false
       }
     },
-    "6f480ce1-6367-5d66-8009-afb93b21b72a": {
-      "id": "6f480ce1-6367-5d66-8009-afb93b21b72a",
+    "259ccdaa-e714-56ce-9a8d-4d6c60a10f0d": {
+      "id": "259ccdaa-e714-56ce-9a8d-4d6c60a10f0d",
       "label": "InputModule",
-      "parent": "0e41b294-78d8-5f2a-8889-3a3ddc0f7c3d",
+      "parent": "8d33008c-4294-5979-987b-4b50bb077c85",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -1617,10 +1617,10 @@
         "token": "InputModule"
       }
     },
-    "de2537f0-a428-5f07-8b21-07fbc694ae80": {
-      "id": "de2537f0-a428-5f07-8b21-07fbc694ae80",
+    "829c226a-332a-5c54-8a20-ebb93b182709": {
+      "id": "829c226a-332a-5c54-8a20-ebb93b182709",
       "label": "ModuleRef",
-      "parent": "0e41b294-78d8-5f2a-8889-3a3ddc0f7c3d",
+      "parent": "8d33008c-4294-5979-987b-4b50bb077c85",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -1633,10 +1633,10 @@
         "token": "ModuleRef"
       }
     },
-    "88585ed2-947c-5ffa-b088-42315ad2a900": {
-      "id": "88585ed2-947c-5ffa-b088-42315ad2a900",
+    "081822dc-eb43-5000-8038-acf089f629be": {
+      "id": "081822dc-eb43-5000-8038-acf089f629be",
       "label": "ApplicationConfig",
-      "parent": "0e41b294-78d8-5f2a-8889-3a3ddc0f7c3d",
+      "parent": "8d33008c-4294-5979-987b-4b50bb077c85",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -1649,10 +1649,10 @@
         "token": "ApplicationConfig"
       }
     },
-    "8320566b-f7d2-5802-9603-faa2ff1fdbef": {
-      "id": "8320566b-f7d2-5802-9603-faa2ff1fdbef",
+    "98d04266-c04c-5406-9e26-7be953a58803": {
+      "id": "98d04266-c04c-5406-9e26-7be953a58803",
       "label": "InputService",
-      "parent": "0e41b294-78d8-5f2a-8889-3a3ddc0f7c3d",
+      "parent": "8d33008c-4294-5979-987b-4b50bb077c85",
       "metadata": {
         "type": "provider",
         "internal": false,
@@ -1664,8 +1664,8 @@
         "token": "InputService"
       }
     },
-    "746cc074-e478-5e4b-8381-f1af1e2ae09f": {
-      "id": "746cc074-e478-5e4b-8381-f1af1e2ae09f",
+    "51b4619f-17da-58cc-a918-8bd2de787ade": {
+      "id": "51b4619f-17da-58cc-a918-8bd2de787ade",
       "label": "CircularModule",
       "metadata": {
         "type": "module",
@@ -1674,10 +1674,10 @@
         "internal": false
       }
     },
-    "93e005c4-999c-56b5-88f3-6ea5eb2d8b0f": {
-      "id": "93e005c4-999c-56b5-88f3-6ea5eb2d8b0f",
+    "ac22164f-01ec-5409-8e12-2bace8542fd0": {
+      "id": "ac22164f-01ec-5409-8e12-2bace8542fd0",
       "label": "CircularModule",
-      "parent": "746cc074-e478-5e4b-8381-f1af1e2ae09f",
+      "parent": "51b4619f-17da-58cc-a918-8bd2de787ade",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -1690,10 +1690,10 @@
         "token": "CircularModule"
       }
     },
-    "8d3a2f87-2876-592b-9035-3f9a6c36a857": {
-      "id": "8d3a2f87-2876-592b-9035-3f9a6c36a857",
+    "4f6ecfd6-8413-5f57-bf0e-f2e9c7cad0a6": {
+      "id": "4f6ecfd6-8413-5f57-bf0e-f2e9c7cad0a6",
       "label": "ModuleRef",
-      "parent": "746cc074-e478-5e4b-8381-f1af1e2ae09f",
+      "parent": "51b4619f-17da-58cc-a918-8bd2de787ade",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -1706,10 +1706,10 @@
         "token": "ModuleRef"
       }
     },
-    "265e9357-d8dc-51f1-aea9-81c447e46902": {
-      "id": "265e9357-d8dc-51f1-aea9-81c447e46902",
+    "ed4a6c21-f47a-5b6d-ae32-f4ddc0a22b05": {
+      "id": "ed4a6c21-f47a-5b6d-ae32-f4ddc0a22b05",
       "label": "ApplicationConfig",
-      "parent": "746cc074-e478-5e4b-8381-f1af1e2ae09f",
+      "parent": "51b4619f-17da-58cc-a918-8bd2de787ade",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -1722,10 +1722,10 @@
         "token": "ApplicationConfig"
       }
     },
-    "64c961f0-cb2e-53e5-95a5-590ab811d0d5": {
-      "id": "64c961f0-cb2e-53e5-95a5-590ab811d0d5",
+    "814286f5-6afc-5fe8-bd31-9e49252b3e84": {
+      "id": "814286f5-6afc-5fe8-bd31-9e49252b3e84",
       "label": "CircularService",
-      "parent": "746cc074-e478-5e4b-8381-f1af1e2ae09f",
+      "parent": "51b4619f-17da-58cc-a918-8bd2de787ade",
       "metadata": {
         "type": "provider",
         "internal": false,
@@ -1754,9 +1754,9 @@
     }
   },
   "edges": {
-    "883d83bd-11dc-5741-a542-aa8e353fbd0f": {
-      "source": "a70e728e-bd78-59c8-82c3-677db604d485",
-      "target": "f3784e54-6f1e-5b0b-a054-8f0ce00b5a26",
+    "dc9bef27-dac6-5a49-9441-645e70895c1b": {
+      "source": "82a7deba-d4bb-51f7-b591-6f0810c62dde",
+      "target": "02d5a2da-8413-5244-aea2-e99a9b2a47a1",
       "metadata": {
         "type": "class-to-class",
         "sourceModuleName": "InternalCoreModule",
@@ -1769,11 +1769,11 @@
         "injectionType": "constructor",
         "internal": true
       },
-      "id": "883d83bd-11dc-5741-a542-aa8e353fbd0f"
+      "id": "dc9bef27-dac6-5a49-9441-645e70895c1b"
     },
-    "7b797b5b-e91a-5cc6-9100-7330592d81c9": {
-      "source": "64c961f0-cb2e-53e5-95a5-590ab811d0d5",
-      "target": "8320566b-f7d2-5802-9603-faa2ff1fdbef",
+    "552073d3-f2c5-54dc-9858-4b83b6e7232c": {
+      "source": "814286f5-6afc-5fe8-bd31-9e49252b3e84",
+      "target": "98d04266-c04c-5406-9e26-7be953a58803",
       "metadata": {
         "type": "class-to-class",
         "sourceModuleName": "CircularModule",
@@ -1785,11 +1785,11 @@
         "keyOrIndex": 0,
         "injectionType": "constructor"
       },
-      "id": "7b797b5b-e91a-5cc6-9100-7330592d81c9"
+      "id": "552073d3-f2c5-54dc-9858-4b83b6e7232c"
     },
-    "1652c590-de47-5c4c-ae22-8d88e1663175": {
-      "source": "f1efd40f-12c0-5bf8-a499-fa63f5b6a77c",
-      "target": "37849930-7360-509c-abde-733fb268c8dc",
+    "13671bfb-15c2-53da-91b7-d3cb1bd7aa30": {
+      "source": "bc426371-e5ad-55f4-895a-6701455d2b40",
+      "target": "ce56b867-fe35-5579-b455-3f33e161c418",
       "metadata": {
         "type": "class-to-class",
         "sourceModuleName": "PropertiesModule",
@@ -1801,11 +1801,11 @@
         "keyOrIndex": "service",
         "injectionType": "property"
       },
-      "id": "1652c590-de47-5c4c-ae22-8d88e1663175"
+      "id": "13671bfb-15c2-53da-91b7-d3cb1bd7aa30"
     },
-    "75a05070-c244-56f7-b89b-bf0830498329": {
-      "source": "f1efd40f-12c0-5bf8-a499-fa63f5b6a77c",
-      "target": "822f3a86-ab6f-58ec-8ca5-73d0f3371b8a",
+    "762418b1-e772-5025-992c-ab319bbc8e52": {
+      "source": "bc426371-e5ad-55f4-895a-6701455d2b40",
+      "target": "576fbd85-f97e-54b2-bf76-87ed5c2df2ed",
       "metadata": {
         "type": "class-to-class",
         "sourceModuleName": "PropertiesModule",
@@ -1817,11 +1817,11 @@
         "keyOrIndex": "token",
         "injectionType": "property"
       },
-      "id": "75a05070-c244-56f7-b89b-bf0830498329"
+      "id": "762418b1-e772-5025-992c-ab319bbc8e52"
     },
-    "a77c5fa0-6de5-5655-9bb1-25487bd6aa04": {
-      "source": "f1efd40f-12c0-5bf8-a499-fa63f5b6a77c",
-      "target": "d07d69a1-3a51-5605-8463-2d1625d2c1c6",
+    "a131d39b-ff7b-5691-9428-34ad12d93e6e": {
+      "source": "bc426371-e5ad-55f4-895a-6701455d2b40",
+      "target": "d8a13bee-462c-5e09-862b-8a50ba181163",
       "metadata": {
         "type": "class-to-class",
         "sourceModuleName": "PropertiesModule",
@@ -1833,11 +1833,11 @@
         "keyOrIndex": "symbolToken",
         "injectionType": "property"
       },
-      "id": "a77c5fa0-6de5-5655-9bb1-25487bd6aa04"
+      "id": "a131d39b-ff7b-5691-9428-34ad12d93e6e"
     },
-    "ff034dba-9e7f-5ae7-8823-1feab50720a8": {
-      "source": "1bd85856-6a0d-5ad9-b5ab-4e446f49a760",
-      "target": "0f97a46c-8619-5a59-a84d-bc0af7a2f49c",
+    "617b6c39-f865-514a-a7a4-8195c1442b7b": {
+      "source": "c0b09f2c-4660-5a02-a030-78bfa806c398",
+      "target": "5ee7ae73-b49c-5410-bf8b-1cea1fc2727b",
       "metadata": {
         "type": "class-to-class",
         "sourceModuleName": "InternalCoreModule",
@@ -1850,10 +1850,10 @@
         "injectionType": "constructor",
         "internal": true
       },
-      "id": "ff034dba-9e7f-5ae7-8823-1feab50720a8"
+      "id": "617b6c39-f865-514a-a7a4-8195c1442b7b"
     },
-    "efc5503f-e3e9-548f-a58a-c303d130e6e7": {
-      "source": "02a39df5-5e06-5700-9d18-b60515336df3",
+    "d90d6621-f877-56aa-826c-5ba4b3f95f12": {
+      "source": "ca6529cf-19c0-5d1a-ac52-6f21455fbca5",
       "target": "6676173c-ce2a-51d3-952a-93fa8c7a3923",
       "metadata": {
         "type": "class-to-class",
@@ -1866,10 +1866,10 @@
         "keyOrIndex": 0,
         "injectionType": "constructor"
       },
-      "id": "efc5503f-e3e9-548f-a58a-c303d130e6e7"
+      "id": "d90d6621-f877-56aa-826c-5ba4b3f95f12"
     },
-    "95485fc7-feac-5945-aa29-e0f1d4cc6119": {
-      "source": "faa725fd-ae13-5c49-9ca5-061fbbab787e",
+    "21e8c0ef-65e0-5a7c-a084-019887ba2fc1": {
+      "source": "f95f0452-ba3c-5749-aead-d4d34a6235d3",
       "target": "6676173c-ce2a-51d3-952a-93fa8c7a3923",
       "metadata": {
         "type": "class-to-class",
@@ -1882,10 +1882,10 @@
         "keyOrIndex": 0,
         "injectionType": "constructor"
       },
-      "id": "95485fc7-feac-5945-aa29-e0f1d4cc6119"
+      "id": "21e8c0ef-65e0-5a7c-a084-019887ba2fc1"
     },
-    "6958b8d2-f4c9-5d98-9da4-a10a294262b2": {
-      "source": "d77a662b-e5f5-523d-946b-211624d7497c",
+    "f29b9103-59b6-52b8-9d29-9717f9280246": {
+      "source": "028385ff-10ad-5a1c-851e-d4ca2bdf8e5d",
       "target": "6676173c-ce2a-51d3-952a-93fa8c7a3923",
       "metadata": {
         "type": "class-to-class",
@@ -1898,7 +1898,7 @@
         "keyOrIndex": 0,
         "injectionType": "constructor"
       },
-      "id": "6958b8d2-f4c9-5d98-9da4-a10a294262b2"
+      "id": "f29b9103-59b6-52b8-9d29-9717f9280246"
     },
     "943b4528-d32f-5929-b6af-360bf3a4972a": {
       "source": "88f1f0a0-285c-5d09-ae0a-61313d7ba1c3",
@@ -1916,9 +1916,9 @@
       },
       "id": "943b4528-d32f-5929-b6af-360bf3a4972a"
     },
-    "c5ba7998-5ad7-5f4b-a2b9-b25aa2494d65": {
+    "6826749b-2fe6-5f56-ada6-e619292cbf8b": {
       "source": "aebfd5cb-285b-5ea8-b10a-22b8ec75dc48",
-      "target": "98fbcd2c-b5dc-5819-b1c1-a8540f39a343",
+      "target": "78cb636b-37ad-583d-8d4f-f322886f43f9",
       "metadata": {
         "type": "class-to-class",
         "sourceModuleName": "DurableModule",
@@ -1931,11 +1931,11 @@
         "injectionType": "constructor",
         "internal": true
       },
-      "id": "c5ba7998-5ad7-5f4b-a2b9-b25aa2494d65"
+      "id": "6826749b-2fe6-5f56-ada6-e619292cbf8b"
     },
-    "b474b908-5c65-5711-9453-22afeed92ec4": {
+    "603c685b-36de-5d5d-a13b-348f419e11f9": {
       "source": "639fd5ea-03c8-52ed-90a1-65d76f46b662",
-      "target": "98fbcd2c-b5dc-5819-b1c1-a8540f39a343",
+      "target": "78cb636b-37ad-583d-8d4f-f322886f43f9",
       "metadata": {
         "type": "class-to-class",
         "sourceModuleName": "HelperModule",
@@ -1948,11 +1948,11 @@
         "injectionType": "constructor",
         "internal": true
       },
-      "id": "b474b908-5c65-5711-9453-22afeed92ec4"
+      "id": "603c685b-36de-5d5d-a13b-348f419e11f9"
     },
-    "dd41e29b-b05d-5b77-85f9-0c0a71130285": {
+    "ed589357-ef7e-5537-ba11-94db263976f4": {
       "source": "02df382a-48e1-54d2-a16c-2322f9a13ed4",
-      "target": "0f97a46c-8619-5a59-a84d-bc0af7a2f49c",
+      "target": "5ee7ae73-b49c-5410-bf8b-1cea1fc2727b",
       "metadata": {
         "type": "class-to-class",
         "sourceModuleName": "CatsModule",
@@ -1965,7 +1965,7 @@
         "injectionType": "constructor",
         "internal": true
       },
-      "id": "dd41e29b-b05d-5b77-85f9-0c0a71130285"
+      "id": "ed589357-ef7e-5537-ba11-94db263976f4"
     },
     "aa096600-fa82-55f6-9c90-000509c8d2d0": {
       "source": "a769a8d9-6245-5479-8822-cbdb27f9c2b4",
@@ -2031,9 +2031,9 @@
       },
       "id": "4c938b43-3a4d-5cb9-8891-f6e8e25765e8"
     },
-    "c995fb45-6e6b-51ce-b7e7-bb514870a884": {
-      "source": "8320566b-f7d2-5802-9603-faa2ff1fdbef",
-      "target": "64c961f0-cb2e-53e5-95a5-590ab811d0d5",
+    "f499705b-2c1d-5992-8f80-75e7abd57eda": {
+      "source": "98d04266-c04c-5406-9e26-7be953a58803",
+      "target": "814286f5-6afc-5fe8-bd31-9e49252b3e84",
       "metadata": {
         "type": "class-to-class",
         "sourceModuleName": "InputModule",
@@ -2045,11 +2045,11 @@
         "keyOrIndex": 0,
         "injectionType": "constructor"
       },
-      "id": "c995fb45-6e6b-51ce-b7e7-bb514870a884"
+      "id": "f499705b-2c1d-5992-8f80-75e7abd57eda"
     },
-    "706b2812-7325-501f-98fd-479d8782f3ba": {
-      "source": "d8184163-323d-511e-b2a0-368003f3425a",
-      "target": "d77a662b-e5f5-523d-946b-211624d7497c",
+    "333ce738-ca0b-557e-91cd-aedd9f697ad8": {
+      "source": "317c5d2d-4c46-5b39-83e8-c27aa64a1edd",
+      "target": "028385ff-10ad-5a1c-851e-d4ca2bdf8e5d",
       "metadata": {
         "type": "class-to-class",
         "sourceModuleName": "HelloModule",
@@ -2061,7 +2061,7 @@
         "keyOrIndex": 0,
         "injectionType": "constructor"
       },
-      "id": "706b2812-7325-501f-98fd-479d8782f3ba"
+      "id": "333ce738-ca0b-557e-91cd-aedd9f697ad8"
     },
     "6f5134a4-f7f3-51ba-bfbb-8bafc10a407f": {
       "source": "b08bf57c-5956-57a2-b901-b4e41243e0ba",
@@ -2095,9 +2095,9 @@
       },
       "id": "641bcf28-5c94-5b7e-a3ec-39695a110809"
     },
-    "33b2cfb2-f3e9-5aff-9caa-2361e394b662": {
+    "9e818131-9b06-522c-81f3-97ac728fb2e9": {
       "source": "9cd5ba23-0bdc-52f0-9e25-c478e0689f88",
-      "target": "66da07f0-0d07-501b-b783-869c9dac4d0c",
+      "target": "7ee7d0cd-f4e7-54e5-a204-025b0a180c2f",
       "metadata": {
         "type": "class-to-class",
         "sourceModuleName": "CatsModule",
@@ -2109,11 +2109,11 @@
         "keyOrIndex": 0,
         "injectionType": "constructor"
       },
-      "id": "33b2cfb2-f3e9-5aff-9caa-2361e394b662"
+      "id": "9e818131-9b06-522c-81f3-97ac728fb2e9"
     },
-    "7b630278-4dcd-5f83-8d02-03399f4dc779": {
-      "source": "c6535829-8ec6-5852-b1f5-2a1332218877",
-      "target": "faa725fd-ae13-5c49-9ca5-061fbbab787e",
+    "f030355a-5b10-5794-8395-b87966c04f8b": {
+      "source": "769e8ad6-f9f6-515d-83f5-9c6a8e6ebc54",
+      "target": "f95f0452-ba3c-5749-aead-d4d34a6235d3",
       "metadata": {
         "type": "class-to-class",
         "sourceModuleName": "HelloModule",
@@ -2125,11 +2125,11 @@
         "keyOrIndex": 0,
         "injectionType": "constructor"
       },
-      "id": "7b630278-4dcd-5f83-8d02-03399f4dc779"
+      "id": "f030355a-5b10-5794-8395-b87966c04f8b"
     },
-    "5e789513-07cb-557f-9427-eca333315dfb": {
-      "source": "c6535829-8ec6-5852-b1f5-2a1332218877",
-      "target": "d77a662b-e5f5-523d-946b-211624d7497c",
+    "0f621b9b-8472-546e-9efa-9d1b6f0ac867": {
+      "source": "769e8ad6-f9f6-515d-83f5-9c6a8e6ebc54",
+      "target": "028385ff-10ad-5a1c-851e-d4ca2bdf8e5d",
       "metadata": {
         "type": "class-to-class",
         "sourceModuleName": "HelloModule",
@@ -2141,7 +2141,7 @@
         "keyOrIndex": 1,
         "injectionType": "constructor"
       },
-      "id": "5e789513-07cb-557f-9427-eca333315dfb"
+      "id": "0f621b9b-8472-546e-9efa-9d1b6f0ac867"
     },
     "c9c6d848-223a-59fc-be2a-525c9cee8001": {
       "source": "febfc01c-9a3c-5bd8-8150-feaeb7ed0781",
@@ -2175,245 +2175,245 @@
       },
       "id": "216e6db0-e31a-5239-adc5-178cf17232df"
     },
-    "696b3f30-3c36-52a6-b77c-53380384849a": {
-      "source": "d8bd964c-de23-5d00-b06b-670ea2de73af",
-      "target": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
+    "204775bf-5308-5823-9cd7-755fd45ec1ad": {
+      "source": "419c0cf1-5c75-5001-9c7c-f4068e096458",
+      "target": "190c0792-40e6-59da-a900-900f5421fbf3",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "RootTestModule",
         "targetModuleName": "AppModule"
       },
-      "id": "696b3f30-3c36-52a6-b77c-53380384849a"
+      "id": "204775bf-5308-5823-9cd7-755fd45ec1ad"
     },
-    "24fab9f2-9034-5fec-88ea-f60703d55746": {
-      "source": "d8bd964c-de23-5d00-b06b-670ea2de73af",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+    "7cab9450-4ebb-5390-be71-0e1d45e8192e": {
+      "source": "419c0cf1-5c75-5001-9c7c-f4068e096458",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "RootTestModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "24fab9f2-9034-5fec-88ea-f60703d55746"
+      "id": "7cab9450-4ebb-5390-be71-0e1d45e8192e"
     },
-    "8265e34f-74df-5723-8342-12f29f099617": {
-      "source": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
+    "156ba1f5-a3c2-5842-9579-df66d731c856": {
+      "source": "190c0792-40e6-59da-a900-900f5421fbf3",
       "target": "cb7b08c4-a986-5118-8811-cebf00c9ad57",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "AppModule",
         "targetModuleName": "CoreModule"
       },
-      "id": "8265e34f-74df-5723-8342-12f29f099617"
+      "id": "156ba1f5-a3c2-5842-9579-df66d731c856"
     },
-    "d38f158c-13fa-5818-95fd-cf3a2127b198": {
-      "source": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
-      "target": "ff654e54-b225-59ff-9435-5856c3f023e6",
+    "51d961af-436c-562c-afa0-54e916822ec6": {
+      "source": "190c0792-40e6-59da-a900-900f5421fbf3",
+      "target": "881c95d9-c95d-5e43-8c9e-8c837f7ef5fc",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "AppModule",
         "targetModuleName": "CatsModule"
       },
-      "id": "d38f158c-13fa-5818-95fd-cf3a2127b198"
+      "id": "51d961af-436c-562c-afa0-54e916822ec6"
     },
-    "e9605d46-6a3a-5025-94ec-5422dd0dd1ea": {
-      "source": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
-      "target": "c3f045fc-20d0-5ef4-b271-7cb89aa8c5cf",
+    "20671238-7477-580a-b1fc-29a6fef62992": {
+      "source": "190c0792-40e6-59da-a900-900f5421fbf3",
+      "target": "83323fa4-1058-50ca-afd1-186e9b44528e",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "AppModule",
         "targetModuleName": "HelloModule"
       },
-      "id": "e9605d46-6a3a-5025-94ec-5422dd0dd1ea"
+      "id": "20671238-7477-580a-b1fc-29a6fef62992"
     },
-    "99b36155-6b9e-5aa2-a540-7b1ad68e4ad6": {
-      "source": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
+    "cc8acca8-9bff-53ca-9481-0a5e2a651d75": {
+      "source": "190c0792-40e6-59da-a900-900f5421fbf3",
       "target": "da1314a2-cdd6-5915-9a1f-a0db319b2a0a",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "AppModule",
         "targetModuleName": "DurableModule"
       },
-      "id": "99b36155-6b9e-5aa2-a540-7b1ad68e4ad6"
+      "id": "cc8acca8-9bff-53ca-9481-0a5e2a651d75"
     },
-    "b1ea7c81-a642-5313-a6bb-ca69816a0200": {
-      "source": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
+    "aa4a2aa2-aa32-5dcd-add6-6e27a8942a2e": {
+      "source": "190c0792-40e6-59da-a900-900f5421fbf3",
       "target": "038094a4-e405-516e-a3a8-c554fe07fa96",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "AppModule",
         "targetModuleName": "DogsModule"
       },
-      "id": "b1ea7c81-a642-5313-a6bb-ca69816a0200"
+      "id": "aa4a2aa2-aa32-5dcd-add6-6e27a8942a2e"
     },
-    "7cae432f-2982-51cb-b27c-72a68a753372": {
-      "source": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
+    "83775522-4d64-57a9-bce2-90935e3552c7": {
+      "source": "190c0792-40e6-59da-a900-900f5421fbf3",
       "target": "d179d559-dd09-5660-bd2b-f204b8ed7baa",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "AppModule",
         "targetModuleName": "UsersModule"
       },
-      "id": "7cae432f-2982-51cb-b27c-72a68a753372"
+      "id": "83775522-4d64-57a9-bce2-90935e3552c7"
     },
-    "4176ae81-5378-5672-856b-d11a6a02f55f": {
-      "source": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
+    "2721f189-5437-543c-a0dc-77962e66d11f": {
+      "source": "190c0792-40e6-59da-a900-900f5421fbf3",
       "target": "d67cef96-6f3b-5efe-82c0-17b967daa5c5",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "AppModule",
         "targetModuleName": "DatabaseModule"
       },
-      "id": "4176ae81-5378-5672-856b-d11a6a02f55f"
+      "id": "2721f189-5437-543c-a0dc-77962e66d11f"
     },
-    "c153a55a-0888-5163-8c33-9c1d30a264d3": {
-      "source": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
+    "e2ec7e98-ae5d-50f3-b304-ee88f6980672": {
+      "source": "190c0792-40e6-59da-a900-900f5421fbf3",
       "target": "5730500b-b42b-507d-86df-8a5af01ae9c2",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "AppModule",
         "targetModuleName": "ExternalSvcModule"
       },
-      "id": "c153a55a-0888-5163-8c33-9c1d30a264d3"
+      "id": "e2ec7e98-ae5d-50f3-b304-ee88f6980672"
     },
-    "9b78971d-acfa-561a-95b7-6db5c66243b5": {
-      "source": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
+    "136c75ca-a34e-56af-9b4b-912e83b1c047": {
+      "source": "190c0792-40e6-59da-a900-900f5421fbf3",
       "target": "22ecab4d-2742-5e17-b611-97dc15ff02a6",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "AppModule",
         "targetModuleName": "ChatModule"
       },
-      "id": "9b78971d-acfa-561a-95b7-6db5c66243b5"
+      "id": "136c75ca-a34e-56af-9b4b-912e83b1c047"
     },
-    "c668d0c1-ced2-5262-908e-1e573aefc4c8": {
-      "source": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
+    "3edba900-79ec-5929-80bf-f9204ceae263": {
+      "source": "190c0792-40e6-59da-a900-900f5421fbf3",
       "target": "d9e0023c-5d26-5419-b2df-18111057965c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "AppModule",
         "targetModuleName": "RequestChainModule"
       },
-      "id": "c668d0c1-ced2-5262-908e-1e573aefc4c8"
+      "id": "3edba900-79ec-5929-80bf-f9204ceae263"
     },
-    "c23f6f08-785c-55cb-8b96-f9288651d0cc": {
-      "source": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
-      "target": "1ef97d71-97a2-5b1b-891c-5c823511343c",
+    "9a432e1f-ff52-5260-a82d-b03b6088c2ec": {
+      "source": "190c0792-40e6-59da-a900-900f5421fbf3",
+      "target": "f5e96eaf-21c4-533f-8324-a118e7763b54",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "AppModule",
         "targetModuleName": "PropertiesModule"
       },
-      "id": "c23f6f08-785c-55cb-8b96-f9288651d0cc"
+      "id": "9a432e1f-ff52-5260-a82d-b03b6088c2ec"
     },
-    "946ee9cf-bacb-5237-ae90-5f39f8cb2290": {
-      "source": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
-      "target": "0e41b294-78d8-5f2a-8889-3a3ddc0f7c3d",
+    "f783d271-bea1-5513-8c18-6f696e77979d": {
+      "source": "190c0792-40e6-59da-a900-900f5421fbf3",
+      "target": "8d33008c-4294-5979-987b-4b50bb077c85",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "AppModule",
         "targetModuleName": "InputModule"
       },
-      "id": "946ee9cf-bacb-5237-ae90-5f39f8cb2290"
+      "id": "f783d271-bea1-5513-8c18-6f696e77979d"
     },
-    "86012aa7-e9e2-56d1-a751-28800dbc1886": {
-      "source": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+    "a24459dc-3cae-5df9-b1a4-566e9798cff2": {
+      "source": "190c0792-40e6-59da-a900-900f5421fbf3",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "AppModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "86012aa7-e9e2-56d1-a751-28800dbc1886"
+      "id": "a24459dc-3cae-5df9-b1a4-566e9798cff2"
     },
-    "9da4294e-90f7-57fd-9f5f-c392389ecc3f": {
+    "00e334bb-274c-5c31-b1df-a083ae7da1ac": {
       "source": "cb7b08c4-a986-5118-8811-cebf00c9ad57",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "CoreModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "9da4294e-90f7-57fd-9f5f-c392389ecc3f"
+      "id": "00e334bb-274c-5c31-b1df-a083ae7da1ac"
     },
-    "bf0d86f8-0896-53a9-bedd-fbce05f4b506": {
-      "source": "ff654e54-b225-59ff-9435-5856c3f023e6",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+    "592a41d1-72a1-571c-8e62-398a6c705350": {
+      "source": "881c95d9-c95d-5e43-8c9e-8c837f7ef5fc",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "CatsModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "bf0d86f8-0896-53a9-bedd-fbce05f4b506"
+      "id": "592a41d1-72a1-571c-8e62-398a6c705350"
     },
-    "952e1331-5129-575b-a294-82b6b3906787": {
-      "source": "c3f045fc-20d0-5ef4-b271-7cb89aa8c5cf",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+    "09fe6382-a915-52c9-ab82-ed769386d488": {
+      "source": "83323fa4-1058-50ca-afd1-186e9b44528e",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "HelloModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "952e1331-5129-575b-a294-82b6b3906787"
+      "id": "09fe6382-a915-52c9-ab82-ed769386d488"
     },
-    "f24857c1-ed01-5c52-a248-4cccdfbb1b55": {
+    "c9b7ad71-985f-5578-bd70-649ecfb2339e": {
       "source": "da1314a2-cdd6-5915-9a1f-a0db319b2a0a",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "DurableModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "f24857c1-ed01-5c52-a248-4cccdfbb1b55"
+      "id": "c9b7ad71-985f-5578-bd70-649ecfb2339e"
     },
-    "476b489e-8f75-5886-91e4-dc9a3f2c5146": {
+    "4a84bdb3-670f-5bb5-a8aa-cfa16a9e5993": {
       "source": "038094a4-e405-516e-a3a8-c554fe07fa96",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "DogsModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "476b489e-8f75-5886-91e4-dc9a3f2c5146"
+      "id": "4a84bdb3-670f-5bb5-a8aa-cfa16a9e5993"
     },
-    "d7b2f9b2-8948-5700-b73b-5e0e6ba09974": {
+    "c582e5da-b9fc-51e2-8566-8487c70a35ae": {
       "source": "d179d559-dd09-5660-bd2b-f204b8ed7baa",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "UsersModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "d7b2f9b2-8948-5700-b73b-5e0e6ba09974"
+      "id": "c582e5da-b9fc-51e2-8566-8487c70a35ae"
     },
-    "270ad78e-ded9-53d1-bc74-cb9cc0b6481e": {
+    "443917b4-4966-519b-870a-23405baaf539": {
       "source": "d67cef96-6f3b-5efe-82c0-17b967daa5c5",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "DatabaseModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "270ad78e-ded9-53d1-bc74-cb9cc0b6481e"
+      "id": "443917b4-4966-519b-870a-23405baaf539"
     },
-    "d2528703-6de3-534b-968a-c9b4c86fb108": {
+    "d26daefa-ed22-5aa1-8622-c2c376e72e8e": {
       "source": "5730500b-b42b-507d-86df-8a5af01ae9c2",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "ExternalSvcModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "d2528703-6de3-534b-968a-c9b4c86fb108"
+      "id": "d26daefa-ed22-5aa1-8622-c2c376e72e8e"
     },
-    "62acabdc-184b-53bf-b6e5-9a1f4a2398e8": {
+    "6c8277b1-b03d-52f5-9a69-e399f0cd8b24": {
       "source": "22ecab4d-2742-5e17-b611-97dc15ff02a6",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "ChatModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "62acabdc-184b-53bf-b6e5-9a1f4a2398e8"
+      "id": "6c8277b1-b03d-52f5-9a69-e399f0cd8b24"
     },
     "ca2b9513-23d8-503f-b8d4-228358087dba": {
       "source": "d9e0023c-5d26-5419-b2df-18111057965c",
@@ -2425,75 +2425,75 @@
       },
       "id": "ca2b9513-23d8-503f-b8d4-228358087dba"
     },
-    "5c1c47f1-816d-5d94-ab04-3c647ce8aa3f": {
+    "9956b2a4-282c-530d-9362-f07f964635ed": {
       "source": "d9e0023c-5d26-5419-b2df-18111057965c",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "RequestChainModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "5c1c47f1-816d-5d94-ab04-3c647ce8aa3f"
+      "id": "9956b2a4-282c-530d-9362-f07f964635ed"
     },
-    "747a1b4e-76bd-572d-926e-d007848f063f": {
+    "a8d3be2f-c7df-5c4e-b67f-2cfaa14f0aa7": {
       "source": "fe0b8505-2fef-54ff-813f-5ad4060a6e38",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "HelperModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "747a1b4e-76bd-572d-926e-d007848f063f"
+      "id": "a8d3be2f-c7df-5c4e-b67f-2cfaa14f0aa7"
     },
-    "896ea27a-d712-51ce-838f-e87d0c007ce6": {
-      "source": "1ef97d71-97a2-5b1b-891c-5c823511343c",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+    "26a28a80-197b-5bc7-9a37-55375086efda": {
+      "source": "f5e96eaf-21c4-533f-8324-a118e7763b54",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "PropertiesModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "896ea27a-d712-51ce-838f-e87d0c007ce6"
+      "id": "26a28a80-197b-5bc7-9a37-55375086efda"
     },
-    "771b140b-b5fa-5dd4-b4d1-a4382b3fca1b": {
-      "source": "0e41b294-78d8-5f2a-8889-3a3ddc0f7c3d",
-      "target": "746cc074-e478-5e4b-8381-f1af1e2ae09f",
+    "e40943b5-db14-5ea3-b6c5-94dfbb94d520": {
+      "source": "8d33008c-4294-5979-987b-4b50bb077c85",
+      "target": "51b4619f-17da-58cc-a918-8bd2de787ade",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "InputModule",
         "targetModuleName": "CircularModule"
       },
-      "id": "771b140b-b5fa-5dd4-b4d1-a4382b3fca1b"
+      "id": "e40943b5-db14-5ea3-b6c5-94dfbb94d520"
     },
-    "f3aff888-ddfc-51df-afe3-e7039d67d798": {
-      "source": "0e41b294-78d8-5f2a-8889-3a3ddc0f7c3d",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+    "e4779052-0f38-5368-a6e7-de6b59077684": {
+      "source": "8d33008c-4294-5979-987b-4b50bb077c85",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "InputModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "f3aff888-ddfc-51df-afe3-e7039d67d798"
+      "id": "e4779052-0f38-5368-a6e7-de6b59077684"
     },
-    "235202ad-f68a-537a-89fd-846f7a7d3fb8": {
-      "source": "746cc074-e478-5e4b-8381-f1af1e2ae09f",
-      "target": "0e41b294-78d8-5f2a-8889-3a3ddc0f7c3d",
+    "92ed76ae-d5bc-5a24-8092-5efd9343e13a": {
+      "source": "51b4619f-17da-58cc-a918-8bd2de787ade",
+      "target": "8d33008c-4294-5979-987b-4b50bb077c85",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "CircularModule",
         "targetModuleName": "InputModule"
       },
-      "id": "235202ad-f68a-537a-89fd-846f7a7d3fb8"
+      "id": "92ed76ae-d5bc-5a24-8092-5efd9343e13a"
     },
-    "e5fb0dc2-bb23-55de-bae8-6db87b08a9be": {
-      "source": "746cc074-e478-5e4b-8381-f1af1e2ae09f",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+    "c2ed6ca3-057e-5331-8fc6-923b430ab816": {
+      "source": "51b4619f-17da-58cc-a918-8bd2de787ade",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "CircularModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "e5fb0dc2-bb23-55de-bae8-6db87b08a9be"
+      "id": "c2ed6ca3-057e-5331-8fc6-923b430ab816"
     },
     "56f5df54-a625-57db-99ea-f51bacf7d2e1": {
       "source": "9cd5ba23-0bdc-52f0-9e25-c478e0689f88",
@@ -2510,8 +2510,8 @@
       },
       "id": "56f5df54-a625-57db-99ea-f51bacf7d2e1"
     },
-    "fe7ebc60-36e9-5177-8a03-d0cb98243218": {
-      "source": "c6535829-8ec6-5852-b1f5-2a1332218877",
+    "330b4c34-6801-54bf-bac2-7ce72659861e": {
+      "source": "769e8ad6-f9f6-515d-83f5-9c6a8e6ebc54",
       "target": "beeb3251-4b2b-5810-a4ec-ed05623a7557",
       "metadata": {
         "type": "class-to-class",
@@ -2523,10 +2523,10 @@
         "targetModuleName": "HelloModule",
         "injectionType": "decorator"
       },
-      "id": "fe7ebc60-36e9-5177-8a03-d0cb98243218"
+      "id": "330b4c34-6801-54bf-bac2-7ce72659861e"
     },
-    "f7ddc5bb-b39f-500b-b051-4798536781b1": {
-      "source": "c6535829-8ec6-5852-b1f5-2a1332218877",
+    "0a91b819-ec5e-577d-a0b2-aac29cdde0a0": {
+      "source": "769e8ad6-f9f6-515d-83f5-9c6a8e6ebc54",
       "target": "0ea50366-8cd7-5410-91f4-5a140b2a5fe9",
       "metadata": {
         "type": "class-to-class",
@@ -2538,11 +2538,11 @@
         "targetModuleName": "HelloModule",
         "injectionType": "decorator"
       },
-      "id": "f7ddc5bb-b39f-500b-b051-4798536781b1"
+      "id": "0a91b819-ec5e-577d-a0b2-aac29cdde0a0"
     },
-    "ce53b93d-f1db-5491-9297-1400678505ab": {
-      "source": "c6535829-8ec6-5852-b1f5-2a1332218877",
-      "target": "d8184163-323d-511e-b2a0-368003f3425a",
+    "0508cfc7-3e89-5431-83b2-bd31523d1e82": {
+      "source": "769e8ad6-f9f6-515d-83f5-9c6a8e6ebc54",
+      "target": "317c5d2d-4c46-5b39-83e8-c27aa64a1edd",
       "metadata": {
         "type": "class-to-class",
         "sourceModuleName": "HelloModule",
@@ -2553,7 +2553,7 @@
         "targetModuleName": "HelloModule",
         "injectionType": "decorator"
       },
-      "id": "ce53b93d-f1db-5491-9297-1400678505ab"
+      "id": "0508cfc7-3e89-5431-83b2-bd31523d1e82"
     },
     "57b364e1-cb7b-5314-b4fe-49c4a024b7aa": {
       "source": "5b34c433-222a-5cf1-a0cd-cfe52d873525",
@@ -2844,18 +2844,18 @@
         "id": "9cd5ba23-0bdc-52f0-9e25-c478e0689f88_findOne"
       }
     ],
-    "c6535829-8ec6-5852-b1f5-2a1332218877": [
+    "769e8ad6-f9f6-515d-83f5-9c6a8e6ebc54": [
       {
         "type": "http-endpoint",
         "methodName": "greeting",
         "className": "HelloController",
-        "classNodeId": "c6535829-8ec6-5852-b1f5-2a1332218877",
+        "classNodeId": "769e8ad6-f9f6-515d-83f5-9c6a8e6ebc54",
         "metadata": {
           "key": "/hello",
           "path": "/hello",
           "requestMethod": "GET"
         },
-        "id": "c6535829-8ec6-5852-b1f5-2a1332218877_greeting"
+        "id": "769e8ad6-f9f6-515d-83f5-9c6a8e6ebc54_greeting"
       }
     ],
     "dc0af85e-82dd-5ca0-92ba-ac85ea1b123d": [
diff --git a/integration/inspector/e2e/fixtures/pre-init-graph.json b/integration/inspector/e2e/fixtures/pre-init-graph.json
index 0e4fbd2e2..c4536bee4 100644
--- a/integration/inspector/e2e/fixtures/pre-init-graph.json
+++ b/integration/inspector/e2e/fixtures/pre-init-graph.json
@@ -1,7 +1,7 @@
 {
   "nodes": {
-    "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408": {
-      "id": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+    "cd386e3b-3d69-5901-952d-1f208af88d8c": {
+      "id": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "label": "InternalCoreModule",
       "metadata": {
         "type": "module",
@@ -10,10 +10,10 @@
         "internal": true
       }
     },
-    "0266246d-7911-5b7d-a84d-262fe9a2374f": {
-      "id": "0266246d-7911-5b7d-a84d-262fe9a2374f",
+    "be0abc22-6df8-5993-b558-46c0848a2b3f": {
+      "id": "be0abc22-6df8-5993-b558-46c0848a2b3f",
       "label": "InternalCoreModule",
-      "parent": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "parent": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -26,10 +26,10 @@
         "token": "InternalCoreModule"
       }
     },
-    "8a6da9c2-02e2-5673-a780-3e91cb35a740": {
-      "id": "8a6da9c2-02e2-5673-a780-3e91cb35a740",
+    "d8961021-03e5-50b1-9589-e6552d20eb4c": {
+      "id": "d8961021-03e5-50b1-9589-e6552d20eb4c",
       "label": "ModuleRef",
-      "parent": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "parent": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -42,10 +42,10 @@
         "token": "ModuleRef"
       }
     },
-    "d93f57f9-7088-5f85-84f4-b2a757f20434": {
-      "id": "d93f57f9-7088-5f85-84f4-b2a757f20434",
+    "952a9871-0035-5d69-9eed-bc675bbdd4ae": {
+      "id": "952a9871-0035-5d69-9eed-bc675bbdd4ae",
       "label": "ApplicationConfig",
-      "parent": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "parent": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -58,10 +58,10 @@
         "token": "ApplicationConfig"
       }
     },
-    "0f97a46c-8619-5a59-a84d-bc0af7a2f49c": {
-      "id": "0f97a46c-8619-5a59-a84d-bc0af7a2f49c",
+    "5ee7ae73-b49c-5410-bf8b-1cea1fc2727b": {
+      "id": "5ee7ae73-b49c-5410-bf8b-1cea1fc2727b",
       "label": "Reflector",
-      "parent": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "parent": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -73,10 +73,10 @@
         "token": "Reflector"
       }
     },
-    "1bd85856-6a0d-5ad9-b5ab-4e446f49a760": {
-      "id": "1bd85856-6a0d-5ad9-b5ab-4e446f49a760",
+    "c0b09f2c-4660-5a02-a030-78bfa806c398": {
+      "id": "c0b09f2c-4660-5a02-a030-78bfa806c398",
       "label": "Reflector",
-      "parent": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "parent": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -89,10 +89,10 @@
         "token": "Reflector"
       }
     },
-    "98fbcd2c-b5dc-5819-b1c1-a8540f39a343": {
-      "id": "98fbcd2c-b5dc-5819-b1c1-a8540f39a343",
+    "78cb636b-37ad-583d-8d4f-f322886f43f9": {
+      "id": "78cb636b-37ad-583d-8d4f-f322886f43f9",
       "label": "REQUEST",
-      "parent": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "parent": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -105,10 +105,10 @@
         "token": "REQUEST"
       }
     },
-    "cb90aade-4ecd-5820-9bdd-6d976425f35f": {
-      "id": "cb90aade-4ecd-5820-9bdd-6d976425f35f",
+    "e5157988-49ec-53a2-80c2-29ba86e03a03": {
+      "id": "e5157988-49ec-53a2-80c2-29ba86e03a03",
       "label": "INQUIRER",
-      "parent": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "parent": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -121,10 +121,10 @@
         "token": "INQUIRER"
       }
     },
-    "35988aac-c61e-5697-bf81-17b787df7199": {
-      "id": "35988aac-c61e-5697-bf81-17b787df7199",
+    "e4c58859-73a1-5981-b476-9af572c1bb63": {
+      "id": "e4c58859-73a1-5981-b476-9af572c1bb63",
       "label": "ExternalContextCreator",
-      "parent": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "parent": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -137,10 +137,10 @@
         "token": "ExternalContextCreator"
       }
     },
-    "1dc14da7-cdc3-5719-8615-d5e43b0bb589": {
-      "id": "1dc14da7-cdc3-5719-8615-d5e43b0bb589",
+    "7994dca3-7e8d-594a-bc99-19736b521b1a": {
+      "id": "7994dca3-7e8d-594a-bc99-19736b521b1a",
       "label": "ModulesContainer",
-      "parent": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "parent": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -153,10 +153,10 @@
         "token": "ModulesContainer"
       }
     },
-    "f3784e54-6f1e-5b0b-a054-8f0ce00b5a26": {
-      "id": "f3784e54-6f1e-5b0b-a054-8f0ce00b5a26",
+    "02d5a2da-8413-5244-aea2-e99a9b2a47a1": {
+      "id": "02d5a2da-8413-5244-aea2-e99a9b2a47a1",
       "label": "HttpAdapterHost",
-      "parent": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "parent": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -169,10 +169,10 @@
         "token": "HttpAdapterHost"
       }
     },
-    "a70e728e-bd78-59c8-82c3-677db604d485": {
-      "id": "a70e728e-bd78-59c8-82c3-677db604d485",
+    "82a7deba-d4bb-51f7-b591-6f0810c62dde": {
+      "id": "82a7deba-d4bb-51f7-b591-6f0810c62dde",
       "label": "HttpAdapterHost",
-      "parent": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "parent": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -185,10 +185,10 @@
         "token": "HttpAdapterHost"
       }
     },
-    "cba1025d-74a1-5c3a-9b99-2e3b1253fc59": {
-      "id": "cba1025d-74a1-5c3a-9b99-2e3b1253fc59",
+    "7c1ea1db-49b6-508f-8d1b-21c10acfe6fc": {
+      "id": "7c1ea1db-49b6-508f-8d1b-21c10acfe6fc",
       "label": "LazyModuleLoader",
-      "parent": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "parent": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -200,10 +200,10 @@
         "token": "LazyModuleLoader"
       }
     },
-    "5f2354a8-aa71-588e-8eb8-4327b44d1f77": {
-      "id": "5f2354a8-aa71-588e-8eb8-4327b44d1f77",
+    "b78ad2e1-5445-54bd-ae3a-599d272c8f3c": {
+      "id": "b78ad2e1-5445-54bd-ae3a-599d272c8f3c",
       "label": "SerializedGraph",
-      "parent": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "parent": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -216,8 +216,8 @@
         "token": "SerializedGraph"
       }
     },
-    "d8bd964c-de23-5d00-b06b-670ea2de73af": {
-      "id": "d8bd964c-de23-5d00-b06b-670ea2de73af",
+    "419c0cf1-5c75-5001-9c7c-f4068e096458": {
+      "id": "419c0cf1-5c75-5001-9c7c-f4068e096458",
       "label": "RootTestModule",
       "metadata": {
         "type": "module",
@@ -226,10 +226,10 @@
         "internal": false
       }
     },
-    "17793954-3040-5afe-85a1-ba6e552b63ac": {
-      "id": "17793954-3040-5afe-85a1-ba6e552b63ac",
+    "44aabda8-8671-524d-a160-51706ac058f8": {
+      "id": "44aabda8-8671-524d-a160-51706ac058f8",
       "label": "RootTestModule",
-      "parent": "d8bd964c-de23-5d00-b06b-670ea2de73af",
+      "parent": "419c0cf1-5c75-5001-9c7c-f4068e096458",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -242,10 +242,10 @@
         "token": "RootTestModule"
       }
     },
-    "08e91ffe-a032-53e5-95c1-ce31bdb9b62f": {
-      "id": "08e91ffe-a032-53e5-95c1-ce31bdb9b62f",
+    "0c116509-b402-5c8d-8806-5744e4dabe9d": {
+      "id": "0c116509-b402-5c8d-8806-5744e4dabe9d",
       "label": "ModuleRef",
-      "parent": "d8bd964c-de23-5d00-b06b-670ea2de73af",
+      "parent": "419c0cf1-5c75-5001-9c7c-f4068e096458",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -258,10 +258,10 @@
         "token": "ModuleRef"
       }
     },
-    "42009d50-15f3-5533-9fb0-56be650c07c4": {
-      "id": "42009d50-15f3-5533-9fb0-56be650c07c4",
+    "56db34a2-f833-58bc-be40-8e832cf47839": {
+      "id": "56db34a2-f833-58bc-be40-8e832cf47839",
       "label": "ApplicationConfig",
-      "parent": "d8bd964c-de23-5d00-b06b-670ea2de73af",
+      "parent": "419c0cf1-5c75-5001-9c7c-f4068e096458",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -274,8 +274,8 @@
         "token": "ApplicationConfig"
       }
     },
-    "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e": {
-      "id": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
+    "190c0792-40e6-59da-a900-900f5421fbf3": {
+      "id": "190c0792-40e6-59da-a900-900f5421fbf3",
       "label": "AppModule",
       "metadata": {
         "type": "module",
@@ -284,10 +284,10 @@
         "internal": false
       }
     },
-    "62ef898c-93f9-5411-9a5d-cfcdc73e93ee": {
-      "id": "62ef898c-93f9-5411-9a5d-cfcdc73e93ee",
+    "858c2700-7202-5270-ae4a-e079de2e594d": {
+      "id": "858c2700-7202-5270-ae4a-e079de2e594d",
       "label": "AppModule",
-      "parent": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
+      "parent": "190c0792-40e6-59da-a900-900f5421fbf3",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -300,10 +300,10 @@
         "token": "AppModule"
       }
     },
-    "c2d780da-354b-5695-bdd8-f57674f2ab43": {
-      "id": "c2d780da-354b-5695-bdd8-f57674f2ab43",
+    "e122a91a-deac-56ad-b5df-7ab279321fbe": {
+      "id": "e122a91a-deac-56ad-b5df-7ab279321fbe",
       "label": "ModuleRef",
-      "parent": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
+      "parent": "190c0792-40e6-59da-a900-900f5421fbf3",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -316,10 +316,10 @@
         "token": "ModuleRef"
       }
     },
-    "f4b08010-a828-5e57-b763-713ea8ce14a4": {
-      "id": "f4b08010-a828-5e57-b763-713ea8ce14a4",
+    "bf91d262-6ac2-58f8-8132-3f83a2947364": {
+      "id": "bf91d262-6ac2-58f8-8132-3f83a2947364",
       "label": "ApplicationConfig",
-      "parent": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
+      "parent": "190c0792-40e6-59da-a900-900f5421fbf3",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -335,7 +335,7 @@
     "c58d72a9-efa9-586a-a61d-a3f6fce0df77": {
       "id": "c58d72a9-efa9-586a-a61d-a3f6fce0df77",
       "label": "AppV1Controller",
-      "parent": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
+      "parent": "190c0792-40e6-59da-a900-900f5421fbf3",
       "metadata": {
         "type": "controller",
         "internal": false,
@@ -350,7 +350,7 @@
     "ff454cab-300d-5318-98cb-d702256ea27c": {
       "id": "ff454cab-300d-5318-98cb-d702256ea27c",
       "label": "AppV2Controller",
-      "parent": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
+      "parent": "190c0792-40e6-59da-a900-900f5421fbf3",
       "metadata": {
         "type": "controller",
         "internal": false,
@@ -432,7 +432,7 @@
         "static": true,
         "transient": false,
         "exported": false,
-        "token": "APP_INTERCEPTOR (UUID: 2039dbe9-fda1-5fe2-8253-79f85aa611ef)",
+        "token": "APP_INTERCEPTOR (UUID: 4d1c64db-1eb5-5dad-81a6-db033e2c90f9)",
         "subtype": "interceptor",
         "global": true
       }
@@ -449,13 +449,13 @@
         "static": true,
         "transient": false,
         "exported": false,
-        "token": "APP_INTERCEPTOR (UUID: c76291d7-e5f2-5f75-ac78-1a0c771cba56)",
+        "token": "APP_INTERCEPTOR (UUID: ef427625-59f9-584b-8807-11e761f447fb)",
         "subtype": "interceptor",
         "global": true
       }
     },
-    "ff654e54-b225-59ff-9435-5856c3f023e6": {
-      "id": "ff654e54-b225-59ff-9435-5856c3f023e6",
+    "881c95d9-c95d-5e43-8c9e-8c837f7ef5fc": {
+      "id": "881c95d9-c95d-5e43-8c9e-8c837f7ef5fc",
       "label": "CatsModule",
       "metadata": {
         "type": "module",
@@ -464,10 +464,10 @@
         "internal": false
       }
     },
-    "7d4d50c1-5e42-5e87-9756-a02629ebc2b2": {
-      "id": "7d4d50c1-5e42-5e87-9756-a02629ebc2b2",
+    "6400d5fb-c5eb-58c8-baa6-7854bfe9220d": {
+      "id": "6400d5fb-c5eb-58c8-baa6-7854bfe9220d",
       "label": "CatsModule",
-      "parent": "ff654e54-b225-59ff-9435-5856c3f023e6",
+      "parent": "881c95d9-c95d-5e43-8c9e-8c837f7ef5fc",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -480,10 +480,10 @@
         "token": "CatsModule"
       }
     },
-    "2bf0bce0-780f-5388-8203-53067826d97b": {
-      "id": "2bf0bce0-780f-5388-8203-53067826d97b",
+    "05955a45-ac72-5f10-9f1c-74b3ecade567": {
+      "id": "05955a45-ac72-5f10-9f1c-74b3ecade567",
       "label": "ModuleRef",
-      "parent": "ff654e54-b225-59ff-9435-5856c3f023e6",
+      "parent": "881c95d9-c95d-5e43-8c9e-8c837f7ef5fc",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -496,10 +496,10 @@
         "token": "ModuleRef"
       }
     },
-    "033d92e8-d925-56ab-80c9-c51418cf29f2": {
-      "id": "033d92e8-d925-56ab-80c9-c51418cf29f2",
+    "98eafd3a-b2d5-5d15-a269-21318db9ac47": {
+      "id": "98eafd3a-b2d5-5d15-a269-21318db9ac47",
       "label": "ApplicationConfig",
-      "parent": "ff654e54-b225-59ff-9435-5856c3f023e6",
+      "parent": "881c95d9-c95d-5e43-8c9e-8c837f7ef5fc",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -512,10 +512,10 @@
         "token": "ApplicationConfig"
       }
     },
-    "66da07f0-0d07-501b-b783-869c9dac4d0c": {
-      "id": "66da07f0-0d07-501b-b783-869c9dac4d0c",
+    "7ee7d0cd-f4e7-54e5-a204-025b0a180c2f": {
+      "id": "7ee7d0cd-f4e7-54e5-a204-025b0a180c2f",
       "label": "CatsService",
-      "parent": "ff654e54-b225-59ff-9435-5856c3f023e6",
+      "parent": "881c95d9-c95d-5e43-8c9e-8c837f7ef5fc",
       "metadata": {
         "type": "provider",
         "internal": false,
@@ -530,7 +530,7 @@
     "02df382a-48e1-54d2-a16c-2322f9a13ed4": {
       "id": "02df382a-48e1-54d2-a16c-2322f9a13ed4",
       "label": "RolesGuard",
-      "parent": "ff654e54-b225-59ff-9435-5856c3f023e6",
+      "parent": "881c95d9-c95d-5e43-8c9e-8c837f7ef5fc",
       "metadata": {
         "type": "injectable",
         "internal": false,
@@ -546,7 +546,7 @@
     "9cd5ba23-0bdc-52f0-9e25-c478e0689f88": {
       "id": "9cd5ba23-0bdc-52f0-9e25-c478e0689f88",
       "label": "CatsController",
-      "parent": "ff654e54-b225-59ff-9435-5856c3f023e6",
+      "parent": "881c95d9-c95d-5e43-8c9e-8c837f7ef5fc",
       "metadata": {
         "type": "controller",
         "internal": false,
@@ -569,8 +569,8 @@
         ]
       }
     },
-    "c3f045fc-20d0-5ef4-b271-7cb89aa8c5cf": {
-      "id": "c3f045fc-20d0-5ef4-b271-7cb89aa8c5cf",
+    "83323fa4-1058-50ca-afd1-186e9b44528e": {
+      "id": "83323fa4-1058-50ca-afd1-186e9b44528e",
       "label": "HelloModule",
       "metadata": {
         "type": "module",
@@ -579,10 +579,10 @@
         "internal": false
       }
     },
-    "02a39df5-5e06-5700-9d18-b60515336df3": {
-      "id": "02a39df5-5e06-5700-9d18-b60515336df3",
+    "ca6529cf-19c0-5d1a-ac52-6f21455fbca5": {
+      "id": "ca6529cf-19c0-5d1a-ac52-6f21455fbca5",
       "label": "HelloModule",
-      "parent": "c3f045fc-20d0-5ef4-b271-7cb89aa8c5cf",
+      "parent": "83323fa4-1058-50ca-afd1-186e9b44528e",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -595,10 +595,10 @@
         "token": "HelloModule"
       }
     },
-    "b5b055a4-1c73-535a-a11f-532afa5cd3a5": {
-      "id": "b5b055a4-1c73-535a-a11f-532afa5cd3a5",
+    "884b8400-c115-5286-9d7e-9d2603ff1688": {
+      "id": "884b8400-c115-5286-9d7e-9d2603ff1688",
       "label": "ModuleRef",
-      "parent": "c3f045fc-20d0-5ef4-b271-7cb89aa8c5cf",
+      "parent": "83323fa4-1058-50ca-afd1-186e9b44528e",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -611,10 +611,10 @@
         "token": "ModuleRef"
       }
     },
-    "04381b7d-6c07-566e-8406-1a7512b287ad": {
-      "id": "04381b7d-6c07-566e-8406-1a7512b287ad",
+    "faa1f549-1f2f-56e3-8462-79a2c818d33e": {
+      "id": "faa1f549-1f2f-56e3-8462-79a2c818d33e",
       "label": "ApplicationConfig",
-      "parent": "c3f045fc-20d0-5ef4-b271-7cb89aa8c5cf",
+      "parent": "83323fa4-1058-50ca-afd1-186e9b44528e",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -627,10 +627,10 @@
         "token": "ApplicationConfig"
       }
     },
-    "faa725fd-ae13-5c49-9ca5-061fbbab787e": {
-      "id": "faa725fd-ae13-5c49-9ca5-061fbbab787e",
+    "f95f0452-ba3c-5749-aead-d4d34a6235d3": {
+      "id": "f95f0452-ba3c-5749-aead-d4d34a6235d3",
       "label": "HelloService",
-      "parent": "c3f045fc-20d0-5ef4-b271-7cb89aa8c5cf",
+      "parent": "83323fa4-1058-50ca-afd1-186e9b44528e",
       "metadata": {
         "type": "provider",
         "internal": false,
@@ -643,10 +643,10 @@
         "token": "HelloService"
       }
     },
-    "d77a662b-e5f5-523d-946b-211624d7497c": {
-      "id": "d77a662b-e5f5-523d-946b-211624d7497c",
+    "028385ff-10ad-5a1c-851e-d4ca2bdf8e5d": {
+      "id": "028385ff-10ad-5a1c-851e-d4ca2bdf8e5d",
       "label": "UsersService",
-      "parent": "c3f045fc-20d0-5ef4-b271-7cb89aa8c5cf",
+      "parent": "83323fa4-1058-50ca-afd1-186e9b44528e",
       "metadata": {
         "type": "provider",
         "internal": false,
@@ -662,7 +662,7 @@
     "6676173c-ce2a-51d3-952a-93fa8c7a3923": {
       "id": "6676173c-ce2a-51d3-952a-93fa8c7a3923",
       "label": "Meta",
-      "parent": "c3f045fc-20d0-5ef4-b271-7cb89aa8c5cf",
+      "parent": "83323fa4-1058-50ca-afd1-186e9b44528e",
       "metadata": {
         "type": "provider",
         "internal": false,
@@ -678,7 +678,7 @@
     "beeb3251-4b2b-5810-a4ec-ed05623a7557": {
       "id": "beeb3251-4b2b-5810-a4ec-ed05623a7557",
       "label": "Guard",
-      "parent": "c3f045fc-20d0-5ef4-b271-7cb89aa8c5cf",
+      "parent": "83323fa4-1058-50ca-afd1-186e9b44528e",
       "metadata": {
         "type": "injectable",
         "internal": false,
@@ -695,7 +695,7 @@
     "0ea50366-8cd7-5410-91f4-5a140b2a5fe9": {
       "id": "0ea50366-8cd7-5410-91f4-5a140b2a5fe9",
       "label": "Interceptor",
-      "parent": "c3f045fc-20d0-5ef4-b271-7cb89aa8c5cf",
+      "parent": "83323fa4-1058-50ca-afd1-186e9b44528e",
       "metadata": {
         "type": "injectable",
         "internal": false,
@@ -709,10 +709,10 @@
         "subtype": "interceptor"
       }
     },
-    "d8184163-323d-511e-b2a0-368003f3425a": {
-      "id": "d8184163-323d-511e-b2a0-368003f3425a",
+    "317c5d2d-4c46-5b39-83e8-c27aa64a1edd": {
+      "id": "317c5d2d-4c46-5b39-83e8-c27aa64a1edd",
       "label": "UserByIdPipe",
-      "parent": "c3f045fc-20d0-5ef4-b271-7cb89aa8c5cf",
+      "parent": "83323fa4-1058-50ca-afd1-186e9b44528e",
       "metadata": {
         "type": "injectable",
         "internal": false,
@@ -725,10 +725,10 @@
         "subtype": "pipe"
       }
     },
-    "c6535829-8ec6-5852-b1f5-2a1332218877": {
-      "id": "c6535829-8ec6-5852-b1f5-2a1332218877",
+    "769e8ad6-f9f6-515d-83f5-9c6a8e6ebc54": {
+      "id": "769e8ad6-f9f6-515d-83f5-9c6a8e6ebc54",
       "label": "HelloController",
-      "parent": "c3f045fc-20d0-5ef4-b271-7cb89aa8c5cf",
+      "parent": "83323fa4-1058-50ca-afd1-186e9b44528e",
       "metadata": {
         "type": "controller",
         "internal": false,
@@ -750,7 +750,7 @@
             "subtype": "interceptor"
           },
           {
-            "id": "d8184163-323d-511e-b2a0-368003f3425a",
+            "id": "317c5d2d-4c46-5b39-83e8-c27aa64a1edd",
             "methodKey": "greeting",
             "subtype": "pipe"
           }
@@ -1471,8 +1471,8 @@
         "token": "HelperService"
       }
     },
-    "1ef97d71-97a2-5b1b-891c-5c823511343c": {
-      "id": "1ef97d71-97a2-5b1b-891c-5c823511343c",
+    "f5e96eaf-21c4-533f-8324-a118e7763b54": {
+      "id": "f5e96eaf-21c4-533f-8324-a118e7763b54",
       "label": "PropertiesModule",
       "metadata": {
         "type": "module",
@@ -1481,10 +1481,10 @@
         "internal": false
       }
     },
-    "2adbdd35-3104-5c91-8106-347bb586b56b": {
-      "id": "2adbdd35-3104-5c91-8106-347bb586b56b",
+    "652c9c93-f2ce-581f-9b87-0aa3182ef701": {
+      "id": "652c9c93-f2ce-581f-9b87-0aa3182ef701",
       "label": "PropertiesModule",
-      "parent": "1ef97d71-97a2-5b1b-891c-5c823511343c",
+      "parent": "f5e96eaf-21c4-533f-8324-a118e7763b54",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -1497,10 +1497,10 @@
         "token": "PropertiesModule"
       }
     },
-    "b24a24c0-4913-50f2-9b37-f2434cc60bc5": {
-      "id": "b24a24c0-4913-50f2-9b37-f2434cc60bc5",
+    "17db7eca-bb20-52e6-8651-473a37307dd4": {
+      "id": "17db7eca-bb20-52e6-8651-473a37307dd4",
       "label": "ModuleRef",
-      "parent": "1ef97d71-97a2-5b1b-891c-5c823511343c",
+      "parent": "f5e96eaf-21c4-533f-8324-a118e7763b54",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -1513,10 +1513,10 @@
         "token": "ModuleRef"
       }
     },
-    "a372752b-0bde-5c42-b235-e4e0b7535ecf": {
-      "id": "a372752b-0bde-5c42-b235-e4e0b7535ecf",
+    "1804e686-cc4b-50f9-9f1f-c412d8be76d0": {
+      "id": "1804e686-cc4b-50f9-9f1f-c412d8be76d0",
       "label": "ApplicationConfig",
-      "parent": "1ef97d71-97a2-5b1b-891c-5c823511343c",
+      "parent": "f5e96eaf-21c4-533f-8324-a118e7763b54",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -1529,10 +1529,10 @@
         "token": "ApplicationConfig"
       }
     },
-    "37849930-7360-509c-abde-733fb268c8dc": {
-      "id": "37849930-7360-509c-abde-733fb268c8dc",
+    "ce56b867-fe35-5579-b455-3f33e161c418": {
+      "id": "ce56b867-fe35-5579-b455-3f33e161c418",
       "label": "DependencyService",
-      "parent": "1ef97d71-97a2-5b1b-891c-5c823511343c",
+      "parent": "f5e96eaf-21c4-533f-8324-a118e7763b54",
       "metadata": {
         "type": "provider",
         "internal": false,
@@ -1544,10 +1544,10 @@
         "token": "DependencyService"
       }
     },
-    "f1efd40f-12c0-5bf8-a499-fa63f5b6a77c": {
-      "id": "f1efd40f-12c0-5bf8-a499-fa63f5b6a77c",
+    "bc426371-e5ad-55f4-895a-6701455d2b40": {
+      "id": "bc426371-e5ad-55f4-895a-6701455d2b40",
       "label": "PropertiesService",
-      "parent": "1ef97d71-97a2-5b1b-891c-5c823511343c",
+      "parent": "f5e96eaf-21c4-533f-8324-a118e7763b54",
       "metadata": {
         "type": "provider",
         "internal": false,
@@ -1559,10 +1559,10 @@
         "token": "PropertiesService"
       }
     },
-    "822f3a86-ab6f-58ec-8ca5-73d0f3371b8a": {
-      "id": "822f3a86-ab6f-58ec-8ca5-73d0f3371b8a",
+    "576fbd85-f97e-54b2-bf76-87ed5c2df2ed": {
+      "id": "576fbd85-f97e-54b2-bf76-87ed5c2df2ed",
       "label": "token",
-      "parent": "1ef97d71-97a2-5b1b-891c-5c823511343c",
+      "parent": "f5e96eaf-21c4-533f-8324-a118e7763b54",
       "metadata": {
         "type": "provider",
         "internal": false,
@@ -1575,10 +1575,10 @@
         "token": "token"
       }
     },
-    "d07d69a1-3a51-5605-8463-2d1625d2c1c6": {
-      "id": "d07d69a1-3a51-5605-8463-2d1625d2c1c6",
+    "d8a13bee-462c-5e09-862b-8a50ba181163": {
+      "id": "d8a13bee-462c-5e09-862b-8a50ba181163",
       "label": "Symbol(token)",
-      "parent": "1ef97d71-97a2-5b1b-891c-5c823511343c",
+      "parent": "f5e96eaf-21c4-533f-8324-a118e7763b54",
       "metadata": {
         "type": "provider",
         "internal": false,
@@ -1591,8 +1591,8 @@
         "token": "Symbol(token)"
       }
     },
-    "0e41b294-78d8-5f2a-8889-3a3ddc0f7c3d": {
-      "id": "0e41b294-78d8-5f2a-8889-3a3ddc0f7c3d",
+    "8d33008c-4294-5979-987b-4b50bb077c85": {
+      "id": "8d33008c-4294-5979-987b-4b50bb077c85",
       "label": "InputModule",
       "metadata": {
         "type": "module",
@@ -1601,10 +1601,10 @@
         "internal": false
       }
     },
-    "6f480ce1-6367-5d66-8009-afb93b21b72a": {
-      "id": "6f480ce1-6367-5d66-8009-afb93b21b72a",
+    "259ccdaa-e714-56ce-9a8d-4d6c60a10f0d": {
+      "id": "259ccdaa-e714-56ce-9a8d-4d6c60a10f0d",
       "label": "InputModule",
-      "parent": "0e41b294-78d8-5f2a-8889-3a3ddc0f7c3d",
+      "parent": "8d33008c-4294-5979-987b-4b50bb077c85",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -1617,10 +1617,10 @@
         "token": "InputModule"
       }
     },
-    "de2537f0-a428-5f07-8b21-07fbc694ae80": {
-      "id": "de2537f0-a428-5f07-8b21-07fbc694ae80",
+    "829c226a-332a-5c54-8a20-ebb93b182709": {
+      "id": "829c226a-332a-5c54-8a20-ebb93b182709",
       "label": "ModuleRef",
-      "parent": "0e41b294-78d8-5f2a-8889-3a3ddc0f7c3d",
+      "parent": "8d33008c-4294-5979-987b-4b50bb077c85",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -1633,10 +1633,10 @@
         "token": "ModuleRef"
       }
     },
-    "88585ed2-947c-5ffa-b088-42315ad2a900": {
-      "id": "88585ed2-947c-5ffa-b088-42315ad2a900",
+    "081822dc-eb43-5000-8038-acf089f629be": {
+      "id": "081822dc-eb43-5000-8038-acf089f629be",
       "label": "ApplicationConfig",
-      "parent": "0e41b294-78d8-5f2a-8889-3a3ddc0f7c3d",
+      "parent": "8d33008c-4294-5979-987b-4b50bb077c85",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -1649,10 +1649,10 @@
         "token": "ApplicationConfig"
       }
     },
-    "8320566b-f7d2-5802-9603-faa2ff1fdbef": {
-      "id": "8320566b-f7d2-5802-9603-faa2ff1fdbef",
+    "98d04266-c04c-5406-9e26-7be953a58803": {
+      "id": "98d04266-c04c-5406-9e26-7be953a58803",
       "label": "InputService",
-      "parent": "0e41b294-78d8-5f2a-8889-3a3ddc0f7c3d",
+      "parent": "8d33008c-4294-5979-987b-4b50bb077c85",
       "metadata": {
         "type": "provider",
         "internal": false,
@@ -1664,8 +1664,8 @@
         "token": "InputService"
       }
     },
-    "746cc074-e478-5e4b-8381-f1af1e2ae09f": {
-      "id": "746cc074-e478-5e4b-8381-f1af1e2ae09f",
+    "51b4619f-17da-58cc-a918-8bd2de787ade": {
+      "id": "51b4619f-17da-58cc-a918-8bd2de787ade",
       "label": "CircularModule",
       "metadata": {
         "type": "module",
@@ -1674,10 +1674,10 @@
         "internal": false
       }
     },
-    "93e005c4-999c-56b5-88f3-6ea5eb2d8b0f": {
-      "id": "93e005c4-999c-56b5-88f3-6ea5eb2d8b0f",
+    "ac22164f-01ec-5409-8e12-2bace8542fd0": {
+      "id": "ac22164f-01ec-5409-8e12-2bace8542fd0",
       "label": "CircularModule",
-      "parent": "746cc074-e478-5e4b-8381-f1af1e2ae09f",
+      "parent": "51b4619f-17da-58cc-a918-8bd2de787ade",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -1690,10 +1690,10 @@
         "token": "CircularModule"
       }
     },
-    "8d3a2f87-2876-592b-9035-3f9a6c36a857": {
-      "id": "8d3a2f87-2876-592b-9035-3f9a6c36a857",
+    "4f6ecfd6-8413-5f57-bf0e-f2e9c7cad0a6": {
+      "id": "4f6ecfd6-8413-5f57-bf0e-f2e9c7cad0a6",
       "label": "ModuleRef",
-      "parent": "746cc074-e478-5e4b-8381-f1af1e2ae09f",
+      "parent": "51b4619f-17da-58cc-a918-8bd2de787ade",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -1706,10 +1706,10 @@
         "token": "ModuleRef"
       }
     },
-    "265e9357-d8dc-51f1-aea9-81c447e46902": {
-      "id": "265e9357-d8dc-51f1-aea9-81c447e46902",
+    "ed4a6c21-f47a-5b6d-ae32-f4ddc0a22b05": {
+      "id": "ed4a6c21-f47a-5b6d-ae32-f4ddc0a22b05",
       "label": "ApplicationConfig",
-      "parent": "746cc074-e478-5e4b-8381-f1af1e2ae09f",
+      "parent": "51b4619f-17da-58cc-a918-8bd2de787ade",
       "metadata": {
         "type": "provider",
         "internal": true,
@@ -1722,10 +1722,10 @@
         "token": "ApplicationConfig"
       }
     },
-    "64c961f0-cb2e-53e5-95a5-590ab811d0d5": {
-      "id": "64c961f0-cb2e-53e5-95a5-590ab811d0d5",
+    "814286f5-6afc-5fe8-bd31-9e49252b3e84": {
+      "id": "814286f5-6afc-5fe8-bd31-9e49252b3e84",
       "label": "CircularService",
-      "parent": "746cc074-e478-5e4b-8381-f1af1e2ae09f",
+      "parent": "51b4619f-17da-58cc-a918-8bd2de787ade",
       "metadata": {
         "type": "provider",
         "internal": false,
@@ -1739,9 +1739,9 @@
     }
   },
   "edges": {
-    "883d83bd-11dc-5741-a542-aa8e353fbd0f": {
-      "source": "a70e728e-bd78-59c8-82c3-677db604d485",
-      "target": "f3784e54-6f1e-5b0b-a054-8f0ce00b5a26",
+    "dc9bef27-dac6-5a49-9441-645e70895c1b": {
+      "source": "82a7deba-d4bb-51f7-b591-6f0810c62dde",
+      "target": "02d5a2da-8413-5244-aea2-e99a9b2a47a1",
       "metadata": {
         "type": "class-to-class",
         "sourceModuleName": "InternalCoreModule",
@@ -1754,11 +1754,11 @@
         "injectionType": "constructor",
         "internal": true
       },
-      "id": "883d83bd-11dc-5741-a542-aa8e353fbd0f"
+      "id": "dc9bef27-dac6-5a49-9441-645e70895c1b"
     },
-    "7b797b5b-e91a-5cc6-9100-7330592d81c9": {
-      "source": "64c961f0-cb2e-53e5-95a5-590ab811d0d5",
-      "target": "8320566b-f7d2-5802-9603-faa2ff1fdbef",
+    "552073d3-f2c5-54dc-9858-4b83b6e7232c": {
+      "source": "814286f5-6afc-5fe8-bd31-9e49252b3e84",
+      "target": "98d04266-c04c-5406-9e26-7be953a58803",
       "metadata": {
         "type": "class-to-class",
         "sourceModuleName": "CircularModule",
@@ -1770,11 +1770,11 @@
         "keyOrIndex": 0,
         "injectionType": "constructor"
       },
-      "id": "7b797b5b-e91a-5cc6-9100-7330592d81c9"
+      "id": "552073d3-f2c5-54dc-9858-4b83b6e7232c"
     },
-    "1652c590-de47-5c4c-ae22-8d88e1663175": {
-      "source": "f1efd40f-12c0-5bf8-a499-fa63f5b6a77c",
-      "target": "37849930-7360-509c-abde-733fb268c8dc",
+    "13671bfb-15c2-53da-91b7-d3cb1bd7aa30": {
+      "source": "bc426371-e5ad-55f4-895a-6701455d2b40",
+      "target": "ce56b867-fe35-5579-b455-3f33e161c418",
       "metadata": {
         "type": "class-to-class",
         "sourceModuleName": "PropertiesModule",
@@ -1786,11 +1786,11 @@
         "keyOrIndex": "service",
         "injectionType": "property"
       },
-      "id": "1652c590-de47-5c4c-ae22-8d88e1663175"
+      "id": "13671bfb-15c2-53da-91b7-d3cb1bd7aa30"
     },
-    "75a05070-c244-56f7-b89b-bf0830498329": {
-      "source": "f1efd40f-12c0-5bf8-a499-fa63f5b6a77c",
-      "target": "822f3a86-ab6f-58ec-8ca5-73d0f3371b8a",
+    "762418b1-e772-5025-992c-ab319bbc8e52": {
+      "source": "bc426371-e5ad-55f4-895a-6701455d2b40",
+      "target": "576fbd85-f97e-54b2-bf76-87ed5c2df2ed",
       "metadata": {
         "type": "class-to-class",
         "sourceModuleName": "PropertiesModule",
@@ -1802,11 +1802,11 @@
         "keyOrIndex": "token",
         "injectionType": "property"
       },
-      "id": "75a05070-c244-56f7-b89b-bf0830498329"
+      "id": "762418b1-e772-5025-992c-ab319bbc8e52"
     },
-    "a77c5fa0-6de5-5655-9bb1-25487bd6aa04": {
-      "source": "f1efd40f-12c0-5bf8-a499-fa63f5b6a77c",
-      "target": "d07d69a1-3a51-5605-8463-2d1625d2c1c6",
+    "a131d39b-ff7b-5691-9428-34ad12d93e6e": {
+      "source": "bc426371-e5ad-55f4-895a-6701455d2b40",
+      "target": "d8a13bee-462c-5e09-862b-8a50ba181163",
       "metadata": {
         "type": "class-to-class",
         "sourceModuleName": "PropertiesModule",
@@ -1818,11 +1818,11 @@
         "keyOrIndex": "symbolToken",
         "injectionType": "property"
       },
-      "id": "a77c5fa0-6de5-5655-9bb1-25487bd6aa04"
+      "id": "a131d39b-ff7b-5691-9428-34ad12d93e6e"
     },
-    "ff034dba-9e7f-5ae7-8823-1feab50720a8": {
-      "source": "1bd85856-6a0d-5ad9-b5ab-4e446f49a760",
-      "target": "0f97a46c-8619-5a59-a84d-bc0af7a2f49c",
+    "617b6c39-f865-514a-a7a4-8195c1442b7b": {
+      "source": "c0b09f2c-4660-5a02-a030-78bfa806c398",
+      "target": "5ee7ae73-b49c-5410-bf8b-1cea1fc2727b",
       "metadata": {
         "type": "class-to-class",
         "sourceModuleName": "InternalCoreModule",
@@ -1835,10 +1835,10 @@
         "injectionType": "constructor",
         "internal": true
       },
-      "id": "ff034dba-9e7f-5ae7-8823-1feab50720a8"
+      "id": "617b6c39-f865-514a-a7a4-8195c1442b7b"
     },
-    "efc5503f-e3e9-548f-a58a-c303d130e6e7": {
-      "source": "02a39df5-5e06-5700-9d18-b60515336df3",
+    "d90d6621-f877-56aa-826c-5ba4b3f95f12": {
+      "source": "ca6529cf-19c0-5d1a-ac52-6f21455fbca5",
       "target": "6676173c-ce2a-51d3-952a-93fa8c7a3923",
       "metadata": {
         "type": "class-to-class",
@@ -1851,10 +1851,10 @@
         "keyOrIndex": 0,
         "injectionType": "constructor"
       },
-      "id": "efc5503f-e3e9-548f-a58a-c303d130e6e7"
+      "id": "d90d6621-f877-56aa-826c-5ba4b3f95f12"
     },
-    "95485fc7-feac-5945-aa29-e0f1d4cc6119": {
-      "source": "faa725fd-ae13-5c49-9ca5-061fbbab787e",
+    "21e8c0ef-65e0-5a7c-a084-019887ba2fc1": {
+      "source": "f95f0452-ba3c-5749-aead-d4d34a6235d3",
       "target": "6676173c-ce2a-51d3-952a-93fa8c7a3923",
       "metadata": {
         "type": "class-to-class",
@@ -1867,10 +1867,10 @@
         "keyOrIndex": 0,
         "injectionType": "constructor"
       },
-      "id": "95485fc7-feac-5945-aa29-e0f1d4cc6119"
+      "id": "21e8c0ef-65e0-5a7c-a084-019887ba2fc1"
     },
-    "6958b8d2-f4c9-5d98-9da4-a10a294262b2": {
-      "source": "d77a662b-e5f5-523d-946b-211624d7497c",
+    "f29b9103-59b6-52b8-9d29-9717f9280246": {
+      "source": "028385ff-10ad-5a1c-851e-d4ca2bdf8e5d",
       "target": "6676173c-ce2a-51d3-952a-93fa8c7a3923",
       "metadata": {
         "type": "class-to-class",
@@ -1883,7 +1883,7 @@
         "keyOrIndex": 0,
         "injectionType": "constructor"
       },
-      "id": "6958b8d2-f4c9-5d98-9da4-a10a294262b2"
+      "id": "f29b9103-59b6-52b8-9d29-9717f9280246"
     },
     "943b4528-d32f-5929-b6af-360bf3a4972a": {
       "source": "88f1f0a0-285c-5d09-ae0a-61313d7ba1c3",
@@ -1901,9 +1901,9 @@
       },
       "id": "943b4528-d32f-5929-b6af-360bf3a4972a"
     },
-    "c5ba7998-5ad7-5f4b-a2b9-b25aa2494d65": {
+    "6826749b-2fe6-5f56-ada6-e619292cbf8b": {
       "source": "aebfd5cb-285b-5ea8-b10a-22b8ec75dc48",
-      "target": "98fbcd2c-b5dc-5819-b1c1-a8540f39a343",
+      "target": "78cb636b-37ad-583d-8d4f-f322886f43f9",
       "metadata": {
         "type": "class-to-class",
         "sourceModuleName": "DurableModule",
@@ -1916,11 +1916,11 @@
         "injectionType": "constructor",
         "internal": true
       },
-      "id": "c5ba7998-5ad7-5f4b-a2b9-b25aa2494d65"
+      "id": "6826749b-2fe6-5f56-ada6-e619292cbf8b"
     },
-    "b474b908-5c65-5711-9453-22afeed92ec4": {
+    "603c685b-36de-5d5d-a13b-348f419e11f9": {
       "source": "639fd5ea-03c8-52ed-90a1-65d76f46b662",
-      "target": "98fbcd2c-b5dc-5819-b1c1-a8540f39a343",
+      "target": "78cb636b-37ad-583d-8d4f-f322886f43f9",
       "metadata": {
         "type": "class-to-class",
         "sourceModuleName": "HelperModule",
@@ -1933,11 +1933,11 @@
         "injectionType": "constructor",
         "internal": true
       },
-      "id": "b474b908-5c65-5711-9453-22afeed92ec4"
+      "id": "603c685b-36de-5d5d-a13b-348f419e11f9"
     },
-    "dd41e29b-b05d-5b77-85f9-0c0a71130285": {
+    "ed589357-ef7e-5537-ba11-94db263976f4": {
       "source": "02df382a-48e1-54d2-a16c-2322f9a13ed4",
-      "target": "0f97a46c-8619-5a59-a84d-bc0af7a2f49c",
+      "target": "5ee7ae73-b49c-5410-bf8b-1cea1fc2727b",
       "metadata": {
         "type": "class-to-class",
         "sourceModuleName": "CatsModule",
@@ -1950,7 +1950,7 @@
         "injectionType": "constructor",
         "internal": true
       },
-      "id": "dd41e29b-b05d-5b77-85f9-0c0a71130285"
+      "id": "ed589357-ef7e-5537-ba11-94db263976f4"
     },
     "aa096600-fa82-55f6-9c90-000509c8d2d0": {
       "source": "a769a8d9-6245-5479-8822-cbdb27f9c2b4",
@@ -2016,9 +2016,9 @@
       },
       "id": "4c938b43-3a4d-5cb9-8891-f6e8e25765e8"
     },
-    "c995fb45-6e6b-51ce-b7e7-bb514870a884": {
-      "source": "8320566b-f7d2-5802-9603-faa2ff1fdbef",
-      "target": "64c961f0-cb2e-53e5-95a5-590ab811d0d5",
+    "f499705b-2c1d-5992-8f80-75e7abd57eda": {
+      "source": "98d04266-c04c-5406-9e26-7be953a58803",
+      "target": "814286f5-6afc-5fe8-bd31-9e49252b3e84",
       "metadata": {
         "type": "class-to-class",
         "sourceModuleName": "InputModule",
@@ -2030,11 +2030,11 @@
         "keyOrIndex": 0,
         "injectionType": "constructor"
       },
-      "id": "c995fb45-6e6b-51ce-b7e7-bb514870a884"
+      "id": "f499705b-2c1d-5992-8f80-75e7abd57eda"
     },
-    "706b2812-7325-501f-98fd-479d8782f3ba": {
-      "source": "d8184163-323d-511e-b2a0-368003f3425a",
-      "target": "d77a662b-e5f5-523d-946b-211624d7497c",
+    "333ce738-ca0b-557e-91cd-aedd9f697ad8": {
+      "source": "317c5d2d-4c46-5b39-83e8-c27aa64a1edd",
+      "target": "028385ff-10ad-5a1c-851e-d4ca2bdf8e5d",
       "metadata": {
         "type": "class-to-class",
         "sourceModuleName": "HelloModule",
@@ -2046,7 +2046,7 @@
         "keyOrIndex": 0,
         "injectionType": "constructor"
       },
-      "id": "706b2812-7325-501f-98fd-479d8782f3ba"
+      "id": "333ce738-ca0b-557e-91cd-aedd9f697ad8"
     },
     "6f5134a4-f7f3-51ba-bfbb-8bafc10a407f": {
       "source": "b08bf57c-5956-57a2-b901-b4e41243e0ba",
@@ -2080,9 +2080,9 @@
       },
       "id": "641bcf28-5c94-5b7e-a3ec-39695a110809"
     },
-    "33b2cfb2-f3e9-5aff-9caa-2361e394b662": {
+    "9e818131-9b06-522c-81f3-97ac728fb2e9": {
       "source": "9cd5ba23-0bdc-52f0-9e25-c478e0689f88",
-      "target": "66da07f0-0d07-501b-b783-869c9dac4d0c",
+      "target": "7ee7d0cd-f4e7-54e5-a204-025b0a180c2f",
       "metadata": {
         "type": "class-to-class",
         "sourceModuleName": "CatsModule",
@@ -2094,11 +2094,11 @@
         "keyOrIndex": 0,
         "injectionType": "constructor"
       },
-      "id": "33b2cfb2-f3e9-5aff-9caa-2361e394b662"
+      "id": "9e818131-9b06-522c-81f3-97ac728fb2e9"
     },
-    "7b630278-4dcd-5f83-8d02-03399f4dc779": {
-      "source": "c6535829-8ec6-5852-b1f5-2a1332218877",
-      "target": "faa725fd-ae13-5c49-9ca5-061fbbab787e",
+    "f030355a-5b10-5794-8395-b87966c04f8b": {
+      "source": "769e8ad6-f9f6-515d-83f5-9c6a8e6ebc54",
+      "target": "f95f0452-ba3c-5749-aead-d4d34a6235d3",
       "metadata": {
         "type": "class-to-class",
         "sourceModuleName": "HelloModule",
@@ -2110,11 +2110,11 @@
         "keyOrIndex": 0,
         "injectionType": "constructor"
       },
-      "id": "7b630278-4dcd-5f83-8d02-03399f4dc779"
+      "id": "f030355a-5b10-5794-8395-b87966c04f8b"
     },
-    "5e789513-07cb-557f-9427-eca333315dfb": {
-      "source": "c6535829-8ec6-5852-b1f5-2a1332218877",
-      "target": "d77a662b-e5f5-523d-946b-211624d7497c",
+    "0f621b9b-8472-546e-9efa-9d1b6f0ac867": {
+      "source": "769e8ad6-f9f6-515d-83f5-9c6a8e6ebc54",
+      "target": "028385ff-10ad-5a1c-851e-d4ca2bdf8e5d",
       "metadata": {
         "type": "class-to-class",
         "sourceModuleName": "HelloModule",
@@ -2126,7 +2126,7 @@
         "keyOrIndex": 1,
         "injectionType": "constructor"
       },
-      "id": "5e789513-07cb-557f-9427-eca333315dfb"
+      "id": "0f621b9b-8472-546e-9efa-9d1b6f0ac867"
     },
     "c9c6d848-223a-59fc-be2a-525c9cee8001": {
       "source": "febfc01c-9a3c-5bd8-8150-feaeb7ed0781",
@@ -2160,245 +2160,245 @@
       },
       "id": "216e6db0-e31a-5239-adc5-178cf17232df"
     },
-    "696b3f30-3c36-52a6-b77c-53380384849a": {
-      "source": "d8bd964c-de23-5d00-b06b-670ea2de73af",
-      "target": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
+    "204775bf-5308-5823-9cd7-755fd45ec1ad": {
+      "source": "419c0cf1-5c75-5001-9c7c-f4068e096458",
+      "target": "190c0792-40e6-59da-a900-900f5421fbf3",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "RootTestModule",
         "targetModuleName": "AppModule"
       },
-      "id": "696b3f30-3c36-52a6-b77c-53380384849a"
+      "id": "204775bf-5308-5823-9cd7-755fd45ec1ad"
     },
-    "24fab9f2-9034-5fec-88ea-f60703d55746": {
-      "source": "d8bd964c-de23-5d00-b06b-670ea2de73af",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+    "7cab9450-4ebb-5390-be71-0e1d45e8192e": {
+      "source": "419c0cf1-5c75-5001-9c7c-f4068e096458",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "RootTestModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "24fab9f2-9034-5fec-88ea-f60703d55746"
+      "id": "7cab9450-4ebb-5390-be71-0e1d45e8192e"
     },
-    "8265e34f-74df-5723-8342-12f29f099617": {
-      "source": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
+    "156ba1f5-a3c2-5842-9579-df66d731c856": {
+      "source": "190c0792-40e6-59da-a900-900f5421fbf3",
       "target": "cb7b08c4-a986-5118-8811-cebf00c9ad57",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "AppModule",
         "targetModuleName": "CoreModule"
       },
-      "id": "8265e34f-74df-5723-8342-12f29f099617"
+      "id": "156ba1f5-a3c2-5842-9579-df66d731c856"
     },
-    "d38f158c-13fa-5818-95fd-cf3a2127b198": {
-      "source": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
-      "target": "ff654e54-b225-59ff-9435-5856c3f023e6",
+    "51d961af-436c-562c-afa0-54e916822ec6": {
+      "source": "190c0792-40e6-59da-a900-900f5421fbf3",
+      "target": "881c95d9-c95d-5e43-8c9e-8c837f7ef5fc",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "AppModule",
         "targetModuleName": "CatsModule"
       },
-      "id": "d38f158c-13fa-5818-95fd-cf3a2127b198"
+      "id": "51d961af-436c-562c-afa0-54e916822ec6"
     },
-    "e9605d46-6a3a-5025-94ec-5422dd0dd1ea": {
-      "source": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
-      "target": "c3f045fc-20d0-5ef4-b271-7cb89aa8c5cf",
+    "20671238-7477-580a-b1fc-29a6fef62992": {
+      "source": "190c0792-40e6-59da-a900-900f5421fbf3",
+      "target": "83323fa4-1058-50ca-afd1-186e9b44528e",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "AppModule",
         "targetModuleName": "HelloModule"
       },
-      "id": "e9605d46-6a3a-5025-94ec-5422dd0dd1ea"
+      "id": "20671238-7477-580a-b1fc-29a6fef62992"
     },
-    "99b36155-6b9e-5aa2-a540-7b1ad68e4ad6": {
-      "source": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
+    "cc8acca8-9bff-53ca-9481-0a5e2a651d75": {
+      "source": "190c0792-40e6-59da-a900-900f5421fbf3",
       "target": "da1314a2-cdd6-5915-9a1f-a0db319b2a0a",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "AppModule",
         "targetModuleName": "DurableModule"
       },
-      "id": "99b36155-6b9e-5aa2-a540-7b1ad68e4ad6"
+      "id": "cc8acca8-9bff-53ca-9481-0a5e2a651d75"
     },
-    "b1ea7c81-a642-5313-a6bb-ca69816a0200": {
-      "source": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
+    "aa4a2aa2-aa32-5dcd-add6-6e27a8942a2e": {
+      "source": "190c0792-40e6-59da-a900-900f5421fbf3",
       "target": "038094a4-e405-516e-a3a8-c554fe07fa96",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "AppModule",
         "targetModuleName": "DogsModule"
       },
-      "id": "b1ea7c81-a642-5313-a6bb-ca69816a0200"
+      "id": "aa4a2aa2-aa32-5dcd-add6-6e27a8942a2e"
     },
-    "7cae432f-2982-51cb-b27c-72a68a753372": {
-      "source": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
+    "83775522-4d64-57a9-bce2-90935e3552c7": {
+      "source": "190c0792-40e6-59da-a900-900f5421fbf3",
       "target": "d179d559-dd09-5660-bd2b-f204b8ed7baa",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "AppModule",
         "targetModuleName": "UsersModule"
       },
-      "id": "7cae432f-2982-51cb-b27c-72a68a753372"
+      "id": "83775522-4d64-57a9-bce2-90935e3552c7"
     },
-    "4176ae81-5378-5672-856b-d11a6a02f55f": {
-      "source": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
+    "2721f189-5437-543c-a0dc-77962e66d11f": {
+      "source": "190c0792-40e6-59da-a900-900f5421fbf3",
       "target": "d67cef96-6f3b-5efe-82c0-17b967daa5c5",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "AppModule",
         "targetModuleName": "DatabaseModule"
       },
-      "id": "4176ae81-5378-5672-856b-d11a6a02f55f"
+      "id": "2721f189-5437-543c-a0dc-77962e66d11f"
     },
-    "c153a55a-0888-5163-8c33-9c1d30a264d3": {
-      "source": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
+    "e2ec7e98-ae5d-50f3-b304-ee88f6980672": {
+      "source": "190c0792-40e6-59da-a900-900f5421fbf3",
       "target": "5730500b-b42b-507d-86df-8a5af01ae9c2",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "AppModule",
         "targetModuleName": "ExternalSvcModule"
       },
-      "id": "c153a55a-0888-5163-8c33-9c1d30a264d3"
+      "id": "e2ec7e98-ae5d-50f3-b304-ee88f6980672"
     },
-    "9b78971d-acfa-561a-95b7-6db5c66243b5": {
-      "source": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
+    "136c75ca-a34e-56af-9b4b-912e83b1c047": {
+      "source": "190c0792-40e6-59da-a900-900f5421fbf3",
       "target": "22ecab4d-2742-5e17-b611-97dc15ff02a6",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "AppModule",
         "targetModuleName": "ChatModule"
       },
-      "id": "9b78971d-acfa-561a-95b7-6db5c66243b5"
+      "id": "136c75ca-a34e-56af-9b4b-912e83b1c047"
     },
-    "c668d0c1-ced2-5262-908e-1e573aefc4c8": {
-      "source": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
+    "3edba900-79ec-5929-80bf-f9204ceae263": {
+      "source": "190c0792-40e6-59da-a900-900f5421fbf3",
       "target": "d9e0023c-5d26-5419-b2df-18111057965c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "AppModule",
         "targetModuleName": "RequestChainModule"
       },
-      "id": "c668d0c1-ced2-5262-908e-1e573aefc4c8"
+      "id": "3edba900-79ec-5929-80bf-f9204ceae263"
     },
-    "c23f6f08-785c-55cb-8b96-f9288651d0cc": {
-      "source": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
-      "target": "1ef97d71-97a2-5b1b-891c-5c823511343c",
+    "9a432e1f-ff52-5260-a82d-b03b6088c2ec": {
+      "source": "190c0792-40e6-59da-a900-900f5421fbf3",
+      "target": "f5e96eaf-21c4-533f-8324-a118e7763b54",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "AppModule",
         "targetModuleName": "PropertiesModule"
       },
-      "id": "c23f6f08-785c-55cb-8b96-f9288651d0cc"
+      "id": "9a432e1f-ff52-5260-a82d-b03b6088c2ec"
     },
-    "946ee9cf-bacb-5237-ae90-5f39f8cb2290": {
-      "source": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
-      "target": "0e41b294-78d8-5f2a-8889-3a3ddc0f7c3d",
+    "f783d271-bea1-5513-8c18-6f696e77979d": {
+      "source": "190c0792-40e6-59da-a900-900f5421fbf3",
+      "target": "8d33008c-4294-5979-987b-4b50bb077c85",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "AppModule",
         "targetModuleName": "InputModule"
       },
-      "id": "946ee9cf-bacb-5237-ae90-5f39f8cb2290"
+      "id": "f783d271-bea1-5513-8c18-6f696e77979d"
     },
-    "86012aa7-e9e2-56d1-a751-28800dbc1886": {
-      "source": "33ad50d4-f5f7-59e0-a95a-b2e0d2cf019e",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+    "a24459dc-3cae-5df9-b1a4-566e9798cff2": {
+      "source": "190c0792-40e6-59da-a900-900f5421fbf3",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "AppModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "86012aa7-e9e2-56d1-a751-28800dbc1886"
+      "id": "a24459dc-3cae-5df9-b1a4-566e9798cff2"
     },
-    "9da4294e-90f7-57fd-9f5f-c392389ecc3f": {
+    "00e334bb-274c-5c31-b1df-a083ae7da1ac": {
       "source": "cb7b08c4-a986-5118-8811-cebf00c9ad57",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "CoreModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "9da4294e-90f7-57fd-9f5f-c392389ecc3f"
+      "id": "00e334bb-274c-5c31-b1df-a083ae7da1ac"
     },
-    "bf0d86f8-0896-53a9-bedd-fbce05f4b506": {
-      "source": "ff654e54-b225-59ff-9435-5856c3f023e6",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+    "592a41d1-72a1-571c-8e62-398a6c705350": {
+      "source": "881c95d9-c95d-5e43-8c9e-8c837f7ef5fc",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "CatsModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "bf0d86f8-0896-53a9-bedd-fbce05f4b506"
+      "id": "592a41d1-72a1-571c-8e62-398a6c705350"
     },
-    "952e1331-5129-575b-a294-82b6b3906787": {
-      "source": "c3f045fc-20d0-5ef4-b271-7cb89aa8c5cf",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+    "09fe6382-a915-52c9-ab82-ed769386d488": {
+      "source": "83323fa4-1058-50ca-afd1-186e9b44528e",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "HelloModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "952e1331-5129-575b-a294-82b6b3906787"
+      "id": "09fe6382-a915-52c9-ab82-ed769386d488"
     },
-    "f24857c1-ed01-5c52-a248-4cccdfbb1b55": {
+    "c9b7ad71-985f-5578-bd70-649ecfb2339e": {
       "source": "da1314a2-cdd6-5915-9a1f-a0db319b2a0a",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "DurableModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "f24857c1-ed01-5c52-a248-4cccdfbb1b55"
+      "id": "c9b7ad71-985f-5578-bd70-649ecfb2339e"
     },
-    "476b489e-8f75-5886-91e4-dc9a3f2c5146": {
+    "4a84bdb3-670f-5bb5-a8aa-cfa16a9e5993": {
       "source": "038094a4-e405-516e-a3a8-c554fe07fa96",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "DogsModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "476b489e-8f75-5886-91e4-dc9a3f2c5146"
+      "id": "4a84bdb3-670f-5bb5-a8aa-cfa16a9e5993"
     },
-    "d7b2f9b2-8948-5700-b73b-5e0e6ba09974": {
+    "c582e5da-b9fc-51e2-8566-8487c70a35ae": {
       "source": "d179d559-dd09-5660-bd2b-f204b8ed7baa",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "UsersModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "d7b2f9b2-8948-5700-b73b-5e0e6ba09974"
+      "id": "c582e5da-b9fc-51e2-8566-8487c70a35ae"
     },
-    "270ad78e-ded9-53d1-bc74-cb9cc0b6481e": {
+    "443917b4-4966-519b-870a-23405baaf539": {
       "source": "d67cef96-6f3b-5efe-82c0-17b967daa5c5",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "DatabaseModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "270ad78e-ded9-53d1-bc74-cb9cc0b6481e"
+      "id": "443917b4-4966-519b-870a-23405baaf539"
     },
-    "d2528703-6de3-534b-968a-c9b4c86fb108": {
+    "d26daefa-ed22-5aa1-8622-c2c376e72e8e": {
       "source": "5730500b-b42b-507d-86df-8a5af01ae9c2",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "ExternalSvcModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "d2528703-6de3-534b-968a-c9b4c86fb108"
+      "id": "d26daefa-ed22-5aa1-8622-c2c376e72e8e"
     },
-    "62acabdc-184b-53bf-b6e5-9a1f4a2398e8": {
+    "6c8277b1-b03d-52f5-9a69-e399f0cd8b24": {
       "source": "22ecab4d-2742-5e17-b611-97dc15ff02a6",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "ChatModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "62acabdc-184b-53bf-b6e5-9a1f4a2398e8"
+      "id": "6c8277b1-b03d-52f5-9a69-e399f0cd8b24"
     },
     "ca2b9513-23d8-503f-b8d4-228358087dba": {
       "source": "d9e0023c-5d26-5419-b2df-18111057965c",
@@ -2410,75 +2410,75 @@
       },
       "id": "ca2b9513-23d8-503f-b8d4-228358087dba"
     },
-    "5c1c47f1-816d-5d94-ab04-3c647ce8aa3f": {
+    "9956b2a4-282c-530d-9362-f07f964635ed": {
       "source": "d9e0023c-5d26-5419-b2df-18111057965c",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "RequestChainModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "5c1c47f1-816d-5d94-ab04-3c647ce8aa3f"
+      "id": "9956b2a4-282c-530d-9362-f07f964635ed"
     },
-    "747a1b4e-76bd-572d-926e-d007848f063f": {
+    "a8d3be2f-c7df-5c4e-b67f-2cfaa14f0aa7": {
       "source": "fe0b8505-2fef-54ff-813f-5ad4060a6e38",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "HelperModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "747a1b4e-76bd-572d-926e-d007848f063f"
+      "id": "a8d3be2f-c7df-5c4e-b67f-2cfaa14f0aa7"
     },
-    "896ea27a-d712-51ce-838f-e87d0c007ce6": {
-      "source": "1ef97d71-97a2-5b1b-891c-5c823511343c",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+    "26a28a80-197b-5bc7-9a37-55375086efda": {
+      "source": "f5e96eaf-21c4-533f-8324-a118e7763b54",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "PropertiesModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "896ea27a-d712-51ce-838f-e87d0c007ce6"
+      "id": "26a28a80-197b-5bc7-9a37-55375086efda"
     },
-    "771b140b-b5fa-5dd4-b4d1-a4382b3fca1b": {
-      "source": "0e41b294-78d8-5f2a-8889-3a3ddc0f7c3d",
-      "target": "746cc074-e478-5e4b-8381-f1af1e2ae09f",
+    "e40943b5-db14-5ea3-b6c5-94dfbb94d520": {
+      "source": "8d33008c-4294-5979-987b-4b50bb077c85",
+      "target": "51b4619f-17da-58cc-a918-8bd2de787ade",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "InputModule",
         "targetModuleName": "CircularModule"
       },
-      "id": "771b140b-b5fa-5dd4-b4d1-a4382b3fca1b"
+      "id": "e40943b5-db14-5ea3-b6c5-94dfbb94d520"
     },
-    "f3aff888-ddfc-51df-afe3-e7039d67d798": {
-      "source": "0e41b294-78d8-5f2a-8889-3a3ddc0f7c3d",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+    "e4779052-0f38-5368-a6e7-de6b59077684": {
+      "source": "8d33008c-4294-5979-987b-4b50bb077c85",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "InputModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "f3aff888-ddfc-51df-afe3-e7039d67d798"
+      "id": "e4779052-0f38-5368-a6e7-de6b59077684"
     },
-    "235202ad-f68a-537a-89fd-846f7a7d3fb8": {
-      "source": "746cc074-e478-5e4b-8381-f1af1e2ae09f",
-      "target": "0e41b294-78d8-5f2a-8889-3a3ddc0f7c3d",
+    "92ed76ae-d5bc-5a24-8092-5efd9343e13a": {
+      "source": "51b4619f-17da-58cc-a918-8bd2de787ade",
+      "target": "8d33008c-4294-5979-987b-4b50bb077c85",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "CircularModule",
         "targetModuleName": "InputModule"
       },
-      "id": "235202ad-f68a-537a-89fd-846f7a7d3fb8"
+      "id": "92ed76ae-d5bc-5a24-8092-5efd9343e13a"
     },
-    "e5fb0dc2-bb23-55de-bae8-6db87b08a9be": {
-      "source": "746cc074-e478-5e4b-8381-f1af1e2ae09f",
-      "target": "9d72a9e9-4e3c-545b-a5c3-f7c3396c6408",
+    "c2ed6ca3-057e-5331-8fc6-923b430ab816": {
+      "source": "51b4619f-17da-58cc-a918-8bd2de787ade",
+      "target": "cd386e3b-3d69-5901-952d-1f208af88d8c",
       "metadata": {
         "type": "module-to-module",
         "sourceModuleName": "CircularModule",
         "targetModuleName": "InternalCoreModule"
       },
-      "id": "e5fb0dc2-bb23-55de-bae8-6db87b08a9be"
+      "id": "c2ed6ca3-057e-5331-8fc6-923b430ab816"
     },
     "56f5df54-a625-57db-99ea-f51bacf7d2e1": {
       "source": "9cd5ba23-0bdc-52f0-9e25-c478e0689f88",
@@ -2495,8 +2495,8 @@
       },
       "id": "56f5df54-a625-57db-99ea-f51bacf7d2e1"
     },
-    "fe7ebc60-36e9-5177-8a03-d0cb98243218": {
-      "source": "c6535829-8ec6-5852-b1f5-2a1332218877",
+    "330b4c34-6801-54bf-bac2-7ce72659861e": {
+      "source": "769e8ad6-f9f6-515d-83f5-9c6a8e6ebc54",
       "target": "beeb3251-4b2b-5810-a4ec-ed05623a7557",
       "metadata": {
         "type": "class-to-class",
@@ -2508,10 +2508,10 @@
         "targetModuleName": "HelloModule",
         "injectionType": "decorator"
       },
-      "id": "fe7ebc60-36e9-5177-8a03-d0cb98243218"
+      "id": "330b4c34-6801-54bf-bac2-7ce72659861e"
     },
-    "f7ddc5bb-b39f-500b-b051-4798536781b1": {
-      "source": "c6535829-8ec6-5852-b1f5-2a1332218877",
+    "0a91b819-ec5e-577d-a0b2-aac29cdde0a0": {
+      "source": "769e8ad6-f9f6-515d-83f5-9c6a8e6ebc54",
       "target": "0ea50366-8cd7-5410-91f4-5a140b2a5fe9",
       "metadata": {
         "type": "class-to-class",
@@ -2523,11 +2523,11 @@
         "targetModuleName": "HelloModule",
         "injectionType": "decorator"
       },
-      "id": "f7ddc5bb-b39f-500b-b051-4798536781b1"
+      "id": "0a91b819-ec5e-577d-a0b2-aac29cdde0a0"
     },
-    "ce53b93d-f1db-5491-9297-1400678505ab": {
-      "source": "c6535829-8ec6-5852-b1f5-2a1332218877",
-      "target": "d8184163-323d-511e-b2a0-368003f3425a",
+    "0508cfc7-3e89-5431-83b2-bd31523d1e82": {
+      "source": "769e8ad6-f9f6-515d-83f5-9c6a8e6ebc54",
+      "target": "317c5d2d-4c46-5b39-83e8-c27aa64a1edd",
       "metadata": {
         "type": "class-to-class",
         "sourceModuleName": "HelloModule",
@@ -2538,7 +2538,7 @@
         "targetModuleName": "HelloModule",
         "injectionType": "decorator"
       },
-      "id": "ce53b93d-f1db-5491-9297-1400678505ab"
+      "id": "0508cfc7-3e89-5431-83b2-bd31523d1e82"
     },
     "57b364e1-cb7b-5314-b4fe-49c4a024b7aa": {
       "source": "5b34c433-222a-5cf1-a0cd-cfe52d873525",
diff --git a/integration/nest-application/global-prefix/e2e/global-prefix.spec.ts b/integration/nest-application/global-prefix/e2e/global-prefix.spec.ts
index 131d2dd03..74f8e9ad6 100644
--- a/integration/nest-application/global-prefix/e2e/global-prefix.spec.ts
+++ b/integration/nest-application/global-prefix/e2e/global-prefix.spec.ts
@@ -119,6 +119,17 @@ describe('Global prefix', () => {
     await request(server).get('/api/v1/middleware/foo').expect(404);
   });
 
+  it(`should get the params in the global prefix`, async () => {
+    app.setGlobalPrefix('/api/:tenantId');
+
+    server = app.getHttpServer();
+    await app.init();
+
+    await request(server)
+      .get('/api/test/params')
+      .expect(200, { '0': 'params', tenantId: 'test' });
+  });
+
   afterEach(async () => {
     await app.close();
   });
diff --git a/integration/nest-application/global-prefix/src/app.controller.ts b/integration/nest-application/global-prefix/src/app.controller.ts
index 912c0d76c..d826cd0db 100644
--- a/integration/nest-application/global-prefix/src/app.controller.ts
+++ b/integration/nest-application/global-prefix/src/app.controller.ts
@@ -7,6 +7,11 @@ export class AppController {
     return 'Hello: ' + req.extras?.data;
   }
 
+  @Get('params')
+  getParams(@Req() req): any {
+    return req.middlewareParams;
+  }
+
   @Get('health')
   getHealth(): string {
     return 'up';
diff --git a/integration/nest-application/global-prefix/src/app.module.ts b/integration/nest-application/global-prefix/src/app.module.ts
index 85d1e6ac4..f182915c4 100644
--- a/integration/nest-application/global-prefix/src/app.module.ts
+++ b/integration/nest-application/global-prefix/src/app.module.ts
@@ -22,6 +22,11 @@ export class AppModule {
         req.extras = { data: 'Data attached in middleware' };
         next();
       })
+      .forRoutes({ path: '*', method: RequestMethod.GET })
+      .apply((req, res, next) => {
+        req.middlewareParams = req.params;
+        next();
+      })
       .forRoutes({ path: '*', method: RequestMethod.GET });
   }
 }
diff --git a/integration/nest-application/use-body-parser/e2e/express.spec.ts b/integration/nest-application/use-body-parser/e2e/express.spec.ts
new file mode 100644
index 000000000..06e77086d
--- /dev/null
+++ b/integration/nest-application/use-body-parser/e2e/express.spec.ts
@@ -0,0 +1,95 @@
+import { NestExpressApplication } from '@nestjs/platform-express';
+import { Test } from '@nestjs/testing';
+import { OptionsUrlencoded } from 'body-parser';
+import { expect } from 'chai';
+import * as request from 'supertest';
+import { AppModule } from '../src/app.module';
+
+describe('Body Parser (Express Application)', () => {
+  const moduleFixture = Test.createTestingModule({
+    imports: [AppModule],
+  });
+  let app: NestExpressApplication;
+
+  afterEach(async () => {
+    await app.close();
+  });
+
+  describe('application/json', () => {
+    const stringLimit = '{ "msg": "Hello, World" }';
+    const stringOverLimit = '{ "msg": "Hello, World!" }';
+
+    beforeEach(async () => {
+      const testFixture = await moduleFixture.compile();
+
+      app = testFixture
+        .createNestApplication<NestExpressApplication>({
+          rawBody: true,
+          logger: false,
+        })
+        .useBodyParser('json', { limit: Buffer.from(stringLimit).byteLength });
+
+      await app.init();
+    });
+
+    it('should allow request with matching body limit', async () => {
+      const response = await request(app.getHttpServer())
+        .post('/')
+        .set('Content-Type', 'application/json')
+        .send(stringLimit)
+        .expect(201);
+
+      expect(response.body).to.eql({
+        raw: stringLimit,
+      });
+    });
+
+    it('should fail if post body is larger than limit', async () => {
+      await request(app.getHttpServer())
+        .post('/')
+        .set('Content-Type', 'application/json')
+        .send(stringOverLimit)
+        .expect(413);
+    });
+  });
+
+  describe('application/x-www-form-urlencoded', () => {
+    const stringLimit = 'msg=Hello, World';
+    const stringOverLimit = 'msg=Hello, World!';
+
+    beforeEach(async () => {
+      const testFixture = await moduleFixture.compile();
+
+      app = testFixture
+        .createNestApplication<NestExpressApplication>({
+          rawBody: true,
+          logger: false,
+        })
+        .useBodyParser<OptionsUrlencoded>('urlencoded', {
+          limit: Buffer.from(stringLimit).byteLength,
+          extended: true,
+        });
+
+      await app.init();
+    });
+    it('should allow request with matching body limit', async () => {
+      const response = await request(app.getHttpServer())
+        .post('/')
+        .set('Content-Type', 'application/x-www-form-urlencoded')
+        .send(stringLimit)
+        .expect(201);
+
+      expect(response.body).to.eql({
+        raw: stringLimit,
+      });
+    });
+
+    it('should fail if post body is larger than limit', async () => {
+      await request(app.getHttpServer())
+        .post('/')
+        .set('Content-Type', 'application/x-www-form-urlencoded')
+        .send(stringOverLimit)
+        .expect(413);
+    });
+  });
+});
diff --git a/integration/nest-application/use-body-parser/e2e/fastify.spec.ts b/integration/nest-application/use-body-parser/e2e/fastify.spec.ts
new file mode 100644
index 000000000..26a9240d2
--- /dev/null
+++ b/integration/nest-application/use-body-parser/e2e/fastify.spec.ts
@@ -0,0 +1,106 @@
+import {
+  FastifyAdapter,
+  NestFastifyApplication,
+} from '@nestjs/platform-fastify';
+import { Test } from '@nestjs/testing';
+import { expect } from 'chai';
+import { AppModule } from '../src/app.module';
+
+describe('Body Parser (Fastify Application)', () => {
+  const moduleFixture = Test.createTestingModule({
+    imports: [AppModule],
+  });
+  let app: NestFastifyApplication;
+
+  afterEach(async () => {
+    await app.close();
+  });
+
+  describe('application/json', () => {
+    const stringLimit = '{ "msg": "Hello, World" }';
+    const stringOverLimit = '{ "msg": "Hello, World!" }';
+
+    beforeEach(async () => {
+      const testFixture = await moduleFixture.compile();
+
+      app = testFixture
+        .createNestApplication<NestFastifyApplication>(new FastifyAdapter(), {
+          rawBody: true,
+          logger: false,
+        })
+        .useBodyParser('application/json', {
+          bodyLimit: Buffer.from(stringLimit).byteLength,
+        });
+
+      await app.init();
+    });
+
+    it('should allow request with matching body limit', async () => {
+      const response = await app.inject({
+        method: 'POST',
+        url: '/',
+        headers: { 'content-type': 'application/json' },
+        payload: stringLimit,
+      });
+
+      expect(JSON.parse(response.body)).to.eql({
+        raw: stringLimit,
+      });
+    });
+
+    it('should fail if post body is larger than limit', async () => {
+      const response = await app.inject({
+        method: 'POST',
+        url: '/',
+        headers: { 'content-type': 'application/json' },
+        payload: stringOverLimit,
+      });
+
+      expect(response.statusCode).to.equal(413);
+    });
+  });
+
+  describe('application/x-www-form-urlencoded', () => {
+    const stringLimit = 'msg=Hello, World';
+    const stringOverLimit = 'msg=Hello, World!';
+
+    beforeEach(async () => {
+      const testFixture = await moduleFixture.compile();
+
+      app = testFixture
+        .createNestApplication<NestFastifyApplication>(new FastifyAdapter(), {
+          rawBody: true,
+          logger: false,
+        })
+        .useBodyParser('application/x-www-form-urlencoded', {
+          bodyLimit: Buffer.from(stringLimit).byteLength,
+        });
+
+      await app.init();
+    });
+
+    it('should allow request with matching body limit', async () => {
+      const response = await app.inject({
+        method: 'POST',
+        url: '/',
+        headers: { 'content-type': 'application/x-www-form-urlencoded' },
+        payload: stringLimit,
+      });
+
+      expect(JSON.parse(response.body)).to.eql({
+        raw: stringLimit,
+      });
+    });
+
+    it('should fail if post body is larger than limit', async () => {
+      const response = await app.inject({
+        method: 'POST',
+        url: '/',
+        headers: { 'content-type': 'application/x-www-form-urlencoded' },
+        payload: stringOverLimit,
+      });
+
+      expect(response.statusCode).to.equal(413);
+    });
+  });
+});
diff --git a/integration/nest-application/use-body-parser/src/app.controller.ts b/integration/nest-application/use-body-parser/src/app.controller.ts
new file mode 100644
index 000000000..8c110580c
--- /dev/null
+++ b/integration/nest-application/use-body-parser/src/app.controller.ts
@@ -0,0 +1,12 @@
+import { Controller, Post, Req, RawBodyRequest } from '@nestjs/common';
+import { IncomingMessage } from 'http';
+
+@Controller()
+export class AppController {
+  @Post()
+  index(@Req() req: RawBodyRequest<IncomingMessage>) {
+    return {
+      raw: req.rawBody?.toString(),
+    };
+  }
+}
diff --git a/integration/nest-application/use-body-parser/src/app.module.ts b/integration/nest-application/use-body-parser/src/app.module.ts
new file mode 100644
index 000000000..848d4aaa7
--- /dev/null
+++ b/integration/nest-application/use-body-parser/src/app.module.ts
@@ -0,0 +1,7 @@
+import { Module } from '@nestjs/common';
+import { AppController } from './app.controller';
+
+@Module({
+  controllers: [AppController],
+})
+export class AppModule {}
diff --git a/integration/nest-application/use-body-parser/tsconfig.json b/integration/nest-application/use-body-parser/tsconfig.json
new file mode 100644
index 000000000..261f9bff2
--- /dev/null
+++ b/integration/nest-application/use-body-parser/tsconfig.json
@@ -0,0 +1,23 @@
+{
+  "compilerOptions": {
+    "module": "commonjs",
+    "declaration": false,
+    "noImplicitAny": false,
+    "removeComments": true,
+    "lib": ["dom"],
+    "noLib": false,
+    "emitDecoratorMetadata": true,
+    "experimentalDecorators": true,
+    "target": "es6",
+    "sourceMap": true,
+    "allowJs": true,
+    "outDir": "./dist"
+  },
+  "include": [
+    "src/**/*",
+    "e2e/**/*"
+  ],
+  "exclude": [
+    "node_modules"
+  ]
+}
diff --git a/lerna.json b/lerna.json
index 783f8d76c..3b44f42f8 100644
--- a/lerna.json
+++ b/lerna.json
@@ -3,5 +3,5 @@
   "packages": [
     "packages/*"
   ],
-  "version": "9.3.0-beta.3"
+  "version": "9.3.2"
 }
diff --git a/package-lock.json b/package-lock.json
index 147b3fbc5..5c5139f7c 100644
Binary files a/package-lock.json and b/package-lock.json differ
diff --git a/package.json b/package.json
index 854569ef8..b53bf9a3d 100644
--- a/package.json
+++ b/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/core",
-  "version": "9.1.2",
+  "version": "9.3.0",
   "description": "Modern, fast, powerful node.js web framework",
   "homepage": "https://nestjs.com",
   "repository": {
@@ -73,7 +73,8 @@
     "reflect-metadata": "0.1.13",
     "rxjs": "7.8.0",
     "socket.io": "4.5.4",
-    "tslib": "2.4.1",
+    "tslib": "2.5.0",
+    "uid": "2.0.1",
     "uuid": "9.0.0"
   },
   "devDependencies": {
@@ -122,7 +123,7 @@
     "commitlint-circle": "1.0.0",
     "concurrently": "7.6.0",
     "conventional-changelog": "3.1.25",
-    "core-js": "3.27.1",
+    "core-js": "3.27.2",
     "coveralls": "3.1.1",
     "delete-empty": "3.0.0",
     "engine.io-client": "6.3.0",
@@ -133,7 +134,7 @@
     "fancy-log": "2.0.0",
     "fastify": "4.12.0",
     "graphql": "15.8.0",
-    "graphql-tools": "8.3.16",
+    "graphql-tools": "8.3.17",
     "gulp": "4.0.2",
     "gulp-clang-format": "1.0.27",
     "gulp-clean": "0.4.0",
@@ -153,7 +154,7 @@
     "markdown-table": "2.0.0",
     "merge-graphql-schemas": "1.7.8",
     "mocha": "10.2.0",
-    "mongoose": "6.8.4",
+    "mongoose": "6.9.0",
     "mqtt": "4.3.7",
     "multer": "1.4.4",
     "mysql2": "3.1.0",
@@ -161,7 +162,7 @@
     "nodemon": "2.0.20",
     "nyc": "15.1.0",
     "prettier": "2.8.3",
-    "redis": "4.5.1",
+    "redis": "4.6.4",
     "rxjs-compat": "6.6.7",
     "sinon": "15.0.1",
     "sinon-chai": "3.7.0",
@@ -171,7 +172,7 @@
     "ts-morph": "17.0.1",
     "ts-node": "10.9.1",
     "typeorm": "0.3.11",
-    "typescript": "4.9.4",
+    "typescript": "4.9.5",
     "wrk": "1.2.1",
     "ws": "8.12.0"
   },
diff --git a/packages/common/cache/interfaces/cache-manager.interface.ts b/packages/common/cache/interfaces/cache-manager.interface.ts
index 9e9d4d6f4..94991e503 100644
--- a/packages/common/cache/interfaces/cache-manager.interface.ts
+++ b/packages/common/cache/interfaces/cache-manager.interface.ts
@@ -47,15 +47,17 @@ export interface CacheStoreSetOptions<T> {
  *
  * @publicApi
  */
-export interface CacheStoreFactory {
-  /**
-   * Return a configured cache store.
-   *
-   * @param args Cache manager options received from `CacheModule.register()`
-   * or `CacheModule.registerAsync()`
-   */
-  create(args: LiteralObject): CacheStore;
-}
+export type CacheStoreFactory =
+  | {
+      /**
+       * Return a configured cache store.
+       *
+       * @param args Cache manager options received from `CacheModule.register()`
+       * or `CacheModule.registerAsync()`
+       */
+      create(args: LiteralObject): CacheStore;
+    }
+  | ((args: LiteralObject) => CacheStore | Promise<CacheStore>);
 
 /**
  * Interface defining Cache Manager configuration options.
diff --git a/packages/common/constants.ts b/packages/common/constants.ts
index 2d18929e0..f25ddff68 100644
--- a/packages/common/constants.ts
+++ b/packages/common/constants.ts
@@ -35,7 +35,7 @@ export const ENHANCER_KEY_TO_SUBTYPE_MAP = {
 } as const;
 
 export type EnhancerSubtype =
-  typeof ENHANCER_KEY_TO_SUBTYPE_MAP[keyof typeof ENHANCER_KEY_TO_SUBTYPE_MAP];
+  (typeof ENHANCER_KEY_TO_SUBTYPE_MAP)[keyof typeof ENHANCER_KEY_TO_SUBTYPE_MAP];
 
 export const RENDER_METADATA = '__renderTemplate__';
 export const HTTP_CODE_METADATA = '__httpCode__';
diff --git a/packages/common/decorators/core/injectable.decorator.ts b/packages/common/decorators/core/injectable.decorator.ts
index 213562f66..ff7ae143c 100644
--- a/packages/common/decorators/core/injectable.decorator.ts
+++ b/packages/common/decorators/core/injectable.decorator.ts
@@ -1,4 +1,4 @@
-import { v4 as uuid } from 'uuid';
+import { uid } from 'uid';
 import { INJECTABLE_WATERMARK, SCOPE_OPTIONS_METADATA } from '../../constants';
 import { ScopeOptions } from '../../interfaces/scope-options.interface';
 import { Type } from '../../interfaces/type.interface';
@@ -52,7 +52,7 @@ export function Injectable(options?: InjectableOptions): ClassDecorator {
  */
 export function mixin<T>(mixinClass: Type<T>) {
   Object.defineProperty(mixinClass, 'name', {
-    value: uuid(),
+    value: uid(21),
   });
   Injectable()(mixinClass);
   return mixinClass;
diff --git a/packages/common/decorators/http/create-route-param-metadata.decorator.ts b/packages/common/decorators/http/create-route-param-metadata.decorator.ts
index 4ea256613..d070e47a7 100644
--- a/packages/common/decorators/http/create-route-param-metadata.decorator.ts
+++ b/packages/common/decorators/http/create-route-param-metadata.decorator.ts
@@ -1,4 +1,4 @@
-import { v4 as uuid } from 'uuid';
+import { uid } from 'uid';
 import { ROUTE_ARGS_METADATA } from '../../constants';
 import { PipeTransform } from '../../index';
 import { Type } from '../../interfaces';
@@ -25,7 +25,7 @@ export function createParamDecorator<
 ): (
   ...dataOrPipes: (Type<PipeTransform> | PipeTransform | FactoryData)[]
 ) => ParameterDecorator {
-  const paramtype = uuid();
+  const paramtype = uid(21);
   return (
       data?,
       ...pipes: (Type<PipeTransform> | PipeTransform | FactoryData)[]
diff --git a/packages/common/exceptions/http.exception.ts b/packages/common/exceptions/http.exception.ts
index bc166a8a1..800287695 100644
--- a/packages/common/exceptions/http.exception.ts
+++ b/packages/common/exceptions/http.exception.ts
@@ -99,9 +99,9 @@ export class HttpException extends Error {
     ) {
       this.message = (this.response as Record<string, any>).message;
     } else if (this.constructor) {
-      this.message = this.constructor.name
-        .match(/[A-Z][a-z]+|[0-9]+/g)
-        .join(' ');
+      this.message =
+        this.constructor.name.match(/[A-Z][a-z]+|[0-9]+/g)?.join(' ') ??
+        'Error';
     }
   }
 
diff --git a/packages/common/file-stream/interfaces/index.ts b/packages/common/file-stream/interfaces/index.ts
new file mode 100644
index 000000000..9be413e21
--- /dev/null
+++ b/packages/common/file-stream/interfaces/index.ts
@@ -0,0 +1,2 @@
+export * from './streamable-options.interface';
+export * from './streamable-handler-response.interface';
diff --git a/packages/common/file-stream/interfaces/streamable-handler-response.interface.ts b/packages/common/file-stream/interfaces/streamable-handler-response.interface.ts
new file mode 100644
index 000000000..c1c77a922
--- /dev/null
+++ b/packages/common/file-stream/interfaces/streamable-handler-response.interface.ts
@@ -0,0 +1,12 @@
+export interface StreamableHandlerResponse {
+  /** `true` if the connection is destroyed, `false` otherwise. */
+  destroyed: boolean;
+  /** `true` if headers were sent, `false` otherwise. */
+  headersSent: boolean;
+  /** The status code that will be sent to the client when the headers get flushed. */
+  statusCode: number;
+  /** Sends the HTTP response. */
+  send: (body: string) => void;
+  /** Signals to the server that all of the response headers and body have been sent. */
+  end: () => void;
+}
diff --git a/packages/common/file-stream/streamable-options.interface.ts b/packages/common/file-stream/interfaces/streamable-options.interface.ts
similarity index 100%
rename from packages/common/file-stream/streamable-options.interface.ts
rename to packages/common/file-stream/interfaces/streamable-options.interface.ts
diff --git a/packages/common/file-stream/streamable-file.ts b/packages/common/file-stream/streamable-file.ts
index 9f3166939..971741d5a 100644
--- a/packages/common/file-stream/streamable-file.ts
+++ b/packages/common/file-stream/streamable-file.ts
@@ -1,13 +1,8 @@
 import { Readable } from 'stream';
 import { types } from 'util';
+import { HttpStatus } from '../enums';
 import { isFunction } from '../utils/shared.utils';
-import { StreamableFileOptions } from './streamable-options.interface';
-
-export interface StreamableHandlerResponse {
-  destroyed: boolean;
-  statusCode: number;
-  send: (msg: string) => void;
-}
+import { StreamableFileOptions, StreamableHandlerResponse } from './interfaces';
 
 /**
  * @see [Streaming files](https://docs.nestjs.com/techniques/streaming-files)
@@ -21,10 +16,16 @@ export class StreamableFile {
     err: Error,
     response: StreamableHandlerResponse,
   ) => void = (err: Error, res) => {
-    if (!res.destroyed) {
-      res.statusCode = 400;
-      res.send(err.message);
+    if (res.destroyed) {
+      return;
     }
+    if (res.headersSent) {
+      res.end();
+      return;
+    }
+
+    res.statusCode = HttpStatus.BAD_REQUEST;
+    res.send(err.message);
   };
 
   constructor(buffer: Uint8Array, options?: StreamableFileOptions);
diff --git a/packages/common/index.ts b/packages/common/index.ts
index c8d815187..99d074870 100644
--- a/packages/common/index.ts
+++ b/packages/common/index.ts
@@ -1,6 +1,6 @@
 /*
  * Nest @common
- * Copyright(c) 2017 - 2022 Kamil Mysliwiec
+ * Copyright(c) 2017 - 2023 Kamil Mysliwiec
  * https://nestjs.com
  * MIT Licensed
  */
diff --git a/packages/common/interfaces/http/http-server.interface.ts b/packages/common/interfaces/http/http-server.interface.ts
index 99b7e55eb..0fc061455 100644
--- a/packages/common/interfaces/http/http-server.interface.ts
+++ b/packages/common/interfaces/http/http-server.interface.ts
@@ -30,6 +30,7 @@ export interface HttpServer<TRequest = any, TResponse = any> {
       | RequestHandler<TRequest, TResponse>
       | ErrorHandler<TRequest, TResponse>,
   ): any;
+  useBodyParser?(...args: any[]): any;
   get(handler: RequestHandler<TRequest, TResponse>): any;
   get(path: string, handler: RequestHandler<TRequest, TResponse>): any;
   post(handler: RequestHandler<TRequest, TResponse>): any;
diff --git a/packages/common/module-utils/configurable-module.builder.ts b/packages/common/module-utils/configurable-module.builder.ts
index c242267e6..d266e2293 100644
--- a/packages/common/module-utils/configurable-module.builder.ts
+++ b/packages/common/module-utils/configurable-module.builder.ts
@@ -205,7 +205,7 @@ export class ConfigurableModuleBuilder<
       static [self.staticMethodKey](
         options: ModuleOptions & ExtraModuleDefinitionOptions,
       ): DynamicModule {
-        const providers = [
+        const providers: Array<Provider> = [
           {
             provide: self.options.optionsInjectionToken,
             useValue: this.omitExtras(options, self.extras),
diff --git a/packages/common/package.json b/packages/common/package.json
index ee2b5963e..8b5979271 100644
--- a/packages/common/package.json
+++ b/packages/common/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/common",
-  "version": "9.3.0-beta.3",
+  "version": "9.3.2",
   "description": "Nest - modern, fast, powerful node.js web framework (@common)",
   "author": "Kamil Mysliwiec",
   "homepage": "https://nestjs.com",
@@ -18,8 +18,8 @@
   "license": "MIT",
   "dependencies": {
     "iterare": "1.2.1",
-    "tslib": "2.4.1",
-    "uuid": "9.0.0"
+    "tslib": "2.5.0",
+    "uid": "2.0.1"
   },
   "peerDependencies": {
     "cache-manager": "<=5",
diff --git a/packages/common/pipes/file/parse-file.pipe.ts b/packages/common/pipes/file/parse-file.pipe.ts
index 3cda9a5fc..4b5b9749b 100644
--- a/packages/common/pipes/file/parse-file.pipe.ts
+++ b/packages/common/pipes/file/parse-file.pipe.ts
@@ -1,8 +1,8 @@
-import { isUndefined } from '../../utils/shared.utils';
 import { Injectable, Optional } from '../../decorators/core';
 import { HttpStatus } from '../../enums';
 import { PipeTransform } from '../../interfaces/features/pipe-transform.interface';
 import { HttpErrorByCode } from '../../utils/http-error-by-code.util';
+import { isEmpty, isObject, isUndefined } from '../../utils/shared.utils';
 import { FileValidator } from './file-validator.interface';
 import { ParseFileOptions } from './parse-file-options.interface';
 
@@ -39,20 +39,34 @@ export class ParseFilePipe implements PipeTransform<any> {
   }
 
   async transform(value: any): Promise<any> {
-    if (isUndefined(value)) {
+    if (this.thereAreNoFilesIn(value)) {
       if (this.fileIsRequired) {
         throw this.exceptionFactory('File is required');
       }
-
       return value;
     }
 
     if (this.validators.length) {
-      await this.validate(value);
+      if (Array.isArray(value)) {
+        await this.validateFiles(value);
+      } else {
+        await this.validate(value);
+      }
     }
+
     return value;
   }
 
+  private validateFiles(files: any[]): Promise<any[]> {
+    return Promise.all(files.map(f => this.validate(f)));
+  }
+
+  private thereAreNoFilesIn(value: any): boolean {
+    const isEmptyArray = Array.isArray(value) && isEmpty(value);
+    const isEmptyObject = isObject(value) && isEmpty(Object.keys(value));
+    return isUndefined(value) || isEmptyArray || isEmptyObject;
+  }
+
   protected async validate(file: any): Promise<any> {
     for (const validator of this.validators) {
       await this.validateOrThrow(file, validator);
diff --git a/packages/common/pipes/validation.pipe.ts b/packages/common/pipes/validation.pipe.ts
index d13437523..eed2fa017 100644
--- a/packages/common/pipes/validation.pipe.ts
+++ b/packages/common/pipes/validation.pipe.ts
@@ -66,8 +66,10 @@ export class ValidationPipe implements PipeTransform<any> {
       ...validatorOptions
     } = options;
 
+    // @see https://github.com/nestjs/nest/issues/10683#issuecomment-1413690508
+    this.validatorOptions = { forbidUnknownValues: false, ...validatorOptions };
+
     this.isTransformEnabled = !!transform;
-    this.validatorOptions = validatorOptions;
     this.transformOptions = transformOptions;
     this.isDetailedOutputDisabled = disableErrorMessages;
     this.validateCustomDecorators = validateCustomDecorators || false;
diff --git a/packages/common/services/logger.service.ts b/packages/common/services/logger.service.ts
index f65b8579b..0159195bf 100644
--- a/packages/common/services/logger.service.ts
+++ b/packages/common/services/logger.service.ts
@@ -1,5 +1,4 @@
-import { Injectable } from '../decorators/core/injectable.decorator';
-import { Optional } from '../decorators/core/optional.decorator';
+import { Injectable, Optional } from '../decorators/core';
 import { isObject } from '../utils/shared.utils';
 import { ConsoleLogger } from './console-logger.service';
 import { isLogLevelEnabled } from './utils';
@@ -126,7 +125,9 @@ export class Logger implements LoggerService {
   @Logger.WrapBuffer
   error(message: any, ...optionalParams: any[]) {
     optionalParams = this.context
-      ? optionalParams.concat(this.context)
+      ? (optionalParams.length ? optionalParams : [undefined]).concat(
+          this.context,
+        )
       : optionalParams;
 
     this.localInstance?.error(message, ...optionalParams);
diff --git a/packages/common/test/pipes/validation.pipe.spec.ts b/packages/common/test/pipes/validation.pipe.spec.ts
index f5b44e867..d9a97f885 100644
--- a/packages/common/test/pipes/validation.pipe.spec.ts
+++ b/packages/common/test/pipes/validation.pipe.spec.ts
@@ -384,7 +384,7 @@ describe('ValidationPipe', () => {
       });
       describe('otherwise', () => {
         it('should not reject', async () => {
-          target = new ValidationPipe({ forbidUnknownValues: false });
+          target = new ValidationPipe();
           const testObj = [
             { prop1: 'value1', prop2: 'value2', prop3: 'value3' },
           ];
@@ -447,7 +447,7 @@ describe('ValidationPipe', () => {
       target = new ValidationPipe({ expectedType: TestModel });
       const testObj = { prop1: 'value1', prop2: 'value2' };
 
-      expect(await target.transform(testObj, m)).to.equal(testObj);
+      expect(await target.transform(testObj, m)).to.deep.equal(testObj);
     });
 
     it('should validate against the expected type if presented and metatype is primitive type', async () => {
@@ -460,7 +460,7 @@ describe('ValidationPipe', () => {
       target = new ValidationPipe({ expectedType: TestModel });
       const testObj = { prop1: 'value1', prop2: 'value2' };
 
-      expect(await target.transform(testObj, m)).to.equal(testObj);
+      expect(await target.transform(testObj, m)).to.deep.equal(testObj);
     });
   });
 });
diff --git a/packages/common/test/services/logger.service.spec.ts b/packages/common/test/services/logger.service.spec.ts
index 258e78e6f..6ac32bc64 100644
--- a/packages/common/test/services/logger.service.spec.ts
+++ b/packages/common/test/services/logger.service.spec.ts
@@ -480,43 +480,87 @@ describe('Logger', () => {
         warn(message: any, context?: string) {}
       }
 
-      const customLogger = new CustomLogger();
-      const originalLogger = new Logger();
+      describe('with global context', () => {
+        const customLogger = new CustomLogger();
+        const globalContext = 'RandomContext';
+        const originalLogger = new Logger(globalContext);
 
-      let previousLoggerRef: LoggerService;
+        let previousLoggerRef: LoggerService;
 
-      beforeEach(() => {
-        previousLoggerRef =
-          Logger['localInstanceRef'] || Logger['staticInstanceRef'];
-        Logger.overrideLogger(customLogger);
-      });
+        beforeEach(() => {
+          previousLoggerRef =
+            Logger['localInstanceRef'] || Logger['staticInstanceRef'];
+          Logger.overrideLogger(customLogger);
+        });
 
-      afterEach(() => {
-        Logger.overrideLogger(previousLoggerRef);
-      });
+        afterEach(() => {
+          Logger.overrideLogger(previousLoggerRef);
+        });
 
-      it('should call custom logger "#log()" method', () => {
-        const message = 'random message';
-        const context = 'RandomContext';
+        it('should call custom logger "#log()" method with context as second argument', () => {
+          const message = 'random log message with global context';
 
-        const customLoggerLogSpy = sinon.spy(customLogger, 'log');
+          const customLoggerLogSpy = sinon.spy(customLogger, 'log');
 
-        originalLogger.log(message, context);
+          originalLogger.log(message);
 
-        expect(customLoggerLogSpy.called).to.be.true;
-        expect(customLoggerLogSpy.calledWith(message, context)).to.be.true;
+          expect(customLoggerLogSpy.called).to.be.true;
+          expect(customLoggerLogSpy.calledWith(message, globalContext)).to.be
+            .true;
+        });
+        it('should call custom logger "#error()" method with context as third argument', () => {
+          const message = 'random error message with global context';
+
+          const customLoggerErrorSpy = sinon.spy(customLogger, 'error');
+
+          originalLogger.error(message);
+
+          expect(customLoggerErrorSpy.called).to.be.true;
+          expect(
+            customLoggerErrorSpy.calledWith(message, undefined, globalContext),
+          ).to.be.true;
+        });
       });
+      describe('without global context', () => {
+        const customLogger = new CustomLogger();
+        const originalLogger = new Logger();
 
-      it('should call custom logger "#error()" method', () => {
-        const message = 'random message';
-        const context = 'RandomContext';
+        let previousLoggerRef: LoggerService;
 
-        const customLoggerErrorSpy = sinon.spy(customLogger, 'error');
+        beforeEach(() => {
+          previousLoggerRef =
+            Logger['localInstanceRef'] || Logger['staticInstanceRef'];
+          Logger.overrideLogger(customLogger);
+        });
 
-        originalLogger.error(message, context);
+        afterEach(() => {
+          Logger.overrideLogger(previousLoggerRef);
+        });
 
-        expect(customLoggerErrorSpy.called).to.be.true;
-        expect(customLoggerErrorSpy.calledWith(message, context)).to.be.true;
+        it('should call custom logger "#log()" method', () => {
+          const message = 'random message';
+          const context = 'RandomContext';
+
+          const customLoggerLogSpy = sinon.spy(customLogger, 'log');
+
+          originalLogger.log(message, context);
+
+          expect(customLoggerLogSpy.called).to.be.true;
+          expect(customLoggerLogSpy.calledWith(message, context)).to.be.true;
+        });
+
+        it('should call custom logger "#error()" method', () => {
+          const message = 'random message';
+          const context = 'RandomContext';
+
+          const customLoggerErrorSpy = sinon.spy(customLogger, 'error');
+
+          originalLogger.error(message, undefined, context);
+
+          expect(customLoggerErrorSpy.called).to.be.true;
+          expect(customLoggerErrorSpy.calledWith(message, undefined, context))
+            .to.be.true;
+        });
       });
     });
   });
diff --git a/packages/common/utils/random-string-generator.util.ts b/packages/common/utils/random-string-generator.util.ts
index 6897e6e7d..7e39be7b5 100644
--- a/packages/common/utils/random-string-generator.util.ts
+++ b/packages/common/utils/random-string-generator.util.ts
@@ -1,3 +1,3 @@
-import { v4 as uuid } from 'uuid';
+import { uid } from 'uid';
 
-export const randomStringGenerator = () => uuid();
+export const randomStringGenerator = () => uid(21);
diff --git a/packages/core/helpers/external-context-creator.ts b/packages/core/helpers/external-context-creator.ts
index 5d62dac1b..83ef9994d 100644
--- a/packages/core/helpers/external-context-creator.ts
+++ b/packages/core/helpers/external-context-creator.ts
@@ -9,16 +9,16 @@ import { isEmpty } from '@nestjs/common/utils/shared.utils';
 import { lastValueFrom, isObservable } from 'rxjs';
 import { ExternalExceptionFilterContext } from '../exceptions/external-exception-filter-context';
 import { FORBIDDEN_MESSAGE } from '../guards/constants';
-import { GuardsConsumer } from '../guards/guards-consumer';
-import { GuardsContextCreator } from '../guards/guards-context-creator';
+import { GuardsConsumer, GuardsContextCreator } from '../guards';
 import { STATIC_CONTEXT } from '../injector/constants';
 import { NestContainer } from '../injector/container';
 import { ContextId } from '../injector/instance-wrapper';
 import { ModulesContainer } from '../injector/modules-container';
-import { InterceptorsConsumer } from '../interceptors/interceptors-consumer';
-import { InterceptorsContextCreator } from '../interceptors/interceptors-context-creator';
-import { PipesConsumer } from '../pipes/pipes-consumer';
-import { PipesContextCreator } from '../pipes/pipes-context-creator';
+import {
+  InterceptorsConsumer,
+  InterceptorsContextCreator,
+} from '../interceptors';
+import { PipesConsumer, PipesContextCreator } from '../pipes';
 import { ContextUtils, ParamProperties } from './context-utils';
 import { ExternalErrorProxy } from './external-proxy';
 import { HandlerMetadataStorage } from './handler-metadata-storage';
diff --git a/packages/core/index.ts b/packages/core/index.ts
index 1babf6c15..75c7156e3 100644
--- a/packages/core/index.ts
+++ b/packages/core/index.ts
@@ -1,6 +1,6 @@
 /*
  * Nest @core
- * Copyright(c) 2017 - 2022 Kamil Mysliwiec
+ * Copyright(c) 2017 - 2023 Kamil Mysliwiec
  * https://nestjs.com
  * MIT Licensed
  */
diff --git a/packages/core/injector/compiler.ts b/packages/core/injector/compiler.ts
index 6c707fd61..353e27581 100644
--- a/packages/core/injector/compiler.ts
+++ b/packages/core/injector/compiler.ts
@@ -1,4 +1,8 @@
-import { DynamicModule, Type } from '@nestjs/common/interfaces';
+import {
+  DynamicModule,
+  ForwardReference,
+  Type,
+} from '@nestjs/common/interfaces';
 import { ModuleTokenFactory } from './module-token-factory';
 
 export interface ModuleFactory {
@@ -18,19 +22,25 @@ export class ModuleCompiler {
     return { type, dynamicMetadata, token };
   }
 
-  public extractMetadata(metatype: Type<any> | DynamicModule): {
+  public extractMetadata(
+    metatype: Type<any> | ForwardReference | DynamicModule,
+  ): {
     type: Type<any>;
     dynamicMetadata?: Partial<DynamicModule> | undefined;
   } {
     if (!this.isDynamicModule(metatype)) {
-      return { type: metatype };
+      return {
+        type: (metatype as ForwardReference)?.forwardRef
+          ? (metatype as ForwardReference).forwardRef()
+          : metatype,
+      };
     }
     const { module: type, ...dynamicMetadata } = metatype;
     return { type, dynamicMetadata };
   }
 
   public isDynamicModule(
-    module: Type<any> | DynamicModule,
+    module: Type<any> | DynamicModule | ForwardReference,
   ): module is DynamicModule {
     return !!(module as DynamicModule).module;
   }
diff --git a/packages/core/injector/injector.ts b/packages/core/injector/injector.ts
index 7d32a173f..4930d4768 100644
--- a/packages/core/injector/injector.ts
+++ b/packages/core/injector/injector.ts
@@ -353,7 +353,9 @@ export class Injector {
   }
 
   public reflectConstructorParams<T>(type: Type<T>): any[] {
-    const paramtypes = [...(Reflect.getMetadata(PARAMTYPES_METADATA, type) || [])];
+    const paramtypes = [
+      ...(Reflect.getMetadata(PARAMTYPES_METADATA, type) || []),
+    ];
     const selfParams = this.reflectSelfParams<T>(type);
 
     selfParams.forEach(({ index, param }) => (paramtypes[index] = param));
diff --git a/packages/core/injector/instance-wrapper.ts b/packages/core/injector/instance-wrapper.ts
index 723a41ad7..79e4f1d69 100644
--- a/packages/core/injector/instance-wrapper.ts
+++ b/packages/core/injector/instance-wrapper.ts
@@ -9,7 +9,7 @@ import {
   isUndefined,
 } from '@nestjs/common/utils/shared.utils';
 import { iterate } from 'iterare';
-import { DeterministicUuidRegistry } from '../inspector/deterministic-uuid-registry';
+import { UuidFactory } from '../inspector/uuid-factory';
 import { STATIC_CONTEXT } from './constants';
 import {
   isClassProvider,
@@ -469,6 +469,6 @@ export class InstanceWrapper<T = any> {
     let key = this.name?.toString() ?? this.token?.toString();
     key += this.host?.name ?? '';
 
-    return key ? DeterministicUuidRegistry.get(key) : randomStringGenerator();
+    return key ? UuidFactory.get(key) : randomStringGenerator();
   }
 }
diff --git a/packages/core/injector/module.ts b/packages/core/injector/module.ts
index b0fef2bc1..60884d737 100644
--- a/packages/core/injector/module.ts
+++ b/packages/core/injector/module.ts
@@ -30,11 +30,11 @@ import {
 import { createContextId } from '../helpers/context-id-factory';
 import { getClassScope } from '../helpers/get-class-scope';
 import { isDurable } from '../helpers/is-durable';
-import { DeterministicUuidRegistry } from '../inspector/deterministic-uuid-registry';
+import { UuidFactory } from '../inspector/uuid-factory';
 import { CONTROLLER_ID_KEY } from './constants';
 import { NestContainer } from './container';
 import { InstanceWrapper } from './instance-wrapper';
-import { ModuleRefGetOrResolveOpts, ModuleRef } from './module-ref';
+import { ModuleRef, ModuleRefGetOrResolveOpts } from './module-ref';
 
 /**
  * @note
@@ -626,8 +626,6 @@ export class Module {
   private generateUuid(): string {
     const UUID_NAMESPACE = 'fb848993-0c82-4b9e-ae95-3c3c1dbe3d6b';
     const key = this.name?.toString() ?? this.token?.toString();
-    return key
-      ? DeterministicUuidRegistry.get(key, UUID_NAMESPACE)
-      : randomStringGenerator();
+    return key ? UuidFactory.get(key, UUID_NAMESPACE) : randomStringGenerator();
   }
 }
diff --git a/packages/core/inspector/uuid-factory.ts b/packages/core/inspector/uuid-factory.ts
new file mode 100644
index 000000000..979760975
--- /dev/null
+++ b/packages/core/inspector/uuid-factory.ts
@@ -0,0 +1,21 @@
+import { randomStringGenerator } from '@nestjs/common/utils/random-string-generator.util';
+import { DeterministicUuidRegistry } from './deterministic-uuid-registry';
+
+export enum UuidFactoryMode {
+  Random = 'random',
+  Deterministic = 'deterministic',
+}
+
+export class UuidFactory {
+  private static _mode = UuidFactoryMode.Random;
+
+  static set mode(value: UuidFactoryMode) {
+    this._mode = value;
+  }
+
+  static get(key = '', namespace?: string) {
+    return this._mode === UuidFactoryMode.Deterministic
+      ? DeterministicUuidRegistry.get(key, namespace)
+      : randomStringGenerator();
+  }
+}
diff --git a/packages/core/metadata-scanner.ts b/packages/core/metadata-scanner.ts
index e14b0cb27..7365a7038 100644
--- a/packages/core/metadata-scanner.ts
+++ b/packages/core/metadata-scanner.ts
@@ -4,111 +4,36 @@ import {
   isFunction,
   isNil,
 } from '@nestjs/common/utils/shared.utils';
+import { iterate } from 'iterare';
 
 export class MetadataScanner {
-  private readonly cachedScannedPrototypes: Map<object, string[]> = new Map();
-
-  /**
-   * @deprecated Use {@link getAllMethodNames} instead.
-   */
   public scanFromPrototype<T extends Injectable, R = any>(
     instance: T,
     prototype: object,
     callback: (name: string) => R,
   ): R[] {
-    if (!prototype) {
-      return [];
-    }
-
-    const visitedNames = new Map<string, boolean>();
-    const result: R[] = [];
-
-    do {
-      for (const property of Object.getOwnPropertyNames(prototype)) {
-        if (visitedNames.has(property)) {
-          continue;
-        }
-
-        visitedNames.set(property, true);
-
-        // reason: https://github.com/nestjs/nest/pull/10821#issuecomment-1411916533
-        const descriptor = Object.getOwnPropertyDescriptor(prototype, property);
-
-        if (
-          descriptor.set ||
-          descriptor.get ||
-          isConstructor(property) ||
-          !isFunction(prototype[property])
-        ) {
-          continue;
-        }
-
-        const value = callback(property);
-
-        if (isNil(value)) {
-          continue;
-        }
-
-        result.push(value);
-      }
-    } while (
-      (prototype = Reflect.getPrototypeOf(prototype)) &&
-      prototype !== Object.prototype
-    );
-
-    return result;
-  }
-
-  /**
-   * @deprecated Use {@link getAllMethodNames} instead.
-   */
-  public *getAllFilteredMethodNames(
-    prototype: object,
-  ): IterableIterator<string> {
-    yield* this.getAllMethodNames(prototype);
+    const methodNames = new Set(this.getAllFilteredMethodNames(prototype));
+    return iterate(methodNames)
+      .map(callback)
+      .filter(metadata => !isNil(metadata))
+      .toArray();
   }
 
-  public getAllMethodNames(prototype: object | null): string[] {
-    if (!prototype) {
-      return [];
-    }
-
-    if (this.cachedScannedPrototypes.has(prototype)) {
-      return this.cachedScannedPrototypes.get(prototype);
-    }
-
-    const visitedNames = new Map<string, boolean>();
-    const result: string[] = [];
-
-    this.cachedScannedPrototypes.set(prototype, result);
-
-    do {
-      for (const property of Object.getOwnPropertyNames(prototype)) {
-        if (visitedNames.has(property)) {
-          continue;
-        }
-
-        visitedNames.set(property, true);
-
-        // reason: https://github.com/nestjs/nest/pull/10821#issuecomment-1411916533
-        const descriptor = Object.getOwnPropertyDescriptor(prototype, property);
-
-        if (
-          descriptor.set ||
-          descriptor.get ||
-          isConstructor(property) ||
-          !isFunction(prototype[property])
-        ) {
-          continue;
-        }
-
-        result.push(property);
+  *getAllFilteredMethodNames(prototype: object): IterableIterator<string> {
+    const isMethod = (prop: string) => {
+      const descriptor = Object.getOwnPropertyDescriptor(prototype, prop);
+      if (descriptor.set || descriptor.get) {
+        return false;
       }
+      return !isConstructor(prop) && isFunction(prototype[prop]);
+    };
+    do {
+      yield* iterate(Object.getOwnPropertyNames(prototype))
+        .filter(isMethod)
+        .toArray();
     } while (
       (prototype = Reflect.getPrototypeOf(prototype)) &&
       prototype !== Object.prototype
     );
-
-    return result;
   }
 }
diff --git a/packages/core/middleware/middleware-module.ts b/packages/core/middleware/middleware-module.ts
index f5eb44b02..a007c007c 100644
--- a/packages/core/middleware/middleware-module.ts
+++ b/packages/core/middleware/middleware-module.ts
@@ -1,4 +1,4 @@
-import { HttpServer, Logger, VersioningType } from '@nestjs/common';
+import { HttpServer, Logger } from '@nestjs/common';
 import { RequestMethod } from '@nestjs/common/enums/request-method.enum';
 import {
   MiddlewareConfiguration,
@@ -6,10 +6,7 @@ import {
   RouteInfo,
 } from '@nestjs/common/interfaces/middleware';
 import { NestApplicationContextOptions } from '@nestjs/common/interfaces/nest-application-context-options.interface';
-import {
-  addLeadingSlash,
-  isUndefined,
-} from '@nestjs/common/utils/shared.utils';
+import { isUndefined } from '@nestjs/common/utils/shared.utils';
 import { ApplicationConfig } from '../application-config';
 import { InvalidMiddlewareException } from '../errors/exceptions/invalid-middleware.exception';
 import { RuntimeException } from '../errors/exceptions/runtime.exception';
@@ -18,7 +15,7 @@ import { ExecutionContextHost } from '../helpers/execution-context-host';
 import { STATIC_CONTEXT } from '../injector/constants';
 import { NestContainer } from '../injector/container';
 import { Injector } from '../injector/injector';
-import { InstanceWrapper } from '../injector/instance-wrapper';
+import { ContextId, InstanceWrapper } from '../injector/instance-wrapper';
 import { InstanceToken, Module } from '../injector/module';
 import { GraphInspector } from '../inspector/graph-inspector';
 import {
@@ -26,13 +23,13 @@ import {
   MiddlewareEntrypointMetadata,
 } from '../inspector/interfaces/entrypoint.interface';
 import { REQUEST_CONTEXT_ID } from '../router/request/request-constants';
-import { RoutePathFactory } from '../router/route-path-factory';
 import { RouterExceptionFilters } from '../router/router-exception-filters';
 import { RouterProxy } from '../router/router-proxy';
-import { isRequestMethodAll, isRouteExcluded } from '../router/utils';
+import { isRequestMethodAll } from '../router/utils';
 import { MiddlewareBuilder } from './builder';
 import { MiddlewareContainer } from './container';
 import { MiddlewareResolver } from './resolver';
+import { RouteInfoPathExtractor } from './route-info-path-extractor';
 import { RoutesMapper } from './routes-mapper';
 
 export class MiddlewareModule<
@@ -46,13 +43,11 @@ export class MiddlewareModule<
   private routerExceptionFilter: RouterExceptionFilters;
   private routesMapper: RoutesMapper;
   private resolver: MiddlewareResolver;
-  private config: ApplicationConfig;
   private container: NestContainer;
   private httpAdapter: HttpServer;
   private graphInspector: GraphInspector;
   private appOptions: TAppOptions;
-
-  constructor(private readonly routePathFactory: RoutePathFactory) {}
+  private routeInfoPathExtractor: RouteInfoPathExtractor;
 
   public async register(
     middlewareContainer: MiddlewareContainer,
@@ -73,8 +68,7 @@ export class MiddlewareModule<
     );
     this.routesMapper = new RoutesMapper(container);
     this.resolver = new MiddlewareResolver(middlewareContainer, injector);
-
-    this.config = config;
+    this.routeInfoPathExtractor = new RouteInfoPathExtractor(config);
     this.injector = injector;
     this.container = container;
     this.httpAdapter = httpAdapter;
@@ -250,6 +244,9 @@ export class MiddlewareModule<
       const proxy = await this.createProxy(instance);
       return this.registerHandler(applicationRef, routeInfo, proxy);
     }
+
+    const isTreeDurable = wrapper.isDependencyTreeDurable();
+
     await this.registerHandler(
       applicationRef,
       routeInfo,
@@ -259,19 +256,7 @@ export class MiddlewareModule<
         next: () => void,
       ) => {
         try {
-          const contextId = ContextIdFactory.getByRequest(req);
-          if (!req[REQUEST_CONTEXT_ID]) {
-            Object.defineProperty(req, REQUEST_CONTEXT_ID, {
-              value: contextId,
-              enumerable: false,
-              writable: false,
-              configurable: false,
-            });
-            this.container.registerRequestProvider(
-              contextId.getParent ? contextId.payload : req,
-              contextId,
-            );
-          }
+          const contextId = this.getContextId(req, isTreeDurable);
           const contextInstance = await this.injector.loadPerContext(
             instance,
             moduleRef,
@@ -316,56 +301,46 @@ export class MiddlewareModule<
 
   private async registerHandler(
     applicationRef: HttpServer,
-    { path, method, version }: RouteInfo,
+    routeInfo: RouteInfo,
     proxy: <TRequest, TResponse>(
       req: TRequest,
       res: TResponse,
       next: () => void,
     ) => void,
   ) {
-    const prefix = this.config.getGlobalPrefix();
-    const excludedRoutes = this.config.getGlobalPrefixOptions().exclude;
-    if (
-      (Array.isArray(excludedRoutes) &&
-        isRouteExcluded(excludedRoutes, path, method)) ||
-      ['*', '/*', '(.*)', '/(.*)'].includes(path)
-    ) {
-      path = addLeadingSlash(path);
-    } else {
-      const basePath = addLeadingSlash(prefix);
-      if (basePath?.endsWith('/') && path?.startsWith('/')) {
-        // strip slash when a wildcard is being used
-        // and global prefix has been set
-        path = path?.slice(1);
-      }
-      path = basePath + path;
-    }
-
-    const applicationVersioningConfig = this.config.getVersioning();
-    if (version && applicationVersioningConfig.type === VersioningType.URI) {
-      const versionPrefix = this.routePathFactory.getVersionPrefix(
-        applicationVersioningConfig,
-      );
-      path = `/${versionPrefix}${version.toString()}${path}`;
-    }
-
+    const { method } = routeInfo;
+    const paths = this.routeInfoPathExtractor.extractPathsFrom(routeInfo);
     const isMethodAll = isRequestMethodAll(method);
     const requestMethod = RequestMethod[method];
     const router = await applicationRef.createMiddlewareFactory(method);
-    router(
-      path,
-      isMethodAll
-        ? proxy
-        : <TRequest, TResponse>(
-            req: TRequest,
-            res: TResponse,
-            next: () => void,
-          ) => {
-            if (applicationRef.getRequestMethod(req) === requestMethod) {
-              return proxy(req, res, next);
-            }
-            return next();
-          },
-    );
+    const middlewareFunction = isMethodAll
+      ? proxy
+      : <TRequest, TResponse>(
+          req: TRequest,
+          res: TResponse,
+          next: () => void,
+        ) => {
+          if (applicationRef.getRequestMethod(req) === requestMethod) {
+            return proxy(req, res, next);
+          }
+          return next();
+        };
+    paths.forEach(path => router(path, middlewareFunction));
+  }
+
+  private getContextId(request: unknown, isTreeDurable: boolean): ContextId {
+    const contextId = ContextIdFactory.getByRequest(request);
+    if (!request[REQUEST_CONTEXT_ID]) {
+      Object.defineProperty(request, REQUEST_CONTEXT_ID, {
+        value: contextId,
+        enumerable: false,
+        writable: false,
+        configurable: false,
+      });
+
+      const requestProviderValue = isTreeDurable ? contextId.payload : request;
+      this.container.registerRequestProvider(requestProviderValue, contextId);
+    }
+    return contextId;
   }
 }
diff --git a/packages/core/middleware/route-info-path-extractor.ts b/packages/core/middleware/route-info-path-extractor.ts
new file mode 100644
index 000000000..dc03893ea
--- /dev/null
+++ b/packages/core/middleware/route-info-path-extractor.ts
@@ -0,0 +1,55 @@
+import { VersioningType } from '@nestjs/common';
+import { RouteInfo } from '@nestjs/common/interfaces';
+import {
+  addLeadingSlash,
+  stripEndSlash,
+} from '@nestjs/common/utils/shared.utils';
+import { ApplicationConfig } from '../application-config';
+import { isRouteExcluded } from '../router/utils';
+import { RoutePathFactory } from './../router/route-path-factory';
+
+export class RouteInfoPathExtractor {
+  private routePathFactory: RoutePathFactory;
+
+  constructor(private readonly applicationConfig: ApplicationConfig) {
+    this.routePathFactory = new RoutePathFactory(applicationConfig);
+  }
+
+  public extractPathsFrom({ path, method, version }: RouteInfo) {
+    const prefixPath = stripEndSlash(
+      addLeadingSlash(this.applicationConfig.getGlobalPrefix()),
+    );
+    const excludedRoutes =
+      this.applicationConfig.getGlobalPrefixOptions().exclude;
+
+    const applicationVersioningConfig = this.applicationConfig.getVersioning();
+    let versionPath = '';
+    if (version && applicationVersioningConfig?.type === VersioningType.URI) {
+      const versionPrefix = this.routePathFactory.getVersionPrefix(
+        applicationVersioningConfig,
+      );
+      versionPath = addLeadingSlash(versionPrefix + version.toString());
+    }
+
+    const isAWildcard = ['*', '/*', '/*/', '(.*)', '/(.*)'].includes(path);
+    if (isAWildcard) {
+      return Array.isArray(excludedRoutes)
+        ? [
+            prefixPath + versionPath + addLeadingSlash(path),
+            ...excludedRoutes.map(
+              route => versionPath + addLeadingSlash(route.path),
+            ),
+          ]
+        : [prefixPath + versionPath + addLeadingSlash(path)];
+    }
+
+    if (
+      Array.isArray(excludedRoutes) &&
+      isRouteExcluded(excludedRoutes, path, method)
+    ) {
+      return [versionPath + addLeadingSlash(path)];
+    }
+
+    return [prefixPath + versionPath + addLeadingSlash(path)];
+  }
+}
diff --git a/packages/core/middleware/utils.ts b/packages/core/middleware/utils.ts
index 19418afc8..d9365e90f 100644
--- a/packages/core/middleware/utils.ts
+++ b/packages/core/middleware/utils.ts
@@ -1,6 +1,10 @@
 import { RequestMethod } from '@nestjs/common';
 import { HttpServer, RouteInfo, Type } from '@nestjs/common/interfaces';
-import { isFunction } from '@nestjs/common/utils/shared.utils';
+import {
+  addLeadingSlash,
+  isFunction,
+  isString,
+} from '@nestjs/common/utils/shared.utils';
 import { iterate } from 'iterare';
 import * as pathToRegexp from 'path-to-regexp';
 import { v4 as uuid } from 'uuid';
@@ -8,12 +12,22 @@ import { ExcludeRouteMetadata } from '../router/interfaces/exclude-route-metadat
 import { isRouteExcluded } from '../router/utils';
 
 export const mapToExcludeRoute = (
-  routes: RouteInfo[],
+  routes: (string | RouteInfo)[],
 ): ExcludeRouteMetadata[] => {
-  return routes.map(({ path, method }) => ({
-    pathRegex: pathToRegexp(path),
-    requestMethod: method,
-  }));
+  return routes.map(route => {
+    if (isString(route)) {
+      return {
+        path: route,
+        requestMethod: RequestMethod.ALL,
+        pathRegex: pathToRegexp(addLeadingSlash(route)),
+      };
+    }
+    return {
+      path: route.path,
+      requestMethod: route.method,
+      pathRegex: pathToRegexp(addLeadingSlash(route.path)),
+    };
+  });
 };
 
 export const filterMiddleware = <T extends Function | Type<any> = any>(
diff --git a/packages/core/nest-application-context.ts b/packages/core/nest-application-context.ts
index e0bbd6f2c..64dffff74 100644
--- a/packages/core/nest-application-context.ts
+++ b/packages/core/nest-application-context.ts
@@ -323,13 +323,20 @@ export class NestApplicationContext<
    * @param {string[]} signals The system signals it should listen to
    */
   protected listenToShutdownSignals(signals: string[]) {
+    let receivedSignal = false;
     const cleanup = async (signal: string) => {
       try {
-        signals.forEach(sig => process.removeListener(sig, cleanup));
+        if (receivedSignal) {
+          // If we receive another signal while we're waiting
+          // for the server to stop, just ignore it.
+          return;
+        }
+        receivedSignal = true;
         await this.callDestroyHook();
         await this.callBeforeShutdownHook(signal);
         await this.dispose();
         await this.callShutdownHook(signal);
+        signals.forEach(sig => process.removeListener(sig, cleanup));
         process.kill(process.pid, signal);
       } catch (err) {
         Logger.error(
diff --git a/packages/core/nest-application.ts b/packages/core/nest-application.ts
index 61acafd76..3b25d5877 100644
--- a/packages/core/nest-application.ts
+++ b/packages/core/nest-application.ts
@@ -7,7 +7,6 @@ import {
   NestHybridApplicationOptions,
   NestInterceptor,
   PipeTransform,
-  RequestMethod,
   VersioningOptions,
   VersioningType,
   WebSocketAdapter,
@@ -15,7 +14,6 @@ import {
 import {
   GlobalPrefixOptions,
   NestApplicationOptions,
-  RouteInfo,
 } from '@nestjs/common/interfaces';
 import {
   CorsOptions,
@@ -31,7 +29,6 @@ import {
 } from '@nestjs/common/utils/shared.utils';
 import { iterate } from 'iterare';
 import { platform } from 'os';
-import * as pathToRegexp from 'path-to-regexp';
 import { AbstractHttpAdapter } from './adapters';
 import { ApplicationConfig } from './application-config';
 import { MESSAGES } from './constants';
@@ -41,10 +38,9 @@ import { Injector } from './injector/injector';
 import { GraphInspector } from './inspector/graph-inspector';
 import { MiddlewareContainer } from './middleware/container';
 import { MiddlewareModule } from './middleware/middleware-module';
+import { mapToExcludeRoute } from './middleware/utils';
 import { NestApplicationContext } from './nest-application-context';
-import { ExcludeRouteMetadata } from './router/interfaces/exclude-route-metadata.interface';
 import { Resolver } from './router/interfaces/resolver.interface';
-import { RoutePathFactory } from './router/route-path-factory';
 import { RoutesResolver } from './router/routes-resolver';
 
 const { SocketModule } = optionalRequire(
@@ -89,9 +85,8 @@ export class NestApplication
 
     this.selectContextModule();
     this.registerHttpServer();
-
     this.injector = new Injector({ preview: this.appOptions.preview });
-    this.middlewareModule = new MiddlewareModule(new RoutePathFactory(config));
+    this.middlewareModule = new MiddlewareModule();
     this.routesResolver = new RoutesResolver(
       this.container,
       this.config,
@@ -266,6 +261,20 @@ export class NestApplication
     return this;
   }
 
+  public useBodyParser(...args: [any, any?]): this {
+    if (!('useBodyParser' in this.httpAdapter)) {
+      this.logger.warn('Your HTTP Adapter does not support `.useBodyParser`.');
+      return this;
+    }
+
+    const [parserType, ...otherArgs] = args;
+    const rawBody = !!this.appOptions.rawBody;
+
+    this.httpAdapter.useBodyParser(...[parserType, rawBody, ...otherArgs]);
+
+    return this;
+  }
+
   public enableCors(options?: CorsOptions | CorsOptionsDelegate<any>): void {
     this.httpAdapter.enableCors(options);
   }
@@ -358,20 +367,9 @@ export class NestApplication
   public setGlobalPrefix(prefix: string, options?: GlobalPrefixOptions): this {
     this.config.setGlobalPrefix(prefix);
     if (options) {
-      const exclude = options?.exclude.map(
-        (route: string | RouteInfo): ExcludeRouteMetadata => {
-          if (isString(route)) {
-            return {
-              requestMethod: RequestMethod.ALL,
-              pathRegex: pathToRegexp(addLeadingSlash(route)),
-            };
-          }
-          return {
-            requestMethod: route.method,
-            pathRegex: pathToRegexp(addLeadingSlash(route.path)),
-          };
-        },
-      );
+      const exclude = options?.exclude
+        ? mapToExcludeRoute(options.exclude)
+        : [];
       this.config.setGlobalPrefixOptions({
         ...options,
         exclude,
diff --git a/packages/core/nest-factory.ts b/packages/core/nest-factory.ts
index 52fdf13f7..9d4c2c8f9 100644
--- a/packages/core/nest-factory.ts
+++ b/packages/core/nest-factory.ts
@@ -21,6 +21,7 @@ import { Injector } from './injector/injector';
 import { InstanceLoader } from './injector/instance-loader';
 import { GraphInspector } from './inspector/graph-inspector';
 import { NoopGraphInspector } from './inspector/noop-graph-inspector';
+import { UuidFactory, UuidFactoryMode } from './inspector/uuid-factory';
 import { MetadataScanner } from './metadata-scanner';
 import { NestApplication } from './nest-application';
 import { NestApplicationContext } from './nest-application-context';
@@ -195,6 +196,10 @@ export class NestFactoryStatic {
     options: NestApplicationContextOptions = {},
     httpServer: HttpServer = null,
   ) {
+    UuidFactory.mode = options.snapshot
+      ? UuidFactoryMode.Deterministic
+      : UuidFactoryMode.Random;
+
     const injector = new Injector({ preview: options.preview });
     const instanceLoader = new InstanceLoader(
       container,
diff --git a/packages/core/package.json b/packages/core/package.json
index f1d6ef984..0eedee890 100644
--- a/packages/core/package.json
+++ b/packages/core/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/core",
-  "version": "9.3.0-beta.3",
+  "version": "9.3.2",
   "description": "Nest - modern, fast, powerful node.js web framework (@core)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -32,11 +32,11 @@
     "iterare": "1.2.1",
     "object-hash": "3.0.0",
     "path-to-regexp": "3.2.0",
-    "tslib": "2.4.1",
+    "tslib": "2.5.0",
     "uuid": "9.0.0"
   },
   "devDependencies": {
-    "@nestjs/common": "^9.3.0-beta.3"
+    "@nestjs/common": "9.3.2"
   },
   "peerDependencies": {
     "@nestjs/common": "^9.0.0",
diff --git a/packages/core/repl/native-functions/methods-repl-fn.ts b/packages/core/repl/native-functions/methods-repl-fn.ts
index f44e1916e..3fb38e6ec 100644
--- a/packages/core/repl/native-functions/methods-repl-fn.ts
+++ b/packages/core/repl/native-functions/methods-repl-fn.ts
@@ -20,7 +20,9 @@ export class MethodsReplFn extends ReplFunction {
         ? Object.getPrototypeOf(this.ctx.app.get(token))
         : token?.prototype;
 
-    const methods = this.metadataScanner.getAllMethodNames(proto);
+    const methods = new Set(
+      this.metadataScanner.getAllFilteredMethodNames(proto),
+    );
 
     this.ctx.writeToStdout('\n');
     this.ctx.writeToStdout(`${clc.green('Methods')}:\n`);
diff --git a/packages/core/router/interfaces/exclude-route-metadata.interface.ts b/packages/core/router/interfaces/exclude-route-metadata.interface.ts
index 1c143512f..b7f93b600 100644
--- a/packages/core/router/interfaces/exclude-route-metadata.interface.ts
+++ b/packages/core/router/interfaces/exclude-route-metadata.interface.ts
@@ -1,6 +1,11 @@
 import { RequestMethod } from '@nestjs/common';
 
 export interface ExcludeRouteMetadata {
+  /**
+   * Route path.
+   */
+  path: string;
+
   /**
    * Regular expression representing the route path.
    */
diff --git a/packages/core/router/paths-explorer.ts b/packages/core/router/paths-explorer.ts
index 34c9972eb..67ba7d6b4 100644
--- a/packages/core/router/paths-explorer.ts
+++ b/packages/core/router/paths-explorer.ts
@@ -33,28 +33,18 @@ export class PathsExplorer {
       ? Object.getPrototypeOf(instance)
       : prototype;
 
-    return this.metadataScanner
-      .getAllMethodNames(instancePrototype)
-      .reduce((acc, method) => {
-        const route = this.exploreMethodMetadata(
-          instance,
-          instancePrototype,
-          method,
-        );
-
-        if (route) {
-          acc.push(route);
-        }
-
-        return acc;
-      }, []);
+    return this.metadataScanner.scanFromPrototype<Controller, RouteDefinition>(
+      instance,
+      instancePrototype,
+      method => this.exploreMethodMetadata(instance, instancePrototype, method),
+    );
   }
 
   public exploreMethodMetadata(
     instance: Controller,
     prototype: object,
     methodName: string,
-  ): RouteDefinition | null {
+  ): RouteDefinition {
     const instanceCallback = instance[methodName];
     const prototypeCallback = prototype[methodName];
     const routePath = Reflect.getMetadata(PATH_METADATA, prototypeCallback);
diff --git a/packages/core/router/router-explorer.ts b/packages/core/router/router-explorer.ts
index 7dbbf3ff5..843ca5d2d 100644
--- a/packages/core/router/router-explorer.ts
+++ b/packages/core/router/router-explorer.ts
@@ -13,8 +13,7 @@ import {
 import * as pathToRegexp from 'path-to-regexp';
 import { ApplicationConfig } from '../application-config';
 import { UnknownRequestMappingException } from '../errors/exceptions/unknown-request-mapping.exception';
-import { GuardsConsumer } from '../guards/guards-consumer';
-import { GuardsContextCreator } from '../guards/guards-context-creator';
+import { GuardsConsumer, GuardsContextCreator } from '../guards';
 import { ContextIdFactory } from '../helpers/context-id-factory';
 import { ExecutionContextHost } from '../helpers/execution-context-host';
 import {
@@ -27,16 +26,17 @@ import { NestContainer } from '../injector/container';
 import { Injector } from '../injector/injector';
 import { ContextId, InstanceWrapper } from '../injector/instance-wrapper';
 import { Module } from '../injector/module';
+import {
+  InterceptorsConsumer,
+  InterceptorsContextCreator,
+} from '../interceptors';
 import { GraphInspector } from '../inspector/graph-inspector';
 import {
   Entrypoint,
   HttpEntrypointMetadata,
 } from '../inspector/interfaces/entrypoint.interface';
-import { InterceptorsConsumer } from '../interceptors/interceptors-consumer';
-import { InterceptorsContextCreator } from '../interceptors/interceptors-context-creator';
 import { MetadataScanner } from '../metadata-scanner';
-import { PipesConsumer } from '../pipes/pipes-consumer';
-import { PipesContextCreator } from '../pipes/pipes-context-creator';
+import { PipesConsumer, PipesContextCreator } from '../pipes';
 import { ExceptionsFilter } from './interfaces/exceptions-filter.interface';
 import { RoutePathMetadata } from './interfaces/route-path-metadata.interface';
 import { PathsExplorer } from './paths-explorer';
@@ -355,13 +355,16 @@ export class RouterExplorer {
   ) {
     const { instance } = instanceWrapper;
     const collection = moduleRef.controllers;
+
+    const isTreeDurable = instanceWrapper.isDependencyTreeDurable();
+
     return async <TRequest extends Record<any, any>, TResponse>(
       req: TRequest,
       res: TResponse,
       next: () => void,
     ) => {
       try {
-        const contextId = this.getContextId(req);
+        const contextId = this.getContextId(req, isTreeDurable);
         const contextInstance = await this.injector.loadPerContext(
           instance,
           moduleRef,
@@ -397,6 +400,7 @@ export class RouterExplorer {
 
   private getContextId<T extends Record<any, unknown> = any>(
     request: T,
+    isTreeDurable: boolean,
   ): ContextId {
     const contextId = ContextIdFactory.getByRequest(request);
     if (!request[REQUEST_CONTEXT_ID as any]) {
@@ -406,10 +410,9 @@ export class RouterExplorer {
         writable: false,
         configurable: false,
       });
-      this.container.registerRequestProvider(
-        contextId.getParent ? contextId.payload : request,
-        contextId,
-      );
+
+      const requestProviderValue = isTreeDurable ? contextId.payload : request;
+      this.container.registerRequestProvider(requestProviderValue, contextId);
     }
     return contextId;
   }
diff --git a/packages/core/router/utils/exclude-route.util.ts b/packages/core/router/utils/exclude-route.util.ts
index 798260bf2..8670f18f4 100644
--- a/packages/core/router/utils/exclude-route.util.ts
+++ b/packages/core/router/utils/exclude-route.util.ts
@@ -1,4 +1,5 @@
 import { RequestMethod } from '@nestjs/common';
+import { addLeadingSlash } from '@nestjs/common/utils/shared.utils';
 import { ExcludeRouteMetadata } from '../interfaces/exclude-route-metadata.interface';
 
 export const isRequestMethodAll = (method: RequestMethod) => {
@@ -15,7 +16,7 @@ export function isRouteExcluded(
       isRequestMethodAll(route.requestMethod) ||
       route.requestMethod === requestMethod
     ) {
-      return route.pathRegex.exec(path);
+      return route.pathRegex.exec(addLeadingSlash(path));
     }
     return false;
   });
diff --git a/packages/core/scanner.ts b/packages/core/scanner.ts
index d1ac8e300..ff8845126 100644
--- a/packages/core/scanner.ts
+++ b/packages/core/scanner.ts
@@ -23,10 +23,11 @@ import {
   PipeTransform,
   Scope,
   ValueProvider,
+  Controller,
+  Injectable,
+  Type,
 } from '@nestjs/common/interfaces';
-import { Controller } from '@nestjs/common/interfaces/controllers/controller.interface';
-import { Injectable } from '@nestjs/common/interfaces/injectable.interface';
-import { Type } from '@nestjs/common/interfaces/type.interface';
+import { randomStringGenerator } from '@nestjs/common/utils/random-string-generator.util';
 import {
   isFunction,
   isNil,
@@ -50,10 +51,9 @@ import { NestContainer } from './injector/container';
 import { InstanceWrapper } from './injector/instance-wrapper';
 import { InternalCoreModuleFactory } from './injector/internal-core-module/internal-core-module-factory';
 import { Module } from './injector/module';
-import { DeterministicUuidRegistry } from './inspector/deterministic-uuid-registry';
 import { GraphInspector } from './inspector/graph-inspector';
+import { UuidFactory } from './inspector/uuid-factory';
 import { MetadataScanner } from './metadata-scanner';
-import { ParamsMetadata } from './helpers/interfaces/params-metadata.interface';
 
 interface ApplicationProviderWrapper {
   moduleKey: string;
@@ -250,21 +250,14 @@ export class DependenciesScanner {
       metadataKey,
       component,
     );
-    const methodInjectables = this.metadataScanner
-      .getAllMethodNames(component.prototype)
-      .reduce((acc, method) => {
-        const methodInjectable = this.reflectKeyMetadata(
-          component,
-          metadataKey,
-          method,
-        );
-
-        if (methodInjectable) {
-          acc.push(methodInjectable);
-        }
-
-        return acc;
-      }, []);
+    const methodInjectables = this.metadataScanner.scanFromPrototype<
+      Type,
+      { methodKey: string; metadata: Type<Injectable>[] }
+    >(
+      null,
+      component.prototype,
+      this.reflectKeyMetadata.bind(this, component, metadataKey),
+    );
 
     controllerInjectables.forEach(injectable =>
       this.insertInjectable(
@@ -274,17 +267,17 @@ export class DependenciesScanner {
         ENHANCER_KEY_TO_SUBTYPE_MAP[metadataKey],
       ),
     );
-    methodInjectables.forEach(methodInjectable => {
-      methodInjectable.metadata.forEach(injectable =>
+    methodInjectables.forEach(({ methodKey, metadata }) =>
+      metadata.forEach(injectable =>
         this.insertInjectable(
           injectable,
           token,
           component,
           ENHANCER_KEY_TO_SUBTYPE_MAP[metadataKey],
-          methodInjectable.methodKey,
+          methodKey,
         ),
-      );
-    });
+      ),
+    );
   }
 
   public reflectParamInjectables(
@@ -292,24 +285,28 @@ export class DependenciesScanner {
     token: string,
     metadataKey: string,
   ) {
-    const paramsMethods = this.metadataScanner.getAllMethodNames(
-      component.prototype,
-    );
-
-    paramsMethods.forEach(methodKey => {
-      const metadata: Record<
-        string,
-        {
-          index: number;
-          data: unknown;
-          pipes: Array<Type<PipeTransform> | PipeTransform>;
-        }
-      > = Reflect.getMetadata(metadataKey, component, methodKey);
-
+    const paramsMetadata = this.metadataScanner.scanFromPrototype<
+      Type,
+      {
+        methodKey: string;
+        metadata: Record<
+          string,
+          {
+            index: number;
+            data: unknown;
+            pipes: Array<Type<PipeTransform> | PipeTransform>;
+          }
+        >;
+      }
+    >(null, component.prototype, methodKey => {
+      const metadata = Reflect.getMetadata(metadataKey, component, methodKey);
       if (!metadata) {
         return;
       }
+      return { methodKey, metadata };
+    });
 
+    paramsMetadata.forEach(({ methodKey, metadata }) => {
       const params = Object.values(metadata);
       params
         .map(item => item.pipes)
@@ -330,7 +327,7 @@ export class DependenciesScanner {
     component: Type<Injectable>,
     key: string,
     methodKey: string,
-  ): { methodKey: string; metadata: any } | undefined {
+  ) {
     let prototype = component.prototype;
     do {
       const descriptor = Reflect.getOwnPropertyDescriptor(prototype, methodKey);
@@ -414,7 +411,7 @@ export class DependenciesScanner {
     if (!providersKeys.includes(type as string)) {
       return this.container.addProvider(provider as any, token);
     }
-    const uuid = DeterministicUuidRegistry.get(type.toString());
+    const uuid = UuidFactory.get(type.toString());
     const providerToken = `${type as string} (UUID: ${uuid})`;
 
     let scope = (provider as ClassProvider | FactoryProvider).scope;
diff --git a/packages/core/test/application-config.spec.ts b/packages/core/test/application-config.spec.ts
index 9418b13db..cff91bb11 100644
--- a/packages/core/test/application-config.spec.ts
+++ b/packages/core/test/application-config.spec.ts
@@ -23,7 +23,11 @@ describe('ApplicationConfig', () => {
     it('should set global path options', () => {
       const options: GlobalPrefixOptions<ExcludeRouteMetadata> = {
         exclude: [
-          { pathRegex: new RegExp(/health/), requestMethod: RequestMethod.GET },
+          {
+            path: '/health',
+            pathRegex: new RegExp(/health/),
+            requestMethod: RequestMethod.GET,
+          },
         ],
       };
       appConfig.setGlobalPrefixOptions(options);
diff --git a/packages/core/test/metadata-scanner.spec.ts b/packages/core/test/metadata-scanner.spec.ts
index dd2c78b3f..f0a51b6d0 100644
--- a/packages/core/test/metadata-scanner.spec.ts
+++ b/packages/core/test/metadata-scanner.spec.ts
@@ -30,32 +30,12 @@ describe('MetadataScanner', () => {
     }
 
     it('should return only methods', () => {
-      const methods = scanner.getAllMethodNames(Test.prototype);
-      expect(methods).to.eql(['test', 'test2', 'testParent', 'testParent2']);
-    });
-
-    it('should return the same instance for the same prototype', () => {
-      const methods1 = scanner.getAllMethodNames(Test.prototype);
-      const methods2 = scanner.getAllMethodNames(Test.prototype);
-      expect(methods1 === methods2).to.eql(true);
-    });
-
-    it('should keep compatibility with older methods', () => {
-      const methods1 = scanner.getAllMethodNames(Test.prototype).map(m => m[0]);
-      const methods2 = scanner.scanFromPrototype(
+      const methods = scanner.scanFromPrototype(
         new Test(),
         Test.prototype,
-        r => r[0],
+        a => a,
       );
-
-      expect(methods1).to.eql(methods2);
-
-      const methods3 = scanner.getAllMethodNames(Test.prototype);
-      const methods4 = [
-        ...new Set(scanner.getAllFilteredMethodNames(Test.prototype)),
-      ];
-
-      expect(methods3).to.eql(methods4);
+      expect(methods).to.eql(['test', 'test2', 'testParent', 'testParent2']);
     });
   });
 });
diff --git a/packages/core/test/middleware/middleware-module.spec.ts b/packages/core/test/middleware/middleware-module.spec.ts
index e30ba206a..8f113dee1 100644
--- a/packages/core/test/middleware/middleware-module.spec.ts
+++ b/packages/core/test/middleware/middleware-module.spec.ts
@@ -1,5 +1,5 @@
 import { Injectable } from '@nestjs/common';
-import { RoutePathFactory } from '@nestjs/core/router/route-path-factory';
+import { RouteInfoPathExtractor } from '@nestjs/core/middleware/route-info-path-extractor';
 import * as chai from 'chai';
 import { expect } from 'chai';
 import * as chaiAsPromised from 'chai-as-promised';
@@ -47,15 +47,21 @@ describe('MiddlewareModule', () => {
   beforeEach(() => {
     const container = new NestContainer();
     const appConfig = new ApplicationConfig();
-
     graphInspector = new GraphInspector(container);
-    middlewareModule = new MiddlewareModule(new RoutePathFactory(appConfig));
+    middlewareModule = new MiddlewareModule();
+    middlewareModule['routerExceptionFilter'] = new RouterExceptionFilters(
+      new NestContainer(),
+      appConfig,
+      new NoopHttpAdapter({}),
+    );
+    middlewareModule['routeInfoPathExtractor'] = new RouteInfoPathExtractor(
+      appConfig,
+    );
     middlewareModule['routerExceptionFilter'] = new RouterExceptionFilters(
       container,
       appConfig,
       new NoopHttpAdapter({}),
     );
-    middlewareModule['config'] = appConfig;
     middlewareModule['graphInspector'] = graphInspector;
   });
 
diff --git a/packages/core/test/middleware/route-info-path-extractor.spec.ts b/packages/core/test/middleware/route-info-path-extractor.spec.ts
new file mode 100644
index 000000000..9ff9c82d8
--- /dev/null
+++ b/packages/core/test/middleware/route-info-path-extractor.spec.ts
@@ -0,0 +1,93 @@
+import { RequestMethod, VersioningType } from '@nestjs/common';
+import { ApplicationConfig } from '@nestjs/core';
+import { mapToExcludeRoute } from '@nestjs/core/middleware/utils';
+import { expect } from 'chai';
+import { RouteInfoPathExtractor } from './../../middleware/route-info-path-extractor';
+
+describe('RouteInfoPathExtractor', () => {
+  describe('getPaths', () => {
+    let appConfig: ApplicationConfig;
+    let routeInfoPathExtractor: RouteInfoPathExtractor;
+    beforeEach(() => {
+      appConfig = new ApplicationConfig();
+      appConfig.enableVersioning({
+        type: VersioningType.URI,
+      });
+      routeInfoPathExtractor = new RouteInfoPathExtractor(appConfig);
+    });
+
+    it(`should return correct paths`, () => {
+      expect(
+        routeInfoPathExtractor.extractPathsFrom({
+          path: '*',
+          method: RequestMethod.ALL,
+        }),
+      ).to.eql(['/*']);
+
+      expect(
+        routeInfoPathExtractor.extractPathsFrom({
+          path: '*',
+          method: RequestMethod.ALL,
+          version: '1',
+        }),
+      ).to.eql(['/v1/*']);
+    });
+
+    it(`should return correct paths when set global prefix`, () => {
+      appConfig.setGlobalPrefix('api');
+
+      expect(
+        routeInfoPathExtractor.extractPathsFrom({
+          path: '*',
+          method: RequestMethod.ALL,
+        }),
+      ).to.eql(['/api/*']);
+
+      expect(
+        routeInfoPathExtractor.extractPathsFrom({
+          path: '*',
+          method: RequestMethod.ALL,
+          version: '1',
+        }),
+      ).to.eql(['/api/v1/*']);
+    });
+
+    it(`should return correct paths when set global prefix and global prefix options`, () => {
+      appConfig.setGlobalPrefix('api');
+      appConfig.setGlobalPrefixOptions({
+        exclude: mapToExcludeRoute(['foo']),
+      });
+
+      expect(
+        routeInfoPathExtractor.extractPathsFrom({
+          path: '*',
+          method: RequestMethod.ALL,
+        }),
+      ).to.eql(['/api/*', '/foo']);
+
+      expect(
+        routeInfoPathExtractor.extractPathsFrom({
+          path: '*',
+          method: RequestMethod.ALL,
+          version: '1',
+        }),
+      ).to.eql(['/api/v1/*', '/v1/foo']);
+
+      expect(
+        routeInfoPathExtractor.extractPathsFrom({
+          path: 'foo',
+          method: RequestMethod.ALL,
+          version: '1',
+        }),
+      ).to.eql(['/v1/foo']);
+
+      expect(
+        routeInfoPathExtractor.extractPathsFrom({
+          path: 'bar',
+          method: RequestMethod.ALL,
+          version: '1',
+        }),
+      ).to.eql(['/api/v1/bar']);
+    });
+  });
+});
diff --git a/packages/core/test/middleware/utils.spec.ts b/packages/core/test/middleware/utils.spec.ts
index 754878c22..a1c91d77b 100644
--- a/packages/core/test/middleware/utils.spec.ts
+++ b/packages/core/test/middleware/utils.spec.ts
@@ -1,4 +1,5 @@
 import { RequestMethod, Type } from '@nestjs/common';
+import { addLeadingSlash } from '@nestjs/common/utils/shared.utils';
 import { expect } from 'chai';
 import * as sinon from 'sinon';
 import {
@@ -10,6 +11,7 @@ import {
   mapToExcludeRoute,
 } from '../../middleware/utils';
 import { NoopHttpAdapter } from '../utils/noop-adapter.spec';
+import * as pathToRegexp from 'path-to-regexp';
 
 describe('middleware utils', () => {
   const noopAdapter = new NoopHttpAdapter({});
@@ -17,6 +19,27 @@ describe('middleware utils', () => {
   class Test {}
   function fnMiddleware(req, res, next) {}
 
+  describe('mapToExcludeRoute', () => {
+    it('should return exclude route metadata', () => {
+      const stringRoute = 'foo';
+      const routeInfo = {
+        path: 'bar',
+        method: RequestMethod.GET,
+      };
+      expect(mapToExcludeRoute([stringRoute, routeInfo])).to.eql([
+        {
+          path: stringRoute,
+          requestMethod: RequestMethod.ALL,
+          pathRegex: pathToRegexp(addLeadingSlash(stringRoute)),
+        },
+        {
+          path: routeInfo.path,
+          requestMethod: routeInfo.method,
+          pathRegex: pathToRegexp(addLeadingSlash(routeInfo.path)),
+        },
+      ]);
+    });
+  });
   describe('filterMiddleware', () => {
     let middleware: any[];
     beforeEach(() => {
diff --git a/packages/core/test/nest-application-context.spec.ts b/packages/core/test/nest-application-context.spec.ts
index 609a97d43..db2a6ef28 100644
--- a/packages/core/test/nest-application-context.spec.ts
+++ b/packages/core/test/nest-application-context.spec.ts
@@ -6,6 +6,7 @@ import { Injector } from '../injector/injector';
 import { InstanceLoader } from '../injector/instance-loader';
 import { GraphInspector } from '../inspector/graph-inspector';
 import { NestApplicationContext } from '../nest-application-context';
+import * as sinon from 'sinon';
 
 describe('NestApplicationContext', () => {
   class A {}
@@ -49,6 +50,54 @@ describe('NestApplicationContext', () => {
     return applicationContext;
   }
 
+  describe('listenToShutdownSignals', () => {
+    it('shutdown process should not be interrupted by another handler', async () => {
+      const signal = 'SIGTERM';
+      let processUp = true;
+      let promisesResolved = false;
+      const applicationContext = await testHelper(A, Scope.DEFAULT);
+      applicationContext.enableShutdownHooks([signal]);
+
+      const waitProcessDown = new Promise(resolve => {
+        const shutdownCleanupRef = applicationContext['shutdownCleanupRef'];
+        const handler = () => {
+          if (
+            !process
+              .listeners(signal)
+              .find(handler => handler == shutdownCleanupRef)
+          ) {
+            processUp = false;
+            process.removeListener(signal, handler);
+            resolve(undefined);
+          }
+          return undefined;
+        };
+        process.on(signal, handler);
+      });
+
+      // add some third party handler
+      process.on(signal, signal => {
+        // do some work
+        process.kill(process.pid, signal);
+      });
+
+      const hookStub = sinon
+        .stub(applicationContext as any, 'callShutdownHook')
+        .callsFake(async () => {
+          // run some async code
+          await new Promise(resolve => setImmediate(() => resolve(undefined)));
+          if (processUp) {
+            promisesResolved = true;
+          }
+        });
+      process.kill(process.pid, signal);
+      await waitProcessDown;
+      hookStub.restore();
+      expect(processUp).to.be.false;
+      expect(promisesResolved).to.be.true;
+    });
+  });
+
   describe('get', () => {
     describe('when scope = DEFAULT', () => {
       it('should get value with function injection key', async () => {
diff --git a/packages/core/test/nest-application.spec.ts b/packages/core/test/nest-application.spec.ts
index 9e9bf348e..7ae09fe53 100644
--- a/packages/core/test/nest-application.spec.ts
+++ b/packages/core/test/nest-application.spec.ts
@@ -1,8 +1,10 @@
+import { RequestMethod } from '@nestjs/common';
 import { expect } from 'chai';
 import { ApplicationConfig } from '../application-config';
 import { NestContainer } from '../injector/container';
 import { GraphInspector } from '../inspector/graph-inspector';
 import { NestApplication } from '../nest-application';
+import { mapToExcludeRoute } from './../middleware/utils';
 import { NoopHttpAdapter } from './utils/noop-adapter.spec';
 
 describe('NestApplication', () => {
@@ -54,4 +56,24 @@ describe('NestApplication', () => {
       ).to.equal(1);
     });
   });
+  describe('Global Prefix', () => {
+    it('should get correct global prefix options', () => {
+      const applicationConfig = new ApplicationConfig();
+      const container = new NestContainer(applicationConfig);
+      const instance = new NestApplication(
+        container,
+        new NoopHttpAdapter({}),
+        applicationConfig,
+        new GraphInspector(container),
+        {},
+      );
+      const excludeRoute = ['foo', { path: 'bar', method: RequestMethod.GET }];
+      instance.setGlobalPrefix('api', {
+        exclude: excludeRoute,
+      });
+      expect(applicationConfig.getGlobalPrefixOptions()).to.eql({
+        exclude: mapToExcludeRoute(excludeRoute),
+      });
+    });
+  });
 });
diff --git a/packages/core/test/router/route-path-factory.spec.ts b/packages/core/test/router/route-path-factory.spec.ts
index 84b9275a7..4c110651d 100644
--- a/packages/core/test/router/route-path-factory.spec.ts
+++ b/packages/core/test/router/route-path-factory.spec.ts
@@ -247,6 +247,7 @@ describe('RoutePathFactory', () => {
           sinon.stub(applicationConfig, 'getGlobalPrefixOptions').returns({
             exclude: [
               {
+                path: '/random',
                 pathRegex: pathToRegexp('/random'),
                 requestMethod: RequestMethod.ALL,
               },
@@ -265,6 +266,7 @@ describe('RoutePathFactory', () => {
           sinon.stub(applicationConfig, 'getGlobalPrefixOptions').returns({
             exclude: [
               {
+                path: '/cats',
                 pathRegex: pathToRegexp('/cats'),
                 requestMethod: RequestMethod.ALL,
               },
@@ -283,6 +285,7 @@ describe('RoutePathFactory', () => {
             sinon.stub(applicationConfig, 'getGlobalPrefixOptions').returns({
               exclude: [
                 {
+                  path: '/cats',
                   pathRegex: pathToRegexp('/cats'),
                   requestMethod: RequestMethod.GET,
                 },
diff --git a/packages/microservices/client/client-kafka.ts b/packages/microservices/client/client-kafka.ts
index ba9ad099a..2932f1b13 100644
--- a/packages/microservices/client/client-kafka.ts
+++ b/packages/microservices/client/client-kafka.ts
@@ -42,13 +42,13 @@ let kafkaPackage: any = {};
 
 export class ClientKafka extends ClientProxy {
   protected logger = new Logger(ClientKafka.name);
-  protected client: Kafka = null;
-  protected consumer: Consumer = null;
-  protected producer: Producer = null;
-  protected parser: KafkaParser = null;
+  protected client: Kafka | null = null;
+  protected consumer: Consumer | null = null;
+  protected producer: Producer | null = null;
+  protected parser: KafkaParser | null = null;
+  protected initialized: Promise<void> | null = null;
   protected responsePatterns: string[] = [];
   protected consumerAssignments: { [key: string]: number } = {};
-
   protected brokers: string[] | BrokersFunction;
   protected clientId: string;
   protected groupId: string;
@@ -94,46 +94,56 @@ export class ClientKafka extends ClientProxy {
     this.consumer && (await this.consumer.disconnect());
     this.producer = null;
     this.consumer = null;
+    this.initialized = null;
     this.client = null;
   }
 
   public async connect(): Promise<Producer> {
-    if (this.client) {
-      return this.producer;
+    if (this.initialized) {
+      return this.initialized.then(() => this.producer);
     }
-    this.client = this.createClient();
-
-    if (!this.producerOnlyMode) {
-      const partitionAssigners = [
-        (
-          config: ConstructorParameters<typeof KafkaReplyPartitionAssigner>[1],
-        ) => new KafkaReplyPartitionAssigner(this, config),
-      ] as any[];
-
-      const consumerOptions = Object.assign(
-        {
-          partitionAssigners,
-        },
-        this.options.consumer || {},
-        {
-          groupId: this.groupId,
-        },
-      );
+    this.initialized = new Promise(async (resolve, reject) => {
+      try {
+        this.client = this.createClient();
+
+        if (!this.producerOnlyMode) {
+          const partitionAssigners = [
+            (
+              config: ConstructorParameters<
+                typeof KafkaReplyPartitionAssigner
+              >[1],
+            ) => new KafkaReplyPartitionAssigner(this, config),
+          ];
+
+          const consumerOptions = Object.assign(
+            {
+              partitionAssigners,
+            },
+            this.options.consumer || {},
+            {
+              groupId: this.groupId,
+            },
+          );
 
-      this.consumer = this.client.consumer(consumerOptions);
-      // set member assignments on join and rebalance
-      this.consumer.on(
-        this.consumer.events.GROUP_JOIN,
-        this.setConsumerAssignments.bind(this),
-      );
-      await this.consumer.connect();
-      await this.bindTopics();
-    }
+          this.consumer = this.client.consumer(consumerOptions);
+          // set member assignments on join and rebalance
+          this.consumer.on(
+            this.consumer.events.GROUP_JOIN,
+            this.setConsumerAssignments.bind(this),
+          );
+          await this.consumer.connect();
+          await this.bindTopics();
+        }
 
-    this.producer = this.client.producer(this.options.producer || {});
-    await this.producer.connect();
+        this.producer = this.client.producer(this.options.producer || {});
+        await this.producer.connect();
 
-    return this.producer;
+        resolve();
+      } catch (err) {
+        reject(err);
+      }
+    });
+    return this.initialized.then(() => this.producer);
   }
 
   public async bindTopics(): Promise<void> {
diff --git a/packages/microservices/client/client-rmq.ts b/packages/microservices/client/client-rmq.ts
index 5c6616f7f..9057a1927 100644
--- a/packages/microservices/client/client-rmq.ts
+++ b/packages/microservices/client/client-rmq.ts
@@ -3,21 +3,29 @@ import { loadPackage } from '@nestjs/common/utils/load-package.util';
 import { randomStringGenerator } from '@nestjs/common/utils/random-string-generator.util';
 import { isFunction } from '@nestjs/common/utils/shared.utils';
 import { EventEmitter } from 'events';
-import { EmptyError, fromEvent, lastValueFrom, merge, Observable } from 'rxjs';
-import { first, map, retryWhen, scan, share, switchMap } from 'rxjs/operators';
 import {
+  EmptyError,
+  firstValueFrom,
+  fromEvent,
+  merge,
+  Observable,
+  ReplaySubject,
+} from 'rxjs';
+import { first, map, retryWhen, scan, skip, switchMap } from 'rxjs/operators';
+import {
+  CONNECT_EVENT,
   CONNECT_FAILED_EVENT,
   DISCONNECTED_RMQ_MESSAGE,
   DISCONNECT_EVENT,
   ERROR_EVENT,
   RQM_DEFAULT_IS_GLOBAL_PREFETCH_COUNT,
   RQM_DEFAULT_NOACK,
+  RQM_DEFAULT_NO_ASSERT,
   RQM_DEFAULT_PERSISTENT,
   RQM_DEFAULT_PREFETCH_COUNT,
   RQM_DEFAULT_QUEUE,
   RQM_DEFAULT_QUEUE_OPTIONS,
   RQM_DEFAULT_URL,
-  RQM_DEFAULT_NO_ASSERT,
 } from '../constants';
 import { RmqUrl } from '../external/rmq-url.interface';
 import { ReadPacket, RmqOptions, WritePacket } from '../interfaces';
@@ -25,18 +33,30 @@ import { RmqRecord } from '../record-builders';
 import { RmqRecordSerializer } from '../serializers/rmq-record.serializer';
 import { ClientProxy } from './client-proxy';
 
+// import type {
+//   AmqpConnectionManager,
+//   ChannelWrapper,
+// } from 'amqp-connection-manager';
+// import type { Channel, ConsumeMessage } from 'amqplib';
+
+type Channel = any;
+type ChannelWrapper = any;
+type ConsumeMessage = any;
+type AmqpConnectionManager = any;
+
 let rqmPackage: any = {};
 
 const REPLY_QUEUE = 'amq.rabbitmq.reply-to';
 
 export class ClientRMQ extends ClientProxy {
   protected readonly logger = new Logger(ClientProxy.name);
+  protected connection$: ReplaySubject<any>;
   protected connection: Promise<any>;
-  protected client: any = null;
-  protected channel: any = null;
+  protected client: AmqpConnectionManager = null;
+  protected channel: ChannelWrapper = null;
   protected urls: string[] | RmqUrl[];
   protected queue: string;
-  protected queueOptions: any;
+  protected queueOptions: Record<string, any>;
   protected responseEmitter: EventEmitter;
   protected replyQueue: string;
   protected persistent: boolean;
@@ -75,42 +95,44 @@ export class ClientRMQ extends ClientProxy {
 
   public connect(): Promise<any> {
     if (this.client) {
-      return this.connection;
+      return this.convertConnectionToPromise();
     }
     this.client = this.createClient();
     this.handleError(this.client);
     this.handleDisconnectError(this.client);
 
+    this.responseEmitter = new EventEmitter();
+    this.responseEmitter.setMaxListeners(0);
+
     const connect$ = this.connect$(this.client);
-    this.connection = lastValueFrom(
-      this.mergeDisconnectEvent(this.client, connect$).pipe(
-        switchMap(() => this.createChannel()),
-        share(),
-      ),
-    ).catch(err => {
-      if (err instanceof EmptyError) {
-        return;
-      }
-      throw err;
-    });
+    const withDisconnect$ = this.mergeDisconnectEvent(
+      this.client,
+      connect$,
+    ).pipe(switchMap(() => this.createChannel()));
+
+    const withReconnect$ = fromEvent(this.client, CONNECT_EVENT).pipe(skip(1));
+    const source$ = merge(withDisconnect$, withReconnect$);
 
-    return this.connection;
+    this.connection$ = new ReplaySubject(1);
+    source$.subscribe(this.connection$);
+
+    return this.convertConnectionToPromise();
   }
 
   public createChannel(): Promise<void> {
     return new Promise(resolve => {
       this.channel = this.client.createChannel({
         json: false,
-        setup: (channel: any) => this.setupChannel(channel, resolve),
+        setup: (channel: Channel) => this.setupChannel(channel, resolve),
       });
     });
   }
 
-  public createClient<T = any>(): T {
+  public createClient(): AmqpConnectionManager {
     const socketOptions = this.getOptionsProp(this.options, 'socketOptions');
     return rqmPackage.connect(this.urls, {
       connectionOptions: socketOptions,
-    }) as T;
+    });
   }
 
   public mergeDisconnectEvent<T = any>(
@@ -119,7 +141,7 @@ export class ClientRMQ extends ClientProxy {
   ): Observable<T> {
     const eventToError = (eventType: string) =>
       fromEvent(instance, eventType).pipe(
-        map((err: any) => {
+        map((err: unknown) => {
           throw err;
         }),
       );
@@ -138,10 +160,23 @@ export class ClientRMQ extends ClientProxy {
         ),
       ),
     );
+    // If we ever decide to propagate all disconnect errors & re-emit them through
+    // the "connection" stream then comment out "first()" operator.
     return merge(source$, disconnect$, connectFailed$).pipe(first());
   }
 
-  public async setupChannel(channel: any, resolve: Function) {
+  public async convertConnectionToPromise() {
+    try {
+      return await firstValueFrom(this.connection$);
+    } catch (err) {
+      if (err instanceof EmptyError) {
+        return;
+      }
+      throw err;
+    }
+  }
+
+  public async setupChannel(channel: Channel, resolve: Function) {
     const prefetchCount =
       this.getOptionsProp(this.options, 'prefetchCount') ||
       RQM_DEFAULT_PREFETCH_COUNT;
@@ -153,18 +188,15 @@ export class ClientRMQ extends ClientProxy {
       await channel.assertQueue(this.queue, this.queueOptions);
     }
     await channel.prefetch(prefetchCount, isGlobalPrefetchCount);
-
-    this.responseEmitter = new EventEmitter();
-    this.responseEmitter.setMaxListeners(0);
     await this.consumeChannel(channel);
     resolve();
   }
 
-  public async consumeChannel(channel: any) {
+  public async consumeChannel(channel: Channel) {
     const noAck = this.getOptionsProp(this.options, 'noAck', RQM_DEFAULT_NOACK);
     await channel.consume(
       this.replyQueue,
-      (msg: any) =>
+      (msg: ConsumeMessage) =>
         this.responseEmitter.emit(msg.properties.correlationId, msg),
       {
         noAck,
@@ -172,16 +204,14 @@ export class ClientRMQ extends ClientProxy {
     );
   }
 
-  public handleError(client: any): void {
+  public handleError(client: AmqpConnectionManager): void {
     client.addListener(ERROR_EVENT, (err: any) => this.logger.error(err));
   }
 
-  public handleDisconnectError(client: any): void {
+  public handleDisconnectError(client: AmqpConnectionManager): void {
     client.addListener(DISCONNECT_EVENT, (err: any) => {
       this.logger.error(DISCONNECTED_RMQ_MESSAGE);
       this.logger.error(err);
-
-      this.close();
     });
   }
 
@@ -231,7 +261,7 @@ export class ClientRMQ extends ClientProxy {
         content,
         options,
       }: {
-        content: any;
+        content: Buffer;
         options: Record<string, unknown>;
       }) =>
         this.handleMessage(JSON.parse(content.toString()), options, callback);
@@ -244,17 +274,19 @@ export class ClientRMQ extends ClientProxy {
       delete serializedPacket.options;
 
       this.responseEmitter.on(correlationId, listener);
-      this.channel.sendToQueue(
-        this.queue,
-        Buffer.from(JSON.stringify(serializedPacket)),
-        {
-          replyTo: this.replyQueue,
-          persistent: this.persistent,
-          ...options,
-          headers: this.mergeHeaders(options?.headers),
-          correlationId,
-        },
-      );
+      this.channel
+        .sendToQueue(
+          this.queue,
+          Buffer.from(JSON.stringify(serializedPacket)),
+          {
+            replyTo: this.replyQueue,
+            persistent: this.persistent,
+            ...options,
+            headers: this.mergeHeaders(options?.headers),
+            correlationId,
+          },
+        )
+        .catch(err => callback({ err }));
       return () => this.responseEmitter.removeListener(correlationId, listener);
     } catch (err) {
       callback({ err });
diff --git a/packages/microservices/index.ts b/packages/microservices/index.ts
index 886c0be72..bf44f34f7 100644
--- a/packages/microservices/index.ts
+++ b/packages/microservices/index.ts
@@ -1,6 +1,6 @@
 /*
  * Nest @microservices
- * Copyright(c) 2017 - 2022 Kamil Mysliwiec
+ * Copyright(c) 2017 - 2023 Kamil Mysliwiec
  * https://nestjs.com
  * MIT Licensed
  */
diff --git a/packages/microservices/listener-metadata-explorer.ts b/packages/microservices/listener-metadata-explorer.ts
index 33f29909d..d8284f148 100644
--- a/packages/microservices/listener-metadata-explorer.ts
+++ b/packages/microservices/listener-metadata-explorer.ts
@@ -37,9 +37,12 @@ export class ListenerMetadataExplorer {
 
   public explore(instance: Controller): EventOrMessageListenerDefinition[] {
     const instancePrototype = Object.getPrototypeOf(instance);
-    return this.metadataScanner
-      .getAllMethodNames(instancePrototype)
-      .map(method => this.exploreMethodMetadata(instancePrototype, method));
+    return this.metadataScanner.scanFromPrototype<
+      Controller,
+      EventOrMessageListenerDefinition
+    >(instance, instancePrototype, method =>
+      this.exploreMethodMetadata(instancePrototype, method),
+    );
   }
 
   public exploreMethodMetadata(
diff --git a/packages/microservices/listeners-controller.ts b/packages/microservices/listeners-controller.ts
index 6fa85d93a..83fd1d941 100644
--- a/packages/microservices/listeners-controller.ts
+++ b/packages/microservices/listeners-controller.ts
@@ -14,7 +14,15 @@ import { Module } from '@nestjs/core/injector/module';
 import { GraphInspector } from '@nestjs/core/inspector/graph-inspector';
 import { MetadataScanner } from '@nestjs/core/metadata-scanner';
 import { REQUEST_CONTEXT_ID } from '@nestjs/core/router/request/request-constants';
-import { connectable, Observable, Subject } from 'rxjs';
+import {
+  forkJoin,
+  from as fromPromise,
+  isObservable,
+  mergeMap,
+  Observable,
+  ObservedValueOf,
+  of,
+} from 'rxjs';
 import { IClientProxyFactory } from './client/client-proxy-factory';
 import { ClientsContainer } from './container';
 import { ExceptionFiltersContext } from './context/exception-filters-context';
@@ -111,20 +119,18 @@ export class ListenersController {
             defaultCallMetadata,
           );
           if (isEventHandler) {
-            const eventHandler: MessageHandler = (...args: unknown[]) => {
+            const eventHandler: MessageHandler = async (...args: unknown[]) => {
               const originalArgs = args;
               const [dataOrContextHost] = originalArgs;
               if (dataOrContextHost instanceof RequestContextHost) {
                 args = args.slice(1, args.length);
               }
-              const originalReturnValue = proxy(...args);
-              const returnedValueWrapper = eventHandler.next?.(
-                ...(originalArgs as Parameters<MessageHandler>),
-              );
-              returnedValueWrapper?.then(returnedValue =>
-                this.connectIfStream(returnedValue as Observable<unknown>),
+              const returnValue = proxy(...args);
+              return this.forkJoinHandlersIfAttached(
+                returnValue,
+                originalArgs,
+                eventHandler,
               );
-              return originalReturnValue;
             };
             return server.addHandler(
               pattern,
@@ -143,6 +149,7 @@ export class ListenersController {
           moduleKey,
           methodKey,
           defaultCallMetadata,
+          isEventHandler,
         );
         server.addHandler(pattern, asyncHandler, isEventHandler, extras);
       });
@@ -174,6 +181,23 @@ export class ListenersController {
     );
   }
 
+  public forkJoinHandlersIfAttached(
+    currentReturnValue: Promise<unknown> | Observable<unknown>,
+    originalArgs: unknown[],
+    handlerRef: MessageHandler,
+  ) {
+    if (handlerRef.next) {
+      const returnedValueWrapper = handlerRef.next(
+        ...(originalArgs as Parameters<MessageHandler>),
+      );
+      return forkJoin({
+        current: this.transformToObservable(currentReturnValue),
+        next: this.transformToObservable(returnedValueWrapper),
+      });
+    }
+    return currentReturnValue;
+  }
+
   public assignClientsToProperties(instance: Controller | Injectable) {
     for (const {
       property,
@@ -201,17 +225,20 @@ export class ListenersController {
     moduleKey: string,
     methodKey: string,
     defaultCallMetadata: Record<string, any> = DEFAULT_CALLBACK_METADATA,
+    isEventHandler = false,
   ) {
     const collection = moduleRef.controllers;
     const { instance } = wrapper;
 
+    const isTreeDurable = wrapper.isDependencyTreeDurable();
+
     const requestScopedHandler: MessageHandler = async (...args: unknown[]) => {
       try {
         let contextId: ContextId;
 
         let [dataOrContextHost] = args;
         if (dataOrContextHost instanceof RequestContextHost) {
-          contextId = this.getContextId(dataOrContextHost);
+          contextId = this.getContextId(dataOrContextHost, isTreeDurable);
           args.shift();
         } else {
           const [data, reqCtx] = args;
@@ -220,13 +247,10 @@ export class ListenersController {
             data,
             reqCtx as BaseRpcContext,
           );
-          contextId = this.getContextId(request);
-          this.container.registerRequestProvider(
-            contextId.getParent ? contextId.payload : request,
-            contextId,
-          );
+          contextId = this.getContextId(request, isTreeDurable);
           dataOrContextHost = request;
         }
+
         const contextInstance = await this.injector.loadPerContext(
           instance,
           moduleRef,
@@ -242,14 +266,16 @@ export class ListenersController {
           wrapper.id,
           defaultCallMetadata,
         );
-        const returnedValueWrapper = requestScopedHandler.next?.(
-          dataOrContextHost,
-          ...args,
-        );
-        returnedValueWrapper?.then(returnedValue =>
-          this.connectIfStream(returnedValue as Observable<unknown>),
-        );
-        return proxy(...args);
+
+        const returnValue = proxy(...args);
+        if (isEventHandler) {
+          return this.forkJoinHandlersIfAttached(
+            returnValue,
+            [dataOrContextHost, ...args],
+            requestScopedHandler,
+          );
+        }
+        return returnValue;
       } catch (err) {
         let exceptionFilter = this.exceptionFiltersCache.get(
           instance[methodKey],
@@ -270,7 +296,10 @@ export class ListenersController {
     return requestScopedHandler;
   }
 
-  private getContextId<T extends RequestContext = any>(request: T): ContextId {
+  private getContextId<T extends RequestContext = any>(
+    request: T,
+    isTreeDurable: boolean,
+  ): ContextId {
     const contextId = ContextIdFactory.getByRequest(request);
     if (!request[REQUEST_CONTEXT_ID as any]) {
       Object.defineProperty(request, REQUEST_CONTEXT_ID, {
@@ -279,22 +308,32 @@ export class ListenersController {
         writable: false,
         configurable: false,
       });
-      this.container.registerRequestProvider(
-        contextId.getParent ? contextId.payload : request,
-        contextId,
-      );
+
+      const requestProviderValue = isTreeDurable ? contextId.payload : request;
+      this.container.registerRequestProvider(requestProviderValue, contextId);
     }
     return contextId;
   }
 
-  private connectIfStream(source: Observable<unknown>) {
-    if (!source) {
-      return;
+  public transformToObservable<T>(
+    resultOrDeferred: Observable<T> | Promise<T>,
+  ): Observable<T>;
+  public transformToObservable<T>(
+    resultOrDeferred: T,
+  ): never extends Observable<ObservedValueOf<T>>
+    ? Observable<T>
+    : Observable<ObservedValueOf<T>>;
+  public transformToObservable(resultOrDeferred: any) {
+    if (resultOrDeferred instanceof Promise) {
+      return fromPromise(resultOrDeferred).pipe(
+        mergeMap(val => (isObservable(val) ? val : of(val))),
+      );
     }
-    const connectableSource = connectable(source, {
-      connector: () => new Subject(),
-      resetOnDisconnect: false,
-    });
-    connectableSource.connect();
+
+    if (isObservable(resultOrDeferred)) {
+      return resultOrDeferred;
+    }
+
+    return of(resultOrDeferred);
   }
 }
diff --git a/packages/microservices/microservices-module.ts b/packages/microservices/microservices-module.ts
index b5ab826dc..3dbda4464 100644
--- a/packages/microservices/microservices-module.ts
+++ b/packages/microservices/microservices-module.ts
@@ -79,7 +79,7 @@ export class MicroservicesModule<
     if (!this.listenersController) {
       throw new RuntimeException();
     }
-    if (this.appOptions.preview) {
+    if (this.appOptions?.preview) {
       return;
     }
     const modules = container.getModules();
diff --git a/packages/microservices/package.json b/packages/microservices/package.json
index 44700cf19..9f1ae97a5 100644
--- a/packages/microservices/package.json
+++ b/packages/microservices/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/microservices",
-  "version": "9.3.0-beta.3",
+  "version": "9.3.2",
   "description": "Nest - modern, fast, powerful node.js web framework (@microservices)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -18,11 +18,11 @@
   },
   "dependencies": {
     "iterare": "1.2.1",
-    "tslib": "2.4.1"
+    "tslib": "2.5.0"
   },
   "devDependencies": {
-    "@nestjs/common": "^9.3.0-beta.3",
-    "@nestjs/core": "^9.3.0-beta.3"
+    "@nestjs/common": "9.3.2",
+    "@nestjs/core": "9.3.2"
   },
   "peerDependencies": {
     "@grpc/grpc-js": "*",
diff --git a/packages/microservices/server/server-kafka.ts b/packages/microservices/server/server-kafka.ts
index 7ac52f9fa..292cbb384 100644
--- a/packages/microservices/server/server-kafka.ts
+++ b/packages/microservices/server/server-kafka.ts
@@ -191,7 +191,7 @@ export class ServerKafka extends Server implements CustomTransportStrategy {
     }
 
     const response$ = this.transformToObservable(
-      await handler(packet.data, kafkaContext),
+      handler(packet.data, kafkaContext),
     );
 
     const replayStream$ = new ReplaySubject();
@@ -218,6 +218,8 @@ export class ServerKafka extends Server implements CustomTransportStrategy {
           if (err instanceof KafkaRetriableException && !isPromiseResolved) {
             isPromiseResolved = true;
             reject(err);
+          } else {
+            resolve();
           }
           replayStream$.error(err);
         },
diff --git a/packages/microservices/server/server-nats.ts b/packages/microservices/server/server-nats.ts
index 768fe3664..73206ee77 100644
--- a/packages/microservices/server/server-nats.ts
+++ b/packages/microservices/server/server-nats.ts
@@ -1,5 +1,4 @@
 import { isUndefined, isObject } from '@nestjs/common/utils/shared.utils';
-import { Observable } from 'rxjs';
 import { NATS_DEFAULT_URL, NO_MESSAGE_HANDLER } from '../constants';
 import { NatsContext } from '../ctx-host/nats.context';
 import { NatsRequestJSONDeserializer } from '../deserializers/nats-request-json.deserializer';
@@ -137,17 +136,28 @@ export class ServerNats extends Server implements CustomTransportStrategy {
         status.data && isObject(status.data)
           ? JSON.stringify(status.data)
           : status.data;
-      if (status.type === 'disconnect' || status.type === 'error') {
-        this.logger.error(
-          `NatsError: type: "${status.type}", data: "${data}".`,
-        );
-      } else {
-        const message = `NatsStatus: type: "${status.type}", data: "${data}".`;
-        if (status.type === 'pingTimer') {
-          this.logger.debug(message);
-        } else {
-          this.logger.log(message);
-        }
+
+      switch (status.type) {
+        case 'error':
+        case 'disconnect':
+          this.logger.error(
+            `NatsError: type: "${status.type}", data: "${data}".`,
+          );
+          break;
+
+        case 'pingTimer':
+          if (this.options.debug) {
+            this.logger.debug(
+              `NatsStatus: type: "${status.type}", data: "${data}".`,
+            );
+          }
+          break;
+
+        default:
+          this.logger.log(
+            `NatsStatus: type: "${status.type}", data: "${data}".`,
+          );
+          break;
       }
     }
   }
diff --git a/packages/microservices/server/server.ts b/packages/microservices/server/server.ts
index 4e8ee9bf6..8a88a1296 100644
--- a/packages/microservices/server/server.ts
+++ b/packages/microservices/server/server.ts
@@ -11,7 +11,7 @@ import {
   Subject,
   Subscription,
 } from 'rxjs';
-import { catchError, finalize } from 'rxjs/operators';
+import { catchError, finalize, mergeMap } from 'rxjs/operators';
 import { NO_EVENT_HANDLER } from '../constants';
 import { BaseRpcContext } from '../ctx-host/base-rpc.context';
 import { IncomingRequestDeserializer } from '../deserializers/incoming-request.deserializer';
@@ -133,7 +133,9 @@ export abstract class Server {
     : Observable<ObservedValueOf<T>>;
   public transformToObservable(resultOrDeferred: any) {
     if (resultOrDeferred instanceof Promise) {
-      return fromPromise(resultOrDeferred);
+      return fromPromise(resultOrDeferred).pipe(
+        mergeMap(val => (isObservable(val) ? val : of(val))),
+      );
     }
 
     if (isObservable(resultOrDeferred)) {
diff --git a/packages/microservices/test/client/client-kafka.spec.ts b/packages/microservices/test/client/client-kafka.spec.ts
index 39743da52..4bc9e6eca 100644
--- a/packages/microservices/test/client/client-kafka.spec.ts
+++ b/packages/microservices/test/client/client-kafka.spec.ts
@@ -11,7 +11,6 @@ import {
 } from '../../external/kafka.interface';
 
 describe('ClientKafka', () => {
-  // static
   const topic = 'test.topic';
   const partition = 0;
   const replyTopic = 'test.topic.reply';
@@ -25,7 +24,6 @@ describe('ClientKafka', () => {
   const heartbeat = async () => {};
   const pause = () => () => {};
 
-  // message
   const message: KafkaMessage = {
     key: Buffer.from(key),
     offset,
@@ -35,7 +33,6 @@ describe('ClientKafka', () => {
     attributes,
   };
 
-  // deserialized message
   const deserializedMessage: any = {
     key,
     offset,
@@ -47,7 +44,6 @@ describe('ClientKafka', () => {
     partition,
   };
 
-  // payloads
   const payload: EachMessagePayload = {
     topic,
     partition,
@@ -152,26 +148,6 @@ describe('ClientKafka', () => {
     pause,
   };
 
-  const deserializedPayloadError: EachMessagePayload = {
-    topic,
-    partition,
-    message: Object.assign(
-      {
-        headers: {
-          [KafkaHeaders.CORRELATION_ID]: correlationId,
-          [KafkaHeaders.NEST_ERR]: NO_MESSAGE_HANDLER,
-        },
-      },
-      deserializedMessage,
-      {
-        size: 0,
-        value: null,
-      },
-    ),
-    heartbeat,
-    pause,
-  };
-
   let client: ClientKafka;
   let callback: sinon.SinonSpy;
   let connect: sinon.SinonSpy;
@@ -182,7 +158,7 @@ describe('ClientKafka', () => {
   let consumerStub: sinon.SinonStub;
   let producerStub: sinon.SinonStub;
   let createClientStub: sinon.SinonStub;
-  let kafkaClient;
+  let kafkaClient: any;
 
   beforeEach(() => {
     client = new ClientKafka({});
@@ -322,7 +298,8 @@ describe('ClientKafka', () => {
       });
 
       it('should expect the connection to be reused', async () => {
-        (client as any).client = kafkaClient;
+        (client as any).initialized = Promise.resolve({});
+
         await client.connect();
 
         expect(createClientStub.calledOnce).to.be.false;
@@ -368,7 +345,8 @@ describe('ClientKafka', () => {
       });
 
       it('should expect the connection to be reused', async () => {
-        (client as any).client = kafkaClient;
+        (client as any).initialized = Promise.resolve({});
+
         await client.connect();
 
         expect(createClientStub.calledOnce).to.be.false;
diff --git a/packages/microservices/test/client/client-rmq.spec.ts b/packages/microservices/test/client/client-rmq.spec.ts
index 2c764b57f..6b1533d66 100644
--- a/packages/microservices/test/client/client-rmq.spec.ts
+++ b/packages/microservices/test/client/client-rmq.spec.ts
@@ -15,7 +15,6 @@ describe('ClientRMQ', function () {
     let createClientStub: sinon.SinonStub;
     let handleErrorsSpy: sinon.SinonSpy;
     let connect$Stub: sinon.SinonStub;
-    let mergeDisconnectEvent: sinon.SinonStub;
 
     beforeEach(async () => {
       client = new ClientRMQ({});
@@ -33,7 +32,7 @@ describe('ClientRMQ', function () {
           return this;
         },
       }));
-      mergeDisconnectEvent = sinon
+      sinon
         .stub(client, 'mergeDisconnectEvent')
         .callsFake((_, source) => source);
     });
@@ -173,7 +172,7 @@ describe('ClientRMQ', function () {
     const pattern = 'test';
     let msg: ReadPacket;
     let connectSpy: sinon.SinonSpy,
-      sendToQueueSpy: sinon.SinonSpy,
+      sendToQueueStub: sinon.SinonStub,
       eventSpy: sinon.SinonSpy;
 
     beforeEach(() => {
@@ -181,10 +180,10 @@ describe('ClientRMQ', function () {
       msg = { pattern, data: 'data' };
       connectSpy = sinon.spy(client, 'connect');
       eventSpy = sinon.spy();
-      sendToQueueSpy = sinon.spy();
+      sendToQueueStub = sinon.stub().callsFake(() => ({ catch: sinon.spy() }));
 
       client['channel'] = {
-        sendToQueue: sendToQueueSpy,
+        sendToQueue: sendToQueueStub,
       };
       client['responseEmitter'] = new EventEmitter();
       client['responseEmitter'].on(pattern, eventSpy);
@@ -196,15 +195,15 @@ describe('ClientRMQ', function () {
 
     it('should send message to a proper queue', () => {
       client['publish'](msg, () => {
-        expect(sendToQueueSpy.called).to.be.true;
-        expect(sendToQueueSpy.getCall(0).args[0]).to.be.eql(client['queue']);
+        expect(sendToQueueStub.called).to.be.true;
+        expect(sendToQueueStub.getCall(0).args[0]).to.be.eql(client['queue']);
       });
     });
 
     it('should send buffer from stringified message', () => {
       client['publish'](msg, () => {
-        expect(sendToQueueSpy.called).to.be.true;
-        expect(sendToQueueSpy.getCall(1).args[1]).to.be.eql(
+        expect(sendToQueueStub.called).to.be.true;
+        expect(sendToQueueStub.getCall(1).args[1]).to.be.eql(
           Buffer.from(JSON.stringify(msg)),
         );
       });
@@ -231,7 +230,7 @@ describe('ClientRMQ', function () {
     describe('headers', () => {
       it('should not generate headers if none are configured', () => {
         client['publish'](msg, () => {
-          expect(sendToQueueSpy.getCall(0).args[2].headers).to.be.undefined;
+          expect(sendToQueueStub.getCall(0).args[2].headers).to.be.undefined;
         });
       });
 
@@ -240,7 +239,7 @@ describe('ClientRMQ', function () {
         msg.data = new RmqRecord('data', { headers: requestHeaders });
 
         client['publish'](msg, () => {
-          expect(sendToQueueSpy.getCall(0).args[2].headers).to.eql(
+          expect(sendToQueueStub.getCall(0).args[2].headers).to.eql(
             requestHeaders,
           );
         });
@@ -254,7 +253,7 @@ describe('ClientRMQ', function () {
         msg.data = new RmqRecord('data', { headers: requestHeaders });
 
         client['publish'](msg, () => {
-          expect(sendToQueueSpy.getCall(0).args[2].headers).to.eql({
+          expect(sendToQueueStub.getCall(0).args[2].headers).to.eql({
             ...staticHeaders,
             ...requestHeaders,
           });
@@ -269,7 +268,7 @@ describe('ClientRMQ', function () {
         msg.data = new RmqRecord('data', { headers: requestHeaders });
 
         client['publish'](msg, () => {
-          expect(sendToQueueSpy.getCall(0).args[2].headers).to.eql(
+          expect(sendToQueueStub.getCall(0).args[2].headers).to.eql(
             requestHeaders,
           );
         });
diff --git a/packages/microservices/test/listeners-metadata-explorer.spec.ts b/packages/microservices/test/listeners-metadata-explorer.spec.ts
index 18ccdc2f7..2bb04a763 100644
--- a/packages/microservices/test/listeners-metadata-explorer.spec.ts
+++ b/packages/microservices/test/listeners-metadata-explorer.spec.ts
@@ -52,16 +52,17 @@ describe('ListenerMetadataExplorer', () => {
     instance = new ListenerMetadataExplorer(scanner);
   });
   describe('explore', () => {
-    let getAllMethodNames: sinon.SinonSpy;
+    let scanFromPrototype: sinon.SinonSpy;
     beforeEach(() => {
-      getAllMethodNames = sinon.spy(scanner, 'getAllMethodNames');
+      scanFromPrototype = sinon.spy(scanner, 'scanFromPrototype');
     });
     it(`should call "scanFromPrototype" with expected arguments`, () => {
       const obj = new Test();
       instance.explore(obj);
 
-      const { args } = getAllMethodNames.getCall(0);
-      expect(args[0]).to.be.eql(Object.getPrototypeOf(obj));
+      const { args } = scanFromPrototype.getCall(0);
+      expect(args[0]).to.be.eql(obj);
+      expect(args[1]).to.be.eql(Object.getPrototypeOf(obj));
     });
   });
   describe('exploreMethodMetadata', () => {
diff --git a/packages/platform-express/adapters/express-adapter.ts b/packages/platform-express/adapters/express-adapter.ts
index 9d02e8b1f..d9b7bff0d 100644
--- a/packages/platform-express/adapters/express-adapter.ts
+++ b/packages/platform-express/adapters/express-adapter.ts
@@ -1,11 +1,12 @@
 import type { Server } from 'net';
 import {
+  HttpStatus,
   InternalServerErrorException,
   Logger,
   RequestMethod,
   StreamableFile,
-  VersioningType,
   VersioningOptions,
+  VersioningType,
   VERSION_NEUTRAL,
 } from '@nestjs/common';
 import { VersionValue } from '@nestjs/common/interfaces';
@@ -29,11 +30,13 @@ import {
   OptionsUrlencoded,
   urlencoded as bodyParserUrlencoded,
 } from 'body-parser';
+import * as bodyparser from 'body-parser';
 import * as cors from 'cors';
 import * as express from 'express';
 import * as http from 'http';
 import * as https from 'https';
 import { Duplex, pipeline } from 'stream';
+import { NestExpressBodyParserOptions } from '../interfaces/nest-express-body-parser-options.interface';
 import { ServeStaticOptions } from '../interfaces/serve-static-options.interface';
 import { getBodyParserOptions } from './utils/get-body-parser-options.util';
 
@@ -46,6 +49,9 @@ type VersionedRoute = <
   next: () => void,
 ) => any;
 
+/**
+ * @publicApi
+ */
 export class ExpressAdapter extends AbstractHttpAdapter {
   private readonly routerMethodFactory = new RouterMethodFactory();
   private readonly logger = new Logger(ExpressAdapter.name);
@@ -94,6 +100,16 @@ export class ExpressAdapter extends AbstractHttpAdapter {
         },
       );
     }
+    if (
+      response.getHeader('Content-Type') !== undefined &&
+      response.getHeader('Content-Type') !== 'application/json' &&
+      body?.statusCode >= HttpStatus.BAD_REQUEST
+    ) {
+      this.logger.warn(
+        "Content-Type doesn't match Reply body, you might need a custom ExceptionFilter for non-JSON responses",
+      );
+      response.setHeader('Content-Type', 'application/json');
+    }
     return isObject(body) ? response.json(body) : response.send(String(body));
   }
 
@@ -235,6 +251,19 @@ export class ExpressAdapter extends AbstractHttpAdapter {
       .forEach(parserKey => this.use(parserMiddleware[parserKey]));
   }
 
+  public useBodyParser<Options extends bodyparser.Options = bodyparser.Options>(
+    type: keyof bodyparser.BodyParser,
+    rawBody: boolean,
+    options?: NestExpressBodyParserOptions<Options>,
+  ): this {
+    const parserOptions = getBodyParserOptions(rawBody, options || {});
+    const parser = bodyparser[type](parserOptions);
+
+    this.use(parser);
+
+    return this;
+  }
+
   public setLocal(key: string, value: any) {
     this.instance.locals[key] = value;
     return this;
diff --git a/packages/platform-express/index.ts b/packages/platform-express/index.ts
index 0ed4c2d76..ce3dbc432 100644
--- a/packages/platform-express/index.ts
+++ b/packages/platform-express/index.ts
@@ -1,6 +1,6 @@
 /*
  * Nest @platform-express
- * Copyright(c) 2017 - 2022 Kamil Mysliwiec
+ * Copyright(c) 2017 - 2023 Kamil Mysliwiec
  * https://nestjs.com
  * MIT Licensed
  */
diff --git a/packages/platform-express/interfaces/index.ts b/packages/platform-express/interfaces/index.ts
index 3238b1c16..baee247f6 100644
--- a/packages/platform-express/interfaces/index.ts
+++ b/packages/platform-express/interfaces/index.ts
@@ -1 +1,2 @@
 export * from './nest-express-application.interface';
+export * from './nest-express-body-parser-options.interface';
diff --git a/packages/platform-express/interfaces/nest-express-application.interface.ts b/packages/platform-express/interfaces/nest-express-application.interface.ts
index 75da409d2..f913ab973 100644
--- a/packages/platform-express/interfaces/nest-express-application.interface.ts
+++ b/packages/platform-express/interfaces/nest-express-application.interface.ts
@@ -1,5 +1,7 @@
 import { Server } from 'net';
 import { INestApplication } from '@nestjs/common';
+import * as bodyparser from 'body-parser';
+import { NestExpressBodyParserOptions } from './nest-express-body-parser-options.interface';
 import { ServeStaticOptions } from './serve-static-options.interface';
 
 /**
@@ -73,6 +75,24 @@ export interface NestExpressApplication extends INestApplication {
    */
   useStaticAssets(path: string, options?: ServeStaticOptions): this;
 
+  /**
+   * Register Express body parsers on the fly. Will respect
+   * the application's `rawBody` option.
+   *
+   * @example
+   * const app = await NestFactory.create<NestExpressApplication>(
+   *   AppModule,
+   *   { rawBody: true }
+   * );
+   * app.useBodyParser('json', { limit: '50mb' });
+   *
+   * @returns {this}
+   */
+  useBodyParser<Options extends bodyparser.Options = bodyparser.Options>(
+    parser: keyof bodyparser.BodyParser,
+    options?: NestExpressBodyParserOptions<Options>,
+  ): this;
+
   /**
    * Sets one or multiple base directories for templates (views).
    *
diff --git a/packages/platform-express/interfaces/nest-express-body-parser-options.interface.ts b/packages/platform-express/interfaces/nest-express-body-parser-options.interface.ts
new file mode 100644
index 000000000..e82845b63
--- /dev/null
+++ b/packages/platform-express/interfaces/nest-express-body-parser-options.interface.ts
@@ -0,0 +1,6 @@
+import type { Options } from 'body-parser';
+
+export type NestExpressBodyParserOptions<T extends Options = Options> = Omit<
+  T,
+  'verify'
+>;
diff --git a/packages/platform-express/package.json b/packages/platform-express/package.json
index 1e085b210..d2e1e5b5a 100644
--- a/packages/platform-express/package.json
+++ b/packages/platform-express/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/platform-express",
-  "version": "9.3.0-beta.3",
+  "version": "9.3.2",
   "description": "Nest - modern, fast, powerful node.js web framework (@platform-express)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -21,11 +21,11 @@
     "cors": "2.8.5",
     "express": "4.18.2",
     "multer": "1.4.4-lts.1",
-    "tslib": "2.4.1"
+    "tslib": "2.5.0"
   },
   "devDependencies": {
-    "@nestjs/common": "^9.3.0-beta.3",
-    "@nestjs/core": "^9.3.0-beta.3"
+    "@nestjs/common": "9.3.2",
+    "@nestjs/core": "9.3.2"
   },
   "peerDependencies": {
     "@nestjs/common": "^9.0.0",
diff --git a/packages/platform-fastify/adapters/fastify-adapter.ts b/packages/platform-fastify/adapters/fastify-adapter.ts
index 75162191a..06aa48d7e 100644
--- a/packages/platform-fastify/adapters/fastify-adapter.ts
+++ b/packages/platform-fastify/adapters/fastify-adapter.ts
@@ -18,9 +18,10 @@ import { isString, isUndefined } from '@nestjs/common/utils/shared.utils';
 import { AbstractHttpAdapter } from '@nestjs/core/adapters/http-adapter';
 import {
   fastify,
+  FastifyBaseLogger,
   FastifyBodyParser,
   FastifyInstance,
-  FastifyBaseLogger,
+  FastifyListenOptions,
   FastifyPluginAsync,
   FastifyPluginCallback,
   FastifyRegister,
@@ -45,6 +46,7 @@ import {
 } from 'light-my-request';
 // `querystring` is used internally in fastify for registering urlencoded body parser.
 import { parse as querystringParse } from 'querystring';
+import { NestFastifyBodyParserOptions } from '../interfaces';
 import {
   FastifyStaticOptions,
   FastifyViewOptions,
@@ -91,6 +93,9 @@ type VersionedRoute<TRequest, TResponse> = ((
 type FastifyRawRequest<TServer extends RawServerBase> =
   RawRequestDefaultExpression<TServer> & { originalUrl?: string };
 
+/**
+ * @publicApi
+ */
 export class FastifyAdapter<
   TServer extends RawServerBase = RawServerDefault,
   TRawRequest extends FastifyRawRequest<TServer> = FastifyRawRequest<TServer>,
@@ -227,12 +232,27 @@ export class FastifyAdapter<
     hostname: string,
     callback?: () => void,
   ): void;
-  public listen(port: string | number, ...args: any[]): void {
+  public listen(
+    listenOptions: string | number | FastifyListenOptions,
+    ...args: any[]
+  ): void {
     const isFirstArgTypeofFunction = typeof args[0] === 'function';
     const callback = isFirstArgTypeofFunction ? args[0] : args[1];
-    const options: Record<string, any> = {
-      port: +port,
-    };
+
+    let options: Record<string, any>;
+    if (
+      typeof listenOptions === 'object' &&
+      (listenOptions.host !== undefined ||
+        listenOptions.port !== undefined ||
+        listenOptions.path !== undefined)
+    ) {
+      // First parameter is an object with a path, port and/or host attributes
+      options = listenOptions;
+    } else {
+      options = {
+        port: +listenOptions,
+      };
+    }
     if (!isFirstArgTypeofFunction) {
       options.host = args[0];
     }
@@ -326,6 +346,17 @@ export class FastifyAdapter<
       }
       body = body.getStream();
     }
+    if (
+      fastifyReply.getHeader('Content-Type') !== undefined &&
+      fastifyReply.getHeader('Content-Type') !== 'application/json' &&
+      body?.statusCode >= HttpStatus.BAD_REQUEST
+    ) {
+      Logger.warn(
+        "Content-Type doesn't match Reply body, you might need a custom ExceptionFilter for non-JSON responses",
+        FastifyAdapter.name,
+      );
+      fastifyReply.header('Content-Type', 'application/json');
+    }
     return fastifyReply.send(body);
   }
 
@@ -465,6 +496,43 @@ export class FastifyAdapter<
     this._isParserRegistered = true;
   }
 
+  public useBodyParser(
+    type: string | string[] | RegExp,
+    rawBody: boolean,
+    options?: NestFastifyBodyParserOptions,
+    parser?: FastifyBodyParser<Buffer, TServer>,
+  ) {
+    const parserOptions = {
+      ...(options || {}),
+      parseAs: 'buffer' as const,
+    };
+
+    this.getInstance().addContentTypeParser<Buffer>(
+      type,
+      parserOptions,
+      (
+        req: RawBodyRequest<FastifyRequest<unknown, TServer, TRawRequest>>,
+        body: Buffer,
+        done,
+      ) => {
+        if (rawBody === true && Buffer.isBuffer(body)) {
+          req.rawBody = body;
+        }
+
+        if (parser) {
+          parser(req, body, done);
+          return;
+        }
+
+        done(null, body);
+      },
+    );
+
+    // To avoid the Nest application init to override our custom
+    // body parser, we mark the parsers as registered.
+    this._isParserRegistered = true;
+  }
+
   public async createMiddlewareFactory(
     requestMethod: RequestMethod,
   ): Promise<(path: string, callback: Function) => any> {
@@ -510,20 +578,15 @@ export class FastifyAdapter<
   }
 
   private registerJsonContentParser(rawBody?: boolean) {
+    const contentType = 'application/json';
+    const withRawBody = !!rawBody;
     const { bodyLimit } = this.getInstance().initialConfig;
 
-    this.getInstance().addContentTypeParser<Buffer>(
-      'application/json',
-      { parseAs: 'buffer', bodyLimit },
-      (
-        req: RawBodyRequest<FastifyRequest<unknown, TServer, TRawRequest>>,
-        body: Buffer,
-        done,
-      ) => {
-        if (rawBody === true && Buffer.isBuffer(body)) {
-          req.rawBody = body;
-        }
-
+    this.useBodyParser(
+      contentType,
+      withRawBody,
+      { bodyLimit },
+      (req, body, done) => {
         const { onProtoPoisoning, onConstructorPoisoning } =
           this.instance.initialConfig;
         const defaultJsonParser = this.instance.getDefaultJsonParser(
@@ -536,20 +599,15 @@ export class FastifyAdapter<
   }
 
   private registerUrlencodedContentParser(rawBody?: boolean) {
+    const contentType = 'application/x-www-form-urlencoded';
+    const withRawBody = !!rawBody;
     const { bodyLimit } = this.getInstance().initialConfig;
 
-    this.getInstance().addContentTypeParser<Buffer>(
-      'application/x-www-form-urlencoded',
-      { parseAs: 'buffer', bodyLimit },
-      (
-        req: RawBodyRequest<FastifyRequest<unknown, TServer, TRawRequest>>,
-        body: Buffer,
-        done,
-      ) => {
-        if (rawBody === true && Buffer.isBuffer(body)) {
-          req.rawBody = body;
-        }
-
+    this.useBodyParser(
+      contentType,
+      withRawBody,
+      { bodyLimit },
+      (_req, body, done) => {
         done(null, querystringParse(body.toString()));
       },
     );
diff --git a/packages/platform-fastify/index.ts b/packages/platform-fastify/index.ts
index 2918a05af..6d28e2ccd 100644
--- a/packages/platform-fastify/index.ts
+++ b/packages/platform-fastify/index.ts
@@ -1,6 +1,6 @@
 /*
  * Nest @platform-fastify
- * Copyright(c) 2017 - 2022 Kamil Mysliwiec
+ * Copyright(c) 2017 - 2023 Kamil Mysliwiec
  * https://nestjs.com
  * MIT Licensed
  */
diff --git a/packages/platform-fastify/interfaces/external/fastify-static-options.interface.ts b/packages/platform-fastify/interfaces/external/fastify-static-options.interface.ts
index c8f155f51..8bd294c0f 100644
--- a/packages/platform-fastify/interfaces/external/fastify-static-options.interface.ts
+++ b/packages/platform-fastify/interfaces/external/fastify-static-options.interface.ts
@@ -1,6 +1,7 @@
 /**
  * "fastify-static" interfaces
  * @see https://github.com/fastify/fastify-static/blob/master/types/index.d.ts
+ * @publicApi
  */
 import { Stats } from 'fs';
 
diff --git a/packages/platform-fastify/interfaces/external/fastify-view-options.interface.ts b/packages/platform-fastify/interfaces/external/fastify-view-options.interface.ts
index 6de84627f..c6774c65d 100644
--- a/packages/platform-fastify/interfaces/external/fastify-view-options.interface.ts
+++ b/packages/platform-fastify/interfaces/external/fastify-view-options.interface.ts
@@ -1,6 +1,7 @@
 /**
  * "fastify/view" interfaces
  * @see https://github.com/fastify/point-of-view/blob/master/types/index.d.ts
+ * @publicApi
  */
 export interface FastifyViewOptions {
   engine: {
diff --git a/packages/platform-fastify/interfaces/index.ts b/packages/platform-fastify/interfaces/index.ts
index ee1841f2f..ae18b9a3c 100644
--- a/packages/platform-fastify/interfaces/index.ts
+++ b/packages/platform-fastify/interfaces/index.ts
@@ -1 +1,2 @@
 export * from './nest-fastify-application.interface';
+export * from './nest-fastify-body-parser-options.interface';
diff --git a/packages/platform-fastify/interfaces/nest-fastify-application.interface.ts b/packages/platform-fastify/interfaces/nest-fastify-application.interface.ts
index ec4ef9180..2214f30af 100644
--- a/packages/platform-fastify/interfaces/nest-fastify-application.interface.ts
+++ b/packages/platform-fastify/interfaces/nest-fastify-application.interface.ts
@@ -1,10 +1,12 @@
 import { INestApplication } from '@nestjs/common';
 import {
+  FastifyBodyParser,
   FastifyInstance,
   FastifyPluginAsync,
   FastifyPluginCallback,
   FastifyPluginOptions,
   FastifyRegisterOptions,
+  RawServerBase,
 } from 'fastify';
 import {
   Chain as LightMyRequestChain,
@@ -12,7 +14,11 @@ import {
   Response as LightMyRequestResponse,
 } from 'light-my-request';
 import { FastifyStaticOptions, FastifyViewOptions } from './external';
+import { NestFastifyBodyParserOptions } from './nest-fastify-body-parser-options.interface';
 
+/**
+ * @publicApi
+ */
 export interface NestFastifyApplication extends INestApplication {
   /**
    * A wrapper function around native `fastify.register()` method.
@@ -28,6 +34,27 @@ export interface NestFastifyApplication extends INestApplication {
     opts?: FastifyRegisterOptions<Options>,
   ): Promise<FastifyInstance>;
 
+  /**
+   * Register Fastify body parsers on the fly. Will respect
+   * the application's `rawBody` option.
+   *
+   * @example
+   * const app = await NestFactory.create<NestFastifyApplication>(
+   *   AppModule,
+   *   new FastifyAdapter(),
+   *   { rawBody: true }
+   * );
+   * // enable the json parser with a parser limit of 50mb
+   * app.useBodyParser('application/json', { bodyLimit: 50 * 1000 * 1024 });
+   *
+   * @returns {this}
+   */
+  useBodyParser<TServer extends RawServerBase = RawServerBase>(
+    type: string | string[] | RegExp,
+    options?: NestFastifyBodyParserOptions,
+    parser?: FastifyBodyParser<Buffer, TServer>,
+  ): this;
+
   /**
    * Sets a base directory for public assets.
    * Example `app.useStaticAssets({ root: 'public' })`
diff --git a/packages/platform-fastify/interfaces/nest-fastify-body-parser-options.interface.ts b/packages/platform-fastify/interfaces/nest-fastify-body-parser-options.interface.ts
new file mode 100644
index 000000000..9f7ecc054
--- /dev/null
+++ b/packages/platform-fastify/interfaces/nest-fastify-body-parser-options.interface.ts
@@ -0,0 +1,6 @@
+import type { AddContentTypeParser } from 'fastify';
+
+export type NestFastifyBodyParserOptions = Omit<
+  Parameters<AddContentTypeParser>[1],
+  'parseAs'
+>;
diff --git a/packages/platform-fastify/package.json b/packages/platform-fastify/package.json
index 24d74d3e5..70d1b00fe 100644
--- a/packages/platform-fastify/package.json
+++ b/packages/platform-fastify/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/platform-fastify",
-  "version": "9.3.0-beta.3",
+  "version": "9.3.2",
   "description": "Nest - modern, fast, powerful node.js web framework (@platform-fastify)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -23,7 +23,7 @@
     "fastify": "4.12.0",
     "light-my-request": "5.8.0",
     "path-to-regexp": "3.2.0",
-    "tslib": "2.4.1"
+    "tslib": "2.5.0"
   },
   "peerDependencies": {
     "@fastify/static": "^6.0.0",
diff --git a/packages/platform-socket.io/adapters/io-adapter.ts b/packages/platform-socket.io/adapters/io-adapter.ts
index 22eb9155c..d3c8d161d 100644
--- a/packages/platform-socket.io/adapters/io-adapter.ts
+++ b/packages/platform-socket.io/adapters/io-adapter.ts
@@ -8,6 +8,9 @@ import { fromEvent, Observable } from 'rxjs';
 import { filter, first, map, mergeMap, share, takeUntil } from 'rxjs/operators';
 import { Server, ServerOptions, Socket } from 'socket.io';
 
+/**
+ * @publicApi
+ */
 export class IoAdapter extends AbstractWsAdapter {
   public create(
     port: number,
diff --git a/packages/platform-socket.io/index.ts b/packages/platform-socket.io/index.ts
index 2805fc831..434d79eb4 100644
--- a/packages/platform-socket.io/index.ts
+++ b/packages/platform-socket.io/index.ts
@@ -1,6 +1,6 @@
 /*
  * Nest @platform-socket.io
- * Copyright(c) 2017 - 2022 Kamil Mysliwiec
+ * Copyright(c) 2017 - 2023 Kamil Mysliwiec
  * https://nestjs.com
  * MIT Licensed
  */
diff --git a/packages/platform-socket.io/package.json b/packages/platform-socket.io/package.json
index 0feacaa2f..cf1df7a46 100644
--- a/packages/platform-socket.io/package.json
+++ b/packages/platform-socket.io/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/platform-socket.io",
-  "version": "9.3.0-beta.3",
+  "version": "9.3.2",
   "description": "Nest - modern, fast, powerful node.js web framework (@platform-socket.io)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -18,7 +18,7 @@
   },
   "dependencies": {
     "socket.io": "4.5.4",
-    "tslib": "2.4.1"
+    "tslib": "2.5.0"
   },
   "peerDependencies": {
     "@nestjs/common": "^9.0.0",
diff --git a/packages/platform-ws/adapters/ws-adapter.ts b/packages/platform-ws/adapters/ws-adapter.ts
index 973bce7b9..bc67b82f8 100644
--- a/packages/platform-ws/adapters/ws-adapter.ts
+++ b/packages/platform-ws/adapters/ws-adapter.ts
@@ -27,6 +27,9 @@ type WsServerRegistryEntry = any[];
 
 const UNDERLYING_HTTP_SERVER_PORT = 0;
 
+/**
+ * @publicApi
+ */
 export class WsAdapter extends AbstractWsAdapter {
   protected readonly logger = new Logger(WsAdapter.name);
   protected readonly httpServersRegistry = new Map<
diff --git a/packages/platform-ws/index.ts b/packages/platform-ws/index.ts
index 0fb20dd10..e83223e11 100644
--- a/packages/platform-ws/index.ts
+++ b/packages/platform-ws/index.ts
@@ -1,6 +1,6 @@
 /*
  * Nest @platform-ws
- * Copyright(c) 2017 - 2022 Kamil Mysliwiec
+ * Copyright(c) 2017 - 2023 Kamil Mysliwiec
  * https://nestjs.com
  * MIT Licensed
  */
diff --git a/packages/platform-ws/package.json b/packages/platform-ws/package.json
index c080a01ed..1d5c81b2c 100644
--- a/packages/platform-ws/package.json
+++ b/packages/platform-ws/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/platform-ws",
-  "version": "9.3.0-beta.3",
+  "version": "9.3.2",
   "description": "Nest - modern, fast, powerful node.js web framework (@platform-ws)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -17,7 +17,7 @@
     "access": "public"
   },
   "dependencies": {
-    "tslib": "2.4.1",
+    "tslib": "2.5.0",
     "ws": "8.12.0"
   },
   "peerDependencies": {
diff --git a/packages/testing/index.ts b/packages/testing/index.ts
index 0a4a47f73..d760d09f7 100644
--- a/packages/testing/index.ts
+++ b/packages/testing/index.ts
@@ -1,6 +1,6 @@
 /*
  * Nest @testing
- * Copyright(c) 2017 - 2022 Kamil Mysliwiec
+ * Copyright(c) 2017 - 2023 Kamil Mysliwiec
  * https://nestjs.com
  * MIT Licensed
  */
diff --git a/packages/testing/package.json b/packages/testing/package.json
index bb37f37dd..f94b4170e 100644
--- a/packages/testing/package.json
+++ b/packages/testing/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/testing",
-  "version": "9.3.0-beta.3",
+  "version": "9.3.2",
   "description": "Nest - modern, fast, powerful node.js web framework (@testing)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -17,7 +17,7 @@
     "access": "public"
   },
   "dependencies": {
-    "tslib": "2.4.1"
+    "tslib": "2.5.0"
   },
   "peerDependencies": {
     "@nestjs/common": "^9.0.0",
diff --git a/packages/testing/testing-module.builder.ts b/packages/testing/testing-module.builder.ts
index 2aae8e356..75dd73c8b 100644
--- a/packages/testing/testing-module.builder.ts
+++ b/packages/testing/testing-module.builder.ts
@@ -1,10 +1,13 @@
-import { Logger, LoggerService, Module } from '@nestjs/common';
-import { ModuleMetadata } from '@nestjs/common/interfaces';
+import { Logger, LoggerService, Module, ModuleMetadata } from '@nestjs/common';
 import { NestApplicationContextOptions } from '@nestjs/common/interfaces/nest-application-context-options.interface';
 import { ApplicationConfig } from '@nestjs/core/application-config';
 import { NestContainer } from '@nestjs/core/injector/container';
 import { GraphInspector } from '@nestjs/core/inspector/graph-inspector';
 import { NoopGraphInspector } from '@nestjs/core/inspector/noop-graph-inspector';
+import {
+  UuidFactory,
+  UuidFactoryMode,
+} from '@nestjs/core/inspector/uuid-factory';
 import { MetadataScanner } from '@nestjs/core/metadata-scanner';
 import { DependenciesScanner } from '@nestjs/core/scanner';
 import {
@@ -68,9 +71,14 @@ export class TestingModuleBuilder {
   ): Promise<TestingModule> {
     this.applyLogger();
 
-    const graphInspector = options?.snapshot
-      ? new GraphInspector(this.container)
-      : NoopGraphInspector;
+    let graphInspector: GraphInspector;
+    if (options?.snapshot) {
+      graphInspector = new GraphInspector(this.container);
+      UuidFactory.mode = UuidFactoryMode.Deterministic;
+    } else {
+      graphInspector = NoopGraphInspector;
+      UuidFactory.mode = UuidFactoryMode.Random;
+    }
 
     const scanner = new DependenciesScanner(
       this.container,
@@ -81,17 +89,7 @@ export class TestingModuleBuilder {
     await scanner.scan(this.module);
 
     this.applyOverloadsMap();
-
-    const instanceLoader = new TestingInstanceLoader(
-      this.container,
-      this.injector,
-      graphInspector,
-    );
-    await instanceLoader.createInstancesOfDependencies(
-      this.container.getModules(),
-      this.mocker,
-    );
-
+    await this.createInstancesOfDependencies(graphInspector);
     scanner.applyApplicationProviders();
 
     const root = this.getRootModule();
@@ -136,6 +134,18 @@ export class TestingModuleBuilder {
     return modules.next().value;
   }
 
+  private async createInstancesOfDependencies(graphInspector: GraphInspector) {
+    const instanceLoader = new TestingInstanceLoader(
+      this.container,
+      this.injector,
+      graphInspector,
+    );
+    await instanceLoader.createInstancesOfDependencies(
+      this.container.getModules(),
+      this.mocker,
+    );
+  }
+
   private createModule(metadata: ModuleMetadata) {
     class RootTestModule {}
     Module(metadata)(RootTestModule);
diff --git a/packages/websockets/context/ws-context-creator.ts b/packages/websockets/context/ws-context-creator.ts
index 7d575ef46..3dca71f95 100644
--- a/packages/websockets/context/ws-context-creator.ts
+++ b/packages/websockets/context/ws-context-creator.ts
@@ -18,10 +18,11 @@ import {
 import { ExecutionContextHost } from '@nestjs/core/helpers/execution-context-host';
 import { HandlerMetadataStorage } from '@nestjs/core/helpers/handler-metadata-storage';
 import { ParamsMetadata } from '@nestjs/core/helpers/interfaces';
-import { InterceptorsConsumer } from '@nestjs/core/interceptors/interceptors-consumer';
-import { InterceptorsContextCreator } from '@nestjs/core/interceptors/interceptors-context-creator';
-import { PipesConsumer } from '@nestjs/core/pipes/pipes-consumer';
-import { PipesContextCreator } from '@nestjs/core/pipes/pipes-context-creator';
+import {
+  InterceptorsConsumer,
+  InterceptorsContextCreator,
+} from '@nestjs/core/interceptors';
+import { PipesConsumer, PipesContextCreator } from '@nestjs/core/pipes';
 import { PARAM_ARGS_METADATA } from '../constants';
 import { WsException } from '../errors/ws-exception';
 import { WsParamsFactory } from '../factories/ws-params-factory';
diff --git a/packages/websockets/gateway-metadata-explorer.ts b/packages/websockets/gateway-metadata-explorer.ts
index 853e44fd9..dc20cfbe3 100644
--- a/packages/websockets/gateway-metadata-explorer.ts
+++ b/packages/websockets/gateway-metadata-explorer.ts
@@ -19,9 +19,12 @@ export class GatewayMetadataExplorer {
 
   public explore(instance: NestGateway): MessageMappingProperties[] {
     const instancePrototype = Object.getPrototypeOf(instance);
-    return this.metadataScanner
-      .getAllMethodNames(instancePrototype)
-      .map(method => this.exploreMethodMetadata(instancePrototype, method));
+    return this.metadataScanner.scanFromPrototype<
+      NestGateway,
+      MessageMappingProperties
+    >(instance, instancePrototype, method =>
+      this.exploreMethodMetadata(instancePrototype, method),
+    );
   }
 
   public exploreMethodMetadata(
diff --git a/packages/websockets/index.ts b/packages/websockets/index.ts
index e8baa6f07..bccb398b5 100644
--- a/packages/websockets/index.ts
+++ b/packages/websockets/index.ts
@@ -1,6 +1,6 @@
 /*
  * Nest @websockets
- * Copyright(c) 2017 - 2022 Kamil Mysliwiec
+ * Copyright(c) 2017 - 2023 Kamil Mysliwiec
  * https://nestjs.com
  * MIT Licensed
  */
diff --git a/packages/websockets/package.json b/packages/websockets/package.json
index 76f3500df..6afa99f34 100644
--- a/packages/websockets/package.json
+++ b/packages/websockets/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/websockets",
-  "version": "9.3.0-beta.3",
+  "version": "9.3.2",
   "description": "Nest - modern, fast, powerful node.js web framework (@websockets)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -14,11 +14,11 @@
   "dependencies": {
     "iterare": "1.2.1",
     "object-hash": "3.0.0",
-    "tslib": "2.4.1"
+    "tslib": "2.5.0"
   },
   "devDependencies": {
-    "@nestjs/common": "^9.3.0-beta.3",
-    "@nestjs/core": "^9.3.0-beta.3"
+    "@nestjs/common": "9.3.2",
+    "@nestjs/core": "9.3.2"
   },
   "peerDependencies": {
     "@nestjs/common": "^9.0.0",
diff --git a/packages/websockets/test/gateway-metadata-explorer.spec.ts b/packages/websockets/test/gateway-metadata-explorer.spec.ts
index cfef62f0c..b495fea5f 100644
--- a/packages/websockets/test/gateway-metadata-explorer.spec.ts
+++ b/packages/websockets/test/gateway-metadata-explorer.spec.ts
@@ -38,15 +38,16 @@ describe('GatewayMetadataExplorer', () => {
     instance = new GatewayMetadataExplorer(scanner);
   });
   describe('explore', () => {
-    let getAllMethodNames: sinon.SinonSpy;
+    let scanFromPrototype: sinon.SinonSpy;
     beforeEach(() => {
-      getAllMethodNames = sinon.spy(scanner, 'getAllMethodNames');
+      scanFromPrototype = sinon.spy(scanner, 'scanFromPrototype');
     });
     it(`should call "scanFromPrototype" with expected arguments`, () => {
       const obj = new Test();
       instance.explore(obj as any);
 
-      const [argProto] = getAllMethodNames.getCall(0).args;
+      const [argObj, argProto] = scanFromPrototype.getCall(0).args;
+      expect(argObj).to.be.eql(obj);
       expect(argProto).to.be.eql(Object.getPrototypeOf(obj));
     });
   });
diff --git a/renovate.json b/renovate.json
index 0bb2d8556..26c1d72d6 100644
--- a/renovate.json
+++ b/renovate.json
@@ -1,5 +1,5 @@
 {
-  "extends": ["config:base"],
+  "extends": ["config:base", ":dependencyDashboard"],
   "labels": ["dependencies"],
   "packageRules": [
     {
diff --git a/sample/01-cats-app/package-lock.json b/sample/01-cats-app/package-lock.json
index 44f6a8084..3e84f0949 100644
Binary files a/sample/01-cats-app/package-lock.json and b/sample/01-cats-app/package-lock.json differ
diff --git a/sample/02-gateways/package-lock.json b/sample/02-gateways/package-lock.json
index d2f12c16d..9172d32e4 100644
Binary files a/sample/02-gateways/package-lock.json and b/sample/02-gateways/package-lock.json differ
diff --git a/sample/03-microservices/package-lock.json b/sample/03-microservices/package-lock.json
index 9fdf2d83c..3ca4f347a 100644
Binary files a/sample/03-microservices/package-lock.json and b/sample/03-microservices/package-lock.json differ
diff --git a/sample/04-grpc/package-lock.json b/sample/04-grpc/package-lock.json
index c6e245d22..e61065aad 100644
Binary files a/sample/04-grpc/package-lock.json and b/sample/04-grpc/package-lock.json differ
diff --git a/sample/31-graphql-federation-code-first/gateway/package-lock.json b/sample/31-graphql-federation-code-first/gateway/package-lock.json
index 5ed812916..4e7fc357d 100644
Binary files a/sample/31-graphql-federation-code-first/gateway/package-lock.json and b/sample/31-graphql-federation-code-first/gateway/package-lock.json differ
diff --git a/sample/31-graphql-federation-code-first/posts-application/package-lock.json b/sample/31-graphql-federation-code-first/posts-application/package-lock.json
index f571be7cd..2333dce1f 100644
Binary files a/sample/31-graphql-federation-code-first/posts-application/package-lock.json and b/sample/31-graphql-federation-code-first/posts-application/package-lock.json differ
diff --git a/sample/31-graphql-federation-code-first/users-application/package-lock.json b/sample/31-graphql-federation-code-first/users-application/package-lock.json
index 8897dac19..034d8ad18 100644
Binary files a/sample/31-graphql-federation-code-first/users-application/package-lock.json and b/sample/31-graphql-federation-code-first/users-application/package-lock.json differ
diff --git a/sample/32-graphql-federation-schema-first/gateway/package-lock.json b/sample/32-graphql-federation-schema-first/gateway/package-lock.json
index 5ed812916..4e7fc357d 100644
Binary files a/sample/32-graphql-federation-schema-first/gateway/package-lock.json and b/sample/32-graphql-federation-schema-first/gateway/package-lock.json differ
diff --git a/sample/32-graphql-federation-schema-first/posts-application/package-lock.json b/sample/32-graphql-federation-schema-first/posts-application/package-lock.json
index f571be7cd..2333dce1f 100644
Binary files a/sample/32-graphql-federation-schema-first/posts-application/package-lock.json and b/sample/32-graphql-federation-schema-first/posts-application/package-lock.json differ
diff --git a/sample/32-graphql-federation-schema-first/users-application/package-lock.json b/sample/32-graphql-federation-schema-first/users-application/package-lock.json
index 043873280..ebbeae26f 100644
Binary files a/sample/32-graphql-federation-schema-first/users-application/package-lock.json and b/sample/32-graphql-federation-schema-first/users-application/package-lock.json differ
