diff --git a/.travis.yml b/.travis.yml
index e6aa666..46897f4 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -15,14 +15,14 @@ script:
   - npm run test-cov
 
 env:
-  - NODE=6 TYPESCRIPT=typescript@1.6
-  - NODE=6 TYPESCRIPT=typescript@1.7
-  - NODE=6 TYPESCRIPT=typescript@1.8
-  - NODE=6 TYPESCRIPT=typescript@2.0
-  - NODE=6 TYPESCRIPT=typescript@2.1
+  - NODE=8 TYPESCRIPT=typescript@1.6
+  - NODE=8 TYPESCRIPT=typescript@1.7
+  - NODE=8 TYPESCRIPT=typescript@1.8
+  - NODE=8 TYPESCRIPT=typescript@2.0
+  - NODE=8 TYPESCRIPT=typescript@2.1
   - NODE=4 TYPESCRIPT=typescript@latest
-  - NODE=6 TYPESCRIPT=typescript@latest
-  - NODE=6 TYPESCRIPT=typescript@next
+  - NODE=8 TYPESCRIPT=typescript@latest
+  - NODE=8 TYPESCRIPT=typescript@next
 
 node_js:
   - stable
diff --git a/package.json b/package.json
index 1ac68e3..00698fa 100644
--- a/package.json
+++ b/package.json
@@ -14,7 +14,7 @@
     "LICENSE"
   ],
   "scripts": {
-    "lint": "tslint \"src/**/*.ts\"",
+    "lint": "tslint \"src/**/*.ts\" --project tsconfig.json --type-check",
     "clean": "rimraf dist",
     "tsc": "tsc",
     "build": "npm run clean && npm run tsc",
@@ -49,7 +49,7 @@
   },
   "homepage": "https://github.com/TypeStrong/ts-node",
   "devDependencies": {
-    "@types/react": "^15.0.38",
+    "@types/react": "^16.0.2",
     "chai": "^4.0.1",
     "istanbul": "^0.4.0",
     "mocha": "^3.0.0",
diff --git a/src/_bin.ts b/src/_bin.ts
index 7613fac..384c460 100644
--- a/src/_bin.ts
+++ b/src/_bin.ts
@@ -131,10 +131,10 @@ Options:
 }
 
 const cwd = process.cwd()
-const code = argv.eval == null ? argv.print : argv.eval
+const code = argv.eval === undefined ? argv.print : argv.eval
 const isEvalScript = typeof argv.eval === 'string' || !!argv.print // Minimist struggles with empty strings.
 const isEval = isEvalScript || stop === process.argv.length
-const isPrinted = argv.print != null
+const isPrinted = argv.print !== undefined
 
 // Register the TypeScript compiler instance.
 const service = register({
@@ -252,17 +252,18 @@ function _eval (input: string, context: any) {
     EVAL_INSTANCE.output = output
   }
 
-  let result: any
-
-  for (const change of changes) {
-    if (change.added) {
-      const script = new Script(change.value, EVAL_FILENAME)
+  return changes.reduce((result, change) => {
+    return change.added ? exec(change.value, EVAL_FILENAME, context) : result
+  }, undefined)
+}
 
-      result = script.runInNewContext(context)
-    }
-  }
+/**
+ * Execute some code.
+ */
+function exec (code: string, filename: string, context: any) {
+  const script = new Script(code, filename)
 
-  return result
+  return script.runInNewContext(context)
 }
 
 /**
@@ -277,12 +278,17 @@ function startRepl () {
     useGlobal: false
   })
 
-  // Hard fix for TypeScript forcing `Object.defineProperty(exports, ...)`.
-  appendEval('exports = module.exports\n')
-
   // Bookmark the point where we should reset the REPL state.
-  const reset = appendEval('')
+  const resetEval = appendEval('')
+
+  function reset () {
+    resetEval()
+
+    // Hard fix for TypeScript forcing `Object.defineProperty(exports, ...)`.
+    exec('exports = module.exports', EVAL_FILENAME, (repl as any).context)
+  }
 
+  reset()
   repl.on('reset', reset)
 
   repl.defineCommand('type', {
@@ -322,7 +328,7 @@ function replEval (code: string, context: any, _filename: string, callback: (err
   } catch (error) {
     if (error instanceof TSError) {
       // Support recoverable compilations using >= node 6.
-      if (typeof Recoverable === 'function' && isRecoverable(error)) {
+      if (Recoverable && isRecoverable(error)) {
         err = new Recoverable(error)
       } else {
         err = printError(error)
diff --git a/src/index.ts b/src/index.ts
index 9fee0b3..6848d36 100644
--- a/src/index.ts
+++ b/src/index.ts
@@ -123,6 +123,24 @@ export function normalizeSlashes (value: string): string {
   return value.replace(/\\/g, '/')
 }
 
+/**
+ * TypeScript diagnostics error.
+ */
+export class TSError extends BaseError {
+
+  name = 'TSError'
+
+  constructor (public diagnostics: TSDiagnostic[]) {
+    super(
+      `тип Unable to compile TypeScript\n${diagnostics.map(x => x.message).join('\n')}`
+    )
+  }
+
+}
+
+/**
+ * Return type for registering `ts-node`.
+ */
 export interface Register {
   cwd: string
   extensions: string[]
@@ -627,21 +645,6 @@ export function formatDiagnostic (
   return { message: `${messageText} (${code})`, code }
 }
 
-/**
- * TypeScript diagnostics error.
- */
-export class TSError extends BaseError {
-
-  name = 'TSError'
-
-  constructor (public diagnostics: TSDiagnostic[]) {
-    super(
-      `тип Unable to compile TypeScript\n${diagnostics.map(x => x.message).join('\n')}`
-    )
-  }
-
-}
-
 /**
  * Stringify the `TSError` instance.
  */
