diff --git a/package.json b/package.json
index b133c6d..9b666d3 100644
--- a/package.json
+++ b/package.json
@@ -49,11 +49,13 @@
   },
   "homepage": "https://github.com/TypeStrong/ts-node",
   "devDependencies": {
+    "@types/react": "^15.0.38",
     "chai": "^4.0.1",
     "istanbul": "^0.4.0",
     "mocha": "^3.0.0",
     "ntypescript": "^1.201507091536.1",
     "proxyquire": "^1.7.2",
+    "react": "^15.6.1",
     "rimraf": "^2.5.4",
     "semver": "^5.1.0",
     "tslint": "^5.0.0",
diff --git a/src/index.ts b/src/index.ts
index 708432b..bde082a 100644
--- a/src/index.ts
+++ b/src/index.ts
@@ -510,7 +510,7 @@ function updateOutput (outputText: string, fileName: string, sourceMap: string)
   const base64Map = new Buffer(updateSourceMap(sourceMap, fileName), 'utf8').toString('base64')
   const sourceMapContent = `data:application/json;charset=utf-8;base64,${base64Map}`
 
-  return outputText.slice(0, -1 * (basename(fileName).length + 4)) + sourceMapContent
+  return outputText.replace(/[^=]+$/, sourceMapContent)
 }
 
 /**
diff --git a/tsconfig.json b/tsconfig.json
index 61f78ac..e0126d8 100644
--- a/tsconfig.json
+++ b/tsconfig.json
@@ -12,7 +12,8 @@
     "noUnusedParameters": true,
     "moduleResolution": "node",
     "sourceMap": true,
-    "inlineSources": true
+    "inlineSources": true,
+    "types": []
   },
   "include": [
     "src/**/*",
