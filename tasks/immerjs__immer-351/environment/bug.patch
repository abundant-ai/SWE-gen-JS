diff --git a/__tests__/base.js b/__tests__/base.js
index 34ad5ac..4a45ee6 100644
--- a/__tests__/base.js
+++ b/__tests__/base.js
@@ -1,6 +1,6 @@
 "use strict"
 import {Immer, nothing, original, isDraft, immerable} from "../src/index"
-import {each, shallowCopy, isEnumerable, DRAFT_STATE} from "../src/common"
+import {each, shallowCopy, isEnumerable} from "../src/common"
 import deepFreeze from "deep-freeze"
 import cloneDeep from "lodash.clonedeep"
 import * as lodash from "lodash"
@@ -429,9 +429,7 @@ function runBaseTest(name, useProxies, autoFreeze, useListener) {
 
                 it("can assign by key", () => {
                     const nextState = produce(baseState, s => {
-                        // Map.prototype.set should return the Map itself
-                        const res = s.aMap.set("force", true)
-                        expect(res).toBe(s.aMap[DRAFT_STATE].draft)
+                        s.aMap.set("force", true)
                     })
                     expect(nextState).not.toBe(baseState)
                     expect(nextState.aMap).not.toBe(baseState.aMap)
diff --git a/__tests__/patch.js b/__tests__/patch.js
index 8bc0a69..e9bd686 100644
--- a/__tests__/patch.js
+++ b/__tests__/patch.js
@@ -140,23 +140,6 @@ describe("simple assignment - 5", () => {
     )
 })
 
-describe("simple assignment - 6", () => {
-    runPatchTest(
-        new Map([["x", 1]]),
-        d => {
-            // Map.prototype.set should return the Map itself
-            const res = d.set("x", 2)
-            res.set("y", 3)
-        },
-        [
-            {op: "replace", path: ["x"], value: 2},
-            {op: "add", path: ["y"], value: 3}
-        ],
-        [{op: "replace", path: ["x"], value: 1}, {op: "remove", path: ["y"]}],
-        true
-    )
-})
-
 describe("delete 1", () => {
     runPatchTest(
         {x: {y: 4}},
diff --git a/bili.config.ts b/bili.config.ts
index 81ac16c..8a362c6 100644
--- a/bili.config.ts
+++ b/bili.config.ts
@@ -15,6 +15,13 @@ const config: Config = {
         minimal: true,
         babelrc: false
     },
+    plugins: {
+        buble: {
+            transforms: {
+                generator: false
+            }
+        }
+    },
     extendConfig(config, {format}) {
         if (format === "umd") {
             config.output.minify = true
diff --git a/src/common.js b/src/common.js
index 34017c3..c6a9b92 100644
--- a/src/common.js
+++ b/src/common.js
@@ -109,8 +109,7 @@ export function each(value, cb) {
 }
 
 export function isEnumerable(base, prop) {
-    const desc = Object.getOwnPropertyDescriptor(base, prop)
-    return !!desc && desc.enumerable
+    return Object.getOwnPropertyDescriptor(base, prop).enumerable
 }
 
 export function has(thing, prop) {
diff --git a/src/proxy.js b/src/proxy.js
index b185851..311c8ce 100644
--- a/src/proxy.js
+++ b/src/proxy.js
@@ -185,7 +185,6 @@ const mapTraps = {
     }
 }
 const mapGetters = {
-    [DRAFT_STATE]: state => state,
     size: state => source(state).size,
     has(state, prop) {
         state = source(state)
@@ -194,8 +193,7 @@ const mapGetters = {
     set: state => (key, value) => {
         markChanged(state)
         state.assigned[key] = true
-        state.copy.set(key, value)
-        return state.draft
+        return state.copy.set(key, value)
     },
     delete: state => key => {
         markChanged(state)
