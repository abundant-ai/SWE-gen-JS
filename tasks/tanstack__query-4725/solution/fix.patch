diff --git a/examples/react/react-router/src/routes/contact.jsx b/examples/react/react-router/src/routes/contact.jsx
index d4ea274b5..a841699a6 100644
--- a/examples/react/react-router/src/routes/contact.jsx
+++ b/examples/react/react-router/src/routes/contact.jsx
@@ -22,7 +22,8 @@ export const loader =
   async ({ params }) => {
     const query = contactDetailQuery(params.contactId);
     return (
-      queryClient.getQueryData(query.queryKey) ?? (await queryClient.fetchQuery(query))
+      queryClient.getQueryData(query.queryKey) ??
+      (await queryClient.fetchQuery(query))
     );
   };
 
diff --git a/packages/eslint-plugin-query/src/rules/exhaustive-deps/exhaustive-deps.rule.ts b/packages/eslint-plugin-query/src/rules/exhaustive-deps/exhaustive-deps.rule.ts
index 70b511ed2..2942a7efc 100644
--- a/packages/eslint-plugin-query/src/rules/exhaustive-deps/exhaustive-deps.rule.ts
+++ b/packages/eslint-plugin-query/src/rules/exhaustive-deps/exhaustive-deps.rule.ts
@@ -81,11 +81,18 @@ export const rule = createRule({
           node: queryFn.value,
         })
 
+        const relevantRefs = refs.filter((ref) => {
+          return (
+            ref.identifier.name !== 'undefined' &&
+            ref.resolved?.defs.every((def) => def.type !== 'ClassName')
+          )
+        })
+
         const existingKeys = ASTUtils.getNestedIdentifiers(queryKeyValue).map(
           (identifier) => ASTUtils.mapKeyNodeToText(identifier, sourceCode),
         )
 
-        const missingRefs = refs
+        const missingRefs = relevantRefs
           .map((ref) => ({
             ref: ref,
             text: ASTUtils.mapKeyNodeToText(ref.identifier, sourceCode),
diff --git a/packages/eslint-plugin-query/src/utils/ast-utils.ts b/packages/eslint-plugin-query/src/utils/ast-utils.ts
index 6475604f8..deaaf0069 100644
--- a/packages/eslint-plugin-query/src/utils/ast-utils.ts
+++ b/packages/eslint-plugin-query/src/utils/ast-utils.ts
@@ -54,26 +54,32 @@ export const ASTUtils = {
       identifiers.push(node)
     }
 
-    if (node.type === AST_NODE_TYPES.ArrayExpression) {
+    if ('elements' in node) {
       node.elements.forEach((x) => {
-        identifiers.push(...ASTUtils.getNestedIdentifiers(x))
+        if (x !== null) {
+          identifiers.push(...ASTUtils.getNestedIdentifiers(x))
+        }
       })
     }
 
-    if (node.type === AST_NODE_TYPES.ObjectExpression) {
+    if ('properties' in node) {
       node.properties.forEach((x) => {
         identifiers.push(...ASTUtils.getNestedIdentifiers(x))
       })
     }
 
+    if ('expressions' in node) {
+      node.expressions.forEach((x) => {
+        identifiers.push(...ASTUtils.getNestedIdentifiers(x))
+      })
+    }
+
     if (node.type === AST_NODE_TYPES.Property) {
       identifiers.push(...ASTUtils.getNestedIdentifiers(node.value))
     }
 
-    if (node.type === AST_NODE_TYPES.TemplateLiteral) {
-      node.expressions.forEach((x) => {
-        identifiers.push(...ASTUtils.getNestedIdentifiers(x))
-      })
+    if (node.type === AST_NODE_TYPES.SpreadElement) {
+      identifiers.push(...ASTUtils.getNestedIdentifiers(node.argument))
     }
 
     if (node.type === AST_NODE_TYPES.MemberExpression) {
