diff --git a/.changeset/rude-keys-grab.md b/.changeset/rude-keys-grab.md
deleted file mode 100644
index 2af7865f06..0000000000
--- a/.changeset/rude-keys-grab.md
+++ /dev/null
@@ -1,5 +0,0 @@
----
-'xstate': patch
----
-
-[core]: bugfix restoring historyValue | feature reviveHistoryValue
diff --git a/.github/workflows/release.yml b/.github/workflows/release.yml
index 8567089cd8..994173a278 100644
--- a/.github/workflows/release.yml
+++ b/.github/workflows/release.yml
@@ -13,9 +13,10 @@ permissions: {}
 jobs:
   release:
     permissions:
-      contents: write #  to create release (changesets/action)
+      contents: write # to create release (changesets/action)
       issues: write # to post issue comments (changesets/action)
-      pull-requests: write #  to create pull request (changesets/action)
+      pull-requests: write # to create pull request (changesets/action)
+      id-token: write # to use OpenID Connect token for provenance (changesets/action)
 
     if: github.repository == 'statelyai/xstate'
 
@@ -36,3 +37,4 @@ jobs:
         env:
           GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
           NODE_AUTH_TOKEN: ${{ secrets.NPM_TOKEN }}
+          NPM_CONFIG_PROVENANCE: true
diff --git a/packages/core/src/State.ts b/packages/core/src/State.ts
index ba002fcc08..e75b394cc4 100644
--- a/packages/core/src/State.ts
+++ b/packages/core/src/State.ts
@@ -19,8 +19,7 @@ import type {
   MetaObject,
   StateSchema,
   StateId,
-  SnapshotStatus,
-  PersistedHistoryValue
+  SnapshotStatus
 } from './types.ts';
 import { matchesState } from './utils.ts';
 
@@ -398,25 +397,6 @@ export function cloneMachineSnapshot<TState extends AnyMachineSnapshot>(
   ) as TState;
 }
 
-function serializeHistoryValue<
-  TContext extends MachineContext,
-  TEvent extends EventObject
->(historyValue: HistoryValue<TContext, TEvent>): PersistedHistoryValue {
-  if (typeof historyValue !== 'object' || historyValue === null) {
-    return {};
-  }
-  const result: PersistedHistoryValue = {};
-
-  for (const key in historyValue) {
-    const value = historyValue[key];
-    if (Array.isArray(value)) {
-      result[key] = value.map((item) => ({ id: item.id }));
-    }
-  }
-
-  return result;
-}
-
 export function getPersistedSnapshot<
   TContext extends MachineContext,
   TEvent extends EventObject,
@@ -474,10 +454,7 @@ export function getPersistedSnapshot<
   const persisted = {
     ...jsonValues,
     context: persistContext(context) as any,
-    children: childrenJson,
-    historyValue: serializeHistoryValue<TContext, TEvent>(
-      jsonValues.historyValue
-    )
+    children: childrenJson
   };
 
   return persisted;
diff --git a/packages/core/src/StateMachine.ts b/packages/core/src/StateMachine.ts
index 1eec841468..171872c4fb 100644
--- a/packages/core/src/StateMachine.ts
+++ b/packages/core/src/StateMachine.ts
@@ -584,71 +584,13 @@ export class StateMachine<
       children[actorId] = actorRef;
     });
 
-    function resolveStateNodeFromIdOrPath(
-      idOrPath: string,
-      root: StateNode<TContext, TEvent>
-    ) {
-      try {
-        return root.machine.getStateNodeById(idOrPath);
-      } catch {
-        try {
-          return getStateNodeByPath(root, idOrPath.split('.'));
-        } catch {
-          if (isDevelopment) {
-            console.warn(
-              `Could not resolve StateNode for id/path: ${idOrPath}`
-            );
-          }
-          return idOrPath;
-        }
-      }
-    }
-
-    function reviveHistoryValue(
-      historyValue: HistoryValue<TContext, TEvent>,
-      root: StateNode<TContext, TEvent>
-    ): HistoryValue<TContext, TEvent> {
-      if (!historyValue || typeof historyValue !== 'object') return {};
-      const revived: HistoryValue<TContext, TEvent> = {};
-      for (const key in historyValue) {
-        const arr = historyValue[key];
-        revived[key] = arr
-          .map((item) => {
-            if (item instanceof StateNode) return item;
-            if (
-              typeof item === 'object' &&
-              'id' in item &&
-              typeof (item as any).id === 'string'
-            ) {
-              const resolved = resolveStateNodeFromIdOrPath(
-                (item as any).id,
-                root
-              );
-              if (resolved instanceof StateNode) return resolved;
-            }
-            return undefined;
-          })
-          .filter((item) => item !== undefined);
-        if (revived[key].length === 0) {
-          delete revived[key];
-        }
-      }
-      return revived;
-    }
-
-    const revivedHistoryValue = reviveHistoryValue(
-      (snapshot as any).historyValue,
-      this.root
-    );
-
     const restoredSnapshot = createMachineSnapshot(
       {
         ...(snapshot as any),
         children,
         _nodes: Array.from(
           getAllStateNodes(getStateNodes(this.root, (snapshot as any).value))
-        ),
-        historyValue: revivedHistoryValue
+        )
       },
       this
     ) as MachineSnapshot<
diff --git a/packages/core/src/types.ts b/packages/core/src/types.ts
index d89d0b425d..540a34b748 100644
--- a/packages/core/src/types.ts
+++ b/packages/core/src/types.ts
@@ -1447,8 +1447,6 @@ export type HistoryValue<
   TEvent extends EventObject
 > = Record<string, Array<StateNode<TContext, TEvent>>>;
 
-export type PersistedHistoryValue = Record<string, Array<{ id: string }>>;
-
 export type AnyHistoryValue = HistoryValue<any, any>;
 
 export type StateFrom<
diff --git a/packages/core/test/history.test.ts b/packages/core/test/history.test.ts
index eb33d10057..4a99b205d7 100644
--- a/packages/core/test/history.test.ts
+++ b/packages/core/test/history.test.ts
@@ -6,7 +6,6 @@ import {
   fromPromise
 } from '../src/index';
 import { trackEntries } from './utils';
-import { StateNode } from '../src/StateNode';
 
 describe('history states', () => {
   it('should go to the most recently visited state (explicit shallow history type)', () => {
@@ -1369,104 +1368,3 @@ describe('multistage history states', () => {
     });
   });
 });
-
-describe('revive history states', () => {
-  const machine = createMachine({
-    initial: 'on',
-    states: {
-      on: {
-        initial: 'first',
-        states: {
-          first: {
-            on: { SWITCH: 'second' }
-          },
-          second: {},
-          hist: {
-            type: 'history'
-          }
-        },
-        on: {
-          POWER: 'off'
-        }
-      },
-      off: {
-        on: { POWER: 'on.hist' }
-      }
-    }
-  });
-
-  const sourceRef = createActor(machine).start();
-
-  sourceRef.send({ type: 'SWITCH' });
-  sourceRef.send({ type: 'POWER' });
-
-  const persistedSnapshot = JSON.parse(
-    JSON.stringify(sourceRef.getPersistedSnapshot())
-  );
-  const snapshot = sourceRef.getSnapshot();
-
-  sourceRef.stop();
-
-  it('should restore from stringified snapshot', () => {
-    expect(persistedSnapshot.value).toBe('off');
-
-    const actorRef = createActor(machine, {
-      snapshot: persistedSnapshot
-    }).start();
-    actorRef.send({ type: 'POWER' });
-
-    expect(actorRef.getSnapshot().value).toEqual({ on: 'second' });
-  });
-
-  it('should ignore unresolved ids as-is and log a warning', () => {
-    const fakeSnapshot = {
-      ...persistedSnapshot,
-      historyValue: { ['(machine).on.hist']: [{ id: 'nonexistent' }] }
-    };
-    expect(fakeSnapshot.value).toBe('off');
-
-    const actorRef = createActor(machine, {
-      snapshot: fakeSnapshot
-    }).start();
-    actorRef.send({ type: 'POWER' });
-
-    expect(console.warn).toMatchMockCallsInlineSnapshot(`
-    [
-      [
-        "Could not resolve StateNode for id/path: nonexistent",
-      ],
-    ]
-    `);
-    expect(actorRef.getSnapshot().value).toEqual({ on: 'first' });
-    expect((actorRef.getPersistedSnapshot() as any).historyValue).toEqual({});
-  });
-
-  it('should not re-resolve already-instantiated StateNode', () => {
-    expect(snapshot.value).toBe('off');
-    expect(snapshot.historyValue['(machine).on.hist'][0]).toBeInstanceOf(
-      StateNode
-    );
-
-    const actorRef = createActor(machine, {
-      snapshot
-    }).start();
-    actorRef.send({ type: 'POWER' });
-
-    expect(actorRef.getSnapshot().value).toEqual({ on: 'second' });
-  });
-
-  it('should handle null, undefined, and primitive values', () => {
-    [null, undefined, 42, 'foo', true, false].forEach((val) => {
-      const fakeSnapshot = { ...persistedSnapshot, historyValue: val };
-      expect(fakeSnapshot.value).toBe('off');
-
-      const actorRef = createActor(machine, {
-        snapshot: fakeSnapshot
-      }).start();
-      actorRef.send({ type: 'POWER' });
-
-      expect(actorRef.getSnapshot().value).toEqual({ on: 'first' });
-      expect((actorRef.getPersistedSnapshot() as any).historyValue).toEqual({});
-    });
-  });
-});
