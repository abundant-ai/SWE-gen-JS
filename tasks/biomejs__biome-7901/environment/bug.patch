diff --git a/.changeset/proud-peaches-hide.md b/.changeset/proud-peaches-hide.md
deleted file mode 100644
index f0fe76f8e4..0000000000
--- a/.changeset/proud-peaches-hide.md
+++ /dev/null
@@ -1,5 +0,0 @@
----
-"@biomejs/biome": patch
----
-
-Fixed [#7837](https://github.com/biomejs/biome/issues/7837), where Biome couldn't properly parse text expressions that contained nested curly brackets. This was breaking parsing in Astro and Svelte files.
diff --git a/.changeset/wild-eels-send.md b/.changeset/wild-eels-send.md
deleted file mode 100644
index 979d79bd89..0000000000
--- a/.changeset/wild-eels-send.md
+++ /dev/null
@@ -1,5 +0,0 @@
----
-"@biomejs/biome": patch
----
-
-Fixed [#7837](https://github.com/biomejs/biome/issues/7837), where Biome Language Server panicked when opening HTML-ish files when the experimental full support is enabled.
diff --git a/crates/biome_html_parser/src/lexer/mod.rs b/crates/biome_html_parser/src/lexer/mod.rs
index a935e36bd7..4e4fdf116c 100644
--- a/crates/biome_html_parser/src/lexer/mod.rs
+++ b/crates/biome_html_parser/src/lexer/mod.rs
@@ -221,33 +221,22 @@ impl<'src> HtmlLexer<'src> {
         }
     }
 
-    fn consume_single_text_expression(&mut self) -> HtmlSyntaxKind {
-        let mut brackets_stack = 0;
-        if self.prev_byte() == Some(b'{') {
-            brackets_stack += 1;
-        }
-        while let Some(current) = self.current_byte() {
-            match current {
-                b'}' => {
-                    brackets_stack -= 1;
-                    if brackets_stack == 0 {
-                        break;
-                    } else {
-                        self.advance(1);
+    fn consume_single_text_expression(&mut self, current: u8) -> HtmlSyntaxKind {
+        match current {
+            b'}' if !self.at_closing_double_text_expression() => self.consume_byte(T!['}']),
+            b'<' => self.consume_byte(T![<]),
+            _ => {
+                while let Some(current) = self.current_byte() {
+                    match current {
+                        b'}' if !self.at_closing_double_text_expression() => break,
+                        _ => {
+                            self.advance(1);
+                        }
                     }
                 }
-                b'{' => {
-                    brackets_stack += 1;
-                    self.advance(1);
-                }
-
-                _ => {
-                    self.advance(1);
-                }
+                HTML_LITERAL
             }
         }
-
-        HTML_LITERAL
     }
 
     fn consume_comment(&mut self) -> HtmlSyntaxKind {
@@ -778,7 +767,7 @@ impl<'src> Lexer<'src> for HtmlLexer<'src> {
                     }
                     HtmlLexContext::TextExpression(kind) => match kind {
                         TextExpressionKind::Double => self.consume_double_text_expression(current),
-                        TextExpressionKind::Single => self.consume_single_text_expression(),
+                        TextExpressionKind::Single => self.consume_single_text_expression(current),
                     },
                     HtmlLexContext::CdataSection => self.consume_inside_cdata(current),
                     HtmlLexContext::AstroFencedCodeBlock => {
diff --git a/crates/biome_html_parser/src/syntax/mod.rs b/crates/biome_html_parser/src/syntax/mod.rs
index 87bfbd7d94..0a3654a825 100644
--- a/crates/biome_html_parser/src/syntax/mod.rs
+++ b/crates/biome_html_parser/src/syntax/mod.rs
@@ -570,7 +570,7 @@ impl TextExpression {
                         HtmlLexContext::TextExpression(self.kind),
                     );
                 } else {
-                    p.bump_remap_with_context(HTML_LITERAL, HtmlLexContext::InsideTag);
+                    p.bump_remap_any_with_context(HtmlLexContext::TextExpression(self.kind));
                 }
             }
             TextExpressionKind::Double => {
diff --git a/crates/biome_html_parser/tests/html_specs/error/astro/nested_expression.astro b/crates/biome_html_parser/tests/html_specs/error/astro/nested_expression.astro
deleted file mode 100644
index be94529150..0000000000
--- a/crates/biome_html_parser/tests/html_specs/error/astro/nested_expression.astro
+++ /dev/null
@@ -1,5 +0,0 @@
----
-const items = [1, 2, 3];
----
-
-{items.map(item => <div>{item}</div>)
diff --git a/crates/biome_html_parser/tests/html_specs/error/astro/nested_expression.astro.snap b/crates/biome_html_parser/tests/html_specs/error/astro/nested_expression.astro.snap
deleted file mode 100644
index 627f19356f..0000000000
--- a/crates/biome_html_parser/tests/html_specs/error/astro/nested_expression.astro.snap
+++ /dev/null
@@ -1,133 +0,0 @@
----
-source: crates/biome_html_parser/tests/spec_test.rs
-expression: snapshot
----
-## Input
-
-```astro
----
-const items = [1, 2, 3];
----
-
-{items.map(item => <div>{item}</div>)
-
-```
-
-
-## AST
-
-```
-HtmlRoot {
-    bom_token: missing (optional),
-    frontmatter: AstroFrontmatterElement {
-        l_fence_token: FENCE@0..3 "---" [] [],
-        content: AstroEmbeddedContent {
-            content_token: HTML_LITERAL@3..29 "const items = [1, 2, 3];\n" [Newline("\n")] [],
-        },
-        r_fence_token: FENCE@29..32 "---" [] [],
-    },
-    directive: missing (optional),
-    html: HtmlElementList [
-        HtmlBogusTextExpression {
-            items: [
-                L_CURLY@32..35 "{" [Newline("\n"), Newline("\n")] [],
-                HTML_LITERAL@35..53 "items.map(item =>" [] [Whitespace(" ")],
-            ],
-        },
-        HtmlElement {
-            opening_element: HtmlOpeningElement {
-                l_angle_token: L_ANGLE@53..54 "<" [] [],
-                name: HtmlTagName {
-                    value_token: HTML_LITERAL@54..57 "div" [] [],
-                },
-                attributes: HtmlAttributeList [],
-                r_angle_token: R_ANGLE@57..58 ">" [] [],
-            },
-            children: HtmlElementList [
-                HtmlSingleTextExpression {
-                    l_curly_token: L_CURLY@58..59 "{" [] [],
-                    expression: HtmlTextExpression {
-                        html_literal_token: HTML_LITERAL@59..63 "item" [] [],
-                    },
-                    r_curly_token: R_CURLY@63..64 "}" [] [],
-                },
-            ],
-            closing_element: HtmlClosingElement {
-                l_angle_token: L_ANGLE@64..65 "<" [] [],
-                slash_token: SLASH@65..66 "/" [] [],
-                name: HtmlTagName {
-                    value_token: HTML_LITERAL@66..69 "div" [] [],
-                },
-                r_angle_token: R_ANGLE@69..70 ">" [] [],
-            },
-        },
-        HtmlContent {
-            value_token: HTML_LITERAL@70..71 ")" [] [],
-        },
-    ],
-    eof_token: EOF@71..72 "" [Newline("\n")] [],
-}
-```
-
-## CST
-
-```
-0: HTML_ROOT@0..72
-  0: (empty)
-  1: ASTRO_FRONTMATTER_ELEMENT@0..32
-    0: FENCE@0..3 "---" [] []
-    1: ASTRO_EMBEDDED_CONTENT@3..29
-      0: HTML_LITERAL@3..29 "const items = [1, 2, 3];\n" [Newline("\n")] []
-    2: FENCE@29..32 "---" [] []
-  2: (empty)
-  3: HTML_ELEMENT_LIST@32..71
-    0: HTML_BOGUS_TEXT_EXPRESSION@32..53
-      0: L_CURLY@32..35 "{" [Newline("\n"), Newline("\n")] []
-      1: HTML_LITERAL@35..53 "items.map(item =>" [] [Whitespace(" ")]
-    1: HTML_ELEMENT@53..70
-      0: HTML_OPENING_ELEMENT@53..58
-        0: L_ANGLE@53..54 "<" [] []
-        1: HTML_TAG_NAME@54..57
-          0: HTML_LITERAL@54..57 "div" [] []
-        2: HTML_ATTRIBUTE_LIST@57..57
-        3: R_ANGLE@57..58 ">" [] []
-      1: HTML_ELEMENT_LIST@58..64
-        0: HTML_SINGLE_TEXT_EXPRESSION@58..64
-          0: L_CURLY@58..59 "{" [] []
-          1: HTML_TEXT_EXPRESSION@59..63
-            0: HTML_LITERAL@59..63 "item" [] []
-          2: R_CURLY@63..64 "}" [] []
-      2: HTML_CLOSING_ELEMENT@64..70
-        0: L_ANGLE@64..65 "<" [] []
-        1: SLASH@65..66 "/" [] []
-        2: HTML_TAG_NAME@66..69
-          0: HTML_LITERAL@66..69 "div" [] []
-        3: R_ANGLE@69..70 ">" [] []
-    2: HTML_CONTENT@70..71
-      0: HTML_LITERAL@70..71 ")" [] []
-  4: EOF@71..72 "" [Newline("\n")] []
-
-```
-
-## Diagnostics
-
-```
-nested_expression.astro:5:1 parse ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
-
-  × Found a text expression that doesn't have the closing expression:
-  
-    3 │ ---
-    4 │ 
-  > 5 │ {items.map(item => <div>{item}</div>)
-      │ ^^^^^^^^^^^^^^^^^^
-    6 │ 
-  
-  i This is where the opening expression was found:
-  
-    3 │ ---
-    4 │ 
-  > 5 │ {items.map(item => <div>{item}</div>)
-      │ ^
-    6 │ 
-  
-```
diff --git a/crates/biome_html_parser/tests/html_specs/ok/astro/issue_7837.astro b/crates/biome_html_parser/tests/html_specs/ok/astro/issue_7837.astro
deleted file mode 100644
index fb78ec3639..0000000000
--- a/crates/biome_html_parser/tests/html_specs/ok/astro/issue_7837.astro
+++ /dev/null
@@ -1,16 +0,0 @@
----
-import { Counter } from '@/components/counter'
-import PageLayout from '@/components/page-layout.astro'
-
-// Welcome to Astro! Wondering what to do next? Check out the Astro documentation at https://docs.astro.build
-// Don't want to use any of this? Delete everything in this file, the `assets`, `components`, and `layouts` directories, and start fresh.
----
-<PageLayout>
-	<main class="flex h-screen w-screen flex-col items-center justify-center">
-		<Counter client:load>
-
-
-			<span>--</span>
-		</Counter>
-	</main>
-</PageLayout>
diff --git a/crates/biome_html_parser/tests/html_specs/ok/astro/issue_7837.astro.snap b/crates/biome_html_parser/tests/html_specs/ok/astro/issue_7837.astro.snap
deleted file mode 100644
index 74aed48e77..0000000000
--- a/crates/biome_html_parser/tests/html_specs/ok/astro/issue_7837.astro.snap
+++ /dev/null
@@ -1,232 +0,0 @@
----
-source: crates/biome_html_parser/tests/spec_test.rs
-expression: snapshot
----
-## Input
-
-```astro
----
-import { Counter } from '@/components/counter'
-import PageLayout from '@/components/page-layout.astro'
-
-// Welcome to Astro! Wondering what to do next? Check out the Astro documentation at https://docs.astro.build
-// Don't want to use any of this? Delete everything in this file, the `assets`, `components`, and `layouts` directories, and start fresh.
----
-<PageLayout>
-	<main class="flex h-screen w-screen flex-col items-center justify-center">
-		<Counter client:load>
-
-
-			<span>--</span>
-		</Counter>
-	</main>
-</PageLayout>
-
-```
-
-
-## AST
-
-```
-HtmlRoot {
-    bom_token: missing (optional),
-    frontmatter: AstroFrontmatterElement {
-        l_fence_token: FENCE@0..3 "---" [] [],
-        content: AstroEmbeddedContent {
-            content_token: HTML_LITERAL@3..356 "import { Counter } from '@/components/counter'\nimport PageLayout from '@/components/page-layout.astro'\n\n// Welcome to Astro! Wondering what to do next? Check out the Astro documentation at https://docs.astro.build\n// Don't want to use any of this? Delete everything in this file, the `assets`, `components`, and `layouts` directories, and start fresh.\n" [Newline("\n")] [],
-        },
-        r_fence_token: FENCE@356..359 "---" [] [],
-    },
-    directive: missing (optional),
-    html: HtmlElementList [
-        HtmlElement {
-            opening_element: HtmlOpeningElement {
-                l_angle_token: L_ANGLE@359..361 "<" [Newline("\n")] [],
-                name: HtmlTagName {
-                    value_token: HTML_LITERAL@361..371 "PageLayout" [] [],
-                },
-                attributes: HtmlAttributeList [],
-                r_angle_token: R_ANGLE@371..372 ">" [] [],
-            },
-            children: HtmlElementList [
-                HtmlElement {
-                    opening_element: HtmlOpeningElement {
-                        l_angle_token: L_ANGLE@372..375 "<" [Newline("\n"), Whitespace("\t")] [],
-                        name: HtmlTagName {
-                            value_token: HTML_LITERAL@375..380 "main" [] [Whitespace(" ")],
-                        },
-                        attributes: HtmlAttributeList [
-                            HtmlAttribute {
-                                name: HtmlAttributeName {
-                                    value_token: HTML_LITERAL@380..385 "class" [] [],
-                                },
-                                initializer: HtmlAttributeInitializerClause {
-                                    eq_token: EQ@385..386 "=" [] [],
-                                    value: HtmlString {
-                                        value_token: HTML_STRING_LITERAL@386..447 "\"flex h-screen w-screen flex-col items-center justify-center\"" [] [],
-                                    },
-                                },
-                            },
-                        ],
-                        r_angle_token: R_ANGLE@447..448 ">" [] [],
-                    },
-                    children: HtmlElementList [
-                        HtmlElement {
-                            opening_element: HtmlOpeningElement {
-                                l_angle_token: L_ANGLE@448..452 "<" [Newline("\n"), Whitespace("\t\t")] [],
-                                name: HtmlTagName {
-                                    value_token: HTML_LITERAL@452..460 "Counter" [] [Whitespace(" ")],
-                                },
-                                attributes: HtmlAttributeList [
-                                    HtmlAttribute {
-                                        name: HtmlAttributeName {
-                                            value_token: HTML_LITERAL@460..471 "client:load" [] [],
-                                        },
-                                        initializer: missing (optional),
-                                    },
-                                ],
-                                r_angle_token: R_ANGLE@471..472 ">" [] [],
-                            },
-                            children: HtmlElementList [
-                                HtmlElement {
-                                    opening_element: HtmlOpeningElement {
-                                        l_angle_token: L_ANGLE@472..479 "<" [Newline("\n"), Newline("\n"), Newline("\n"), Whitespace("\t\t\t")] [],
-                                        name: HtmlTagName {
-                                            value_token: HTML_LITERAL@479..483 "span" [] [],
-                                        },
-                                        attributes: HtmlAttributeList [],
-                                        r_angle_token: R_ANGLE@483..484 ">" [] [],
-                                    },
-                                    children: HtmlElementList [
-                                        HtmlContent {
-                                            value_token: HTML_LITERAL@484..486 "--" [] [],
-                                        },
-                                    ],
-                                    closing_element: HtmlClosingElement {
-                                        l_angle_token: L_ANGLE@486..487 "<" [] [],
-                                        slash_token: SLASH@487..488 "/" [] [],
-                                        name: HtmlTagName {
-                                            value_token: HTML_LITERAL@488..492 "span" [] [],
-                                        },
-                                        r_angle_token: R_ANGLE@492..493 ">" [] [],
-                                    },
-                                },
-                            ],
-                            closing_element: HtmlClosingElement {
-                                l_angle_token: L_ANGLE@493..497 "<" [Newline("\n"), Whitespace("\t\t")] [],
-                                slash_token: SLASH@497..498 "/" [] [],
-                                name: HtmlTagName {
-                                    value_token: HTML_LITERAL@498..505 "Counter" [] [],
-                                },
-                                r_angle_token: R_ANGLE@505..506 ">" [] [],
-                            },
-                        },
-                    ],
-                    closing_element: HtmlClosingElement {
-                        l_angle_token: L_ANGLE@506..509 "<" [Newline("\n"), Whitespace("\t")] [],
-                        slash_token: SLASH@509..510 "/" [] [],
-                        name: HtmlTagName {
-                            value_token: HTML_LITERAL@510..514 "main" [] [],
-                        },
-                        r_angle_token: R_ANGLE@514..515 ">" [] [],
-                    },
-                },
-            ],
-            closing_element: HtmlClosingElement {
-                l_angle_token: L_ANGLE@515..517 "<" [Newline("\n")] [],
-                slash_token: SLASH@517..518 "/" [] [],
-                name: HtmlTagName {
-                    value_token: HTML_LITERAL@518..528 "PageLayout" [] [],
-                },
-                r_angle_token: R_ANGLE@528..529 ">" [] [],
-            },
-        },
-    ],
-    eof_token: EOF@529..530 "" [Newline("\n")] [],
-}
-```
-
-## CST
-
-```
-0: HTML_ROOT@0..530
-  0: (empty)
-  1: ASTRO_FRONTMATTER_ELEMENT@0..359
-    0: FENCE@0..3 "---" [] []
-    1: ASTRO_EMBEDDED_CONTENT@3..356
-      0: HTML_LITERAL@3..356 "import { Counter } from '@/components/counter'\nimport PageLayout from '@/components/page-layout.astro'\n\n// Welcome to Astro! Wondering what to do next? Check out the Astro documentation at https://docs.astro.build\n// Don't want to use any of this? Delete everything in this file, the `assets`, `components`, and `layouts` directories, and start fresh.\n" [Newline("\n")] []
-    2: FENCE@356..359 "---" [] []
-  2: (empty)
-  3: HTML_ELEMENT_LIST@359..529
-    0: HTML_ELEMENT@359..529
-      0: HTML_OPENING_ELEMENT@359..372
-        0: L_ANGLE@359..361 "<" [Newline("\n")] []
-        1: HTML_TAG_NAME@361..371
-          0: HTML_LITERAL@361..371 "PageLayout" [] []
-        2: HTML_ATTRIBUTE_LIST@371..371
-        3: R_ANGLE@371..372 ">" [] []
-      1: HTML_ELEMENT_LIST@372..515
-        0: HTML_ELEMENT@372..515
-          0: HTML_OPENING_ELEMENT@372..448
-            0: L_ANGLE@372..375 "<" [Newline("\n"), Whitespace("\t")] []
-            1: HTML_TAG_NAME@375..380
-              0: HTML_LITERAL@375..380 "main" [] [Whitespace(" ")]
-            2: HTML_ATTRIBUTE_LIST@380..447
-              0: HTML_ATTRIBUTE@380..447
-                0: HTML_ATTRIBUTE_NAME@380..385
-                  0: HTML_LITERAL@380..385 "class" [] []
-                1: HTML_ATTRIBUTE_INITIALIZER_CLAUSE@385..447
-                  0: EQ@385..386 "=" [] []
-                  1: HTML_STRING@386..447
-                    0: HTML_STRING_LITERAL@386..447 "\"flex h-screen w-screen flex-col items-center justify-center\"" [] []
-            3: R_ANGLE@447..448 ">" [] []
-          1: HTML_ELEMENT_LIST@448..506
-            0: HTML_ELEMENT@448..506
-              0: HTML_OPENING_ELEMENT@448..472
-                0: L_ANGLE@448..452 "<" [Newline("\n"), Whitespace("\t\t")] []
-                1: HTML_TAG_NAME@452..460
-                  0: HTML_LITERAL@452..460 "Counter" [] [Whitespace(" ")]
-                2: HTML_ATTRIBUTE_LIST@460..471
-                  0: HTML_ATTRIBUTE@460..471
-                    0: HTML_ATTRIBUTE_NAME@460..471
-                      0: HTML_LITERAL@460..471 "client:load" [] []
-                    1: (empty)
-                3: R_ANGLE@471..472 ">" [] []
-              1: HTML_ELEMENT_LIST@472..493
-                0: HTML_ELEMENT@472..493
-                  0: HTML_OPENING_ELEMENT@472..484
-                    0: L_ANGLE@472..479 "<" [Newline("\n"), Newline("\n"), Newline("\n"), Whitespace("\t\t\t")] []
-                    1: HTML_TAG_NAME@479..483
-                      0: HTML_LITERAL@479..483 "span" [] []
-                    2: HTML_ATTRIBUTE_LIST@483..483
-                    3: R_ANGLE@483..484 ">" [] []
-                  1: HTML_ELEMENT_LIST@484..486
-                    0: HTML_CONTENT@484..486
-                      0: HTML_LITERAL@484..486 "--" [] []
-                  2: HTML_CLOSING_ELEMENT@486..493
-                    0: L_ANGLE@486..487 "<" [] []
-                    1: SLASH@487..488 "/" [] []
-                    2: HTML_TAG_NAME@488..492
-                      0: HTML_LITERAL@488..492 "span" [] []
-                    3: R_ANGLE@492..493 ">" [] []
-              2: HTML_CLOSING_ELEMENT@493..506
-                0: L_ANGLE@493..497 "<" [Newline("\n"), Whitespace("\t\t")] []
-                1: SLASH@497..498 "/" [] []
-                2: HTML_TAG_NAME@498..505
-                  0: HTML_LITERAL@498..505 "Counter" [] []
-                3: R_ANGLE@505..506 ">" [] []
-          2: HTML_CLOSING_ELEMENT@506..515
-            0: L_ANGLE@506..509 "<" [Newline("\n"), Whitespace("\t")] []
-            1: SLASH@509..510 "/" [] []
-            2: HTML_TAG_NAME@510..514
-              0: HTML_LITERAL@510..514 "main" [] []
-            3: R_ANGLE@514..515 ">" [] []
-      2: HTML_CLOSING_ELEMENT@515..529
-        0: L_ANGLE@515..517 "<" [Newline("\n")] []
-        1: SLASH@517..518 "/" [] []
-        2: HTML_TAG_NAME@518..528
-          0: HTML_LITERAL@518..528 "PageLayout" [] []
-        3: R_ANGLE@528..529 ">" [] []
-  4: EOF@529..530 "" [Newline("\n")] []
-
-```
diff --git a/crates/biome_html_parser/tests/html_specs/ok/astro/multiple_nested_expression.astro b/crates/biome_html_parser/tests/html_specs/ok/astro/multiple_nested_expression.astro
deleted file mode 100644
index 653a35f643..0000000000
--- a/crates/biome_html_parser/tests/html_specs/ok/astro/multiple_nested_expression.astro
+++ /dev/null
@@ -1,17 +0,0 @@
----
-import { Counter } from '@/components/counter'
-
-const show = false
----
-<div>
-	<!-- expect -->
-	<span />
-	<Counter />
-
-	<!-- errors -->
-	<!-- 1. if brace in brace, got unexpect format -->
-	{show &&<Counter value={show} onAbort={()=>{}}onClick={()=>{}}
-									 className="flex"/>}
-	<!-- 2. not format -->
-	{show&& <span/>}
-</div>
diff --git a/crates/biome_html_parser/tests/html_specs/ok/astro/multiple_nested_expression.astro.snap b/crates/biome_html_parser/tests/html_specs/ok/astro/multiple_nested_expression.astro.snap
deleted file mode 100644
index ec16733e7e..0000000000
--- a/crates/biome_html_parser/tests/html_specs/ok/astro/multiple_nested_expression.astro.snap
+++ /dev/null
@@ -1,152 +0,0 @@
----
-source: crates/biome_html_parser/tests/spec_test.rs
-expression: snapshot
----
-## Input
-
-```astro
----
-import { Counter } from '@/components/counter'
-
-const show = false
----
-<div>
-	<!-- expect -->
-	<span />
-	<Counter />
-
-	<!-- errors -->
-	<!-- 1. if brace in brace, got unexpect format -->
-	{show &&<Counter value={show} onAbort={()=>{}}onClick={()=>{}}
-									 className="flex"/>}
-	<!-- 2. not format -->
-	{show&& <span/>}
-</div>
-
-```
-
-
-## AST
-
-```
-HtmlRoot {
-    bom_token: missing (optional),
-    frontmatter: AstroFrontmatterElement {
-        l_fence_token: FENCE@0..3 "---" [] [],
-        content: AstroEmbeddedContent {
-            content_token: HTML_LITERAL@3..71 "import { Counter } from '@/components/counter'\n\nconst show = false\n" [Newline("\n")] [],
-        },
-        r_fence_token: FENCE@71..74 "---" [] [],
-    },
-    directive: missing (optional),
-    html: HtmlElementList [
-        HtmlElement {
-            opening_element: HtmlOpeningElement {
-                l_angle_token: L_ANGLE@74..76 "<" [Newline("\n")] [],
-                name: HtmlTagName {
-                    value_token: HTML_LITERAL@76..79 "div" [] [],
-                },
-                attributes: HtmlAttributeList [],
-                r_angle_token: R_ANGLE@79..80 ">" [] [],
-            },
-            children: HtmlElementList [
-                HtmlSelfClosingElement {
-                    l_angle_token: L_ANGLE@80..100 "<" [Newline("\n"), Whitespace("\t"), Comments("<!-- expect -->"), Newline("\n"), Whitespace("\t")] [],
-                    name: HtmlTagName {
-                        value_token: HTML_LITERAL@100..105 "span" [] [Whitespace(" ")],
-                    },
-                    attributes: HtmlAttributeList [],
-                    slash_token: SLASH@105..106 "/" [] [],
-                    r_angle_token: R_ANGLE@106..107 ">" [] [],
-                },
-                HtmlSelfClosingElement {
-                    l_angle_token: L_ANGLE@107..110 "<" [Newline("\n"), Whitespace("\t")] [],
-                    name: HtmlTagName {
-                        value_token: HTML_LITERAL@110..118 "Counter" [] [Whitespace(" ")],
-                    },
-                    attributes: HtmlAttributeList [],
-                    slash_token: SLASH@118..119 "/" [] [],
-                    r_angle_token: R_ANGLE@119..120 ">" [] [],
-                },
-                HtmlSingleTextExpression {
-                    l_curly_token: L_CURLY@120..193 "{" [Newline("\n"), Newline("\n"), Whitespace("\t"), Comments("<!-- errors -->"), Newline("\n"), Whitespace("\t"), Comments("<!-- 1. if brace in b ..."), Newline("\n"), Whitespace("\t")] [],
-                    expression: HtmlTextExpression {
-                        html_literal_token: HTML_LITERAL@193..283 "show &&<Counter value={show} onAbort={()=>{}}onClick={()=>{}}\n\t\t\t\t\t\t\t\t\t className=\"flex\"/>" [] [],
-                    },
-                    r_curly_token: R_CURLY@283..284 "}" [] [],
-                },
-                HtmlSingleTextExpression {
-                    l_curly_token: L_CURLY@284..311 "{" [Newline("\n"), Whitespace("\t"), Comments("<!-- 2. not format -->"), Newline("\n"), Whitespace("\t")] [],
-                    expression: HtmlTextExpression {
-                        html_literal_token: HTML_LITERAL@311..325 "show&& <span/>" [] [],
-                    },
-                    r_curly_token: R_CURLY@325..326 "}" [] [],
-                },
-            ],
-            closing_element: HtmlClosingElement {
-                l_angle_token: L_ANGLE@326..328 "<" [Newline("\n")] [],
-                slash_token: SLASH@328..329 "/" [] [],
-                name: HtmlTagName {
-                    value_token: HTML_LITERAL@329..332 "div" [] [],
-                },
-                r_angle_token: R_ANGLE@332..333 ">" [] [],
-            },
-        },
-    ],
-    eof_token: EOF@333..334 "" [Newline("\n")] [],
-}
-```
-
-## CST
-
-```
-0: HTML_ROOT@0..334
-  0: (empty)
-  1: ASTRO_FRONTMATTER_ELEMENT@0..74
-    0: FENCE@0..3 "---" [] []
-    1: ASTRO_EMBEDDED_CONTENT@3..71
-      0: HTML_LITERAL@3..71 "import { Counter } from '@/components/counter'\n\nconst show = false\n" [Newline("\n")] []
-    2: FENCE@71..74 "---" [] []
-  2: (empty)
-  3: HTML_ELEMENT_LIST@74..333
-    0: HTML_ELEMENT@74..333
-      0: HTML_OPENING_ELEMENT@74..80
-        0: L_ANGLE@74..76 "<" [Newline("\n")] []
-        1: HTML_TAG_NAME@76..79
-          0: HTML_LITERAL@76..79 "div" [] []
-        2: HTML_ATTRIBUTE_LIST@79..79
-        3: R_ANGLE@79..80 ">" [] []
-      1: HTML_ELEMENT_LIST@80..326
-        0: HTML_SELF_CLOSING_ELEMENT@80..107
-          0: L_ANGLE@80..100 "<" [Newline("\n"), Whitespace("\t"), Comments("<!-- expect -->"), Newline("\n"), Whitespace("\t")] []
-          1: HTML_TAG_NAME@100..105
-            0: HTML_LITERAL@100..105 "span" [] [Whitespace(" ")]
-          2: HTML_ATTRIBUTE_LIST@105..105
-          3: SLASH@105..106 "/" [] []
-          4: R_ANGLE@106..107 ">" [] []
-        1: HTML_SELF_CLOSING_ELEMENT@107..120
-          0: L_ANGLE@107..110 "<" [Newline("\n"), Whitespace("\t")] []
-          1: HTML_TAG_NAME@110..118
-            0: HTML_LITERAL@110..118 "Counter" [] [Whitespace(" ")]
-          2: HTML_ATTRIBUTE_LIST@118..118
-          3: SLASH@118..119 "/" [] []
-          4: R_ANGLE@119..120 ">" [] []
-        2: HTML_SINGLE_TEXT_EXPRESSION@120..284
-          0: L_CURLY@120..193 "{" [Newline("\n"), Newline("\n"), Whitespace("\t"), Comments("<!-- errors -->"), Newline("\n"), Whitespace("\t"), Comments("<!-- 1. if brace in b ..."), Newline("\n"), Whitespace("\t")] []
-          1: HTML_TEXT_EXPRESSION@193..283
-            0: HTML_LITERAL@193..283 "show &&<Counter value={show} onAbort={()=>{}}onClick={()=>{}}\n\t\t\t\t\t\t\t\t\t className=\"flex\"/>" [] []
-          2: R_CURLY@283..284 "}" [] []
-        3: HTML_SINGLE_TEXT_EXPRESSION@284..326
-          0: L_CURLY@284..311 "{" [Newline("\n"), Whitespace("\t"), Comments("<!-- 2. not format -->"), Newline("\n"), Whitespace("\t")] []
-          1: HTML_TEXT_EXPRESSION@311..325
-            0: HTML_LITERAL@311..325 "show&& <span/>" [] []
-          2: R_CURLY@325..326 "}" [] []
-      2: HTML_CLOSING_ELEMENT@326..333
-        0: L_ANGLE@326..328 "<" [Newline("\n")] []
-        1: SLASH@328..329 "/" [] []
-        2: HTML_TAG_NAME@329..332
-          0: HTML_LITERAL@329..332 "div" [] []
-        3: R_ANGLE@332..333 ">" [] []
-  4: EOF@333..334 "" [Newline("\n")] []
-
-```
diff --git a/crates/biome_html_parser/tests/html_specs/ok/astro/nested_expression.astro b/crates/biome_html_parser/tests/html_specs/ok/astro/nested_expression.astro
deleted file mode 100644
index 0ffb3745cd..0000000000
--- a/crates/biome_html_parser/tests/html_specs/ok/astro/nested_expression.astro
+++ /dev/null
@@ -1,5 +0,0 @@
----
-const items = [1, 2, 3];
----
-
-{items.map(item => <div>{item}</div>)}
diff --git a/crates/biome_html_parser/tests/html_specs/ok/astro/nested_expression.astro.snap b/crates/biome_html_parser/tests/html_specs/ok/astro/nested_expression.astro.snap
deleted file mode 100644
index ce3e1ef036..0000000000
--- a/crates/biome_html_parser/tests/html_specs/ok/astro/nested_expression.astro.snap
+++ /dev/null
@@ -1,62 +0,0 @@
----
-source: crates/biome_html_parser/tests/spec_test.rs
-expression: snapshot
----
-## Input
-
-```astro
----
-const items = [1, 2, 3];
----
-
-{items.map(item => <div>{item}</div>)}
-
-```
-
-
-## AST
-
-```
-HtmlRoot {
-    bom_token: missing (optional),
-    frontmatter: AstroFrontmatterElement {
-        l_fence_token: FENCE@0..3 "---" [] [],
-        content: AstroEmbeddedContent {
-            content_token: HTML_LITERAL@3..29 "const items = [1, 2, 3];\n" [Newline("\n")] [],
-        },
-        r_fence_token: FENCE@29..32 "---" [] [],
-    },
-    directive: missing (optional),
-    html: HtmlElementList [
-        HtmlSingleTextExpression {
-            l_curly_token: L_CURLY@32..35 "{" [Newline("\n"), Newline("\n")] [],
-            expression: HtmlTextExpression {
-                html_literal_token: HTML_LITERAL@35..71 "items.map(item => <div>{item}</div>)" [] [],
-            },
-            r_curly_token: R_CURLY@71..72 "}" [] [],
-        },
-    ],
-    eof_token: EOF@72..73 "" [Newline("\n")] [],
-}
-```
-
-## CST
-
-```
-0: HTML_ROOT@0..73
-  0: (empty)
-  1: ASTRO_FRONTMATTER_ELEMENT@0..32
-    0: FENCE@0..3 "---" [] []
-    1: ASTRO_EMBEDDED_CONTENT@3..29
-      0: HTML_LITERAL@3..29 "const items = [1, 2, 3];\n" [Newline("\n")] []
-    2: FENCE@29..32 "---" [] []
-  2: (empty)
-  3: HTML_ELEMENT_LIST@32..72
-    0: HTML_SINGLE_TEXT_EXPRESSION@32..72
-      0: L_CURLY@32..35 "{" [Newline("\n"), Newline("\n")] []
-      1: HTML_TEXT_EXPRESSION@35..71
-        0: HTML_LITERAL@35..71 "items.map(item => <div>{item}</div>)" [] []
-      2: R_CURLY@71..72 "}" [] []
-  4: EOF@72..73 "" [Newline("\n")] []
-
-```
diff --git a/crates/biome_lsp/src/handlers/text_document.rs b/crates/biome_lsp/src/handlers/text_document.rs
index 5bfd758d17..8df0a544fa 100644
--- a/crates/biome_lsp/src/handlers/text_document.rs
+++ b/crates/biome_lsp/src/handlers/text_document.rs
@@ -32,6 +32,7 @@ pub(crate) async fn did_open(
 
     let path = session.file_path(&url)?;
 
+    eprintln!("Session id {:?}", session.key);
     let project_key = match session.project_for_path(&path) {
         Some(project_key) => project_key,
         None => {
diff --git a/crates/biome_service/src/workspace/server.rs b/crates/biome_service/src/workspace/server.rs
index 3fcb144e20..94661d1bf8 100644
--- a/crates/biome_service/src/workspace/server.rs
+++ b/crates/biome_service/src/workspace/server.rs
@@ -305,23 +305,10 @@ impl WorkspaceServer {
             .get_settings_based_on_path(project_key, &path)
             .ok_or_else(WorkspaceError::no_project)?;
 
-        let mut source = if let Some(document_file_source) = document_file_source {
-            // TODO: remove once HTML full support is stable
-            // document_file_source is given by the LSP, and we have to change it if full support is enabled.
-            // The workspace knows that, but the LSP doesn't, so we have to do the modification here
-            if document_file_source.is_javascript_like()
-                && matches!(path.extension(), Some("astro" | "vue" | "svelte" | "html"))
-            {
-                DocumentFileSource::from_path(
-                    &path,
-                    settings.experimental_full_html_support_enabled(),
-                )
-            } else {
-                document_file_source
-            }
-        } else {
-            DocumentFileSource::from_path(&path, settings.experimental_full_html_support_enabled())
-        };
+        let mut source = document_file_source.unwrap_or(DocumentFileSource::from_path(
+            &path,
+            settings.experimental_full_html_support_enabled(),
+        ));
 
         if let DocumentFileSource::Js(js) = &mut source {
             match path.extension() {
@@ -398,7 +385,6 @@ impl WorkspaceServer {
         {
             // Second-pass parsing for HTML files with embedded JavaScript and CSS content
 
-            debug!("{:#?}", &any_parse);
             let mut node_cache = NodeCache::default();
             self.parse_embedded_language_snippets(
                 &biome_path,
