diff --git a/.eslintignore b/.eslintignore
index 07c71c90c..4197b94e5 100644
--- a/.eslintignore
+++ b/.eslintignore
@@ -1,3 +1 @@
-**/node_modules/**
-*.d.ts
-*.js
\ No newline at end of file
+**/node_modules/**
\ No newline at end of file
diff --git a/.gitignore b/.gitignore
index 68db39d62..b256a3db1 100644
--- a/.gitignore
+++ b/.gitignore
@@ -27,7 +27,6 @@ yarn-error.log
 /**/npm-debug.log
 /packages/**/.npmignore
 /packages/**/LICENSE
-*.tsbuildinfo
 
 # example
 /quick-start
@@ -42,6 +41,3 @@ yarn-error.log
 /packages/graphql
 /benchmarks/memory
 build/config\.gypi
-
-.npmrc
-pnpm-lock.yaml
\ No newline at end of file
diff --git a/.npmignore b/.npmignore
index d70d45ce9..adb8e0dd6 100644
--- a/.npmignore
+++ b/.npmignore
@@ -10,6 +10,4 @@
 package-lock.json
 tslint.json
 tsconfig.json
-.prettierrc
-
-*.tsbuildinfo
\ No newline at end of file
+.prettierrc
\ No newline at end of file
diff --git a/LICENSE b/LICENSE
index 63c013f03..8268fe7ff 100644
--- a/LICENSE
+++ b/LICENSE
@@ -1,6 +1,6 @@
 (The MIT License)
 
-Copyright (c) 2017-2023 Kamil Mysliwiec <https://kamilmysliwiec.com>
+Copyright (c) 2017-2022 Kamil Mysliwiec <https://kamilmysliwiec.com>
 
 Permission is hereby granted, free of charge, to any person obtaining
 a copy of this software and associated documentation files (the
diff --git a/Readme.md b/Readme.md
index 16f48336d..5203ac4c2 100644
--- a/Readme.md
+++ b/Readme.md
@@ -11,6 +11,7 @@
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/l/@nestjs/core.svg" alt="Package License" /></a>
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/dm/@nestjs/common.svg" alt="NPM Downloads" /></a>
 <a href="https://circleci.com/gh/nestjs/nest" target="_blank"><img src="https://img.shields.io/circleci/build/github/nestjs/nest/master" alt="CircleCI" /></a>
+<a href="https://coveralls.io/github/nestjs/nest?branch=master" target="_blank"><img src="https://coveralls.io/repos/github/nestjs/nest/badge.svg?branch=master#9" alt="Coverage" /></a>
 <a href="https://discord.gg/G7Qnnhy" target="_blank"><img src="https://img.shields.io/badge/discord-online-brightgreen.svg" alt="Discord"/></a>
 <a href="https://opencollective.com/nest#backer" target="_blank"><img src="https://opencollective.com/nest/backers/badge.svg" alt="Backers on Open Collective" /></a>
 <a href="https://opencollective.com/nest#sponsor" target="_blank"><img src="https://opencollective.com/nest/sponsors/badge.svg" alt="Sponsors on Open Collective" /></a>
@@ -77,10 +78,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
  <td>
 <a href="https://jetbrains.com/" target="_blank"><img src="https://nestjs.com/img/jetbrains-logo.svg" width="110" valign="middle" /></a></td><td>
 <a href="https://snyk.co/nestjs" target="_blank"><img src="https://nestjs.com/img/snyk-logo-black.png" width="185" valign="middle" /></a></td><td>
-<a href="https://fuseautotech.com/" target="_blank"><img src="https://nestjs.com/img/fuse-logo.svg" width="105" valign="middle" /></a></td>
-<td>
-<a href="https://ridicorp.com/career/" target="_blank"><img src="https://nestjs.com/img/ridi-logo.svg" width="105" valign="middle" /></a></td><td>
-<a href="https://www.movavi.com/imovie-for-windows.html" target="_blank"><img src="https://nestjs.com/img/movavi-logo.svg" width="105" valign="middle" /></a></td></</tr></table>
+<a href="https://fuseautotech.com/" target="_blank"><img src="https://nestjs.com/img/fuse-logo.svg" width="105" valign="middle" /></a></td></</tr></table>
 
 #### Silver Sponsors
 
@@ -93,8 +91,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
 <td><a href="https://www.tinystacks.com" target="_blank"><img src="https://nestjs.com/img/tinystacks-logo.png#1" width="140" valign="middle" /></td>
 <td><a href="https://n.inc" target="_blank"><img src="https://nestjs.com/img/n-inc-logo.svg" width="120" valign="middle" /></td></tr><tr>
 <td><a href="https://bilberrry.com/" target="_blank"><img src="https://nestjs.com/img/bilberrry-logo.svg" width="180" valign="middle" /></td>
-<td><a href="https://ipinfo.ai/" target="_blank"><img src="https://nestjs.com/img/ipinfo-logo.png" width="130" valign="middle" /></td>
-<td><a href="https://chax.at" target="_blank"><img src="https://nestjs.com/img/chaxat-logo.png" width="100" valign="middle" /></td></tr>
+<td><a href="https://ipinfo.ai/" target="_blank"><img src="https://nestjs.com/img/ipinfo-logo.png" width="130" valign="middle" /></td></tr>
 </table>
 
 #### Sponsors
@@ -135,8 +132,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
    <td align="center" valign="middle"><a href="https://mobilereality.pl/" target="_blank"><img src="https://nestjs.com/img/mobile-reality-logo.png" width="45" valign="middle" /></a></td>
      <td align="center" valign="middle"><a href="https://boringowl.io/" target="_blank"><img src="https://nestjs.com/img/boringowl-logo.svg" width="120" valign="middle" /></a></td>
  <td align="center" valign="middle"><a href="https://www.mobilefactory.jp/" target="_blank"><img src="https://nestjs.com/img/mobilefactory-logo.png" width="100" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://nordbot.app/" target="_blank"><img src="https://nestjs.com/img/nordbot-logo.png" width="120" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://doppio.sh/" target="_blank"><img src="https://nestjs.com/img/dopiosh-logo.png" width="50" valign="middle" /></a></td>
+ <td align="center" valign="middle"><a href="https://db.nordbot.app/" target="_blank"><img src="https://nestjs.com/img/nord-logo.png" width="50" valign="middle" /></a></td>
   </tr></table>
 
 ## Backers
diff --git a/integration/auto-mock/tsconfig.json b/integration/auto-mock/tsconfig.json
index cef623d14..c6354c564 100644
--- a/integration/auto-mock/tsconfig.json
+++ b/integration/auto-mock/tsconfig.json
@@ -7,28 +7,10 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
     "src/**/*",
diff --git a/integration/cache/e2e/async-register-extra-providers.ts b/integration/cache/e2e/async-register-extra-providers.ts
new file mode 100644
index 000000000..d2c47857d
--- /dev/null
+++ b/integration/cache/e2e/async-register-extra-providers.ts
@@ -0,0 +1,39 @@
+import { CACHE_MANAGER, INestApplication } from '@nestjs/common';
+import { Test } from '@nestjs/testing';
+import * as request from 'supertest';
+import { AsyncRegisterExtraModule } from '../src/async-register-extra-providers/async-register-extra.module';
+import { Cache } from 'cache-manager';
+import { assert } from 'chai';
+
+describe('Async Register Extra Providers', () => {
+  let server;
+  let app: INestApplication;
+  let cacheManager: Cache;
+
+  before(async () => {
+    const module = await Test.createTestingModule({
+      imports: [AsyncRegisterExtraModule],
+    }).compile();
+
+    cacheManager = module.get<Cache>(CACHE_MANAGER);
+    app = module.createNestApplication();
+    server = app.getHttpServer();
+    await app.init();
+  });
+
+  it('should be defined', async () => {
+    assert.isDefined(cacheManager);
+  });
+
+  it(`should return empty`, async () => {
+    return request(server).get('/').expect(200, 'Not found');
+  });
+
+  it(`should return data`, async () => {
+    return request(server).get('/').expect(200, 'value');
+  });
+
+  after(async () => {
+    await app.close();
+  });
+});
diff --git a/integration/cache/src/async-register-extra-providers/async-register-extra.controller.ts b/integration/cache/src/async-register-extra-providers/async-register-extra.controller.ts
new file mode 100644
index 000000000..c4df4dff7
--- /dev/null
+++ b/integration/cache/src/async-register-extra-providers/async-register-extra.controller.ts
@@ -0,0 +1,16 @@
+import { Controller, Get, Inject, CACHE_MANAGER } from '@nestjs/common';
+import { Cache } from 'cache-manager';
+
+@Controller()
+export class AsyncRegisterExtraController {
+  constructor(@Inject(CACHE_MANAGER) private cacheManager: Cache) {}
+
+  @Get()
+  async getFromStore(): Promise<string> {
+    const value: string | undefined = await this.cacheManager.get('key');
+    if (!value) {
+      await this.cacheManager.set('key', 'value');
+    }
+    return value ?? 'Not found';
+  }
+}
diff --git a/integration/cache/src/async-register-extra-providers/async-register-extra.module.ts b/integration/cache/src/async-register-extra-providers/async-register-extra.module.ts
new file mode 100644
index 000000000..4d3fdcecc
--- /dev/null
+++ b/integration/cache/src/async-register-extra-providers/async-register-extra.module.ts
@@ -0,0 +1,16 @@
+import { CacheModule, Module } from '@nestjs/common';
+import { AsyncRegisterExtraController } from './async-register-extra.controller';
+import { CacheConfig } from './config/cache.config';
+import { ConfigModule } from './config/config.module';
+
+@Module({
+  imports: [
+    CacheModule.registerAsync({
+      extraProviders: [ConfigModule],
+      isGlobal: true,
+      useClass: CacheConfig,
+    }),
+  ],
+  controllers: [AsyncRegisterExtraController],
+})
+export class AsyncRegisterExtraModule {}
diff --git a/integration/cache/src/async-register-extra-providers/config/cache.config.ts b/integration/cache/src/async-register-extra-providers/config/cache.config.ts
new file mode 100644
index 000000000..905ee6461
--- /dev/null
+++ b/integration/cache/src/async-register-extra-providers/config/cache.config.ts
@@ -0,0 +1,17 @@
+import {
+  CacheModuleOptions,
+  CacheOptionsFactory,
+  Injectable,
+} from '@nestjs/common';
+import { ConfigService } from './config.service';
+
+@Injectable()
+export class CacheConfig implements CacheOptionsFactory {
+  constructor(private readonly configService: ConfigService) {}
+
+  createCacheOptions(): CacheModuleOptions {
+    const ttl = this.configService.getTtl();
+
+    return { ttl };
+  }
+}
diff --git a/integration/cache/src/async-register-extra-providers/config/config.module.ts b/integration/cache/src/async-register-extra-providers/config/config.module.ts
new file mode 100644
index 000000000..eaa505c84
--- /dev/null
+++ b/integration/cache/src/async-register-extra-providers/config/config.module.ts
@@ -0,0 +1,8 @@
+import { Module } from '@nestjs/common';
+import { ConfigService } from './config.service';
+
+@Module({
+  providers: [ConfigService],
+  exports: [ConfigService],
+})
+export class ConfigModule {}
diff --git a/integration/cache/src/async-register-extra-providers/config/config.service.ts b/integration/cache/src/async-register-extra-providers/config/config.service.ts
new file mode 100644
index 000000000..0a7a886a4
--- /dev/null
+++ b/integration/cache/src/async-register-extra-providers/config/config.service.ts
@@ -0,0 +1,8 @@
+import { Injectable } from '@nestjs/common';
+
+@Injectable()
+export class ConfigService {
+  public getTtl(): number {
+    return 10;
+  }
+}
diff --git a/integration/cache/src/async-register-extra-providers/tsconfig.json b/integration/cache/src/async-register-extra-providers/tsconfig.json
new file mode 100644
index 000000000..567a5c9e6
--- /dev/null
+++ b/integration/cache/src/async-register-extra-providers/tsconfig.json
@@ -0,0 +1,22 @@
+{
+  "compilerOptions": {
+    "module": "commonjs",
+    "declaration": false,
+    "noImplicitAny": false,
+    "removeComments": true,
+    "noLib": false,
+    "emitDecoratorMetadata": true,
+    "experimentalDecorators": true,
+    "target": "es6",
+    "sourceMap": true,
+    "allowJs": true,
+    "outDir": "./dist"
+  },
+  "include": [
+    "src/**/*",
+    "e2e/**/*"
+  ],
+  "exclude": [
+    "node_modules",
+  ]
+}
diff --git a/integration/cache/src/async-register/async-register.controller.ts b/integration/cache/src/async-register/async-register.controller.ts
new file mode 100644
index 000000000..4f2c12f08
--- /dev/null
+++ b/integration/cache/src/async-register/async-register.controller.ts
@@ -0,0 +1,16 @@
+import { Controller, Get, Inject, CACHE_MANAGER } from '@nestjs/common';
+import { Cache } from 'cache-manager';
+
+@Controller()
+export class AsyncRegisterController {
+  constructor(@Inject(CACHE_MANAGER) private cacheManager: Cache) {}
+
+  @Get()
+  async getFromStore(): Promise<string> {
+    const value: string | undefined = await this.cacheManager.get('key');
+    if (!value) {
+      await this.cacheManager.set('key', 'value');
+    }
+    return value ?? 'Not found';
+  }
+}
diff --git a/integration/cache/src/async-register/async-register.module.ts b/integration/cache/src/async-register/async-register.module.ts
new file mode 100644
index 000000000..d2a907f3b
--- /dev/null
+++ b/integration/cache/src/async-register/async-register.module.ts
@@ -0,0 +1,14 @@
+import { CacheModule, Module } from '@nestjs/common';
+import { AsyncRegisterController } from './async-register.controller';
+import { CacheConfig } from './config/cache.config';
+
+@Module({
+  imports: [
+    CacheModule.registerAsync({
+      isGlobal: true,
+      useClass: CacheConfig,
+    }),
+  ],
+  controllers: [AsyncRegisterController],
+})
+export class AsyncRegisterModule {}
diff --git a/integration/cache/src/async-register/config/cache.config.ts b/integration/cache/src/async-register/config/cache.config.ts
new file mode 100644
index 000000000..36609b360
--- /dev/null
+++ b/integration/cache/src/async-register/config/cache.config.ts
@@ -0,0 +1,14 @@
+import {
+  CacheModuleOptions,
+  CacheOptionsFactory,
+  Injectable,
+} from '@nestjs/common';
+
+@Injectable()
+export class CacheConfig implements CacheOptionsFactory {
+  createCacheOptions(): CacheModuleOptions {
+    const ttl = 100;
+
+    return { ttl };
+  }
+}
diff --git a/integration/cache/src/async-register/tsconfig.json b/integration/cache/src/async-register/tsconfig.json
new file mode 100644
index 000000000..567a5c9e6
--- /dev/null
+++ b/integration/cache/src/async-register/tsconfig.json
@@ -0,0 +1,22 @@
+{
+  "compilerOptions": {
+    "module": "commonjs",
+    "declaration": false,
+    "noImplicitAny": false,
+    "removeComments": true,
+    "noLib": false,
+    "emitDecoratorMetadata": true,
+    "experimentalDecorators": true,
+    "target": "es6",
+    "sourceMap": true,
+    "allowJs": true,
+    "outDir": "./dist"
+  },
+  "include": [
+    "src/**/*",
+    "e2e/**/*"
+  ],
+  "exclude": [
+    "node_modules",
+  ]
+}
diff --git a/integration/cache/src/multi-store/multi-store.controller.ts b/integration/cache/src/multi-store/multi-store.controller.ts
new file mode 100644
index 000000000..ce4a446a8
--- /dev/null
+++ b/integration/cache/src/multi-store/multi-store.controller.ts
@@ -0,0 +1,16 @@
+import { Controller, Get, Inject, CACHE_MANAGER } from '@nestjs/common';
+import { Cache } from 'cache-manager';
+
+@Controller()
+export class MultiStoreController {
+  constructor(@Inject(CACHE_MANAGER) private cacheManager: Cache) {}
+
+  @Get()
+  async getFromMultiStore(): Promise<unknown> {
+    const value = await this.cacheManager.get('multi-store-key');
+    if (!value) {
+      await this.cacheManager.set('multi-store-key', 'multi-store-value');
+    }
+    return value;
+  }
+}
diff --git a/integration/cache/src/multi-store/multi-store.module.ts b/integration/cache/src/multi-store/multi-store.module.ts
new file mode 100644
index 000000000..8ebc34e5b
--- /dev/null
+++ b/integration/cache/src/multi-store/multi-store.module.ts
@@ -0,0 +1,24 @@
+import { CacheModule, Module } from '@nestjs/common';
+import * as redisStore from 'cache-manager-redis-store';
+import { MultiStoreController } from './multi-store.controller';
+
+@Module({
+  imports: [
+    CacheModule.register([
+      {
+        store: 'memory',
+        max: 100,
+        ttl: 10,
+      },
+      {
+        store: redisStore,
+        host: 'localhost',
+        port: 6379,
+        db: 0,
+        ttl: 600,
+      },
+    ]),
+  ],
+  controllers: [MultiStoreController],
+})
+export class MultiStoreModule {}
diff --git a/integration/cache/src/multi-store/tsconfig.json b/integration/cache/src/multi-store/tsconfig.json
new file mode 100644
index 000000000..567a5c9e6
--- /dev/null
+++ b/integration/cache/src/multi-store/tsconfig.json
@@ -0,0 +1,22 @@
+{
+  "compilerOptions": {
+    "module": "commonjs",
+    "declaration": false,
+    "noImplicitAny": false,
+    "removeComments": true,
+    "noLib": false,
+    "emitDecoratorMetadata": true,
+    "experimentalDecorators": true,
+    "target": "es6",
+    "sourceMap": true,
+    "allowJs": true,
+    "outDir": "./dist"
+  },
+  "include": [
+    "src/**/*",
+    "e2e/**/*"
+  ],
+  "exclude": [
+    "node_modules",
+  ]
+}
diff --git a/integration/cors/tsconfig.json b/integration/cors/tsconfig.json
index cef623d14..c6354c564 100644
--- a/integration/cors/tsconfig.json
+++ b/integration/cors/tsconfig.json
@@ -7,28 +7,10 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
     "src/**/*",
diff --git a/integration/docker-compose.yml b/integration/docker-compose.yml
index bbf95d3a9..1a1dfa986 100644
--- a/integration/docker-compose.yml
+++ b/integration/docker-compose.yml
@@ -25,7 +25,7 @@ services:
       - "9001:9001"
     restart: always
   mysql:
-    image: mysql:8.0.32
+    image: mysql:8.0.30
     environment:
       MYSQL_ROOT_PASSWORD: root
       MYSQL_DATABASE: test
@@ -50,7 +50,7 @@ services:
   zookeeper:
     container_name: test-zookeeper
     hostname: zookeeper
-    image: confluentinc/cp-zookeeper:7.3.2
+    image: confluentinc/cp-zookeeper:7.0.1
     ports:
       - "2181:2181"
     environment:
@@ -59,7 +59,7 @@ services:
   kafka:
     container_name: test-kafka
     hostname: kafka
-    image: confluentinc/cp-kafka:7.3.2
+    image: confluentinc/cp-kafka:7.0.1
     depends_on:
       - zookeeper
     ports:
diff --git a/integration/graphql-code-first/schema.gql b/integration/graphql-code-first/schema.gql
index c196e332d..59f110694 100644
--- a/integration/graphql-code-first/schema.gql
+++ b/integration/graphql-code-first/schema.gql
@@ -15,7 +15,7 @@ scalar Date
 
 type Query {
   recipe(id: String!): Recipe!
-  recipes(skip: Int! = 0, take: Int! = 25): [Recipe!]!
+  recipes(skip: Int = 0, take: Int = 25): [Recipe!]!
 }
 
 type Mutation {
@@ -31,4 +31,4 @@ input NewRecipeInput {
 
 type Subscription {
   recipeAdded: Recipe!
-}
\ No newline at end of file
+}
diff --git a/integration/graphql-code-first/src/app.module.ts b/integration/graphql-code-first/src/app.module.ts
index 5da27fa35..595288ffc 100644
--- a/integration/graphql-code-first/src/app.module.ts
+++ b/integration/graphql-code-first/src/app.module.ts
@@ -9,7 +9,7 @@ import { RecipesModule } from './recipes/recipes.module';
     RecipesModule,
     GraphQLModule.forRoot<ApolloDriverConfig>({
       driver: ApolloDriver,
-      includeStacktraceInErrorResponses: false,
+      debug: false,
       installSubscriptionHandlers: true,
       autoSchemaFile: join(
         process.cwd(),
diff --git a/integration/graphql-code-first/src/main.ts b/integration/graphql-code-first/src/main.ts
index 5a5fd57ce..c04a543a1 100644
--- a/integration/graphql-code-first/src/main.ts
+++ b/integration/graphql-code-first/src/main.ts
@@ -1,9 +1,9 @@
 import { ValidationPipe } from '@nestjs/common';
 import { NestFactory } from '@nestjs/core';
-import { AppModule } from './app.module';
+import { ApplicationModule } from './app.module';
 
 async function bootstrap() {
-  const app = await NestFactory.create(AppModule);
+  const app = await NestFactory.create(ApplicationModule);
   app.useGlobalPipes(new ValidationPipe());
   await app.listen(3000);
 }
diff --git a/integration/graphql-code-first/tsconfig.json b/integration/graphql-code-first/tsconfig.json
index cef623d14..ea15af490 100644
--- a/integration/graphql-code-first/tsconfig.json
+++ b/integration/graphql-code-first/tsconfig.json
@@ -7,34 +7,16 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
-    "src/**/*",
-    "e2e/**/*"
+    "src/**/*"
   ],
   "exclude": [
     "node_modules",
+    "**/*.spec.ts"
   ]
 }
\ No newline at end of file
diff --git a/integration/graphql-schema-first/src/app.module.ts b/integration/graphql-schema-first/src/app.module.ts
index 2879cfc9f..2dbbb236a 100644
--- a/integration/graphql-schema-first/src/app.module.ts
+++ b/integration/graphql-schema-first/src/app.module.ts
@@ -9,7 +9,6 @@ import { CatsModule } from './cats/cats.module';
     CatsModule,
     GraphQLModule.forRoot<ApolloDriverConfig>({
       driver: ApolloDriver,
-      includeStacktraceInErrorResponses: true,
       typePaths: [join(__dirname, '**', '*.graphql')],
     }),
   ],
diff --git a/integration/graphql-schema-first/src/main.ts b/integration/graphql-schema-first/src/main.ts
index 13cad38cf..afb93ba07 100644
--- a/integration/graphql-schema-first/src/main.ts
+++ b/integration/graphql-schema-first/src/main.ts
@@ -1,8 +1,8 @@
 import { NestFactory } from '@nestjs/core';
-import { AppModule } from './app.module';
+import { ApplicationModule } from './app.module';
 
 async function bootstrap() {
-  const app = await NestFactory.create(AppModule);
+  const app = await NestFactory.create(ApplicationModule);
   await app.listen(3000);
 }
 bootstrap();
diff --git a/integration/graphql-schema-first/tsconfig.json b/integration/graphql-schema-first/tsconfig.json
index cef623d14..3229c5596 100644
--- a/integration/graphql-schema-first/tsconfig.json
+++ b/integration/graphql-schema-first/tsconfig.json
@@ -7,34 +7,17 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
     "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
+    "skipLibCheck": true
   },
   "include": [
-    "src/**/*",
-    "e2e/**/*"
+    "src/**/*"
   ],
   "exclude": [
     "node_modules",
+    "**/*.spec.ts"
   ]
 }
\ No newline at end of file
diff --git a/integration/hello-world/src/errors/errors.controller.ts b/integration/hello-world/src/errors/errors.controller.ts
index 7b2b9e1b8..76f867bb7 100644
--- a/integration/hello-world/src/errors/errors.controller.ts
+++ b/integration/hello-world/src/errors/errors.controller.ts
@@ -1,4 +1,4 @@
-import { BadRequestException, Controller, Get, Header } from '@nestjs/common';
+import { BadRequestException, Controller, Get } from '@nestjs/common';
 
 @Controller()
 export class ErrorsController {
@@ -12,12 +12,6 @@ export class ErrorsController {
     this.throwError();
   }
 
-  @Get('unexpected-error')
-  @Header('Content-Type', 'application/pdf')
-  unexpectedError() {
-    throw new Error();
-  }
-
   throwError() {
     throw new BadRequestException({
       statusCode: 400,
diff --git a/integration/hello-world/tsconfig.json b/integration/hello-world/tsconfig.json
index cef623d14..c6354c564 100644
--- a/integration/hello-world/tsconfig.json
+++ b/integration/hello-world/tsconfig.json
@@ -7,28 +7,10 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
     "src/**/*",
diff --git a/integration/hooks/tsconfig.json b/integration/hooks/tsconfig.json
index cef623d14..c6354c564 100644
--- a/integration/hooks/tsconfig.json
+++ b/integration/hooks/tsconfig.json
@@ -7,28 +7,10 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
     "src/**/*",
diff --git a/integration/injector/src/self-injection/self-injection-provider.module.ts b/integration/injector/src/self-injection/self-injection-provider.module.ts
index 1dcf6eecb..6850c75dc 100644
--- a/integration/injector/src/self-injection/self-injection-provider.module.ts
+++ b/integration/injector/src/self-injection/self-injection-provider.module.ts
@@ -6,7 +6,7 @@ class ServiceInjectingItself {
 }
 
 @Injectable()
-class ServiceInjectingItselfForward {
+class ServiceInjectingItselfForwared {
   constructor(
     @Inject(forwardRef(() => ServiceInjectingItself))
     private readonly coreService: ServiceInjectingItself,
@@ -24,7 +24,7 @@ class ServiceInjectingItselfViaCustomToken {
 export class SelfInjectionProviderModule {}
 
 @Module({
-  providers: [ServiceInjectingItselfForward],
+  providers: [ServiceInjectingItselfForwared],
 })
 export class SelfInjectionForwardProviderModule {}
 
diff --git a/integration/injector/tsconfig.json b/integration/injector/tsconfig.json
index cef623d14..c6354c564 100644
--- a/integration/injector/tsconfig.json
+++ b/integration/injector/tsconfig.json
@@ -7,28 +7,10 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
     "src/**/*",
diff --git a/integration/inspector/e2e/fixtures/post-init-graph.json b/integration/inspector/e2e/fixtures/post-init-graph.json
deleted file mode 100644
index 36ca478b2..000000000
--- a/integration/inspector/e2e/fixtures/post-init-graph.json
+++ /dev/null
@@ -1,3171 +0,0 @@
-{
-  "nodes": {
-    "18347652": {
-      "id": "18347652",
-      "label": "LoggingInterceptor",
-      "parent": "2133316171",
-      "metadata": {
-        "type": "injectable",
-        "internal": false,
-        "sourceModuleName": "RequestChainModule",
-        "durable": false,
-        "static": false,
-        "transient": false,
-        "exported": false,
-        "token": "LoggingInterceptor",
-        "subtype": "interceptor",
-        "initTime": 0
-      }
-    },
-    "55510001": {
-      "id": "55510001",
-      "label": "UsersService",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": false,
-        "token": "UsersService",
-        "initTime": 0
-      }
-    },
-    "91819333": {
-      "id": "91819333",
-      "label": "ModuleRef",
-      "parent": "2133316171",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "RequestChainModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "203550704": {
-      "id": "203550704",
-      "label": "ExternalContextCreator",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": true,
-        "token": "ExternalContextCreator"
-      }
-    },
-    "208171089": {
-      "id": "208171089",
-      "label": "RolesGuard",
-      "parent": "1434441974",
-      "metadata": {
-        "type": "injectable",
-        "internal": false,
-        "sourceModuleName": "CatsModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "RolesGuard",
-        "subtype": "guard",
-        "initTime": 0
-      }
-    },
-    "225063248": {
-      "id": "225063248",
-      "label": "InternalCoreModule",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "InternalCoreModule",
-        "initTime": 0
-      }
-    },
-    "256260345": {
-      "id": "256260345",
-      "label": "ApplicationConfig",
-      "parent": "1528017428",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DatabaseModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "345516396": {
-      "id": "345516396",
-      "label": "ApplicationConfig",
-      "parent": "1142369607",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "HelperModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "345719894": {
-      "id": "345719894",
-      "label": "CoreModule",
-      "parent": "-1125887048",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "CoreModule",
-        "initTime": 0
-      }
-    },
-    "437945905": {
-      "id": "437945905",
-      "label": "ApplicationConfig",
-      "parent": "-1469176692",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "PropertiesModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "519735830": {
-      "id": "519735830",
-      "label": "ApplicationConfig",
-      "parent": "-493958991",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "ChatModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "521671888": {
-      "id": "521671888",
-      "label": "DogsModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "555176277": {
-      "id": "555176277",
-      "label": "InternalCoreModule",
-      "metadata": {
-        "type": "module",
-        "global": true,
-        "dynamic": true,
-        "internal": true
-      }
-    },
-    "594986539": {
-      "id": "594986539",
-      "label": "InputService",
-      "parent": "-1813741655",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "InputModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": true,
-        "token": "InputService",
-        "initTime": 0
-      }
-    },
-    "603011239": {
-      "id": "603011239",
-      "label": "UsersService",
-      "parent": "-2003726489",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "UsersModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "UsersService",
-        "initTime": 0
-      }
-    },
-    "671882984": {
-      "id": "671882984",
-      "label": "Reflector",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": true,
-        "token": "Reflector",
-        "initTime": 0
-      }
-    },
-    "791004148": {
-      "id": "791004148",
-      "label": "ExternalSvcModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "867482265": {
-      "id": "867482265",
-      "label": "Interceptor",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "injectable",
-        "internal": false,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": false,
-        "token": "Interceptor",
-        "subtype": "interceptor",
-        "initTime": 0
-      }
-    },
-    "927096496": {
-      "id": "927096496",
-      "label": "ApplicationConfig",
-      "parent": "2133316171",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "RequestChainModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "928565345": {
-      "id": "928565345",
-      "label": "HelperService",
-      "parent": "1142369607",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "HelperModule",
-        "durable": false,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": true,
-        "token": "HelperService",
-        "initTime": 0
-      }
-    },
-    "941957564": {
-      "id": "941957564",
-      "label": "RequestChainModule",
-      "parent": "2133316171",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "RequestChainModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "RequestChainModule",
-        "initTime": 0
-      }
-    },
-    "980514911": {
-      "id": "980514911",
-      "label": "Symbol(token)",
-      "parent": "-1469176692",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "PropertiesModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "Symbol(token)"
-      }
-    },
-    "1004276345": {
-      "id": "1004276345",
-      "label": "Meta",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": false,
-        "token": "META",
-        "initTime": 0
-      }
-    },
-    "1010833816": {
-      "id": "1010833816",
-      "label": "token",
-      "parent": "-1469176692",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "PropertiesModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "token"
-      }
-    },
-    "1047229654": {
-      "id": "1047229654",
-      "label": "CircularModule",
-      "parent": "-369869768",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CircularModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "CircularModule",
-        "initTime": 0
-      }
-    },
-    "1074192353": {
-      "id": "1074192353",
-      "label": "ChatService",
-      "parent": "-493958991",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "ChatModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "ChatService",
-        "initTime": 0
-      }
-    },
-    "1120316353": {
-      "id": "1120316353",
-      "label": "ModuleRef",
-      "parent": "1142369607",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "HelperModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "1131051184": {
-      "id": "1131051184",
-      "label": "ChatGateway",
-      "parent": "-493958991",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "ChatModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "ChatGateway",
-        "initTime": 0
-      }
-    },
-    "1142369607": {
-      "id": "1142369607",
-      "label": "HelperModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "1189153544": {
-      "id": "1189153544",
-      "label": "ChatModule",
-      "parent": "-493958991",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "ChatModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ChatModule",
-        "initTime": 0
-      }
-    },
-    "1253818496": {
-      "id": "1253818496",
-      "label": "RootTestModule",
-      "parent": "-1251270035",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "RootTestModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "RootTestModule",
-        "initTime": 0
-      }
-    },
-    "1433815174": {
-      "id": "1433815174",
-      "label": "DogsModule",
-      "parent": "521671888",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DogsModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "DogsModule",
-        "initTime": 0
-      }
-    },
-    "1434441974": {
-      "id": "1434441974",
-      "label": "CatsModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "1434456218": {
-      "id": "1434456218",
-      "label": "Reflector",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": true,
-        "token": "Reflector",
-        "initTime": 0
-      }
-    },
-    "1472486160": {
-      "id": "1472486160",
-      "label": "HelloController",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "transient": false,
-        "exported": false,
-        "token": "HelloController",
-        "initTime": 0,
-        "enhancers": [
-          {
-            "id": "-2010060263",
-            "methodKey": "greeting",
-            "subtype": "guard"
-          },
-          {
-            "id": "867482265",
-            "methodKey": "greeting",
-            "subtype": "interceptor"
-          },
-          {
-            "id": "1893794611",
-            "methodKey": "greeting",
-            "subtype": "pipe"
-          }
-        ]
-      }
-    },
-    "1528017428": {
-      "id": "1528017428",
-      "label": "DatabaseModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "1535366709": {
-      "id": "1535366709",
-      "label": "ApplicationConfig",
-      "parent": "521671888",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DogsModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "1551182002": {
-      "id": "1551182002",
-      "label": "ModuleRef",
-      "parent": "-1125887048",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "1616075090": {
-      "id": "1616075090",
-      "label": "CatsModule",
-      "parent": "1434441974",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CatsModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "CatsModule",
-        "initTime": 0
-      }
-    },
-    "1634859874": {
-      "id": "1634859874",
-      "label": "LoggerMiddleware",
-      "parent": "-1125887048",
-      "metadata": {
-        "type": "middleware",
-        "internal": false,
-        "sourceModuleName": "CoreModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "LoggerMiddleware",
-        "initTime": 0
-      }
-    },
-    "1743739569": {
-      "id": "1743739569",
-      "label": "HelloModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": true,
-        "internal": false
-      }
-    },
-    "1771940178": {
-      "id": "1771940178",
-      "label": "ApplicationConfig",
-      "parent": "-1251270035",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "RootTestModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "1809676814": {
-      "id": "1809676814",
-      "label": "ModuleRef",
-      "parent": "1528017428",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DatabaseModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "1893794611": {
-      "id": "1893794611",
-      "label": "UserByIdPipe",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "injectable",
-        "internal": false,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "transient": false,
-        "exported": false,
-        "token": "UserByIdPipe",
-        "subtype": "pipe",
-        "initTime": 0
-      }
-    },
-    "1919157847": {
-      "id": "1919157847",
-      "label": "REQUEST",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": true,
-        "token": "REQUEST",
-        "initTime": 0
-      }
-    },
-    "2018972420": {
-      "id": "2018972420",
-      "label": "TransformInterceptor",
-      "parent": "-1125887048",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "CoreModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "APP_INTERCEPTOR (UUID: -1146749753)",
-        "subtype": "interceptor",
-        "initTime": 0,
-        "global": true
-      }
-    },
-    "2133316171": {
-      "id": "2133316171",
-      "label": "RequestChainModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-1486320561": {
-      "id": "-1486320561",
-      "label": "ModuleRef",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-651043398": {
-      "id": "-651043398",
-      "label": "ApplicationConfig",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-255469305": {
-      "id": "-255469305",
-      "label": "INQUIRER",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 1,
-        "transient": true,
-        "exported": true,
-        "token": "INQUIRER",
-        "initTime": 0
-      }
-    },
-    "-26938366": {
-      "id": "-26938366",
-      "label": "ModulesContainer",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": true,
-        "token": "ModulesContainer"
-      }
-    },
-    "-326832201": {
-      "id": "-326832201",
-      "label": "HttpAdapterHost",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": true,
-        "token": "HttpAdapterHost"
-      }
-    },
-    "-553129559": {
-      "id": "-553129559",
-      "label": "HttpAdapterHost",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": true,
-        "token": "HttpAdapterHost",
-        "initTime": 0
-      }
-    },
-    "-702581189": {
-      "id": "-702581189",
-      "label": "LazyModuleLoader",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": true,
-        "token": "LazyModuleLoader",
-        "initTime": 0
-      }
-    },
-    "-1904419534": {
-      "id": "-1904419534",
-      "label": "SerializedGraph",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": true,
-        "token": "SerializedGraph"
-      }
-    },
-    "-1251270035": {
-      "id": "-1251270035",
-      "label": "RootTestModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-969610649": {
-      "id": "-969610649",
-      "label": "ModuleRef",
-      "parent": "-1251270035",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "RootTestModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-19112576": {
-      "id": "-19112576",
-      "label": "AppModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-2139588960": {
-      "id": "-2139588960",
-      "label": "AppModule",
-      "parent": "-19112576",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "AppModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "AppModule",
-        "initTime": 0
-      }
-    },
-    "-71302842": {
-      "id": "-71302842",
-      "label": "ModuleRef",
-      "parent": "-19112576",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "AppModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-2064622725": {
-      "id": "-2064622725",
-      "label": "ApplicationConfig",
-      "parent": "-19112576",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "AppModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-365265483": {
-      "id": "-365265483",
-      "label": "AppV1Controller",
-      "parent": "-19112576",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "AppModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "AppV1Controller",
-        "initTime": 0
-      }
-    },
-    "-774089708": {
-      "id": "-774089708",
-      "label": "AppV2Controller",
-      "parent": "-19112576",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "AppModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "AppV2Controller",
-        "initTime": 0
-      }
-    },
-    "-1125887048": {
-      "id": "-1125887048",
-      "label": "CoreModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-112192227": {
-      "id": "-112192227",
-      "label": "ApplicationConfig",
-      "parent": "-1125887048",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-2007711503": {
-      "id": "-2007711503",
-      "label": "LoggingInterceptor",
-      "parent": "-1125887048",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "CoreModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "APP_INTERCEPTOR (UUID: 1780085433)",
-        "subtype": "interceptor",
-        "initTime": 0,
-        "global": true
-      }
-    },
-    "-183456272": {
-      "id": "-183456272",
-      "label": "ModuleRef",
-      "parent": "1434441974",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CatsModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-1846830501": {
-      "id": "-1846830501",
-      "label": "ApplicationConfig",
-      "parent": "1434441974",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CatsModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-593595711": {
-      "id": "-593595711",
-      "label": "CatsService",
-      "parent": "1434441974",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "CatsModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "CatsService",
-        "initTime": 0
-      }
-    },
-    "-1550892030": {
-      "id": "-1550892030",
-      "label": "CatsController",
-      "parent": "1434441974",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "CatsModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "CatsController",
-        "initTime": 0,
-        "enhancers": [
-          {
-            "id": "208171089",
-            "subtype": "guard"
-          },
-          {
-            "name": "ParseIntPipe",
-            "methodKey": "findOne",
-            "subtype": "pipe"
-          }
-        ]
-      }
-    },
-    "-1378706112": {
-      "id": "-1378706112",
-      "label": "HelloModule",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "HelloModule",
-        "initTime": 0
-      }
-    },
-    "-1166465801": {
-      "id": "-1166465801",
-      "label": "ModuleRef",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-1191459348": {
-      "id": "-1191459348",
-      "label": "ApplicationConfig",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-1758187461": {
-      "id": "-1758187461",
-      "label": "HelloService",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": false,
-        "token": "HelloService",
-        "initTime": 0
-      }
-    },
-    "-2010060263": {
-      "id": "-2010060263",
-      "label": "Guard",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "injectable",
-        "internal": false,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": false,
-        "token": "Guard",
-        "subtype": "guard",
-        "initTime": 0
-      }
-    },
-    "-1124392646": {
-      "id": "-1124392646",
-      "label": "DurableModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-522935456": {
-      "id": "-522935456",
-      "label": "DurableModule",
-      "parent": "-1124392646",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DurableModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "DurableModule",
-        "initTime": 0
-      }
-    },
-    "-1808043520": {
-      "id": "-1808043520",
-      "label": "ModuleRef",
-      "parent": "-1124392646",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DurableModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-57038411": {
-      "id": "-57038411",
-      "label": "ApplicationConfig",
-      "parent": "-1124392646",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DurableModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-1673986099": {
-      "id": "-1673986099",
-      "label": "DurableService",
-      "parent": "-1124392646",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "DurableModule",
-        "durable": true,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": false,
-        "token": "DurableService",
-        "initTime": 0
-      }
-    },
-    "-848516688": {
-      "id": "-848516688",
-      "label": "DurableController",
-      "parent": "-1124392646",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "DurableModule",
-        "durable": true,
-        "static": false,
-        "transient": false,
-        "exported": false,
-        "token": "DurableController",
-        "initTime": 0
-      }
-    },
-    "-1096226358": {
-      "id": "-1096226358",
-      "label": "ModuleRef",
-      "parent": "521671888",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DogsModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-335387007": {
-      "id": "-335387007",
-      "label": "DogsService",
-      "parent": "521671888",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "DogsModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "DogsService",
-        "initTime": 0
-      }
-    },
-    "-1558907338": {
-      "id": "-1558907338",
-      "label": "DogsController",
-      "parent": "521671888",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "DogsModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "DogsController",
-        "initTime": 0
-      }
-    },
-    "-2003726489": {
-      "id": "-2003726489",
-      "label": "UsersModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-495603840": {
-      "id": "-495603840",
-      "label": "UsersModule",
-      "parent": "-2003726489",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "UsersModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "UsersModule",
-        "initTime": 0
-      }
-    },
-    "-618964563": {
-      "id": "-618964563",
-      "label": "ModuleRef",
-      "parent": "-2003726489",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "UsersModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-643958110": {
-      "id": "-643958110",
-      "label": "ApplicationConfig",
-      "parent": "-2003726489",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "UsersModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-1102473136": {
-      "id": "-1102473136",
-      "label": "UsersController",
-      "parent": "-2003726489",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "UsersModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "UsersController",
-        "initTime": 0
-      }
-    },
-    "-1098322034": {
-      "id": "-1098322034",
-      "label": "DatabaseModule",
-      "parent": "1528017428",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DatabaseModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "DatabaseModule",
-        "initTime": 0
-      }
-    },
-    "-616397055": {
-      "id": "-616397055",
-      "label": "DatabaseService",
-      "parent": "1528017428",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "DatabaseModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "DatabaseService",
-        "initTime": 0
-      }
-    },
-    "-377928898": {
-      "id": "-377928898",
-      "label": "DatabaseController",
-      "parent": "1528017428",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "DatabaseModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "DatabaseController",
-        "initTime": 0
-      }
-    },
-    "-511735264": {
-      "id": "-511735264",
-      "label": "ExternalSvcModule",
-      "parent": "791004148",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "ExternalSvcModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ExternalSvcModule",
-        "initTime": 0
-      }
-    },
-    "-660323910": {
-      "id": "-660323910",
-      "label": "ModuleRef",
-      "parent": "791004148",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "ExternalSvcModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-217737489": {
-      "id": "-217737489",
-      "label": "ApplicationConfig",
-      "parent": "791004148",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "ExternalSvcModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-1902429503": {
-      "id": "-1902429503",
-      "label": "ExternalSvcService",
-      "parent": "791004148",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "ExternalSvcModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "ExternalSvcService",
-        "initTime": 0
-      }
-    },
-    "-349899408": {
-      "id": "-349899408",
-      "label": "ExternalSvcController",
-      "parent": "791004148",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "ExternalSvcModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "ExternalSvcController",
-        "initTime": 0
-      }
-    },
-    "-493958991": {
-      "id": "-493958991",
-      "label": "ChatModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-2111857237": {
-      "id": "-2111857237",
-      "label": "ModuleRef",
-      "parent": "-493958991",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "ChatModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-234035039": {
-      "id": "-234035039",
-      "label": "RequestChainService",
-      "parent": "2133316171",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "RequestChainModule",
-        "durable": false,
-        "static": false,
-        "transient": false,
-        "exported": false,
-        "token": "RequestChainService",
-        "initTime": 0
-      }
-    },
-    "-1927427604": {
-      "id": "-1927427604",
-      "label": "RequestChainController",
-      "parent": "2133316171",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "RequestChainModule",
-        "durable": false,
-        "static": false,
-        "transient": false,
-        "exported": false,
-        "token": "RequestChainController",
-        "initTime": 0,
-        "enhancers": [
-          {
-            "id": "18347652",
-            "methodKey": "greeting",
-            "subtype": "interceptor"
-          }
-        ]
-      }
-    },
-    "-162987852": {
-      "id": "-162987852",
-      "label": "HelperModule",
-      "parent": "1142369607",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "HelperModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "HelperModule",
-        "initTime": 0
-      }
-    },
-    "-1469176692": {
-      "id": "-1469176692",
-      "label": "PropertiesModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-1501313730": {
-      "id": "-1501313730",
-      "label": "PropertiesModule",
-      "parent": "-1469176692",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "PropertiesModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "PropertiesModule",
-        "initTime": 0
-      }
-    },
-    "-1377446394": {
-      "id": "-1377446394",
-      "label": "ModuleRef",
-      "parent": "-1469176692",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "PropertiesModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-1494077847": {
-      "id": "-1494077847",
-      "label": "DependencyService",
-      "parent": "-1469176692",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "PropertiesModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "DependencyService",
-        "initTime": 0
-      }
-    },
-    "-1803759743": {
-      "id": "-1803759743",
-      "label": "PropertiesService",
-      "parent": "-1469176692",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "PropertiesModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "PropertiesService",
-        "initTime": 0
-      }
-    },
-    "-1813741655": {
-      "id": "-1813741655",
-      "label": "InputModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-2113121728": {
-      "id": "-2113121728",
-      "label": "InputModule",
-      "parent": "-1813741655",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InputModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "InputModule",
-        "initTime": 0
-      }
-    },
-    "-428979729": {
-      "id": "-428979729",
-      "label": "ModuleRef",
-      "parent": "-1813741655",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InputModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-453973276": {
-      "id": "-453973276",
-      "label": "ApplicationConfig",
-      "parent": "-1813741655",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InputModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-369869768": {
-      "id": "-369869768",
-      "label": "CircularModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-88210382": {
-      "id": "-88210382",
-      "label": "ModuleRef",
-      "parent": "-369869768",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CircularModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-1641626851": {
-      "id": "-1641626851",
-      "label": "ApplicationConfig",
-      "parent": "-369869768",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CircularModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-1721730431": {
-      "id": "-1721730431",
-      "label": "CircularService",
-      "parent": "-369869768",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "CircularModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": true,
-        "token": "CircularService",
-        "initTime": 0
-      }
-    }
-  },
-  "edges": {
-    "22193019": {
-      "source": "-19112576",
-      "target": "521671888",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "DogsModule"
-      },
-      "id": "22193019"
-    },
-    "33333764": {
-      "source": "791004148",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "ExternalSvcModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "33333764"
-    },
-    "40501732": {
-      "source": "521671888",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "DogsModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "40501732"
-    },
-    "73947303": {
-      "source": "-1813741655",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "InputModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "73947303"
-    },
-    "182501115": {
-      "source": "1434441974",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "CatsModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "182501115"
-    },
-    "189694679": {
-      "source": "1434456218",
-      "target": "671882984",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "InternalCoreModule",
-        "sourceClassName": "Reflector",
-        "targetClassName": "Reflector",
-        "sourceClassToken": "Reflector",
-        "targetClassToken": "Reflector",
-        "targetModuleName": "InternalCoreModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor",
-        "internal": true
-      },
-      "id": "189694679"
-    },
-    "231469845": {
-      "source": "-1803759743",
-      "target": "-1494077847",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "PropertiesModule",
-        "sourceClassName": "PropertiesService",
-        "targetClassName": "DependencyService",
-        "sourceClassToken": "PropertiesService",
-        "targetClassToken": "DependencyService",
-        "targetModuleName": "PropertiesModule",
-        "keyOrIndex": "service",
-        "injectionType": "property"
-      },
-      "id": "231469845"
-    },
-    "250652665": {
-      "source": "2133316171",
-      "target": "1142369607",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "RequestChainModule",
-        "targetModuleName": "HelperModule"
-      },
-      "id": "250652665"
-    },
-    "393939926": {
-      "source": "-1813741655",
-      "target": "-369869768",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "InputModule",
-        "targetModuleName": "CircularModule"
-      },
-      "id": "393939926"
-    },
-    "417363164": {
-      "source": "-1251270035",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "RootTestModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "417363164"
-    },
-    "469401997": {
-      "source": "-493958991",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "ChatModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "469401997"
-    },
-    "654001290": {
-      "source": "1472486160",
-      "target": "867482265",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "HelloController",
-        "targetClassName": "Interceptor",
-        "sourceClassToken": "HelloController",
-        "targetClassToken": "Interceptor",
-        "targetModuleName": "HelloModule",
-        "injectionType": "decorator"
-      },
-      "id": "654001290"
-    },
-    "676175891": {
-      "source": "-1251270035",
-      "target": "-19112576",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "RootTestModule",
-        "targetModuleName": "AppModule"
-      },
-      "id": "676175891"
-    },
-    "800268760": {
-      "source": "-1102473136",
-      "target": "603011239",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "UsersModule",
-        "sourceClassName": "UsersController",
-        "targetClassName": "UsersService",
-        "sourceClassToken": "UsersController",
-        "targetClassToken": "UsersService",
-        "targetModuleName": "UsersModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "800268760"
-    },
-    "804987620": {
-      "source": "-19112576",
-      "target": "-1125887048",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "CoreModule"
-      },
-      "id": "804987620"
-    },
-    "807697929": {
-      "source": "-19112576",
-      "target": "1528017428",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "DatabaseModule"
-      },
-      "id": "807697929"
-    },
-    "966350248": {
-      "source": "1131051184",
-      "target": "1074192353",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "ChatModule",
-        "sourceClassName": "ChatGateway",
-        "targetClassName": "ChatService",
-        "sourceClassToken": "ChatGateway",
-        "targetClassToken": "ChatService",
-        "targetModuleName": "ChatModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "966350248"
-    },
-    "987755577": {
-      "source": "-2003726489",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "UsersModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "987755577"
-    },
-    "1056428433": {
-      "source": "-19112576",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "1056428433"
-    },
-    "1059069749": {
-      "source": "-1558907338",
-      "target": "-335387007",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "DogsModule",
-        "sourceClassName": "DogsController",
-        "targetClassName": "DogsService",
-        "sourceClassToken": "DogsController",
-        "targetClassToken": "DogsService",
-        "targetModuleName": "DogsModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "1059069749"
-    },
-    "1142343545": {
-      "source": "-1758187461",
-      "target": "1004276345",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "HelloService",
-        "targetClassName": "Meta",
-        "sourceClassToken": "HelloService",
-        "targetClassToken": "META",
-        "targetModuleName": "HelloModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "1142343545"
-    },
-    "1178436405": {
-      "source": "1893794611",
-      "target": "55510001",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "UserByIdPipe",
-        "targetClassName": "UsersService",
-        "sourceClassToken": "UserByIdPipe",
-        "targetClassToken": "UsersService",
-        "targetModuleName": "HelloModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "1178436405"
-    },
-    "1195474320": {
-      "source": "-369869768",
-      "target": "-1813741655",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "CircularModule",
-        "targetModuleName": "InputModule"
-      },
-      "id": "1195474320"
-    },
-    "1247743823": {
-      "source": "2133316171",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "RequestChainModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "1247743823"
-    },
-    "1325313063": {
-      "source": "-1927427604",
-      "target": "18347652",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "RequestChainModule",
-        "sourceClassName": "RequestChainController",
-        "targetClassName": "LoggingInterceptor",
-        "sourceClassToken": "RequestChainController",
-        "targetClassToken": "LoggingInterceptor",
-        "targetModuleName": "RequestChainModule",
-        "injectionType": "decorator"
-      },
-      "id": "1325313063"
-    },
-    "1497653915": {
-      "source": "55510001",
-      "target": "1004276345",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "UsersService",
-        "targetClassName": "Meta",
-        "sourceClassToken": "UsersService",
-        "targetClassToken": "META",
-        "targetModuleName": "HelloModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "1497653915"
-    },
-    "1615322974": {
-      "source": "-1469176692",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "PropertiesModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "1615322974"
-    },
-    "1856016815": {
-      "source": "-1721730431",
-      "target": "594986539",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "CircularModule",
-        "sourceClassName": "CircularService",
-        "targetClassName": "InputService",
-        "sourceClassToken": "CircularService",
-        "targetClassToken": "InputService",
-        "targetModuleName": "InputModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "1856016815"
-    },
-    "1900414743": {
-      "source": "1472486160",
-      "target": "1893794611",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "HelloController",
-        "targetClassName": "UserByIdPipe",
-        "sourceClassToken": "HelloController",
-        "targetClassToken": "UserByIdPipe",
-        "targetModuleName": "HelloModule",
-        "injectionType": "decorator"
-      },
-      "id": "1900414743"
-    },
-    "1904579661": {
-      "source": "18347652",
-      "target": "928565345",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "RequestChainModule",
-        "sourceClassName": "LoggingInterceptor",
-        "targetClassName": "HelperService",
-        "sourceClassToken": "LoggingInterceptor",
-        "targetClassToken": "HelperService",
-        "targetModuleName": "HelperModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "1904579661"
-    },
-    "1960203007": {
-      "source": "-1803759743",
-      "target": "980514911",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "PropertiesModule",
-        "sourceClassName": "PropertiesService",
-        "targetClassName": "Symbol(token)",
-        "sourceClassToken": "PropertiesService",
-        "targetClassToken": "Symbol(token)",
-        "targetModuleName": "PropertiesModule",
-        "keyOrIndex": "symbolToken",
-        "injectionType": "property"
-      },
-      "id": "1960203007"
-    },
-    "1976848738": {
-      "source": "1528017428",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "DatabaseModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "1976848738"
-    },
-    "-1759625292": {
-      "source": "-553129559",
-      "target": "-326832201",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "InternalCoreModule",
-        "sourceClassName": "HttpAdapterHost",
-        "targetClassName": "HttpAdapterHost",
-        "sourceClassToken": "HttpAdapterHost",
-        "targetClassToken": "HttpAdapterHost",
-        "targetModuleName": "InternalCoreModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor",
-        "internal": true
-      },
-      "id": "-1759625292"
-    },
-    "-2105726668": {
-      "source": "-1803759743",
-      "target": "1010833816",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "PropertiesModule",
-        "sourceClassName": "PropertiesService",
-        "targetClassName": "token",
-        "sourceClassToken": "PropertiesService",
-        "targetClassToken": "token",
-        "targetModuleName": "PropertiesModule",
-        "keyOrIndex": "token",
-        "injectionType": "property"
-      },
-      "id": "-2105726668"
-    },
-    "-21463590": {
-      "source": "-1378706112",
-      "target": "1004276345",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "HelloModule",
-        "targetClassName": "Meta",
-        "sourceClassToken": "HelloModule",
-        "targetClassToken": "META",
-        "targetModuleName": "HelloModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-21463590"
-    },
-    "-1657371464": {
-      "source": "-1673986099",
-      "target": "1919157847",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "DurableModule",
-        "sourceClassName": "DurableService",
-        "targetClassName": "REQUEST",
-        "sourceClassToken": "DurableService",
-        "targetClassToken": "REQUEST",
-        "targetModuleName": "InternalCoreModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor",
-        "internal": true
-      },
-      "id": "-1657371464"
-    },
-    "-1303681274": {
-      "source": "928565345",
-      "target": "1919157847",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelperModule",
-        "sourceClassName": "HelperService",
-        "targetClassName": "REQUEST",
-        "sourceClassToken": "HelperService",
-        "targetClassToken": "REQUEST",
-        "targetModuleName": "InternalCoreModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor",
-        "internal": true
-      },
-      "id": "-1303681274"
-    },
-    "-886102564": {
-      "source": "208171089",
-      "target": "671882984",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "CatsModule",
-        "sourceClassName": "RolesGuard",
-        "targetClassName": "Reflector",
-        "sourceClassToken": "RolesGuard",
-        "targetClassToken": "Reflector",
-        "targetModuleName": "InternalCoreModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor",
-        "internal": true
-      },
-      "id": "-886102564"
-    },
-    "-2003045613": {
-      "source": "-377928898",
-      "target": "-616397055",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "DatabaseModule",
-        "sourceClassName": "DatabaseController",
-        "targetClassName": "DatabaseService",
-        "sourceClassToken": "DatabaseController",
-        "targetClassToken": "DatabaseService",
-        "targetModuleName": "DatabaseModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-2003045613"
-    },
-    "-881420795": {
-      "source": "-349899408",
-      "target": "-1902429503",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "ExternalSvcModule",
-        "sourceClassName": "ExternalSvcController",
-        "targetClassName": "ExternalSvcService",
-        "sourceClassToken": "ExternalSvcController",
-        "targetClassToken": "ExternalSvcService",
-        "targetModuleName": "ExternalSvcModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-881420795"
-    },
-    "-831049991": {
-      "source": "594986539",
-      "target": "-1721730431",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "InputModule",
-        "sourceClassName": "InputService",
-        "targetClassName": "CircularService",
-        "sourceClassToken": "InputService",
-        "targetClassToken": "CircularService",
-        "targetModuleName": "CircularModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-831049991"
-    },
-    "-2146943494": {
-      "source": "-234035039",
-      "target": "928565345",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "RequestChainModule",
-        "sourceClassName": "RequestChainService",
-        "targetClassName": "HelperService",
-        "sourceClassToken": "RequestChainService",
-        "targetClassToken": "HelperService",
-        "targetModuleName": "HelperModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-2146943494"
-    },
-    "-1816180282": {
-      "source": "-848516688",
-      "target": "-1673986099",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "DurableModule",
-        "sourceClassName": "DurableController",
-        "targetClassName": "DurableService",
-        "sourceClassToken": "DurableController",
-        "targetClassToken": "DurableService",
-        "targetModuleName": "DurableModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-1816180282"
-    },
-    "-180350082": {
-      "source": "-1550892030",
-      "target": "-593595711",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "CatsModule",
-        "sourceClassName": "CatsController",
-        "targetClassName": "CatsService",
-        "sourceClassToken": "CatsController",
-        "targetClassToken": "CatsService",
-        "targetModuleName": "CatsModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-180350082"
-    },
-    "-1043628608": {
-      "source": "1472486160",
-      "target": "-1758187461",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "HelloController",
-        "targetClassName": "HelloService",
-        "sourceClassToken": "HelloController",
-        "targetClassToken": "HelloService",
-        "targetModuleName": "HelloModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-1043628608"
-    },
-    "-1335121169": {
-      "source": "1472486160",
-      "target": "55510001",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "HelloController",
-        "targetClassName": "UsersService",
-        "sourceClassToken": "HelloController",
-        "targetClassToken": "UsersService",
-        "targetModuleName": "HelloModule",
-        "keyOrIndex": 1,
-        "injectionType": "constructor"
-      },
-      "id": "-1335121169"
-    },
-    "-296280311": {
-      "source": "-1927427604",
-      "target": "-234035039",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "RequestChainModule",
-        "sourceClassName": "RequestChainController",
-        "targetClassName": "RequestChainService",
-        "sourceClassToken": "RequestChainController",
-        "targetClassToken": "RequestChainService",
-        "targetModuleName": "RequestChainModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-296280311"
-    },
-    "-393224862": {
-      "source": "-19112576",
-      "target": "1434441974",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "CatsModule"
-      },
-      "id": "-393224862"
-    },
-    "-1675983900": {
-      "source": "-19112576",
-      "target": "1743739569",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "HelloModule"
-      },
-      "id": "-1675983900"
-    },
-    "-678699872": {
-      "source": "-19112576",
-      "target": "-1124392646",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "DurableModule"
-      },
-      "id": "-678699872"
-    },
-    "-158970266": {
-      "source": "-19112576",
-      "target": "-2003726489",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "UsersModule"
-      },
-      "id": "-158970266"
-    },
-    "-2086236431": {
-      "source": "-19112576",
-      "target": "791004148",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "ExternalSvcModule"
-      },
-      "id": "-2086236431"
-    },
-    "-192150092": {
-      "source": "-19112576",
-      "target": "-493958991",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "ChatModule"
-      },
-      "id": "-192150092"
-    },
-    "-1609022090": {
-      "source": "-19112576",
-      "target": "2133316171",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "RequestChainModule"
-      },
-      "id": "-1609022090"
-    },
-    "-773455435": {
-      "source": "-19112576",
-      "target": "-1469176692",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "PropertiesModule"
-      },
-      "id": "-773455435"
-    },
-    "-967144236": {
-      "source": "-19112576",
-      "target": "-1813741655",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "InputModule"
-      },
-      "id": "-967144236"
-    },
-    "-528424051": {
-      "source": "-1125887048",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "CoreModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "-528424051"
-    },
-    "-698929209": {
-      "source": "1743739569",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "HelloModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "-698929209"
-    },
-    "-1671708813": {
-      "source": "-1124392646",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "DurableModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "-1671708813"
-    },
-    "-665042842": {
-      "source": "1142369607",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "HelperModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "-665042842"
-    },
-    "-1891610441": {
-      "source": "-369869768",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "CircularModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "-1891610441"
-    },
-    "-878379437": {
-      "source": "-1550892030",
-      "target": "208171089",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "CatsModule",
-        "sourceClassName": "CatsController",
-        "targetClassName": "RolesGuard",
-        "sourceClassToken": "CatsController",
-        "targetClassToken": "RolesGuard",
-        "targetModuleName": "CatsModule",
-        "injectionType": "decorator"
-      },
-      "id": "-878379437"
-    },
-    "-822816169": {
-      "source": "1472486160",
-      "target": "-2010060263",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "HelloController",
-        "targetClassName": "Guard",
-        "sourceClassToken": "HelloController",
-        "targetClassToken": "Guard",
-        "targetModuleName": "HelloModule",
-        "injectionType": "decorator"
-      },
-      "id": "-822816169"
-    }
-  },
-  "entrypoints": {
-    "1131051184": [
-      {
-        "type": "websocket",
-        "methodName": "create",
-        "className": "ChatGateway",
-        "classNodeId": "1131051184",
-        "metadata": {
-          "port": 0,
-          "key": "createChat",
-          "message": "createChat"
-        },
-        "id": "1131051184_create"
-      },
-      {
-        "type": "websocket",
-        "methodName": "findAll",
-        "className": "ChatGateway",
-        "classNodeId": "1131051184",
-        "metadata": {
-          "port": 0,
-          "key": "findAllChat",
-          "message": "findAllChat"
-        },
-        "id": "1131051184_findAll"
-      },
-      {
-        "type": "websocket",
-        "methodName": "findOne",
-        "className": "ChatGateway",
-        "classNodeId": "1131051184",
-        "metadata": {
-          "port": 0,
-          "key": "findOneChat",
-          "message": "findOneChat"
-        },
-        "id": "1131051184_findOne"
-      },
-      {
-        "type": "websocket",
-        "methodName": "update",
-        "className": "ChatGateway",
-        "classNodeId": "1131051184",
-        "metadata": {
-          "port": 0,
-          "key": "updateChat",
-          "message": "updateChat"
-        },
-        "id": "1131051184_update"
-      },
-      {
-        "type": "websocket",
-        "methodName": "remove",
-        "className": "ChatGateway",
-        "classNodeId": "1131051184",
-        "metadata": {
-          "port": 0,
-          "key": "removeChat",
-          "message": "removeChat"
-        },
-        "id": "1131051184_remove"
-      }
-    ],
-    "1472486160": [
-      {
-        "type": "http-endpoint",
-        "methodName": "greeting",
-        "className": "HelloController",
-        "classNodeId": "1472486160",
-        "metadata": {
-          "key": "/hello",
-          "path": "/hello",
-          "requestMethod": "GET"
-        },
-        "id": "1472486160_greeting"
-      }
-    ],
-    "1634859874": [
-      {
-        "type": "middleware",
-        "methodName": "use",
-        "className": "LoggerMiddleware",
-        "classNodeId": "1634859874",
-        "metadata": {
-          "key": "/cats/",
-          "path": "/cats/",
-          "requestMethod": "POST"
-        },
-        "id": "1634859874_use"
-      },
-      {
-        "type": "middleware",
-        "methodName": "use",
-        "className": "LoggerMiddleware",
-        "classNodeId": "1634859874",
-        "metadata": {
-          "key": "/cats/",
-          "path": "/cats/",
-          "requestMethod": "GET"
-        },
-        "id": "1634859874_use"
-      },
-      {
-        "type": "middleware",
-        "methodName": "use",
-        "className": "LoggerMiddleware",
-        "classNodeId": "1634859874",
-        "metadata": {
-          "key": "/cats/:id",
-          "path": "/cats/:id",
-          "requestMethod": "GET"
-        },
-        "id": "1634859874_use"
-      }
-    ],
-    "-349899408": [
-      {
-        "type": "microservice",
-        "methodName": "create",
-        "className": "ExternalSvcController",
-        "classNodeId": "-349899408",
-        "metadata": {
-          "key": "createExternalSvc",
-          "transportId": "TCP",
-          "patterns": [
-            "createExternalSvc"
-          ],
-          "isEventHandler": false
-        },
-        "id": "-349899408_create"
-      },
-      {
-        "type": "microservice",
-        "methodName": "findAll",
-        "className": "ExternalSvcController",
-        "classNodeId": "-349899408",
-        "metadata": {
-          "key": "findAllExternalSvc",
-          "transportId": "TCP",
-          "patterns": [
-            "findAllExternalSvc"
-          ],
-          "isEventHandler": false
-        },
-        "id": "-349899408_findAll"
-      },
-      {
-        "type": "microservice",
-        "methodName": "findOne",
-        "className": "ExternalSvcController",
-        "classNodeId": "-349899408",
-        "metadata": {
-          "key": "findOneExternalSvc",
-          "transportId": "TCP",
-          "patterns": [
-            "findOneExternalSvc"
-          ],
-          "isEventHandler": false
-        },
-        "id": "-349899408_findOne"
-      },
-      {
-        "type": "microservice",
-        "methodName": "update",
-        "className": "ExternalSvcController",
-        "classNodeId": "-349899408",
-        "metadata": {
-          "key": "updateExternalSvc",
-          "transportId": "TCP",
-          "patterns": [
-            "updateExternalSvc"
-          ],
-          "isEventHandler": false
-        },
-        "id": "-349899408_update"
-      },
-      {
-        "type": "microservice",
-        "methodName": "remove",
-        "className": "ExternalSvcController",
-        "classNodeId": "-349899408",
-        "metadata": {
-          "key": "removeExternalSvc",
-          "transportId": "TCP",
-          "patterns": [
-            "removeExternalSvc"
-          ],
-          "isEventHandler": false
-        },
-        "id": "-349899408_remove"
-      }
-    ],
-    "-365265483": [
-      {
-        "type": "http-endpoint",
-        "methodName": "helloWorldV1",
-        "className": "AppV1Controller",
-        "classNodeId": "-365265483",
-        "metadata": {
-          "key": "/v1",
-          "path": "/v1",
-          "requestMethod": "GET",
-          "controllerVersion": "1"
-        },
-        "id": "-365265483_helloWorldV1"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "paramV1",
-        "className": "AppV1Controller",
-        "classNodeId": "-365265483",
-        "metadata": {
-          "key": "/v1/:param/hello",
-          "path": "/v1/:param/hello",
-          "requestMethod": "GET",
-          "controllerVersion": "1"
-        },
-        "id": "-365265483_paramV1"
-      }
-    ],
-    "-774089708": [
-      {
-        "type": "http-endpoint",
-        "methodName": "helloWorldV2",
-        "className": "AppV2Controller",
-        "classNodeId": "-774089708",
-        "metadata": {
-          "key": "/v2",
-          "path": "/v2",
-          "requestMethod": "GET",
-          "controllerVersion": "2"
-        },
-        "id": "-774089708_helloWorldV2"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "paramV1",
-        "className": "AppV2Controller",
-        "classNodeId": "-774089708",
-        "metadata": {
-          "key": "/v3/:param/hello",
-          "path": "/v3/:param/hello",
-          "requestMethod": "GET",
-          "methodVersion": "3",
-          "controllerVersion": "2"
-        },
-        "id": "-774089708_paramV1"
-      }
-    ],
-    "-1550892030": [
-      {
-        "type": "http-endpoint",
-        "methodName": "create",
-        "className": "CatsController",
-        "classNodeId": "-1550892030",
-        "metadata": {
-          "key": "/cats",
-          "path": "/cats",
-          "requestMethod": "POST"
-        },
-        "id": "-1550892030_create"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "findAll",
-        "className": "CatsController",
-        "classNodeId": "-1550892030",
-        "metadata": {
-          "key": "/cats",
-          "path": "/cats",
-          "requestMethod": "GET"
-        },
-        "id": "-1550892030_findAll"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "findOne",
-        "className": "CatsController",
-        "classNodeId": "-1550892030",
-        "metadata": {
-          "key": "/cats/:id",
-          "path": "/cats/:id",
-          "requestMethod": "GET"
-        },
-        "id": "-1550892030_findOne"
-      }
-    ],
-    "-848516688": [
-      {
-        "type": "http-endpoint",
-        "methodName": "greeting",
-        "className": "DurableController",
-        "classNodeId": "-848516688",
-        "metadata": {
-          "key": "/durable",
-          "path": "/durable",
-          "requestMethod": "GET"
-        },
-        "id": "-848516688_greeting"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "echo",
-        "className": "DurableController",
-        "classNodeId": "-848516688",
-        "metadata": {
-          "key": "/durable/echo",
-          "path": "/durable/echo",
-          "requestMethod": "GET"
-        },
-        "id": "-848516688_echo"
-      }
-    ],
-    "-1558907338": [
-      {
-        "type": "http-endpoint",
-        "methodName": "create",
-        "className": "DogsController",
-        "classNodeId": "-1558907338",
-        "metadata": {
-          "key": "/dogs",
-          "path": "/dogs",
-          "requestMethod": "POST"
-        },
-        "id": "-1558907338_create"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "findAll",
-        "className": "DogsController",
-        "classNodeId": "-1558907338",
-        "metadata": {
-          "key": "/dogs",
-          "path": "/dogs",
-          "requestMethod": "GET"
-        },
-        "id": "-1558907338_findAll"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "findOne",
-        "className": "DogsController",
-        "classNodeId": "-1558907338",
-        "metadata": {
-          "key": "/dogs/:id",
-          "path": "/dogs/:id",
-          "requestMethod": "GET"
-        },
-        "id": "-1558907338_findOne"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "update",
-        "className": "DogsController",
-        "classNodeId": "-1558907338",
-        "metadata": {
-          "key": "/dogs/:id",
-          "path": "/dogs/:id",
-          "requestMethod": "PATCH"
-        },
-        "id": "-1558907338_update"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "remove",
-        "className": "DogsController",
-        "classNodeId": "-1558907338",
-        "metadata": {
-          "key": "/dogs/:id",
-          "path": "/dogs/:id",
-          "requestMethod": "DELETE"
-        },
-        "id": "-1558907338_remove"
-      }
-    ],
-    "-1102473136": [
-      {
-        "type": "http-endpoint",
-        "methodName": "create",
-        "className": "UsersController",
-        "classNodeId": "-1102473136",
-        "metadata": {
-          "key": "/users",
-          "path": "/users",
-          "requestMethod": "POST"
-        },
-        "id": "-1102473136_create"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "findAll",
-        "className": "UsersController",
-        "classNodeId": "-1102473136",
-        "metadata": {
-          "key": "/users",
-          "path": "/users",
-          "requestMethod": "GET"
-        },
-        "id": "-1102473136_findAll"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "findOne",
-        "className": "UsersController",
-        "classNodeId": "-1102473136",
-        "metadata": {
-          "key": "/users/:id",
-          "path": "/users/:id",
-          "requestMethod": "GET"
-        },
-        "id": "-1102473136_findOne"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "update",
-        "className": "UsersController",
-        "classNodeId": "-1102473136",
-        "metadata": {
-          "key": "/users/:id",
-          "path": "/users/:id",
-          "requestMethod": "PATCH"
-        },
-        "id": "-1102473136_update"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "remove",
-        "className": "UsersController",
-        "classNodeId": "-1102473136",
-        "metadata": {
-          "key": "/users/:id",
-          "path": "/users/:id",
-          "requestMethod": "DELETE"
-        },
-        "id": "-1102473136_remove"
-      }
-    ],
-    "-377928898": [
-      {
-        "type": "http-endpoint",
-        "methodName": "create",
-        "className": "DatabaseController",
-        "classNodeId": "-377928898",
-        "metadata": {
-          "key": "/database",
-          "path": "/database",
-          "requestMethod": "POST"
-        },
-        "id": "-377928898_create"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "findAll",
-        "className": "DatabaseController",
-        "classNodeId": "-377928898",
-        "metadata": {
-          "key": "/database",
-          "path": "/database",
-          "requestMethod": "GET"
-        },
-        "id": "-377928898_findAll"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "findOne",
-        "className": "DatabaseController",
-        "classNodeId": "-377928898",
-        "metadata": {
-          "key": "/database/:id",
-          "path": "/database/:id",
-          "requestMethod": "GET"
-        },
-        "id": "-377928898_findOne"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "update",
-        "className": "DatabaseController",
-        "classNodeId": "-377928898",
-        "metadata": {
-          "key": "/database/:id",
-          "path": "/database/:id",
-          "requestMethod": "PATCH"
-        },
-        "id": "-377928898_update"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "remove",
-        "className": "DatabaseController",
-        "classNodeId": "-377928898",
-        "metadata": {
-          "key": "/database/:id",
-          "path": "/database/:id",
-          "requestMethod": "DELETE"
-        },
-        "id": "-377928898_remove"
-      }
-    ],
-    "-1927427604": [
-      {
-        "type": "http-endpoint",
-        "methodName": "greeting",
-        "className": "RequestChainController",
-        "classNodeId": "-1927427604",
-        "metadata": {
-          "key": "/hello",
-          "path": "/hello",
-          "requestMethod": "GET"
-        },
-        "id": "-1927427604_greeting"
-      }
-    ]
-  },
-  "extras": {
-    "orphanedEnhancers": [
-      {
-        "subtype": "pipe",
-        "ref": "ValidationPipe"
-      },
-      {
-        "subtype": "filter",
-        "ref": "HttpExceptionFilter"
-      },
-      {
-        "subtype": "interceptor",
-        "ref": "TimeoutInterceptor"
-      }
-    ],
-    "attachedEnhancers": [
-      {
-        "nodeId": "2018972420"
-      },
-      {
-        "nodeId": "-2007711503"
-      }
-    ]
-  },
-  "status": "complete"
-}
\ No newline at end of file
diff --git a/integration/inspector/e2e/fixtures/pre-init-graph.json b/integration/inspector/e2e/fixtures/pre-init-graph.json
deleted file mode 100644
index 60aa1cc8e..000000000
--- a/integration/inspector/e2e/fixtures/pre-init-graph.json
+++ /dev/null
@@ -1,2629 +0,0 @@
-{
-  "nodes": {
-    "18347652": {
-      "id": "18347652",
-      "label": "LoggingInterceptor",
-      "parent": "2133316171",
-      "metadata": {
-        "type": "injectable",
-        "internal": false,
-        "sourceModuleName": "RequestChainModule",
-        "durable": false,
-        "static": false,
-        "transient": false,
-        "exported": false,
-        "token": "LoggingInterceptor",
-        "subtype": "interceptor",
-        "initTime": 0
-      }
-    },
-    "55510001": {
-      "id": "55510001",
-      "label": "UsersService",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": false,
-        "token": "UsersService",
-        "initTime": 0
-      }
-    },
-    "91819333": {
-      "id": "91819333",
-      "label": "ModuleRef",
-      "parent": "2133316171",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "RequestChainModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "203550704": {
-      "id": "203550704",
-      "label": "ExternalContextCreator",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": true,
-        "token": "ExternalContextCreator"
-      }
-    },
-    "208171089": {
-      "id": "208171089",
-      "label": "RolesGuard",
-      "parent": "1434441974",
-      "metadata": {
-        "type": "injectable",
-        "internal": false,
-        "sourceModuleName": "CatsModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "RolesGuard",
-        "subtype": "guard",
-        "initTime": 0
-      }
-    },
-    "225063248": {
-      "id": "225063248",
-      "label": "InternalCoreModule",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "InternalCoreModule",
-        "initTime": 0
-      }
-    },
-    "256260345": {
-      "id": "256260345",
-      "label": "ApplicationConfig",
-      "parent": "1528017428",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DatabaseModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "345516396": {
-      "id": "345516396",
-      "label": "ApplicationConfig",
-      "parent": "1142369607",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "HelperModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "345719894": {
-      "id": "345719894",
-      "label": "CoreModule",
-      "parent": "-1125887048",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "CoreModule",
-        "initTime": 0
-      }
-    },
-    "437945905": {
-      "id": "437945905",
-      "label": "ApplicationConfig",
-      "parent": "-1469176692",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "PropertiesModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "519735830": {
-      "id": "519735830",
-      "label": "ApplicationConfig",
-      "parent": "-493958991",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "ChatModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "521671888": {
-      "id": "521671888",
-      "label": "DogsModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "555176277": {
-      "id": "555176277",
-      "label": "InternalCoreModule",
-      "metadata": {
-        "type": "module",
-        "global": true,
-        "dynamic": true,
-        "internal": true
-      }
-    },
-    "594986539": {
-      "id": "594986539",
-      "label": "InputService",
-      "parent": "-1813741655",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "InputModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": true,
-        "token": "InputService",
-        "initTime": 0
-      }
-    },
-    "603011239": {
-      "id": "603011239",
-      "label": "UsersService",
-      "parent": "-2003726489",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "UsersModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "UsersService",
-        "initTime": 0
-      }
-    },
-    "671882984": {
-      "id": "671882984",
-      "label": "Reflector",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": true,
-        "token": "Reflector",
-        "initTime": 0
-      }
-    },
-    "791004148": {
-      "id": "791004148",
-      "label": "ExternalSvcModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "867482265": {
-      "id": "867482265",
-      "label": "Interceptor",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "injectable",
-        "internal": false,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": false,
-        "token": "Interceptor",
-        "subtype": "interceptor",
-        "initTime": 0
-      }
-    },
-    "927096496": {
-      "id": "927096496",
-      "label": "ApplicationConfig",
-      "parent": "2133316171",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "RequestChainModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "928565345": {
-      "id": "928565345",
-      "label": "HelperService",
-      "parent": "1142369607",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "HelperModule",
-        "durable": false,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": true,
-        "token": "HelperService",
-        "initTime": 0
-      }
-    },
-    "941957564": {
-      "id": "941957564",
-      "label": "RequestChainModule",
-      "parent": "2133316171",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "RequestChainModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "RequestChainModule",
-        "initTime": 0
-      }
-    },
-    "980514911": {
-      "id": "980514911",
-      "label": "Symbol(token)",
-      "parent": "-1469176692",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "PropertiesModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "Symbol(token)"
-      }
-    },
-    "1004276345": {
-      "id": "1004276345",
-      "label": "Meta",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": false,
-        "token": "META",
-        "initTime": 0
-      }
-    },
-    "1010833816": {
-      "id": "1010833816",
-      "label": "token",
-      "parent": "-1469176692",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "PropertiesModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "token"
-      }
-    },
-    "1047229654": {
-      "id": "1047229654",
-      "label": "CircularModule",
-      "parent": "-369869768",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CircularModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "CircularModule",
-        "initTime": 0
-      }
-    },
-    "1074192353": {
-      "id": "1074192353",
-      "label": "ChatService",
-      "parent": "-493958991",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "ChatModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "ChatService",
-        "initTime": 0
-      }
-    },
-    "1120316353": {
-      "id": "1120316353",
-      "label": "ModuleRef",
-      "parent": "1142369607",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "HelperModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "1131051184": {
-      "id": "1131051184",
-      "label": "ChatGateway",
-      "parent": "-493958991",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "ChatModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "ChatGateway",
-        "initTime": 0
-      }
-    },
-    "1142369607": {
-      "id": "1142369607",
-      "label": "HelperModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "1189153544": {
-      "id": "1189153544",
-      "label": "ChatModule",
-      "parent": "-493958991",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "ChatModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ChatModule",
-        "initTime": 0
-      }
-    },
-    "1253818496": {
-      "id": "1253818496",
-      "label": "RootTestModule",
-      "parent": "-1251270035",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "RootTestModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "RootTestModule",
-        "initTime": 0
-      }
-    },
-    "1433815174": {
-      "id": "1433815174",
-      "label": "DogsModule",
-      "parent": "521671888",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DogsModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "DogsModule",
-        "initTime": 0
-      }
-    },
-    "1434441974": {
-      "id": "1434441974",
-      "label": "CatsModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "1434456218": {
-      "id": "1434456218",
-      "label": "Reflector",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": true,
-        "token": "Reflector",
-        "initTime": 0
-      }
-    },
-    "1472486160": {
-      "id": "1472486160",
-      "label": "HelloController",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "transient": false,
-        "exported": false,
-        "token": "HelloController",
-        "initTime": 0,
-        "enhancers": [
-          {
-            "id": "-2010060263",
-            "methodKey": "greeting",
-            "subtype": "guard"
-          },
-          {
-            "id": "867482265",
-            "methodKey": "greeting",
-            "subtype": "interceptor"
-          },
-          {
-            "id": "1893794611",
-            "methodKey": "greeting",
-            "subtype": "pipe"
-          }
-        ]
-      }
-    },
-    "1528017428": {
-      "id": "1528017428",
-      "label": "DatabaseModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "1535366709": {
-      "id": "1535366709",
-      "label": "ApplicationConfig",
-      "parent": "521671888",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DogsModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "1551182002": {
-      "id": "1551182002",
-      "label": "ModuleRef",
-      "parent": "-1125887048",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "1616075090": {
-      "id": "1616075090",
-      "label": "CatsModule",
-      "parent": "1434441974",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CatsModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "CatsModule",
-        "initTime": 0
-      }
-    },
-    "1743739569": {
-      "id": "1743739569",
-      "label": "HelloModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": true,
-        "internal": false
-      }
-    },
-    "1771940178": {
-      "id": "1771940178",
-      "label": "ApplicationConfig",
-      "parent": "-1251270035",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "RootTestModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "1809676814": {
-      "id": "1809676814",
-      "label": "ModuleRef",
-      "parent": "1528017428",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DatabaseModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "1893794611": {
-      "id": "1893794611",
-      "label": "UserByIdPipe",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "injectable",
-        "internal": false,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "transient": false,
-        "exported": false,
-        "token": "UserByIdPipe",
-        "subtype": "pipe",
-        "initTime": 0
-      }
-    },
-    "1919157847": {
-      "id": "1919157847",
-      "label": "REQUEST",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": true,
-        "token": "REQUEST",
-        "initTime": 0
-      }
-    },
-    "2018972420": {
-      "id": "2018972420",
-      "label": "TransformInterceptor",
-      "parent": "-1125887048",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "CoreModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "APP_INTERCEPTOR (UUID: -1146749753)",
-        "subtype": "interceptor",
-        "initTime": 0,
-        "global": true
-      }
-    },
-    "2133316171": {
-      "id": "2133316171",
-      "label": "RequestChainModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-1486320561": {
-      "id": "-1486320561",
-      "label": "ModuleRef",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-651043398": {
-      "id": "-651043398",
-      "label": "ApplicationConfig",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-255469305": {
-      "id": "-255469305",
-      "label": "INQUIRER",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 1,
-        "transient": true,
-        "exported": true,
-        "token": "INQUIRER",
-        "initTime": 0
-      }
-    },
-    "-26938366": {
-      "id": "-26938366",
-      "label": "ModulesContainer",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": true,
-        "token": "ModulesContainer"
-      }
-    },
-    "-326832201": {
-      "id": "-326832201",
-      "label": "HttpAdapterHost",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": true,
-        "token": "HttpAdapterHost"
-      }
-    },
-    "-553129559": {
-      "id": "-553129559",
-      "label": "HttpAdapterHost",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": true,
-        "token": "HttpAdapterHost",
-        "initTime": 0
-      }
-    },
-    "-702581189": {
-      "id": "-702581189",
-      "label": "LazyModuleLoader",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": true,
-        "token": "LazyModuleLoader",
-        "initTime": 0
-      }
-    },
-    "-1904419534": {
-      "id": "-1904419534",
-      "label": "SerializedGraph",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": true,
-        "token": "SerializedGraph"
-      }
-    },
-    "-1251270035": {
-      "id": "-1251270035",
-      "label": "RootTestModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-969610649": {
-      "id": "-969610649",
-      "label": "ModuleRef",
-      "parent": "-1251270035",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "RootTestModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-19112576": {
-      "id": "-19112576",
-      "label": "AppModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-2139588960": {
-      "id": "-2139588960",
-      "label": "AppModule",
-      "parent": "-19112576",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "AppModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "AppModule",
-        "initTime": 0
-      }
-    },
-    "-71302842": {
-      "id": "-71302842",
-      "label": "ModuleRef",
-      "parent": "-19112576",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "AppModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-2064622725": {
-      "id": "-2064622725",
-      "label": "ApplicationConfig",
-      "parent": "-19112576",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "AppModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-365265483": {
-      "id": "-365265483",
-      "label": "AppV1Controller",
-      "parent": "-19112576",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "AppModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "AppV1Controller",
-        "initTime": 0
-      }
-    },
-    "-774089708": {
-      "id": "-774089708",
-      "label": "AppV2Controller",
-      "parent": "-19112576",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "AppModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "AppV2Controller",
-        "initTime": 0
-      }
-    },
-    "-1125887048": {
-      "id": "-1125887048",
-      "label": "CoreModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-112192227": {
-      "id": "-112192227",
-      "label": "ApplicationConfig",
-      "parent": "-1125887048",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-2007711503": {
-      "id": "-2007711503",
-      "label": "LoggingInterceptor",
-      "parent": "-1125887048",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "CoreModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "APP_INTERCEPTOR (UUID: 1780085433)",
-        "subtype": "interceptor",
-        "initTime": 0,
-        "global": true
-      }
-    },
-    "-183456272": {
-      "id": "-183456272",
-      "label": "ModuleRef",
-      "parent": "1434441974",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CatsModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-1846830501": {
-      "id": "-1846830501",
-      "label": "ApplicationConfig",
-      "parent": "1434441974",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CatsModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-593595711": {
-      "id": "-593595711",
-      "label": "CatsService",
-      "parent": "1434441974",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "CatsModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "CatsService",
-        "initTime": 0
-      }
-    },
-    "-1550892030": {
-      "id": "-1550892030",
-      "label": "CatsController",
-      "parent": "1434441974",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "CatsModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "CatsController",
-        "initTime": 0,
-        "enhancers": [
-          {
-            "id": "208171089",
-            "subtype": "guard"
-          },
-          {
-            "name": "ParseIntPipe",
-            "methodKey": "findOne",
-            "subtype": "pipe"
-          }
-        ]
-      }
-    },
-    "-1378706112": {
-      "id": "-1378706112",
-      "label": "HelloModule",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "HelloModule",
-        "initTime": 0
-      }
-    },
-    "-1166465801": {
-      "id": "-1166465801",
-      "label": "ModuleRef",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-1191459348": {
-      "id": "-1191459348",
-      "label": "ApplicationConfig",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-1758187461": {
-      "id": "-1758187461",
-      "label": "HelloService",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": false,
-        "token": "HelloService",
-        "initTime": 0
-      }
-    },
-    "-2010060263": {
-      "id": "-2010060263",
-      "label": "Guard",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "injectable",
-        "internal": false,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": false,
-        "token": "Guard",
-        "subtype": "guard",
-        "initTime": 0
-      }
-    },
-    "-1124392646": {
-      "id": "-1124392646",
-      "label": "DurableModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-522935456": {
-      "id": "-522935456",
-      "label": "DurableModule",
-      "parent": "-1124392646",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DurableModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "DurableModule",
-        "initTime": 0
-      }
-    },
-    "-1808043520": {
-      "id": "-1808043520",
-      "label": "ModuleRef",
-      "parent": "-1124392646",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DurableModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-57038411": {
-      "id": "-57038411",
-      "label": "ApplicationConfig",
-      "parent": "-1124392646",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DurableModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-1673986099": {
-      "id": "-1673986099",
-      "label": "DurableService",
-      "parent": "-1124392646",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "DurableModule",
-        "durable": true,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": false,
-        "token": "DurableService",
-        "initTime": 0
-      }
-    },
-    "-848516688": {
-      "id": "-848516688",
-      "label": "DurableController",
-      "parent": "-1124392646",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "DurableModule",
-        "durable": true,
-        "static": false,
-        "transient": false,
-        "exported": false,
-        "token": "DurableController",
-        "initTime": 0
-      }
-    },
-    "-1096226358": {
-      "id": "-1096226358",
-      "label": "ModuleRef",
-      "parent": "521671888",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DogsModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-335387007": {
-      "id": "-335387007",
-      "label": "DogsService",
-      "parent": "521671888",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "DogsModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "DogsService",
-        "initTime": 0
-      }
-    },
-    "-1558907338": {
-      "id": "-1558907338",
-      "label": "DogsController",
-      "parent": "521671888",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "DogsModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "DogsController",
-        "initTime": 0
-      }
-    },
-    "-2003726489": {
-      "id": "-2003726489",
-      "label": "UsersModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-495603840": {
-      "id": "-495603840",
-      "label": "UsersModule",
-      "parent": "-2003726489",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "UsersModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "UsersModule",
-        "initTime": 0
-      }
-    },
-    "-618964563": {
-      "id": "-618964563",
-      "label": "ModuleRef",
-      "parent": "-2003726489",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "UsersModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-643958110": {
-      "id": "-643958110",
-      "label": "ApplicationConfig",
-      "parent": "-2003726489",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "UsersModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-1102473136": {
-      "id": "-1102473136",
-      "label": "UsersController",
-      "parent": "-2003726489",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "UsersModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "UsersController",
-        "initTime": 0
-      }
-    },
-    "-1098322034": {
-      "id": "-1098322034",
-      "label": "DatabaseModule",
-      "parent": "1528017428",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DatabaseModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "DatabaseModule",
-        "initTime": 0
-      }
-    },
-    "-616397055": {
-      "id": "-616397055",
-      "label": "DatabaseService",
-      "parent": "1528017428",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "DatabaseModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "DatabaseService",
-        "initTime": 0
-      }
-    },
-    "-377928898": {
-      "id": "-377928898",
-      "label": "DatabaseController",
-      "parent": "1528017428",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "DatabaseModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "DatabaseController",
-        "initTime": 0
-      }
-    },
-    "-511735264": {
-      "id": "-511735264",
-      "label": "ExternalSvcModule",
-      "parent": "791004148",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "ExternalSvcModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ExternalSvcModule",
-        "initTime": 0
-      }
-    },
-    "-660323910": {
-      "id": "-660323910",
-      "label": "ModuleRef",
-      "parent": "791004148",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "ExternalSvcModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-217737489": {
-      "id": "-217737489",
-      "label": "ApplicationConfig",
-      "parent": "791004148",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "ExternalSvcModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-1902429503": {
-      "id": "-1902429503",
-      "label": "ExternalSvcService",
-      "parent": "791004148",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "ExternalSvcModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "ExternalSvcService",
-        "initTime": 0
-      }
-    },
-    "-349899408": {
-      "id": "-349899408",
-      "label": "ExternalSvcController",
-      "parent": "791004148",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "ExternalSvcModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "ExternalSvcController",
-        "initTime": 0
-      }
-    },
-    "-493958991": {
-      "id": "-493958991",
-      "label": "ChatModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-2111857237": {
-      "id": "-2111857237",
-      "label": "ModuleRef",
-      "parent": "-493958991",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "ChatModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-234035039": {
-      "id": "-234035039",
-      "label": "RequestChainService",
-      "parent": "2133316171",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "RequestChainModule",
-        "durable": false,
-        "static": false,
-        "transient": false,
-        "exported": false,
-        "token": "RequestChainService",
-        "initTime": 0
-      }
-    },
-    "-1927427604": {
-      "id": "-1927427604",
-      "label": "RequestChainController",
-      "parent": "2133316171",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "RequestChainModule",
-        "durable": false,
-        "static": false,
-        "transient": false,
-        "exported": false,
-        "token": "RequestChainController",
-        "initTime": 0,
-        "enhancers": [
-          {
-            "id": "18347652",
-            "methodKey": "greeting",
-            "subtype": "interceptor"
-          }
-        ]
-      }
-    },
-    "-162987852": {
-      "id": "-162987852",
-      "label": "HelperModule",
-      "parent": "1142369607",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "HelperModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "HelperModule",
-        "initTime": 0
-      }
-    },
-    "-1469176692": {
-      "id": "-1469176692",
-      "label": "PropertiesModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-1501313730": {
-      "id": "-1501313730",
-      "label": "PropertiesModule",
-      "parent": "-1469176692",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "PropertiesModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "PropertiesModule",
-        "initTime": 0
-      }
-    },
-    "-1377446394": {
-      "id": "-1377446394",
-      "label": "ModuleRef",
-      "parent": "-1469176692",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "PropertiesModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-1494077847": {
-      "id": "-1494077847",
-      "label": "DependencyService",
-      "parent": "-1469176692",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "PropertiesModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "DependencyService",
-        "initTime": 0
-      }
-    },
-    "-1803759743": {
-      "id": "-1803759743",
-      "label": "PropertiesService",
-      "parent": "-1469176692",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "PropertiesModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "PropertiesService",
-        "initTime": 0
-      }
-    },
-    "-1813741655": {
-      "id": "-1813741655",
-      "label": "InputModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-2113121728": {
-      "id": "-2113121728",
-      "label": "InputModule",
-      "parent": "-1813741655",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InputModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "InputModule",
-        "initTime": 0
-      }
-    },
-    "-428979729": {
-      "id": "-428979729",
-      "label": "ModuleRef",
-      "parent": "-1813741655",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InputModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-453973276": {
-      "id": "-453973276",
-      "label": "ApplicationConfig",
-      "parent": "-1813741655",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InputModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-369869768": {
-      "id": "-369869768",
-      "label": "CircularModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-88210382": {
-      "id": "-88210382",
-      "label": "ModuleRef",
-      "parent": "-369869768",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CircularModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-1641626851": {
-      "id": "-1641626851",
-      "label": "ApplicationConfig",
-      "parent": "-369869768",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CircularModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-1721730431": {
-      "id": "-1721730431",
-      "label": "CircularService",
-      "parent": "-369869768",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "CircularModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": true,
-        "token": "CircularService",
-        "initTime": 0
-      }
-    }
-  },
-  "edges": {
-    "22193019": {
-      "source": "-19112576",
-      "target": "521671888",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "DogsModule"
-      },
-      "id": "22193019"
-    },
-    "33333764": {
-      "source": "791004148",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "ExternalSvcModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "33333764"
-    },
-    "40501732": {
-      "source": "521671888",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "DogsModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "40501732"
-    },
-    "73947303": {
-      "source": "-1813741655",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "InputModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "73947303"
-    },
-    "182501115": {
-      "source": "1434441974",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "CatsModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "182501115"
-    },
-    "189694679": {
-      "source": "1434456218",
-      "target": "671882984",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "InternalCoreModule",
-        "sourceClassName": "Reflector",
-        "targetClassName": "Reflector",
-        "sourceClassToken": "Reflector",
-        "targetClassToken": "Reflector",
-        "targetModuleName": "InternalCoreModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor",
-        "internal": true
-      },
-      "id": "189694679"
-    },
-    "231469845": {
-      "source": "-1803759743",
-      "target": "-1494077847",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "PropertiesModule",
-        "sourceClassName": "PropertiesService",
-        "targetClassName": "DependencyService",
-        "sourceClassToken": "PropertiesService",
-        "targetClassToken": "DependencyService",
-        "targetModuleName": "PropertiesModule",
-        "keyOrIndex": "service",
-        "injectionType": "property"
-      },
-      "id": "231469845"
-    },
-    "250652665": {
-      "source": "2133316171",
-      "target": "1142369607",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "RequestChainModule",
-        "targetModuleName": "HelperModule"
-      },
-      "id": "250652665"
-    },
-    "393939926": {
-      "source": "-1813741655",
-      "target": "-369869768",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "InputModule",
-        "targetModuleName": "CircularModule"
-      },
-      "id": "393939926"
-    },
-    "417363164": {
-      "source": "-1251270035",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "RootTestModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "417363164"
-    },
-    "469401997": {
-      "source": "-493958991",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "ChatModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "469401997"
-    },
-    "654001290": {
-      "source": "1472486160",
-      "target": "867482265",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "HelloController",
-        "targetClassName": "Interceptor",
-        "sourceClassToken": "HelloController",
-        "targetClassToken": "Interceptor",
-        "targetModuleName": "HelloModule",
-        "injectionType": "decorator"
-      },
-      "id": "654001290"
-    },
-    "676175891": {
-      "source": "-1251270035",
-      "target": "-19112576",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "RootTestModule",
-        "targetModuleName": "AppModule"
-      },
-      "id": "676175891"
-    },
-    "800268760": {
-      "source": "-1102473136",
-      "target": "603011239",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "UsersModule",
-        "sourceClassName": "UsersController",
-        "targetClassName": "UsersService",
-        "sourceClassToken": "UsersController",
-        "targetClassToken": "UsersService",
-        "targetModuleName": "UsersModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "800268760"
-    },
-    "804987620": {
-      "source": "-19112576",
-      "target": "-1125887048",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "CoreModule"
-      },
-      "id": "804987620"
-    },
-    "807697929": {
-      "source": "-19112576",
-      "target": "1528017428",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "DatabaseModule"
-      },
-      "id": "807697929"
-    },
-    "966350248": {
-      "source": "1131051184",
-      "target": "1074192353",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "ChatModule",
-        "sourceClassName": "ChatGateway",
-        "targetClassName": "ChatService",
-        "sourceClassToken": "ChatGateway",
-        "targetClassToken": "ChatService",
-        "targetModuleName": "ChatModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "966350248"
-    },
-    "987755577": {
-      "source": "-2003726489",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "UsersModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "987755577"
-    },
-    "1056428433": {
-      "source": "-19112576",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "1056428433"
-    },
-    "1059069749": {
-      "source": "-1558907338",
-      "target": "-335387007",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "DogsModule",
-        "sourceClassName": "DogsController",
-        "targetClassName": "DogsService",
-        "sourceClassToken": "DogsController",
-        "targetClassToken": "DogsService",
-        "targetModuleName": "DogsModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "1059069749"
-    },
-    "1142343545": {
-      "source": "-1758187461",
-      "target": "1004276345",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "HelloService",
-        "targetClassName": "Meta",
-        "sourceClassToken": "HelloService",
-        "targetClassToken": "META",
-        "targetModuleName": "HelloModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "1142343545"
-    },
-    "1178436405": {
-      "source": "1893794611",
-      "target": "55510001",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "UserByIdPipe",
-        "targetClassName": "UsersService",
-        "sourceClassToken": "UserByIdPipe",
-        "targetClassToken": "UsersService",
-        "targetModuleName": "HelloModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "1178436405"
-    },
-    "1195474320": {
-      "source": "-369869768",
-      "target": "-1813741655",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "CircularModule",
-        "targetModuleName": "InputModule"
-      },
-      "id": "1195474320"
-    },
-    "1247743823": {
-      "source": "2133316171",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "RequestChainModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "1247743823"
-    },
-    "1325313063": {
-      "source": "-1927427604",
-      "target": "18347652",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "RequestChainModule",
-        "sourceClassName": "RequestChainController",
-        "targetClassName": "LoggingInterceptor",
-        "sourceClassToken": "RequestChainController",
-        "targetClassToken": "LoggingInterceptor",
-        "targetModuleName": "RequestChainModule",
-        "injectionType": "decorator"
-      },
-      "id": "1325313063"
-    },
-    "1497653915": {
-      "source": "55510001",
-      "target": "1004276345",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "UsersService",
-        "targetClassName": "Meta",
-        "sourceClassToken": "UsersService",
-        "targetClassToken": "META",
-        "targetModuleName": "HelloModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "1497653915"
-    },
-    "1615322974": {
-      "source": "-1469176692",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "PropertiesModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "1615322974"
-    },
-    "1856016815": {
-      "source": "-1721730431",
-      "target": "594986539",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "CircularModule",
-        "sourceClassName": "CircularService",
-        "targetClassName": "InputService",
-        "sourceClassToken": "CircularService",
-        "targetClassToken": "InputService",
-        "targetModuleName": "InputModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "1856016815"
-    },
-    "1900414743": {
-      "source": "1472486160",
-      "target": "1893794611",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "HelloController",
-        "targetClassName": "UserByIdPipe",
-        "sourceClassToken": "HelloController",
-        "targetClassToken": "UserByIdPipe",
-        "targetModuleName": "HelloModule",
-        "injectionType": "decorator"
-      },
-      "id": "1900414743"
-    },
-    "1904579661": {
-      "source": "18347652",
-      "target": "928565345",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "RequestChainModule",
-        "sourceClassName": "LoggingInterceptor",
-        "targetClassName": "HelperService",
-        "sourceClassToken": "LoggingInterceptor",
-        "targetClassToken": "HelperService",
-        "targetModuleName": "HelperModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "1904579661"
-    },
-    "1960203007": {
-      "source": "-1803759743",
-      "target": "980514911",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "PropertiesModule",
-        "sourceClassName": "PropertiesService",
-        "targetClassName": "Symbol(token)",
-        "sourceClassToken": "PropertiesService",
-        "targetClassToken": "Symbol(token)",
-        "targetModuleName": "PropertiesModule",
-        "keyOrIndex": "symbolToken",
-        "injectionType": "property"
-      },
-      "id": "1960203007"
-    },
-    "1976848738": {
-      "source": "1528017428",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "DatabaseModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "1976848738"
-    },
-    "-1759625292": {
-      "source": "-553129559",
-      "target": "-326832201",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "InternalCoreModule",
-        "sourceClassName": "HttpAdapterHost",
-        "targetClassName": "HttpAdapterHost",
-        "sourceClassToken": "HttpAdapterHost",
-        "targetClassToken": "HttpAdapterHost",
-        "targetModuleName": "InternalCoreModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor",
-        "internal": true
-      },
-      "id": "-1759625292"
-    },
-    "-2105726668": {
-      "source": "-1803759743",
-      "target": "1010833816",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "PropertiesModule",
-        "sourceClassName": "PropertiesService",
-        "targetClassName": "token",
-        "sourceClassToken": "PropertiesService",
-        "targetClassToken": "token",
-        "targetModuleName": "PropertiesModule",
-        "keyOrIndex": "token",
-        "injectionType": "property"
-      },
-      "id": "-2105726668"
-    },
-    "-21463590": {
-      "source": "-1378706112",
-      "target": "1004276345",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "HelloModule",
-        "targetClassName": "Meta",
-        "sourceClassToken": "HelloModule",
-        "targetClassToken": "META",
-        "targetModuleName": "HelloModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-21463590"
-    },
-    "-1657371464": {
-      "source": "-1673986099",
-      "target": "1919157847",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "DurableModule",
-        "sourceClassName": "DurableService",
-        "targetClassName": "REQUEST",
-        "sourceClassToken": "DurableService",
-        "targetClassToken": "REQUEST",
-        "targetModuleName": "InternalCoreModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor",
-        "internal": true
-      },
-      "id": "-1657371464"
-    },
-    "-1303681274": {
-      "source": "928565345",
-      "target": "1919157847",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelperModule",
-        "sourceClassName": "HelperService",
-        "targetClassName": "REQUEST",
-        "sourceClassToken": "HelperService",
-        "targetClassToken": "REQUEST",
-        "targetModuleName": "InternalCoreModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor",
-        "internal": true
-      },
-      "id": "-1303681274"
-    },
-    "-886102564": {
-      "source": "208171089",
-      "target": "671882984",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "CatsModule",
-        "sourceClassName": "RolesGuard",
-        "targetClassName": "Reflector",
-        "sourceClassToken": "RolesGuard",
-        "targetClassToken": "Reflector",
-        "targetModuleName": "InternalCoreModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor",
-        "internal": true
-      },
-      "id": "-886102564"
-    },
-    "-2003045613": {
-      "source": "-377928898",
-      "target": "-616397055",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "DatabaseModule",
-        "sourceClassName": "DatabaseController",
-        "targetClassName": "DatabaseService",
-        "sourceClassToken": "DatabaseController",
-        "targetClassToken": "DatabaseService",
-        "targetModuleName": "DatabaseModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-2003045613"
-    },
-    "-881420795": {
-      "source": "-349899408",
-      "target": "-1902429503",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "ExternalSvcModule",
-        "sourceClassName": "ExternalSvcController",
-        "targetClassName": "ExternalSvcService",
-        "sourceClassToken": "ExternalSvcController",
-        "targetClassToken": "ExternalSvcService",
-        "targetModuleName": "ExternalSvcModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-881420795"
-    },
-    "-831049991": {
-      "source": "594986539",
-      "target": "-1721730431",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "InputModule",
-        "sourceClassName": "InputService",
-        "targetClassName": "CircularService",
-        "sourceClassToken": "InputService",
-        "targetClassToken": "CircularService",
-        "targetModuleName": "CircularModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-831049991"
-    },
-    "-2146943494": {
-      "source": "-234035039",
-      "target": "928565345",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "RequestChainModule",
-        "sourceClassName": "RequestChainService",
-        "targetClassName": "HelperService",
-        "sourceClassToken": "RequestChainService",
-        "targetClassToken": "HelperService",
-        "targetModuleName": "HelperModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-2146943494"
-    },
-    "-1816180282": {
-      "source": "-848516688",
-      "target": "-1673986099",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "DurableModule",
-        "sourceClassName": "DurableController",
-        "targetClassName": "DurableService",
-        "sourceClassToken": "DurableController",
-        "targetClassToken": "DurableService",
-        "targetModuleName": "DurableModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-1816180282"
-    },
-    "-180350082": {
-      "source": "-1550892030",
-      "target": "-593595711",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "CatsModule",
-        "sourceClassName": "CatsController",
-        "targetClassName": "CatsService",
-        "sourceClassToken": "CatsController",
-        "targetClassToken": "CatsService",
-        "targetModuleName": "CatsModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-180350082"
-    },
-    "-1043628608": {
-      "source": "1472486160",
-      "target": "-1758187461",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "HelloController",
-        "targetClassName": "HelloService",
-        "sourceClassToken": "HelloController",
-        "targetClassToken": "HelloService",
-        "targetModuleName": "HelloModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-1043628608"
-    },
-    "-1335121169": {
-      "source": "1472486160",
-      "target": "55510001",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "HelloController",
-        "targetClassName": "UsersService",
-        "sourceClassToken": "HelloController",
-        "targetClassToken": "UsersService",
-        "targetModuleName": "HelloModule",
-        "keyOrIndex": 1,
-        "injectionType": "constructor"
-      },
-      "id": "-1335121169"
-    },
-    "-296280311": {
-      "source": "-1927427604",
-      "target": "-234035039",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "RequestChainModule",
-        "sourceClassName": "RequestChainController",
-        "targetClassName": "RequestChainService",
-        "sourceClassToken": "RequestChainController",
-        "targetClassToken": "RequestChainService",
-        "targetModuleName": "RequestChainModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-296280311"
-    },
-    "-393224862": {
-      "source": "-19112576",
-      "target": "1434441974",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "CatsModule"
-      },
-      "id": "-393224862"
-    },
-    "-1675983900": {
-      "source": "-19112576",
-      "target": "1743739569",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "HelloModule"
-      },
-      "id": "-1675983900"
-    },
-    "-678699872": {
-      "source": "-19112576",
-      "target": "-1124392646",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "DurableModule"
-      },
-      "id": "-678699872"
-    },
-    "-158970266": {
-      "source": "-19112576",
-      "target": "-2003726489",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "UsersModule"
-      },
-      "id": "-158970266"
-    },
-    "-2086236431": {
-      "source": "-19112576",
-      "target": "791004148",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "ExternalSvcModule"
-      },
-      "id": "-2086236431"
-    },
-    "-192150092": {
-      "source": "-19112576",
-      "target": "-493958991",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "ChatModule"
-      },
-      "id": "-192150092"
-    },
-    "-1609022090": {
-      "source": "-19112576",
-      "target": "2133316171",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "RequestChainModule"
-      },
-      "id": "-1609022090"
-    },
-    "-773455435": {
-      "source": "-19112576",
-      "target": "-1469176692",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "PropertiesModule"
-      },
-      "id": "-773455435"
-    },
-    "-967144236": {
-      "source": "-19112576",
-      "target": "-1813741655",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "InputModule"
-      },
-      "id": "-967144236"
-    },
-    "-528424051": {
-      "source": "-1125887048",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "CoreModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "-528424051"
-    },
-    "-698929209": {
-      "source": "1743739569",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "HelloModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "-698929209"
-    },
-    "-1671708813": {
-      "source": "-1124392646",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "DurableModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "-1671708813"
-    },
-    "-665042842": {
-      "source": "1142369607",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "HelperModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "-665042842"
-    },
-    "-1891610441": {
-      "source": "-369869768",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "CircularModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "-1891610441"
-    },
-    "-878379437": {
-      "source": "-1550892030",
-      "target": "208171089",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "CatsModule",
-        "sourceClassName": "CatsController",
-        "targetClassName": "RolesGuard",
-        "sourceClassToken": "CatsController",
-        "targetClassToken": "RolesGuard",
-        "targetModuleName": "CatsModule",
-        "injectionType": "decorator"
-      },
-      "id": "-878379437"
-    },
-    "-822816169": {
-      "source": "1472486160",
-      "target": "-2010060263",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "HelloController",
-        "targetClassName": "Guard",
-        "sourceClassToken": "HelloController",
-        "targetClassToken": "Guard",
-        "targetModuleName": "HelloModule",
-        "injectionType": "decorator"
-      },
-      "id": "-822816169"
-    }
-  },
-  "entrypoints": {},
-  "extras": {
-    "orphanedEnhancers": [],
-    "attachedEnhancers": [
-      {
-        "nodeId": "2018972420"
-      },
-      {
-        "nodeId": "-2007711503"
-      }
-    ]
-  },
-  "status": "complete"
-}
\ No newline at end of file
diff --git a/integration/inspector/src/app-v1.controller.ts b/integration/inspector/src/app-v1.controller.ts
deleted file mode 100644
index 90d1dacba..000000000
--- a/integration/inspector/src/app-v1.controller.ts
+++ /dev/null
@@ -1,16 +0,0 @@
-import { Controller, Get } from '@nestjs/common';
-
-@Controller({
-  version: '1',
-})
-export class AppV1Controller {
-  @Get('/')
-  helloWorldV1() {
-    return 'Hello World V1!';
-  }
-
-  @Get('/:param/hello')
-  paramV1() {
-    return 'Parameter V1!';
-  }
-}
diff --git a/integration/inspector/src/app-v2.controller.ts b/integration/inspector/src/app-v2.controller.ts
deleted file mode 100644
index 5be777871..000000000
--- a/integration/inspector/src/app-v2.controller.ts
+++ /dev/null
@@ -1,17 +0,0 @@
-import { Controller, Get, Version } from '@nestjs/common';
-
-@Controller({
-  version: '2',
-})
-export class AppV2Controller {
-  @Get('/')
-  helloWorldV2() {
-    return 'Hello World V2!';
-  }
-
-  @Version('3')
-  @Get('/:param/hello')
-  paramV1() {
-    return 'Parameter V2!';
-  }
-}
diff --git a/integration/inspector/src/app.module.ts b/integration/inspector/src/app.module.ts
deleted file mode 100644
index 1d395b9bf..000000000
--- a/integration/inspector/src/app.module.ts
+++ /dev/null
@@ -1,46 +0,0 @@
-import { Module, Scope } from '@nestjs/common';
-import { AppV1Controller } from './app-v1.controller';
-import { AppV2Controller } from './app-v2.controller';
-import { CatsModule } from './cats/cats.module';
-import { ChatModule } from './chat/chat.module';
-import { HelloModule as CircularHelloModule } from './circular-hello/hello.module';
-import { HelloService } from './circular-hello/hello.service';
-import { InputModule } from './circular-modules/input.module';
-import { CoreModule } from './core/core.module';
-import { DatabaseModule } from './database/database.module';
-import { DogsModule } from './dogs/dogs.module';
-import { DurableModule } from './durable/durable.module';
-import { ExternalSvcModule } from './external-svc/external-svc.module';
-import { PropertiesModule } from './properties/properties.module';
-import { RequestChainModule } from './request-chain/request-chain.module';
-import { UsersModule } from './users/users.module';
-
-class Meta {
-  static COUNTER = 0;
-  constructor(private readonly helloService: HelloService) {
-    Meta.COUNTER++;
-  }
-}
-
-@Module({
-  imports: [
-    CoreModule,
-    CatsModule,
-    CircularHelloModule.forRoot({
-      provide: 'META',
-      useClass: Meta,
-      scope: Scope.REQUEST,
-    }),
-    DurableModule,
-    DogsModule,
-    UsersModule,
-    DatabaseModule,
-    ExternalSvcModule,
-    ChatModule,
-    RequestChainModule,
-    PropertiesModule,
-    InputModule,
-  ],
-  controllers: [AppV1Controller, AppV2Controller],
-})
-export class AppModule {}
diff --git a/integration/inspector/src/cats/cats.controller.ts b/integration/inspector/src/cats/cats.controller.ts
deleted file mode 100644
index b9f929a21..000000000
--- a/integration/inspector/src/cats/cats.controller.ts
+++ /dev/null
@@ -1,30 +0,0 @@
-import { Body, Controller, Get, Param, Post, UseGuards } from '@nestjs/common';
-import { RolesGuard } from '../common/guards/roles.guard';
-import { ParseIntPipe } from '../common/pipes/parse-int.pipe';
-import { CatsService } from './cats.service';
-import { CreateCatDto } from './dto/create-cat.dto';
-import { Cat } from './interfaces/cat.interface';
-
-@UseGuards(RolesGuard)
-@Controller('cats')
-export class CatsController {
-  constructor(private readonly catsService: CatsService) {}
-
-  @Post()
-  async create(@Body() createCatDto: CreateCatDto) {
-    this.catsService.create(createCatDto);
-  }
-
-  @Get()
-  async findAll(): Promise<Cat[]> {
-    return this.catsService.findAll();
-  }
-
-  @Get(':id')
-  findOne(
-    @Param('id', new ParseIntPipe())
-    id: number,
-  ) {
-    // get by ID logic
-  }
-}
diff --git a/integration/inspector/src/cats/cats.module.ts b/integration/inspector/src/cats/cats.module.ts
deleted file mode 100644
index f3291c7d1..000000000
--- a/integration/inspector/src/cats/cats.module.ts
+++ /dev/null
@@ -1,9 +0,0 @@
-import { Module } from '@nestjs/common';
-import { CatsController } from './cats.controller';
-import { CatsService } from './cats.service';
-
-@Module({
-  controllers: [CatsController],
-  providers: [CatsService],
-})
-export class CatsModule {}
diff --git a/integration/inspector/src/cats/cats.service.ts b/integration/inspector/src/cats/cats.service.ts
deleted file mode 100644
index 2619cd717..000000000
--- a/integration/inspector/src/cats/cats.service.ts
+++ /dev/null
@@ -1,15 +0,0 @@
-import { Injectable } from '@nestjs/common';
-import { Cat } from './interfaces/cat.interface';
-
-@Injectable()
-export class CatsService {
-  private readonly cats: Cat[] = [];
-
-  create(cat: Cat) {
-    this.cats.push(cat);
-  }
-
-  findAll(): Cat[] {
-    return this.cats;
-  }
-}
diff --git a/integration/inspector/src/cats/dto/create-cat.dto.ts b/integration/inspector/src/cats/dto/create-cat.dto.ts
deleted file mode 100644
index acd7d288b..000000000
--- a/integration/inspector/src/cats/dto/create-cat.dto.ts
+++ /dev/null
@@ -1,12 +0,0 @@
-import { IsInt, IsString } from 'class-validator';
-
-export class CreateCatDto {
-  @IsString()
-  readonly name: string;
-
-  @IsInt()
-  readonly age: number;
-
-  @IsString()
-  readonly breed: string;
-}
diff --git a/integration/inspector/src/cats/interfaces/cat.interface.ts b/integration/inspector/src/cats/interfaces/cat.interface.ts
deleted file mode 100644
index 961c97391..000000000
--- a/integration/inspector/src/cats/interfaces/cat.interface.ts
+++ /dev/null
@@ -1,5 +0,0 @@
-export interface Cat {
-  name: string;
-  age: number;
-  breed: string;
-}
diff --git a/integration/inspector/src/chat/chat.gateway.ts b/integration/inspector/src/chat/chat.gateway.ts
deleted file mode 100644
index 75e6c7c28..000000000
--- a/integration/inspector/src/chat/chat.gateway.ts
+++ /dev/null
@@ -1,38 +0,0 @@
-import {
-  WebSocketGateway,
-  SubscribeMessage,
-  MessageBody,
-} from '@nestjs/websockets';
-import { ChatService } from './chat.service';
-import { CreateChatDto } from './dto/create-chat.dto';
-import { UpdateChatDto } from './dto/update-chat.dto';
-
-@WebSocketGateway()
-export class ChatGateway {
-  constructor(private readonly chatService: ChatService) {}
-
-  @SubscribeMessage('createChat')
-  create(@MessageBody() createChatDto: CreateChatDto) {
-    return this.chatService.create(createChatDto);
-  }
-
-  @SubscribeMessage('findAllChat')
-  findAll() {
-    return this.chatService.findAll();
-  }
-
-  @SubscribeMessage('findOneChat')
-  findOne(@MessageBody() id: number) {
-    return this.chatService.findOne(id);
-  }
-
-  @SubscribeMessage('updateChat')
-  update(@MessageBody() updateChatDto: UpdateChatDto) {
-    return this.chatService.update(updateChatDto.id, updateChatDto);
-  }
-
-  @SubscribeMessage('removeChat')
-  remove(@MessageBody() id: number) {
-    return this.chatService.remove(id);
-  }
-}
diff --git a/integration/inspector/src/chat/chat.module.ts b/integration/inspector/src/chat/chat.module.ts
deleted file mode 100644
index d3ad301f5..000000000
--- a/integration/inspector/src/chat/chat.module.ts
+++ /dev/null
@@ -1,8 +0,0 @@
-import { Module } from '@nestjs/common';
-import { ChatService } from './chat.service';
-import { ChatGateway } from './chat.gateway';
-
-@Module({
-  providers: [ChatGateway, ChatService],
-})
-export class ChatModule {}
diff --git a/integration/inspector/src/chat/chat.service.ts b/integration/inspector/src/chat/chat.service.ts
deleted file mode 100644
index 1fa0676de..000000000
--- a/integration/inspector/src/chat/chat.service.ts
+++ /dev/null
@@ -1,26 +0,0 @@
-import { Injectable } from '@nestjs/common';
-import { CreateChatDto } from './dto/create-chat.dto';
-import { UpdateChatDto } from './dto/update-chat.dto';
-
-@Injectable()
-export class ChatService {
-  create(createChatDto: CreateChatDto) {
-    return 'This action adds a new chat';
-  }
-
-  findAll() {
-    return `This action returns all chat`;
-  }
-
-  findOne(id: number) {
-    return `This action returns a #${id} chat`;
-  }
-
-  update(id: number, updateChatDto: UpdateChatDto) {
-    return `This action updates a #${id} chat`;
-  }
-
-  remove(id: number) {
-    return `This action removes a #${id} chat`;
-  }
-}
diff --git a/integration/inspector/src/chat/dto/create-chat.dto.ts b/integration/inspector/src/chat/dto/create-chat.dto.ts
deleted file mode 100644
index d9fd9013a..000000000
--- a/integration/inspector/src/chat/dto/create-chat.dto.ts
+++ /dev/null
@@ -1 +0,0 @@
-export class CreateChatDto {}
diff --git a/integration/inspector/src/chat/dto/update-chat.dto.ts b/integration/inspector/src/chat/dto/update-chat.dto.ts
deleted file mode 100644
index 0a372f666..000000000
--- a/integration/inspector/src/chat/dto/update-chat.dto.ts
+++ /dev/null
@@ -1,6 +0,0 @@
-import { PartialType } from '@nestjs/mapped-types';
-import { CreateChatDto } from './create-chat.dto';
-
-export class UpdateChatDto extends PartialType(CreateChatDto) {
-  id: number;
-}
diff --git a/integration/inspector/src/chat/entities/chat.entity.ts b/integration/inspector/src/chat/entities/chat.entity.ts
deleted file mode 100644
index 7e881f92f..000000000
--- a/integration/inspector/src/chat/entities/chat.entity.ts
+++ /dev/null
@@ -1 +0,0 @@
-export class Chat {}
diff --git a/integration/inspector/src/circular-hello/dto/test.dto.ts b/integration/inspector/src/circular-hello/dto/test.dto.ts
deleted file mode 100644
index b3a30f671..000000000
--- a/integration/inspector/src/circular-hello/dto/test.dto.ts
+++ /dev/null
@@ -1,10 +0,0 @@
-import { IsString, IsNotEmpty, IsNumber } from 'class-validator';
-
-export class TestDto {
-  @IsString()
-  @IsNotEmpty()
-  string: string;
-
-  @IsNumber()
-  number: number;
-}
diff --git a/integration/inspector/src/circular-hello/guards/request-scoped.guard.ts b/integration/inspector/src/circular-hello/guards/request-scoped.guard.ts
deleted file mode 100644
index 7e5fe1788..000000000
--- a/integration/inspector/src/circular-hello/guards/request-scoped.guard.ts
+++ /dev/null
@@ -1,21 +0,0 @@
-import {
-  CanActivate,
-  ExecutionContext,
-  Injectable,
-  Scope,
-} from '@nestjs/common';
-import { Observable } from 'rxjs';
-
-@Injectable({ scope: Scope.REQUEST })
-export class Guard implements CanActivate {
-  static COUNTER = 0;
-  constructor() {
-    Guard.COUNTER++;
-  }
-
-  canActivate(
-    context: ExecutionContext,
-  ): boolean | Promise<boolean> | Observable<boolean> {
-    return true;
-  }
-}
diff --git a/integration/inspector/src/circular-hello/hello.controller.ts b/integration/inspector/src/circular-hello/hello.controller.ts
deleted file mode 100644
index 5b4af7bf2..000000000
--- a/integration/inspector/src/circular-hello/hello.controller.ts
+++ /dev/null
@@ -1,30 +0,0 @@
-import {
-  Controller,
-  Get,
-  Param,
-  UseGuards,
-  UseInterceptors,
-} from '@nestjs/common';
-import { Guard } from './guards/request-scoped.guard';
-import { HelloService } from './hello.service';
-import { Interceptor } from './interceptors/logging.interceptor';
-import { UserByIdPipe } from './users/user-by-id.pipe';
-import { UsersService } from './users/users.service';
-
-@Controller('hello')
-export class HelloController {
-  static COUNTER = 0;
-  constructor(
-    private readonly helloService: HelloService,
-    private readonly usersService: UsersService,
-  ) {
-    HelloController.COUNTER++;
-  }
-
-  @UseGuards(Guard)
-  @UseInterceptors(Interceptor)
-  @Get()
-  greeting(@Param('id', UserByIdPipe) id): string {
-    return this.helloService.greeting();
-  }
-}
diff --git a/integration/inspector/src/circular-hello/hello.module.ts b/integration/inspector/src/circular-hello/hello.module.ts
deleted file mode 100644
index 1a0d0bbfd..000000000
--- a/integration/inspector/src/circular-hello/hello.module.ts
+++ /dev/null
@@ -1,19 +0,0 @@
-import { DynamicModule, Inject, Module, Provider } from '@nestjs/common';
-import { HelloController } from './hello.controller';
-import { HelloService } from './hello.service';
-import { UsersService } from './users/users.service';
-
-@Module({
-  controllers: [HelloController],
-  providers: [HelloService, UsersService],
-})
-export class HelloModule {
-  constructor(@Inject('META') private readonly meta) {}
-
-  static forRoot(meta: Provider): DynamicModule {
-    return {
-      module: HelloModule,
-      providers: [meta],
-    };
-  }
-}
diff --git a/integration/inspector/src/circular-hello/hello.service.ts b/integration/inspector/src/circular-hello/hello.service.ts
deleted file mode 100644
index a0a346ebf..000000000
--- a/integration/inspector/src/circular-hello/hello.service.ts
+++ /dev/null
@@ -1,13 +0,0 @@
-import { Inject, Injectable, Scope } from '@nestjs/common';
-
-@Injectable({ scope: Scope.REQUEST })
-export class HelloService {
-  static COUNTER = 0;
-  constructor(@Inject('META') private readonly meta) {
-    HelloService.COUNTER++;
-  }
-
-  greeting(): string {
-    return 'Hello world!';
-  }
-}
diff --git a/integration/inspector/src/circular-hello/interceptors/logging.interceptor.ts b/integration/inspector/src/circular-hello/interceptors/logging.interceptor.ts
deleted file mode 100644
index b8b4e5793..000000000
--- a/integration/inspector/src/circular-hello/interceptors/logging.interceptor.ts
+++ /dev/null
@@ -1,19 +0,0 @@
-import {
-  CallHandler,
-  ExecutionContext,
-  Injectable,
-  NestInterceptor,
-  Scope,
-} from '@nestjs/common';
-import { Observable } from 'rxjs';
-
-@Injectable({ scope: Scope.REQUEST })
-export class Interceptor implements NestInterceptor {
-  static COUNTER = 0;
-  constructor() {
-    Interceptor.COUNTER++;
-  }
-  intercept(context: ExecutionContext, call: CallHandler): Observable<any> {
-    return call.handle();
-  }
-}
diff --git a/integration/inspector/src/circular-hello/users/user-by-id.pipe.ts b/integration/inspector/src/circular-hello/users/user-by-id.pipe.ts
deleted file mode 100644
index 2b81cb6fb..000000000
--- a/integration/inspector/src/circular-hello/users/user-by-id.pipe.ts
+++ /dev/null
@@ -1,14 +0,0 @@
-import { ArgumentMetadata, Injectable, PipeTransform } from '@nestjs/common';
-import { UsersService } from './users.service';
-
-@Injectable()
-export class UserByIdPipe implements PipeTransform<string> {
-  static COUNTER = 0;
-  constructor(private readonly usersService: UsersService) {
-    UserByIdPipe.COUNTER++;
-  }
-
-  transform(value: string, metadata: ArgumentMetadata) {
-    return this.usersService.findById(value);
-  }
-}
diff --git a/integration/inspector/src/circular-hello/users/users.service.ts b/integration/inspector/src/circular-hello/users/users.service.ts
deleted file mode 100644
index f1cb617e1..000000000
--- a/integration/inspector/src/circular-hello/users/users.service.ts
+++ /dev/null
@@ -1,13 +0,0 @@
-import { Inject, Injectable, Scope } from '@nestjs/common';
-
-@Injectable({ scope: Scope.REQUEST })
-export class UsersService {
-  static COUNTER = 0;
-  constructor(@Inject('META') private readonly meta) {
-    UsersService.COUNTER++;
-  }
-
-  findById(id: string) {
-    return { id };
-  }
-}
diff --git a/integration/inspector/src/circular-modules/circular.module.ts b/integration/inspector/src/circular-modules/circular.module.ts
deleted file mode 100644
index bb6afb42a..000000000
--- a/integration/inspector/src/circular-modules/circular.module.ts
+++ /dev/null
@@ -1,10 +0,0 @@
-import { Module, forwardRef } from '@nestjs/common';
-import { CircularService } from './circular.service';
-import { InputModule } from './input.module';
-
-@Module({
-  imports: [forwardRef(() => InputModule)],
-  providers: [CircularService],
-  exports: [CircularService],
-})
-export class CircularModule {}
diff --git a/integration/inspector/src/circular-modules/circular.service.ts b/integration/inspector/src/circular-modules/circular.service.ts
deleted file mode 100644
index 546d63e6e..000000000
--- a/integration/inspector/src/circular-modules/circular.service.ts
+++ /dev/null
@@ -1,10 +0,0 @@
-import { Injectable, forwardRef, Inject } from '@nestjs/common';
-import { InputService } from './input.service';
-
-@Injectable()
-export class CircularService {
-  constructor(
-    @Inject(forwardRef(() => InputService))
-    public readonly service: InputService,
-  ) {}
-}
diff --git a/integration/inspector/src/circular-modules/input.module.ts b/integration/inspector/src/circular-modules/input.module.ts
deleted file mode 100644
index c76dcaa85..000000000
--- a/integration/inspector/src/circular-modules/input.module.ts
+++ /dev/null
@@ -1,10 +0,0 @@
-import { Module, forwardRef } from '@nestjs/common';
-import { CircularModule } from './circular.module';
-import { InputService } from './input.service';
-
-@Module({
-  imports: [forwardRef(() => CircularModule)],
-  providers: [InputService],
-  exports: [InputService],
-})
-export class InputModule {}
diff --git a/integration/inspector/src/circular-modules/input.service.ts b/integration/inspector/src/circular-modules/input.service.ts
deleted file mode 100644
index 342e8bf0d..000000000
--- a/integration/inspector/src/circular-modules/input.service.ts
+++ /dev/null
@@ -1,10 +0,0 @@
-import { Injectable, Inject, forwardRef } from '@nestjs/common';
-import { CircularService } from './circular.service';
-
-@Injectable()
-export class InputService {
-  constructor(
-    @Inject(forwardRef(() => CircularService))
-    public readonly service: CircularService,
-  ) {}
-}
diff --git a/integration/inspector/src/common/filters/http-exception.filter.ts b/integration/inspector/src/common/filters/http-exception.filter.ts
deleted file mode 100644
index acabf619c..000000000
--- a/integration/inspector/src/common/filters/http-exception.filter.ts
+++ /dev/null
@@ -1,22 +0,0 @@
-import {
-  ArgumentsHost,
-  Catch,
-  ExceptionFilter,
-  HttpException,
-} from '@nestjs/common';
-
-@Catch(HttpException)
-export class HttpExceptionFilter implements ExceptionFilter<HttpException> {
-  catch(exception: HttpException, host: ArgumentsHost) {
-    const ctx = host.switchToHttp();
-    const response = ctx.getResponse();
-    const request = ctx.getRequest();
-    const statusCode = exception.getStatus();
-
-    response.status(statusCode).json({
-      statusCode,
-      timestamp: new Date().toISOString(),
-      path: request.url,
-    });
-  }
-}
diff --git a/integration/inspector/src/common/guards/roles.guard.ts b/integration/inspector/src/common/guards/roles.guard.ts
deleted file mode 100644
index 0ae26c41d..000000000
--- a/integration/inspector/src/common/guards/roles.guard.ts
+++ /dev/null
@@ -1,20 +0,0 @@
-import { CanActivate, ExecutionContext, Injectable } from '@nestjs/common';
-import { Reflector } from '@nestjs/core';
-
-@Injectable()
-export class RolesGuard implements CanActivate {
-  constructor(private readonly reflector: Reflector) {}
-
-  canActivate(context: ExecutionContext): boolean {
-    const roles = this.reflector.get<string[]>('roles', context.getHandler());
-    if (!roles) {
-      return true;
-    }
-    const request = context.switchToHttp().getRequest();
-    const user = request.user;
-    const hasRole = () =>
-      user.roles.some(role => !!roles.find(item => item === role));
-
-    return user && user.roles && hasRole();
-  }
-}
diff --git a/integration/inspector/src/common/interceptors/timeout.interceptor.ts b/integration/inspector/src/common/interceptors/timeout.interceptor.ts
deleted file mode 100644
index 3bd0769ac..000000000
--- a/integration/inspector/src/common/interceptors/timeout.interceptor.ts
+++ /dev/null
@@ -1,15 +0,0 @@
-import {
-  CallHandler,
-  ExecutionContext,
-  Injectable,
-  NestInterceptor,
-} from '@nestjs/common';
-import { Observable } from 'rxjs';
-import { timeout } from 'rxjs/operators';
-
-@Injectable()
-export class TimeoutInterceptor implements NestInterceptor {
-  intercept(context: ExecutionContext, next: CallHandler): Observable<any> {
-    return next.handle().pipe(timeout(5000));
-  }
-}
diff --git a/integration/inspector/src/common/middleware/logger.middleware.ts b/integration/inspector/src/common/middleware/logger.middleware.ts
deleted file mode 100644
index 5ada9418d..000000000
--- a/integration/inspector/src/common/middleware/logger.middleware.ts
+++ /dev/null
@@ -1,9 +0,0 @@
-import { Injectable, NestMiddleware } from '@nestjs/common';
-
-@Injectable()
-export class LoggerMiddleware implements NestMiddleware {
-  use(req: any, res: any, next: () => void) {
-    console.log(`Request...`);
-    next();
-  }
-}
diff --git a/integration/inspector/src/common/pipes/parse-int.pipe.ts b/integration/inspector/src/common/pipes/parse-int.pipe.ts
deleted file mode 100644
index abc041424..000000000
--- a/integration/inspector/src/common/pipes/parse-int.pipe.ts
+++ /dev/null
@@ -1,17 +0,0 @@
-import {
-  BadRequestException,
-  PipeTransform,
-  Injectable,
-  ArgumentMetadata,
-} from '@nestjs/common';
-
-@Injectable()
-export class ParseIntPipe implements PipeTransform<string> {
-  async transform(value: string, metadata: ArgumentMetadata) {
-    const val = parseInt(value, 10);
-    if (isNaN(val)) {
-      throw new BadRequestException('Validation failed');
-    }
-    return val;
-  }
-}
diff --git a/integration/inspector/src/core/core.module.ts b/integration/inspector/src/core/core.module.ts
deleted file mode 100644
index 5bc1990b1..000000000
--- a/integration/inspector/src/core/core.module.ts
+++ /dev/null
@@ -1,18 +0,0 @@
-import { MiddlewareConsumer, Module, NestModule } from '@nestjs/common';
-import { APP_INTERCEPTOR } from '@nestjs/core';
-import { CatsController } from '../cats/cats.controller';
-import { LoggerMiddleware } from '../common/middleware/logger.middleware';
-import { LoggingInterceptor } from './interceptors/logging.interceptor';
-import { TransformInterceptor } from './interceptors/transform.interceptor';
-
-@Module({
-  providers: [
-    { provide: APP_INTERCEPTOR, useClass: TransformInterceptor },
-    { provide: APP_INTERCEPTOR, useClass: LoggingInterceptor },
-  ],
-})
-export class CoreModule implements NestModule {
-  configure(consumer: MiddlewareConsumer) {
-    consumer.apply(LoggerMiddleware).forRoutes(CatsController);
-  }
-}
diff --git a/integration/inspector/src/core/interceptors/logging.interceptor.ts b/integration/inspector/src/core/interceptors/logging.interceptor.ts
deleted file mode 100644
index 82ff0baa1..000000000
--- a/integration/inspector/src/core/interceptors/logging.interceptor.ts
+++ /dev/null
@@ -1,20 +0,0 @@
-import {
-  CallHandler,
-  ExecutionContext,
-  Injectable,
-  NestInterceptor,
-} from '@nestjs/common';
-import { Observable } from 'rxjs';
-import { tap } from 'rxjs/operators';
-
-@Injectable()
-export class LoggingInterceptor implements NestInterceptor {
-  intercept(context: ExecutionContext, next: CallHandler): Observable<any> {
-    console.log('Before...');
-
-    const now = Date.now();
-    return next
-      .handle()
-      .pipe(tap(() => console.log(`After... ${Date.now() - now}ms`)));
-  }
-}
diff --git a/integration/inspector/src/core/interceptors/transform.interceptor.ts b/integration/inspector/src/core/interceptors/transform.interceptor.ts
deleted file mode 100644
index c84c6428f..000000000
--- a/integration/inspector/src/core/interceptors/transform.interceptor.ts
+++ /dev/null
@@ -1,24 +0,0 @@
-import {
-  CallHandler,
-  ExecutionContext,
-  Injectable,
-  NestInterceptor,
-} from '@nestjs/common';
-import { Observable } from 'rxjs';
-import { map } from 'rxjs/operators';
-
-export interface Response<T> {
-  data: T;
-}
-
-@Injectable()
-export class TransformInterceptor<T>
-  implements NestInterceptor<T, Response<T>>
-{
-  intercept(
-    context: ExecutionContext,
-    next: CallHandler<T>,
-  ): Observable<Response<T>> {
-    return next.handle().pipe(map(data => ({ data })));
-  }
-}
diff --git a/integration/inspector/src/database/database.controller.ts b/integration/inspector/src/database/database.controller.ts
deleted file mode 100644
index 629762ae0..000000000
--- a/integration/inspector/src/database/database.controller.ts
+++ /dev/null
@@ -1,45 +0,0 @@
-import {
-  Controller,
-  Get,
-  Post,
-  Body,
-  Patch,
-  Param,
-  Delete,
-} from '@nestjs/common';
-import { DatabaseService } from './database.service';
-import { CreateDatabaseDto } from './dto/create-database.dto';
-import { UpdateDatabaseDto } from './dto/update-database.dto';
-
-@Controller('database')
-export class DatabaseController {
-  constructor(private readonly databaseService: DatabaseService) {}
-
-  @Post()
-  create(@Body() createDatabaseDto: CreateDatabaseDto) {
-    return this.databaseService.create(createDatabaseDto);
-  }
-
-  @Get()
-  findAll() {
-    return this.databaseService.findAll();
-  }
-
-  @Get(':id')
-  findOne(@Param('id') id: string) {
-    return this.databaseService.findOne(+id);
-  }
-
-  @Patch(':id')
-  update(
-    @Param('id') id: string,
-    @Body() updateDatabaseDto: UpdateDatabaseDto,
-  ) {
-    return this.databaseService.update(+id, updateDatabaseDto);
-  }
-
-  @Delete(':id')
-  remove(@Param('id') id: string) {
-    return this.databaseService.remove(+id);
-  }
-}
diff --git a/integration/inspector/src/database/database.module.ts b/integration/inspector/src/database/database.module.ts
deleted file mode 100644
index 2f37f674b..000000000
--- a/integration/inspector/src/database/database.module.ts
+++ /dev/null
@@ -1,9 +0,0 @@
-import { Module } from '@nestjs/common';
-import { DatabaseService } from './database.service';
-import { DatabaseController } from './database.controller';
-
-@Module({
-  controllers: [DatabaseController],
-  providers: [DatabaseService],
-})
-export class DatabaseModule {}
diff --git a/integration/inspector/src/database/database.service.ts b/integration/inspector/src/database/database.service.ts
deleted file mode 100644
index 845667895..000000000
--- a/integration/inspector/src/database/database.service.ts
+++ /dev/null
@@ -1,26 +0,0 @@
-import { Injectable } from '@nestjs/common';
-import { CreateDatabaseDto } from './dto/create-database.dto';
-import { UpdateDatabaseDto } from './dto/update-database.dto';
-
-@Injectable()
-export class DatabaseService {
-  create(createDatabaseDto: CreateDatabaseDto) {
-    return 'This action adds a new database';
-  }
-
-  findAll() {
-    return `This action returns all database`;
-  }
-
-  findOne(id: number) {
-    return `This action returns a #${id} database`;
-  }
-
-  update(id: number, updateDatabaseDto: UpdateDatabaseDto) {
-    return `This action updates a #${id} database`;
-  }
-
-  remove(id: number) {
-    return `This action removes a #${id} database`;
-  }
-}
diff --git a/integration/inspector/src/database/dto/create-database.dto.ts b/integration/inspector/src/database/dto/create-database.dto.ts
deleted file mode 100644
index 0b7bc753c..000000000
--- a/integration/inspector/src/database/dto/create-database.dto.ts
+++ /dev/null
@@ -1 +0,0 @@
-export class CreateDatabaseDto {}
diff --git a/integration/inspector/src/database/dto/update-database.dto.ts b/integration/inspector/src/database/dto/update-database.dto.ts
deleted file mode 100644
index 5cc666665..000000000
--- a/integration/inspector/src/database/dto/update-database.dto.ts
+++ /dev/null
@@ -1,4 +0,0 @@
-import { PartialType } from '@nestjs/mapped-types';
-import { CreateDatabaseDto } from './create-database.dto';
-
-export class UpdateDatabaseDto extends PartialType(CreateDatabaseDto) {}
diff --git a/integration/inspector/src/database/entities/database.entity.ts b/integration/inspector/src/database/entities/database.entity.ts
deleted file mode 100644
index 144f2990d..000000000
--- a/integration/inspector/src/database/entities/database.entity.ts
+++ /dev/null
@@ -1 +0,0 @@
-export class Database {}
diff --git a/integration/inspector/src/defaults/core.service.ts b/integration/inspector/src/defaults/core.service.ts
deleted file mode 100644
index acbb46cc2..000000000
--- a/integration/inspector/src/defaults/core.service.ts
+++ /dev/null
@@ -1,4 +0,0 @@
-import { Injectable } from '@nestjs/common';
-
-@Injectable()
-export class CoreService {}
diff --git a/integration/inspector/src/defaults/defaults.module.ts b/integration/inspector/src/defaults/defaults.module.ts
deleted file mode 100644
index f8a7ddb9f..000000000
--- a/integration/inspector/src/defaults/defaults.module.ts
+++ /dev/null
@@ -1,7 +0,0 @@
-import { Module } from '@nestjs/common';
-import { DefaultsService } from './defaults.service';
-
-@Module({
-  providers: [DefaultsService],
-})
-export class DefaultsModule {}
diff --git a/integration/inspector/src/defaults/defaults.service.ts b/integration/inspector/src/defaults/defaults.service.ts
deleted file mode 100644
index edc4790f1..000000000
--- a/integration/inspector/src/defaults/defaults.service.ts
+++ /dev/null
@@ -1,11 +0,0 @@
-import { Inject, Injectable, Optional } from '@nestjs/common';
-import { CoreService } from './core.service';
-
-@Injectable()
-export class DefaultsService {
-  constructor(
-    @Inject(CoreService)
-    @Optional()
-    public readonly coreService = { default: true },
-  ) {}
-}
diff --git a/integration/inspector/src/dogs/dogs.controller.ts b/integration/inspector/src/dogs/dogs.controller.ts
deleted file mode 100644
index 8d5ab7d8a..000000000
--- a/integration/inspector/src/dogs/dogs.controller.ts
+++ /dev/null
@@ -1,42 +0,0 @@
-import {
-  Controller,
-  Get,
-  Post,
-  Body,
-  Patch,
-  Param,
-  Delete,
-} from '@nestjs/common';
-import { DogsService } from './dogs.service';
-import { CreateDogDto } from './dto/create-dog.dto';
-import { UpdateDogDto } from './dto/update-dog.dto';
-
-@Controller('dogs')
-export class DogsController {
-  constructor(private readonly dogsService: DogsService) {}
-
-  @Post()
-  create(@Body() createDogDto: CreateDogDto) {
-    return this.dogsService.create(createDogDto);
-  }
-
-  @Get()
-  findAll() {
-    return this.dogsService.findAll();
-  }
-
-  @Get(':id')
-  findOne(@Param('id') id: string) {
-    return this.dogsService.findOne(+id);
-  }
-
-  @Patch(':id')
-  update(@Param('id') id: string, @Body() updateDogDto: UpdateDogDto) {
-    return this.dogsService.update(+id, updateDogDto);
-  }
-
-  @Delete(':id')
-  remove(@Param('id') id: string) {
-    return this.dogsService.remove(+id);
-  }
-}
diff --git a/integration/inspector/src/dogs/dogs.module.ts b/integration/inspector/src/dogs/dogs.module.ts
deleted file mode 100644
index 3385a39e3..000000000
--- a/integration/inspector/src/dogs/dogs.module.ts
+++ /dev/null
@@ -1,9 +0,0 @@
-import { Module } from '@nestjs/common';
-import { DogsService } from './dogs.service';
-import { DogsController } from './dogs.controller';
-
-@Module({
-  controllers: [DogsController],
-  providers: [DogsService],
-})
-export class DogsModule {}
diff --git a/integration/inspector/src/dogs/dogs.service.ts b/integration/inspector/src/dogs/dogs.service.ts
deleted file mode 100644
index f1f2d9347..000000000
--- a/integration/inspector/src/dogs/dogs.service.ts
+++ /dev/null
@@ -1,26 +0,0 @@
-import { Injectable } from '@nestjs/common';
-import { CreateDogDto } from './dto/create-dog.dto';
-import { UpdateDogDto } from './dto/update-dog.dto';
-
-@Injectable()
-export class DogsService {
-  create(createDogDto: CreateDogDto) {
-    return 'This action adds a new dog';
-  }
-
-  findAll() {
-    return `This action returns all dogs`;
-  }
-
-  findOne(id: number) {
-    return `This action returns a #${id} dog`;
-  }
-
-  update(id: number, updateDogDto: UpdateDogDto) {
-    return `This action updates a #${id} dog`;
-  }
-
-  remove(id: number) {
-    return `This action removes a #${id} dog`;
-  }
-}
diff --git a/integration/inspector/src/dogs/dto/create-dog.dto.ts b/integration/inspector/src/dogs/dto/create-dog.dto.ts
deleted file mode 100644
index fd21dff8a..000000000
--- a/integration/inspector/src/dogs/dto/create-dog.dto.ts
+++ /dev/null
@@ -1 +0,0 @@
-export class CreateDogDto {}
diff --git a/integration/inspector/src/dogs/dto/update-dog.dto.ts b/integration/inspector/src/dogs/dto/update-dog.dto.ts
deleted file mode 100644
index 15d4939c8..000000000
--- a/integration/inspector/src/dogs/dto/update-dog.dto.ts
+++ /dev/null
@@ -1,4 +0,0 @@
-import { PartialType } from '@nestjs/mapped-types';
-import { CreateDogDto } from './create-dog.dto';
-
-export class UpdateDogDto extends PartialType(CreateDogDto) {}
diff --git a/integration/inspector/src/dogs/entities/dog.entity.ts b/integration/inspector/src/dogs/entities/dog.entity.ts
deleted file mode 100644
index cbd6231a1..000000000
--- a/integration/inspector/src/dogs/entities/dog.entity.ts
+++ /dev/null
@@ -1 +0,0 @@
-export class Dog {}
diff --git a/integration/inspector/src/durable/durable-context-id.strategy.ts b/integration/inspector/src/durable/durable-context-id.strategy.ts
deleted file mode 100644
index d4158f3e2..000000000
--- a/integration/inspector/src/durable/durable-context-id.strategy.ts
+++ /dev/null
@@ -1,23 +0,0 @@
-import { ContextId, ContextIdStrategy, HostComponentInfo } from '@nestjs/core';
-import { Request } from 'express';
-
-const tenants = new Map<string, ContextId>();
-
-export class DurableContextIdStrategy implements ContextIdStrategy {
-  attach(contextId: ContextId, request: Request) {
-    const tenantId = request.headers['x-tenant-id'] as string;
-    let tenantSubTreeId: ContextId;
-
-    if (tenants.has(tenantId)) {
-      tenantSubTreeId = tenants.get(tenantId);
-    } else {
-      tenantSubTreeId = { id: +tenantId } as ContextId;
-      tenants.set(tenantId, tenantSubTreeId);
-    }
-    return {
-      resolve: (info: HostComponentInfo) =>
-        info.isTreeDurable ? tenantSubTreeId : contextId,
-      payload: { tenantId },
-    };
-  }
-}
diff --git a/integration/inspector/src/durable/durable.controller.ts b/integration/inspector/src/durable/durable.controller.ts
deleted file mode 100644
index be51ad2df..000000000
--- a/integration/inspector/src/durable/durable.controller.ts
+++ /dev/null
@@ -1,17 +0,0 @@
-import { Controller, Get } from '@nestjs/common';
-import { DurableService } from './durable.service';
-
-@Controller('durable')
-export class DurableController {
-  constructor(private readonly durableService: DurableService) {}
-
-  @Get()
-  greeting(): string {
-    return this.durableService.greeting();
-  }
-
-  @Get('echo')
-  echo() {
-    return this.durableService.requestPayload;
-  }
-}
diff --git a/integration/inspector/src/durable/durable.module.ts b/integration/inspector/src/durable/durable.module.ts
deleted file mode 100644
index ed312900f..000000000
--- a/integration/inspector/src/durable/durable.module.ts
+++ /dev/null
@@ -1,9 +0,0 @@
-import { Module } from '@nestjs/common';
-import { DurableController } from './durable.controller';
-import { DurableService } from './durable.service';
-
-@Module({
-  controllers: [DurableController],
-  providers: [DurableService],
-})
-export class DurableModule {}
diff --git a/integration/inspector/src/durable/durable.service.ts b/integration/inspector/src/durable/durable.service.ts
deleted file mode 100644
index 6e25b01dd..000000000
--- a/integration/inspector/src/durable/durable.service.ts
+++ /dev/null
@@ -1,14 +0,0 @@
-import { Inject, Injectable, Scope } from '@nestjs/common';
-import { REQUEST } from '@nestjs/core';
-
-@Injectable({ scope: Scope.REQUEST, durable: true })
-export class DurableService {
-  public instanceCounter = 0;
-
-  constructor(@Inject(REQUEST) public readonly requestPayload: unknown) {}
-
-  greeting() {
-    ++this.instanceCounter;
-    return `Hello world! Counter: ${this.instanceCounter}`;
-  }
-}
diff --git a/integration/inspector/src/external-svc/dto/create-external-svc.dto.ts b/integration/inspector/src/external-svc/dto/create-external-svc.dto.ts
deleted file mode 100644
index b37586bc5..000000000
--- a/integration/inspector/src/external-svc/dto/create-external-svc.dto.ts
+++ /dev/null
@@ -1 +0,0 @@
-export class CreateExternalSvcDto {}
diff --git a/integration/inspector/src/external-svc/dto/update-external-svc.dto.ts b/integration/inspector/src/external-svc/dto/update-external-svc.dto.ts
deleted file mode 100644
index 95be362d9..000000000
--- a/integration/inspector/src/external-svc/dto/update-external-svc.dto.ts
+++ /dev/null
@@ -1,6 +0,0 @@
-import { PartialType } from '@nestjs/mapped-types';
-import { CreateExternalSvcDto } from './create-external-svc.dto';
-
-export class UpdateExternalSvcDto extends PartialType(CreateExternalSvcDto) {
-  id: number;
-}
diff --git a/integration/inspector/src/external-svc/entities/external-svc.entity.ts b/integration/inspector/src/external-svc/entities/external-svc.entity.ts
deleted file mode 100644
index 645900058..000000000
--- a/integration/inspector/src/external-svc/entities/external-svc.entity.ts
+++ /dev/null
@@ -1 +0,0 @@
-export class ExternalSvc {}
diff --git a/integration/inspector/src/external-svc/external-svc.controller.ts b/integration/inspector/src/external-svc/external-svc.controller.ts
deleted file mode 100644
index f2233620f..000000000
--- a/integration/inspector/src/external-svc/external-svc.controller.ts
+++ /dev/null
@@ -1,38 +0,0 @@
-import { Controller } from '@nestjs/common';
-import { MessagePattern, Payload } from '@nestjs/microservices';
-import { ExternalSvcService } from './external-svc.service';
-import { CreateExternalSvcDto } from './dto/create-external-svc.dto';
-import { UpdateExternalSvcDto } from './dto/update-external-svc.dto';
-
-@Controller()
-export class ExternalSvcController {
-  constructor(private readonly externalSvcService: ExternalSvcService) {}
-
-  @MessagePattern('createExternalSvc')
-  create(@Payload() createExternalSvcDto: CreateExternalSvcDto) {
-    return this.externalSvcService.create(createExternalSvcDto);
-  }
-
-  @MessagePattern('findAllExternalSvc')
-  findAll() {
-    return this.externalSvcService.findAll();
-  }
-
-  @MessagePattern('findOneExternalSvc')
-  findOne(@Payload() id: number) {
-    return this.externalSvcService.findOne(id);
-  }
-
-  @MessagePattern('updateExternalSvc')
-  update(@Payload() updateExternalSvcDto: UpdateExternalSvcDto) {
-    return this.externalSvcService.update(
-      updateExternalSvcDto.id,
-      updateExternalSvcDto,
-    );
-  }
-
-  @MessagePattern('removeExternalSvc')
-  remove(@Payload() id: number) {
-    return this.externalSvcService.remove(id);
-  }
-}
diff --git a/integration/inspector/src/external-svc/external-svc.module.ts b/integration/inspector/src/external-svc/external-svc.module.ts
deleted file mode 100644
index f4b57fc02..000000000
--- a/integration/inspector/src/external-svc/external-svc.module.ts
+++ /dev/null
@@ -1,9 +0,0 @@
-import { Module } from '@nestjs/common';
-import { ExternalSvcService } from './external-svc.service';
-import { ExternalSvcController } from './external-svc.controller';
-
-@Module({
-  controllers: [ExternalSvcController],
-  providers: [ExternalSvcService],
-})
-export class ExternalSvcModule {}
diff --git a/integration/inspector/src/external-svc/external-svc.service.ts b/integration/inspector/src/external-svc/external-svc.service.ts
deleted file mode 100644
index 9620630c2..000000000
--- a/integration/inspector/src/external-svc/external-svc.service.ts
+++ /dev/null
@@ -1,26 +0,0 @@
-import { Injectable } from '@nestjs/common';
-import { CreateExternalSvcDto } from './dto/create-external-svc.dto';
-import { UpdateExternalSvcDto } from './dto/update-external-svc.dto';
-
-@Injectable()
-export class ExternalSvcService {
-  create(createExternalSvcDto: CreateExternalSvcDto) {
-    return 'This action adds a new externalSvc';
-  }
-
-  findAll() {
-    return `This action returns all externalSvc`;
-  }
-
-  findOne(id: number) {
-    return `This action returns a #${id} externalSvc`;
-  }
-
-  update(id: number, updateExternalSvcDto: UpdateExternalSvcDto) {
-    return `This action updates a #${id} externalSvc`;
-  }
-
-  remove(id: number) {
-    return `This action removes a #${id} externalSvc`;
-  }
-}
diff --git a/integration/inspector/src/properties/dependency.service.ts b/integration/inspector/src/properties/dependency.service.ts
deleted file mode 100644
index cd71d8c80..000000000
--- a/integration/inspector/src/properties/dependency.service.ts
+++ /dev/null
@@ -1,4 +0,0 @@
-import { Injectable } from '@nestjs/common';
-
-@Injectable()
-export class DependencyService {}
diff --git a/integration/inspector/src/properties/properties.module.ts b/integration/inspector/src/properties/properties.module.ts
deleted file mode 100644
index b2ad36ff3..000000000
--- a/integration/inspector/src/properties/properties.module.ts
+++ /dev/null
@@ -1,19 +0,0 @@
-import { Module } from '@nestjs/common';
-import { DependencyService } from './dependency.service';
-import { PropertiesService, SYMBOL_TOKEN } from './properties.service';
-
-@Module({
-  providers: [
-    DependencyService,
-    PropertiesService,
-    {
-      provide: 'token',
-      useValue: true,
-    },
-    {
-      provide: SYMBOL_TOKEN,
-      useValue: true,
-    },
-  ],
-})
-export class PropertiesModule {}
diff --git a/integration/inspector/src/properties/properties.service.ts b/integration/inspector/src/properties/properties.service.ts
deleted file mode 100644
index cd4507524..000000000
--- a/integration/inspector/src/properties/properties.service.ts
+++ /dev/null
@@ -1,11 +0,0 @@
-import { Inject, Injectable } from '@nestjs/common';
-import { DependencyService } from './dependency.service';
-
-export const SYMBOL_TOKEN = Symbol('token');
-
-@Injectable()
-export class PropertiesService {
-  @Inject() service: DependencyService;
-  @Inject('token') token: boolean;
-  @Inject(SYMBOL_TOKEN) symbolToken: boolean;
-}
diff --git a/integration/inspector/src/request-chain/helper/helper.module.ts b/integration/inspector/src/request-chain/helper/helper.module.ts
deleted file mode 100644
index 1c154ea44..000000000
--- a/integration/inspector/src/request-chain/helper/helper.module.ts
+++ /dev/null
@@ -1,8 +0,0 @@
-import { Module } from '@nestjs/common';
-import { HelperService } from './helper.service';
-
-@Module({
-  providers: [HelperService],
-  exports: [HelperService],
-})
-export class HelperModule {}
diff --git a/integration/inspector/src/request-chain/helper/helper.service.ts b/integration/inspector/src/request-chain/helper/helper.service.ts
deleted file mode 100644
index 52efe0eb2..000000000
--- a/integration/inspector/src/request-chain/helper/helper.service.ts
+++ /dev/null
@@ -1,9 +0,0 @@
-import { Inject, Injectable, Scope } from '@nestjs/common';
-import { REQUEST } from '@nestjs/core';
-
-@Injectable({ scope: Scope.REQUEST })
-export class HelperService {
-  constructor(@Inject(REQUEST) public readonly request) {}
-
-  public noop() {}
-}
diff --git a/integration/inspector/src/request-chain/interceptors/logging.interceptor.ts b/integration/inspector/src/request-chain/interceptors/logging.interceptor.ts
deleted file mode 100644
index 008a69993..000000000
--- a/integration/inspector/src/request-chain/interceptors/logging.interceptor.ts
+++ /dev/null
@@ -1,21 +0,0 @@
-import {
-  CallHandler,
-  ExecutionContext,
-  Injectable,
-  NestInterceptor,
-} from '@nestjs/common';
-import { Observable } from 'rxjs';
-import { HelperService } from '../helper/helper.service';
-
-@Injectable()
-export class LoggingInterceptor implements NestInterceptor {
-  constructor(private readonly helperSvc: HelperService) {}
-
-  intercept(context: ExecutionContext, next: CallHandler): Observable<any> {
-    this.helperSvc.noop();
-    if (!this.helperSvc.request) {
-      throw new Error('error');
-    }
-    return next.handle();
-  }
-}
diff --git a/integration/inspector/src/request-chain/request-chain.controller.ts b/integration/inspector/src/request-chain/request-chain.controller.ts
deleted file mode 100644
index 03813352d..000000000
--- a/integration/inspector/src/request-chain/request-chain.controller.ts
+++ /dev/null
@@ -1,14 +0,0 @@
-import { Controller, Get, UseInterceptors } from '@nestjs/common';
-import { LoggingInterceptor } from './interceptors/logging.interceptor';
-import { RequestChainService } from './request-chain.service';
-
-@Controller('hello')
-export class RequestChainController {
-  constructor(private readonly chainService: RequestChainService) {}
-
-  @UseInterceptors(LoggingInterceptor)
-  @Get()
-  greeting(): void {
-    this.chainService.call();
-  }
-}
diff --git a/integration/inspector/src/request-chain/request-chain.module.ts b/integration/inspector/src/request-chain/request-chain.module.ts
deleted file mode 100644
index eba8f451d..000000000
--- a/integration/inspector/src/request-chain/request-chain.module.ts
+++ /dev/null
@@ -1,11 +0,0 @@
-import { Module } from '@nestjs/common';
-import { HelperModule } from './helper/helper.module';
-import { RequestChainController } from './request-chain.controller';
-import { RequestChainService } from './request-chain.service';
-
-@Module({
-  imports: [HelperModule],
-  providers: [RequestChainService],
-  controllers: [RequestChainController],
-})
-export class RequestChainModule {}
diff --git a/integration/inspector/src/request-chain/request-chain.service.ts b/integration/inspector/src/request-chain/request-chain.service.ts
deleted file mode 100644
index c8c00068d..000000000
--- a/integration/inspector/src/request-chain/request-chain.service.ts
+++ /dev/null
@@ -1,15 +0,0 @@
-import { Injectable } from '@nestjs/common';
-import { HelperService } from './helper/helper.service';
-
-@Injectable()
-export class RequestChainService {
-  static COUNTER = 0;
-  constructor(private readonly helperService: HelperService) {
-    helperService.noop();
-    RequestChainService.COUNTER += 1;
-  }
-
-  call() {
-    this.helperService.noop();
-  }
-}
diff --git a/integration/inspector/src/users/dto/create-user.dto.ts b/integration/inspector/src/users/dto/create-user.dto.ts
deleted file mode 100644
index 0311be138..000000000
--- a/integration/inspector/src/users/dto/create-user.dto.ts
+++ /dev/null
@@ -1 +0,0 @@
-export class CreateUserDto {}
diff --git a/integration/inspector/src/users/dto/update-user.dto.ts b/integration/inspector/src/users/dto/update-user.dto.ts
deleted file mode 100644
index dfd37fb1e..000000000
--- a/integration/inspector/src/users/dto/update-user.dto.ts
+++ /dev/null
@@ -1,4 +0,0 @@
-import { PartialType } from '@nestjs/mapped-types';
-import { CreateUserDto } from './create-user.dto';
-
-export class UpdateUserDto extends PartialType(CreateUserDto) {}
diff --git a/integration/inspector/src/users/entities/user.entity.ts b/integration/inspector/src/users/entities/user.entity.ts
deleted file mode 100644
index 4f82c1457..000000000
--- a/integration/inspector/src/users/entities/user.entity.ts
+++ /dev/null
@@ -1 +0,0 @@
-export class User {}
diff --git a/integration/inspector/src/users/users.controller.ts b/integration/inspector/src/users/users.controller.ts
deleted file mode 100644
index d5db3a65e..000000000
--- a/integration/inspector/src/users/users.controller.ts
+++ /dev/null
@@ -1,42 +0,0 @@
-import {
-  Controller,
-  Get,
-  Post,
-  Body,
-  Patch,
-  Param,
-  Delete,
-} from '@nestjs/common';
-import { UsersService } from './users.service';
-import { CreateUserDto } from './dto/create-user.dto';
-import { UpdateUserDto } from './dto/update-user.dto';
-
-@Controller('users')
-export class UsersController {
-  constructor(private readonly usersService: UsersService) {}
-
-  @Post()
-  create(@Body() createUserDto: CreateUserDto) {
-    return this.usersService.create(createUserDto);
-  }
-
-  @Get()
-  findAll() {
-    return this.usersService.findAll();
-  }
-
-  @Get(':id')
-  findOne(@Param('id') id: string) {
-    return this.usersService.findOne(+id);
-  }
-
-  @Patch(':id')
-  update(@Param('id') id: string, @Body() updateUserDto: UpdateUserDto) {
-    return this.usersService.update(+id, updateUserDto);
-  }
-
-  @Delete(':id')
-  remove(@Param('id') id: string) {
-    return this.usersService.remove(+id);
-  }
-}
diff --git a/integration/inspector/src/users/users.module.ts b/integration/inspector/src/users/users.module.ts
deleted file mode 100644
index ecca17ad6..000000000
--- a/integration/inspector/src/users/users.module.ts
+++ /dev/null
@@ -1,9 +0,0 @@
-import { Module } from '@nestjs/common';
-import { UsersService } from './users.service';
-import { UsersController } from './users.controller';
-
-@Module({
-  controllers: [UsersController],
-  providers: [UsersService],
-})
-export class UsersModule {}
diff --git a/integration/inspector/src/users/users.service.ts b/integration/inspector/src/users/users.service.ts
deleted file mode 100644
index 0a55903da..000000000
--- a/integration/inspector/src/users/users.service.ts
+++ /dev/null
@@ -1,26 +0,0 @@
-import { Injectable } from '@nestjs/common';
-import { CreateUserDto } from './dto/create-user.dto';
-import { UpdateUserDto } from './dto/update-user.dto';
-
-@Injectable()
-export class UsersService {
-  create(createUserDto: CreateUserDto) {
-    return 'This action adds a new user';
-  }
-
-  findAll() {
-    return `This action returns all users`;
-  }
-
-  findOne(id: number) {
-    return `This action returns a #${id} user`;
-  }
-
-  update(id: number, updateUserDto: UpdateUserDto) {
-    return `This action updates a #${id} user`;
-  }
-
-  remove(id: number) {
-    return `This action removes a #${id} user`;
-  }
-}
diff --git a/integration/inspector/tsconfig.json b/integration/inspector/tsconfig.json
deleted file mode 100644
index cef623d14..000000000
--- a/integration/inspector/tsconfig.json
+++ /dev/null
@@ -1,40 +0,0 @@
-{
-  "compilerOptions": {
-    "module": "commonjs",
-    "declaration": false,
-    "noImplicitAny": false,
-    "removeComments": true,
-    "noLib": false,
-    "emitDecoratorMetadata": true,
-    "experimentalDecorators": true,
-    "target": "ES2021",
-    "sourceMap": true,
-    "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
-  },
-  "include": [
-    "src/**/*",
-    "e2e/**/*"
-  ],
-  "exclude": [
-    "node_modules",
-  ]
-}
\ No newline at end of file
diff --git a/integration/microservices/src/tcp-tls/app.controller.ts b/integration/microservices/src/tcp-tls/app.controller.ts
deleted file mode 100644
index 81101741f..000000000
--- a/integration/microservices/src/tcp-tls/app.controller.ts
+++ /dev/null
@@ -1,141 +0,0 @@
-import {
-  Body,
-  Controller,
-  HttpCode,
-  Inject,
-  Post,
-  Query,
-} from '@nestjs/common';
-import {
-  Client,
-  ClientProxy,
-  EventPattern,
-  MessagePattern,
-  RpcException,
-  Transport,
-} from '@nestjs/microservices';
-import { from, lastValueFrom, Observable, of, throwError } from 'rxjs';
-import { catchError, scan } from 'rxjs/operators';
-import * as fs from 'fs';
-import * as path from 'path';
-
-@Controller()
-export class AppController {
-  constructor(
-    @Inject('USE_CLASS_CLIENT') private useClassClient: ClientProxy,
-    @Inject('USE_FACTORY_CLIENT') private useFactoryClient: ClientProxy,
-    @Inject('CUSTOM_PROXY_CLIENT') private customClient: ClientProxy,
-  ) {}
-  static IS_NOTIFIED = false;
-
-  @Client({
-    transport: Transport.TCP,
-    options: {
-      tlsOptions: {
-        ca: [
-          fs
-            .readFileSync(path.join(__dirname, 'ca.cert.pem'), 'utf-8')
-            .toString(),
-        ],
-      },
-    },
-  })
-  client: ClientProxy;
-
-  @Post()
-  @HttpCode(200)
-  call(@Query('command') cmd, @Body() data: number[]): Observable<number> {
-    return this.client.send<number>({ cmd }, data);
-  }
-
-  @Post('useFactory')
-  @HttpCode(200)
-  callWithClientUseFactory(
-    @Query('command') cmd,
-    @Body() data: number[],
-  ): Observable<number> {
-    return this.useFactoryClient.send<number>({ cmd }, data);
-  }
-
-  @Post('useClass')
-  @HttpCode(200)
-  callWithClientUseClass(
-    @Query('command') cmd,
-    @Body() data: number[],
-  ): Observable<number> {
-    return this.useClassClient.send<number>({ cmd }, data);
-  }
-
-  @Post('stream')
-  @HttpCode(200)
-  stream(@Body() data: number[]): Observable<number> {
-    return this.client
-      .send<number>({ cmd: 'streaming' }, data)
-      .pipe(scan((a, b) => a + b));
-  }
-
-  @Post('concurrent')
-  @HttpCode(200)
-  concurrent(@Body() data: number[][]): Promise<boolean> {
-    const send = async (tab: number[]) => {
-      const expected = tab.reduce((a, b) => a + b);
-      const result = await lastValueFrom(
-        this.client.send<number>({ cmd: 'sum' }, tab),
-      );
-
-      return result === expected;
-    };
-    return data
-      .map(async tab => send(tab))
-      .reduce(async (a, b) => (await a) && b);
-  }
-
-  @Post('error')
-  @HttpCode(200)
-  serializeError(
-    @Query('client') query: 'custom' | 'standard' = 'standard',
-    @Body() body: Record<string, any>,
-  ): Observable<boolean> {
-    const client = query === 'custom' ? this.customClient : this.client;
-    return client.send({ cmd: 'err' }, {}).pipe(
-      catchError(err => {
-        return of(err instanceof RpcException);
-      }),
-    );
-  }
-
-  @MessagePattern({ cmd: 'sum' })
-  sum(data: number[]): number {
-    return (data || []).reduce((a, b) => a + b);
-  }
-
-  @MessagePattern({ cmd: 'asyncSum' })
-  async asyncSum(data: number[]): Promise<number> {
-    return (data || []).reduce((a, b) => a + b);
-  }
-
-  @MessagePattern({ cmd: 'streamSum' })
-  streamSum(data: number[]): Observable<number> {
-    return of((data || []).reduce((a, b) => a + b));
-  }
-
-  @MessagePattern({ cmd: 'streaming' })
-  streaming(data: number[]): Observable<number> {
-    return from(data);
-  }
-
-  @MessagePattern({ cmd: 'err' })
-  throwAnError() {
-    return throwError(() => new Error('err'));
-  }
-
-  @Post('notify')
-  async sendNotification(): Promise<any> {
-    return this.client.emit<number>('notification', true);
-  }
-
-  @EventPattern('notification')
-  eventHandler(data: boolean) {
-    AppController.IS_NOTIFIED = data;
-  }
-}
diff --git a/integration/microservices/src/tcp-tls/app.module.ts b/integration/microservices/src/tcp-tls/app.module.ts
deleted file mode 100644
index 79a167886..000000000
--- a/integration/microservices/src/tcp-tls/app.module.ts
+++ /dev/null
@@ -1,90 +0,0 @@
-import { Module, Injectable } from '@nestjs/common';
-import { AppController } from './app.controller';
-import {
-  ClientsModule,
-  Transport,
-  ClientsModuleOptionsFactory,
-  ClientOptions,
-  ClientTCP,
-  RpcException,
-} from '@nestjs/microservices';
-
-import * as fs from 'fs';
-import * as path from 'path';
-
-const caCert = fs.readFileSync(path.join(__dirname, 'ca.cert.pem')).toString();
-
-class ErrorHandlingProxy extends ClientTCP {
-  constructor() {
-    super({
-      tlsOptions: { ca: caCert },
-    });
-  }
-
-  serializeError(err) {
-    return new RpcException(err);
-  }
-}
-
-@Injectable()
-class ConfigService {
-  private readonly config = {
-    transport: Transport.TCP,
-  };
-  get(key: string, defaultValue?: any) {
-    return this.config[key] || defaultValue;
-  }
-}
-
-@Module({
-  providers: [ConfigService],
-  exports: [ConfigService],
-})
-class ConfigModule {}
-
-@Injectable()
-class ClientOptionService implements ClientsModuleOptionsFactory {
-  constructor(private readonly configService: ConfigService) {}
-  createClientOptions(): Promise<ClientOptions> | ClientOptions {
-    return {
-      transport: this.configService.get('transport'),
-      options: {
-        tlsOptions: { ca: caCert },
-      },
-    };
-  }
-}
-
-@Module({
-  imports: [
-    ClientsModule.registerAsync([
-      {
-        imports: [ConfigModule],
-        name: 'USE_FACTORY_CLIENT',
-        useFactory: (configService: ConfigService) => ({
-          transport: configService.get('transport'),
-          options: {
-            tlsOptions: { ca: caCert },
-          },
-        }),
-        inject: [ConfigService],
-      },
-      {
-        imports: [ConfigModule],
-        name: 'USE_CLASS_CLIENT',
-        useClass: ClientOptionService,
-        inject: [ConfigService],
-      },
-      {
-        imports: [ConfigModule],
-        inject: [ConfigService],
-        name: 'CUSTOM_PROXY_CLIENT',
-        useFactory: (config: ConfigService) => ({
-          customClass: ErrorHandlingProxy,
-        }),
-      },
-    ]),
-  ],
-  controllers: [AppController],
-})
-export class ApplicationModule {}
diff --git a/integration/microservices/src/tcp-tls/ca.cert.pem b/integration/microservices/src/tcp-tls/ca.cert.pem
deleted file mode 100644
index dbc7d8a77..000000000
--- a/integration/microservices/src/tcp-tls/ca.cert.pem
+++ /dev/null
@@ -1,17 +0,0 @@
------BEGIN CERTIFICATE-----
-MIICpDCCAYwCCQCyP27z3r0PFjANBgkqhkiG9w0BAQsFADAUMRIwEAYDVQQDDAls
-b2NhbGhvc3QwHhcNMjIxMjAyMDQ0NTQ1WhcNMzIxMTI5MDQ0NTQ1WjAUMRIwEAYD
-VQQDDAlsb2NhbGhvc3QwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDZ
-1IdZZXqrwXql4AIOJnlfpoGKOKoIalnK7KaKHTsq1QOF8z2abFuNBVIIrO0etQ/0
-PPAaFGkXl6HHBuA5PrFpsw3V1wSnNs1Cns9NhvypHI2V71lkwBJrEaSicNWL2AOE
-QkQ9cZ4YsTGd0BrM8D5VvgXdrC7gOXfj7Hx3E4K+wFO/Gi4AUXl5CXxleSFcW4U+
-jFulfq/DE8rBZXs29IsGeVkkgUoICjQ4Ey4zE6EY7f3SPKgU8gfgzYyGSd/ZZ/E7
-6M2yakEUX448Nl4BeuNWroBHVm1pSiMo+Cm1g34pJScPrx1yw6qquziCc/2n1M6O
-B4WGIZAmJDWnAOEjjrxFAgMBAAEwDQYJKoZIhvcNAQELBQADggEBAABGByZZUjaq
-ZygICSH2qUGHPPIyrfaCe0qM7de6kYfxxPYQQZb0HDynzv780Lq1002XeT02fNR+
-5sBCVFuKvS8BNvTq6kHzO1FiWIk/E5fQcYNToYSeEcXgWFLhJMty7+R6sIc9y8PH
-2YNehf78Jjm9ukM52sLc4+JWl7AEeqPrOHZdh/ve8M2gTfimFKTrW5cEAVPIOPhp
-2t5BdDKt8ZxgrGC7iRxga+v80VUOHRGfrd3hf3NlDQZO8upVGY8DdJhPRDB72+R0
-kzJ7eyQwlGXM20atiFxPk43h0f273MneIJG8NgGiVU0ND4XnZkAB3KSAu7pB+nEw
-QRYMYDgo/8Q=
------END CERTIFICATE-----
diff --git a/integration/microservices/src/tcp-tls/privkey.pem b/integration/microservices/src/tcp-tls/privkey.pem
deleted file mode 100644
index f8a90acff..000000000
--- a/integration/microservices/src/tcp-tls/privkey.pem
+++ /dev/null
@@ -1,28 +0,0 @@
------BEGIN PRIVATE KEY-----
-MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDZ1IdZZXqrwXql
-4AIOJnlfpoGKOKoIalnK7KaKHTsq1QOF8z2abFuNBVIIrO0etQ/0PPAaFGkXl6HH
-BuA5PrFpsw3V1wSnNs1Cns9NhvypHI2V71lkwBJrEaSicNWL2AOEQkQ9cZ4YsTGd
-0BrM8D5VvgXdrC7gOXfj7Hx3E4K+wFO/Gi4AUXl5CXxleSFcW4U+jFulfq/DE8rB
-ZXs29IsGeVkkgUoICjQ4Ey4zE6EY7f3SPKgU8gfgzYyGSd/ZZ/E76M2yakEUX448
-Nl4BeuNWroBHVm1pSiMo+Cm1g34pJScPrx1yw6qquziCc/2n1M6OB4WGIZAmJDWn
-AOEjjrxFAgMBAAECggEANUKZtWnyjHxKGLSkzADsPE7h7YHdUSFvwwYJ0ktDZD2h
-FudacJ994wUiAa0GbTOoKvebXUUQTQxuKdOsj1Kc3lNBVr+0C46CsX9TAIm4zUCF
-/dr/6HpuBm/R6UXdcMvoUDZDqSJWnYL1trhjVSiIlT5ZANJQw9JJVhlEdXj3xtuc
-I9aC+33f9hKO1wzei/mTjIRGyRIeKselZPpA7qJnE4s3hmZxnO/rSqyPIvh1XLfZ
-3Eoyyg+xNpTZ8JqlHB5d7hDSnj8cjboa7IYpHJDXN3r8Aui+R9e/sQkezHbF7fR0
-xHpBVYQvGMuqSnTBkdJfq4qPAR1K49UrpEXB2GHaIQKBgQDs3t/ZUA138AiPIeLd
-aTsEPhf5dWEZynfNvXZ0VcoSr8ckaiaq9OEllprAriYWj+XphTDsBUAh/R7KlOR4
-eb+m6OwH7LseGiLIEr54GGP0LzVXAkfH2/uR1cak8qAmHB00jNEg7sj0eVAsHO3f
-WQm67f+RNP/IgAa+V8JKIkgTwwKBgQDrbAH8eAQsq9rjpxcic1EUI7uFHzr+cKf/
-4Y8ThLUNAzNfAbQWRBYjS1R8GM79Wiuh+WT1ooHKLryuLF7LVukvKHJ5GiNFBmaO
-llf72Zf1y4tBE2RCXQbf6h8+ohSDC/hwYy+w20/i2KzSBKkS0+gQuAX/HzfTpRd3
-q3/uEniXVwKBgDNnElDIbIPQlSrqgZ7mzSXYi79Y15+PLnx5VxFb5KQ1fRPL7WRA
-C/PqQN77a8yNoakRfFJbuVUm5t2zffkfApYoCcCWgOzBYzbjym2pbVd6PysIlacr
-d+Zn69mzxUk/5J6YyHFLIFTdVqacCIrleZUVPNa4F6HdFpmL1d/cnKOdAoGAMDuB
-sKsaF9jh0LBkEf/URa8IdT6vxH9qPAeHW7VdrpvQQ4/CyKkMbBC772zZw5hcxiOl
-Zpnzw2uN5pVamohk3++GfH85aKPmESKGRigPdSFNl3iUmvAaP3flDN0CHNMwBD6d
-/7r/A/fmeGTSCvR1YC+DswA/XNI/G5p8bFdGc6MCgYBd9oQiZlkYMiDGPUAjx+DO
-kqtAmc8DLJEanSbWdIxL2bGL04cgBRPssM4m0UScx4PucvqWEPdN/5Ug0z5TrD77
-2K5nZSBUdy4DunBImz1NHRQEiytkrYX0LesGr02QlzIH4wmwb1TFu7rLkr6KfNuV
-xqWi+JVY8N4vuHAxCeEALw==
------END PRIVATE KEY-----
\ No newline at end of file
diff --git a/integration/microservices/tsconfig.json b/integration/microservices/tsconfig.json
index cef623d14..c6354c564 100644
--- a/integration/microservices/tsconfig.json
+++ b/integration/microservices/tsconfig.json
@@ -7,28 +7,10 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
     "src/**/*",
diff --git a/integration/module-utils/tsconfig.json b/integration/module-utils/tsconfig.json
index cef623d14..c6354c564 100644
--- a/integration/module-utils/tsconfig.json
+++ b/integration/module-utils/tsconfig.json
@@ -7,28 +7,10 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
     "src/**/*",
diff --git a/integration/mongoose/tsconfig.json b/integration/mongoose/tsconfig.json
index cef623d14..ea15af490 100644
--- a/integration/mongoose/tsconfig.json
+++ b/integration/mongoose/tsconfig.json
@@ -7,34 +7,16 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
-    "src/**/*",
-    "e2e/**/*"
+    "src/**/*"
   ],
   "exclude": [
     "node_modules",
+    "**/*.spec.ts"
   ]
 }
\ No newline at end of file
diff --git a/integration/nest-application/app-locals/tsconfig.json b/integration/nest-application/app-locals/tsconfig.json
index c3692649c..2a0adf369 100644
--- a/integration/nest-application/app-locals/tsconfig.json
+++ b/integration/nest-application/app-locals/tsconfig.json
@@ -7,34 +7,16 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../../packages/common"],
-      "@nestjs/common/*": ["../../../packages/common/*"],
-      "@nestjs/core": ["../../../packages/core"],
-      "@nestjs/core/*": ["../../../packages/core/*"],
-      "@nestjs/microservices": ["../../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../../packages/websockets/*"],
-      "@nestjs/testing": ["../../../packages/websockets"],
-      "@nestjs/testing/*": ["../../../packages/websockets/*"],
-      "@nestjs/platform-express": ["../../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
     "src/**/*",
     "e2e/**/*"
   ],
   "exclude": [
-    "node_modules",
+    "node_modules"
   ]
 }
\ No newline at end of file
diff --git a/integration/nest-application/get-url/tsconfig.json b/integration/nest-application/get-url/tsconfig.json
index c3692649c..2a0adf369 100644
--- a/integration/nest-application/get-url/tsconfig.json
+++ b/integration/nest-application/get-url/tsconfig.json
@@ -7,34 +7,16 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../../packages/common"],
-      "@nestjs/common/*": ["../../../packages/common/*"],
-      "@nestjs/core": ["../../../packages/core"],
-      "@nestjs/core/*": ["../../../packages/core/*"],
-      "@nestjs/microservices": ["../../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../../packages/websockets/*"],
-      "@nestjs/testing": ["../../../packages/websockets"],
-      "@nestjs/testing/*": ["../../../packages/websockets/*"],
-      "@nestjs/platform-express": ["../../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
     "src/**/*",
     "e2e/**/*"
   ],
   "exclude": [
-    "node_modules",
+    "node_modules"
   ]
 }
\ No newline at end of file
diff --git a/integration/nest-application/global-prefix/src/app.controller.ts b/integration/nest-application/global-prefix/src/app.controller.ts
index d826cd0db..912c0d76c 100644
--- a/integration/nest-application/global-prefix/src/app.controller.ts
+++ b/integration/nest-application/global-prefix/src/app.controller.ts
@@ -7,11 +7,6 @@ export class AppController {
     return 'Hello: ' + req.extras?.data;
   }
 
-  @Get('params')
-  getParams(@Req() req): any {
-    return req.middlewareParams;
-  }
-
   @Get('health')
   getHealth(): string {
     return 'up';
diff --git a/integration/nest-application/global-prefix/src/app.module.ts b/integration/nest-application/global-prefix/src/app.module.ts
index f182915c4..85d1e6ac4 100644
--- a/integration/nest-application/global-prefix/src/app.module.ts
+++ b/integration/nest-application/global-prefix/src/app.module.ts
@@ -22,11 +22,6 @@ export class AppModule {
         req.extras = { data: 'Data attached in middleware' };
         next();
       })
-      .forRoutes({ path: '*', method: RequestMethod.GET })
-      .apply((req, res, next) => {
-        req.middlewareParams = req.params;
-        next();
-      })
       .forRoutes({ path: '*', method: RequestMethod.GET });
   }
 }
diff --git a/integration/nest-application/global-prefix/tsconfig.json b/integration/nest-application/global-prefix/tsconfig.json
index c3692649c..2a0adf369 100644
--- a/integration/nest-application/global-prefix/tsconfig.json
+++ b/integration/nest-application/global-prefix/tsconfig.json
@@ -7,34 +7,16 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../../packages/common"],
-      "@nestjs/common/*": ["../../../packages/common/*"],
-      "@nestjs/core": ["../../../packages/core"],
-      "@nestjs/core/*": ["../../../packages/core/*"],
-      "@nestjs/microservices": ["../../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../../packages/websockets/*"],
-      "@nestjs/testing": ["../../../packages/websockets"],
-      "@nestjs/testing/*": ["../../../packages/websockets/*"],
-      "@nestjs/platform-express": ["../../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
     "src/**/*",
     "e2e/**/*"
   ],
   "exclude": [
-    "node_modules",
+    "node_modules"
   ]
 }
\ No newline at end of file
diff --git a/integration/nest-application/raw-body/tsconfig.json b/integration/nest-application/raw-body/tsconfig.json
index c3692649c..2a0adf369 100644
--- a/integration/nest-application/raw-body/tsconfig.json
+++ b/integration/nest-application/raw-body/tsconfig.json
@@ -7,34 +7,16 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../../packages/common"],
-      "@nestjs/common/*": ["../../../packages/common/*"],
-      "@nestjs/core": ["../../../packages/core"],
-      "@nestjs/core/*": ["../../../packages/core/*"],
-      "@nestjs/microservices": ["../../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../../packages/websockets/*"],
-      "@nestjs/testing": ["../../../packages/websockets"],
-      "@nestjs/testing/*": ["../../../packages/websockets/*"],
-      "@nestjs/platform-express": ["../../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
     "src/**/*",
     "e2e/**/*"
   ],
   "exclude": [
-    "node_modules",
+    "node_modules"
   ]
 }
\ No newline at end of file
diff --git a/integration/nest-application/sse/tsconfig.json b/integration/nest-application/sse/tsconfig.json
index 261e01453..261f9bff2 100644
--- a/integration/nest-application/sse/tsconfig.json
+++ b/integration/nest-application/sse/tsconfig.json
@@ -4,38 +4,20 @@
     "declaration": false,
     "noImplicitAny": false,
     "removeComments": true,
+    "lib": ["dom"],
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "lib": ["dom"],
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../../packages/common"],
-      "@nestjs/common/*": ["../../../packages/common/*"],
-      "@nestjs/core": ["../../../packages/core"],
-      "@nestjs/core/*": ["../../../packages/core/*"],
-      "@nestjs/microservices": ["../../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../../packages/websockets/*"],
-      "@nestjs/testing": ["../../../packages/websockets"],
-      "@nestjs/testing/*": ["../../../packages/websockets/*"],
-      "@nestjs/platform-express": ["../../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
     "src/**/*",
     "e2e/**/*"
   ],
   "exclude": [
-    "node_modules",
+    "node_modules"
   ]
-}
\ No newline at end of file
+}
diff --git a/integration/nest-application/use-body-parser/src/app.controller.ts b/integration/nest-application/use-body-parser/src/app.controller.ts
deleted file mode 100644
index 8c110580c..000000000
--- a/integration/nest-application/use-body-parser/src/app.controller.ts
+++ /dev/null
@@ -1,12 +0,0 @@
-import { Controller, Post, Req, RawBodyRequest } from '@nestjs/common';
-import { IncomingMessage } from 'http';
-
-@Controller()
-export class AppController {
-  @Post()
-  index(@Req() req: RawBodyRequest<IncomingMessage>) {
-    return {
-      raw: req.rawBody?.toString(),
-    };
-  }
-}
diff --git a/integration/nest-application/use-body-parser/src/app.module.ts b/integration/nest-application/use-body-parser/src/app.module.ts
deleted file mode 100644
index 848d4aaa7..000000000
--- a/integration/nest-application/use-body-parser/src/app.module.ts
+++ /dev/null
@@ -1,7 +0,0 @@
-import { Module } from '@nestjs/common';
-import { AppController } from './app.controller';
-
-@Module({
-  controllers: [AppController],
-})
-export class AppModule {}
diff --git a/integration/repl/tsconfig.json b/integration/repl/tsconfig.json
index cef623d14..ea15af490 100644
--- a/integration/repl/tsconfig.json
+++ b/integration/repl/tsconfig.json
@@ -7,34 +7,16 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
-    "src/**/*",
-    "e2e/**/*"
+    "src/**/*"
   ],
   "exclude": [
     "node_modules",
+    "**/*.spec.ts"
   ]
 }
\ No newline at end of file
diff --git a/integration/scopes/src/durable/durable.guard.ts b/integration/scopes/src/durable/durable.guard.ts
deleted file mode 100644
index 8868af809..000000000
--- a/integration/scopes/src/durable/durable.guard.ts
+++ /dev/null
@@ -1,21 +0,0 @@
-import {
-  CanActivate,
-  ExecutionContext,
-  Injectable,
-  Scope,
-} from '@nestjs/common';
-import { DurableService } from './durable.service';
-
-@Injectable({ scope: Scope.REQUEST, durable: true })
-export class DurableGuard implements CanActivate {
-  public instanceCounter = 0;
-  constructor(private readonly durableService: DurableService) {}
-
-  public async canActivate(context: ExecutionContext): Promise<boolean> {
-    if (typeof this.durableService === 'undefined') {
-      throw new Error('Durable service is undefined');
-    }
-    this.instanceCounter++;
-    return true;
-  }
-}
diff --git a/integration/scopes/src/durable/durable.module.ts b/integration/scopes/src/durable/durable.module.ts
index d749135bd..ed312900f 100644
--- a/integration/scopes/src/durable/durable.module.ts
+++ b/integration/scopes/src/durable/durable.module.ts
@@ -1,17 +1,9 @@
 import { Module } from '@nestjs/common';
-import { APP_GUARD } from '@nestjs/core';
 import { DurableController } from './durable.controller';
-import { DurableGuard } from './durable.guard';
 import { DurableService } from './durable.service';
 
 @Module({
   controllers: [DurableController],
-  providers: [
-    DurableService,
-    {
-      provide: APP_GUARD,
-      useClass: DurableGuard,
-    },
-  ],
+  providers: [DurableService],
 })
 export class DurableModule {}
diff --git a/integration/scopes/tsconfig.json b/integration/scopes/tsconfig.json
index cef623d14..c6354c564 100644
--- a/integration/scopes/tsconfig.json
+++ b/integration/scopes/tsconfig.json
@@ -7,28 +7,10 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
     "src/**/*",
diff --git a/integration/send-files/e2e/utils.ts b/integration/send-files/e2e/utils.ts
index bc2f1f7b6..88d6759e4 100644
--- a/integration/send-files/e2e/utils.ts
+++ b/integration/send-files/e2e/utils.ts
@@ -32,7 +32,7 @@ export const sendHttpRequest = async (url: URL) => {
       res.on('data', chunk => {
         // no op
       });
-      // fail the test if something goes wrong
+      // fail the test if somethin goes wrong
       res.on('error', err => {
         reject(err);
       });
diff --git a/integration/send-files/tsconfig.json b/integration/send-files/tsconfig.json
index cef623d14..c6354c564 100644
--- a/integration/send-files/tsconfig.json
+++ b/integration/send-files/tsconfig.json
@@ -7,28 +7,10 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
     "src/**/*",
diff --git a/integration/typeorm/tsconfig.json b/integration/typeorm/tsconfig.json
index cef623d14..ea15af490 100644
--- a/integration/typeorm/tsconfig.json
+++ b/integration/typeorm/tsconfig.json
@@ -7,34 +7,16 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
-    "src/**/*",
-    "e2e/**/*"
+    "src/**/*"
   ],
   "exclude": [
     "node_modules",
+    "**/*.spec.ts"
   ]
 }
\ No newline at end of file
diff --git a/integration/versioning/tsconfig.json b/integration/versioning/tsconfig.json
index cef623d14..c6354c564 100644
--- a/integration/versioning/tsconfig.json
+++ b/integration/versioning/tsconfig.json
@@ -7,28 +7,10 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
     "src/**/*",
diff --git a/integration/websockets/tsconfig.json b/integration/websockets/tsconfig.json
index cef623d14..c6354c564 100644
--- a/integration/websockets/tsconfig.json
+++ b/integration/websockets/tsconfig.json
@@ -7,28 +7,10 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
     "src/**/*",
diff --git a/lerna.json b/lerna.json
index 366cd366e..2a6998ba6 100644
--- a/lerna.json
+++ b/lerna.json
@@ -3,5 +3,5 @@
   "packages": [
     "packages/*"
   ],
-  "version": "9.4.0"
+  "version": "9.2.0"
 }
diff --git a/package-lock.json b/package-lock.json
index b921af460..b5f967f64 100644
Binary files a/package-lock.json and b/package-lock.json differ
diff --git a/package.json b/package.json
index 5bd361702..897ac74e4 100644
--- a/package.json
+++ b/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/core",
-  "version": "9.4.0",
+  "version": "9.1.2",
   "description": "Modern, fast, powerful node.js web framework",
   "homepage": "https://nestjs.com",
   "repository": {
@@ -14,25 +14,19 @@
   "license": "MIT",
   "author": "Kamil Mysliwiec",
   "scripts": {
-    "build": "tsc -b -v packages",
-    "postbuild": "npm run move:node_modules",
-    "build:dev": "tsc -b -v packages --watch",
-    "prebuild:prod": "npm run clean",
-    "build:prod": "tsc -b -v packages",
+    "build": "gulp build --dist node_modules/@nestjs",
+    "postbuild": "gulp move",
     "changelog": "lerna-changelog",
-    "clean": "tsc -b --clean packages",
-    "move:samples": "gulp move:samples",
-    "move:node_modules": "gulp move:node_modules",
-    "build:samples": "gulp install:samples && npm run build && npm run move:samples && gulp build:samples && gulp test:samples && gulp test:e2e:samples",
+    "prebuild:prod": "npm run clean",
+    "build:prod": "gulp build",
+    "build:samples": "gulp install:samples && npm run build && gulp build:samples && gulp test:samples && gulp test:e2e:samples",
+    "clean": "gulp clean:bundle",
     "codechecks:benchmarks": "codechecks ./tools/benchmarks/check-benchmarks.ts",
     "coverage": "nyc report --reporter=text-lcov | coveralls",
     "format": "prettier \"**/*.ts\" \"packages/**/*.json\" --ignore-path ./.prettierignore --write && git status",
     "postinstall": "opencollective",
-    "test": "mocha packages/**/*.spec.ts",
-    "test:dev": "mocha -w --watch-files \"packages\" packages/**/*.spec.ts",
-    "pretest:cov": "npm run clean",
-    "test:cov": "nyc mocha packages/**/*.spec.ts --reporter spec",
-    "test:integration": "mocha \"integration/*/{,!(node_modules)/**/}/*.spec.ts\"",
+    "test": "nyc mocha packages/**/*.spec.ts --reporter spec",
+    "test:integration": "mocha \"integration/*/{,!(node_modules)/**/}/*.spec.ts\" --reporter spec",
     "test:docker:up": "docker-compose -f integration/docker-compose.yml up -d",
     "test:docker:down": "docker-compose -f integration/docker-compose.yml down",
     "lint": "concurrently 'npm run lint:packages' 'npm run lint:integration' 'npm run lint:spec'",
@@ -40,7 +34,7 @@
     "lint:integration": "eslint 'integration/*/{,!(node_modules)/**/}/*.ts'",
     "lint:packages": "eslint 'packages/**/**.ts' --ignore-pattern 'packages/**/*.spec.ts'",
     "lint:spec": "eslint 'packages/**/**.spec.ts'",
-    "prerelease": "gulp copy-misc",
+    "prerelease": "gulp copy-misc && gulp build --dist node_modules/@nestjs",
     "publish": "npm run prerelease && npm run build:prod && ./node_modules/.bin/lerna publish --force-publish --access public --exact -m \"chore(@nestjs) publish %s release\"",
     "prepublishOnly": "npm run changelog | pbcopy",
     "publish:beta": "npm run prerelease && npm run build:prod && ./node_modules/.bin/lerna publish --npm-tag=beta --access public -m \"chore(@nestjs) publish %s release\"",
@@ -60,80 +54,83 @@
   "dependencies": {
     "@nuxtjs/opencollective": "0.3.2",
     "class-transformer": "0.5.1",
-    "class-validator": "0.14.0",
+    "class-validator": "0.13.2",
     "cli-color": "2.0.3",
     "cors": "2.8.5",
     "express": "4.18.2",
-    "fast-json-stringify": "5.7.0",
+    "fast-json-stringify": "5.4.0",
     "fast-safe-stringify": "2.1.1",
     "graphql-subscriptions": "2.0.0",
     "iterare": "1.2.1",
     "object-hash": "3.0.0",
     "path-to-regexp": "3.2.0",
     "reflect-metadata": "0.1.13",
-    "rxjs": "7.8.0",
-    "socket.io": "4.6.1",
-    "tslib": "2.5.0",
-    "uid": "2.0.2",
+    "rxjs": "7.5.7",
+    "socket.io": "4.5.3",
+    "tslib": "2.4.1",
     "uuid": "9.0.0"
   },
   "devDependencies": {
-    "@apollo/server": "4.6.0",
     "@codechecks/client": "0.1.12",
-    "@commitlint/cli": "17.5.1",
-    "@commitlint/config-angular": "17.4.4",
+    "@commitlint/cli": "17.2.0",
+    "@commitlint/config-angular": "17.2.0",
     "@fastify/cors": "^8.0.0",
-    "@fastify/formbody": "7.4.0",
-    "@fastify/middie": "8.1.0",
-    "@fastify/multipart": "7.5.0",
-    "@fastify/static": "6.10.0",
-    "@fastify/view": "7.4.1",
-    "@grpc/grpc-js": "1.8.13",
-    "@grpc/proto-loader": "0.7.6",
-    "@nestjs/apollo": "11.0.4",
-    "@nestjs/graphql": "11.0.4",
-    "@nestjs/mongoose": "9.2.2",
+    "@fastify/formbody": "7.3.0",
+    "@fastify/middie": "8.0.0",
+    "@fastify/multipart": "7.3.0",
+    "@fastify/static": "6.5.0",
+    "@fastify/view": "7.1.2",
+    "@grpc/grpc-js": "1.7.3",
+    "@grpc/proto-loader": "0.7.3",
+    "@nestjs/apollo": "10.1.4",
+    "@nestjs/graphql": "10.1.5",
+    "@nestjs/mongoose": "9.2.1",
     "@nestjs/typeorm": "9.0.1",
-    "@types/amqplib": "0.10.1",
+    "@types/amqplib": "0.8.2",
     "@types/bytes": "3.1.1",
-    "@types/chai": "4.3.4",
+    "@types/cache-manager": "4.0.2",
+    "@types/chai": "4.3.3",
     "@types/chai-as-promised": "7.1.5",
-    "@types/cors": "2.8.13",
-    "@types/express": "4.17.17",
-    "@types/gulp": "4.0.10",
+    "@types/cors": "2.8.12",
+    "@types/express": "4.17.14",
+    "@types/gulp": "4.0.9",
     "@types/http-errors": "2.0.1",
-    "@types/mocha": "10.0.1",
-    "@types/node": "18.15.11",
+    "@types/mocha": "10.0.0",
+    "@types/node": "18.11.9",
+    "@types/redis": "4.0.11",
+    "@types/reflect-metadata": "0.1.0",
     "@types/sinon": "10.0.13",
     "@types/supertest": "2.0.12",
-    "@types/ws": "8.5.4",
+    "@types/ws": "8.5.3",
     "@typescript-eslint/eslint-plugin": "4.33.0",
     "@typescript-eslint/parser": "4.33.0",
-    "amqp-connection-manager": "4.1.12",
+    "amqp-connection-manager": "4.1.9",
     "amqplib": "0.10.3",
+    "apollo-server-core": "3.11.1",
+    "apollo-server-express": "3.11.1",
     "artillery": "1.7.9",
-    "body-parser": "1.20.2",
+    "body-parser": "1.20.1",
     "bytes": "3.1.2",
-    "cache-manager": "5.2.0",
+    "cache-manager": "5.1.3",
     "cache-manager-redis-store": "3.0.1",
-    "chai": "4.3.7",
+    "chai": "4.3.6",
     "chai-as-promised": "7.1.1",
     "clang-format": "1.8.0",
     "commitlint-circle": "1.0.0",
-    "concurrently": "8.0.1",
+    "concurrently": "7.5.0",
     "conventional-changelog": "3.1.25",
-    "core-js": "3.30.0",
+    "core-js": "3.26.0",
     "coveralls": "3.1.1",
     "delete-empty": "3.0.0",
-    "engine.io-client": "6.4.0",
+    "engine.io-client": "6.2.3",
     "eslint": "7.32.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.27.5",
+    "eslint-config-prettier": "8.5.0",
+    "eslint-plugin-import": "2.26.0",
     "eventsource": "2.0.2",
     "fancy-log": "2.0.0",
-    "fastify": "4.15.0",
-    "graphql": "16.6.0",
-    "graphql-tools": "8.3.19",
+    "fastify": "4.9.2",
+    "graphql": "15.8.0",
+    "graphql-tools": "8.3.10",
     "gulp": "4.0.2",
     "gulp-clang-format": "1.0.27",
     "gulp-clean": "0.4.0",
@@ -141,42 +138,42 @@
     "gulp-typescript": "5.0.1",
     "gulp-watch": "5.0.1",
     "http-errors": "2.0.0",
-    "husky": "8.0.3",
+    "husky": "8.0.1",
     "imports-loader": "4.0.1",
-    "ioredis": "5.3.1",
+    "ioredis": "5.2.4",
     "json-loader": "0.5.7",
-    "kafkajs": "2.2.4",
+    "kafkajs": "2.2.2",
     "lerna": "2.11.0",
     "lerna-changelog": "2.2.0",
-    "light-my-request": "5.9.1",
-    "lint-staged": "13.2.0",
+    "light-my-request": "5.6.1",
+    "lint-staged": "13.0.3",
     "markdown-table": "2.0.0",
     "merge-graphql-schemas": "1.7.8",
-    "mocha": "10.2.0",
-    "mongoose": "7.0.3",
+    "mocha": "10.1.0",
+    "mongoose": "6.7.1",
     "mqtt": "4.3.7",
     "multer": "1.4.4",
-    "mysql2": "3.2.0",
-    "nats": "2.13.1",
-    "nodemon": "2.0.22",
+    "mysql2": "2.3.3",
+    "nats": "2.9.0",
+    "nodemon": "2.0.20",
     "nyc": "15.1.0",
-    "prettier": "2.8.7",
-    "redis": "4.6.5",
+    "prettier": "2.7.1",
+    "redis": "4.4.0",
     "rxjs-compat": "6.6.7",
-    "sinon": "15.0.3",
+    "sinon": "14.0.1",
     "sinon-chai": "3.7.0",
-    "socket.io-client": "4.6.1",
+    "socket.io-client": "4.5.3",
     "subscriptions-transport-ws": "0.11.0",
-    "supertest": "6.3.3",
-    "ts-morph": "18.0.0",
+    "supertest": "6.3.1",
+    "ts-morph": "16.0.0",
     "ts-node": "10.9.1",
-    "typeorm": "0.3.12",
-    "typescript": "5.0.3",
+    "typeorm": "0.3.10",
+    "typescript": "4.8.4",
     "wrk": "1.2.1",
-    "ws": "8.13.0"
+    "ws": "8.11.0"
   },
   "engines": {
-    "node": ">= 16"
+    "node": ">= 12.9.0"
   },
   "collective": {
     "type": "opencollective",
@@ -200,23 +197,20 @@
       "packages/**/*.ts"
     ],
     "exclude": [
-      "**/*.js",
-      "**/*.d.ts",
-      "**/*.spec.ts",
+      "packages/**/*.spec.ts",
       "packages/**/adapters/*.ts",
       "packages/**/nest-*.ts",
       "packages/**/test/**/*.ts",
       "packages/core/errors/**/*",
       "packages/common/exceptions/*.ts",
+      "packages/common/http/*.ts",
       "packages/common/utils/load-package.util.ts",
       "packages/microservices/exceptions/",
       "packages/microservices/microservices-module.ts",
       "packages/core/middleware/middleware-module.ts",
-      "packages/core/discovery/discovery-service.ts",
       "packages/core/injector/module-ref.ts",
       "packages/core/injector/instance-links-host.ts",
       "packages/core/helpers/context-id-factory.ts",
-      "packages/websockets/socket-module.ts",
       "packages/common/cache/**/*",
       "packages/common/serializer/**/*",
       "packages/common/services/*.ts"
@@ -237,7 +231,6 @@
   "mocha": {
     "require": [
       "ts-node/register",
-      "tsconfig-paths/register",
       "node_modules/reflect-metadata/Reflect.js",
       "hooks/mocha-init-hook.ts"
     ],
diff --git a/packages/common/Readme.md b/packages/common/Readme.md
index 16f48336d..5203ac4c2 100644
--- a/packages/common/Readme.md
+++ b/packages/common/Readme.md
@@ -11,6 +11,7 @@
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/l/@nestjs/core.svg" alt="Package License" /></a>
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/dm/@nestjs/common.svg" alt="NPM Downloads" /></a>
 <a href="https://circleci.com/gh/nestjs/nest" target="_blank"><img src="https://img.shields.io/circleci/build/github/nestjs/nest/master" alt="CircleCI" /></a>
+<a href="https://coveralls.io/github/nestjs/nest?branch=master" target="_blank"><img src="https://coveralls.io/repos/github/nestjs/nest/badge.svg?branch=master#9" alt="Coverage" /></a>
 <a href="https://discord.gg/G7Qnnhy" target="_blank"><img src="https://img.shields.io/badge/discord-online-brightgreen.svg" alt="Discord"/></a>
 <a href="https://opencollective.com/nest#backer" target="_blank"><img src="https://opencollective.com/nest/backers/badge.svg" alt="Backers on Open Collective" /></a>
 <a href="https://opencollective.com/nest#sponsor" target="_blank"><img src="https://opencollective.com/nest/sponsors/badge.svg" alt="Sponsors on Open Collective" /></a>
@@ -77,10 +78,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
  <td>
 <a href="https://jetbrains.com/" target="_blank"><img src="https://nestjs.com/img/jetbrains-logo.svg" width="110" valign="middle" /></a></td><td>
 <a href="https://snyk.co/nestjs" target="_blank"><img src="https://nestjs.com/img/snyk-logo-black.png" width="185" valign="middle" /></a></td><td>
-<a href="https://fuseautotech.com/" target="_blank"><img src="https://nestjs.com/img/fuse-logo.svg" width="105" valign="middle" /></a></td>
-<td>
-<a href="https://ridicorp.com/career/" target="_blank"><img src="https://nestjs.com/img/ridi-logo.svg" width="105" valign="middle" /></a></td><td>
-<a href="https://www.movavi.com/imovie-for-windows.html" target="_blank"><img src="https://nestjs.com/img/movavi-logo.svg" width="105" valign="middle" /></a></td></</tr></table>
+<a href="https://fuseautotech.com/" target="_blank"><img src="https://nestjs.com/img/fuse-logo.svg" width="105" valign="middle" /></a></td></</tr></table>
 
 #### Silver Sponsors
 
@@ -93,8 +91,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
 <td><a href="https://www.tinystacks.com" target="_blank"><img src="https://nestjs.com/img/tinystacks-logo.png#1" width="140" valign="middle" /></td>
 <td><a href="https://n.inc" target="_blank"><img src="https://nestjs.com/img/n-inc-logo.svg" width="120" valign="middle" /></td></tr><tr>
 <td><a href="https://bilberrry.com/" target="_blank"><img src="https://nestjs.com/img/bilberrry-logo.svg" width="180" valign="middle" /></td>
-<td><a href="https://ipinfo.ai/" target="_blank"><img src="https://nestjs.com/img/ipinfo-logo.png" width="130" valign="middle" /></td>
-<td><a href="https://chax.at" target="_blank"><img src="https://nestjs.com/img/chaxat-logo.png" width="100" valign="middle" /></td></tr>
+<td><a href="https://ipinfo.ai/" target="_blank"><img src="https://nestjs.com/img/ipinfo-logo.png" width="130" valign="middle" /></td></tr>
 </table>
 
 #### Sponsors
@@ -135,8 +132,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
    <td align="center" valign="middle"><a href="https://mobilereality.pl/" target="_blank"><img src="https://nestjs.com/img/mobile-reality-logo.png" width="45" valign="middle" /></a></td>
      <td align="center" valign="middle"><a href="https://boringowl.io/" target="_blank"><img src="https://nestjs.com/img/boringowl-logo.svg" width="120" valign="middle" /></a></td>
  <td align="center" valign="middle"><a href="https://www.mobilefactory.jp/" target="_blank"><img src="https://nestjs.com/img/mobilefactory-logo.png" width="100" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://nordbot.app/" target="_blank"><img src="https://nestjs.com/img/nordbot-logo.png" width="120" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://doppio.sh/" target="_blank"><img src="https://nestjs.com/img/dopiosh-logo.png" width="50" valign="middle" /></a></td>
+ <td align="center" valign="middle"><a href="https://db.nordbot.app/" target="_blank"><img src="https://nestjs.com/img/nord-logo.png" width="50" valign="middle" /></a></td>
   </tr></table>
 
 ## Backers
diff --git a/packages/common/cache/cache.constants.ts b/packages/common/cache/cache.constants.ts
new file mode 100644
index 000000000..aa1e752de
--- /dev/null
+++ b/packages/common/cache/cache.constants.ts
@@ -0,0 +1,6 @@
+import { MODULE_OPTIONS_TOKEN } from './cache.module-definition';
+
+export const CACHE_MANAGER = 'CACHE_MANAGER';
+export const CACHE_KEY_METADATA = 'cache_module:cache_key';
+export const CACHE_TTL_METADATA = 'cache_module:cache_ttl';
+export const CACHE_MODULE_OPTIONS = MODULE_OPTIONS_TOKEN;
diff --git a/packages/common/cache/cache.module-definition.ts b/packages/common/cache/cache.module-definition.ts
new file mode 100644
index 000000000..25d74e986
--- /dev/null
+++ b/packages/common/cache/cache.module-definition.ts
@@ -0,0 +1,12 @@
+import { ConfigurableModuleBuilder } from '../module-utils';
+import {
+  CacheModuleOptions,
+  CacheOptionsFactory,
+} from './interfaces/cache-module.interface';
+
+export const { ConfigurableModuleClass, MODULE_OPTIONS_TOKEN } =
+  new ConfigurableModuleBuilder<CacheModuleOptions>({
+    moduleName: 'Cache',
+  })
+    .setFactoryMethodName('createCacheOptions' as keyof CacheOptionsFactory)
+    .build();
diff --git a/packages/common/cache/cache.module.ts b/packages/common/cache/cache.module.ts
new file mode 100644
index 000000000..e57c82666
--- /dev/null
+++ b/packages/common/cache/cache.module.ts
@@ -0,0 +1,60 @@
+import { Module } from '../decorators';
+import { DynamicModule } from '../interfaces';
+import { CACHE_MANAGER } from './cache.constants';
+import { ConfigurableModuleClass } from './cache.module-definition';
+import { createCacheManager } from './cache.providers';
+import {
+  CacheModuleAsyncOptions,
+  CacheModuleOptions,
+} from './interfaces/cache-module.interface';
+
+/**
+ * Module that provides Nest cache-manager.
+ *
+ * @see [Caching](https://docs.nestjs.com/techniques/caching)
+ *
+ * @publicApi
+ */
+@Module({
+  providers: [createCacheManager()],
+  exports: [CACHE_MANAGER],
+})
+export class CacheModule extends ConfigurableModuleClass {
+  /**
+   * Configure the cache manager statically.
+   *
+   * @param options options to configure the cache manager
+   *
+   * @see [Customize caching](https://docs.nestjs.com/techniques/caching#customize-caching)
+   */
+  static register<StoreConfig extends Record<any, any> = Record<string, any>>(
+    options: CacheModuleOptions<StoreConfig> = {} as any,
+  ): DynamicModule {
+    return {
+      global: options.isGlobal,
+      ...super.register(options),
+    };
+  }
+
+  /**
+   * Configure the cache manager dynamically.
+   *
+   * @param options method for dynamically supplying cache manager configuration
+   * options
+   *
+   * @see [Async configuration](https://docs.nestjs.com/techniques/caching#async-configuration)
+   */
+  static registerAsync<
+    StoreConfig extends Record<any, any> = Record<string, any>,
+  >(options: CacheModuleAsyncOptions<StoreConfig>): DynamicModule {
+    const moduleDefinition = super.registerAsync(options);
+
+    return {
+      global: options.isGlobal,
+      ...moduleDefinition,
+      providers: options.extraProviders
+        ? moduleDefinition.providers.concat(options.extraProviders)
+        : moduleDefinition.providers,
+    };
+  }
+}
diff --git a/packages/common/cache/cache.providers.ts b/packages/common/cache/cache.providers.ts
new file mode 100644
index 000000000..082c7029f
--- /dev/null
+++ b/packages/common/cache/cache.providers.ts
@@ -0,0 +1,54 @@
+import { Provider } from '../interfaces';
+import { loadPackage } from '../utils/load-package.util';
+import { CACHE_MANAGER } from './cache.constants';
+import { MODULE_OPTIONS_TOKEN } from './cache.module-definition';
+import { defaultCacheOptions } from './default-options';
+import { CacheManagerOptions } from './interfaces/cache-manager.interface';
+
+/**
+ * Creates a CacheManager Provider.
+ *
+ * @publicApi
+ */
+export function createCacheManager(): Provider {
+  return {
+    provide: CACHE_MANAGER,
+    useFactory: async (options: CacheManagerOptions) => {
+      const cacheManager = loadPackage('cache-manager', 'CacheModule', () =>
+        require('cache-manager'),
+      );
+      const cacheManagerIsv5OrGreater = 'memoryStore' in cacheManager;
+      const cachingFactory = async (
+        store: CacheManagerOptions['store'],
+        options: Omit<CacheManagerOptions, 'store'>,
+      ): Promise<Record<string, any>> => {
+        if (!cacheManagerIsv5OrGreater) {
+          return cacheManager.caching({
+            ...defaultCacheOptions,
+            ...{ ...options, store },
+          });
+        }
+        let cache: string | Function = 'memory';
+        defaultCacheOptions.ttl *= 1000;
+        if (typeof store === 'object' && 'create' in store) {
+          cache = store.create;
+        } else if (typeof store === 'function') {
+          cache = store;
+        }
+        return cacheManager.caching(cache, {
+          ...defaultCacheOptions,
+          ...options,
+        });
+      };
+
+      return Array.isArray(options)
+        ? cacheManager.multiCaching(
+            await Promise.all(
+              options.map(option => cachingFactory(option.store, option)),
+            ),
+          )
+        : cachingFactory(options.store, options);
+    },
+    inject: [MODULE_OPTIONS_TOKEN],
+  };
+}
diff --git a/packages/common/cache/decorators/cache-key.decorator.ts b/packages/common/cache/decorators/cache-key.decorator.ts
new file mode 100644
index 000000000..b9aa7f3c1
--- /dev/null
+++ b/packages/common/cache/decorators/cache-key.decorator.ts
@@ -0,0 +1,17 @@
+import { SetMetadata } from '../../decorators';
+import { CACHE_KEY_METADATA } from '../cache.constants';
+
+/**
+ * Decorator that sets the caching key used to store/retrieve cached items for
+ * Web sockets or Microservice based apps.
+ *
+ * For example:
+ * `@CacheKey('events')`
+ *
+ * @param key string naming the field to be used as a cache key
+ *
+ * @see [Caching](https://docs.nestjs.com/techniques/caching)
+ *
+ * @publicApi
+ */
+export const CacheKey = (key: string) => SetMetadata(CACHE_KEY_METADATA, key);
diff --git a/packages/common/cache/decorators/cache-ttl.decorator.ts b/packages/common/cache/decorators/cache-ttl.decorator.ts
new file mode 100644
index 000000000..e6b48ae93
--- /dev/null
+++ b/packages/common/cache/decorators/cache-ttl.decorator.ts
@@ -0,0 +1,18 @@
+import { SetMetadata } from '../../decorators';
+import { ExecutionContext } from '../../interfaces/features/execution-context.interface';
+import { CACHE_TTL_METADATA } from '../cache.constants';
+
+/**
+ * Decorator that sets the cache ttl setting the duration for cache expiration.
+ *
+ * For example: `@CacheTTL(5)`
+ *
+ * @param ttl number set the cache expiration time
+ *
+ * @see [Caching](https://docs.nestjs.com/techniques/caching)
+ *
+ * @publicApi
+ */
+type CacheTTLFactory = (ctx: ExecutionContext) => Promise<number> | number;
+export const CacheTTL = (ttl: number | CacheTTLFactory) =>
+  SetMetadata(CACHE_TTL_METADATA, ttl);
diff --git a/packages/common/cache/decorators/index.ts b/packages/common/cache/decorators/index.ts
new file mode 100644
index 000000000..9d60a27f5
--- /dev/null
+++ b/packages/common/cache/decorators/index.ts
@@ -0,0 +1,2 @@
+export * from './cache-key.decorator';
+export * from './cache-ttl.decorator';
diff --git a/packages/common/cache/default-options.ts b/packages/common/cache/default-options.ts
new file mode 100644
index 000000000..cdd262e2d
--- /dev/null
+++ b/packages/common/cache/default-options.ts
@@ -0,0 +1,5 @@
+export const defaultCacheOptions = {
+  ttl: 5,
+  max: 100,
+  store: 'memory',
+};
diff --git a/packages/common/cache/index.ts b/packages/common/cache/index.ts
new file mode 100644
index 000000000..1a5dfc371
--- /dev/null
+++ b/packages/common/cache/index.ts
@@ -0,0 +1,5 @@
+export * from './cache.constants';
+export * from './cache.module';
+export * from './decorators';
+export * from './interceptors';
+export * from './interfaces';
diff --git a/packages/common/cache/interceptors/cache.interceptor.ts b/packages/common/cache/interceptors/cache.interceptor.ts
new file mode 100644
index 000000000..f6fe79db6
--- /dev/null
+++ b/packages/common/cache/interceptors/cache.interceptor.ts
@@ -0,0 +1,98 @@
+import { Observable, of } from 'rxjs';
+import { tap } from 'rxjs/operators';
+import { Inject, Injectable, Optional } from '../../decorators';
+import {
+  CallHandler,
+  ExecutionContext,
+  HttpServer,
+  NestInterceptor,
+} from '../../interfaces';
+import { Logger } from '../../services/logger.service';
+import { isFunction, isNil } from '../../utils/shared.utils';
+import {
+  CACHE_KEY_METADATA,
+  CACHE_MANAGER,
+  CACHE_TTL_METADATA,
+} from '../cache.constants';
+
+const HTTP_ADAPTER_HOST = 'HttpAdapterHost';
+const REFLECTOR = 'Reflector';
+
+export interface HttpAdapterHost<T extends HttpServer = any> {
+  httpAdapter: T;
+}
+
+@Injectable()
+export class CacheInterceptor implements NestInterceptor {
+  @Optional()
+  @Inject(HTTP_ADAPTER_HOST)
+  protected readonly httpAdapterHost: HttpAdapterHost;
+
+  protected allowedMethods = ['GET'];
+  constructor(
+    @Inject(CACHE_MANAGER) protected readonly cacheManager: any,
+    @Inject(REFLECTOR) protected readonly reflector: any,
+  ) {}
+
+  async intercept(
+    context: ExecutionContext,
+    next: CallHandler,
+  ): Promise<Observable<any>> {
+    const key = this.trackBy(context);
+    const ttlValueOrFactory =
+      this.reflector.get(CACHE_TTL_METADATA, context.getHandler()) ?? null;
+
+    if (!key) {
+      return next.handle();
+    }
+    try {
+      const value = await this.cacheManager.get(key);
+      if (!isNil(value)) {
+        return of(value);
+      }
+      const ttl = isFunction(ttlValueOrFactory)
+        ? await ttlValueOrFactory(context)
+        : ttlValueOrFactory;
+      return next.handle().pipe(
+        tap(async response => {
+          const args = isNil(ttl) ? [key, response] : [key, response, { ttl }];
+
+          try {
+            await this.cacheManager.set(...args);
+          } catch (err) {
+            Logger.error(
+              `An error has occured when inserting "key: ${key}", "value: ${response}"`,
+              'CacheInterceptor',
+            );
+          }
+        }),
+      );
+    } catch {
+      return next.handle();
+    }
+  }
+
+  protected trackBy(context: ExecutionContext): string | undefined {
+    const httpAdapter = this.httpAdapterHost.httpAdapter;
+    const isHttpApp = httpAdapter && !!httpAdapter.getRequestMethod;
+    const cacheMetadata = this.reflector.get(
+      CACHE_KEY_METADATA,
+      context.getHandler(),
+    );
+
+    if (!isHttpApp || cacheMetadata) {
+      return cacheMetadata;
+    }
+
+    const request = context.getArgByIndex(0);
+    if (!this.isRequestCacheable(context)) {
+      return undefined;
+    }
+    return httpAdapter.getRequestUrl(request);
+  }
+
+  protected isRequestCacheable(context: ExecutionContext): boolean {
+    const req = context.switchToHttp().getRequest();
+    return this.allowedMethods.includes(req.method);
+  }
+}
diff --git a/packages/common/cache/interceptors/index.ts b/packages/common/cache/interceptors/index.ts
new file mode 100644
index 000000000..474887b1f
--- /dev/null
+++ b/packages/common/cache/interceptors/index.ts
@@ -0,0 +1 @@
+export * from './cache.interceptor';
diff --git a/packages/common/cache/interfaces/cache-manager.interface.ts b/packages/common/cache/interfaces/cache-manager.interface.ts
new file mode 100644
index 000000000..9e9d4d6f4
--- /dev/null
+++ b/packages/common/cache/interfaces/cache-manager.interface.ts
@@ -0,0 +1,84 @@
+export interface LiteralObject {
+  [key: string]: any;
+}
+
+/**
+ * Interface defining a cache store. Implement this interface to create a custom
+ * cache store.
+ *
+ * @publicApi
+ */
+export interface CacheStore {
+  /**
+   * Create a key/value pair in the cache.
+   *
+   * @param key cache key
+   * @param value cache value
+   */
+  set<T>(
+    key: string,
+    value: T,
+    options?: CacheStoreSetOptions<T> | number,
+  ): Promise<void> | void;
+  /**
+   * Retrieve a key/value pair from the cache.
+   *
+   * @param key cache key
+   */
+  get<T>(key: string): Promise<T | undefined> | T | undefined;
+  /**
+   * Destroy a key/value pair from the cache.
+   *
+   * @param key cache key
+   */
+  del?(key: string): void | Promise<void>;
+}
+
+export interface CacheStoreSetOptions<T> {
+  /**
+   * Time to live - amount of time in seconds that a response is cached before it
+   * is deleted. Defaults based on your cache manager settings.
+   */
+  ttl?: ((value: T) => number) | number;
+}
+
+/**
+ * Interface defining a factory to create a cache store.
+ *
+ * @publicApi
+ */
+export interface CacheStoreFactory {
+  /**
+   * Return a configured cache store.
+   *
+   * @param args Cache manager options received from `CacheModule.register()`
+   * or `CacheModule.registerAsync()`
+   */
+  create(args: LiteralObject): CacheStore;
+}
+
+/**
+ * Interface defining Cache Manager configuration options.
+ *
+ * @publicApi
+ */
+export interface CacheManagerOptions {
+  /**
+   * Cache storage manager.  Default is `'memory'` (in-memory store).  See
+   * [Different stores](https://docs.nestjs.com/techniques/caching#different-stores)
+   * for more info.
+   */
+  store?: string | CacheStoreFactory | CacheStore;
+  /**
+   * Time to live - amount of time that a response is cached before it
+   * is deleted. Subsequent request will call through the route handler and refresh
+   * the cache.  Defaults to 5 seconds. In `cache-manager@^4` this value is in seconds.
+   * In `cache-manager@^5` this value is in milliseconds.
+   */
+  ttl?: number;
+  /**
+   * Maximum number of responses to store in the cache.  Defaults to 100.
+   */
+  max?: number;
+  isCacheableValue?: (value: any) => boolean;
+}
diff --git a/packages/common/cache/interfaces/cache-module.interface.ts b/packages/common/cache/interfaces/cache-module.interface.ts
new file mode 100644
index 000000000..bac872a9d
--- /dev/null
+++ b/packages/common/cache/interfaces/cache-module.interface.ts
@@ -0,0 +1,78 @@
+import { Provider, Type } from '../../interfaces';
+import { ConfigurableModuleAsyncOptions } from '../../module-utils';
+import { CacheManagerOptions } from './cache-manager.interface';
+
+export type CacheModuleOptions<
+  StoreConfig extends Record<any, any> = Record<string, any>,
+> =
+  // Store-specific configuration takes precedence over cache module options due
+  // to how `createCacheManager` is implemented.
+  CacheManagerOptions &
+    StoreConfig & {
+      /**
+       * If "true', register `CacheModule` as a global module.
+       */
+      isGlobal?: boolean;
+    };
+
+/**
+ * Interface describing a `CacheOptionsFactory`.  Providers supplying configuration
+ * options for the Cache module must implement this interface.
+ *
+ * @see [Async configuration](https://docs.nestjs.com/techniques/caching#async-configuration)
+ *
+ * @publicApi
+ */
+export interface CacheOptionsFactory<
+  StoreConfig extends Record<any, any> = Record<string, any>,
+> {
+  createCacheOptions():
+    | Promise<CacheModuleOptions<StoreConfig>>
+    | CacheModuleOptions<StoreConfig>;
+}
+
+/**
+ * Options for dynamically configuring the Cache module.
+ *
+ * @see [Async configuration](https://docs.nestjs.com/techniques/caching#async-configuration)
+ *
+ * @publicApi
+ */
+export interface CacheModuleAsyncOptions<
+  StoreConfig extends Record<any, any> = Record<string, any>,
+> extends ConfigurableModuleAsyncOptions<
+    CacheModuleOptions<StoreConfig>,
+    keyof CacheOptionsFactory
+  > {
+  /**
+   * Injection token resolving to an existing provider. The provider must implement
+   * the `CacheOptionsFactory` interface.
+   */
+  useExisting?: Type<CacheOptionsFactory<StoreConfig>>;
+  /**
+   * Injection token resolving to a class that will be instantiated as a provider.
+   * The class must implement the `CacheOptionsFactory` interface.
+   */
+  useClass?: Type<CacheOptionsFactory<StoreConfig>>;
+  /**
+   * Function returning options (or a Promise resolving to options) to configure the
+   * cache module.
+   */
+  useFactory?: (
+    ...args: any[]
+  ) =>
+    | Promise<CacheModuleOptions<StoreConfig>>
+    | CacheModuleOptions<StoreConfig>;
+  /**
+   * Dependencies that a Factory may inject.
+   */
+  inject?: any[];
+  /**
+   * Extra providers to be registered within a scope of this module.
+   */
+  extraProviders?: Provider[];
+  /**
+   * If "true', register `CacheModule` as a global module.
+   */
+  isGlobal?: boolean;
+}
diff --git a/packages/common/cache/interfaces/index.ts b/packages/common/cache/interfaces/index.ts
new file mode 100644
index 000000000..54aa4c3cb
--- /dev/null
+++ b/packages/common/cache/interfaces/index.ts
@@ -0,0 +1,2 @@
+export * from './cache-manager.interface';
+export * from './cache-module.interface';
diff --git a/packages/common/constants.ts b/packages/common/constants.ts
index 71f27685d..7d618b01c 100644
--- a/packages/common/constants.ts
+++ b/packages/common/constants.ts
@@ -4,7 +4,6 @@ export const MODULE_METADATA = {
   CONTROLLERS: 'controllers',
   EXPORTS: 'exports',
 };
-
 export const GLOBAL_MODULE_METADATA = '__module:global__';
 export const HOST_METADATA = 'host';
 export const PATH_METADATA = 'path';
@@ -17,23 +16,16 @@ export const SCOPE_OPTIONS_METADATA = 'scope:options';
 export const METHOD_METADATA = 'method';
 export const ROUTE_ARGS_METADATA = '__routeArguments__';
 export const CUSTOM_ROUTE_ARGS_METADATA = '__customRouteArgs__';
+/**
+ * @deprecated Use `CUSTOM_ROUTE_ARGS_METADATA` instead
+ */
+export const CUSTOM_ROUTE_AGRS_METADATA = CUSTOM_ROUTE_ARGS_METADATA;
+export const EXCEPTION_FILTERS_METADATA = '__exceptionFilters__';
 export const FILTER_CATCH_EXCEPTIONS = '__filterCatchExceptions__';
-
 export const PIPES_METADATA = '__pipes__';
 export const GUARDS_METADATA = '__guards__';
-export const INTERCEPTORS_METADATA = '__interceptors__';
-export const EXCEPTION_FILTERS_METADATA = '__exceptionFilters__';
-export const ENHANCER_KEY_TO_SUBTYPE_MAP = {
-  [GUARDS_METADATA]: 'guard',
-  [INTERCEPTORS_METADATA]: 'interceptor',
-  [PIPES_METADATA]: 'pipe',
-  [EXCEPTION_FILTERS_METADATA]: 'filter',
-} as const;
-
-export type EnhancerSubtype =
-  (typeof ENHANCER_KEY_TO_SUBTYPE_MAP)[keyof typeof ENHANCER_KEY_TO_SUBTYPE_MAP];
-
 export const RENDER_METADATA = '__renderTemplate__';
+export const INTERCEPTORS_METADATA = '__interceptors__';
 export const HTTP_CODE_METADATA = '__httpCode__';
 export const MODULE_PATH = '__module_path__';
 export const HEADERS_METADATA = '__headers__';
@@ -44,4 +36,3 @@ export const VERSION_METADATA = '__version__';
 export const INJECTABLE_WATERMARK = '__injectable__';
 export const CONTROLLER_WATERMARK = '__controller__';
 export const CATCH_WATERMARK = '__catch__';
-export const ENTRY_PROVIDER_WATERMARK = '__entryProvider__';
diff --git a/packages/common/decorators/core/controller.decorator.ts b/packages/common/decorators/core/controller.decorator.ts
index 531ae5151..ec13f5f7c 100644
--- a/packages/common/decorators/core/controller.decorator.ts
+++ b/packages/common/decorators/core/controller.decorator.ts
@@ -5,7 +5,8 @@ import {
   SCOPE_OPTIONS_METADATA,
   VERSION_METADATA,
 } from '../../constants';
-import { ScopeOptions, VersionOptions } from '../../interfaces';
+import { ScopeOptions } from '../../interfaces/scope-options.interface';
+import { VersionOptions } from '../../interfaces/version-options.interface';
 import { isString, isUndefined } from '../../utils/shared.utils';
 
 /**
@@ -69,7 +70,7 @@ export function Controller(): ClassDecorator;
  * It defines a class that provides a context for one or more message or event
  * handlers.
  *
- * @param {string|Array} prefix string that defines a `route path prefix`.  The prefix
+ * @param {string, Array} prefix string that defines a `route path prefix`.  The prefix
  * is pre-pended to the path specified in any request decorator in the class.
  *
  * @see [Routing](https://docs.nestjs.com/controllers#routing)
diff --git a/packages/common/decorators/core/dependencies.decorator.ts b/packages/common/decorators/core/dependencies.decorator.ts
index b9657efa0..984269524 100644
--- a/packages/common/decorators/core/dependencies.decorator.ts
+++ b/packages/common/decorators/core/dependencies.decorator.ts
@@ -9,8 +9,6 @@ export function flatten<T extends Array<unknown> = any>(
 
 /**
  * Decorator that sets required dependencies (required with a vanilla JavaScript objects)
- *
- * @publicApi
  */
 export const Dependencies = (
   ...dependencies: Array<unknown>
diff --git a/packages/common/decorators/core/inject.decorator.ts b/packages/common/decorators/core/inject.decorator.ts
index e8f559124..471c77c08 100644
--- a/packages/common/decorators/core/inject.decorator.ts
+++ b/packages/common/decorators/core/inject.decorator.ts
@@ -33,10 +33,8 @@ import { isUndefined } from '../../utils/shared.utils';
  *
  * @publicApi
  */
-export function Inject<T = any>(
-  token?: T,
-): PropertyDecorator & ParameterDecorator {
-  return (target: object, key: string | symbol | undefined, index?: number) => {
+export function Inject<T = any>(token?: T) {
+  return (target: object, key: string | symbol, index?: number) => {
     const type = token || Reflect.getMetadata('design:type', target, key);
 
     if (!isUndefined(index)) {
diff --git a/packages/common/decorators/core/injectable.decorator.ts b/packages/common/decorators/core/injectable.decorator.ts
index ff7ae143c..453e7666f 100644
--- a/packages/common/decorators/core/injectable.decorator.ts
+++ b/packages/common/decorators/core/injectable.decorator.ts
@@ -1,4 +1,4 @@
-import { uid } from 'uid';
+import { v4 as uuid } from 'uuid';
 import { INJECTABLE_WATERMARK, SCOPE_OPTIONS_METADATA } from '../../constants';
 import { ScopeOptions } from '../../interfaces/scope-options.interface';
 import { Type } from '../../interfaces/type.interface';
@@ -47,12 +47,9 @@ export function Injectable(options?: InjectableOptions): ClassDecorator {
   };
 }
 
-/**
- * @publicApi
- */
 export function mixin<T>(mixinClass: Type<T>) {
   Object.defineProperty(mixinClass, 'name', {
-    value: uid(21),
+    value: uuid(),
   });
   Injectable()(mixinClass);
   return mixinClass;
diff --git a/packages/common/decorators/core/optional.decorator.ts b/packages/common/decorators/core/optional.decorator.ts
index 0d94c20f0..49d80eec1 100644
--- a/packages/common/decorators/core/optional.decorator.ts
+++ b/packages/common/decorators/core/optional.decorator.ts
@@ -17,8 +17,8 @@ import { isUndefined } from '../../utils/shared.utils';
  *
  * @publicApi
  */
-export function Optional(): PropertyDecorator & ParameterDecorator {
-  return (target: object, key: string | symbol | undefined, index?: number) => {
+export function Optional() {
+  return (target: object, key: string | symbol, index?: number) => {
     if (!isUndefined(index)) {
       const args = Reflect.getMetadata(OPTIONAL_DEPS_METADATA, target) || [];
       Reflect.defineMetadata(OPTIONAL_DEPS_METADATA, [...args, index], target);
diff --git a/packages/common/decorators/http/create-route-param-metadata.decorator.ts b/packages/common/decorators/http/create-route-param-metadata.decorator.ts
index d070e47a7..f8582bf57 100644
--- a/packages/common/decorators/http/create-route-param-metadata.decorator.ts
+++ b/packages/common/decorators/http/create-route-param-metadata.decorator.ts
@@ -1,4 +1,4 @@
-import { uid } from 'uid';
+import { v4 as uuid } from 'uuid';
 import { ROUTE_ARGS_METADATA } from '../../constants';
 import { PipeTransform } from '../../index';
 import { Type } from '../../interfaces';
@@ -12,8 +12,6 @@ export type ParamDecoratorEnhancer = ParameterDecorator;
  * Defines HTTP route param decorator
  *
  * @param factory
- *
- * @publicApi
  */
 export function createParamDecorator<
   FactoryData = any,
@@ -25,7 +23,7 @@ export function createParamDecorator<
 ): (
   ...dataOrPipes: (Type<PipeTransform> | PipeTransform | FactoryData)[]
 ) => ParameterDecorator {
-  const paramtype = uid(21);
+  const paramtype = uuid();
   return (
       data?,
       ...pipes: (Type<PipeTransform> | PipeTransform | FactoryData)[]
diff --git a/packages/common/decorators/http/request-mapping.decorator.ts b/packages/common/decorators/http/request-mapping.decorator.ts
index 46ebc0d8f..62d61cde4 100644
--- a/packages/common/decorators/http/request-mapping.decorator.ts
+++ b/packages/common/decorators/http/request-mapping.decorator.ts
@@ -109,3 +109,12 @@ export const Head = createMappingDecorator(RequestMethod.HEAD);
  * @publicApi
  */
 export const All = createMappingDecorator(RequestMethod.ALL);
+
+/**
+ * Route handler (method) Decorator. Routes all HTTP requests to the specified path.
+ *
+ * @see [Routing](https://docs.nestjs.com/controllers#routing)
+ *
+ * @publicApi
+ */
+export const Search = createMappingDecorator(RequestMethod.SEARCH);
diff --git a/packages/common/enums/http-status.enum.ts b/packages/common/enums/http-status.enum.ts
index 326001344..875597540 100644
--- a/packages/common/enums/http-status.enum.ts
+++ b/packages/common/enums/http-status.enum.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export enum HttpStatus {
   CONTINUE = 100,
   SWITCHING_PROTOCOLS = 101,
diff --git a/packages/common/enums/request-method.enum.ts b/packages/common/enums/request-method.enum.ts
index d48f52b4d..e28455633 100644
--- a/packages/common/enums/request-method.enum.ts
+++ b/packages/common/enums/request-method.enum.ts
@@ -7,4 +7,5 @@ export enum RequestMethod {
   ALL,
   OPTIONS,
   HEAD,
+  SEARCH,
 }
diff --git a/packages/common/exceptions/bad-gateway.exception.ts b/packages/common/exceptions/bad-gateway.exception.ts
index 2623d8727..ba46421b5 100644
--- a/packages/common/exceptions/bad-gateway.exception.ts
+++ b/packages/common/exceptions/bad-gateway.exception.ts
@@ -1,4 +1,5 @@
 import { HttpStatus } from '../enums/http-status.enum';
+import { isString } from '../utils/shared.utils';
 import { HttpException, HttpExceptionOptions } from './http.exception';
 
 /**
diff --git a/packages/common/exceptions/bad-request.exception.ts b/packages/common/exceptions/bad-request.exception.ts
index bedb7d095..b9f04fe62 100644
--- a/packages/common/exceptions/bad-request.exception.ts
+++ b/packages/common/exceptions/bad-request.exception.ts
@@ -1,3 +1,4 @@
+import { isString } from 'class-validator';
 import { HttpStatus } from '../enums/http-status.enum';
 import { HttpException, HttpExceptionOptions } from './http.exception';
 
diff --git a/packages/common/exceptions/http.exception.ts b/packages/common/exceptions/http.exception.ts
index ca07c5d6e..bc166a8a1 100644
--- a/packages/common/exceptions/http.exception.ts
+++ b/packages/common/exceptions/http.exception.ts
@@ -1,3 +1,4 @@
+import { Logger } from '../services';
 import { isObject, isString } from '../utils/shared.utils';
 
 export interface HttpExceptionOptions {
@@ -25,6 +26,8 @@ export class HttpException extends Error {
    * @example
    * throw new HttpException()
    * throw new HttpException('message', HttpStatus.BAD_REQUEST)
+   * throw new HttpException({ reason: 'this can be a human readable reason' }, HttpStatus.BAD_REQUEST)
+   * throw new HttpException(new Error('Cause Error'), HttpStatus.BAD_REQUEST)
    * throw new HttpException('custom message', HttpStatus.BAD_REQUEST, {
    *  cause: new Error('Cause Error'),
    * })
@@ -78,6 +81,13 @@ export class HttpException extends Error {
       this.cause = this.options.cause;
       return;
     }
+
+    if (this.response instanceof Error) {
+      Logger.warn(
+        'DEPRECATED! Passing the error cause as the first argument to HttpException constructor is deprecated. You should use the "options" parameter instead: new HttpException("message", 400, { cause: new Error("Some Error") }) ',
+      );
+      this.cause = this.response;
+    }
   }
 
   public initMessage() {
@@ -89,9 +99,9 @@ export class HttpException extends Error {
     ) {
       this.message = (this.response as Record<string, any>).message;
     } else if (this.constructor) {
-      this.message =
-        this.constructor.name.match(/[A-Z][a-z]+|[0-9]+/g)?.join(' ') ??
-        'Error';
+      this.message = this.constructor.name
+        .match(/[A-Z][a-z]+|[0-9]+/g)
+        .join(' ');
     }
   }
 
diff --git a/packages/common/file-stream/interfaces/index.ts b/packages/common/file-stream/interfaces/index.ts
deleted file mode 100644
index 9be413e21..000000000
--- a/packages/common/file-stream/interfaces/index.ts
+++ /dev/null
@@ -1,2 +0,0 @@
-export * from './streamable-options.interface';
-export * from './streamable-handler-response.interface';
diff --git a/packages/common/file-stream/interfaces/streamable-handler-response.interface.ts b/packages/common/file-stream/interfaces/streamable-handler-response.interface.ts
deleted file mode 100644
index c1c77a922..000000000
--- a/packages/common/file-stream/interfaces/streamable-handler-response.interface.ts
+++ /dev/null
@@ -1,12 +0,0 @@
-export interface StreamableHandlerResponse {
-  /** `true` if the connection is destroyed, `false` otherwise. */
-  destroyed: boolean;
-  /** `true` if headers were sent, `false` otherwise. */
-  headersSent: boolean;
-  /** The status code that will be sent to the client when the headers get flushed. */
-  statusCode: number;
-  /** Sends the HTTP response. */
-  send: (body: string) => void;
-  /** Signals to the server that all of the response headers and body have been sent. */
-  end: () => void;
-}
diff --git a/packages/common/file-stream/streamable-file.ts b/packages/common/file-stream/streamable-file.ts
index 971741d5a..dae63beda 100644
--- a/packages/common/file-stream/streamable-file.ts
+++ b/packages/common/file-stream/streamable-file.ts
@@ -1,14 +1,14 @@
 import { Readable } from 'stream';
 import { types } from 'util';
-import { HttpStatus } from '../enums';
 import { isFunction } from '../utils/shared.utils';
-import { StreamableFileOptions, StreamableHandlerResponse } from './interfaces';
+import { StreamableFileOptions } from './streamable-options.interface';
+
+export interface StreamableHandlerResponse {
+  destroyed: boolean;
+  statusCode: number;
+  send: (msg: string) => void;
+}
 
-/**
- * @see [Streaming files](https://docs.nestjs.com/techniques/streaming-files)
- *
- * @publicApi
- */
 export class StreamableFile {
   private readonly stream: Readable;
 
@@ -16,16 +16,10 @@ export class StreamableFile {
     err: Error,
     response: StreamableHandlerResponse,
   ) => void = (err: Error, res) => {
-    if (res.destroyed) {
-      return;
+    if (!res.destroyed) {
+      res.statusCode = 400;
+      res.send(err.message);
     }
-    if (res.headersSent) {
-      res.end();
-      return;
-    }
-
-    res.statusCode = HttpStatus.BAD_REQUEST;
-    res.send(err.message);
   };
 
   constructor(buffer: Uint8Array, options?: StreamableFileOptions);
diff --git a/packages/common/file-stream/streamable-options.interface.ts b/packages/common/file-stream/streamable-options.interface.ts
new file mode 100644
index 000000000..5d167b6b0
--- /dev/null
+++ b/packages/common/file-stream/streamable-options.interface.ts
@@ -0,0 +1,5 @@
+export interface StreamableFileOptions {
+  type?: string;
+  disposition?: string;
+  length?: number;
+}
diff --git a/packages/common/index.ts b/packages/common/index.ts
index bfeb90f80..c8d815187 100644
--- a/packages/common/index.ts
+++ b/packages/common/index.ts
@@ -1,11 +1,12 @@
 /*
  * Nest @common
- * Copyright(c) 2017 - 2023 Kamil Mysliwiec
+ * Copyright(c) 2017 - 2022 Kamil Mysliwiec
  * https://nestjs.com
  * MIT Licensed
  */
 import 'reflect-metadata';
 
+export * from './cache';
 export * from './decorators';
 export * from './enums';
 export * from './exceptions';
diff --git a/packages/common/interfaces/features/custom-route-param-factory.interface.ts b/packages/common/interfaces/features/custom-route-param-factory.interface.ts
index e022b6669..3a6afd910 100644
--- a/packages/common/interfaces/features/custom-route-param-factory.interface.ts
+++ b/packages/common/interfaces/features/custom-route-param-factory.interface.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export type CustomParamFactory<TData = any, TInput = any, TOutput = any> = (
   data: TData,
   input: TInput,
diff --git a/packages/common/interfaces/features/paramtype.interface.ts b/packages/common/interfaces/features/paramtype.interface.ts
index a63184f8c..d2c299dbc 100644
--- a/packages/common/interfaces/features/paramtype.interface.ts
+++ b/packages/common/interfaces/features/paramtype.interface.ts
@@ -1,4 +1 @@
-/**
- * @publicApi
- */
 export type Paramtype = 'body' | 'query' | 'param' | 'custom';
diff --git a/packages/common/interfaces/http/http-exception-body.interface.ts b/packages/common/interfaces/http/http-exception-body.interface.ts
deleted file mode 100644
index e0b923e5e..000000000
--- a/packages/common/interfaces/http/http-exception-body.interface.ts
+++ /dev/null
@@ -1,7 +0,0 @@
-export type HttpExceptionBodyMessage = string | string[];
-
-export interface HttpExceptionBody {
-  message: HttpExceptionBodyMessage;
-  error?: string;
-  statusCode: number;
-}
diff --git a/packages/common/interfaces/http/http-server.interface.ts b/packages/common/interfaces/http/http-server.interface.ts
index 8bf7e49a9..99b7e55eb 100644
--- a/packages/common/interfaces/http/http-server.interface.ts
+++ b/packages/common/interfaces/http/http-server.interface.ts
@@ -18,11 +18,7 @@ export type RequestHandler<TRequest = any, TResponse = any> = (
   next?: Function,
 ) => any;
 
-export interface HttpServer<
-  TRequest = any,
-  TResponse = any,
-  ServerInstance = any,
-> {
+export interface HttpServer<TRequest = any, TResponse = any> {
   use(
     handler:
       | RequestHandler<TRequest, TResponse>
@@ -34,7 +30,6 @@ export interface HttpServer<
       | RequestHandler<TRequest, TResponse>
       | ErrorHandler<TRequest, TResponse>,
   ): any;
-  useBodyParser?(...args: any[]): any;
   get(handler: RequestHandler<TRequest, TResponse>): any;
   get(path: string, handler: RequestHandler<TRequest, TResponse>): any;
   post(handler: RequestHandler<TRequest, TResponse>): any;
@@ -73,7 +68,7 @@ export interface HttpServer<
   getRequestHostname?(request: TRequest): string;
   getRequestMethod?(request: TRequest): string;
   getRequestUrl?(request: TRequest): string;
-  getInstance(): ServerInstance;
+  getInstance(): any;
   registerParserMiddleware(...args: any[]): any;
   enableCors(options: CorsOptions | CorsOptionsDelegate<TRequest>): any;
   getHttpServer(): any;
diff --git a/packages/common/interfaces/http/raw-body-request.interface.ts b/packages/common/interfaces/http/raw-body-request.interface.ts
index b87229083..77b6248f9 100644
--- a/packages/common/interfaces/http/raw-body-request.interface.ts
+++ b/packages/common/interfaces/http/raw-body-request.interface.ts
@@ -1,4 +1 @@
-/**
- * @publicApi
- */
 export type RawBodyRequest<T> = T & { rawBody?: Buffer };
diff --git a/packages/common/interfaces/microservices/nest-hybrid-application-options.interface.ts b/packages/common/interfaces/microservices/nest-hybrid-application-options.interface.ts
index 5389cf5d1..bc27552c5 100644
--- a/packages/common/interfaces/microservices/nest-hybrid-application-options.interface.ts
+++ b/packages/common/interfaces/microservices/nest-hybrid-application-options.interface.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export interface NestHybridApplicationOptions {
   inheritAppConfig?: boolean;
 }
diff --git a/packages/common/interfaces/microservices/nest-microservice-options.interface.ts b/packages/common/interfaces/microservices/nest-microservice-options.interface.ts
index 34f32c9f5..04057a09d 100644
--- a/packages/common/interfaces/microservices/nest-microservice-options.interface.ts
+++ b/packages/common/interfaces/microservices/nest-microservice-options.interface.ts
@@ -1,6 +1,3 @@
 import { NestApplicationContextOptions } from '../nest-application-context-options.interface';
 
-/**
- * @publicApi
- */
 export type NestMicroserviceOptions = NestApplicationContextOptions;
diff --git a/packages/common/interfaces/middleware/middleware-config-proxy.interface.ts b/packages/common/interfaces/middleware/middleware-config-proxy.interface.ts
index b0d194b86..e23c3cf8a 100644
--- a/packages/common/interfaces/middleware/middleware-config-proxy.interface.ts
+++ b/packages/common/interfaces/middleware/middleware-config-proxy.interface.ts
@@ -2,9 +2,6 @@ import { Type } from '../type.interface';
 import { RouteInfo } from './middleware-configuration.interface';
 import { MiddlewareConsumer } from './middleware-consumer.interface';
 
-/**
- * @publicApi
- */
 export interface MiddlewareConfigProxy {
   /**
    * Excludes routes from the currently processed middleware.
diff --git a/packages/common/interfaces/middleware/nest-middleware.interface.ts b/packages/common/interfaces/middleware/nest-middleware.interface.ts
index 88c27bc5c..bf3106995 100644
--- a/packages/common/interfaces/middleware/nest-middleware.interface.ts
+++ b/packages/common/interfaces/middleware/nest-middleware.interface.ts
@@ -1,8 +1,3 @@
-/**
- * @see [Middleware](https://docs.nestjs.com/middleware)
- *
- * @publicApi
- */
 export interface NestMiddleware<TRequest = any, TResponse = any> {
   use(req: TRequest, res: TResponse, next: (error?: Error | any) => void): any;
 }
diff --git a/packages/common/interfaces/modules/injection-token.interface.ts b/packages/common/interfaces/modules/injection-token.interface.ts
index 8a4d8d97f..01aa7b1a9 100644
--- a/packages/common/interfaces/modules/injection-token.interface.ts
+++ b/packages/common/interfaces/modules/injection-token.interface.ts
@@ -1,9 +1,6 @@
 import { Abstract } from '../abstract.interface';
 import { Type } from '../type.interface';
 
-/**
- * @publicApi
- */
 export type InjectionToken =
   | string
   | symbol
diff --git a/packages/common/interfaces/modules/nest-module.interface.ts b/packages/common/interfaces/modules/nest-module.interface.ts
index 236658017..bef5810c2 100644
--- a/packages/common/interfaces/modules/nest-module.interface.ts
+++ b/packages/common/interfaces/modules/nest-module.interface.ts
@@ -1,8 +1,5 @@
 import { MiddlewareConsumer } from '../middleware/middleware-consumer.interface';
 
-/**
- * @publicApi
- */
 export interface NestModule {
   configure(consumer: MiddlewareConsumer);
 }
diff --git a/packages/common/interfaces/modules/optional-factory-dependency.interface.ts b/packages/common/interfaces/modules/optional-factory-dependency.interface.ts
index 6c8db900e..be2ebb298 100644
--- a/packages/common/interfaces/modules/optional-factory-dependency.interface.ts
+++ b/packages/common/interfaces/modules/optional-factory-dependency.interface.ts
@@ -1,8 +1,5 @@
 import { InjectionToken } from './injection-token.interface';
 
-/**
- * @publicApi
- */
 export type OptionalFactoryDependency = {
   token: InjectionToken;
   optional: boolean;
diff --git a/packages/common/interfaces/nest-application-context-options.interface.ts b/packages/common/interfaces/nest-application-context-options.interface.ts
index d5204b55d..2a04d09e4 100644
--- a/packages/common/interfaces/nest-application-context-options.interface.ts
+++ b/packages/common/interfaces/nest-application-context-options.interface.ts
@@ -29,19 +29,4 @@ export class NestApplicationContextOptions {
    * @default true
    */
   autoFlushLogs?: boolean;
-
-  /**
-   * Whether to run application in the preview mode.
-   * In the preview mode, providers/controllers are not instantiated & resolved.
-   *
-   * @default false
-   */
-  preview?: boolean;
-
-  /**
-   * Whether to generate a serialized graph snapshot.
-   *
-   * @default false
-   */
-  snapshot?: boolean;
 }
diff --git a/packages/common/interfaces/nest-application.interface.ts b/packages/common/interfaces/nest-application.interface.ts
index eb2167e64..82e302dc8 100644
--- a/packages/common/interfaces/nest-application.interface.ts
+++ b/packages/common/interfaces/nest-application.interface.ts
@@ -21,8 +21,7 @@ import { WebSocketAdapter } from './websockets/web-socket-adapter.interface';
  *
  * @publicApi
  */
-export interface INestApplication<TServer = any>
-  extends INestApplicationContext {
+export interface INestApplication extends INestApplicationContext {
   /**
    * A wrapper function around HTTP adapter method: `adapter.use()`.
    * Example `app.use(cors())`
@@ -111,9 +110,9 @@ export interface INestApplication<TServer = any>
   /**
    * Returns the underlying native HTTP server.
    *
-   * @returns {TServer}
+   * @returns {*}
    */
-  getHttpServer(): TServer;
+  getHttpServer(): any;
 
   /**
    * Returns the underlying HTTP adapter.
diff --git a/packages/common/interfaces/version-options.interface.ts b/packages/common/interfaces/version-options.interface.ts
index fc5a53b6e..c6626436f 100644
--- a/packages/common/interfaces/version-options.interface.ts
+++ b/packages/common/interfaces/version-options.interface.ts
@@ -7,9 +7,6 @@ import { VersioningType } from '../enums/version-type.enum';
  */
 export const VERSION_NEUTRAL = Symbol('VERSION_NEUTRAL');
 
-/**
- * @publicApi
- */
 export type VersionValue =
   | string
   | typeof VERSION_NEUTRAL
@@ -31,9 +28,6 @@ export interface VersionOptions {
   version?: VersionValue;
 }
 
-/**
- * @publicApi
- */
 export interface HeaderVersioningOptions {
   type: VersioningType.HEADER;
   /**
@@ -42,9 +36,6 @@ export interface HeaderVersioningOptions {
   header: string;
 }
 
-/**
- * @publicApi
- */
 export interface UriVersioningOptions {
   type: VersioningType.URI;
   /**
@@ -57,9 +48,6 @@ export interface UriVersioningOptions {
   prefix?: string | false;
 }
 
-/**
- * @publicApi
- */
 export interface MediaTypeVersioningOptions {
   type: VersioningType.MEDIA_TYPE;
   /**
@@ -70,9 +58,6 @@ export interface MediaTypeVersioningOptions {
   key: string;
 }
 
-/**
- * @publicApi
- */
 export interface CustomVersioningOptions {
   type: VersioningType.CUSTOM;
 
@@ -87,9 +72,6 @@ export interface CustomVersioningOptions {
   extractor: (request: unknown) => string | string[];
 }
 
-/**
- * @publicApi
- */
 interface VersioningCommonOptions {
   /**
    * The default version to be used as a fallback when you did not provide some
diff --git a/packages/common/interfaces/websockets/web-socket-adapter.interface.ts b/packages/common/interfaces/websockets/web-socket-adapter.interface.ts
index e3baa1272..4b1585672 100644
--- a/packages/common/interfaces/websockets/web-socket-adapter.interface.ts
+++ b/packages/common/interfaces/websockets/web-socket-adapter.interface.ts
@@ -1,16 +1,10 @@
 import { Observable } from 'rxjs';
 
-/**
- * @publicApi
- */
 export interface WsMessageHandler<T = string> {
   message: T;
   callback: (...args: any[]) => Observable<any> | Promise<any>;
 }
 
-/**
- * @publicApi
- */
 export interface WebSocketAdapter<
   TServer = any,
   TClient = any,
diff --git a/packages/common/module-utils/configurable-module.builder.ts b/packages/common/module-utils/configurable-module.builder.ts
index 17735f4ad..c242267e6 100644
--- a/packages/common/module-utils/configurable-module.builder.ts
+++ b/packages/common/module-utils/configurable-module.builder.ts
@@ -79,7 +79,7 @@ export class ConfigurableModuleBuilder<
 
   /**
    * Registers the "extras" object (a set of extra options that can be used to modify the dynamic module definition).
-   * Values you specify within the "extras" object will be used as default values (that can be overridden by module consumers).
+   * Values you specify within the "extras" object will be used as default values (that can be overriden by module consumers).
    *
    * This method also applies the so-called "module definition transform function" that takes the auto-generated
    * dynamic module object ("DynamicModule") and the actual consumer "extras" object as input parameters.
@@ -205,7 +205,7 @@ export class ConfigurableModuleBuilder<
       static [self.staticMethodKey](
         options: ModuleOptions & ExtraModuleDefinitionOptions,
       ): DynamicModule {
-        const providers: Array<Provider> = [
+        const providers = [
           {
             provide: self.options.optionsInjectionToken,
             useValue: this.omitExtras(options, self.extras),
diff --git a/packages/common/package.json b/packages/common/package.json
index 697002f7a..c114967ef 100644
--- a/packages/common/package.json
+++ b/packages/common/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/common",
-  "version": "9.4.0",
+  "version": "9.2.0",
   "description": "Nest - modern, fast, powerful node.js web framework (@common)",
   "author": "Kamil Mysliwiec",
   "homepage": "https://nestjs.com",
@@ -18,16 +18,20 @@
   "license": "MIT",
   "dependencies": {
     "iterare": "1.2.1",
-    "tslib": "2.5.0",
-    "uid": "2.0.2"
+    "tslib": "2.4.1",
+    "uuid": "9.0.0"
   },
   "peerDependencies": {
+    "cache-manager": "<=5",
     "class-transformer": "*",
     "class-validator": "*",
     "reflect-metadata": "^0.1.12",
     "rxjs": "^7.1.0"
   },
   "peerDependenciesMeta": {
+    "cache-manager": {
+      "optional": true
+    },
     "class-validator": {
       "optional": true
     },
diff --git a/packages/common/pipes/file/file-type.validator.ts b/packages/common/pipes/file/file-type.validator.ts
index ffc3e54c5..240d3efe8 100644
--- a/packages/common/pipes/file/file-type.validator.ts
+++ b/packages/common/pipes/file/file-type.validator.ts
@@ -1,5 +1,4 @@
 import { FileValidator } from './file-validator.interface';
-import { IFile } from './interfaces';
 
 export type FileTypeValidatorOptions = {
   fileType: string | RegExp;
@@ -21,14 +20,17 @@ export class FileTypeValidator extends FileValidator<FileTypeValidatorOptions> {
     return `Validation failed (expected type is ${this.validationOptions.fileType})`;
   }
 
-  isValid<TFile extends IFile = any>(file: TFile): boolean {
+  isValid(file: any): boolean {
     if (!this.validationOptions) {
       return true;
     }
 
-    return (
-      'mimetype' in file &&
-      !!file.mimetype.match(this.validationOptions.fileType)
+    if (!file.mimetype) {
+      return false;
+    }
+
+    return Boolean(
+      (file.mimetype as string).match(this.validationOptions.fileType),
     );
   }
 }
diff --git a/packages/common/pipes/file/file-validator.interface.ts b/packages/common/pipes/file/file-validator.interface.ts
index bf43c0b6a..ad453cdae 100644
--- a/packages/common/pipes/file/file-validator.interface.ts
+++ b/packages/common/pipes/file/file-validator.interface.ts
@@ -1,10 +1,5 @@
-import { IFile } from './interfaces';
-
 /**
- * Interface describing FileValidators, which can be added to a ParseFilePipe
- *
- * @see {ParseFilePipe}
- * @publicApi
+ * Interface describing FileValidators, which can be added to a {@link ParseFilePipe}.
  */
 export abstract class FileValidator<TValidationOptions = Record<string, any>> {
   constructor(protected readonly validationOptions: TValidationOptions) {}
@@ -13,9 +8,7 @@ export abstract class FileValidator<TValidationOptions = Record<string, any>> {
    * Indicates if this file should be considered valid, according to the options passed in the constructor.
    * @param file the file from the request object
    */
-  abstract isValid<TFile extends IFile = any>(
-    file?: TFile,
-  ): boolean | Promise<boolean>;
+  abstract isValid(file?: any): boolean | Promise<boolean>;
 
   /**
    * Builds an error message in case the validation fails.
diff --git a/packages/common/pipes/file/interfaces/file.interface.ts b/packages/common/pipes/file/interfaces/file.interface.ts
deleted file mode 100644
index 37218734f..000000000
--- a/packages/common/pipes/file/interfaces/file.interface.ts
+++ /dev/null
@@ -1,4 +0,0 @@
-export interface IFile {
-  mimetype: string;
-  size: number;
-}
diff --git a/packages/common/pipes/file/interfaces/index.ts b/packages/common/pipes/file/interfaces/index.ts
deleted file mode 100644
index 09d8f3ca8..000000000
--- a/packages/common/pipes/file/interfaces/index.ts
+++ /dev/null
@@ -1 +0,0 @@
-export * from './file.interface';
diff --git a/packages/common/pipes/file/max-file-size.validator.ts b/packages/common/pipes/file/max-file-size.validator.ts
index c6274de91..847ee19f0 100644
--- a/packages/common/pipes/file/max-file-size.validator.ts
+++ b/packages/common/pipes/file/max-file-size.validator.ts
@@ -1,5 +1,4 @@
 import { FileValidator } from './file-validator.interface';
-import { IFile } from './interfaces';
 
 export type MaxFileSizeValidatorOptions = {
   maxSize: number;
@@ -8,7 +7,7 @@ export type MaxFileSizeValidatorOptions = {
 /**
  * Defines the built-in MaxSize File Validator
  *
- * @see [File Validators](https://docs.nestjs.com/techniques/file-upload#file-validation)
+ * @see [File Validators](https://docs.nestjs.com/techniques/file-upload#validators)
  *
  * @publicApi
  */
@@ -17,11 +16,11 @@ export class MaxFileSizeValidator extends FileValidator<MaxFileSizeValidatorOpti
     return `Validation failed (expected size is less than ${this.validationOptions.maxSize})`;
   }
 
-  public isValid<TFile extends IFile = any>(file: TFile): boolean {
+  public isValid(file: any): boolean {
     if (!this.validationOptions) {
       return true;
     }
 
-    return 'size' in file && file.size < this.validationOptions.maxSize;
+    return file.size < this.validationOptions.maxSize;
   }
 }
diff --git a/packages/common/pipes/file/parse-file-options.interface.ts b/packages/common/pipes/file/parse-file-options.interface.ts
index f9c67daa8..7602f6997 100644
--- a/packages/common/pipes/file/parse-file-options.interface.ts
+++ b/packages/common/pipes/file/parse-file-options.interface.ts
@@ -1,9 +1,6 @@
 import { ErrorHttpStatusCode } from '../../utils/http-error-by-code.util';
 import { FileValidator } from './file-validator.interface';
 
-/**
- * @publicApi
- */
 export interface ParseFileOptions {
   validators?: FileValidator[];
   errorHttpStatusCode?: ErrorHttpStatusCode;
diff --git a/packages/common/pipes/file/parse-file-pipe.builder.ts b/packages/common/pipes/file/parse-file-pipe.builder.ts
index 9199fec3d..fafbe78fe 100644
--- a/packages/common/pipes/file/parse-file-pipe.builder.ts
+++ b/packages/common/pipes/file/parse-file-pipe.builder.ts
@@ -10,9 +10,6 @@ import {
 import { ParseFileOptions } from './parse-file-options.interface';
 import { ParseFilePipe } from './parse-file.pipe';
 
-/**
- * @publicApi
- */
 export class ParseFilePipeBuilder {
   private validators: FileValidator[] = [];
 
diff --git a/packages/common/pipes/file/parse-file.pipe.ts b/packages/common/pipes/file/parse-file.pipe.ts
index d2ea60e50..3cda9a5fc 100644
--- a/packages/common/pipes/file/parse-file.pipe.ts
+++ b/packages/common/pipes/file/parse-file.pipe.ts
@@ -1,16 +1,16 @@
+import { isUndefined } from '../../utils/shared.utils';
 import { Injectable, Optional } from '../../decorators/core';
 import { HttpStatus } from '../../enums';
 import { PipeTransform } from '../../interfaces/features/pipe-transform.interface';
 import { HttpErrorByCode } from '../../utils/http-error-by-code.util';
-import { isEmpty, isObject, isUndefined } from '../../utils/shared.utils';
 import { FileValidator } from './file-validator.interface';
 import { ParseFileOptions } from './parse-file-options.interface';
 
 /**
  * Defines the built-in ParseFile Pipe. This pipe can be used to validate incoming files
  * with `@UploadedFile()` decorator. You can use either other specific built-in validators
- * or provide one of your own, simply implementing it through FileValidator interface
- * and adding it to ParseFilePipe's constructor.
+ * or provide one of your own, simply implementing it through {@link FileValidator}
+ * interface and adding it to ParseFilePipe's constructor.
  *
  * @see [Built-in Pipes](https://docs.nestjs.com/pipes#built-in-pipes)
  *
@@ -39,36 +39,25 @@ export class ParseFilePipe implements PipeTransform<any> {
   }
 
   async transform(value: any): Promise<any> {
-    const areThereAnyFilesIn = this.thereAreNoFilesIn(value);
+    if (isUndefined(value)) {
+      if (this.fileIsRequired) {
+        throw this.exceptionFactory('File is required');
+      }
 
-    if (areThereAnyFilesIn && this.fileIsRequired) {
-      throw this.exceptionFactory('File is required');
+      return value;
     }
-    if (!areThereAnyFilesIn && this.validators.length) {
-      await this.validateFilesOrFile(value);
-    }
-
-    return value;
-  }
 
-  private async validateFilesOrFile(value: any): Promise<void> {
-    if (Array.isArray(value)) {
-      await Promise.all(value.map(f => this.validate(f)));
-    } else {
+    if (this.validators.length) {
       await this.validate(value);
     }
-  }
-
-  private thereAreNoFilesIn(value: any): boolean {
-    const isEmptyArray = Array.isArray(value) && isEmpty(value);
-    const isEmptyObject = isObject(value) && isEmpty(Object.keys(value));
-    return isUndefined(value) || isEmptyArray || isEmptyObject;
+    return value;
   }
 
   protected async validate(file: any): Promise<any> {
     for (const validator of this.validators) {
       await this.validateOrThrow(file, validator);
     }
+
     return file;
   }
 
diff --git a/packages/common/pipes/parse-array.pipe.ts b/packages/common/pipes/parse-array.pipe.ts
index a46acc8fd..c9ed1c67d 100644
--- a/packages/common/pipes/parse-array.pipe.ts
+++ b/packages/common/pipes/parse-array.pipe.ts
@@ -13,9 +13,6 @@ import { ValidationPipe, ValidationPipeOptions } from './validation.pipe';
 const VALIDATION_ERROR_MESSAGE = 'Validation failed (parsable array expected)';
 const DEFAULT_ARRAY_SEPARATOR = ',';
 
-/**
- * @publicApi
- */
 export interface ParseArrayOptions
   extends Omit<
     ValidationPipeOptions,
@@ -88,11 +85,10 @@ export class ParseArrayPipe implements PipeTransform {
 
       const isExpectedTypePrimitive = this.isExpectedTypePrimitive();
       const toClassInstance = (item: any, index?: number) => {
-        if (this.options.items !== String) {
-          try {
-            item = JSON.parse(item);
-          } catch {}
-        }
+        try {
+          item = JSON.parse(item);
+        } catch {}
+
         if (isExpectedTypePrimitive) {
           return this.validatePrimitive(item, index);
         }
diff --git a/packages/common/pipes/parse-bool.pipe.ts b/packages/common/pipes/parse-bool.pipe.ts
index 7f6bdffef..a5b6bcb6d 100644
--- a/packages/common/pipes/parse-bool.pipe.ts
+++ b/packages/common/pipes/parse-bool.pipe.ts
@@ -10,9 +10,6 @@ import {
   HttpErrorByCode,
 } from '../utils/http-error-by-code.util';
 
-/**
- * @publicApi
- */
 export interface ParseBoolPipeOptions {
   errorHttpStatusCode?: ErrorHttpStatusCode;
   exceptionFactory?: (error: string) => any;
diff --git a/packages/common/pipes/parse-enum.pipe.ts b/packages/common/pipes/parse-enum.pipe.ts
index 11b4a6ca7..406f61727 100644
--- a/packages/common/pipes/parse-enum.pipe.ts
+++ b/packages/common/pipes/parse-enum.pipe.ts
@@ -5,9 +5,6 @@ import {
   HttpErrorByCode,
 } from '../utils/http-error-by-code.util';
 
-/**
- * @publicApi
- */
 export interface ParseEnumPipeOptions {
   errorHttpStatusCode?: ErrorHttpStatusCode;
   exceptionFactory?: (error: string) => any;
diff --git a/packages/common/pipes/parse-float.pipe.ts b/packages/common/pipes/parse-float.pipe.ts
index 462077efd..1f0fdb021 100644
--- a/packages/common/pipes/parse-float.pipe.ts
+++ b/packages/common/pipes/parse-float.pipe.ts
@@ -5,9 +5,6 @@ import {
   HttpErrorByCode,
 } from '../utils/http-error-by-code.util';
 
-/**
- * @publicApi
- */
 export interface ParseFloatPipeOptions {
   errorHttpStatusCode?: ErrorHttpStatusCode;
   exceptionFactory?: (error: string) => any;
diff --git a/packages/common/pipes/parse-int.pipe.ts b/packages/common/pipes/parse-int.pipe.ts
index 11303c7e4..9d79a2b4c 100644
--- a/packages/common/pipes/parse-int.pipe.ts
+++ b/packages/common/pipes/parse-int.pipe.ts
@@ -10,9 +10,6 @@ import {
   HttpErrorByCode,
 } from '../utils/http-error-by-code.util';
 
-/**
- * @publicApi
- */
 export interface ParseIntPipeOptions {
   errorHttpStatusCode?: ErrorHttpStatusCode;
   exceptionFactory?: (error: string) => any;
diff --git a/packages/common/pipes/parse-uuid.pipe.ts b/packages/common/pipes/parse-uuid.pipe.ts
index 2379e36b6..81fe2b4c1 100644
--- a/packages/common/pipes/parse-uuid.pipe.ts
+++ b/packages/common/pipes/parse-uuid.pipe.ts
@@ -11,22 +11,12 @@ import {
 } from '../utils/http-error-by-code.util';
 import { isString } from '../utils/shared.utils';
 
-/**
- * @publicApi
- */
 export interface ParseUUIDPipeOptions {
   version?: '3' | '4' | '5';
   errorHttpStatusCode?: ErrorHttpStatusCode;
   exceptionFactory?: (errors: string) => any;
 }
 
-/**
- * Defines the built-in ParseUUID Pipe
- *
- * @see [Built-in Pipes](https://docs.nestjs.com/pipes#built-in-pipes)
- *
- * @publicApi
- */
 @Injectable()
 export class ParseUUIDPipe implements PipeTransform<string> {
   protected static uuidRegExps = {
diff --git a/packages/common/pipes/validation.pipe.ts b/packages/common/pipes/validation.pipe.ts
index d86326181..fd37802b5 100644
--- a/packages/common/pipes/validation.pipe.ts
+++ b/packages/common/pipes/validation.pipe.ts
@@ -18,11 +18,8 @@ import {
   HttpErrorByCode,
 } from '../utils/http-error-by-code.util';
 import { loadPackage } from '../utils/load-package.util';
-import { isNil, isUndefined } from '../utils/shared.utils';
+import { isNil } from '../utils/shared.utils';
 
-/**
- * @publicApi
- */
 export interface ValidationPipeOptions extends ValidatorOptions {
   transform?: boolean;
   disableErrorMessages?: boolean;
@@ -38,11 +35,6 @@ export interface ValidationPipeOptions extends ValidatorOptions {
 let classValidator: ValidatorPackage = {} as any;
 let classTransformer: TransformerPackage = {} as any;
 
-/**
- * @see [Validation](https://docs.nestjs.com/techniques/validation)
- *
- * @publicApi
- */
 @Injectable()
 export class ValidationPipe implements PipeTransform<any> {
   protected isTransformEnabled: boolean;
@@ -66,10 +58,8 @@ export class ValidationPipe implements PipeTransform<any> {
       ...validatorOptions
     } = options;
 
-    // @see https://github.com/nestjs/nest/issues/10683#issuecomment-1413690508
-    this.validatorOptions = { forbidUnknownValues: false, ...validatorOptions };
-
     this.isTransformEnabled = !!transform;
+    this.validatorOptions = validatorOptions;
     this.transformOptions = transformOptions;
     this.isDetailedOutputDisabled = disableErrorMessages;
     this.validateCustomDecorators = validateCustomDecorators || false;
@@ -155,11 +145,7 @@ export class ValidationPipe implements PipeTransform<any> {
       // if the value was originally undefined or null, revert it back
       return originalValue;
     }
-    // we check if the number of keys of the "validatorOptions" is higher than 1 (instead of 0)
-    // because the "forbidUnknownValues" now fallbacks to "false" (in case it wasn't explicitly specified)
-    const shouldTransformToPlain =
-      Object.keys(this.validatorOptions).length > 1;
-    return shouldTransformToPlain
+    return Object.keys(this.validatorOptions).length > 0
       ? classTransformer.classToPlain(entity, this.transformOptions)
       : value;
   }
@@ -193,13 +179,6 @@ export class ValidationPipe implements PipeTransform<any> {
       return value;
     }
     if (metatype === Boolean) {
-      if (isUndefined(value)) {
-        // This is an workaround to deal with optional boolean values since
-        // optional booleans shouldn't be parsed to a valid boolean when
-        // they were not defined
-        return undefined;
-      }
-      // Any fasly value but `undefined` will be parsed to `false`
       return value === true || value === 'true';
     }
     if (metatype === Number) {
diff --git a/packages/common/serializer/class-serializer.interceptor.ts b/packages/common/serializer/class-serializer.interceptor.ts
index 3773fddc0..c791b1e47 100644
--- a/packages/common/serializer/class-serializer.interceptor.ts
+++ b/packages/common/serializer/class-serializer.interceptor.ts
@@ -21,17 +21,11 @@ export interface PlainLiteralObject {
 // between core and common packages
 const REFLECTOR = 'Reflector';
 
-/**
- * @publicApi
- */
 export interface ClassSerializerInterceptorOptions
   extends ClassTransformOptions {
   transformerPackage?: TransformerPackage;
 }
 
-/**
- * @publicApi
- */
 @Injectable()
 export class ClassSerializerInterceptor implements NestInterceptor {
   constructor(
diff --git a/packages/common/serializer/class-serializer.interfaces.ts b/packages/common/serializer/class-serializer.interfaces.ts
index c5404177c..3b629605e 100644
--- a/packages/common/serializer/class-serializer.interfaces.ts
+++ b/packages/common/serializer/class-serializer.interfaces.ts
@@ -1,9 +1,6 @@
 import { ClassTransformOptions } from '../interfaces/external/class-transform-options.interface';
 import { Type } from '../interfaces';
 
-/**
- * @publicApi
- */
 export interface ClassSerializerContextOptions extends ClassTransformOptions {
   type?: Type<any>;
 }
diff --git a/packages/common/serializer/decorators/serialize-options.decorator.ts b/packages/common/serializer/decorators/serialize-options.decorator.ts
index bd92695fd..bafdbae7a 100644
--- a/packages/common/serializer/decorators/serialize-options.decorator.ts
+++ b/packages/common/serializer/decorators/serialize-options.decorator.ts
@@ -2,8 +2,5 @@ import { SetMetadata } from '../../decorators';
 import { ClassSerializerContextOptions } from '../class-serializer.interfaces';
 import { CLASS_SERIALIZER_OPTIONS } from '../class-serializer.constants';
 
-/**
- * @publicApi
- */
 export const SerializeOptions = (options: ClassSerializerContextOptions) =>
   SetMetadata(CLASS_SERIALIZER_OPTIONS, options);
diff --git a/packages/common/services/console-logger.service.ts b/packages/common/services/console-logger.service.ts
index 5b2f4c408..addc31673 100644
--- a/packages/common/services/console-logger.service.ts
+++ b/packages/common/services/console-logger.service.ts
@@ -1,11 +1,6 @@
 import { Injectable, Optional } from '../decorators/core';
 import { clc, yellow } from '../utils/cli-colors.util';
-import {
-  isFunction,
-  isPlainObject,
-  isString,
-  isUndefined,
-} from '../utils/shared.utils';
+import { isPlainObject, isString } from '../utils/shared.utils';
 import { LoggerService, LogLevel } from './logger.service';
 import { isLogLevelEnabled } from './utils';
 
@@ -28,15 +23,6 @@ const DEFAULT_LOG_LEVELS: LogLevel[] = [
   'verbose',
 ];
 
-const dateTimeFormatter = new Intl.DateTimeFormat(undefined, {
-  year: 'numeric',
-  hour: 'numeric',
-  minute: 'numeric',
-  second: 'numeric',
-  day: '2-digit',
-  month: '2-digit',
-});
-
 @Injectable()
 export class ConsoleLogger implements LoggerService {
   private static lastTimestampAt?: number;
@@ -176,7 +162,18 @@ export class ConsoleLogger implements LoggerService {
   }
 
   protected getTimestamp(): string {
-    return dateTimeFormatter.format(Date.now());
+    const localeStringOptions = {
+      year: 'numeric',
+      hour: 'numeric',
+      minute: 'numeric',
+      second: 'numeric',
+      day: '2-digit',
+      month: '2-digit',
+    };
+    return new Date(Date.now()).toLocaleString(
+      undefined,
+      localeStringOptions as Intl.DateTimeFormatOptions,
+    );
   }
 
   protected printMessages(
@@ -226,10 +223,7 @@ export class ConsoleLogger implements LoggerService {
   }
 
   protected stringifyMessage(message: unknown, logLevel: LogLevel) {
-    // If the message is a function, call it and re-resolve its value.
-    return isFunction(message)
-      ? this.stringifyMessage(message(), logLevel)
-      : isPlainObject(message) || Array.isArray(message)
+    return isPlainObject(message) || Array.isArray(message)
       ? `${this.colorize('Object:', logLevel)}\n${JSON.stringify(
           message,
           (key, value) =>
@@ -251,7 +245,7 @@ export class ConsoleLogger implements LoggerService {
     process.stderr.write(`${stack}\n`);
   }
 
-  protected updateAndGetTimestampDiff(): string {
+  private updateAndGetTimestampDiff(): string {
     const includeTimestamp =
       ConsoleLogger.lastTimestampAt && this.options?.timestamp;
     const result = includeTimestamp
@@ -287,8 +281,7 @@ export class ConsoleLogger implements LoggerService {
     }
     const lastElement = messages[messages.length - 1];
     const isStack = isString(lastElement);
-    // https://github.com/nestjs/nest/issues/11074#issuecomment-1421680060
-    if (!isStack && !isUndefined(lastElement)) {
+    if (!isStack) {
       return { messages, context };
     }
     return {
diff --git a/packages/common/services/logger.service.ts b/packages/common/services/logger.service.ts
index 0ac2c8378..6f7f38712 100644
--- a/packages/common/services/logger.service.ts
+++ b/packages/common/services/logger.service.ts
@@ -1,16 +1,11 @@
-import { Injectable, Optional } from '../decorators/core';
+import { Injectable } from '../decorators/core/injectable.decorator';
+import { Optional } from '../decorators/core/optional.decorator';
 import { isObject } from '../utils/shared.utils';
 import { ConsoleLogger } from './console-logger.service';
 import { isLogLevelEnabled } from './utils';
 
-/**
- * @publicApi
- */
 export type LogLevel = 'log' | 'error' | 'warn' | 'debug' | 'verbose';
 
-/**
- * @publicApi
- */
 export interface LoggerService {
   /**
    * Write a 'log' level log.
@@ -58,18 +53,6 @@ interface LogBufferRecord {
 
 const DEFAULT_LOGGER = new ConsoleLogger();
 
-const dateTimeFormatter = new Intl.DateTimeFormat(undefined, {
-  year: 'numeric',
-  hour: 'numeric',
-  minute: 'numeric',
-  second: 'numeric',
-  day: '2-digit',
-  month: '2-digit',
-});
-
-/**
- * @publicApi
- */
 @Injectable()
 export class Logger implements LoggerService {
   protected static logBuffer = new Array<LogBufferRecord>();
@@ -125,9 +108,7 @@ export class Logger implements LoggerService {
   @Logger.WrapBuffer
   error(message: any, ...optionalParams: any[]) {
     optionalParams = this.context
-      ? (optionalParams.length ? optionalParams : [undefined]).concat(
-          this.context,
-        )
+      ? optionalParams.concat(this.context)
       : optionalParams;
 
     this.localInstance?.error(message, ...optionalParams);
@@ -253,7 +234,7 @@ export class Logger implements LoggerService {
 
   /**
    * Attach buffer.
-   * Turns on initialization logs buffering.
+   * Turns on initialisation logs buffering.
    */
   static attachBuffer() {
     this.isBufferAttached = true;
@@ -261,14 +242,25 @@ export class Logger implements LoggerService {
 
   /**
    * Detach buffer.
-   * Turns off initialization logs buffering.
+   * Turns off initialisation logs buffering.
    */
   static detachBuffer() {
     this.isBufferAttached = false;
   }
 
   static getTimestamp() {
-    return dateTimeFormatter.format(Date.now());
+    const localeStringOptions = {
+      year: 'numeric',
+      hour: 'numeric',
+      minute: 'numeric',
+      second: 'numeric',
+      day: '2-digit',
+      month: '2-digit',
+    };
+    return new Date(Date.now()).toLocaleString(
+      undefined,
+      localeStringOptions as Intl.DateTimeFormatOptions,
+    );
   }
 
   static overrideLogger(logger: LoggerService | LogLevel[] | boolean) {
diff --git a/packages/common/tsconfig.build.json b/packages/common/tsconfig.build.json
deleted file mode 100644
index 2d16c3a20..000000000
--- a/packages/common/tsconfig.build.json
+++ /dev/null
@@ -1,10 +0,0 @@
-{
-  "extends": "../tsconfig.build.json",
-  "compilerOptions": {
-    "outDir": ".",
-    "rootDir": ".",
-    "paths": {}
-  },
-  "exclude": ["node_modules", "dist", "test/**/*", "*.spec.ts"],
-  "references": []
-}
diff --git a/packages/common/tsconfig.json b/packages/common/tsconfig.json
index 2ae9e3c90..b238080a4 100644
--- a/packages/common/tsconfig.json
+++ b/packages/common/tsconfig.json
@@ -1,13 +1,7 @@
 {
-  "extends": "../tsconfig.build.json",
+  "extends": "./../tsconfig.base.json",
   "compilerOptions": {
-    "types": ["node"]
+    "baseUrl": "./"
   },
-  "files": [],
-  "include": [],
-  "references": [
-    {
-      "path": "./tsconfig.build.json"
-    }
-  ]
+  "include": ["*.ts", "**/*.ts"]
 }
diff --git a/packages/common/utils/forward-ref.util.ts b/packages/common/utils/forward-ref.util.ts
index 1b380c022..a43ac6df2 100644
--- a/packages/common/utils/forward-ref.util.ts
+++ b/packages/common/utils/forward-ref.util.ts
@@ -1,8 +1,5 @@
 import { ForwardReference } from '../interfaces/modules/forward-reference.interface';
 
-/**
- * @publicApi
- */
 export const forwardRef = (fn: () => any): ForwardReference => ({
   forwardRef: fn,
 });
diff --git a/packages/common/utils/random-string-generator.util.ts b/packages/common/utils/random-string-generator.util.ts
index 7e39be7b5..6897e6e7d 100644
--- a/packages/common/utils/random-string-generator.util.ts
+++ b/packages/common/utils/random-string-generator.util.ts
@@ -1,3 +1,3 @@
-import { uid } from 'uid';
+import { v4 as uuid } from 'uuid';
 
-export const randomStringGenerator = () => uid(21);
+export const randomStringGenerator = () => uuid();
diff --git a/packages/common/utils/select-exception-filter-metadata.util.ts b/packages/common/utils/select-exception-filter-metadata.util.ts
deleted file mode 100644
index e1e1661f5..000000000
--- a/packages/common/utils/select-exception-filter-metadata.util.ts
+++ /dev/null
@@ -1,13 +0,0 @@
-import { ExceptionFilterMetadata } from '../interfaces/exceptions';
-
-export const selectExceptionFilterMetadata = <T = any>(
-  filters: ExceptionFilterMetadata[],
-  exception: T,
-): ExceptionFilterMetadata | undefined =>
-  filters.find(
-    ({ exceptionMetatypes }) =>
-      !exceptionMetatypes.length ||
-      exceptionMetatypes.some(
-        ExceptionMetaType => exception instanceof ExceptionMetaType,
-      ),
-  );
diff --git a/packages/common/utils/shared.utils.ts b/packages/common/utils/shared.utils.ts
index 876b41551..4f9ff6eea 100644
--- a/packages/common/utils/shared.utils.ts
+++ b/packages/common/utils/shared.utils.ts
@@ -41,8 +41,7 @@ export const normalizePath = (path?: string): string =>
 export const stripEndSlash = (path: string) =>
   path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;
 
-export const isFunction = (val: any): val is Function =>
-  typeof val === 'function';
+export const isFunction = (val: any): boolean => typeof val === 'function';
 export const isString = (val: any): val is string => typeof val === 'string';
 export const isNumber = (val: any): val is number => typeof val === 'number';
 export const isConstructor = (val: any): boolean => val === 'constructor';
diff --git a/packages/core/Readme.md b/packages/core/Readme.md
index 16f48336d..5203ac4c2 100644
--- a/packages/core/Readme.md
+++ b/packages/core/Readme.md
@@ -11,6 +11,7 @@
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/l/@nestjs/core.svg" alt="Package License" /></a>
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/dm/@nestjs/common.svg" alt="NPM Downloads" /></a>
 <a href="https://circleci.com/gh/nestjs/nest" target="_blank"><img src="https://img.shields.io/circleci/build/github/nestjs/nest/master" alt="CircleCI" /></a>
+<a href="https://coveralls.io/github/nestjs/nest?branch=master" target="_blank"><img src="https://coveralls.io/repos/github/nestjs/nest/badge.svg?branch=master#9" alt="Coverage" /></a>
 <a href="https://discord.gg/G7Qnnhy" target="_blank"><img src="https://img.shields.io/badge/discord-online-brightgreen.svg" alt="Discord"/></a>
 <a href="https://opencollective.com/nest#backer" target="_blank"><img src="https://opencollective.com/nest/backers/badge.svg" alt="Backers on Open Collective" /></a>
 <a href="https://opencollective.com/nest#sponsor" target="_blank"><img src="https://opencollective.com/nest/sponsors/badge.svg" alt="Sponsors on Open Collective" /></a>
@@ -77,10 +78,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
  <td>
 <a href="https://jetbrains.com/" target="_blank"><img src="https://nestjs.com/img/jetbrains-logo.svg" width="110" valign="middle" /></a></td><td>
 <a href="https://snyk.co/nestjs" target="_blank"><img src="https://nestjs.com/img/snyk-logo-black.png" width="185" valign="middle" /></a></td><td>
-<a href="https://fuseautotech.com/" target="_blank"><img src="https://nestjs.com/img/fuse-logo.svg" width="105" valign="middle" /></a></td>
-<td>
-<a href="https://ridicorp.com/career/" target="_blank"><img src="https://nestjs.com/img/ridi-logo.svg" width="105" valign="middle" /></a></td><td>
-<a href="https://www.movavi.com/imovie-for-windows.html" target="_blank"><img src="https://nestjs.com/img/movavi-logo.svg" width="105" valign="middle" /></a></td></</tr></table>
+<a href="https://fuseautotech.com/" target="_blank"><img src="https://nestjs.com/img/fuse-logo.svg" width="105" valign="middle" /></a></td></</tr></table>
 
 #### Silver Sponsors
 
@@ -93,8 +91,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
 <td><a href="https://www.tinystacks.com" target="_blank"><img src="https://nestjs.com/img/tinystacks-logo.png#1" width="140" valign="middle" /></td>
 <td><a href="https://n.inc" target="_blank"><img src="https://nestjs.com/img/n-inc-logo.svg" width="120" valign="middle" /></td></tr><tr>
 <td><a href="https://bilberrry.com/" target="_blank"><img src="https://nestjs.com/img/bilberrry-logo.svg" width="180" valign="middle" /></td>
-<td><a href="https://ipinfo.ai/" target="_blank"><img src="https://nestjs.com/img/ipinfo-logo.png" width="130" valign="middle" /></td>
-<td><a href="https://chax.at" target="_blank"><img src="https://nestjs.com/img/chaxat-logo.png" width="100" valign="middle" /></td></tr>
+<td><a href="https://ipinfo.ai/" target="_blank"><img src="https://nestjs.com/img/ipinfo-logo.png" width="130" valign="middle" /></td></tr>
 </table>
 
 #### Sponsors
@@ -135,8 +132,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
    <td align="center" valign="middle"><a href="https://mobilereality.pl/" target="_blank"><img src="https://nestjs.com/img/mobile-reality-logo.png" width="45" valign="middle" /></a></td>
      <td align="center" valign="middle"><a href="https://boringowl.io/" target="_blank"><img src="https://nestjs.com/img/boringowl-logo.svg" width="120" valign="middle" /></a></td>
  <td align="center" valign="middle"><a href="https://www.mobilefactory.jp/" target="_blank"><img src="https://nestjs.com/img/mobilefactory-logo.png" width="100" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://nordbot.app/" target="_blank"><img src="https://nestjs.com/img/nordbot-logo.png" width="120" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://doppio.sh/" target="_blank"><img src="https://nestjs.com/img/dopiosh-logo.png" width="50" valign="middle" /></a></td>
+ <td align="center" valign="middle"><a href="https://db.nordbot.app/" target="_blank"><img src="https://nestjs.com/img/nord-logo.png" width="50" valign="middle" /></a></td>
   </tr></table>
 
 ## Backers
diff --git a/packages/core/adapters/http-adapter.ts b/packages/core/adapters/http-adapter.ts
index 45a01c163..6bfc4add7 100644
--- a/packages/core/adapters/http-adapter.ts
+++ b/packages/core/adapters/http-adapter.ts
@@ -68,6 +68,12 @@ export abstract class AbstractHttpAdapter<
     return this.instance.all(...args);
   }
 
+  public search(port: string | number, callback?: () => void);
+  public search(port: string | number, hostname: string, callback?: () => void);
+  public search(port: any, hostname?: any, callback?: any) {
+    return this.instance.search(port, hostname, callback);
+  }
+
   public options(handler: RequestHandler);
   public options(path: any, handler: RequestHandler);
   public options(...args: any[]) {
diff --git a/packages/core/constants.ts b/packages/core/constants.ts
index 6b0f56267..877226690 100644
--- a/packages/core/constants.ts
+++ b/packages/core/constants.ts
@@ -1,5 +1,3 @@
-import { EnhancerSubtype } from '@nestjs/common/constants';
-
 export const MESSAGES = {
   APPLICATION_START: `Starting Nest application...`,
   APPLICATION_READY: `Nest application successfully started`,
@@ -14,15 +12,3 @@ export const APP_INTERCEPTOR = 'APP_INTERCEPTOR';
 export const APP_PIPE = 'APP_PIPE';
 export const APP_GUARD = 'APP_GUARD';
 export const APP_FILTER = 'APP_FILTER';
-export const ENHANCER_TOKEN_TO_SUBTYPE_MAP: Record<
-  | typeof APP_GUARD
-  | typeof APP_PIPE
-  | typeof APP_FILTER
-  | typeof APP_INTERCEPTOR,
-  EnhancerSubtype
-> = {
-  [APP_GUARD]: 'guard',
-  [APP_INTERCEPTOR]: 'interceptor',
-  [APP_PIPE]: 'pipe',
-  [APP_FILTER]: 'filter',
-} as const;
diff --git a/packages/core/errors/exceptions/unknown-dependencies.exception.ts b/packages/core/errors/exceptions/unknown-dependencies.exception.ts
index 57c7207c8..d350952cb 100644
--- a/packages/core/errors/exceptions/unknown-dependencies.exception.ts
+++ b/packages/core/errors/exceptions/unknown-dependencies.exception.ts
@@ -1,18 +1,14 @@
 import { InjectorDependencyContext } from '../../injector/injector';
-import { Module } from '../../injector/module';
 import { UNKNOWN_DEPENDENCIES_MESSAGE } from '../messages';
 import { RuntimeException } from './runtime.exception';
+import { Module } from '../../injector/module';
 
 export class UnknownDependenciesException extends RuntimeException {
-  public readonly moduleRef: { id: string } | undefined;
-
   constructor(
-    public readonly type: string | symbol,
-    public readonly context: InjectorDependencyContext,
-    moduleRef?: Module,
-    public readonly metadata?: { id: string },
+    type: string | symbol,
+    unknownDependencyContext: InjectorDependencyContext,
+    module?: Module,
   ) {
-    super(UNKNOWN_DEPENDENCIES_MESSAGE(type, context, moduleRef));
-    this.moduleRef = moduleRef && { id: moduleRef.id };
+    super(UNKNOWN_DEPENDENCIES_MESSAGE(type, unknownDependencyContext, module));
   }
 }
diff --git a/packages/core/errors/messages.ts b/packages/core/errors/messages.ts
index ba33e4f85..2d327280e 100644
--- a/packages/core/errors/messages.ts
+++ b/packages/core/errors/messages.ts
@@ -26,7 +26,7 @@ const getInstanceName = (instance: unknown): string => {
  * Returns the name of the dependency
  * Tries to get the class name, otherwise the string value
  * (= injection token). As fallback it returns '+'
- * @param dependency The name of the dependency to be displayed
+ * @param dependency The dependency whichs name should get displayed
  */
 const getDependencyName = (dependency: InjectorDependency): string =>
   // use class name
@@ -60,32 +60,20 @@ export const UNKNOWN_DEPENDENCIES_MESSAGE = (
     dependencies,
     key,
   } = unknownDependencyContext;
-  const moduleName = getModuleName(module);
+  const moduleName = getModuleName(module) || 'Module';
   const dependencyName = getDependencyName(name);
 
-  const potentialSolutions =
-    // If module's name is well defined
-    moduleName !== 'current'
-      ? `\n
+  let message = `Nest can't resolve dependencies of the ${type.toString()}`;
+
+  const potentialSolutions = `\n
 Potential solutions:
-- Is ${moduleName} a valid NestJS module?
 - If ${dependencyName} is a provider, is it part of the current ${moduleName}?
 - If ${dependencyName} is exported from a separate @Module, is that module imported within ${moduleName}?
   @Module({
     imports: [ /* the Module containing ${dependencyName} */ ]
   })
-`
-      : `\n
-Potential solutions:
-- If ${dependencyName} is a provider, is it part of the current Module?
-- If ${dependencyName} is exported from a separate @Module, is that module imported within Module?
-  @Module({
-    imports: [ /* the Module containing ${dependencyName} */ ]
-  })
 `;
 
-  let message = `Nest can't resolve dependencies of the ${type.toString()}`;
-
   if (isNil(index)) {
     message += `. Please make sure that the "${key.toString()}" property is available in the current context.${potentialSolutions}`;
     return message;
@@ -95,7 +83,9 @@ Potential solutions:
 
   message += ` (`;
   message += dependenciesName.join(', ');
-  message += `). Please make sure that the argument ${dependencyName} at index [${index}] is available in the ${moduleName} context.`;
+  message += `). Please make sure that the argument ${dependencyName} at index [${index}] is available in the ${getModuleName(
+    module,
+  )} context.`;
   message += potentialSolutions;
 
   return message;
diff --git a/packages/core/exceptions/base-exception-filter-context.ts b/packages/core/exceptions/base-exception-filter-context.ts
index 40ff0a156..aa9971227 100644
--- a/packages/core/exceptions/base-exception-filter-context.ts
+++ b/packages/core/exceptions/base-exception-filter-context.ts
@@ -50,7 +50,7 @@ export class BaseExceptionFilterContext extends ContextCreator {
       return null;
     }
     const instanceHost = instanceWrapper.getInstanceByContextId(
-      this.getContextId(contextId, instanceWrapper),
+      contextId,
       inquirerId,
     );
     return instanceHost && instanceHost.instance;
diff --git a/packages/core/exceptions/exceptions-handler.ts b/packages/core/exceptions/exceptions-handler.ts
index 14290bcd9..af54683ae 100644
--- a/packages/core/exceptions/exceptions-handler.ts
+++ b/packages/core/exceptions/exceptions-handler.ts
@@ -1,10 +1,9 @@
-import { isEmpty } from '@nestjs/common/utils/shared.utils';
-import { HttpException } from '@nestjs/common';
-import { ArgumentsHost } from '@nestjs/common/interfaces/features/arguments-host.interface';
+import { HttpException, Type } from '@nestjs/common';
 import { ExceptionFilterMetadata } from '@nestjs/common/interfaces/exceptions/exception-filter-metadata.interface';
-import { selectExceptionFilterMetadata } from '@nestjs/common/utils/select-exception-filter-metadata.util';
-import { BaseExceptionFilter } from './base-exception-filter';
+import { ArgumentsHost } from '@nestjs/common/interfaces/features/arguments-host.interface';
+import { isEmpty } from '@nestjs/common/utils/shared.utils';
 import { InvalidExceptionFilterException } from '../errors/exceptions/invalid-exception-filter.exception';
+import { BaseExceptionFilter } from './base-exception-filter';
 
 export class ExceptionsHandler extends BaseExceptionFilter {
   private filters: ExceptionFilterMetadata[] = [];
@@ -30,8 +29,14 @@ export class ExceptionsHandler extends BaseExceptionFilter {
     if (isEmpty(this.filters)) {
       return false;
     }
+    const isInstanceOf = (metatype: Type<unknown>) =>
+      exception instanceof metatype;
 
-    const filter = selectExceptionFilterMetadata(this.filters, exception);
+    const filter = this.filters.find(({ exceptionMetatypes }) => {
+      const typeExists =
+        !exceptionMetatypes.length || exceptionMetatypes.some(isInstanceOf);
+      return typeExists;
+    });
     filter && filter.func(exception, ctx);
     return !!filter;
   }
diff --git a/packages/core/exceptions/external-exceptions-handler.ts b/packages/core/exceptions/external-exceptions-handler.ts
index 9e852ba35..15a6e6b3c 100644
--- a/packages/core/exceptions/external-exceptions-handler.ts
+++ b/packages/core/exceptions/external-exceptions-handler.ts
@@ -1,9 +1,9 @@
-import { isEmpty } from '@nestjs/common/utils/shared.utils';
-import { ArgumentsHost } from '@nestjs/common/interfaces/features/arguments-host.interface';
+import { Type } from '@nestjs/common';
 import { ExceptionFilterMetadata } from '@nestjs/common/interfaces/exceptions';
-import { selectExceptionFilterMetadata } from '@nestjs/common/utils/select-exception-filter-metadata.util';
-import { ExternalExceptionFilter } from './external-exception-filter';
+import { ArgumentsHost } from '@nestjs/common/interfaces/features/arguments-host.interface';
+import { isEmpty } from '@nestjs/common/utils/shared.utils';
 import { InvalidExceptionFilterException } from '../errors/exceptions/invalid-exception-filter.exception';
+import { ExternalExceptionFilter } from './external-exception-filter';
 
 export class ExternalExceptionsHandler extends ExternalExceptionFilter {
   private filters: ExceptionFilterMetadata[] = [];
@@ -30,8 +30,14 @@ export class ExternalExceptionsHandler extends ExternalExceptionFilter {
     if (isEmpty(this.filters)) {
       return null;
     }
+    const isInstanceOf = (metatype: Type<unknown>) =>
+      exception instanceof metatype;
 
-    const filter = selectExceptionFilterMetadata(this.filters, exception);
+    const filter = this.filters.find(({ exceptionMetatypes }) => {
+      const typeExists =
+        !exceptionMetatypes.length || exceptionMetatypes.some(isInstanceOf);
+      return typeExists;
+    });
     return filter ? filter.func(exception, host) : null;
   }
 }
diff --git a/packages/core/guards/guards-context-creator.ts b/packages/core/guards/guards-context-creator.ts
index 7c9963b3a..e82a8fb04 100644
--- a/packages/core/guards/guards-context-creator.ts
+++ b/packages/core/guards/guards-context-creator.ts
@@ -69,7 +69,7 @@ export class GuardsContextCreator extends ContextCreator {
       return null;
     }
     const instanceHost = instanceWrapper.getInstanceByContextId(
-      this.getContextId(contextId, instanceWrapper),
+      contextId,
       inquirerId,
     );
     return instanceHost && instanceHost.instance;
@@ -104,12 +104,7 @@ export class GuardsContextCreator extends ContextCreator {
     const scopedGuardWrappers =
       this.config.getGlobalRequestGuards() as InstanceWrapper[];
     const scopedGuards = iterate(scopedGuardWrappers)
-      .map(wrapper =>
-        wrapper.getInstanceByContextId(
-          this.getContextId(contextId, wrapper),
-          inquirerId,
-        ),
-      )
+      .map(wrapper => wrapper.getInstanceByContextId(contextId, inquirerId))
       .filter(host => !!host)
       .map(host => host.instance)
       .toArray();
diff --git a/packages/core/helpers/context-creator.ts b/packages/core/helpers/context-creator.ts
index fa8c9c4ac..5028cc973 100644
--- a/packages/core/helpers/context-creator.ts
+++ b/packages/core/helpers/context-creator.ts
@@ -1,6 +1,6 @@
 import { Controller } from '@nestjs/common/interfaces';
 import { STATIC_CONTEXT } from '../injector/constants';
-import { ContextId, InstanceWrapper } from '../injector/instance-wrapper';
+import { ContextId } from '../injector/instance-wrapper';
 
 export abstract class ContextCreator {
   public abstract createConcreteContext<T extends any[], R extends any[]>(
@@ -51,16 +51,4 @@ export abstract class ContextCreator {
   ): T {
     return Reflect.getMetadata(metadataKey, callback);
   }
-
-  protected getContextId(
-    contextId: ContextId,
-    instanceWrapper: InstanceWrapper,
-  ): ContextId {
-    return contextId.getParent
-      ? contextId.getParent({
-          token: instanceWrapper.token,
-          isTreeDurable: instanceWrapper.isDependencyTreeDurable(),
-        })
-      : contextId;
-  }
 }
diff --git a/packages/core/helpers/external-context-creator.ts b/packages/core/helpers/external-context-creator.ts
index 83ef9994d..54212533e 100644
--- a/packages/core/helpers/external-context-creator.ts
+++ b/packages/core/helpers/external-context-creator.ts
@@ -5,20 +5,20 @@ import {
   Controller,
   PipeTransform,
 } from '@nestjs/common/interfaces';
-import { isEmpty } from '@nestjs/common/utils/shared.utils';
+import { isEmpty, isFunction } from '@nestjs/common/utils/shared.utils';
 import { lastValueFrom, isObservable } from 'rxjs';
 import { ExternalExceptionFilterContext } from '../exceptions/external-exception-filter-context';
 import { FORBIDDEN_MESSAGE } from '../guards/constants';
-import { GuardsConsumer, GuardsContextCreator } from '../guards';
+import { GuardsConsumer } from '../guards/guards-consumer';
+import { GuardsContextCreator } from '../guards/guards-context-creator';
 import { STATIC_CONTEXT } from '../injector/constants';
 import { NestContainer } from '../injector/container';
 import { ContextId } from '../injector/instance-wrapper';
 import { ModulesContainer } from '../injector/modules-container';
-import {
-  InterceptorsConsumer,
-  InterceptorsContextCreator,
-} from '../interceptors';
-import { PipesConsumer, PipesContextCreator } from '../pipes';
+import { InterceptorsConsumer } from '../interceptors/interceptors-consumer';
+import { InterceptorsContextCreator } from '../interceptors/interceptors-context-creator';
+import { PipesConsumer } from '../pipes/pipes-consumer';
+import { PipesContextCreator } from '../pipes/pipes-context-creator';
 import { ContextUtils, ParamProperties } from './context-utils';
 import { ExternalErrorProxy } from './external-proxy';
 import { HandlerMetadataStorage } from './handler-metadata-storage';
diff --git a/packages/core/helpers/index.ts b/packages/core/helpers/index.ts
index 76f854606..5319266f1 100644
--- a/packages/core/helpers/index.ts
+++ b/packages/core/helpers/index.ts
@@ -1,3 +1,2 @@
 export * from './context-id-factory';
-export * from './external-context-creator';
 export * from './http-adapter-host';
diff --git a/packages/core/index.ts b/packages/core/index.ts
index 511eac90d..1babf6c15 100644
--- a/packages/core/index.ts
+++ b/packages/core/index.ts
@@ -1,6 +1,6 @@
 /*
  * Nest @core
- * Copyright(c) 2017 - 2023 Kamil Mysliwiec
+ * Copyright(c) 2017 - 2022 Kamil Mysliwiec
  * https://nestjs.com
  * MIT Licensed
  */
@@ -13,7 +13,6 @@ export * from './discovery';
 export * from './exceptions';
 export * from './helpers';
 export * from './injector';
-export * from './inspector';
 export * from './metadata-scanner';
 export * from './middleware';
 export * from './nest-application';
diff --git a/packages/core/injector/compiler.ts b/packages/core/injector/compiler.ts
index 353e27581..6c707fd61 100644
--- a/packages/core/injector/compiler.ts
+++ b/packages/core/injector/compiler.ts
@@ -1,8 +1,4 @@
-import {
-  DynamicModule,
-  ForwardReference,
-  Type,
-} from '@nestjs/common/interfaces';
+import { DynamicModule, Type } from '@nestjs/common/interfaces';
 import { ModuleTokenFactory } from './module-token-factory';
 
 export interface ModuleFactory {
@@ -22,25 +18,19 @@ export class ModuleCompiler {
     return { type, dynamicMetadata, token };
   }
 
-  public extractMetadata(
-    metatype: Type<any> | ForwardReference | DynamicModule,
-  ): {
+  public extractMetadata(metatype: Type<any> | DynamicModule): {
     type: Type<any>;
     dynamicMetadata?: Partial<DynamicModule> | undefined;
   } {
     if (!this.isDynamicModule(metatype)) {
-      return {
-        type: (metatype as ForwardReference)?.forwardRef
-          ? (metatype as ForwardReference).forwardRef()
-          : metatype,
-      };
+      return { type: metatype };
     }
     const { module: type, ...dynamicMetadata } = metatype;
     return { type, dynamicMetadata };
   }
 
   public isDynamicModule(
-    module: Type<any> | DynamicModule | ForwardReference,
+    module: Type<any> | DynamicModule,
   ): module is DynamicModule {
     return !!(module as DynamicModule).module;
   }
diff --git a/packages/core/injector/container.ts b/packages/core/injector/container.ts
index 2522eabed..6fed38280 100644
--- a/packages/core/injector/container.ts
+++ b/packages/core/injector/container.ts
@@ -1,17 +1,13 @@
 import { DynamicModule, Provider } from '@nestjs/common';
-import {
-  EnhancerSubtype,
-  GLOBAL_MODULE_METADATA,
-} from '@nestjs/common/constants';
-import { Injectable, Type } from '@nestjs/common/interfaces';
+import { GLOBAL_MODULE_METADATA } from '@nestjs/common/constants';
+import { Injectable } from '@nestjs/common/interfaces/injectable.interface';
+import { Type } from '@nestjs/common/interfaces/type.interface';
 import { ApplicationConfig } from '../application-config';
 import {
   CircularDependencyException,
   UndefinedForwardRefException,
   UnknownModuleException,
 } from '../errors/exceptions';
-import { InitializeOnPreviewAllowlist } from '../inspector/initialize-on-preview.allowlist';
-import { SerializedGraph } from '../inspector/serialized-graph';
 import { REQUEST } from '../router/request/request-constants';
 import { ModuleCompiler } from './compiler';
 import { ContextId } from './instance-wrapper';
@@ -31,17 +27,12 @@ export class NestContainer {
     Partial<DynamicModule>
   >();
   private readonly internalProvidersStorage = new InternalProvidersStorage();
-  private readonly _serializedGraph = new SerializedGraph();
   private internalCoreModule: Module;
 
   constructor(
     private readonly _applicationConfig: ApplicationConfig = undefined,
   ) {}
 
-  get serializedGraph(): SerializedGraph {
-    return this._serializedGraph;
-  }
-
   get applicationConfig(): ApplicationConfig | undefined {
     return this._applicationConfig;
   }
@@ -81,14 +72,15 @@ export class NestContainer {
     }
     const moduleRef = new Module(type, this);
     moduleRef.token = token;
-    moduleRef.initOnPreview = this.shouldInitOnPreview(type);
     this.modules.set(token, moduleRef);
 
-    const updatedScope = [].concat(scope, type);
-    await this.addDynamicMetadata(token, dynamicMetadata, updatedScope);
+    await this.addDynamicMetadata(
+      token,
+      dynamicMetadata,
+      [].concat(scope, type),
+    );
 
     if (this.isGlobalModule(type, dynamicMetadata)) {
-      moduleRef.isGlobal = true;
       this.addGlobalModule(moduleRef);
     }
     return moduleRef;
@@ -163,7 +155,6 @@ export class NestContainer {
   public addProvider(
     provider: Provider,
     token: string,
-    enhancerSubtype?: EnhancerSubtype,
   ): string | symbol | Function {
     const moduleRef = this.modules.get(token);
     if (!provider) {
@@ -172,20 +163,19 @@ export class NestContainer {
     if (!moduleRef) {
       throw new UnknownModuleException();
     }
-    return moduleRef.addProvider(provider, enhancerSubtype) as Function;
+    return moduleRef.addProvider(provider);
   }
 
   public addInjectable(
     injectable: Provider,
     token: string,
-    enhancerSubtype: EnhancerSubtype,
     host?: Type<Injectable>,
   ) {
     if (!this.modules.has(token)) {
       throw new UnknownModuleException();
     }
     const moduleRef = this.modules.get(token);
-    return moduleRef.addInjectable(injectable, enhancerSubtype, host);
+    moduleRef.addInjectable(injectable, host);
   }
 
   public addExportedProvider(provider: Type<any>, token: string) {
@@ -229,16 +219,15 @@ export class NestContainer {
     target.addRelatedModule(globalModule);
   }
 
-  public getDynamicMetadataByToken(token: string): Partial<DynamicModule>;
-  public getDynamicMetadataByToken<
-    K extends Exclude<keyof DynamicModule, 'global' | 'module'>,
-  >(token: string, metadataKey: K): DynamicModule[K];
   public getDynamicMetadataByToken(
     token: string,
-    metadataKey?: Exclude<keyof DynamicModule, 'global' | 'module'>,
+    metadataKey: keyof DynamicModule,
   ) {
     const metadata = this.dynamicModulesMetadata.get(token);
-    return metadataKey ? metadata?.[metadataKey] ?? [] : metadata;
+    if (metadata && metadata[metadataKey]) {
+      return metadata[metadataKey] as any[];
+    }
+    return [];
   }
 
   public registerCoreModuleRef(moduleRef: Module) {
@@ -257,8 +246,4 @@ export class NestContainer {
       isResolved: true,
     });
   }
-
-  private shouldInitOnPreview(type: Type) {
-    return InitializeOnPreviewAllowlist.has(type);
-  }
 }
diff --git a/packages/core/injector/helpers/transient-instances.ts b/packages/core/injector/helpers/transient-instances.ts
index 4e7f4afd6..17287ef80 100644
--- a/packages/core/injector/helpers/transient-instances.ts
+++ b/packages/core/injector/helpers/transient-instances.ts
@@ -1,13 +1,13 @@
-import { InjectionToken } from '@nestjs/common';
 import { iterate } from 'iterare';
 import { InstanceWrapper } from '../instance-wrapper';
+import { InstanceToken } from '../module';
 
 /**
  * Returns the instances which are transient
- * @param instances The instances which should be checked whether they are transient
+ * @param instances The instances which should be checked whether they are transcient
  */
 export function getTransientInstances(
-  instances: [InjectionToken, InstanceWrapper][],
+  instances: [InstanceToken, InstanceWrapper][],
 ): InstanceWrapper[] {
   return iterate(instances)
     .filter(([_, wrapper]) => wrapper.isDependencyTreeStatic())
@@ -20,10 +20,10 @@ export function getTransientInstances(
 
 /**
  * Returns the instances which are not transient
- * @param instances The instances which should be checked whether they are transient
+ * @param instances The instances which should be checked whether they are transcient
  */
 export function getNonTransientInstances(
-  instances: [InjectionToken, InstanceWrapper][],
+  instances: [InstanceToken, InstanceWrapper][],
 ): InstanceWrapper[] {
   return iterate(instances)
     .filter(
diff --git a/packages/core/injector/injector.ts b/packages/core/injector/injector.ts
index 07361bfd9..525077ce3 100644
--- a/packages/core/injector/injector.ts
+++ b/packages/core/injector/injector.ts
@@ -22,7 +22,6 @@ import {
   isUndefined,
 } from '@nestjs/common/utils/shared.utils';
 import { iterate } from 'iterare';
-import { performance } from 'perf_hooks';
 import { RuntimeException } from '../errors/exceptions/runtime.exception';
 import { UndefinedDependencyException } from '../errors/exceptions/undefined-dependency.exception';
 import { UnknownDependenciesException } from '../errors/exceptions/unknown-dependencies.exception';
@@ -34,7 +33,7 @@ import {
   InstanceWrapper,
   PropertyMetadata,
 } from './instance-wrapper';
-import { Module } from './module';
+import { InstanceToken, Module } from './module';
 
 /**
  * The type of an injectable dependency
@@ -78,11 +77,9 @@ export interface InjectorDependencyContext {
 export class Injector {
   private logger: LoggerService = new Logger('InjectorLogger');
 
-  constructor(private readonly options?: { preview: boolean }) {}
-
   public loadPrototype<T>(
     { token }: InstanceWrapper<T>,
-    collection: Map<InjectionToken, InstanceWrapper<T>>,
+    collection: Map<InstanceToken, InstanceWrapper<T>>,
     contextId = STATIC_CONTEXT,
   ) {
     if (!collection) {
@@ -101,7 +98,7 @@ export class Injector {
 
   public async loadInstance<T>(
     wrapper: InstanceWrapper<T>,
-    collection: Map<InjectionToken, InstanceWrapper>,
+    collection: Map<InstanceToken, InstanceWrapper>,
     moduleRef: Module,
     contextId = STATIC_CONTEXT,
     inquirer?: InstanceWrapper,
@@ -130,7 +127,6 @@ export class Injector {
       return done();
     }
     try {
-      const t0 = this.getNowTimestamp();
       const callback = async (instances: unknown[]) => {
         const properties = await this.resolveProperties(
           wrapper,
@@ -148,7 +144,6 @@ export class Injector {
           inquirer,
         );
         this.applyProperties(instance, properties);
-        wrapper.initTime = this.getNowTimestamp() - t0;
         done();
       };
       await this.resolveConstructorParams<T>(
@@ -168,7 +163,7 @@ export class Injector {
 
   public async loadMiddleware(
     wrapper: InstanceWrapper,
-    collection: Map<InjectionToken, InstanceWrapper>,
+    collection: Map<InstanceToken, InstanceWrapper>,
     moduleRef: Module,
     contextId = STATIC_CONTEXT,
     inquirer?: InstanceWrapper,
@@ -356,9 +351,7 @@ export class Injector {
   }
 
   public reflectConstructorParams<T>(type: Type<T>): any[] {
-    const paramtypes = [
-      ...(Reflect.getMetadata(PARAMTYPES_METADATA, type) || []),
-    ];
+    const paramtypes = Reflect.getMetadata(PARAMTYPES_METADATA, type) || [];
     const selfParams = this.reflectSelfParams<T>(type);
 
     selfParams.forEach(({ index, param }) => (paramtypes[index] = param));
@@ -417,7 +410,7 @@ export class Injector {
 
   public async resolveComponentInstance<T>(
     moduleRef: Module,
-    token: InjectionToken,
+    token: InstanceToken,
     dependencyContext: InjectorDependencyContext,
     wrapper: InstanceWrapper<T>,
     contextId = STATIC_CONTEXT,
@@ -507,7 +500,6 @@ export class Injector {
         wrapper.name,
         dependencyContext,
         moduleRef,
-        { id: wrapper.id },
       );
     }
     if (providers.has(name)) {
@@ -548,7 +540,6 @@ export class Injector {
         wrapper.name,
         dependencyContext,
         moduleRef,
-        { id: wrapper.id },
       );
     }
     return instanceWrapper;
@@ -556,7 +547,7 @@ export class Injector {
 
   public async lookupComponentInImports(
     moduleRef: Module,
-    name: InjectionToken,
+    name: InstanceToken,
     wrapper: InstanceWrapper,
     moduleRegistry: any[] = [],
     contextId = STATIC_CONTEXT,
@@ -722,11 +713,6 @@ export class Injector {
       wrapper.isLazyTransient(contextId, inquirer) ||
       wrapper.isExplicitlyRequested(contextId, inquirer);
 
-    if (this.options?.preview && !wrapper.host?.initOnPreview) {
-      instanceHost.isResolved = true;
-      return instanceHost.instance;
-    }
-
     if (isNil(inject) && isInContext) {
       instanceHost.instance = wrapper.forwardRef
         ? Object.assign(
@@ -747,7 +733,7 @@ export class Injector {
   public async loadPerContext<T = any>(
     instance: T,
     moduleRef: Module,
-    collection: Map<InjectionToken, InstanceWrapper>,
+    collection: Map<InstanceToken, InstanceWrapper>,
     ctx: ContextId,
     wrapper?: InstanceWrapper,
   ): Promise<T> {
@@ -878,12 +864,12 @@ export class Injector {
     }
   }
 
-  private getTokenName(token: InjectionToken): string {
+  private getTokenName(token: InstanceToken): string {
     return isFunction(token) ? (token as Function).name : token.toString();
   }
 
   private printResolvingDependenciesLog(
-    token: InjectionToken,
+    token: InstanceToken,
     inquirer?: InstanceWrapper,
   ): void {
     if (!this.isDebugMode()) {
@@ -904,7 +890,7 @@ export class Injector {
   }
 
   private printLookingForProviderLog(
-    token: InjectionToken,
+    token: InstanceToken,
     moduleRef: Module,
   ): void {
     if (!this.isDebugMode()) {
@@ -919,10 +905,7 @@ export class Injector {
     );
   }
 
-  private printFoundInModuleLog(
-    token: InjectionToken,
-    moduleRef: Module,
-  ): void {
+  private printFoundInModuleLog(token: InstanceToken, moduleRef: Module): void {
     if (!this.isDebugMode()) {
       return;
     }
@@ -950,8 +933,4 @@ export class Injector {
         })
       : contextId;
   }
-
-  private getNowTimestamp() {
-    return performance.now();
-  }
 }
diff --git a/packages/core/injector/instance-links-host.ts b/packages/core/injector/instance-links-host.ts
index bd6839e30..e70f2e642 100644
--- a/packages/core/injector/instance-links-host.ts
+++ b/packages/core/injector/instance-links-host.ts
@@ -1,33 +1,32 @@
-import { InjectionToken } from '@nestjs/common';
 import { isFunction } from '@nestjs/common/utils/shared.utils';
 import { UnknownElementException } from '../errors/exceptions/unknown-element.exception';
 import { NestContainer } from './container';
 import { InstanceWrapper } from './instance-wrapper';
-import { Module } from './module';
+import { InstanceToken, Module } from './module';
 
 type HostCollection = 'providers' | 'controllers' | 'injectables';
 
 export interface InstanceLink<T = any> {
-  token: InjectionToken;
+  token: InstanceToken;
   wrapperRef: InstanceWrapper<T>;
   collection: Map<any, InstanceWrapper>;
   moduleId: string;
 }
 
 export class InstanceLinksHost {
-  private readonly instanceLinks = new Map<InjectionToken, InstanceLink[]>();
+  private readonly instanceLinks = new Map<InstanceToken, InstanceLink[]>();
 
   constructor(private readonly container: NestContainer) {
     this.initialize();
   }
 
-  get<T = any>(token: InjectionToken): InstanceLink<T>;
+  get<T = any>(token: InstanceToken): InstanceLink<T>;
   get<T = any>(
-    token: InjectionToken,
+    token: InstanceToken,
     options?: { moduleId?: string; each?: boolean },
   ): InstanceLink<T> | Array<InstanceLink<T>>;
   get<T = any>(
-    token: InjectionToken,
+    token: InstanceToken,
     options: { moduleId?: string; each?: boolean } = {},
   ): InstanceLink<T> | Array<InstanceLink<T>> {
     const instanceLinksForGivenToken = this.instanceLinks.get(token);
@@ -70,7 +69,7 @@ export class InstanceLinksHost {
 
   private addLink(
     wrapper: InstanceWrapper,
-    token: InjectionToken,
+    token: InstanceToken,
     moduleRef: Module,
     collectionName: HostCollection,
   ) {
@@ -88,7 +87,7 @@ export class InstanceLinksHost {
     }
   }
 
-  private getInstanceNameByToken(token: InjectionToken): string {
+  private getInstanceNameByToken(token: InstanceToken): string {
     return isFunction(token) ? (token as Function)?.name : (token as string);
   }
 }
diff --git a/packages/core/injector/instance-loader.ts b/packages/core/injector/instance-loader.ts
index 489ffdef4..1b9ecb656 100644
--- a/packages/core/injector/instance-loader.ts
+++ b/packages/core/injector/instance-loader.ts
@@ -1,19 +1,17 @@
-import { Logger, LoggerService } from '@nestjs/common';
+import { Logger } from '@nestjs/common';
 import { Controller } from '@nestjs/common/interfaces/controllers/controller.interface';
 import { Injectable } from '@nestjs/common/interfaces/injectable.interface';
 import { MODULE_INIT_MESSAGE } from '../helpers/messages';
-import { GraphInspector } from '../inspector/graph-inspector';
 import { NestContainer } from './container';
 import { Injector } from './injector';
 import { InternalCoreModule } from './internal-core-module/internal-core-module';
 import { Module } from './module';
 
-export class InstanceLoader<TInjector extends Injector = Injector> {
+export class InstanceLoader {
+  protected readonly injector = new Injector();
   constructor(
     protected readonly container: NestContainer,
-    protected readonly injector: TInjector,
-    protected readonly graphInspector: GraphInspector,
-    private logger: LoggerService = new Logger(InstanceLoader.name, {
+    private logger = new Logger(InstanceLoader.name, {
       timestamp: true,
     }),
   ) {}
@@ -26,15 +24,7 @@ export class InstanceLoader<TInjector extends Injector = Injector> {
     modules: Map<string, Module> = this.container.getModules(),
   ) {
     this.createPrototypes(modules);
-
-    try {
-      await this.createInstances(modules);
-    } catch (err) {
-      this.graphInspector.inspectModules(modules);
-      this.graphInspector.registerPartial(err);
-      throw err;
-    }
-    this.graphInspector.inspectModules(modules);
+    await this.createInstances(modules);
   }
 
   private createPrototypes(modules: Map<string, Module>) {
@@ -52,7 +42,7 @@ export class InstanceLoader<TInjector extends Injector = Injector> {
         await this.createInstancesOfInjectables(moduleRef);
         await this.createInstancesOfControllers(moduleRef);
 
-        const { name } = moduleRef;
+        const { name } = moduleRef.metatype;
         this.isModuleWhitelisted(name) &&
           this.logger.log(MODULE_INIT_MESSAGE`${name}`);
       }),
@@ -70,10 +60,7 @@ export class InstanceLoader<TInjector extends Injector = Injector> {
     const { providers } = moduleRef;
     const wrappers = [...providers.values()];
     await Promise.all(
-      wrappers.map(async item => {
-        await this.injector.loadProvider(item, moduleRef);
-        this.graphInspector.inspectInstanceWrapper(item, moduleRef);
-      }),
+      wrappers.map(item => this.injector.loadProvider(item, moduleRef)),
     );
   }
 
@@ -88,10 +75,7 @@ export class InstanceLoader<TInjector extends Injector = Injector> {
     const { controllers } = moduleRef;
     const wrappers = [...controllers.values()];
     await Promise.all(
-      wrappers.map(async item => {
-        await this.injector.loadController(item, moduleRef);
-        this.graphInspector.inspectInstanceWrapper(item, moduleRef);
-      }),
+      wrappers.map(item => this.injector.loadController(item, moduleRef)),
     );
   }
 
@@ -106,10 +90,7 @@ export class InstanceLoader<TInjector extends Injector = Injector> {
     const { injectables } = moduleRef;
     const wrappers = [...injectables.values()];
     await Promise.all(
-      wrappers.map(async item => {
-        await this.injector.loadInjectable(item, moduleRef);
-        this.graphInspector.inspectInstanceWrapper(item, moduleRef);
-      }),
+      wrappers.map(item => this.injector.loadInjectable(item, moduleRef)),
     );
   }
 
diff --git a/packages/core/injector/instance-wrapper.ts b/packages/core/injector/instance-wrapper.ts
index d29ae711d..7c8b93a07 100644
--- a/packages/core/injector/instance-wrapper.ts
+++ b/packages/core/injector/instance-wrapper.ts
@@ -1,6 +1,5 @@
 import { Logger, LoggerService, Provider, Scope, Type } from '@nestjs/common';
-import { EnhancerSubtype } from '@nestjs/common/constants';
-import { FactoryProvider, InjectionToken } from '@nestjs/common/interfaces';
+import { FactoryProvider } from '@nestjs/common/interfaces';
 import { clc } from '@nestjs/common/utils/cli-colors.util';
 import { randomStringGenerator } from '@nestjs/common/utils/random-string-generator.util';
 import {
@@ -9,14 +8,13 @@ import {
   isUndefined,
 } from '@nestjs/common/utils/shared.utils';
 import { iterate } from 'iterare';
-import { UuidFactory } from '../inspector/uuid-factory';
 import { STATIC_CONTEXT } from './constants';
 import {
   isClassProvider,
   isFactoryProvider,
   isValueProvider,
 } from './helpers/provider-classifier';
-import { Module } from './module';
+import { InstanceToken, Module } from './module';
 
 export const INSTANCE_METADATA_SYMBOL = Symbol.for('instance_metadata:cache');
 export const INSTANCE_ID_SYMBOL = Symbol.for('instance_metadata:id');
@@ -25,7 +23,7 @@ export interface HostComponentInfo {
   /**
    * Injection token (or class reference)
    */
-  token: InjectionToken;
+  token: InstanceToken;
   /**
    * Flag that indicates whether DI subtree is durable
    */
@@ -58,18 +56,16 @@ interface InstanceMetadataStore {
 
 export class InstanceWrapper<T = any> {
   public readonly name: any;
-  public readonly token: InjectionToken;
+  public readonly token: InstanceToken;
   public readonly async?: boolean;
   public readonly host?: Module;
   public readonly isAlias: boolean = false;
-  public readonly subtype?: EnhancerSubtype;
 
   public scope?: Scope = Scope.DEFAULT;
   public metatype: Type<T> | Function;
   public inject?: FactoryProvider['inject'];
   public forwardRef?: boolean;
   public durable?: boolean;
-  public initTime?: number;
 
   private static logger: LoggerService = new Logger(InstanceWrapper.name);
 
@@ -85,9 +81,8 @@ export class InstanceWrapper<T = any> {
   constructor(
     metadata: Partial<InstanceWrapper<T>> & Partial<InstancePerContext<T>> = {},
   ) {
+    this[INSTANCE_ID_SYMBOL] = randomStringGenerator();
     this.initialize(metadata);
-    this[INSTANCE_ID_SYMBOL] =
-      metadata[INSTANCE_ID_SYMBOL] ?? this.generateUuid();
   }
 
   get id(): string {
@@ -204,28 +199,23 @@ export class InstanceWrapper<T = any> {
     if (!isUndefined(this.isTreeDurable)) {
       return this.isTreeDurable;
     }
-    if (this.scope === Scope.REQUEST) {
-      this.isTreeDurable = this.durable === undefined ? false : this.durable;
-      if (this.isTreeDurable) {
-        this.printIntrospectedAsDurable();
-      }
+    if (this.durable === true) {
+      this.isTreeDurable = true;
+      this.printIntrospectedAsDurable();
       return this.isTreeDurable;
     }
     const isStatic = this.isDependencyTreeStatic();
     if (isStatic) {
       return false;
     }
-
     const isTreeNonDurable = this.introspectDepsAttribute(
       (collection, registry) =>
-        collection.some(
-          (item: InstanceWrapper) =>
-            !item.isDependencyTreeStatic() &&
-            !item.isDependencyTreeDurable(registry),
+        collection.every(
+          (item: InstanceWrapper) => !item.isDependencyTreeDurable(registry),
         ),
       lookupRegistry,
     );
-    this.isTreeDurable = !isTreeNonDurable;
+    this.isTreeDurable = !isTreeNonDurable && this.durable !== false;
     if (this.isTreeDurable) {
       this.printIntrospectedAsDurable();
     }
@@ -240,30 +230,26 @@ export class InstanceWrapper<T = any> {
     lookupRegistry: string[] = [],
   ): boolean {
     if (lookupRegistry.includes(this[INSTANCE_ID_SYMBOL])) {
-      return false;
+      return true;
     }
     lookupRegistry = lookupRegistry.concat(this[INSTANCE_ID_SYMBOL]);
 
     const { dependencies, properties, enhancers } =
       this[INSTANCE_METADATA_SYMBOL];
 
-    let introspectionResult = dependencies
-      ? callback(dependencies, lookupRegistry)
-      : false;
+    let introspectionResult =
+      (dependencies && callback(dependencies, lookupRegistry)) || !dependencies;
 
-    if (introspectionResult || !(properties || enhancers)) {
+    if (!introspectionResult || !(properties || enhancers)) {
       return introspectionResult;
     }
-    introspectionResult = properties
-      ? callback(
-          properties.map(item => item.wrapper),
-          lookupRegistry,
-        )
-      : false;
-    if (introspectionResult || !enhancers) {
+    const propertiesHosts = (properties || []).map(item => item.wrapper);
+    introspectionResult =
+      introspectionResult && callback(propertiesHosts, lookupRegistry);
+    if (!introspectionResult || !enhancers) {
       return introspectionResult;
     }
-    return enhancers ? callback(enhancers, lookupRegistry) : false;
+    return callback(enhancers, lookupRegistry);
   }
 
   public isDependencyTreeStatic(lookupRegistry: string[] = []): boolean {
@@ -275,10 +261,10 @@ export class InstanceWrapper<T = any> {
       this.printIntrospectedAsRequestScoped();
       return this.isTreeStatic;
     }
-    this.isTreeStatic = !this.introspectDepsAttribute(
+    this.isTreeStatic = this.introspectDepsAttribute(
       (collection, registry) =>
-        collection.some(
-          (item: InstanceWrapper) => !item.isDependencyTreeStatic(registry),
+        collection.every((item: InstanceWrapper) =>
+          item.isDependencyTreeStatic(registry),
         ),
       lookupRegistry,
     );
@@ -466,11 +452,4 @@ export class InstanceWrapper<T = any> {
   private isDebugMode(): boolean {
     return !!process.env.NEST_DEBUG;
   }
-
-  private generateUuid(): string {
-    let key = this.name?.toString() ?? this.token?.toString();
-    key += this.host?.name ?? '';
-
-    return key ? UuidFactory.get(key) : randomStringGenerator();
-  }
 }
diff --git a/packages/core/injector/internal-core-module/internal-core-module-factory.ts b/packages/core/injector/internal-core-module/internal-core-module-factory.ts
index 2e93650a9..c1564e937 100644
--- a/packages/core/injector/internal-core-module/internal-core-module-factory.ts
+++ b/packages/core/injector/internal-core-module/internal-core-module-factory.ts
@@ -1,12 +1,9 @@
 import { Logger } from '@nestjs/common';
 import { ExternalContextCreator } from '../../helpers/external-context-creator';
 import { HttpAdapterHost } from '../../helpers/http-adapter-host';
-import { GraphInspector } from '../../inspector/graph-inspector';
-import { SerializedGraph } from '../../inspector/serialized-graph';
 import { DependenciesScanner } from '../../scanner';
 import { ModuleCompiler } from '../compiler';
 import { NestContainer } from '../container';
-import { Injector } from '../injector';
 import { InstanceLoader } from '../instance-loader';
 import { LazyModuleLoader } from '../lazy-module-loader/lazy-module-loader';
 import { ModulesContainer } from '../modules-container';
@@ -18,27 +15,7 @@ export class InternalCoreModuleFactory {
     scanner: DependenciesScanner,
     moduleCompiler: ModuleCompiler,
     httpAdapterHost: HttpAdapterHost,
-    graphInspector: GraphInspector,
   ) {
-    const lazyModuleLoaderFactory = () => {
-      const logger = new Logger(LazyModuleLoader.name, {
-        timestamp: false,
-      });
-      const injector = new Injector();
-      const instanceLoader = new InstanceLoader(
-        container,
-        injector,
-        graphInspector,
-        logger,
-      );
-      return new LazyModuleLoader(
-        scanner,
-        instanceLoader,
-        moduleCompiler,
-        container.getModules(),
-      );
-    };
-
     return InternalCoreModule.register([
       {
         provide: ExternalContextCreator,
@@ -53,12 +30,23 @@ export class InternalCoreModuleFactory {
         useValue: httpAdapterHost,
       },
       {
-        provide: LazyModuleLoader,
-        useFactory: lazyModuleLoaderFactory,
+        provide: HttpAdapterHost.name,
+        useExisting: HttpAdapterHost,
       },
       {
-        provide: SerializedGraph,
-        useValue: container.serializedGraph,
+        provide: LazyModuleLoader,
+        useFactory: () => {
+          const logger = new Logger(LazyModuleLoader.name, {
+            timestamp: false,
+          });
+          const instanceLoader = new InstanceLoader(container, logger);
+          return new LazyModuleLoader(
+            scanner,
+            instanceLoader,
+            moduleCompiler,
+            container.getModules(),
+          );
+        },
       },
     ]);
   }
diff --git a/packages/core/injector/module-ref.ts b/packages/core/injector/module-ref.ts
index 83aa9c891..d512e0afc 100644
--- a/packages/core/injector/module-ref.ts
+++ b/packages/core/injector/module-ref.ts
@@ -1,4 +1,5 @@
 import { IntrospectionResult, Scope, Type } from '@nestjs/common';
+import { GetOrResolveOptions } from '@nestjs/common/interfaces';
 import { getClassScope } from '../helpers/get-class-scope';
 import { isDurable } from '../helpers/is-durable';
 import { AbstractInstanceResolver } from './abstract-instance-resolver';
@@ -8,20 +9,6 @@ import { InstanceLinksHost } from './instance-links-host';
 import { ContextId, InstanceWrapper } from './instance-wrapper';
 import { Module } from './module';
 
-export interface ModuleRefGetOrResolveOpts {
-  /**
-   * If enabled, lookup will only be performed in the host module.
-   * @default true
-   */
-  strict?: boolean;
-  /**
-   * If enabled, instead of returning a first instance registered under a given token,
-   * a list of instances will be returned.
-   * @default false
-   */
-  each?: boolean;
-}
-
 export abstract class ModuleRef extends AbstractInstanceResolver {
   protected readonly injector = new Injector();
   private _instanceLinksHost: InstanceLinksHost;
@@ -50,15 +37,7 @@ export abstract class ModuleRef extends AbstractInstanceResolver {
    */
   abstract get<TInput = any, TResult = TInput>(
     typeOrToken: Type<TInput> | Function | string | symbol,
-    options: {
-      /**
-       * If enabled, lookup will only be performed in the host module.
-       * @default true
-       */
-      strict?: boolean;
-      /** This indicates that only the first instance registered will be returned. */
-      each?: undefined | false;
-    },
+    options: { strict?: boolean; each?: undefined | false },
   ): TResult;
   /**
    * Retrieves a list of instances of either injectables or controllers, otherwise, throws exception.
@@ -66,15 +45,7 @@ export abstract class ModuleRef extends AbstractInstanceResolver {
    */
   abstract get<TInput = any, TResult = TInput>(
     typeOrToken: Type<TInput> | Function | string | symbol,
-    options: {
-      /**
-       * If enabled, lookup will only be performed in the host module.
-       * @default true
-       */
-      strict?: boolean;
-      /** This indicates that a list of instances will be returned. */
-      each: true;
-    },
+    options: { strict?: boolean; each: true },
   ): Array<TResult>;
   /**
    * Retrieves an instance (or a list of instances) of either injectable or controller, otherwise, throws exception.
@@ -82,7 +53,7 @@ export abstract class ModuleRef extends AbstractInstanceResolver {
    */
   abstract get<TInput = any, TResult = TInput>(
     typeOrToken: Type<TInput> | Function | string | symbol,
-    options?: ModuleRefGetOrResolveOpts,
+    options?: GetOrResolveOptions,
   ): TResult | Array<TResult>;
 
   /**
@@ -125,7 +96,7 @@ export abstract class ModuleRef extends AbstractInstanceResolver {
   abstract resolve<TInput = any, TResult = TInput>(
     typeOrToken: Type<TInput> | Function | string | symbol,
     contextId?: { id: number },
-    options?: ModuleRefGetOrResolveOpts,
+    options?: GetOrResolveOptions,
   ): Promise<TResult | Array<TResult>>;
 
   public abstract create<T = any>(type: Type<T>): Promise<T>;
diff --git a/packages/core/injector/module-token-factory.ts b/packages/core/injector/module-token-factory.ts
index 4a407885c..65409ad09 100644
--- a/packages/core/injector/module-token-factory.ts
+++ b/packages/core/injector/module-token-factory.ts
@@ -2,14 +2,10 @@ import { DynamicModule } from '@nestjs/common';
 import { Type } from '@nestjs/common/interfaces/type.interface';
 import { randomStringGenerator } from '@nestjs/common/utils/random-string-generator.util';
 import { isFunction, isSymbol } from '@nestjs/common/utils/shared.utils';
-import { createHash } from 'crypto';
 import stringify from 'fast-safe-stringify';
-
-const CLASS_STR = 'class ';
-const CLASS_STR_LEN = CLASS_STR.length;
+import * as hash from 'object-hash';
 
 export class ModuleTokenFactory {
-  private readonly moduleTokenCache = new Map<string, string>();
   private readonly moduleIdsCache = new WeakMap<Type<unknown>, string>();
 
   public create(
@@ -17,36 +13,23 @@ export class ModuleTokenFactory {
     dynamicModuleMetadata?: Partial<DynamicModule> | undefined,
   ): string {
     const moduleId = this.getModuleId(metatype);
-
-    if (!dynamicModuleMetadata) {
-      return this.getStaticModuleToken(moduleId, this.getModuleName(metatype));
-    }
     const opaqueToken = {
       id: moduleId,
       module: this.getModuleName(metatype),
-      dynamic: dynamicModuleMetadata,
+      dynamic: this.getDynamicMetadataToken(dynamicModuleMetadata),
     };
-    const opaqueTokenString = this.getStringifiedOpaqueToken(opaqueToken);
-
-    return this.hashString(opaqueTokenString);
+    return hash(opaqueToken, { ignoreUnknown: true });
   }
 
-  public getStaticModuleToken(moduleId: string, moduleName: string): string {
-    const key = `${moduleId}_${moduleName}`;
-    if (this.moduleTokenCache.has(key)) {
-      return this.moduleTokenCache.get(key);
-    }
-
-    const hash = this.hashString(key);
-    this.moduleTokenCache.set(key, hash);
-    return hash;
-  }
-
-  public getStringifiedOpaqueToken(opaqueToken: object | undefined): string {
+  public getDynamicMetadataToken(
+    dynamicModuleMetadata: Partial<DynamicModule> | undefined,
+  ): string {
     // Uses safeStringify instead of JSON.stringify to support circular dynamic modules
     // The replacer function is also required in order to obtain real class names
     // instead of the unified "Function" key
-    return opaqueToken ? stringify(opaqueToken, this.replacer) : '';
+    return dynamicModuleMetadata
+      ? stringify(dynamicModuleMetadata, this.replacer)
+      : '';
   }
 
   public getModuleId(metatype: Type<unknown>): string {
@@ -63,18 +46,14 @@ export class ModuleTokenFactory {
     return metatype.name;
   }
 
-  private hashString(value: string): string {
-    return createHash('sha256').update(value).digest('hex');
-  }
-
   private replacer(key: string, value: any) {
     if (isFunction(value)) {
       const funcAsString = value.toString();
-      const isClass = funcAsString.slice(0, CLASS_STR_LEN) === CLASS_STR;
+      const isClass = /^class\s/.test(funcAsString);
       if (isClass) {
         return value.name;
       }
-      return funcAsString;
+      return hash(funcAsString, { ignoreUnknown: true });
     }
     if (isSymbol(value)) {
       return value.toString();
diff --git a/packages/core/injector/module.ts b/packages/core/injector/module.ts
index f6149ed5d..b8f408f7f 100644
--- a/packages/core/injector/module.ts
+++ b/packages/core/injector/module.ts
@@ -1,13 +1,10 @@
-import {
-  EnhancerSubtype,
-  ENTRY_PROVIDER_WATERMARK,
-} from '@nestjs/common/constants';
 import {
   ClassProvider,
   Controller,
   DynamicModule,
   ExistingProvider,
   FactoryProvider,
+  GetOrResolveOptions,
   Injectable,
   InjectionToken,
   NestModule,
@@ -19,7 +16,6 @@ import { randomStringGenerator } from '@nestjs/common/utils/random-string-genera
 import {
   isFunction,
   isNil,
-  isObject,
   isString,
   isSymbol,
   isUndefined,
@@ -34,37 +30,38 @@ import {
 import { createContextId } from '../helpers/context-id-factory';
 import { getClassScope } from '../helpers/get-class-scope';
 import { isDurable } from '../helpers/is-durable';
-import { UuidFactory } from '../inspector/uuid-factory';
 import { CONTROLLER_ID_KEY } from './constants';
 import { NestContainer } from './container';
 import { InstanceWrapper } from './instance-wrapper';
-import { ModuleRef, ModuleRefGetOrResolveOpts } from './module-ref';
+import { ModuleRef } from './module-ref';
+
+/**
+ * @note
+ * Left for backward compatibility
+ */
+export type InstanceToken = InjectionToken;
 
 export class Module {
   private readonly _id: string;
   private readonly _imports = new Set<Module>();
   private readonly _providers = new Map<
-    InjectionToken,
+    InstanceToken,
     InstanceWrapper<Injectable>
   >();
   private readonly _injectables = new Map<
-    InjectionToken,
+    InstanceToken,
     InstanceWrapper<Injectable>
   >();
   private readonly _middlewares = new Map<
-    InjectionToken,
+    InstanceToken,
     InstanceWrapper<Injectable>
   >();
   private readonly _controllers = new Map<
-    InjectionToken,
+    InstanceToken,
     InstanceWrapper<Controller>
   >();
-  private readonly _entryProviderKeys = new Set<InjectionToken>();
-  private readonly _exports = new Set<InjectionToken>();
-
+  private readonly _exports = new Set<InstanceToken>();
   private _distance = 0;
-  private _initOnPreview = false;
-  private _isGlobal = false;
   private _token: string;
 
   constructor(
@@ -72,7 +69,7 @@ export class Module {
     private readonly container: NestContainer,
   ) {
     this.addCoreProviders();
-    this._id = this.generateUuid();
+    this._id = randomStringGenerator();
   }
 
   get id(): string {
@@ -87,53 +84,48 @@ export class Module {
     this._token = token;
   }
 
-  get name() {
-    return this.metatype.name;
-  }
-
-  get isGlobal() {
-    return this._isGlobal;
+  get providers(): Map<InstanceToken, InstanceWrapper<Injectable>> {
+    return this._providers;
   }
 
-  set isGlobal(global: boolean) {
-    this._isGlobal = global;
+  get middlewares(): Map<InstanceToken, InstanceWrapper<Injectable>> {
+    return this._middlewares;
   }
 
-  get initOnPreview() {
-    return this._initOnPreview;
+  get imports(): Set<Module> {
+    return this._imports;
   }
 
-  set initOnPreview(initOnPreview: boolean) {
-    this._initOnPreview = initOnPreview;
+  /**
+   * Left for backward-compatibility reasons
+   */
+  get relatedModules(): Set<Module> {
+    return this._imports;
   }
 
-  get providers(): Map<InjectionToken, InstanceWrapper<Injectable>> {
+  /**
+   * Left for backward-compatibility reasons
+   */
+  get components(): Map<InstanceToken, InstanceWrapper<Injectable>> {
     return this._providers;
   }
 
-  get middlewares(): Map<InjectionToken, InstanceWrapper<Injectable>> {
-    return this._middlewares;
-  }
-
-  get imports(): Set<Module> {
-    return this._imports;
+  /**
+   * Left for backward-compatibility reasons
+   */
+  get routes(): Map<InstanceToken, InstanceWrapper<Controller>> {
+    return this._controllers;
   }
 
-  get injectables(): Map<InjectionToken, InstanceWrapper<Injectable>> {
+  get injectables(): Map<InstanceToken, InstanceWrapper<Injectable>> {
     return this._injectables;
   }
 
-  get controllers(): Map<InjectionToken, InstanceWrapper<Controller>> {
+  get controllers(): Map<InstanceToken, InstanceWrapper<Controller>> {
     return this._controllers;
   }
 
-  get entryProviders(): Array<InstanceWrapper<Injectable>> {
-    return Array.from(this._entryProviderKeys).map(token =>
-      this.providers.get(token),
-    );
-  }
-
-  get exports(): Set<InjectionToken> {
+  get exports(): Set<InstanceToken> {
     return this._exports;
   }
 
@@ -207,15 +199,10 @@ export class Module {
 
   public addInjectable<T extends Injectable>(
     injectable: Provider,
-    enhancerSubtype: EnhancerSubtype,
     host?: Type<T>,
   ) {
     if (this.isCustomProvider(injectable)) {
-      return this.addCustomProvider(
-        injectable,
-        this._injectables,
-        enhancerSubtype,
-      );
+      return this.addCustomProvider(injectable, this._injectables);
     }
     let instanceWrapper = this.injectables.get(injectable);
     if (!instanceWrapper) {
@@ -227,7 +214,6 @@ export class Module {
         isResolved: false,
         scope: getClassScope(injectable),
         durable: isDurable(injectable),
-        subtype: enhancerSubtype,
         host: this,
       });
       this._injectables.set(injectable, instanceWrapper);
@@ -237,22 +223,12 @@ export class Module {
         this._controllers.get(host) || this._providers.get(host);
       hostWrapper && hostWrapper.addEnhancerMetadata(instanceWrapper);
     }
-    return instanceWrapper;
   }
 
-  public addProvider(provider: Provider): Provider | InjectionToken;
-  public addProvider(
-    provider: Provider,
-    enhancerSubtype: EnhancerSubtype,
-  ): Provider | InjectionToken;
-  public addProvider(provider: Provider, enhancerSubtype?: EnhancerSubtype) {
+  public addProvider(provider: Provider) {
     if (this.isCustomProvider(provider)) {
-      if (this.isEntryProvider(provider.provide)) {
-        this._entryProviderKeys.add(provider.provide);
-      }
-      return this.addCustomProvider(provider, this._providers, enhancerSubtype);
+      return this.addCustomProvider(provider, this._providers);
     }
-
     this._providers.set(
       provider,
       new InstanceWrapper({
@@ -266,11 +242,6 @@ export class Module {
         host: this,
       }),
     );
-
-    if (this.isEntryProvider(provider)) {
-      this._entryProviderKeys.add(provider);
-    }
-
     return provider as Type<Injectable>;
   }
 
@@ -299,16 +270,15 @@ export class Module {
       | ValueProvider
       | ExistingProvider,
     collection: Map<Function | string | symbol, any>,
-    enhancerSubtype?: EnhancerSubtype,
   ) {
     if (this.isCustomClass(provider)) {
-      this.addCustomClass(provider, collection, enhancerSubtype);
+      this.addCustomClass(provider, collection);
     } else if (this.isCustomValue(provider)) {
-      this.addCustomValue(provider, collection, enhancerSubtype);
+      this.addCustomValue(provider, collection);
     } else if (this.isCustomFactory(provider)) {
-      this.addCustomFactory(provider, collection, enhancerSubtype);
+      this.addCustomFactory(provider, collection);
     } else if (this.isCustomUseExisting(provider)) {
-      this.addCustomUseExisting(provider, collection, enhancerSubtype);
+      this.addCustomUseExisting(provider, collection);
     }
     return provider.provide;
   }
@@ -318,10 +288,7 @@ export class Module {
   }
 
   public isCustomValue(provider: any): provider is ValueProvider {
-    return (
-      isObject(provider) &&
-      Object.prototype.hasOwnProperty.call(provider, 'useValue')
-    );
+    return !isUndefined((provider as ValueProvider).useValue);
   }
 
   public isCustomFactory(provider: any): provider is FactoryProvider {
@@ -338,8 +305,7 @@ export class Module {
 
   public addCustomClass(
     provider: ClassProvider,
-    collection: Map<InjectionToken, InstanceWrapper>,
-    enhancerSubtype?: EnhancerSubtype,
+    collection: Map<InstanceToken, InstanceWrapper>,
   ) {
     let { scope, durable } = provider;
 
@@ -350,12 +316,10 @@ export class Module {
     if (isUndefined(durable)) {
       durable = isDurable(useClass);
     }
-
-    const token = provider.provide;
     collection.set(
-      token,
+      provider.provide,
       new InstanceWrapper({
-        token,
+        token: provider.provide,
         name: useClass?.name || useClass,
         metatype: useClass,
         instance: null,
@@ -363,7 +327,6 @@ export class Module {
         scope,
         durable,
         host: this,
-        subtype: enhancerSubtype,
       }),
     );
   }
@@ -371,7 +334,6 @@ export class Module {
   public addCustomValue(
     provider: ValueProvider,
     collection: Map<Function | string | symbol, InstanceWrapper>,
-    enhancerSubtype?: EnhancerSubtype,
   ) {
     const { useValue: value, provide: providerToken } = provider;
     collection.set(
@@ -384,7 +346,6 @@ export class Module {
         isResolved: true,
         async: value instanceof Promise,
         host: this,
-        subtype: enhancerSubtype,
       }),
     );
   }
@@ -392,7 +353,6 @@ export class Module {
   public addCustomFactory(
     provider: FactoryProvider,
     collection: Map<Function | string | symbol, InstanceWrapper>,
-    enhancerSubtype?: EnhancerSubtype,
   ) {
     const {
       useFactory: factory,
@@ -414,7 +374,6 @@ export class Module {
         scope,
         durable,
         host: this,
-        subtype: enhancerSubtype,
       }),
     );
   }
@@ -422,7 +381,6 @@ export class Module {
   public addCustomUseExisting(
     provider: ExistingProvider,
     collection: Map<Function | string | symbol, InstanceWrapper>,
-    enhancerSubtype?: EnhancerSubtype,
   ) {
     const { useExisting, provide: providerToken } = provider;
     collection.set(
@@ -436,7 +394,6 @@ export class Module {
         inject: [useExisting],
         host: this,
         isAlias: true,
-        subtype: enhancerSubtype,
       }),
     );
   }
@@ -444,7 +401,7 @@ export class Module {
   public addExportedProvider(
     provider: Provider | string | symbol | DynamicModule,
   ) {
-    const addExportedUnit = (token: InjectionToken) =>
+    const addExportedUnit = (token: InstanceToken) =>
       this._exports.add(this.validateExportedProvider(token));
 
     if (this.isCustomProvider(provider as any)) {
@@ -472,7 +429,7 @@ export class Module {
     this._exports.add(this.validateExportedProvider(provide));
   }
 
-  public validateExportedProvider(token: InjectionToken) {
+  public validateExportedProvider(token: InstanceToken) {
     if (this._providers.has(token)) {
       return token;
     }
@@ -521,7 +478,7 @@ export class Module {
     this._imports.add(module);
   }
 
-  public replace(toReplace: InjectionToken, options: any) {
+  public replace(toReplace: InstanceToken, options: any) {
     if (options.isProvider && this.hasProvider(toReplace)) {
       const originalProvider = this._providers.get(toReplace);
 
@@ -536,50 +493,20 @@ export class Module {
     }
   }
 
-  public hasProvider(token: InjectionToken): boolean {
+  public hasProvider(token: InstanceToken): boolean {
     return this._providers.has(token);
   }
 
-  public hasInjectable(token: InjectionToken): boolean {
+  public hasInjectable(token: InstanceToken): boolean {
     return this._injectables.has(token);
   }
 
-  public getProviderByKey<T = any>(name: InjectionToken): InstanceWrapper<T> {
+  public getProviderByKey<T = any>(name: InstanceToken): InstanceWrapper<T> {
     return this._providers.get(name) as InstanceWrapper<T>;
   }
 
-  public getProviderById<T = any>(id: string): InstanceWrapper<T> | undefined {
-    return Array.from(this._providers.values()).find(
-      item => item.id === id,
-    ) as InstanceWrapper<T>;
-  }
-
-  public getControllerById<T = any>(
-    id: string,
-  ): InstanceWrapper<T> | undefined {
-    return Array.from(this._controllers.values()).find(
-      item => item.id === id,
-    ) as InstanceWrapper<T>;
-  }
-
-  public getInjectableById<T = any>(
-    id: string,
-  ): InstanceWrapper<T> | undefined {
-    return Array.from(this._injectables.values()).find(
-      item => item.id === id,
-    ) as InstanceWrapper<T>;
-  }
-
-  public getMiddlewareById<T = any>(
-    id: string,
-  ): InstanceWrapper<T> | undefined {
-    return Array.from(this._middlewares.values()).find(
-      item => item.id === id,
-    ) as InstanceWrapper<T>;
-  }
-
   public getNonAliasProviders(): Array<
-    [InjectionToken, InstanceWrapper<Injectable>]
+    [InstanceToken, InstanceWrapper<Injectable>]
   > {
     return [...this._providers].filter(([_, wrapper]) => !wrapper.isAlias);
   }
@@ -594,30 +521,21 @@ export class Module {
 
       public get<TInput = any, TResult = TInput>(
         typeOrToken: Type<TInput> | string | symbol,
-        options: ModuleRefGetOrResolveOpts = {},
+        options: GetOrResolveOptions = { strict: true },
       ): TResult | Array<TResult> {
-        options.strict ??= true;
-        options.each ??= false;
-
-        return this.find<TInput, TResult>(
-          typeOrToken,
-          options.strict
-            ? {
-                moduleId: self.id,
-                each: options.each,
-              }
-            : options,
-        );
+        return !(options && options.strict)
+          ? this.find<TInput, TResult>(typeOrToken, options)
+          : this.find<TInput, TResult>(typeOrToken, {
+              moduleId: self.id,
+              each: options.each,
+            });
       }
 
       public resolve<TInput = any, TResult = TInput>(
         typeOrToken: Type<TInput> | string | symbol,
         contextId = createContextId(),
-        options: ModuleRefGetOrResolveOpts = {},
+        options: GetOrResolveOptions = { strict: true },
       ): Promise<TResult | Array<TResult>> {
-        options.strict ??= true;
-        options.each ??= false;
-
         return this.resolvePerContext<TInput, TResult>(
           typeOrToken,
           self,
@@ -634,16 +552,4 @@ export class Module {
       }
     };
   }
-
-  private isEntryProvider(metatype: InjectionToken): boolean {
-    return typeof metatype === 'function'
-      ? !!Reflect.getMetadata(ENTRY_PROVIDER_WATERMARK, metatype)
-      : false;
-  }
-
-  private generateUuid(): string {
-    const prefix = 'M_';
-    const key = this.name?.toString() ?? this.token?.toString();
-    return key ? UuidFactory.get(`${prefix}_${key}`) : randomStringGenerator();
-  }
 }
diff --git a/packages/core/injector/modules-container.ts b/packages/core/injector/modules-container.ts
index 31777bec2..8f1d9dec6 100644
--- a/packages/core/injector/modules-container.ts
+++ b/packages/core/injector/modules-container.ts
@@ -1,14 +1,10 @@
-import { uid } from 'uid';
+import { v4 as uuid } from 'uuid';
 import { Module } from './module';
 
 export class ModulesContainer extends Map<string, Module> {
-  private readonly _applicationId = uid(21);
+  private readonly _applicationId = uuid();
 
   get applicationId(): string {
     return this._applicationId;
   }
-
-  public getById(id: string): Module | undefined {
-    return Array.from(this.values()).find(moduleRef => moduleRef.id === id);
-  }
 }
diff --git a/packages/core/inspector/deterministic-uuid-registry.ts b/packages/core/inspector/deterministic-uuid-registry.ts
deleted file mode 100644
index 352942cde..000000000
--- a/packages/core/inspector/deterministic-uuid-registry.ts
+++ /dev/null
@@ -1,23 +0,0 @@
-export class DeterministicUuidRegistry {
-  private static readonly registry = new Map<string, boolean>();
-
-  static get(str: string, inc = 0) {
-    const id = inc ? this.hashCode(`${str}_${inc}`) : this.hashCode(str);
-    if (this.registry.has(id)) {
-      return this.get(str, inc + 1);
-    }
-    this.registry.set(id, true);
-    return id;
-  }
-
-  static clear() {
-    this.registry.clear();
-  }
-
-  private static hashCode(s: string) {
-    let h = 0;
-    for (let i = 0; i < s.length; i++)
-      h = (Math.imul(31, h) + s.charCodeAt(i)) | 0;
-    return h.toString();
-  }
-}
diff --git a/packages/core/inspector/graph-inspector.ts b/packages/core/inspector/graph-inspector.ts
deleted file mode 100644
index a2146a543..000000000
--- a/packages/core/inspector/graph-inspector.ts
+++ /dev/null
@@ -1,240 +0,0 @@
-import { UnknownDependenciesException } from '../errors/exceptions/unknown-dependencies.exception';
-import { NestContainer } from '../injector/container';
-import { InstanceWrapper } from '../injector/instance-wrapper';
-import { Module } from '../injector/module';
-import { DeterministicUuidRegistry } from './deterministic-uuid-registry';
-import { EnhancerMetadataCacheEntry } from './interfaces/enhancer-metadata-cache-entry.interface';
-import { Entrypoint } from './interfaces/entrypoint.interface';
-import { OrphanedEnhancerDefinition } from './interfaces/extras.interface';
-import { ClassNode, Node } from './interfaces/node.interface';
-import { PartialGraphHost } from './partial-graph.host';
-import { SerializedGraph } from './serialized-graph';
-
-export class GraphInspector {
-  private readonly graph: SerializedGraph;
-  private readonly enhancersMetadataCache =
-    new Array<EnhancerMetadataCacheEntry>();
-
-  constructor(private readonly container: NestContainer) {
-    this.graph = container.serializedGraph;
-  }
-
-  public inspectModules(
-    modules: Map<string, Module> = this.container.getModules(),
-  ) {
-    for (const moduleRef of modules.values()) {
-      this.insertModuleNode(moduleRef);
-      this.insertClassNodes(moduleRef);
-      this.insertModuleToModuleEdges(moduleRef);
-    }
-
-    this.enhancersMetadataCache.forEach(entry =>
-      this.insertEnhancerEdge(entry),
-    );
-
-    DeterministicUuidRegistry.clear();
-  }
-
-  public registerPartial(error: unknown) {
-    this.graph.status = 'partial';
-
-    if (error instanceof UnknownDependenciesException) {
-      this.graph.metadata = {
-        cause: {
-          type: 'unknown-dependencies',
-          context: error.context,
-          moduleId: error.moduleRef?.id,
-          nodeId: error.metadata?.id,
-        },
-      };
-    } else {
-      this.graph.metadata = {
-        cause: {
-          type: 'unknown',
-          error,
-        },
-      };
-    }
-    PartialGraphHost.register(this.graph);
-  }
-
-  public inspectInstanceWrapper<T = any>(
-    source: InstanceWrapper<T>,
-    moduleRef: Module,
-  ) {
-    const ctorMetadata = source.getCtorMetadata();
-    ctorMetadata?.forEach((target, index) =>
-      this.insertClassToClassEdge(
-        source,
-        target,
-        moduleRef,
-        index,
-        'constructor',
-      ),
-    );
-
-    const propertiesMetadata = source.getPropertiesMetadata();
-    propertiesMetadata?.forEach(({ key, wrapper: target }) =>
-      this.insertClassToClassEdge(source, target, moduleRef, key, 'property'),
-    );
-  }
-
-  public insertEnhancerMetadataCache(entry: EnhancerMetadataCacheEntry) {
-    this.enhancersMetadataCache.push(entry);
-  }
-
-  public insertOrphanedEnhancer(entry: OrphanedEnhancerDefinition) {
-    this.graph.insertOrphanedEnhancer({
-      ...entry,
-      ref: entry.ref?.constructor?.name ?? 'Object',
-    });
-  }
-
-  public insertAttachedEnhancer(wrapper: InstanceWrapper) {
-    const existingNode = this.graph.getNodeById(wrapper.id);
-    existingNode.metadata.global = true;
-
-    this.graph.insertAttachedEnhancer(existingNode.id);
-  }
-
-  public insertEntrypointDefinition<T>(
-    definition: Entrypoint<T>,
-    parentId: string,
-  ) {
-    definition = {
-      ...definition,
-      id: `${definition.classNodeId}_${definition.methodName}`,
-    };
-    this.graph.insertEntrypoint(definition, parentId);
-  }
-
-  public insertClassNode(
-    moduleRef: Module,
-    wrapper: InstanceWrapper,
-    type: Exclude<Node['metadata']['type'], 'module'>,
-  ) {
-    this.graph.insertNode({
-      id: wrapper.id,
-      label: wrapper.name,
-      parent: moduleRef.id,
-      metadata: {
-        type,
-        internal: wrapper.metatype === moduleRef.metatype,
-        sourceModuleName: moduleRef.name,
-        durable: wrapper.isDependencyTreeDurable(),
-        static: wrapper.isDependencyTreeStatic(),
-        scope: wrapper.scope,
-        transient: wrapper.isTransient,
-        exported: moduleRef.exports.has(wrapper.token),
-        token: wrapper.token,
-        subtype: wrapper.subtype,
-        initTime: wrapper.initTime,
-      },
-    });
-  }
-
-  private insertModuleNode(moduleRef: Module) {
-    const dynamicMetadata = this.container.getDynamicMetadataByToken(
-      moduleRef.token,
-    );
-    const node: Node = {
-      id: moduleRef.id,
-      label: moduleRef.name,
-      metadata: {
-        type: 'module',
-        global: moduleRef.isGlobal,
-        dynamic: !!dynamicMetadata,
-        internal: moduleRef.name === 'InternalCoreModule',
-      },
-    };
-    this.graph.insertNode(node);
-  }
-
-  private insertModuleToModuleEdges(moduleRef: Module) {
-    for (const targetModuleRef of moduleRef.imports) {
-      this.graph.insertEdge({
-        source: moduleRef.id,
-        target: targetModuleRef.id,
-        metadata: {
-          type: 'module-to-module',
-          sourceModuleName: moduleRef.name,
-          targetModuleName: targetModuleRef.name,
-        },
-      });
-    }
-  }
-
-  private insertEnhancerEdge(entry: EnhancerMetadataCacheEntry) {
-    const moduleRef = this.container.getModuleByKey(entry.moduleToken);
-    const sourceInstanceWrapper =
-      moduleRef.controllers.get(entry.classRef) ??
-      moduleRef.providers.get(entry.classRef);
-    const existingSourceNode = this.graph.getNodeById(
-      sourceInstanceWrapper.id,
-    ) as ClassNode;
-    const enhancers = existingSourceNode.metadata.enhancers ?? [];
-
-    if (entry.enhancerInstanceWrapper) {
-      this.insertClassToClassEdge(
-        sourceInstanceWrapper,
-        entry.enhancerInstanceWrapper,
-        moduleRef,
-        undefined,
-        'decorator',
-      );
-
-      enhancers.push({
-        id: entry.enhancerInstanceWrapper.id,
-        methodKey: entry.methodKey,
-        subtype: entry.subtype,
-      });
-    } else {
-      const name =
-        entry.enhancerRef.constructor?.name ??
-        (entry.enhancerRef as Function).name;
-
-      enhancers.push({
-        name,
-        methodKey: entry.methodKey,
-        subtype: entry.subtype,
-      });
-    }
-    existingSourceNode.metadata.enhancers = enhancers;
-  }
-
-  private insertClassToClassEdge<T>(
-    source: InstanceWrapper<T>,
-    target: InstanceWrapper,
-    moduleRef: Module,
-    keyOrIndex: number | string | symbol | undefined,
-    injectionType: 'constructor' | 'property' | 'decorator',
-  ) {
-    this.graph.insertEdge({
-      source: source.id,
-      target: target.id,
-      metadata: {
-        type: 'class-to-class',
-        sourceModuleName: moduleRef.name,
-        sourceClassName: source.name,
-        targetClassName: target.name,
-        sourceClassToken: source.token,
-        targetClassToken: target.token,
-        targetModuleName: target.host?.name,
-        keyOrIndex,
-        injectionType,
-      },
-    });
-  }
-
-  private insertClassNodes(moduleRef: Module) {
-    moduleRef.providers.forEach(value =>
-      this.insertClassNode(moduleRef, value, 'provider'),
-    );
-    moduleRef.injectables.forEach(value =>
-      this.insertClassNode(moduleRef, value, 'injectable'),
-    );
-    moduleRef.controllers.forEach(value =>
-      this.insertClassNode(moduleRef, value, 'controller'),
-    );
-  }
-}
diff --git a/packages/core/inspector/index.ts b/packages/core/inspector/index.ts
deleted file mode 100644
index db830f6e7..000000000
--- a/packages/core/inspector/index.ts
+++ /dev/null
@@ -1,4 +0,0 @@
-export * from './graph-inspector';
-export * from './initialize-on-preview.allowlist';
-export * from './partial-graph.host';
-export * from './serialized-graph';
diff --git a/packages/core/inspector/initialize-on-preview.allowlist.ts b/packages/core/inspector/initialize-on-preview.allowlist.ts
deleted file mode 100644
index 27d6ad593..000000000
--- a/packages/core/inspector/initialize-on-preview.allowlist.ts
+++ /dev/null
@@ -1,13 +0,0 @@
-import { Type } from '@nestjs/common';
-
-export class InitializeOnPreviewAllowlist {
-  private static readonly allowlist = new WeakMap<Type, boolean>();
-
-  public static add(type: Type) {
-    this.allowlist.set(type, true);
-  }
-
-  public static has(type: Type) {
-    return this.allowlist.has(type);
-  }
-}
diff --git a/packages/core/inspector/interfaces/edge.interface.ts b/packages/core/inspector/interfaces/edge.interface.ts
deleted file mode 100644
index 9151ab43b..000000000
--- a/packages/core/inspector/interfaces/edge.interface.ts
+++ /dev/null
@@ -1,31 +0,0 @@
-import { InjectionToken } from '@nestjs/common';
-
-type CommonEdgeMetadata = {
-  sourceModuleName: string;
-  targetModuleName: string;
-};
-
-type ModuleToModuleEdgeMetadata = {
-  type: 'module-to-module';
-} & CommonEdgeMetadata;
-
-type ClassToClassEdgeMetadata = {
-  type: 'class-to-class';
-  sourceClassName: string;
-  targetClassName: string;
-  sourceClassToken: InjectionToken;
-  targetClassToken: InjectionToken;
-  injectionType: 'constructor' | 'property' | 'decorator';
-  keyOrIndex?: string | number | symbol;
-  /**
-   * If true, indicates that this edge represents an internal providers connection
-   */
-  internal?: boolean;
-} & CommonEdgeMetadata;
-
-export interface Edge {
-  id: string;
-  source: string;
-  target: string;
-  metadata: ModuleToModuleEdgeMetadata | ClassToClassEdgeMetadata;
-}
diff --git a/packages/core/inspector/interfaces/enhancer-metadata-cache-entry.interface.ts b/packages/core/inspector/interfaces/enhancer-metadata-cache-entry.interface.ts
deleted file mode 100644
index 7f4574d94..000000000
--- a/packages/core/inspector/interfaces/enhancer-metadata-cache-entry.interface.ts
+++ /dev/null
@@ -1,13 +0,0 @@
-import { Type } from '@nestjs/common';
-import { EnhancerSubtype } from '@nestjs/common/constants';
-import { InstanceWrapper } from '../../injector/instance-wrapper';
-
-export interface EnhancerMetadataCacheEntry {
-  targetNodeId?: string;
-  moduleToken: string;
-  classRef: Type;
-  methodKey: string | undefined;
-  enhancerRef?: unknown;
-  enhancerInstanceWrapper?: InstanceWrapper;
-  subtype: EnhancerSubtype;
-}
diff --git a/packages/core/inspector/interfaces/entrypoint.interface.ts b/packages/core/inspector/interfaces/entrypoint.interface.ts
deleted file mode 100644
index 057c040c3..000000000
--- a/packages/core/inspector/interfaces/entrypoint.interface.ts
+++ /dev/null
@@ -1,24 +0,0 @@
-import { RequestMethod } from '@nestjs/common';
-import { VersionValue } from '@nestjs/common/interfaces';
-
-export type HttpEntrypointMetadata = {
-  path: string;
-  requestMethod: keyof typeof RequestMethod;
-  methodVersion?: VersionValue;
-  controllerVersion?: VersionValue;
-};
-
-export type MiddlewareEntrypointMetadata = {
-  path: string;
-  requestMethod: keyof typeof RequestMethod;
-  version?: VersionValue;
-};
-
-export type Entrypoint<T> = {
-  id?: string;
-  type: string;
-  methodName: string;
-  className: string;
-  classNodeId: string;
-  metadata: { key: string } & T;
-};
diff --git a/packages/core/inspector/interfaces/extras.interface.ts b/packages/core/inspector/interfaces/extras.interface.ts
deleted file mode 100644
index 37abd639f..000000000
--- a/packages/core/inspector/interfaces/extras.interface.ts
+++ /dev/null
@@ -1,21 +0,0 @@
-import { EnhancerSubtype } from '@nestjs/common/constants';
-
-/**
- * Enhancers attached through APP_PIPE, APP_GUARD, APP_INTERCEPTOR, and APP_FILTER tokens.
- */
-export interface AttachedEnhancerDefinition {
-  nodeId: string;
-}
-
-/**
- * Enhancers registered through "app.useGlobalPipes()", "app.useGlobalGuards()", "app.useGlobalInterceptors()", and "app.useGlobalFilters()" methods.
- */
-export interface OrphanedEnhancerDefinition {
-  subtype: EnhancerSubtype;
-  ref: unknown;
-}
-
-export interface Extras {
-  orphanedEnhancers: Array<OrphanedEnhancerDefinition>;
-  attachedEnhancers: Array<AttachedEnhancerDefinition>;
-}
diff --git a/packages/core/inspector/interfaces/node.interface.ts b/packages/core/inspector/interfaces/node.interface.ts
deleted file mode 100644
index 1d8589399..000000000
--- a/packages/core/inspector/interfaces/node.interface.ts
+++ /dev/null
@@ -1,47 +0,0 @@
-import { InjectionToken, Scope } from '@nestjs/common';
-import { EnhancerSubtype } from '@nestjs/common/constants';
-
-export type ModuleNode = {
-  metadata: {
-    type: 'module';
-    global: boolean;
-    dynamic: boolean;
-    internal: boolean;
-  };
-};
-
-export type ClassNode = {
-  parent: string;
-  metadata: {
-    type: 'provider' | 'controller' | 'middleware' | 'injectable';
-    subtype?: EnhancerSubtype;
-    sourceModuleName: string;
-    durable: boolean;
-    static: boolean;
-    transient: boolean;
-    exported: boolean;
-    scope: Scope;
-    token: InjectionToken;
-    initTime: number;
-    /**
-     * Enhancers metadata collection
-     */
-    enhancers?: Array<
-      | { id: string; subtype: EnhancerSubtype }
-      | { name: string; methodKey?: string; subtype: EnhancerSubtype }
-    >;
-    /**
-     * If true, node is a globally registered enhancer
-     */
-    global?: boolean;
-    /**
-     * If true, indicates that this node represents an internal provider
-     */
-    internal?: boolean;
-  };
-};
-
-export type Node = {
-  id: string;
-  label: string;
-} & (ClassNode | ModuleNode);
diff --git a/packages/core/inspector/interfaces/serialized-graph-json.interface.ts b/packages/core/inspector/interfaces/serialized-graph-json.interface.ts
deleted file mode 100644
index 9cd9d76cf..000000000
--- a/packages/core/inspector/interfaces/serialized-graph-json.interface.ts
+++ /dev/null
@@ -1,15 +0,0 @@
-import { SerializedGraphStatus } from '../serialized-graph';
-import { Edge } from './edge.interface';
-import { Entrypoint } from './entrypoint.interface';
-import { Extras } from './extras.interface';
-import { Node } from './node.interface';
-import { SerializedGraphMetadata } from './serialized-graph-metadata.interface';
-
-export interface SerializedGraphJson {
-  nodes: Record<string, Node>;
-  edges: Record<string, Edge>;
-  entrypoints: Record<string, Entrypoint<unknown>[]>;
-  extras: Extras;
-  status?: SerializedGraphStatus;
-  metadata?: SerializedGraphMetadata;
-}
diff --git a/packages/core/inspector/interfaces/serialized-graph-metadata.interface.ts b/packages/core/inspector/interfaces/serialized-graph-metadata.interface.ts
deleted file mode 100644
index c88749d01..000000000
--- a/packages/core/inspector/interfaces/serialized-graph-metadata.interface.ts
+++ /dev/null
@@ -1,11 +0,0 @@
-import { InjectorDependencyContext } from '../../injector/injector';
-
-export interface SerializedGraphMetadata {
-  cause: {
-    type: 'unknown-dependencies' | 'unknown';
-    context?: InjectorDependencyContext;
-    moduleId?: string;
-    nodeId?: string;
-    error?: any;
-  };
-}
diff --git a/packages/core/inspector/noop-graph-inspector.ts b/packages/core/inspector/noop-graph-inspector.ts
deleted file mode 100644
index f4a36ee0e..000000000
--- a/packages/core/inspector/noop-graph-inspector.ts
+++ /dev/null
@@ -1,10 +0,0 @@
-import { GraphInspector } from './graph-inspector';
-
-// eslint-disable-next-line @typescript-eslint/no-empty-function
-const noop = () => {};
-export const NoopGraphInspector: GraphInspector = new Proxy(
-  GraphInspector.prototype,
-  {
-    get: () => noop,
-  },
-);
diff --git a/packages/core/inspector/partial-graph.host.ts b/packages/core/inspector/partial-graph.host.ts
deleted file mode 100644
index 84ae71f51..000000000
--- a/packages/core/inspector/partial-graph.host.ts
+++ /dev/null
@@ -1,17 +0,0 @@
-import { SerializedGraph } from './serialized-graph';
-
-export class PartialGraphHost {
-  private static partialGraph: SerializedGraph;
-
-  static toJSON() {
-    return this.partialGraph?.toJSON();
-  }
-
-  static toString() {
-    return this.partialGraph?.toString();
-  }
-
-  static register(partialGraph: SerializedGraph) {
-    this.partialGraph = partialGraph;
-  }
-}
diff --git a/packages/core/inspector/serialized-graph.ts b/packages/core/inspector/serialized-graph.ts
deleted file mode 100644
index 9ba1b7d4c..000000000
--- a/packages/core/inspector/serialized-graph.ts
+++ /dev/null
@@ -1,157 +0,0 @@
-import { InjectionToken } from '@nestjs/common';
-import { ApplicationConfig } from '../application-config';
-import { ExternalContextCreator } from '../helpers/external-context-creator';
-import { HttpAdapterHost } from '../helpers/http-adapter-host';
-import { INQUIRER } from '../injector/inquirer/inquirer-constants';
-import { LazyModuleLoader } from '../injector/lazy-module-loader/lazy-module-loader';
-import { ModuleRef } from '../injector/module-ref';
-import { ModulesContainer } from '../injector/modules-container';
-import { REQUEST } from '../router/request/request-constants';
-import { Reflector } from '../services/reflector.service';
-import { DeterministicUuidRegistry } from './deterministic-uuid-registry';
-import { Edge } from './interfaces/edge.interface';
-import { Entrypoint } from './interfaces/entrypoint.interface';
-import {
-  Extras,
-  OrphanedEnhancerDefinition,
-} from './interfaces/extras.interface';
-import { Node } from './interfaces/node.interface';
-import { SerializedGraphJson } from './interfaces/serialized-graph-json.interface';
-import { SerializedGraphMetadata } from './interfaces/serialized-graph-metadata.interface';
-
-export type SerializedGraphStatus = 'partial' | 'complete';
-type WithOptionalId<T extends Record<'id', string>> = Omit<T, 'id'> &
-  Partial<Pick<T, 'id'>>;
-
-export class SerializedGraph {
-  private readonly nodes = new Map<string, Node>();
-  private readonly edges = new Map<string, Edge>();
-  private readonly entrypoints = new Map<string, Entrypoint<unknown>[]>();
-  private readonly extras: Extras = {
-    orphanedEnhancers: [],
-    attachedEnhancers: [],
-  };
-  private _status: SerializedGraphStatus = 'complete';
-  private _metadata?: SerializedGraphMetadata;
-
-  private static readonly INTERNAL_PROVIDERS: Array<InjectionToken> = [
-    ApplicationConfig,
-    ModuleRef,
-    HttpAdapterHost,
-    LazyModuleLoader,
-    ExternalContextCreator,
-    ModulesContainer,
-    Reflector,
-    SerializedGraph,
-    HttpAdapterHost.name,
-    Reflector.name,
-    REQUEST,
-    INQUIRER,
-  ];
-
-  set status(status: SerializedGraphStatus) {
-    this._status = status;
-  }
-
-  set metadata(metadata: SerializedGraphMetadata) {
-    this._metadata = metadata;
-  }
-
-  public insertNode(nodeDefinition: Node) {
-    if (
-      nodeDefinition.metadata.type === 'provider' &&
-      SerializedGraph.INTERNAL_PROVIDERS.includes(nodeDefinition.metadata.token)
-    ) {
-      nodeDefinition.metadata = {
-        ...nodeDefinition.metadata,
-        internal: true,
-      };
-    }
-    if (this.nodes.has(nodeDefinition.id)) {
-      return this.nodes.get(nodeDefinition.id);
-    }
-    this.nodes.set(nodeDefinition.id, nodeDefinition);
-    return nodeDefinition;
-  }
-
-  public insertEdge(edgeDefinition: WithOptionalId<Edge>) {
-    if (
-      edgeDefinition.metadata.type === 'class-to-class' &&
-      (SerializedGraph.INTERNAL_PROVIDERS.includes(
-        edgeDefinition.metadata.sourceClassToken,
-      ) ||
-        SerializedGraph.INTERNAL_PROVIDERS.includes(
-          edgeDefinition.metadata.targetClassToken,
-        ))
-    ) {
-      edgeDefinition.metadata = {
-        ...edgeDefinition.metadata,
-        internal: true,
-      };
-    }
-    const id =
-      edgeDefinition.id ?? this.generateUuidByEdgeDefinition(edgeDefinition);
-    const edge = {
-      ...edgeDefinition,
-      id,
-    };
-    this.edges.set(id, edge);
-    return edge;
-  }
-
-  public insertEntrypoint<T>(definition: Entrypoint<T>, parentId: string) {
-    if (this.entrypoints.has(parentId)) {
-      const existingCollection = this.entrypoints.get(parentId);
-      existingCollection.push(definition);
-    } else {
-      this.entrypoints.set(parentId, [definition]);
-    }
-  }
-
-  public insertOrphanedEnhancer(entry: OrphanedEnhancerDefinition) {
-    this.extras.orphanedEnhancers.push(entry);
-  }
-
-  public insertAttachedEnhancer(nodeId: string) {
-    this.extras.attachedEnhancers.push({
-      nodeId,
-    });
-  }
-
-  public getNodeById(id: string) {
-    return this.nodes.get(id);
-  }
-
-  public toJSON(): SerializedGraphJson {
-    const json: SerializedGraphJson = {
-      nodes: Object.fromEntries(this.nodes),
-      edges: Object.fromEntries(this.edges),
-      entrypoints: Object.fromEntries(this.entrypoints),
-      extras: this.extras,
-    };
-
-    if (this._status) {
-      json['status'] = this._status;
-    }
-    if (this._metadata) {
-      json['metadata'] = this._metadata;
-    }
-    return json;
-  }
-
-  public toString() {
-    const replacer = (key: string, value: unknown) => {
-      if (typeof value === 'symbol') {
-        return value.toString();
-      }
-      return typeof value === 'function' ? value.name ?? 'Function' : value;
-    };
-    return JSON.stringify(this.toJSON(), replacer, 2);
-  }
-
-  private generateUuidByEdgeDefinition(
-    edgeDefinition: WithOptionalId<Edge>,
-  ): string {
-    return DeterministicUuidRegistry.get(JSON.stringify(edgeDefinition));
-  }
-}
diff --git a/packages/core/inspector/uuid-factory.ts b/packages/core/inspector/uuid-factory.ts
deleted file mode 100644
index 1f89ad13d..000000000
--- a/packages/core/inspector/uuid-factory.ts
+++ /dev/null
@@ -1,21 +0,0 @@
-import { randomStringGenerator } from '@nestjs/common/utils/random-string-generator.util';
-import { DeterministicUuidRegistry } from './deterministic-uuid-registry';
-
-export enum UuidFactoryMode {
-  Random = 'random',
-  Deterministic = 'deterministic',
-}
-
-export class UuidFactory {
-  private static _mode = UuidFactoryMode.Random;
-
-  static set mode(value: UuidFactoryMode) {
-    this._mode = value;
-  }
-
-  static get(key = '') {
-    return this._mode === UuidFactoryMode.Deterministic
-      ? DeterministicUuidRegistry.get(key)
-      : randomStringGenerator();
-  }
-}
diff --git a/packages/core/interceptors/interceptors-consumer.ts b/packages/core/interceptors/interceptors-consumer.ts
index 22f6d096e..bcf3a5921 100644
--- a/packages/core/interceptors/interceptors-consumer.ts
+++ b/packages/core/interceptors/interceptors-consumer.ts
@@ -24,16 +24,19 @@ export class InterceptorsConsumer {
     const context = this.createContext(args, instance, callback);
     context.setType<TContext>(type);
 
-    const nextFn = async (i = 0) => {
-      if (i >= interceptors.length) {
-        return this.transformDeferred(next);
-      }
-      const handler: CallHandler = {
-        handle: () => fromPromise(nextFn(i + 1)).pipe(mergeAll()),
+    const start$ = defer(() => this.transformDeferred(next));
+    const nextFn =
+      (i = 0) =>
+      async () => {
+        if (i >= interceptors.length) {
+          return start$;
+        }
+        const handler: CallHandler = {
+          handle: () => fromPromise(nextFn(i + 1)()).pipe(mergeAll()),
+        };
+        return interceptors[i].intercept(context, handler);
       };
-      return interceptors[i].intercept(context, handler);
-    };
-    return defer(() => nextFn()).pipe(mergeAll());
+    return nextFn()();
   }
 
   public createContext(
diff --git a/packages/core/interceptors/interceptors-context-creator.ts b/packages/core/interceptors/interceptors-context-creator.ts
index b05dcb445..abc7dc903 100644
--- a/packages/core/interceptors/interceptors-context-creator.ts
+++ b/packages/core/interceptors/interceptors-context-creator.ts
@@ -74,7 +74,7 @@ export class InterceptorsContextCreator extends ContextCreator {
       return null;
     }
     const instanceHost = instanceWrapper.getInstanceByContextId(
-      this.getContextId(contextId, instanceWrapper),
+      contextId,
       inquirerId,
     );
     return instanceHost && instanceHost.instance;
@@ -108,12 +108,7 @@ export class InterceptorsContextCreator extends ContextCreator {
     const scopedInterceptorWrappers =
       this.config.getGlobalRequestInterceptors() as InstanceWrapper[];
     const scopedInterceptors = iterate(scopedInterceptorWrappers)
-      .map(wrapper =>
-        wrapper.getInstanceByContextId(
-          this.getContextId(contextId, wrapper),
-          inquirerId,
-        ),
-      )
+      .map(wrapper => wrapper.getInstanceByContextId(contextId, inquirerId))
       .filter(host => !!host)
       .map(host => host.instance)
       .toArray();
diff --git a/packages/core/metadata-scanner.ts b/packages/core/metadata-scanner.ts
index 400764e00..7365a7038 100644
--- a/packages/core/metadata-scanner.ts
+++ b/packages/core/metadata-scanner.ts
@@ -4,115 +4,36 @@ import {
   isFunction,
   isNil,
 } from '@nestjs/common/utils/shared.utils';
+import { iterate } from 'iterare';
 
 export class MetadataScanner {
-  private readonly cachedScannedPrototypes: Map<object, string[]> = new Map();
-
-  /**
-   * @deprecated 
-   * @see {@link getAllMethodNames}
-   * @see getAllMethodNames
-   */
   public scanFromPrototype<T extends Injectable, R = any>(
     instance: T,
     prototype: object,
     callback: (name: string) => R,
   ): R[] {
-    if (!prototype) {
-      return [];
-    }
-
-    const visitedNames = new Map<string, boolean>();
-    const result: R[] = [];
-
-    do {
-      for (const property of Object.getOwnPropertyNames(prototype)) {
-        if (visitedNames.has(property)) {
-          continue;
-        }
-
-        visitedNames.set(property, true);
-
-        // reason: https://github.com/nestjs/nest/pull/10821#issuecomment-1411916533
-        const descriptor = Object.getOwnPropertyDescriptor(prototype, property);
-
-        if (
-          descriptor.set ||
-          descriptor.get ||
-          isConstructor(property) ||
-          !isFunction(prototype[property])
-        ) {
-          continue;
-        }
-
-        const value = callback(property);
-
-        if (isNil(value)) {
-          continue;
-        }
-
-        result.push(value);
-      }
-    } while (
-      (prototype = Reflect.getPrototypeOf(prototype)) &&
-      prototype !== Object.prototype
-    );
-
-    return result;
-  }
-
-  /**
-   * @deprecated 
-   * @see {@link getAllMethodNames}
-   * @see getAllMethodNames
-   */
-  public *getAllFilteredMethodNames(
-    prototype: object,
-  ): IterableIterator<string> {
-    yield* this.getAllMethodNames(prototype);
+    const methodNames = new Set(this.getAllFilteredMethodNames(prototype));
+    return iterate(methodNames)
+      .map(callback)
+      .filter(metadata => !isNil(metadata))
+      .toArray();
   }
 
-  public getAllMethodNames(prototype: object | null): string[] {
-    if (!prototype) {
-      return [];
-    }
-
-    if (this.cachedScannedPrototypes.has(prototype)) {
-      return this.cachedScannedPrototypes.get(prototype);
-    }
-
-    const visitedNames = new Map<string, boolean>();
-    const result: string[] = [];
-
-    this.cachedScannedPrototypes.set(prototype, result);
-
-    do {
-      for (const property of Object.getOwnPropertyNames(prototype)) {
-        if (visitedNames.has(property)) {
-          continue;
-        }
-
-        visitedNames.set(property, true);
-
-        // reason: https://github.com/nestjs/nest/pull/10821#issuecomment-1411916533
-        const descriptor = Object.getOwnPropertyDescriptor(prototype, property);
-
-        if (
-          descriptor.set ||
-          descriptor.get ||
-          isConstructor(property) ||
-          !isFunction(prototype[property])
-        ) {
-          continue;
-        }
-
-        result.push(property);
+  *getAllFilteredMethodNames(prototype: object): IterableIterator<string> {
+    const isMethod = (prop: string) => {
+      const descriptor = Object.getOwnPropertyDescriptor(prototype, prop);
+      if (descriptor.set || descriptor.get) {
+        return false;
       }
+      return !isConstructor(prop) && isFunction(prototype[prop]);
+    };
+    do {
+      yield* iterate(Object.getOwnPropertyNames(prototype))
+        .filter(isMethod)
+        .toArray();
     } while (
       (prototype = Reflect.getPrototypeOf(prototype)) &&
       prototype !== Object.prototype
     );
-
-    return result;
   }
 }
diff --git a/packages/core/middleware/builder.ts b/packages/core/middleware/builder.ts
index ce347a143..8cbed802a 100644
--- a/packages/core/middleware/builder.ts
+++ b/packages/core/middleware/builder.ts
@@ -6,11 +6,10 @@ import {
 } from '@nestjs/common/interfaces';
 import {
   MiddlewareConfigProxy,
-  MiddlewareConfiguration,
   RouteInfo,
+  MiddlewareConfiguration,
 } from '@nestjs/common/interfaces/middleware';
 import { iterate } from 'iterare';
-import { RouteInfoPathExtractor } from './route-info-path-extractor';
 import { RoutesMapper } from './routes-mapper';
 import { filterMiddleware } from './utils';
 
@@ -20,17 +19,12 @@ export class MiddlewareBuilder implements MiddlewareConsumer {
   constructor(
     private readonly routesMapper: RoutesMapper,
     private readonly httpAdapter: HttpServer,
-    private readonly routeInfoPathExtractor: RouteInfoPathExtractor,
   ) {}
 
   public apply(
     ...middleware: Array<Type<any> | Function | any>
   ): MiddlewareConfigProxy {
-    return new MiddlewareBuilder.ConfigProxy(
-      this,
-      flatten(middleware),
-      this.routeInfoPathExtractor,
-    );
+    return new MiddlewareBuilder.ConfigProxy(this, flatten(middleware));
   }
 
   public build(): MiddlewareConfiguration[] {
@@ -47,7 +41,6 @@ export class MiddlewareBuilder implements MiddlewareConsumer {
     constructor(
       private readonly builder: MiddlewareBuilder,
       private readonly middleware: Array<Type<any> | Function | any>,
-      private routeInfoPathExtractor: RouteInfoPathExtractor,
     ) {}
 
     public getExcludedRoutes(): RouteInfo[] {
@@ -57,10 +50,7 @@ export class MiddlewareBuilder implements MiddlewareConsumer {
     public exclude(
       ...routes: Array<string | RouteInfo>
     ): MiddlewareConfigProxy {
-      this.excludedRoutes = this.getRoutesFlatList(routes).map(route => ({
-        ...route,
-        path: this.routeInfoPathExtractor.extractPathFrom(route),
-      }));
+      this.excludedRoutes = this.getRoutesFlatList(routes);
       return this;
     }
 
diff --git a/packages/core/middleware/container.ts b/packages/core/middleware/container.ts
index 5544f6827..de8dc214b 100644
--- a/packages/core/middleware/container.ts
+++ b/packages/core/middleware/container.ts
@@ -1,14 +1,15 @@
-import { InjectionToken, Type } from '@nestjs/common';
+import { Type } from '@nestjs/common';
 import { MiddlewareConfiguration } from '@nestjs/common/interfaces/middleware/middleware-configuration.interface';
 import { getClassScope } from '../helpers/get-class-scope';
 import { isDurable } from '../helpers/is-durable';
 import { NestContainer } from '../injector/container';
 import { InstanceWrapper } from '../injector/instance-wrapper';
+import { InstanceToken } from '../injector/module';
 
 export class MiddlewareContainer {
   private readonly middleware = new Map<
     string,
-    Map<InjectionToken, InstanceWrapper>
+    Map<InstanceToken, InstanceWrapper>
   >();
   private readonly configurationSets = new Map<
     string,
@@ -19,7 +20,7 @@ export class MiddlewareContainer {
 
   public getMiddlewareCollection(
     moduleKey: string,
-  ): Map<InjectionToken, InstanceWrapper> {
+  ): Map<InstanceToken, InstanceWrapper> {
     if (!this.middleware.has(moduleKey)) {
       const moduleRef = this.container.getModuleByKey(moduleKey);
       this.middleware.set(moduleKey, moduleRef.middlewares);
@@ -46,7 +47,7 @@ export class MiddlewareContainer {
         new InstanceWrapper({
           scope: getClassScope(metatype),
           durable: isDurable(metatype),
-          name: token?.name ?? token,
+          name: token,
           metatype,
           token,
         }),
diff --git a/packages/core/middleware/middleware-module.ts b/packages/core/middleware/middleware-module.ts
index 627ede62b..777f58964 100644
--- a/packages/core/middleware/middleware-module.ts
+++ b/packages/core/middleware/middleware-module.ts
@@ -1,12 +1,14 @@
-import { HttpServer, InjectionToken, Logger } from '@nestjs/common';
+import { HttpServer, VersioningType } from '@nestjs/common';
 import { RequestMethod } from '@nestjs/common/enums/request-method.enum';
 import {
   MiddlewareConfiguration,
-  NestMiddleware,
   RouteInfo,
+  NestMiddleware,
 } from '@nestjs/common/interfaces/middleware';
-import { NestApplicationContextOptions } from '@nestjs/common/interfaces/nest-application-context-options.interface';
-import { isUndefined } from '@nestjs/common/utils/shared.utils';
+import {
+  addLeadingSlash,
+  isUndefined,
+} from '@nestjs/common/utils/shared.utils';
 import { ApplicationConfig } from '../application-config';
 import { InvalidMiddlewareException } from '../errors/exceptions/invalid-middleware.exception';
 import { RuntimeException } from '../errors/exceptions/runtime.exception';
@@ -15,39 +17,31 @@ import { ExecutionContextHost } from '../helpers/execution-context-host';
 import { STATIC_CONTEXT } from '../injector/constants';
 import { NestContainer } from '../injector/container';
 import { Injector } from '../injector/injector';
-import { ContextId, InstanceWrapper } from '../injector/instance-wrapper';
-import { Module } from '../injector/module';
-import { GraphInspector } from '../inspector/graph-inspector';
-import {
-  Entrypoint,
-  MiddlewareEntrypointMetadata,
-} from '../inspector/interfaces/entrypoint.interface';
+import { InstanceWrapper } from '../injector/instance-wrapper';
+import { InstanceToken, Module } from '../injector/module';
 import { REQUEST_CONTEXT_ID } from '../router/request/request-constants';
+import { RoutePathFactory } from '../router/route-path-factory';
 import { RouterExceptionFilters } from '../router/router-exception-filters';
 import { RouterProxy } from '../router/router-proxy';
-import { isRequestMethodAll } from '../router/utils';
+import { isRequestMethodAll, isRouteExcluded } from '../router/utils';
 import { MiddlewareBuilder } from './builder';
 import { MiddlewareContainer } from './container';
 import { MiddlewareResolver } from './resolver';
-import { RouteInfoPathExtractor } from './route-info-path-extractor';
 import { RoutesMapper } from './routes-mapper';
 
-export class MiddlewareModule<
-  TAppOptions extends NestApplicationContextOptions = NestApplicationContextOptions,
-> {
+export class MiddlewareModule {
   private readonly routerProxy = new RouterProxy();
   private readonly exceptionFiltersCache = new WeakMap();
-  private readonly logger = new Logger(MiddlewareModule.name);
 
   private injector: Injector;
   private routerExceptionFilter: RouterExceptionFilters;
   private routesMapper: RoutesMapper;
   private resolver: MiddlewareResolver;
+  private config: ApplicationConfig;
   private container: NestContainer;
   private httpAdapter: HttpServer;
-  private graphInspector: GraphInspector;
-  private appOptions: TAppOptions;
-  private routeInfoPathExtractor: RouteInfoPathExtractor;
+
+  constructor(private readonly routePathFactory: RoutePathFactory) {}
 
   public async register(
     middlewareContainer: MiddlewareContainer,
@@ -55,11 +49,7 @@ export class MiddlewareModule<
     config: ApplicationConfig,
     injector: Injector,
     httpAdapter: HttpServer,
-    graphInspector: GraphInspector,
-    options: TAppOptions,
   ) {
-    this.appOptions = options;
-
     const appRef = container.getHttpAdapterRef();
     this.routerExceptionFilter = new RouterExceptionFilters(
       container,
@@ -67,12 +57,12 @@ export class MiddlewareModule<
       appRef,
     );
     this.routesMapper = new RoutesMapper(container);
-    this.resolver = new MiddlewareResolver(middlewareContainer, injector);
-    this.routeInfoPathExtractor = new RouteInfoPathExtractor(config);
+    this.resolver = new MiddlewareResolver(middlewareContainer);
+
+    this.config = config;
     this.injector = injector;
     this.container = container;
     this.httpAdapter = httpAdapter;
-    this.graphInspector = graphInspector;
 
     const modules = container.getModules();
     await this.resolveMiddleware(middlewareContainer, modules);
@@ -105,19 +95,8 @@ export class MiddlewareModule<
     const middlewareBuilder = new MiddlewareBuilder(
       this.routesMapper,
       this.httpAdapter,
-      this.routeInfoPathExtractor,
     );
-    try {
-      await instance.configure(middlewareBuilder);
-    } catch (err) {
-      if (!this.appOptions.preview) {
-        throw err;
-      }
-      const warningMessage =
-        `Warning! "${moduleRef.name}" module exposes a "configure" method that throws an exception in the preview mode` +
-        ` (possibly due to missing dependencies). Note: you can ignore this message, just be aware that some of those conditional middlewares will not be reflected in your graph.`;
-      this.logger.warn(warningMessage);
-    }
+    await instance.configure(middlewareBuilder);
 
     if (!(middlewareBuilder instanceof MiddlewareBuilder)) {
       return;
@@ -195,30 +174,6 @@ export class MiddlewareModule<
       if (instanceWrapper.isTransient) {
         return;
       }
-      this.graphInspector.insertClassNode(
-        moduleRef,
-        instanceWrapper,
-        'middleware',
-      );
-      const middlewareDefinition: Entrypoint<MiddlewareEntrypointMetadata> = {
-        type: 'middleware',
-        methodName: 'use',
-        className: instanceWrapper.name,
-        classNodeId: instanceWrapper.id,
-        metadata: {
-          key: routeInfo.path,
-          path: routeInfo.path,
-          requestMethod:
-            (RequestMethod[routeInfo.method] as keyof typeof RequestMethod) ??
-            'ALL',
-          version: routeInfo.version,
-        },
-      };
-      this.graphInspector.insertEntrypointDefinition(
-        middlewareDefinition,
-        instanceWrapper.id,
-      );
-
       await this.bindHandler(
         instanceWrapper,
         applicationRef,
@@ -234,7 +189,7 @@ export class MiddlewareModule<
     applicationRef: HttpServer,
     routeInfo: RouteInfo,
     moduleRef: Module,
-    collection: Map<InjectionToken, InstanceWrapper>,
+    collection: Map<InstanceToken, InstanceWrapper>,
   ) {
     const { instance, metatype } = wrapper;
     if (isUndefined(instance?.use)) {
@@ -245,9 +200,6 @@ export class MiddlewareModule<
       const proxy = await this.createProxy(instance);
       return this.registerHandler(applicationRef, routeInfo, proxy);
     }
-
-    const isTreeDurable = wrapper.isDependencyTreeDurable();
-
     await this.registerHandler(
       applicationRef,
       routeInfo,
@@ -257,7 +209,19 @@ export class MiddlewareModule<
         next: () => void,
       ) => {
         try {
-          const contextId = this.getContextId(req, isTreeDurable);
+          const contextId = ContextIdFactory.getByRequest(req);
+          if (!req[REQUEST_CONTEXT_ID]) {
+            Object.defineProperty(req, REQUEST_CONTEXT_ID, {
+              value: contextId,
+              enumerable: false,
+              writable: false,
+              configurable: false,
+            });
+            this.container.registerRequestProvider(
+              contextId.getParent ? contextId.payload : req,
+              contextId,
+            );
+          }
           const contextInstance = await this.injector.loadPerContext(
             instance,
             moduleRef,
@@ -302,46 +266,56 @@ export class MiddlewareModule<
 
   private async registerHandler(
     applicationRef: HttpServer,
-    routeInfo: RouteInfo,
+    { path, method, version }: RouteInfo,
     proxy: <TRequest, TResponse>(
       req: TRequest,
       res: TResponse,
       next: () => void,
     ) => void,
   ) {
-    const { method } = routeInfo;
-    const paths = this.routeInfoPathExtractor.extractPathsFrom(routeInfo);
+    const prefix = this.config.getGlobalPrefix();
+    const excludedRoutes = this.config.getGlobalPrefixOptions().exclude;
+    if (
+      (Array.isArray(excludedRoutes) &&
+        isRouteExcluded(excludedRoutes, path, method)) ||
+      ['*', '/*', '(.*)', '/(.*)'].includes(path)
+    ) {
+      path = addLeadingSlash(path);
+    } else {
+      const basePath = addLeadingSlash(prefix);
+      if (basePath?.endsWith('/') && path?.startsWith('/')) {
+        // strip slash when a wildcard is being used
+        // and global prefix has been set
+        path = path?.slice(1);
+      }
+      path = basePath + path;
+    }
+
+    const applicationVersioningConfig = this.config.getVersioning();
+    if (version && applicationVersioningConfig.type === VersioningType.URI) {
+      const versionPrefix = this.routePathFactory.getVersionPrefix(
+        applicationVersioningConfig,
+      );
+      path = `/${versionPrefix}${version.toString()}${path}`;
+    }
+
     const isMethodAll = isRequestMethodAll(method);
     const requestMethod = RequestMethod[method];
     const router = await applicationRef.createMiddlewareFactory(method);
-    const middlewareFunction = isMethodAll
-      ? proxy
-      : <TRequest, TResponse>(
-          req: TRequest,
-          res: TResponse,
-          next: () => void,
-        ) => {
-          if (applicationRef.getRequestMethod(req) === requestMethod) {
-            return proxy(req, res, next);
-          }
-          return next();
-        };
-    paths.forEach(path => router(path, middlewareFunction));
-  }
-
-  private getContextId(request: unknown, isTreeDurable: boolean): ContextId {
-    const contextId = ContextIdFactory.getByRequest(request);
-    if (!request[REQUEST_CONTEXT_ID]) {
-      Object.defineProperty(request, REQUEST_CONTEXT_ID, {
-        value: contextId,
-        enumerable: false,
-        writable: false,
-        configurable: false,
-      });
-
-      const requestProviderValue = isTreeDurable ? contextId.payload : request;
-      this.container.registerRequestProvider(requestProviderValue, contextId);
-    }
-    return contextId;
+    router(
+      path,
+      isMethodAll
+        ? proxy
+        : <TRequest, TResponse>(
+            req: TRequest,
+            res: TResponse,
+            next: () => void,
+          ) => {
+            if (applicationRef.getRequestMethod(req) === requestMethod) {
+              return proxy(req, res, next);
+            }
+            return next();
+          },
+    );
   }
 }
diff --git a/packages/core/middleware/resolver.ts b/packages/core/middleware/resolver.ts
index 99d02f418..168cd00c0 100644
--- a/packages/core/middleware/resolver.ts
+++ b/packages/core/middleware/resolver.ts
@@ -1,28 +1,26 @@
-import { InjectionToken } from '@nestjs/common';
 import { Injector } from '../injector/injector';
 import { InstanceWrapper } from '../injector/instance-wrapper';
-import { Module } from '../injector/module';
+import { InstanceToken, Module } from '../injector/module';
 import { MiddlewareContainer } from './container';
 
 export class MiddlewareResolver {
-  constructor(
-    private readonly middlewareContainer: MiddlewareContainer,
-    private readonly injector: Injector,
-  ) {}
+  private readonly instanceLoader = new Injector();
+
+  constructor(private readonly middlewareContainer: MiddlewareContainer) {}
 
   public async resolveInstances(moduleRef: Module, moduleName: string) {
-    const middlewareMap =
+    const middleware =
       this.middlewareContainer.getMiddlewareCollection(moduleName);
     const resolveInstance = async (wrapper: InstanceWrapper) =>
-      this.resolveMiddlewareInstance(wrapper, middlewareMap, moduleRef);
-    await Promise.all([...middlewareMap.values()].map(resolveInstance));
+      this.resolveMiddlewareInstance(wrapper, middleware, moduleRef);
+    await Promise.all([...middleware.values()].map(resolveInstance));
   }
 
   private async resolveMiddlewareInstance(
     wrapper: InstanceWrapper,
-    middlewareMap: Map<InjectionToken, InstanceWrapper>,
+    middleware: Map<InstanceToken, InstanceWrapper>,
     moduleRef: Module,
   ) {
-    await this.injector.loadMiddleware(wrapper, middlewareMap, moduleRef);
+    await this.instanceLoader.loadMiddleware(wrapper, middleware, moduleRef);
   }
 }
diff --git a/packages/core/middleware/route-info-path-extractor.ts b/packages/core/middleware/route-info-path-extractor.ts
deleted file mode 100644
index c3d2bf8bf..000000000
--- a/packages/core/middleware/route-info-path-extractor.ts
+++ /dev/null
@@ -1,87 +0,0 @@
-import { VersioningType } from '@nestjs/common';
-import {
-  RouteInfo,
-  VersioningOptions,
-  VersionValue,
-} from '@nestjs/common/interfaces';
-import {
-  addLeadingSlash,
-  stripEndSlash,
-} from '@nestjs/common/utils/shared.utils';
-import { ApplicationConfig } from '../application-config';
-import { ExcludeRouteMetadata } from '../router/interfaces/exclude-route-metadata.interface';
-import { isRouteExcluded } from '../router/utils';
-import { RoutePathFactory } from './../router/route-path-factory';
-
-export class RouteInfoPathExtractor {
-  private routePathFactory: RoutePathFactory;
-  private readonly prefixPath: string;
-  private readonly excludedGlobalPrefixRoutes: ExcludeRouteMetadata[];
-  private readonly versioningConfig?: VersioningOptions;
-
-  constructor(private readonly applicationConfig: ApplicationConfig) {
-    this.routePathFactory = new RoutePathFactory(applicationConfig);
-    this.prefixPath = stripEndSlash(
-      addLeadingSlash(this.applicationConfig.getGlobalPrefix()),
-    );
-    this.excludedGlobalPrefixRoutes =
-      this.applicationConfig.getGlobalPrefixOptions().exclude;
-    this.versioningConfig = this.applicationConfig.getVersioning();
-  }
-
-  public extractPathsFrom({ path, method, version }: RouteInfo): string[] {
-    const versionPath = this.extractVersionPathFrom(version);
-
-    if (this.isAWildcard(path)) {
-      return Array.isArray(this.excludedGlobalPrefixRoutes)
-        ? [
-            this.prefixPath + versionPath + addLeadingSlash(path),
-            ...this.excludedGlobalPrefixRoutes.map(
-              route => versionPath + addLeadingSlash(route.path),
-            ),
-          ]
-        : [this.prefixPath + versionPath + addLeadingSlash(path)];
-    }
-
-    return [this.extractNonWildcardPathFrom({ path, method, version })];
-  }
-
-  public extractPathFrom(route: RouteInfo): string {
-    if (this.isAWildcard(route.path) && !route.version) {
-      return addLeadingSlash(route.path);
-    }
-
-    return this.extractNonWildcardPathFrom(route);
-  }
-
-  private isAWildcard(path: string): boolean {
-    return ['*', '/*', '/*/', '(.*)', '/(.*)'].includes(path);
-  }
-
-  private extractNonWildcardPathFrom({
-    path,
-    method,
-    version,
-  }: RouteInfo): string {
-    const versionPath = this.extractVersionPathFrom(version);
-
-    if (
-      Array.isArray(this.excludedGlobalPrefixRoutes) &&
-      isRouteExcluded(this.excludedGlobalPrefixRoutes, path, method)
-    ) {
-      return versionPath + addLeadingSlash(path);
-    }
-
-    return this.prefixPath + versionPath + addLeadingSlash(path);
-  }
-
-  private extractVersionPathFrom(version?: VersionValue): string {
-    if (!version || this.versioningConfig?.type !== VersioningType.URI)
-      return '';
-
-    const versionPrefix = this.routePathFactory.getVersionPrefix(
-      this.versioningConfig,
-    );
-    return addLeadingSlash(versionPrefix + version.toString());
-  }
-}
diff --git a/packages/core/middleware/routes-mapper.ts b/packages/core/middleware/routes-mapper.ts
index d6f98ec57..5309bb109 100644
--- a/packages/core/middleware/routes-mapper.ts
+++ b/packages/core/middleware/routes-mapper.ts
@@ -1,5 +1,5 @@
 import { MODULE_PATH, PATH_METADATA } from '@nestjs/common/constants';
-import { RouteInfo, Type } from '@nestjs/common/interfaces';
+import { RouteInfo, Type, VersionValue } from '@nestjs/common/interfaces';
 import {
   addLeadingSlash,
   isString,
@@ -8,14 +8,14 @@ import {
 import { NestContainer } from '../injector/container';
 import { Module } from '../injector/module';
 import { MetadataScanner } from '../metadata-scanner';
-import { PathsExplorer } from '../router/paths-explorer';
+import { RouterExplorer } from '../router/router-explorer';
 import { targetModulesByContainer } from '../router/router-module';
 
 export class RoutesMapper {
-  private readonly pathsExplorer: PathsExplorer;
+  private readonly routerExplorer: RouterExplorer;
 
   constructor(private readonly container: NestContainer) {
-    this.pathsExplorer = new PathsExplorer(new MetadataScanner());
+    this.routerExplorer = new RouterExplorer(new MetadataScanner(), container);
   }
 
   public mapRouteToRouteInfo(
@@ -37,7 +37,7 @@ export class RoutesMapper {
     return [
       {
         path: addLeadingSlash(routePath),
-        method: defaultRequestMethod as any,
+        method: defaultRequestMethod,
       },
     ];
   }
@@ -58,7 +58,7 @@ export class RoutesMapper {
     controller: Type<any>,
     routePath: string,
   ): RouteInfo[] {
-    const controllerPaths = this.pathsExplorer.scanForPaths(
+    const controllerPaths = this.routerExplorer.scanForPaths(
       Object.create(controller),
       controller.prototype,
     );
@@ -125,7 +125,7 @@ export class RoutesMapper {
     const modules = Array.from(modulesContainer.values()).filter(moduleRef =>
       moduleRefsSet.has(moduleRef),
     );
-    return modules.find(({ controllers }) => controllers.has(metatype));
+    return modules.find(({ routes }) => routes.has(metatype));
   }
 
   private getModulePath(
diff --git a/packages/core/middleware/utils.ts b/packages/core/middleware/utils.ts
index 7a23e24d0..19418afc8 100644
--- a/packages/core/middleware/utils.ts
+++ b/packages/core/middleware/utils.ts
@@ -1,33 +1,19 @@
 import { RequestMethod } from '@nestjs/common';
 import { HttpServer, RouteInfo, Type } from '@nestjs/common/interfaces';
-import {
-  addLeadingSlash,
-  isFunction,
-  isString,
-} from '@nestjs/common/utils/shared.utils';
+import { isFunction } from '@nestjs/common/utils/shared.utils';
 import { iterate } from 'iterare';
 import * as pathToRegexp from 'path-to-regexp';
-import { uid } from 'uid';
+import { v4 as uuid } from 'uuid';
 import { ExcludeRouteMetadata } from '../router/interfaces/exclude-route-metadata.interface';
 import { isRouteExcluded } from '../router/utils';
 
 export const mapToExcludeRoute = (
-  routes: (string | RouteInfo)[],
+  routes: RouteInfo[],
 ): ExcludeRouteMetadata[] => {
-  return routes.map(route => {
-    if (isString(route)) {
-      return {
-        path: route,
-        requestMethod: RequestMethod.ALL,
-        pathRegex: pathToRegexp(addLeadingSlash(route)),
-      };
-    }
-    return {
-      path: route.path,
-      requestMethod: route.method,
-      pathRegex: pathToRegexp(addLeadingSlash(route.path)),
-    };
-  });
+  return routes.map(({ path, method }) => ({
+    pathRegex: pathToRegexp(path),
+    requestMethod: method,
+  }));
 };
 
 export const filterMiddleware = <T extends Function | Type<any> = any>(
@@ -99,7 +85,7 @@ export function isMiddlewareClass(middleware: any): middleware is Type<any> {
   );
 }
 
-export function assignToken(metatype: Type<any>, token = uid(21)): Type<any> {
+export function assignToken(metatype: Type<any>, token = uuid()): Type<any> {
   Object.defineProperty(metatype, 'name', { value: token });
   return metatype;
 }
diff --git a/packages/core/nest-application-context.ts b/packages/core/nest-application-context.ts
index ac4d64957..d050b51d0 100644
--- a/packages/core/nest-application-context.ts
+++ b/packages/core/nest-application-context.ts
@@ -11,7 +11,6 @@ import {
   GetOrResolveOptions,
   Type,
 } from '@nestjs/common/interfaces';
-import { NestApplicationContextOptions } from '@nestjs/common/interfaces/nest-application-context-options.interface';
 import { isEmpty } from '@nestjs/common/utils/shared.utils';
 import { iterate } from 'iterare';
 import { MESSAGES } from './constants';
@@ -35,24 +34,19 @@ import { Module } from './injector/module';
 /**
  * @publicApi
  */
-export class NestApplicationContext<
-    TOptions extends NestApplicationContextOptions = NestApplicationContextOptions,
-  >
+export class NestApplicationContext
   extends AbstractInstanceResolver
   implements INestApplicationContext
 {
   protected isInitialized = false;
-  protected injector: Injector;
-  protected readonly logger = new Logger(NestApplicationContext.name, {
-    timestamp: true,
-  });
+  protected readonly injector = new Injector();
 
   private shouldFlushLogsOnOverride = false;
   private readonly activeShutdownSignals = new Array<string>();
   private readonly moduleCompiler = new ModuleCompiler();
   private shutdownCleanupRef?: (...args: unknown[]) => unknown;
   private _instanceLinksHost: InstanceLinksHost;
-  private _moduleRefsForHooksByDistance?: Array<Module>;
+  private _moduleRefsByDistance?: Array<Module>;
 
   protected get instanceLinksHost() {
     if (!this._instanceLinksHost) {
@@ -63,16 +57,10 @@ export class NestApplicationContext<
 
   constructor(
     protected readonly container: NestContainer,
-    protected readonly appOptions: TOptions = {} as TOptions,
-    private contextModule: Module = null,
     private readonly scope = new Array<Type<any>>(),
+    private contextModule: Module = null,
   ) {
     super();
-    this.injector = new Injector();
-
-    if (this.appOptions.preview) {
-      this.printInPreviewModeWarning();
-    }
   }
 
   public selectContextModule() {
@@ -100,12 +88,7 @@ export class NestApplicationContext<
     if (!selectedModule) {
       throw new UnknownModuleException();
     }
-    return new NestApplicationContext(
-      this.container,
-      this.appOptions,
-      selectedModule,
-      scope,
-    );
+    return new NestApplicationContext(this.container, scope, selectedModule);
   }
 
   /**
@@ -244,11 +227,11 @@ export class NestApplicationContext<
    * Terminates the application
    * @returns {Promise<void>}
    */
-  public async close(signal?: string): Promise<void> {
+  public async close(): Promise<void> {
     await this.callDestroyHook();
-    await this.callBeforeShutdownHook(signal);
+    await this.callBeforeShutdownHook();
     await this.dispose();
-    await this.callShutdownHook(signal);
+    await this.callShutdownHook();
     this.unsubscribeFromProcessSignals();
   }
 
@@ -323,20 +306,13 @@ export class NestApplicationContext<
    * @param {string[]} signals The system signals it should listen to
    */
   protected listenToShutdownSignals(signals: string[]) {
-    let receivedSignal = false;
     const cleanup = async (signal: string) => {
       try {
-        if (receivedSignal) {
-          // If we receive another signal while we're waiting
-          // for the server to stop, just ignore it.
-          return;
-        }
-        receivedSignal = true;
+        signals.forEach(sig => process.removeListener(sig, cleanup));
         await this.callDestroyHook();
         await this.callBeforeShutdownHook(signal);
         await this.dispose();
         await this.callShutdownHook(signal);
-        signals.forEach(sig => process.removeListener(sig, cleanup));
         process.kill(process.pid, signal);
       } catch (err) {
         Logger.error(
@@ -372,7 +348,7 @@ export class NestApplicationContext<
    * modules and its children.
    */
   protected async callInitHook(): Promise<void> {
-    const modulesSortedByDistance = this.getModulesToTriggerHooksOn();
+    const modulesSortedByDistance = this.getModulesSortedByDistance();
     for (const module of modulesSortedByDistance) {
       await callModuleInitHook(module);
     }
@@ -383,7 +359,7 @@ export class NestApplicationContext<
    * modules and its children.
    */
   protected async callDestroyHook(): Promise<void> {
-    const modulesSortedByDistance = this.getModulesToTriggerHooksOn();
+    const modulesSortedByDistance = this.getModulesSortedByDistance();
     for (const module of modulesSortedByDistance) {
       await callModuleDestroyHook(module);
     }
@@ -394,7 +370,7 @@ export class NestApplicationContext<
    * modules and its children.
    */
   protected async callBootstrapHook(): Promise<void> {
-    const modulesSortedByDistance = this.getModulesToTriggerHooksOn();
+    const modulesSortedByDistance = this.getModulesSortedByDistance();
     for (const module of modulesSortedByDistance) {
       await callModuleBootstrapHook(module);
     }
@@ -405,7 +381,7 @@ export class NestApplicationContext<
    * modules and children.
    */
   protected async callShutdownHook(signal?: string): Promise<void> {
-    const modulesSortedByDistance = this.getModulesToTriggerHooksOn();
+    const modulesSortedByDistance = this.getModulesSortedByDistance();
     for (const module of modulesSortedByDistance) {
       await callAppShutdownHook(module, signal);
     }
@@ -416,40 +392,22 @@ export class NestApplicationContext<
    * modules and children.
    */
   protected async callBeforeShutdownHook(signal?: string): Promise<void> {
-    const modulesSortedByDistance = this.getModulesToTriggerHooksOn();
+    const modulesSortedByDistance = this.getModulesSortedByDistance();
     for (const module of modulesSortedByDistance) {
       await callBeforeAppShutdownHook(module, signal);
     }
   }
 
-  protected assertNotInPreviewMode(methodName: string) {
-    if (this.appOptions.preview) {
-      const error = `Calling the "${methodName}" in the preview mode is not supported.`;
-      this.logger.error(error);
-      throw new Error(error);
-    }
-  }
-
-  private getModulesToTriggerHooksOn(): Module[] {
-    if (this._moduleRefsForHooksByDistance) {
-      return this._moduleRefsForHooksByDistance;
+  private getModulesSortedByDistance(): Module[] {
+    if (this._moduleRefsByDistance) {
+      return this._moduleRefsByDistance;
     }
     const modulesContainer = this.container.getModules();
     const compareFn = (a: Module, b: Module) => b.distance - a.distance;
-    const modulesSortedByDistance = Array.from(modulesContainer.values()).sort(
+
+    this._moduleRefsByDistance = Array.from(modulesContainer.values()).sort(
       compareFn,
     );
-
-    this._moduleRefsForHooksByDistance = this.appOptions?.preview
-      ? modulesSortedByDistance.filter(moduleRef => moduleRef.initOnPreview)
-      : modulesSortedByDistance;
-    return this._moduleRefsForHooksByDistance;
-  }
-
-  private printInPreviewModeWarning() {
-    this.logger.warn('------------------------------------------------');
-    this.logger.warn('Application is running in the PREVIEW mode!');
-    this.logger.warn('Providers/controllers will not be instantiated.');
-    this.logger.warn('------------------------------------------------');
+    return this._moduleRefsByDistance;
   }
 }
diff --git a/packages/core/nest-application.ts b/packages/core/nest-application.ts
index 3b25d5877..a06ee4c98 100644
--- a/packages/core/nest-application.ts
+++ b/packages/core/nest-application.ts
@@ -7,11 +7,13 @@ import {
   NestHybridApplicationOptions,
   NestInterceptor,
   PipeTransform,
+  RequestMethod,
   VersioningOptions,
   VersioningType,
   WebSocketAdapter,
 } from '@nestjs/common';
 import {
+  RouteInfo,
   GlobalPrefixOptions,
   NestApplicationOptions,
 } from '@nestjs/common/interfaces';
@@ -29,18 +31,18 @@ import {
 } from '@nestjs/common/utils/shared.utils';
 import { iterate } from 'iterare';
 import { platform } from 'os';
+import * as pathToRegexp from 'path-to-regexp';
 import { AbstractHttpAdapter } from './adapters';
 import { ApplicationConfig } from './application-config';
 import { MESSAGES } from './constants';
 import { optionalRequire } from './helpers/optional-require';
 import { NestContainer } from './injector/container';
-import { Injector } from './injector/injector';
-import { GraphInspector } from './inspector/graph-inspector';
 import { MiddlewareContainer } from './middleware/container';
 import { MiddlewareModule } from './middleware/middleware-module';
-import { mapToExcludeRoute } from './middleware/utils';
 import { NestApplicationContext } from './nest-application-context';
+import { ExcludeRouteMetadata } from './router/interfaces/exclude-route-metadata.interface';
 import { Resolver } from './router/interfaces/resolver.interface';
+import { RoutePathFactory } from './router/route-path-factory';
 import { RoutesResolver } from './router/routes-resolver';
 
 const { SocketModule } = optionalRequire(
@@ -56,10 +58,10 @@ const { MicroservicesModule } = optionalRequire(
  * @publicApi
  */
 export class NestApplication
-  extends NestApplicationContext<NestApplicationOptions>
+  extends NestApplicationContext
   implements INestApplication
 {
-  protected readonly logger = new Logger(NestApplication.name, {
+  private readonly logger = new Logger(NestApplication.name, {
     timestamp: true,
   });
   private readonly middlewareModule: MiddlewareModule;
@@ -78,20 +80,18 @@ export class NestApplication
     container: NestContainer,
     private readonly httpAdapter: HttpServer,
     private readonly config: ApplicationConfig,
-    private readonly graphInspector: GraphInspector,
-    appOptions: NestApplicationOptions = {},
+    private readonly appOptions: NestApplicationOptions = {},
   ) {
-    super(container, appOptions);
+    super(container);
 
     this.selectContextModule();
     this.registerHttpServer();
-    this.injector = new Injector({ preview: this.appOptions.preview });
-    this.middlewareModule = new MiddlewareModule();
+    this.middlewareModule = new MiddlewareModule(new RoutePathFactory(config));
+
     this.routesResolver = new RoutesResolver(
       this.container,
       this.config,
       this.injector,
-      this.graphInspector,
     );
   }
 
@@ -143,23 +143,15 @@ export class NestApplication
     this.registerWsModule();
 
     if (this.microservicesModule) {
-      this.microservicesModule.register(
-        this.container,
-        this.graphInspector,
-        this.config,
-        this.appOptions,
-      );
+      this.microservicesModule.register(this.container, this.config);
       this.microservicesModule.setupClients(this.container);
     }
-
     await this.middlewareModule.register(
       this.middlewareContainer,
       this.container,
       this.config,
       this.injector,
       this.httpAdapter,
-      this.graphInspector,
-      this.appOptions,
     );
   }
 
@@ -167,13 +159,7 @@ export class NestApplication
     if (!this.socketModule) {
       return;
     }
-    this.socketModule.register(
-      this.container,
-      this.config,
-      this.graphInspector,
-      this.appOptions,
-      this.httpServer,
-    );
+    this.socketModule.register(this.container, this.config, this.httpServer);
   }
 
   public async init(): Promise<this> {
@@ -231,7 +217,6 @@ export class NestApplication
     const instance = new NestMicroservice(
       this.container,
       microserviceOptions,
-      this.graphInspector,
       applicationConfig,
     );
     instance.registerListeners();
@@ -251,7 +236,6 @@ export class NestApplication
   }
 
   public async startAllMicroservices(): Promise<this> {
-    this.assertNotInPreviewMode('startAllMicroservices');
     await Promise.all(this.microservices.map(msvc => msvc.listen()));
     return this;
   }
@@ -261,20 +245,6 @@ export class NestApplication
     return this;
   }
 
-  public useBodyParser(...args: [any, any?]): this {
-    if (!('useBodyParser' in this.httpAdapter)) {
-      this.logger.warn('Your HTTP Adapter does not support `.useBodyParser`.');
-      return this;
-    }
-
-    const [parserType, ...otherArgs] = args;
-    const rawBody = !!this.appOptions.rawBody;
-
-    this.httpAdapter.useBodyParser(...[parserType, rawBody, ...otherArgs]);
-
-    return this;
-  }
-
   public enableCors(options?: CorsOptions | CorsOptionsDelegate<any>): void {
     this.httpAdapter.enableCors(options);
   }
@@ -289,7 +259,6 @@ export class NestApplication
   public async listen(port: number | string): Promise<any>;
   public async listen(port: number | string, hostname: string): Promise<any>;
   public async listen(port: number | string, ...args: any[]): Promise<any> {
-    this.assertNotInPreviewMode('listen');
     !this.isInitialized && (await this.init());
 
     return new Promise((resolve, reject) => {
@@ -367,9 +336,20 @@ export class NestApplication
   public setGlobalPrefix(prefix: string, options?: GlobalPrefixOptions): this {
     this.config.setGlobalPrefix(prefix);
     if (options) {
-      const exclude = options?.exclude
-        ? mapToExcludeRoute(options.exclude)
-        : [];
+      const exclude = options?.exclude.map(
+        (route: string | RouteInfo): ExcludeRouteMetadata => {
+          if (isString(route)) {
+            return {
+              requestMethod: RequestMethod.ALL,
+              pathRegex: pathToRegexp(addLeadingSlash(route)),
+            };
+          }
+          return {
+            requestMethod: route.method,
+            pathRegex: pathToRegexp(addLeadingSlash(route.path)),
+          };
+        },
+      );
       this.config.setGlobalPrefixOptions({
         ...options,
         exclude,
@@ -385,45 +365,21 @@ export class NestApplication
 
   public useGlobalFilters(...filters: ExceptionFilter[]): this {
     this.config.useGlobalFilters(...filters);
-    filters.forEach(item =>
-      this.graphInspector.insertOrphanedEnhancer({
-        subtype: 'filter',
-        ref: item,
-      }),
-    );
     return this;
   }
 
   public useGlobalPipes(...pipes: PipeTransform<any>[]): this {
     this.config.useGlobalPipes(...pipes);
-    pipes.forEach(item =>
-      this.graphInspector.insertOrphanedEnhancer({
-        subtype: 'pipe',
-        ref: item,
-      }),
-    );
     return this;
   }
 
   public useGlobalInterceptors(...interceptors: NestInterceptor[]): this {
     this.config.useGlobalInterceptors(...interceptors);
-    interceptors.forEach(item =>
-      this.graphInspector.insertOrphanedEnhancer({
-        subtype: 'interceptor',
-        ref: item,
-      }),
-    );
     return this;
   }
 
   public useGlobalGuards(...guards: CanActivate[]): this {
     this.config.useGlobalGuards(...guards);
-    guards.forEach(item =>
-      this.graphInspector.insertOrphanedEnhancer({
-        subtype: 'guard',
-        ref: item,
-      }),
-    );
     return this;
   }
 
diff --git a/packages/core/nest-factory.ts b/packages/core/nest-factory.ts
index 9d4c2c8f9..617b11a97 100644
--- a/packages/core/nest-factory.ts
+++ b/packages/core/nest-factory.ts
@@ -17,11 +17,7 @@ import { ExceptionsZone } from './errors/exceptions-zone';
 import { loadAdapter } from './helpers/load-adapter';
 import { rethrow } from './helpers/rethrow';
 import { NestContainer } from './injector/container';
-import { Injector } from './injector/injector';
 import { InstanceLoader } from './injector/instance-loader';
-import { GraphInspector } from './inspector/graph-inspector';
-import { NoopGraphInspector } from './inspector/noop-graph-inspector';
-import { UuidFactory, UuidFactoryMode } from './inspector/uuid-factory';
 import { MetadataScanner } from './metadata-scanner';
 import { NestApplication } from './nest-application';
 import { NestApplicationContext } from './nest-application-context';
@@ -67,7 +63,7 @@ export class NestFactoryStatic {
     options?: NestApplicationOptions,
   ): Promise<T>;
   public async create<T extends INestApplication = INestApplication>(
-    moduleCls: any,
+    module: any,
     serverOrOptions?: AbstractHttpAdapter | NestApplicationOptions,
     options?: NestApplicationOptions,
   ): Promise<T> {
@@ -77,25 +73,15 @@ export class NestFactoryStatic {
 
     const applicationConfig = new ApplicationConfig();
     const container = new NestContainer(applicationConfig);
-    const graphInspector = this.createGraphInspector(appOptions, container);
-
     this.setAbortOnError(serverOrOptions, options);
     this.registerLoggerConfiguration(appOptions);
 
-    await this.initialize(
-      moduleCls,
-      container,
-      graphInspector,
-      applicationConfig,
-      appOptions,
-      httpServer,
-    );
+    await this.initialize(module, container, applicationConfig, httpServer);
 
     const instance = new NestApplication(
       container,
       httpServer,
       applicationConfig,
-      graphInspector,
       appOptions,
     );
     const target = this.createNestInstance(instance);
@@ -105,14 +91,14 @@ export class NestFactoryStatic {
   /**
    * Creates an instance of NestMicroservice.
    *
-   * @param moduleCls Entry (root) application module class
+   * @param module Entry (root) application module class
    * @param options Optional microservice configuration
    *
    * @returns A promise that, when resolved,
    * contains a reference to the NestMicroservice instance.
    */
   public async createMicroservice<T extends object>(
-    moduleCls: any,
+    module: any,
     options?: NestMicroserviceOptions & T,
   ): Promise<INestMicroservice> {
     const { NestMicroservice } = loadPackage(
@@ -122,61 +108,39 @@ export class NestFactoryStatic {
     );
     const applicationConfig = new ApplicationConfig();
     const container = new NestContainer(applicationConfig);
-    const graphInspector = this.createGraphInspector(options, container);
-
     this.setAbortOnError(options);
     this.registerLoggerConfiguration(options);
 
-    await this.initialize(
-      moduleCls,
-      container,
-      graphInspector,
-      applicationConfig,
-      options,
-    );
+    await this.initialize(module, container, applicationConfig);
     return this.createNestInstance<INestMicroservice>(
-      new NestMicroservice(
-        container,
-        options,
-        graphInspector,
-        applicationConfig,
-      ),
+      new NestMicroservice(container, options, applicationConfig),
     );
   }
 
   /**
    * Creates an instance of NestApplicationContext.
    *
-   * @param moduleCls Entry (root) application module class
+   * @param module Entry (root) application module class
    * @param options Optional Nest application configuration
    *
    * @returns A promise that, when resolved,
    * contains a reference to the NestApplicationContext instance.
    */
   public async createApplicationContext(
-    moduleCls: any,
+    module: any,
     options?: NestApplicationContextOptions,
   ): Promise<INestApplicationContext> {
     const container = new NestContainer();
-    const graphInspector = this.createGraphInspector(options, container);
-
     this.setAbortOnError(options);
     this.registerLoggerConfiguration(options);
 
-    const applicationConfig = undefined;
-    await this.initialize(
-      moduleCls,
-      container,
-      graphInspector,
-      applicationConfig,
-      options,
-    );
+    await this.initialize(module, container);
 
     const modules = container.getModules().values();
     const root = modules.next().value;
 
     const context = this.createNestInstance<NestApplicationContext>(
-      new NestApplicationContext(container, options, root),
+      new NestApplicationContext(container, [], root),
     );
     if (this.autoFlushLogs) {
       context.flushLogsOnOverride();
@@ -191,26 +155,14 @@ export class NestFactoryStatic {
   private async initialize(
     module: any,
     container: NestContainer,
-    graphInspector: GraphInspector,
     config = new ApplicationConfig(),
-    options: NestApplicationContextOptions = {},
     httpServer: HttpServer = null,
   ) {
-    UuidFactory.mode = options.snapshot
-      ? UuidFactoryMode.Deterministic
-      : UuidFactoryMode.Random;
-
-    const injector = new Injector({ preview: options.preview });
-    const instanceLoader = new InstanceLoader(
-      container,
-      injector,
-      graphInspector,
-    );
+    const instanceLoader = new InstanceLoader(container);
     const metadataScanner = new MetadataScanner();
     const dependenciesScanner = new DependenciesScanner(
       container,
       metadataScanner,
-      graphInspector,
       config,
     );
     container.setHttpAdapter(httpServer);
@@ -347,15 +299,6 @@ export class NestFactoryStatic {
     });
     return proxy as unknown as T;
   }
-
-  private createGraphInspector(
-    appOptions: NestApplicationContextOptions,
-    container: NestContainer,
-  ) {
-    return appOptions?.snapshot
-      ? new GraphInspector(container)
-      : NoopGraphInspector;
-  }
 }
 
 /**
diff --git a/packages/core/package.json b/packages/core/package.json
index 99f801e00..928e5a8be 100644
--- a/packages/core/package.json
+++ b/packages/core/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/core",
-  "version": "9.4.0",
+  "version": "9.2.0",
   "description": "Nest - modern, fast, powerful node.js web framework (@core)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -30,12 +30,13 @@
     "@nuxtjs/opencollective": "0.3.2",
     "fast-safe-stringify": "2.1.1",
     "iterare": "1.2.1",
+    "object-hash": "3.0.0",
     "path-to-regexp": "3.2.0",
-    "tslib": "2.5.0",
-    "uid": "2.0.2"
+    "tslib": "2.4.1",
+    "uuid": "9.0.0"
   },
   "devDependencies": {
-    "@nestjs/common": "9.4.0"
+    "@nestjs/common": "9.2.0"
   },
   "peerDependencies": {
     "@nestjs/common": "^9.0.0",
diff --git a/packages/core/pipes/pipes-context-creator.ts b/packages/core/pipes/pipes-context-creator.ts
index fa8140237..7776f8552 100644
--- a/packages/core/pipes/pipes-context-creator.ts
+++ b/packages/core/pipes/pipes-context-creator.ts
@@ -64,7 +64,7 @@ export class PipesContextCreator extends ContextCreator {
       return null;
     }
     const instanceHost = instanceWrapper.getInstanceByContextId(
-      this.getContextId(contextId, instanceWrapper),
+      contextId,
       inquirerId,
     );
     return instanceHost && instanceHost.instance;
@@ -98,12 +98,7 @@ export class PipesContextCreator extends ContextCreator {
     const scopedPipeWrappers =
       this.config.getGlobalRequestPipes() as InstanceWrapper[];
     const scopedPipes = iterate(scopedPipeWrappers)
-      .map(wrapper =>
-        wrapper.getInstanceByContextId(
-          this.getContextId(contextId, wrapper),
-          inquirerId,
-        ),
-      )
+      .map(wrapper => wrapper.getInstanceByContextId(contextId, inquirerId))
       .filter(host => !!host)
       .map(host => host.instance)
       .toArray();
diff --git a/packages/core/repl/native-functions/debug-repl-fn.ts b/packages/core/repl/native-functions/debug-repl-fn.ts
index 2f1d4a97d..910941584 100644
--- a/packages/core/repl/native-functions/debug-repl-fn.ts
+++ b/packages/core/repl/native-functions/debug-repl-fn.ts
@@ -8,7 +8,7 @@ export class DebugReplFn extends ReplFunction {
   public fnDefinition: ReplFnDefinition = {
     name: 'debug',
     description:
-      'Print all registered modules as a list together with their controllers and providers.\nIf the argument is passed in, for example, "debug(MyModule)" then it will only print components of this specific module.',
+      'Print all registered modules as a list together with their controllers and providers. If the argument is passed in, for example, "debug(MyModule)" then it will only print components of this specific module.',
     signature: '(moduleCls?: ClassRef | string) => void',
   };
 
diff --git a/packages/core/repl/native-functions/methods-repl-fn.ts b/packages/core/repl/native-functions/methods-repl-fn.ts
index f44e1916e..3fb38e6ec 100644
--- a/packages/core/repl/native-functions/methods-repl-fn.ts
+++ b/packages/core/repl/native-functions/methods-repl-fn.ts
@@ -20,7 +20,9 @@ export class MethodsReplFn extends ReplFunction {
         ? Object.getPrototypeOf(this.ctx.app.get(token))
         : token?.prototype;
 
-    const methods = this.metadataScanner.getAllMethodNames(proto);
+    const methods = new Set(
+      this.metadataScanner.getAllFilteredMethodNames(proto),
+    );
 
     this.ctx.writeToStdout('\n');
     this.ctx.writeToStdout(`${clc.green('Methods')}:\n`);
diff --git a/packages/core/repl/repl-context.ts b/packages/core/repl/repl-context.ts
index e3f71b44f..4745b8f8e 100644
--- a/packages/core/repl/repl-context.ts
+++ b/packages/core/repl/repl-context.ts
@@ -127,15 +127,15 @@ export class ReplContext {
 
     this.nativeFunctions.set(nativeFunction.fnDefinition.name, nativeFunction);
 
-    nativeFunction.fnDefinition.aliases?.forEach(aliasName => {
+    nativeFunction.fnDefinition.aliases?.forEach(aliaseName => {
       const aliasNativeFunction: InstanceType<ReplFunctionClass> =
         Object.create(nativeFunction);
       aliasNativeFunction.fnDefinition = {
-        name: aliasName,
+        name: aliaseName,
         description: aliasNativeFunction.fnDefinition.description,
         signature: aliasNativeFunction.fnDefinition.signature,
       };
-      this.nativeFunctions.set(aliasName, aliasNativeFunction);
+      this.nativeFunctions.set(aliaseName, aliasNativeFunction);
       nativeFunctions.push(aliasNativeFunction);
     });
 
diff --git a/packages/core/repl/repl-logger.ts b/packages/core/repl/repl-logger.ts
index afaa04316..e6195269f 100644
--- a/packages/core/repl/repl-logger.ts
+++ b/packages/core/repl/repl-logger.ts
@@ -9,7 +9,6 @@ export class ReplLogger extends ConsoleLogger {
     RouterExplorer.name,
     NestApplication.name,
   ];
-
   log(_message: any, context?: string) {
     if (ReplLogger.ignoredContexts.includes(context)) {
       return;
diff --git a/packages/core/repl/repl-native-commands.ts b/packages/core/repl/repl-native-commands.ts
deleted file mode 100644
index 5cee6d9ff..000000000
--- a/packages/core/repl/repl-native-commands.ts
+++ /dev/null
@@ -1,50 +0,0 @@
-import type { REPLServer } from 'repl';
-
-/**
- * Displays a list of available commands in the REPL alongside with their
- * descriptions.
- * (c) This code was inspired by the 'help' command from Node.js core:
- * {@link https://github.com/nodejs/node/blob/58b60c1393dd65cd228a8b0084a19acd2c1d16aa/lib/repl.js#L1741-L1759}
- */
-function listAllCommands(replServer: REPLServer) {
-  Object.keys(replServer.commands)
-    .sort()
-    .forEach(name => {
-      const cmd = replServer.commands[name];
-      if (cmd) {
-        replServer.output.write(`${name}\t${cmd.help || ''}\n`);
-      }
-    });
-}
-
-export function defineDefaultCommandsOnRepl(replServer: REPLServer): void {
-  replServer.defineCommand('help', {
-    help: 'Show REPL options',
-    action(name?: string) {
-      this.clearBufferedCommand();
-
-      if (name) {
-        // Considering native commands before native nestjs injected functions.
-        const nativeCommandOrFunction =
-          this.commands[name] || this.context[name];
-        // NOTE: If the command was retrieve from the context, it will have a `help`
-        // getter property that outputs the helper message and returns undefined.
-        // But if the command was retrieve from the `commands` object, it will
-        // have a `help` property that returns the helper message.
-        const helpMessage = nativeCommandOrFunction?.help;
-        if (helpMessage) {
-          this.output.write(`${helpMessage}\n`);
-        }
-      } else {
-        listAllCommands(this);
-        this.output.write('\n\n');
-        this.context.help();
-        this.output.write(
-          '\nPress Ctrl+C to abort current expression, Ctrl+D to exit the REPL\n',
-        );
-      }
-
-      this.displayPrompt();
-    },
-  });
-}
diff --git a/packages/core/repl/repl.ts b/packages/core/repl/repl.ts
index 2e021a1e4..980dd652c 100644
--- a/packages/core/repl/repl.ts
+++ b/packages/core/repl/repl.ts
@@ -5,7 +5,6 @@ import { assignToObject } from './assign-to-object.util';
 import { REPL_INITIALIZED_MESSAGE } from './constants';
 import { ReplContext } from './repl-context';
 import { ReplLogger } from './repl-logger';
-import { defineDefaultCommandsOnRepl } from './repl-native-commands';
 
 export async function repl(module: Type | DynamicModule) {
   const app = await NestFactory.createApplicationContext(module, {
@@ -24,7 +23,5 @@ export async function repl(module: Type | DynamicModule) {
   });
   assignToObject(replServer.context, replContext.globalScope);
 
-  defineDefaultCommandsOnRepl(replServer);
-
   return replServer;
 }
diff --git a/packages/core/router/interfaces/exclude-route-metadata.interface.ts b/packages/core/router/interfaces/exclude-route-metadata.interface.ts
index b7f93b600..1c143512f 100644
--- a/packages/core/router/interfaces/exclude-route-metadata.interface.ts
+++ b/packages/core/router/interfaces/exclude-route-metadata.interface.ts
@@ -1,11 +1,6 @@
 import { RequestMethod } from '@nestjs/common';
 
 export interface ExcludeRouteMetadata {
-  /**
-   * Route path.
-   */
-  path: string;
-
   /**
    * Regular expression representing the route path.
    */
diff --git a/packages/core/router/paths-explorer.ts b/packages/core/router/paths-explorer.ts
deleted file mode 100644
index 34c9972eb..000000000
--- a/packages/core/router/paths-explorer.ts
+++ /dev/null
@@ -1,84 +0,0 @@
-import {
-  METHOD_METADATA,
-  PATH_METADATA,
-  VERSION_METADATA,
-} from '@nestjs/common/constants';
-import { RequestMethod } from '@nestjs/common/enums';
-import { Controller } from '@nestjs/common/interfaces/controllers/controller.interface';
-import { VersionValue } from '@nestjs/common/interfaces/version-options.interface';
-import {
-  addLeadingSlash,
-  isString,
-  isUndefined,
-} from '@nestjs/common/utils/shared.utils';
-import { MetadataScanner } from '../metadata-scanner';
-import { RouterProxyCallback } from './router-proxy';
-
-export interface RouteDefinition {
-  path: string[];
-  requestMethod: RequestMethod;
-  targetCallback: RouterProxyCallback;
-  methodName: string;
-  version?: VersionValue;
-}
-
-export class PathsExplorer {
-  constructor(private readonly metadataScanner: MetadataScanner) {}
-
-  public scanForPaths(
-    instance: Controller,
-    prototype?: object,
-  ): RouteDefinition[] {
-    const instancePrototype = isUndefined(prototype)
-      ? Object.getPrototypeOf(instance)
-      : prototype;
-
-    return this.metadataScanner
-      .getAllMethodNames(instancePrototype)
-      .reduce((acc, method) => {
-        const route = this.exploreMethodMetadata(
-          instance,
-          instancePrototype,
-          method,
-        );
-
-        if (route) {
-          acc.push(route);
-        }
-
-        return acc;
-      }, []);
-  }
-
-  public exploreMethodMetadata(
-    instance: Controller,
-    prototype: object,
-    methodName: string,
-  ): RouteDefinition | null {
-    const instanceCallback = instance[methodName];
-    const prototypeCallback = prototype[methodName];
-    const routePath = Reflect.getMetadata(PATH_METADATA, prototypeCallback);
-    if (isUndefined(routePath)) {
-      return null;
-    }
-    const requestMethod: RequestMethod = Reflect.getMetadata(
-      METHOD_METADATA,
-      prototypeCallback,
-    );
-    const version: VersionValue | undefined = Reflect.getMetadata(
-      VERSION_METADATA,
-      prototypeCallback,
-    );
-    const path = isString(routePath)
-      ? [addLeadingSlash(routePath)]
-      : routePath.map((p: string) => addLeadingSlash(p));
-
-    return {
-      path,
-      requestMethod,
-      targetCallback: instanceCallback,
-      methodName,
-      version,
-    };
-  }
-}
diff --git a/packages/core/router/router-explorer.ts b/packages/core/router/router-explorer.ts
index e7bbc6db1..b158fd181 100644
--- a/packages/core/router/router-explorer.ts
+++ b/packages/core/router/router-explorer.ts
@@ -1,5 +1,9 @@
 import { HttpServer } from '@nestjs/common';
-import { PATH_METADATA } from '@nestjs/common/constants';
+import {
+  METHOD_METADATA,
+  PATH_METADATA,
+  VERSION_METADATA,
+} from '@nestjs/common/constants';
 import { RequestMethod, VersioningType } from '@nestjs/common/enums';
 import { InternalServerErrorException } from '@nestjs/common/exceptions';
 import { Controller } from '@nestjs/common/interfaces/controllers/controller.interface';
@@ -8,12 +12,14 @@ import { VersionValue } from '@nestjs/common/interfaces/version-options.interfac
 import { Logger } from '@nestjs/common/services/logger.service';
 import {
   addLeadingSlash,
+  isString,
   isUndefined,
 } from '@nestjs/common/utils/shared.utils';
 import * as pathToRegexp from 'path-to-regexp';
 import { ApplicationConfig } from '../application-config';
 import { UnknownRequestMappingException } from '../errors/exceptions/unknown-request-mapping.exception';
-import { GuardsConsumer, GuardsContextCreator } from '../guards';
+import { GuardsConsumer } from '../guards/guards-consumer';
+import { GuardsContextCreator } from '../guards/guards-context-creator';
 import { ContextIdFactory } from '../helpers/context-id-factory';
 import { ExecutionContextHost } from '../helpers/execution-context-host';
 import {
@@ -26,20 +32,13 @@ import { NestContainer } from '../injector/container';
 import { Injector } from '../injector/injector';
 import { ContextId, InstanceWrapper } from '../injector/instance-wrapper';
 import { Module } from '../injector/module';
-import {
-  InterceptorsConsumer,
-  InterceptorsContextCreator,
-} from '../interceptors';
-import { GraphInspector } from '../inspector/graph-inspector';
-import {
-  Entrypoint,
-  HttpEntrypointMetadata,
-} from '../inspector/interfaces/entrypoint.interface';
+import { InterceptorsConsumer } from '../interceptors/interceptors-consumer';
+import { InterceptorsContextCreator } from '../interceptors/interceptors-context-creator';
 import { MetadataScanner } from '../metadata-scanner';
-import { PipesConsumer, PipesContextCreator } from '../pipes';
+import { PipesConsumer } from '../pipes/pipes-consumer';
+import { PipesContextCreator } from '../pipes/pipes-context-creator';
 import { ExceptionsFilter } from './interfaces/exceptions-filter.interface';
 import { RoutePathMetadata } from './interfaces/route-path-metadata.interface';
-import { PathsExplorer } from './paths-explorer';
 import { REQUEST_CONTEXT_ID } from './request/request-constants';
 import { RouteParamsFactory } from './route-params-factory';
 import { RoutePathFactory } from './route-path-factory';
@@ -56,7 +55,6 @@ export interface RouteDefinition {
 
 export class RouterExplorer {
   private readonly executionContextCreator: RouterExecutionContext;
-  private readonly pathsExplorer: PathsExplorer;
   private readonly routerMethodFactory = new RouterMethodFactory();
   private readonly logger = new Logger(RouterExplorer.name, {
     timestamp: true,
@@ -64,17 +62,14 @@ export class RouterExplorer {
   private readonly exceptionFiltersCache = new WeakMap();
 
   constructor(
-    metadataScanner: MetadataScanner,
+    private readonly metadataScanner: MetadataScanner,
     private readonly container: NestContainer,
-    private readonly injector: Injector,
-    private readonly routerProxy: RouterProxy,
-    private readonly exceptionsFilter: ExceptionsFilter,
-    config: ApplicationConfig,
-    private readonly routePathFactory: RoutePathFactory,
-    private readonly graphInspector: GraphInspector,
+    private readonly injector?: Injector,
+    private readonly routerProxy?: RouterProxy,
+    private readonly exceptionsFilter?: ExceptionsFilter,
+    private readonly config?: ApplicationConfig,
+    private readonly routePathFactory?: RoutePathFactory,
   ) {
-    this.pathsExplorer = new PathsExplorer(metadataScanner);
-
     const routeParamsFactory = new RouteParamsFactory();
     const pipesContextCreator = new PipesContextCreator(container, config);
     const pipesConsumer = new PipesConsumer();
@@ -106,7 +101,7 @@ export class RouterExplorer {
     routePathMetadata: RoutePathMetadata,
   ) {
     const { instance } = instanceWrapper;
-    const routerPaths = this.pathsExplorer.scanForPaths(instance);
+    const routerPaths = this.scanForPaths(instance);
     this.applyPathsToRouterProxy(
       applicationRef,
       routerPaths,
@@ -129,6 +124,53 @@ export class RouterExplorer {
     return [addLeadingSlash(path)];
   }
 
+  public scanForPaths(
+    instance: Controller,
+    prototype?: object,
+  ): RouteDefinition[] {
+    const instancePrototype = isUndefined(prototype)
+      ? Object.getPrototypeOf(instance)
+      : prototype;
+
+    return this.metadataScanner.scanFromPrototype<Controller, RouteDefinition>(
+      instance,
+      instancePrototype,
+      method => this.exploreMethodMetadata(instance, instancePrototype, method),
+    );
+  }
+
+  public exploreMethodMetadata(
+    instance: Controller,
+    prototype: object,
+    methodName: string,
+  ): RouteDefinition {
+    const instanceCallback = instance[methodName];
+    const prototypeCallback = prototype[methodName];
+    const routePath = Reflect.getMetadata(PATH_METADATA, prototypeCallback);
+    if (isUndefined(routePath)) {
+      return null;
+    }
+    const requestMethod: RequestMethod = Reflect.getMetadata(
+      METHOD_METADATA,
+      prototypeCallback,
+    );
+    const version: VersionValue | undefined = Reflect.getMetadata(
+      VERSION_METADATA,
+      prototypeCallback,
+    );
+    const path = isString(routePath)
+      ? [addLeadingSlash(routePath)]
+      : routePath.map((p: string) => addLeadingSlash(p));
+
+    return {
+      path,
+      requestMethod,
+      targetCallback: instanceCallback,
+      methodName,
+      version,
+    };
+  }
+
   public applyPathsToRouterProxy<T extends HttpServer>(
     router: T,
     routeDefinitions: RouteDefinition[],
@@ -213,31 +255,7 @@ export class RouterExplorer {
         routePathMetadata,
         requestMethod,
       );
-      pathsToRegister.forEach(path => {
-        const entrypointDefinition: Entrypoint<HttpEntrypointMetadata> = {
-          type: 'http-endpoint',
-          methodName,
-          className: instanceWrapper.name,
-          classNodeId: instanceWrapper.id,
-          metadata: {
-            key: path,
-            path,
-            requestMethod: RequestMethod[
-              requestMethod
-            ] as keyof typeof RequestMethod,
-            methodVersion: routePathMetadata.methodVersion as VersionValue,
-            controllerVersion:
-              routePathMetadata.controllerVersion as VersionValue,
-          },
-        };
-
-        routerMethodRef(path, routeHandler);
-
-        this.graphInspector.insertEntrypointDefinition<HttpEntrypointMetadata>(
-          entrypointDefinition,
-          instanceWrapper.id,
-        );
-      });
+      pathsToRegister.forEach(path => routerMethodRef(path, routeHandler));
 
       const pathsToLog = this.routePathFactory.create(
         {
@@ -292,13 +310,7 @@ export class RouterExplorer {
       for (const exp of hostRegExps) {
         const match = hostname.match(exp.regexp);
         if (match) {
-          if (exp.keys.length > 0) {
-            exp.keys.forEach((key, i) => (req.hosts[key.name] = match[i + 1]));
-          } else if (exp.regexp && match.groups) {
-            for (const groupName in match.groups) {
-              req.hosts[groupName] = match.groups[groupName];
-            }
-          }
+          exp.keys.forEach((key, i) => (req.hosts[key.name] = match[i + 1]));
           return handler(req, res, next);
         }
       }
@@ -361,16 +373,13 @@ export class RouterExplorer {
   ) {
     const { instance } = instanceWrapper;
     const collection = moduleRef.controllers;
-
-    const isTreeDurable = instanceWrapper.isDependencyTreeDurable();
-
     return async <TRequest extends Record<any, any>, TResponse>(
       req: TRequest,
       res: TResponse,
       next: () => void,
     ) => {
       try {
-        const contextId = this.getContextId(req, isTreeDurable);
+        const contextId = this.getContextId(req);
         const contextInstance = await this.injector.loadPerContext(
           instance,
           moduleRef,
@@ -406,7 +415,6 @@ export class RouterExplorer {
 
   private getContextId<T extends Record<any, unknown> = any>(
     request: T,
-    isTreeDurable: boolean,
   ): ContextId {
     const contextId = ContextIdFactory.getByRequest(request);
     if (!request[REQUEST_CONTEXT_ID as any]) {
@@ -416,9 +424,10 @@ export class RouterExplorer {
         writable: false,
         configurable: false,
       });
-
-      const requestProviderValue = isTreeDurable ? contextId.payload : request;
-      this.container.registerRequestProvider(requestProviderValue, contextId);
+      this.container.registerRequestProvider(
+        contextId.getParent ? contextId.payload : request,
+        contextId,
+      );
     }
     return contextId;
   }
diff --git a/packages/core/router/router-proxy.ts b/packages/core/router/router-proxy.ts
index 30087b0c1..c1384e545 100644
--- a/packages/core/router/router-proxy.ts
+++ b/packages/core/router/router-proxy.ts
@@ -22,7 +22,6 @@ export class RouterProxy {
       } catch (e) {
         const host = new ExecutionContextHost([req, res, next]);
         exceptionsHandler.next(e, host);
-        return res;
       }
     };
   }
@@ -47,7 +46,6 @@ export class RouterProxy {
       } catch (e) {
         const host = new ExecutionContextHost([req, res, next]);
         exceptionsHandler.next(e, host);
-        return res;
       }
     };
   }
diff --git a/packages/core/router/routes-resolver.ts b/packages/core/router/routes-resolver.ts
index e03ade389..1a0a1fc49 100644
--- a/packages/core/router/routes-resolver.ts
+++ b/packages/core/router/routes-resolver.ts
@@ -5,10 +5,10 @@ import {
   VERSION_METADATA,
 } from '@nestjs/common/constants';
 import {
-  Controller,
   HttpServer,
   Type,
   VersionValue,
+  Controller,
 } from '@nestjs/common/interfaces';
 import { Logger } from '@nestjs/common/services/logger.service';
 import { ApplicationConfig } from '../application-config';
@@ -19,7 +19,6 @@ import {
 import { NestContainer } from '../injector/container';
 import { Injector } from '../injector/injector';
 import { InstanceWrapper } from '../injector/instance-wrapper';
-import { GraphInspector } from '../inspector/graph-inspector';
 import { MetadataScanner } from '../metadata-scanner';
 import { Resolver } from './interfaces/resolver.interface';
 import { RoutePathMetadata } from './interfaces/route-path-metadata.interface';
@@ -41,7 +40,6 @@ export class RoutesResolver implements Resolver {
     private readonly container: NestContainer,
     private readonly applicationConfig: ApplicationConfig,
     private readonly injector: Injector,
-    graphInspector: GraphInspector,
   ) {
     const httpAdapterRef = container.getHttpAdapterRef();
     this.routerExceptionsFilter = new RouterExceptionFilters(
@@ -60,7 +58,6 @@ export class RoutesResolver implements Resolver {
       this.routerExceptionsFilter,
       this.applicationConfig,
       this.routePathFactory,
-      graphInspector,
     );
   }
 
diff --git a/packages/core/router/utils/exclude-route.util.ts b/packages/core/router/utils/exclude-route.util.ts
index 8670f18f4..798260bf2 100644
--- a/packages/core/router/utils/exclude-route.util.ts
+++ b/packages/core/router/utils/exclude-route.util.ts
@@ -1,5 +1,4 @@
 import { RequestMethod } from '@nestjs/common';
-import { addLeadingSlash } from '@nestjs/common/utils/shared.utils';
 import { ExcludeRouteMetadata } from '../interfaces/exclude-route-metadata.interface';
 
 export const isRequestMethodAll = (method: RequestMethod) => {
@@ -16,7 +15,7 @@ export function isRouteExcluded(
       isRequestMethodAll(route.requestMethod) ||
       route.requestMethod === requestMethod
     ) {
-      return route.pathRegex.exec(addLeadingSlash(path));
+      return route.pathRegex.exec(path);
     }
     return false;
   });
diff --git a/packages/core/scanner.ts b/packages/core/scanner.ts
index f11f4432e..0bf28015f 100644
--- a/packages/core/scanner.ts
+++ b/packages/core/scanner.ts
@@ -1,9 +1,12 @@
-import { DynamicModule, ForwardReference, Provider } from '@nestjs/common';
+import {
+  DynamicModule,
+  flatten,
+  ForwardReference,
+  Provider,
+} from '@nestjs/common';
 import {
   CATCH_WATERMARK,
   CONTROLLER_WATERMARK,
-  EnhancerSubtype,
-  ENHANCER_KEY_TO_SUBTYPE_MAP,
   EXCEPTION_FILTERS_METADATA,
   GUARDS_METADATA,
   INJECTABLE_WATERMARK,
@@ -15,18 +18,19 @@ import {
 import {
   CanActivate,
   ClassProvider,
-  Controller,
   ExceptionFilter,
   ExistingProvider,
   FactoryProvider,
-  Injectable,
   InjectionToken,
   NestInterceptor,
   PipeTransform,
   Scope,
-  Type,
   ValueProvider,
 } from '@nestjs/common/interfaces';
+import { Controller } from '@nestjs/common/interfaces/controllers/controller.interface';
+import { Injectable } from '@nestjs/common/interfaces/injectable.interface';
+import { Type } from '@nestjs/common/interfaces/type.interface';
+import { randomStringGenerator } from '@nestjs/common/utils/random-string-generator.util';
 import {
   isFunction,
   isNil,
@@ -34,13 +38,7 @@ import {
 } from '@nestjs/common/utils/shared.utils';
 import { iterate } from 'iterare';
 import { ApplicationConfig } from './application-config';
-import {
-  APP_FILTER,
-  APP_GUARD,
-  APP_INTERCEPTOR,
-  APP_PIPE,
-  ENHANCER_TOKEN_TO_SUBTYPE_MAP,
-} from './constants';
+import { APP_FILTER, APP_GUARD, APP_INTERCEPTOR, APP_PIPE } from './constants';
 import { CircularDependencyException } from './errors/exceptions/circular-dependency.exception';
 import { InvalidClassModuleException } from './errors/exceptions/invalid-class-module.exception';
 import { InvalidModuleException } from './errors/exceptions/invalid-module.exception';
@@ -50,8 +48,6 @@ import { NestContainer } from './injector/container';
 import { InstanceWrapper } from './injector/instance-wrapper';
 import { InternalCoreModuleFactory } from './injector/internal-core-module/internal-core-module-factory';
 import { Module } from './injector/module';
-import { GraphInspector } from './inspector/graph-inspector';
-import { UuidFactory } from './inspector/uuid-factory';
 import { MetadataScanner } from './metadata-scanner';
 
 interface ApplicationProviderWrapper {
@@ -68,7 +64,6 @@ export class DependenciesScanner {
   constructor(
     private readonly container: NestContainer,
     private readonly metadataScanner: MetadataScanner,
-    private readonly graphInspector: GraphInspector,
     private readonly applicationConfig = new ApplicationConfig(),
   ) {}
 
@@ -216,15 +211,15 @@ export class DependenciesScanner {
     });
   }
 
-  public reflectDynamicMetadata(cls: Type<Injectable>, token: string) {
-    if (!cls || !cls.prototype) {
+  public reflectDynamicMetadata(obj: Type<Injectable>, token: string) {
+    if (!obj || !obj.prototype) {
       return;
     }
-    this.reflectInjectables(cls, token, GUARDS_METADATA);
-    this.reflectInjectables(cls, token, INTERCEPTORS_METADATA);
-    this.reflectInjectables(cls, token, EXCEPTION_FILTERS_METADATA);
-    this.reflectInjectables(cls, token, PIPES_METADATA);
-    this.reflectParamInjectables(cls, token, ROUTE_ARGS_METADATA);
+    this.reflectInjectables(obj, token, GUARDS_METADATA);
+    this.reflectInjectables(obj, token, INTERCEPTORS_METADATA);
+    this.reflectInjectables(obj, token, EXCEPTION_FILTERS_METADATA);
+    this.reflectInjectables(obj, token, PIPES_METADATA);
+    this.reflectParamInjectables(obj, token, ROUTE_ARGS_METADATA);
   }
 
   public reflectExports(module: Type<unknown>, token: string) {
@@ -245,45 +240,23 @@ export class DependenciesScanner {
     token: string,
     metadataKey: string,
   ) {
-    const controllerInjectables = this.reflectMetadata<Type<Injectable>>(
-      metadataKey,
-      component,
+    const controllerInjectables = this.reflectMetadata(metadataKey, component);
+    const methodsInjectables = this.metadataScanner.scanFromPrototype(
+      null,
+      component.prototype,
+      this.reflectKeyMetadata.bind(this, component, metadataKey),
     );
-    const methodInjectables = this.metadataScanner
-      .getAllMethodNames(component.prototype)
-      .reduce((acc, method) => {
-        const methodInjectable = this.reflectKeyMetadata(
-          component,
-          metadataKey,
-          method,
-        );
 
-        if (methodInjectable) {
-          acc.push(methodInjectable);
-        }
-
-        return acc;
-      }, []);
+    const flattenMethodsInjectables = this.flatten(methodsInjectables);
+    const combinedInjectables = [
+      ...controllerInjectables,
+      ...flattenMethodsInjectables,
+    ].filter(isFunction);
+    const injectables = Array.from(new Set(combinedInjectables));
 
-    controllerInjectables.forEach(injectable =>
-      this.insertInjectable(
-        injectable,
-        token,
-        component,
-        ENHANCER_KEY_TO_SUBTYPE_MAP[metadataKey],
-      ),
+    injectables.forEach(injectable =>
+      this.insertInjectable(injectable, token, component),
     );
-    methodInjectables.forEach(methodInjectable => {
-      methodInjectable.metadata.forEach(injectable =>
-        this.insertInjectable(
-          injectable,
-          token,
-          component,
-          ENHANCER_KEY_TO_SUBTYPE_MAP[metadataKey],
-          methodInjectable.methodKey,
-        ),
-      );
-    });
   }
 
   public reflectParamInjectables(
@@ -291,56 +264,32 @@ export class DependenciesScanner {
     token: string,
     metadataKey: string,
   ) {
-    const paramsMethods = this.metadataScanner.getAllMethodNames(
+    const paramsMetadata = this.metadataScanner.scanFromPrototype(
+      null,
       component.prototype,
+      method => Reflect.getMetadata(metadataKey, component, method),
+    );
+    const paramsInjectables = this.flatten(paramsMetadata).map(
+      (param: Record<string, any>) =>
+        flatten(Object.keys(param).map(k => param[k].pipes)).filter(isFunction),
+    );
+    flatten(paramsInjectables).forEach((injectable: Type<Injectable>) =>
+      this.insertInjectable(injectable, token, component),
     );
-
-    paramsMethods.forEach(methodKey => {
-      const metadata: Record<
-        string,
-        {
-          index: number;
-          data: unknown;
-          pipes: Array<Type<PipeTransform> | PipeTransform>;
-        }
-      > = Reflect.getMetadata(metadataKey, component, methodKey);
-
-      if (!metadata) {
-        return;
-      }
-
-      const params = Object.values(metadata);
-      params
-        .map(item => item.pipes)
-        .flat(1)
-        .forEach(injectable =>
-          this.insertInjectable(
-            injectable,
-            token,
-            component,
-            'pipe',
-            methodKey,
-          ),
-        );
-    });
   }
 
   public reflectKeyMetadata(
     component: Type<Injectable>,
     key: string,
-    methodKey: string,
-  ): { methodKey: string; metadata: any } | undefined {
+    method: string,
+  ) {
     let prototype = component.prototype;
     do {
-      const descriptor = Reflect.getOwnPropertyDescriptor(prototype, methodKey);
+      const descriptor = Reflect.getOwnPropertyDescriptor(prototype, method);
       if (!descriptor) {
         continue;
       }
-      const metadata = Reflect.getMetadata(key, descriptor.value);
-      if (!metadata) {
-        return;
-      }
-      return { methodKey, metadata };
+      return Reflect.getMetadata(key, descriptor.value);
     } while (
       (prototype = Reflect.getPrototypeOf(prototype)) &&
       prototype !== Object.prototype &&
@@ -349,7 +298,7 @@ export class DependenciesScanner {
     return undefined;
   }
 
-  public calculateModulesDistance() {
+  public async calculateModulesDistance() {
     const modulesGenerator = this.container.getModules().values();
 
     // Skip "InternalCoreModule" from calculating distance
@@ -357,7 +306,7 @@ export class DependenciesScanner {
 
     const modulesStack = [];
     const calculateDistance = (moduleRef: Module, distance = 1) => {
-      if (!moduleRef || modulesStack.includes(moduleRef)) {
+      if (modulesStack.includes(moduleRef)) {
         return;
       }
       modulesStack.push(moduleRef);
@@ -413,8 +362,9 @@ export class DependenciesScanner {
     if (!providersKeys.includes(type as string)) {
       return this.container.addProvider(provider as any, token);
     }
-    const uuid = UuidFactory.get(type.toString());
-    const providerToken = `${type as string} (UUID: ${uuid})`;
+    const providerToken = `${
+      type as string
+    } (UUID: ${randomStringGenerator()})`;
 
     let scope = (provider as ClassProvider | FactoryProvider).scope;
     if (isNil(scope) && (provider as ClassProvider).useClass) {
@@ -433,56 +383,21 @@ export class DependenciesScanner {
       scope,
     } as Provider;
 
-    const enhancerSubtype =
-      ENHANCER_TOKEN_TO_SUBTYPE_MAP[
-        type as
-          | typeof APP_GUARD
-          | typeof APP_PIPE
-          | typeof APP_FILTER
-          | typeof APP_INTERCEPTOR
-      ];
     const factoryOrClassProvider = newProvider as
       | FactoryProvider
       | ClassProvider;
     if (this.isRequestOrTransient(factoryOrClassProvider.scope)) {
-      return this.container.addInjectable(newProvider, token, enhancerSubtype);
+      return this.container.addInjectable(newProvider, token);
     }
-    this.container.addProvider(newProvider, token, enhancerSubtype);
+    this.container.addProvider(newProvider, token);
   }
 
   public insertInjectable(
-    injectable: Type<Injectable> | object,
+    injectable: Type<Injectable>,
     token: string,
     host: Type<Injectable>,
-    subtype: EnhancerSubtype,
-    methodKey?: string,
   ) {
-    if (isFunction(injectable)) {
-      const instanceWrapper = this.container.addInjectable(
-        injectable as Type,
-        token,
-        subtype,
-        host,
-      ) as InstanceWrapper;
-
-      this.graphInspector.insertEnhancerMetadataCache({
-        moduleToken: token,
-        classRef: host,
-        enhancerInstanceWrapper: instanceWrapper,
-        targetNodeId: instanceWrapper.id,
-        subtype,
-        methodKey,
-      });
-      return instanceWrapper;
-    } else {
-      this.graphInspector.insertEnhancerMetadataCache({
-        moduleToken: token,
-        classRef: host,
-        enhancerRef: injectable,
-        methodKey,
-        subtype,
-      });
-    }
+    this.container.addInjectable(injectable, token, host);
   }
 
   public insertExportedProvider(
@@ -496,10 +411,7 @@ export class DependenciesScanner {
     this.container.addController(controller, token);
   }
 
-  public reflectMetadata<T = any>(
-    metadataKey: string,
-    metatype: Type<any>,
-  ): T[] {
+  public reflectMetadata(metadataKey: string, metatype: Type<any>) {
     return Reflect.getMetadata(metadataKey, metatype) || [];
   }
 
@@ -509,7 +421,6 @@ export class DependenciesScanner {
       this,
       this.container.getModuleCompiler(),
       this.container.getHttpAdapterHostRef(),
-      this.graphInspector,
     );
     const [instance] = await this.scanForModules(moduleDefinition);
     this.container.registerCoreModuleRef(instance);
@@ -527,16 +438,11 @@ export class DependenciesScanner {
         const { injectables } = modulesContainer.get(moduleKey);
         const instanceWrapper = injectables.get(providerKey);
 
-        const iterableIterator = modulesContainer.values();
-        iterate(iterableIterator)
-          .map(moduleRef =>
-            Array.from<InstanceWrapper>(moduleRef.controllers.values()).concat(
-              moduleRef.entryProviders,
-            ),
-          )
+        iterate(modulesContainer.values())
+          .map(module => module.controllers.values())
           .flatten()
-          .forEach(controllerOrEntryProvider =>
-            controllerOrEntryProvider.addEnhancerMetadata(instanceWrapper),
+          .forEach(controller =>
+            controller.addEnhancerMetadata(instanceWrapper),
           );
       });
   }
@@ -565,8 +471,6 @@ export class DependenciesScanner {
             providerKey,
             'injectables',
           );
-
-          this.graphInspector.insertAttachedEnhancer(instanceWrapper);
           return applyRequestProvidersMap[type as string](instanceWrapper);
         }
         instanceWrapper = getInstanceWrapper(
@@ -574,7 +478,6 @@ export class DependenciesScanner {
           providerKey,
           'providers',
         );
-        this.graphInspector.insertAttachedEnhancer(instanceWrapper);
         applyProvidersMap[type as string](instanceWrapper.instance);
       },
     );
@@ -642,6 +545,10 @@ export class DependenciesScanner {
     return module && !!(module as ForwardReference).forwardRef;
   }
 
+  private flatten<T = any>(arr: T[][]): T[] {
+    return arr.flat(1);
+  }
+
   private isRequestOrTransient(scope: Scope): boolean {
     return scope === Scope.REQUEST || scope === Scope.TRANSIENT;
   }
diff --git a/packages/core/tsconfig.build.json b/packages/core/tsconfig.build.json
deleted file mode 100644
index 99c13372d..000000000
--- a/packages/core/tsconfig.build.json
+++ /dev/null
@@ -1,21 +0,0 @@
-{
-  "extends": "../tsconfig.build.json",
-  "compilerOptions": {
-    "outDir": ".",
-    "rootDir": ".",
-    "paths": {
-      "@nestjs/common": ["../common"],
-      "@nestjs/common/*": ["../common/*"],
-      "@nestjs/microservices": ["../microservices"],
-      "@nestjs/microservices/*": ["../microservices/*"],
-      "@nestjs/websockets": ["../websockets"],
-      "@nestjs/websockets/*": ["../websockets/*"]
-    }
-  },
-  "exclude": ["node_modules", "dist", "test/**/*", "*.spec.ts"],
-  "references": [
-    {
-      "path": "../common/tsconfig.build.json"
-    }
-  ]
-}
diff --git a/packages/core/tsconfig.json b/packages/core/tsconfig.json
index 2ae9e3c90..b238080a4 100644
--- a/packages/core/tsconfig.json
+++ b/packages/core/tsconfig.json
@@ -1,13 +1,7 @@
 {
-  "extends": "../tsconfig.build.json",
+  "extends": "./../tsconfig.base.json",
   "compilerOptions": {
-    "types": ["node"]
+    "baseUrl": "./"
   },
-  "files": [],
-  "include": [],
-  "references": [
-    {
-      "path": "./tsconfig.build.json"
-    }
-  ]
+  "include": ["*.ts", "**/*.ts"]
 }
diff --git a/packages/microservices/Readme.md b/packages/microservices/Readme.md
index 16f48336d..5203ac4c2 100644
--- a/packages/microservices/Readme.md
+++ b/packages/microservices/Readme.md
@@ -11,6 +11,7 @@
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/l/@nestjs/core.svg" alt="Package License" /></a>
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/dm/@nestjs/common.svg" alt="NPM Downloads" /></a>
 <a href="https://circleci.com/gh/nestjs/nest" target="_blank"><img src="https://img.shields.io/circleci/build/github/nestjs/nest/master" alt="CircleCI" /></a>
+<a href="https://coveralls.io/github/nestjs/nest?branch=master" target="_blank"><img src="https://coveralls.io/repos/github/nestjs/nest/badge.svg?branch=master#9" alt="Coverage" /></a>
 <a href="https://discord.gg/G7Qnnhy" target="_blank"><img src="https://img.shields.io/badge/discord-online-brightgreen.svg" alt="Discord"/></a>
 <a href="https://opencollective.com/nest#backer" target="_blank"><img src="https://opencollective.com/nest/backers/badge.svg" alt="Backers on Open Collective" /></a>
 <a href="https://opencollective.com/nest#sponsor" target="_blank"><img src="https://opencollective.com/nest/sponsors/badge.svg" alt="Sponsors on Open Collective" /></a>
@@ -77,10 +78,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
  <td>
 <a href="https://jetbrains.com/" target="_blank"><img src="https://nestjs.com/img/jetbrains-logo.svg" width="110" valign="middle" /></a></td><td>
 <a href="https://snyk.co/nestjs" target="_blank"><img src="https://nestjs.com/img/snyk-logo-black.png" width="185" valign="middle" /></a></td><td>
-<a href="https://fuseautotech.com/" target="_blank"><img src="https://nestjs.com/img/fuse-logo.svg" width="105" valign="middle" /></a></td>
-<td>
-<a href="https://ridicorp.com/career/" target="_blank"><img src="https://nestjs.com/img/ridi-logo.svg" width="105" valign="middle" /></a></td><td>
-<a href="https://www.movavi.com/imovie-for-windows.html" target="_blank"><img src="https://nestjs.com/img/movavi-logo.svg" width="105" valign="middle" /></a></td></</tr></table>
+<a href="https://fuseautotech.com/" target="_blank"><img src="https://nestjs.com/img/fuse-logo.svg" width="105" valign="middle" /></a></td></</tr></table>
 
 #### Silver Sponsors
 
@@ -93,8 +91,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
 <td><a href="https://www.tinystacks.com" target="_blank"><img src="https://nestjs.com/img/tinystacks-logo.png#1" width="140" valign="middle" /></td>
 <td><a href="https://n.inc" target="_blank"><img src="https://nestjs.com/img/n-inc-logo.svg" width="120" valign="middle" /></td></tr><tr>
 <td><a href="https://bilberrry.com/" target="_blank"><img src="https://nestjs.com/img/bilberrry-logo.svg" width="180" valign="middle" /></td>
-<td><a href="https://ipinfo.ai/" target="_blank"><img src="https://nestjs.com/img/ipinfo-logo.png" width="130" valign="middle" /></td>
-<td><a href="https://chax.at" target="_blank"><img src="https://nestjs.com/img/chaxat-logo.png" width="100" valign="middle" /></td></tr>
+<td><a href="https://ipinfo.ai/" target="_blank"><img src="https://nestjs.com/img/ipinfo-logo.png" width="130" valign="middle" /></td></tr>
 </table>
 
 #### Sponsors
@@ -135,8 +132,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
    <td align="center" valign="middle"><a href="https://mobilereality.pl/" target="_blank"><img src="https://nestjs.com/img/mobile-reality-logo.png" width="45" valign="middle" /></a></td>
      <td align="center" valign="middle"><a href="https://boringowl.io/" target="_blank"><img src="https://nestjs.com/img/boringowl-logo.svg" width="120" valign="middle" /></a></td>
  <td align="center" valign="middle"><a href="https://www.mobilefactory.jp/" target="_blank"><img src="https://nestjs.com/img/mobilefactory-logo.png" width="100" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://nordbot.app/" target="_blank"><img src="https://nestjs.com/img/nordbot-logo.png" width="120" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://doppio.sh/" target="_blank"><img src="https://nestjs.com/img/dopiosh-logo.png" width="50" valign="middle" /></a></td>
+ <td align="center" valign="middle"><a href="https://db.nordbot.app/" target="_blank"><img src="https://nestjs.com/img/nord-logo.png" width="50" valign="middle" /></a></td>
   </tr></table>
 
 ## Backers
diff --git a/packages/microservices/client/client-grpc.ts b/packages/microservices/client/client-grpc.ts
index a03c1e78d..3110ca0d4 100644
--- a/packages/microservices/client/client-grpc.ts
+++ b/packages/microservices/client/client-grpc.ts
@@ -14,9 +14,6 @@ import { ChannelOptions } from '../external/grpc-options.interface';
 let grpcPackage: any = {};
 let grpcProtoLoaderPackage: any = {};
 
-/**
- * @publicApi
- */
 export class ClientGrpcProxy extends ClientProxy implements ClientGrpc {
   protected readonly logger = new Logger(ClientProxy.name);
   protected readonly clients = new Map<string, any>();
diff --git a/packages/microservices/client/client-kafka.ts b/packages/microservices/client/client-kafka.ts
index 618993d6f..ba9ad099a 100644
--- a/packages/microservices/client/client-kafka.ts
+++ b/packages/microservices/client/client-kafka.ts
@@ -40,18 +40,15 @@ import { ClientProxy } from './client-proxy';
 
 let kafkaPackage: any = {};
 
-/**
- * @publicApi
- */
 export class ClientKafka extends ClientProxy {
   protected logger = new Logger(ClientKafka.name);
-  protected client: Kafka | null = null;
-  protected consumer: Consumer | null = null;
-  protected producer: Producer | null = null;
-  protected parser: KafkaParser | null = null;
-  protected initialized: Promise<void> | null = null;
+  protected client: Kafka = null;
+  protected consumer: Consumer = null;
+  protected producer: Producer = null;
+  protected parser: KafkaParser = null;
   protected responsePatterns: string[] = [];
   protected consumerAssignments: { [key: string]: number } = {};
+
   protected brokers: string[] | BrokersFunction;
   protected clientId: string;
   protected groupId: string;
@@ -60,22 +57,14 @@ export class ClientKafka extends ClientProxy {
   constructor(protected readonly options: KafkaOptions['options']) {
     super();
 
-    const clientOptions = this.getOptionsProp(
-      this.options,
-      'client',
-      {} as KafkaConfig,
-    );
-    const consumerOptions = this.getOptionsProp(
-      this.options,
-      'consumer',
-      {} as ConsumerConfig,
-    );
-    const postfixId = this.getOptionsProp(this.options, 'postfixId', '-client');
-    this.producerOnlyMode = this.getOptionsProp(
-      this.options,
-      'producerOnlyMode',
-      false,
-    );
+    const clientOptions =
+      this.getOptionsProp(this.options, 'client') || ({} as KafkaConfig);
+    const consumerOptions =
+      this.getOptionsProp(this.options, 'consumer') || ({} as ConsumerConfig);
+    const postfixId =
+      this.getOptionsProp(this.options, 'postfixId') ?? '-client';
+    this.producerOnlyMode =
+      this.getOptionsProp(this.options, 'producerOnlyMode') || false;
 
     this.brokers = clientOptions.brokers || [KAFKA_DEFAULT_BROKER];
 
@@ -105,56 +94,46 @@ export class ClientKafka extends ClientProxy {
     this.consumer && (await this.consumer.disconnect());
     this.producer = null;
     this.consumer = null;
-    this.initialized = null;
     this.client = null;
   }
 
   public async connect(): Promise<Producer> {
-    if (this.initialized) {
-      return this.initialized.then(() => this.producer);
+    if (this.client) {
+      return this.producer;
     }
-    this.initialized = new Promise(async (resolve, reject) => {
-      try {
-        this.client = this.createClient();
-
-        if (!this.producerOnlyMode) {
-          const partitionAssigners = [
-            (
-              config: ConstructorParameters<
-                typeof KafkaReplyPartitionAssigner
-              >[1],
-            ) => new KafkaReplyPartitionAssigner(this, config),
-          ];
-
-          const consumerOptions = Object.assign(
-            {
-              partitionAssigners,
-            },
-            this.options.consumer || {},
-            {
-              groupId: this.groupId,
-            },
-          );
+    this.client = this.createClient();
+
+    if (!this.producerOnlyMode) {
+      const partitionAssigners = [
+        (
+          config: ConstructorParameters<typeof KafkaReplyPartitionAssigner>[1],
+        ) => new KafkaReplyPartitionAssigner(this, config),
+      ] as any[];
+
+      const consumerOptions = Object.assign(
+        {
+          partitionAssigners,
+        },
+        this.options.consumer || {},
+        {
+          groupId: this.groupId,
+        },
+      );
 
-          this.consumer = this.client.consumer(consumerOptions);
-          // set member assignments on join and rebalance
-          this.consumer.on(
-            this.consumer.events.GROUP_JOIN,
-            this.setConsumerAssignments.bind(this),
-          );
-          await this.consumer.connect();
-          await this.bindTopics();
-        }
+      this.consumer = this.client.consumer(consumerOptions);
+      // set member assignments on join and rebalance
+      this.consumer.on(
+        this.consumer.events.GROUP_JOIN,
+        this.setConsumerAssignments.bind(this),
+      );
+      await this.consumer.connect();
+      await this.bindTopics();
+    }
 
-        this.producer = this.client.producer(this.options.producer || {});
-        await this.producer.connect();
+    this.producer = this.client.producer(this.options.producer || {});
+    await this.producer.connect();
 
-        resolve();
-      } catch (err) {
-        reject(err);
-      }
-    });
-    return this.initialized.then(() => this.producer);
+    return this.producer;
   }
 
   public async bindTopics(): Promise<void> {
diff --git a/packages/microservices/client/client-mqtt.ts b/packages/microservices/client/client-mqtt.ts
index c2e7c6cf3..44cf246b1 100644
--- a/packages/microservices/client/client-mqtt.ts
+++ b/packages/microservices/client/client-mqtt.ts
@@ -20,9 +20,6 @@ import { ClientProxy } from './client-proxy';
 
 let mqttPackage: any = {};
 
-/**
- * @publicApi
- */
 export class ClientMqtt extends ClientProxy {
   protected readonly logger = new Logger(ClientProxy.name);
   protected readonly subscriptionsCount = new Map<string, number>();
diff --git a/packages/microservices/client/client-nats.ts b/packages/microservices/client/client-nats.ts
index bf541cbbd..f85bf2e83 100644
--- a/packages/microservices/client/client-nats.ts
+++ b/packages/microservices/client/client-nats.ts
@@ -12,9 +12,6 @@ import { ClientProxy } from './client-proxy';
 
 let natsPackage = {} as any;
 
-/**
- * @publicApi
- */
 export class ClientNats extends ClientProxy {
   protected readonly logger = new Logger(ClientNats.name);
   protected natsClient: Client;
@@ -55,28 +52,17 @@ export class ClientNats extends ClientProxy {
         status.data && isObject(status.data)
           ? JSON.stringify(status.data)
           : status.data;
-
-      switch (status.type) {
-        case 'error':
-        case 'disconnect':
-          this.logger.error(
-            `NatsError: type: "${status.type}", data: "${data}".`,
-          );
-          break;
-
-        case 'pingTimer':
-          if (this.options.debug) {
-            this.logger.debug(
-              `NatsStatus: type: "${status.type}", data: "${data}".`,
-            );
-          }
-          break;
-
-        default:
-          this.logger.log(
-            `NatsStatus: type: "${status.type}", data: "${data}".`,
-          );
-          break;
+      if (status.type === 'disconnect' || status.type === 'error') {
+        this.logger.error(
+          `NatsError: type: "${status.type}", data: "${data}".`,
+        );
+      } else {
+        const message = `NatsStatus: type: "${status.type}", data: "${data}".`;
+        if (status.type === 'pingTimer') {
+          this.logger.debug(message);
+        } else {
+          this.logger.log(message);
+        }
       }
     }
   }
diff --git a/packages/microservices/client/client-proxy-factory.ts b/packages/microservices/client/client-proxy-factory.ts
index a19200990..f6bd89227 100644
--- a/packages/microservices/client/client-proxy-factory.ts
+++ b/packages/microservices/client/client-proxy-factory.ts
@@ -26,9 +26,6 @@ export interface IClientProxyFactory {
   create(clientOptions: ClientOptions): ClientProxy & Closeable;
 }
 
-/**
- * @publicApi
- */
 export class ClientProxyFactory {
   public static create(
     clientOptions: { transport: Transport.GRPC } & ClientOptions,
diff --git a/packages/microservices/client/client-proxy.ts b/packages/microservices/client/client-proxy.ts
index 3950cf3db..bdd3484d7 100644
--- a/packages/microservices/client/client-proxy.ts
+++ b/packages/microservices/client/client-proxy.ts
@@ -130,7 +130,7 @@ export abstract class ClientProxy {
     T extends ClientOptions['options'],
     K extends keyof T,
   >(obj: T, prop: K, defaultValue: T[K] = undefined) {
-    return obj && prop in obj ? obj[prop] : defaultValue;
+    return (obj && obj[prop]) || defaultValue;
   }
 
   protected normalizePattern(pattern: MsPattern): string {
diff --git a/packages/microservices/client/client-redis.ts b/packages/microservices/client/client-redis.ts
index 9148a450f..517ea271c 100644
--- a/packages/microservices/client/client-redis.ts
+++ b/packages/microservices/client/client-redis.ts
@@ -13,9 +13,6 @@ type Redis = any;
 
 let redisPackage = {} as any;
 
-/**
- * @publicApi
- */
 export class ClientRedis extends ClientProxy {
   protected readonly logger = new Logger(ClientProxy.name);
   protected readonly subscriptionsCount = new Map<string, number>();
diff --git a/packages/microservices/client/client-rmq.ts b/packages/microservices/client/client-rmq.ts
index f68ef3bec..5c6616f7f 100644
--- a/packages/microservices/client/client-rmq.ts
+++ b/packages/microservices/client/client-rmq.ts
@@ -3,29 +3,21 @@ import { loadPackage } from '@nestjs/common/utils/load-package.util';
 import { randomStringGenerator } from '@nestjs/common/utils/random-string-generator.util';
 import { isFunction } from '@nestjs/common/utils/shared.utils';
 import { EventEmitter } from 'events';
+import { EmptyError, fromEvent, lastValueFrom, merge, Observable } from 'rxjs';
+import { first, map, retryWhen, scan, share, switchMap } from 'rxjs/operators';
 import {
-  EmptyError,
-  firstValueFrom,
-  fromEvent,
-  merge,
-  Observable,
-  ReplaySubject,
-} from 'rxjs';
-import { first, map, retryWhen, scan, skip, switchMap } from 'rxjs/operators';
-import {
-  CONNECT_EVENT,
   CONNECT_FAILED_EVENT,
   DISCONNECTED_RMQ_MESSAGE,
   DISCONNECT_EVENT,
   ERROR_EVENT,
   RQM_DEFAULT_IS_GLOBAL_PREFETCH_COUNT,
   RQM_DEFAULT_NOACK,
-  RQM_DEFAULT_NO_ASSERT,
   RQM_DEFAULT_PERSISTENT,
   RQM_DEFAULT_PREFETCH_COUNT,
   RQM_DEFAULT_QUEUE,
   RQM_DEFAULT_QUEUE_OPTIONS,
   RQM_DEFAULT_URL,
+  RQM_DEFAULT_NO_ASSERT,
 } from '../constants';
 import { RmqUrl } from '../external/rmq-url.interface';
 import { ReadPacket, RmqOptions, WritePacket } from '../interfaces';
@@ -33,33 +25,18 @@ import { RmqRecord } from '../record-builders';
 import { RmqRecordSerializer } from '../serializers/rmq-record.serializer';
 import { ClientProxy } from './client-proxy';
 
-// import type {
-//   AmqpConnectionManager,
-//   ChannelWrapper,
-// } from 'amqp-connection-manager';
-// import type { Channel, ConsumeMessage } from 'amqplib';
-
-type Channel = any;
-type ChannelWrapper = any;
-type ConsumeMessage = any;
-type AmqpConnectionManager = any;
-
 let rqmPackage: any = {};
 
 const REPLY_QUEUE = 'amq.rabbitmq.reply-to';
 
-/**
- * @publicApi
- */
 export class ClientRMQ extends ClientProxy {
   protected readonly logger = new Logger(ClientProxy.name);
-  protected connection$: ReplaySubject<any>;
   protected connection: Promise<any>;
-  protected client: AmqpConnectionManager = null;
-  protected channel: ChannelWrapper = null;
+  protected client: any = null;
+  protected channel: any = null;
   protected urls: string[] | RmqUrl[];
   protected queue: string;
-  protected queueOptions: Record<string, any>;
+  protected queueOptions: any;
   protected responseEmitter: EventEmitter;
   protected replyQueue: string;
   protected persistent: boolean;
@@ -98,44 +75,42 @@ export class ClientRMQ extends ClientProxy {
 
   public connect(): Promise<any> {
     if (this.client) {
-      return this.convertConnectionToPromise();
+      return this.connection;
     }
     this.client = this.createClient();
     this.handleError(this.client);
     this.handleDisconnectError(this.client);
 
-    this.responseEmitter = new EventEmitter();
-    this.responseEmitter.setMaxListeners(0);
-
     const connect$ = this.connect$(this.client);
-    const withDisconnect$ = this.mergeDisconnectEvent(
-      this.client,
-      connect$,
-    ).pipe(switchMap(() => this.createChannel()));
-
-    const withReconnect$ = fromEvent(this.client, CONNECT_EVENT).pipe(skip(1));
-    const source$ = merge(withDisconnect$, withReconnect$);
-
-    this.connection$ = new ReplaySubject(1);
-    source$.subscribe(this.connection$);
+    this.connection = lastValueFrom(
+      this.mergeDisconnectEvent(this.client, connect$).pipe(
+        switchMap(() => this.createChannel()),
+        share(),
+      ),
+    ).catch(err => {
+      if (err instanceof EmptyError) {
+        return;
+      }
+      throw err;
+    });
 
-    return this.convertConnectionToPromise();
+    return this.connection;
   }
 
   public createChannel(): Promise<void> {
     return new Promise(resolve => {
       this.channel = this.client.createChannel({
         json: false,
-        setup: (channel: Channel) => this.setupChannel(channel, resolve),
+        setup: (channel: any) => this.setupChannel(channel, resolve),
       });
     });
   }
 
-  public createClient(): AmqpConnectionManager {
+  public createClient<T = any>(): T {
     const socketOptions = this.getOptionsProp(this.options, 'socketOptions');
     return rqmPackage.connect(this.urls, {
       connectionOptions: socketOptions,
-    });
+    }) as T;
   }
 
   public mergeDisconnectEvent<T = any>(
@@ -144,7 +119,7 @@ export class ClientRMQ extends ClientProxy {
   ): Observable<T> {
     const eventToError = (eventType: string) =>
       fromEvent(instance, eventType).pipe(
-        map((err: unknown) => {
+        map((err: any) => {
           throw err;
         }),
       );
@@ -163,23 +138,10 @@ export class ClientRMQ extends ClientProxy {
         ),
       ),
     );
-    // If we ever decide to propagate all disconnect errors & re-emit them through
-    // the "connection" stream then comment out "first()" operator.
     return merge(source$, disconnect$, connectFailed$).pipe(first());
   }
 
-  public async convertConnectionToPromise() {
-    try {
-      return await firstValueFrom(this.connection$);
-    } catch (err) {
-      if (err instanceof EmptyError) {
-        return;
-      }
-      throw err;
-    }
-  }
-
-  public async setupChannel(channel: Channel, resolve: Function) {
+  public async setupChannel(channel: any, resolve: Function) {
     const prefetchCount =
       this.getOptionsProp(this.options, 'prefetchCount') ||
       RQM_DEFAULT_PREFETCH_COUNT;
@@ -191,15 +153,18 @@ export class ClientRMQ extends ClientProxy {
       await channel.assertQueue(this.queue, this.queueOptions);
     }
     await channel.prefetch(prefetchCount, isGlobalPrefetchCount);
+
+    this.responseEmitter = new EventEmitter();
+    this.responseEmitter.setMaxListeners(0);
     await this.consumeChannel(channel);
     resolve();
   }
 
-  public async consumeChannel(channel: Channel) {
+  public async consumeChannel(channel: any) {
     const noAck = this.getOptionsProp(this.options, 'noAck', RQM_DEFAULT_NOACK);
     await channel.consume(
       this.replyQueue,
-      (msg: ConsumeMessage) =>
+      (msg: any) =>
         this.responseEmitter.emit(msg.properties.correlationId, msg),
       {
         noAck,
@@ -207,14 +172,16 @@ export class ClientRMQ extends ClientProxy {
     );
   }
 
-  public handleError(client: AmqpConnectionManager): void {
+  public handleError(client: any): void {
     client.addListener(ERROR_EVENT, (err: any) => this.logger.error(err));
   }
 
-  public handleDisconnectError(client: AmqpConnectionManager): void {
+  public handleDisconnectError(client: any): void {
     client.addListener(DISCONNECT_EVENT, (err: any) => {
       this.logger.error(DISCONNECTED_RMQ_MESSAGE);
       this.logger.error(err);
+
+      this.close();
     });
   }
 
@@ -264,7 +231,7 @@ export class ClientRMQ extends ClientProxy {
         content,
         options,
       }: {
-        content: Buffer;
+        content: any;
         options: Record<string, unknown>;
       }) =>
         this.handleMessage(JSON.parse(content.toString()), options, callback);
@@ -277,19 +244,17 @@ export class ClientRMQ extends ClientProxy {
       delete serializedPacket.options;
 
       this.responseEmitter.on(correlationId, listener);
-      this.channel
-        .sendToQueue(
-          this.queue,
-          Buffer.from(JSON.stringify(serializedPacket)),
-          {
-            replyTo: this.replyQueue,
-            persistent: this.persistent,
-            ...options,
-            headers: this.mergeHeaders(options?.headers),
-            correlationId,
-          },
-        )
-        .catch(err => callback({ err }));
+      this.channel.sendToQueue(
+        this.queue,
+        Buffer.from(JSON.stringify(serializedPacket)),
+        {
+          replyTo: this.replyQueue,
+          persistent: this.persistent,
+          ...options,
+          headers: this.mergeHeaders(options?.headers),
+          correlationId,
+        },
+      );
       return () => this.responseEmitter.removeListener(correlationId, listener);
     } catch (err) {
       callback({ err });
diff --git a/packages/microservices/client/client-tcp.ts b/packages/microservices/client/client-tcp.ts
index e0b1ddb91..17b7e4a7e 100644
--- a/packages/microservices/client/client-tcp.ts
+++ b/packages/microservices/client/client-tcp.ts
@@ -2,7 +2,6 @@ import { Logger, Type } from '@nestjs/common';
 import * as net from 'net';
 import { EmptyError, lastValueFrom } from 'rxjs';
 import { share, tap } from 'rxjs/operators';
-import { ConnectionOptions } from 'tls';
 import {
   CLOSE_EVENT,
   ECONNREFUSED,
@@ -12,14 +11,10 @@ import {
   TCP_DEFAULT_PORT,
 } from '../constants';
 import { JsonSocket, TcpSocket } from '../helpers';
-import { connect as tlsConnect, TLSSocket } from 'tls';
 import { PacketId, ReadPacket, WritePacket } from '../interfaces';
 import { TcpClientOptions } from '../interfaces/client-metadata.interface';
 import { ClientProxy } from './client-proxy';
 
-/**
- * @publicApi
- */
 export class ClientTCP extends ClientProxy {
   protected connection: Promise<any>;
   private readonly logger = new Logger(ClientTCP.name);
@@ -28,7 +23,6 @@ export class ClientTCP extends ClientProxy {
   private readonly socketClass: Type<TcpSocket>;
   private isConnected = false;
   private socket: TcpSocket;
-  public tlsOptions?: ConnectionOptions;
 
   constructor(options: TcpClientOptions['options']) {
     super();
@@ -36,7 +30,6 @@ export class ClientTCP extends ClientProxy {
     this.host = this.getOptionsProp(options, 'host') || TCP_DEFAULT_HOST;
     this.socketClass =
       this.getOptionsProp(options, 'socketClass') || JsonSocket;
-    this.tlsOptions = this.getOptionsProp(options, 'tlsOptions');
 
     this.initializeSerializer(options);
     this.initializeDeserializer(options);
@@ -59,10 +52,7 @@ export class ClientTCP extends ClientProxy {
       share(),
     );
 
-    // For TLS connections, the connection is initiated when the socket is created
-    if (!this.tlsOptions) {
-      this.socket.connect(this.port, this.host);
-    }
+    this.socket.connect(this.port, this.host);
     this.connection = lastValueFrom(source$).catch(err => {
       if (err instanceof EmptyError) {
         return;
@@ -94,21 +84,7 @@ export class ClientTCP extends ClientProxy {
   }
 
   public createSocket(): TcpSocket {
-    let socket: net.Socket | TLSSocket;
-    /**
-     * TLS enabled, "upgrade" the TCP Socket to TLS
-     */
-    if (this.tlsOptions) {
-      socket = tlsConnect({
-        ...this.tlsOptions,
-        port: this.port,
-        host: this.host,
-        socket,
-      });
-    } else {
-      socket = new net.Socket();
-    }
-    return new this.socketClass(socket);
+    return new this.socketClass(new net.Socket());
   }
 
   public close() {
diff --git a/packages/microservices/context/exception-filters-context.ts b/packages/microservices/context/exception-filters-context.ts
index 14d42da91..3f8ab49bd 100644
--- a/packages/microservices/context/exception-filters-context.ts
+++ b/packages/microservices/context/exception-filters-context.ts
@@ -6,13 +6,10 @@ import { BaseExceptionFilterContext } from '@nestjs/core/exceptions/base-excepti
 import { STATIC_CONTEXT } from '@nestjs/core/injector/constants';
 import { NestContainer } from '@nestjs/core/injector/container';
 import { InstanceWrapper } from '@nestjs/core/injector/instance-wrapper';
-import { iterate } from 'iterare';
 import { Observable } from 'rxjs';
 import { RpcExceptionsHandler } from '../exceptions/rpc-exceptions-handler';
+import { iterate } from 'iterare';
 
-/**
- * @publicApi
- */
 export class ExceptionFiltersContext extends BaseExceptionFilterContext {
   constructor(
     container: NestContainer,
@@ -56,12 +53,7 @@ export class ExceptionFiltersContext extends BaseExceptionFilterContext {
     const scopedFilterWrappers =
       this.config.getGlobalRequestFilters() as InstanceWrapper[];
     const scopedFilters = iterate(scopedFilterWrappers)
-      .map(wrapper =>
-        wrapper.getInstanceByContextId(
-          this.getContextId(contextId, wrapper),
-          inquirerId,
-        ),
-      )
+      .map(wrapper => wrapper.getInstanceByContextId(contextId, inquirerId))
       .filter(host => !!host)
       .map(host => host.instance)
       .toArray();
diff --git a/packages/microservices/context/request-context-host.ts b/packages/microservices/context/request-context-host.ts
index f15eb29d8..2d221cca7 100644
--- a/packages/microservices/context/request-context-host.ts
+++ b/packages/microservices/context/request-context-host.ts
@@ -1,9 +1,6 @@
 import { BaseRpcContext } from '../ctx-host/base-rpc.context';
 import { RequestContext } from '../interfaces';
 
-/**
- * @publicApi
- */
 export class RequestContextHost<
   TData = any,
   TContext extends BaseRpcContext = any,
diff --git a/packages/microservices/decorators/client.decorator.ts b/packages/microservices/decorators/client.decorator.ts
index 48848b6a4..53d99d4fb 100644
--- a/packages/microservices/decorators/client.decorator.ts
+++ b/packages/microservices/decorators/client.decorator.ts
@@ -5,9 +5,6 @@ import { ClientOptions } from '../interfaces/client-metadata.interface';
  * Attaches the `ClientProxy` instance to the given property
  *
  * @param  {ClientOptions} metadata optional client metadata
- *
- * @publicApi
- *
  */
 export function Client(metadata?: ClientOptions): PropertyDecorator {
   return (target: object, propertyKey: string | symbol): void => {
diff --git a/packages/microservices/decorators/event-pattern.decorator.ts b/packages/microservices/decorators/event-pattern.decorator.ts
index ead1830b9..b44825d63 100644
--- a/packages/microservices/decorators/event-pattern.decorator.ts
+++ b/packages/microservices/decorators/event-pattern.decorator.ts
@@ -15,8 +15,6 @@ import { Transport } from '../enums';
 
 /**
  * Subscribes to incoming events which fulfils chosen pattern.
- *
- * @publicApi
  */
 export const EventPattern: {
   <T = string>(metadata?: T): MethodDecorator;
@@ -61,14 +59,7 @@ export const EventPattern: {
       descriptor.value,
     );
     Reflect.defineMetadata(TRANSPORT_METADATA, transport, descriptor.value);
-    Reflect.defineMetadata(
-      PATTERN_EXTRAS_METADATA,
-      {
-        ...Reflect.getMetadata(PATTERN_EXTRAS_METADATA, descriptor.value),
-        ...extras,
-      },
-      descriptor.value,
-    );
+    Reflect.defineMetadata(PATTERN_EXTRAS_METADATA, extras, descriptor.value);
     return descriptor;
   };
 };
diff --git a/packages/microservices/decorators/message-pattern.decorator.ts b/packages/microservices/decorators/message-pattern.decorator.ts
index 86d460f1f..6cb4ed1d8 100644
--- a/packages/microservices/decorators/message-pattern.decorator.ts
+++ b/packages/microservices/decorators/message-pattern.decorator.ts
@@ -23,8 +23,6 @@ export enum GrpcMethodStreamingType {
 
 /**
  * Subscribes to incoming messages which fulfils chosen pattern.
- *
- * @publicApi
  */
 export const MessagePattern: {
   <T = PatternMetadata | string>(metadata?: T): MethodDecorator;
@@ -75,14 +73,7 @@ export const MessagePattern: {
       descriptor.value,
     );
     Reflect.defineMetadata(TRANSPORT_METADATA, transport, descriptor.value);
-    Reflect.defineMetadata(
-      PATTERN_EXTRAS_METADATA,
-      {
-        ...Reflect.getMetadata(PATTERN_EXTRAS_METADATA, descriptor.value),
-        ...extras,
-      },
-      descriptor.value,
-    );
+    Reflect.defineMetadata(PATTERN_EXTRAS_METADATA, extras, descriptor.value);
     return descriptor;
   };
 };
diff --git a/packages/microservices/deserializers/identity.deserializer.ts b/packages/microservices/deserializers/identity.deserializer.ts
index 7a6d1e0d4..9eccb6621 100644
--- a/packages/microservices/deserializers/identity.deserializer.ts
+++ b/packages/microservices/deserializers/identity.deserializer.ts
@@ -1,8 +1,5 @@
 import { Deserializer } from '../interfaces/deserializer.interface';
 
-/**
- * @publicApi
- */
 export class IdentityDeserializer implements Deserializer {
   deserialize(value: any) {
     return value;
diff --git a/packages/microservices/deserializers/incoming-request.deserializer.ts b/packages/microservices/deserializers/incoming-request.deserializer.ts
index 537e9b715..3e3a6f6f0 100644
--- a/packages/microservices/deserializers/incoming-request.deserializer.ts
+++ b/packages/microservices/deserializers/incoming-request.deserializer.ts
@@ -5,9 +5,6 @@ import {
   IncomingRequest,
 } from '../interfaces';
 
-/**
- * @publicApi
- */
 export class IncomingRequestDeserializer implements ConsumerDeserializer {
   deserialize(
     value: any,
diff --git a/packages/microservices/deserializers/incoming-response.deserializer.ts b/packages/microservices/deserializers/incoming-response.deserializer.ts
index 55ecc4684..5ea343b1f 100644
--- a/packages/microservices/deserializers/incoming-response.deserializer.ts
+++ b/packages/microservices/deserializers/incoming-response.deserializer.ts
@@ -1,9 +1,6 @@
 import { isUndefined } from '@nestjs/common/utils/shared.utils';
 import { IncomingResponse, ProducerDeserializer } from '../interfaces';
 
-/**
- * @publicApi
- */
 export class IncomingResponseDeserializer implements ProducerDeserializer {
   deserialize(value: any, options?: Record<string, any>): IncomingResponse {
     return this.isExternal(value) ? this.mapToSchema(value) : value;
diff --git a/packages/microservices/deserializers/kafka-request.deserializer.ts b/packages/microservices/deserializers/kafka-request.deserializer.ts
index 359321728..99dae3119 100644
--- a/packages/microservices/deserializers/kafka-request.deserializer.ts
+++ b/packages/microservices/deserializers/kafka-request.deserializer.ts
@@ -2,9 +2,6 @@ import { IncomingEvent, IncomingRequest } from '../interfaces';
 import { KafkaRequest } from '../serializers/kafka-request.serializer';
 import { IncomingRequestDeserializer } from './incoming-request.deserializer';
 
-/**
- * @publicApi
- */
 export class KafkaRequestDeserializer extends IncomingRequestDeserializer {
   mapToSchema(
     data: KafkaRequest,
diff --git a/packages/microservices/deserializers/kafka-response.deserializer.ts b/packages/microservices/deserializers/kafka-response.deserializer.ts
index 93d2977b2..2b5385458 100644
--- a/packages/microservices/deserializers/kafka-response.deserializer.ts
+++ b/packages/microservices/deserializers/kafka-response.deserializer.ts
@@ -2,9 +2,6 @@ import { isUndefined } from '@nestjs/common/utils/shared.utils';
 import { KafkaHeaders } from '../enums/kafka-headers.enum';
 import { Deserializer, IncomingResponse } from '../interfaces';
 
-/**
- * @publicApi
- */
 export class KafkaResponseDeserializer
   implements Deserializer<any, IncomingResponse>
 {
diff --git a/packages/microservices/deserializers/nats-request-json.deserializer.ts b/packages/microservices/deserializers/nats-request-json.deserializer.ts
index 68763e17f..e46851751 100644
--- a/packages/microservices/deserializers/nats-request-json.deserializer.ts
+++ b/packages/microservices/deserializers/nats-request-json.deserializer.ts
@@ -5,9 +5,6 @@ import { IncomingRequestDeserializer } from './incoming-request.deserializer';
 
 let natsPackage = {} as any;
 
-/**
- * @publicApi
- */
 export class NatsRequestJSONDeserializer extends IncomingRequestDeserializer {
   private readonly jsonCodec: NatsCodec<unknown>;
 
diff --git a/packages/microservices/deserializers/nats-response-json.deserializer.ts b/packages/microservices/deserializers/nats-response-json.deserializer.ts
index 51a809726..70787afc7 100644
--- a/packages/microservices/deserializers/nats-response-json.deserializer.ts
+++ b/packages/microservices/deserializers/nats-response-json.deserializer.ts
@@ -6,9 +6,6 @@ import { NatsRequestJSONDeserializer } from './nats-request-json.deserializer';
 
 let natsPackage = {} as any;
 
-/**
- * @publicApi
- */
 export class NatsResponseJSONDeserializer extends IncomingResponseDeserializer {
   private readonly jsonCodec: NatsCodec<unknown>;
 
diff --git a/packages/microservices/enums/kafka-headers.enum.ts b/packages/microservices/enums/kafka-headers.enum.ts
index 82d5eead2..c4c622873 100644
--- a/packages/microservices/enums/kafka-headers.enum.ts
+++ b/packages/microservices/enums/kafka-headers.enum.ts
@@ -1,7 +1,5 @@
 /**
  * @see https://docs.spring.io/spring-kafka/api/org/springframework/kafka/support/KafkaHeaders.html
- *
- * @publicApi
  */
 export enum KafkaHeaders {
   ACKNOWLEDGMENT = 'kafka_acknowledgment',
diff --git a/packages/microservices/errors/corrupted-packet-length.exception.ts b/packages/microservices/errors/corrupted-packet-length.exception.ts
index 8dea792c5..c00e20a6e 100644
--- a/packages/microservices/errors/corrupted-packet-length.exception.ts
+++ b/packages/microservices/errors/corrupted-packet-length.exception.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export class CorruptedPacketLengthException extends Error {
   constructor(rawContentLength: string) {
     super(`Corrupted length value "${rawContentLength}" supplied in a packet`);
diff --git a/packages/microservices/errors/empty-response.exception.ts b/packages/microservices/errors/empty-response.exception.ts
index 1151f8dc4..d0b0d7330 100644
--- a/packages/microservices/errors/empty-response.exception.ts
+++ b/packages/microservices/errors/empty-response.exception.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export class EmptyResponseException extends Error {
   constructor(pattern: string) {
     super(
diff --git a/packages/microservices/errors/invalid-grpc-package.exception.ts b/packages/microservices/errors/invalid-grpc-package.exception.ts
index a0599e457..fe9a4d59b 100644
--- a/packages/microservices/errors/invalid-grpc-package.exception.ts
+++ b/packages/microservices/errors/invalid-grpc-package.exception.ts
@@ -1,8 +1,5 @@
 import { RuntimeException } from '@nestjs/core/errors/exceptions/runtime.exception';
 
-/**
- * @publicApi
- */
 export class InvalidGrpcPackageException extends RuntimeException {
   constructor(name: string) {
     super(`The invalid gRPC package (package "${name}" not found)`);
diff --git a/packages/microservices/errors/invalid-grpc-service.exception.ts b/packages/microservices/errors/invalid-grpc-service.exception.ts
index 1da6a18c8..5c37f1601 100644
--- a/packages/microservices/errors/invalid-grpc-service.exception.ts
+++ b/packages/microservices/errors/invalid-grpc-service.exception.ts
@@ -1,8 +1,5 @@
 import { RuntimeException } from '@nestjs/core/errors/exceptions/runtime.exception';
 
-/**
- * @publicApi
- */
 export class InvalidGrpcServiceException extends RuntimeException {
   constructor(name: string) {
     super(`The invalid gRPC service (service "${name}" not found)`);
diff --git a/packages/microservices/errors/invalid-json-format.exception.ts b/packages/microservices/errors/invalid-json-format.exception.ts
index ac830a49b..ef7f69108 100644
--- a/packages/microservices/errors/invalid-json-format.exception.ts
+++ b/packages/microservices/errors/invalid-json-format.exception.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export class InvalidJSONFormatException extends Error {
   constructor(err: Error, data: string) {
     super(`Could not parse JSON: ${err.message}\nRequest data: ${data}`);
diff --git a/packages/microservices/errors/invalid-kafka-client-topic.exception.ts b/packages/microservices/errors/invalid-kafka-client-topic.exception.ts
index 12871369f..aa0062569 100644
--- a/packages/microservices/errors/invalid-kafka-client-topic.exception.ts
+++ b/packages/microservices/errors/invalid-kafka-client-topic.exception.ts
@@ -1,8 +1,5 @@
 import { RuntimeException } from '@nestjs/core/errors/exceptions/runtime.exception';
 
-/**
- * @publicApi
- */
 export class InvalidKafkaClientTopicException extends RuntimeException {
   constructor(topic?: string) {
     super(
diff --git a/packages/microservices/errors/invalid-message.exception.ts b/packages/microservices/errors/invalid-message.exception.ts
index 6b8c0e9ee..cc1627b87 100644
--- a/packages/microservices/errors/invalid-message.exception.ts
+++ b/packages/microservices/errors/invalid-message.exception.ts
@@ -1,8 +1,5 @@
 import { RuntimeException } from '@nestjs/core/errors/exceptions/runtime.exception';
 
-/**
- * @publicApi
- */
 export class InvalidMessageException extends RuntimeException {
   constructor() {
     super(`The invalid data or message pattern (undefined/null)`);
diff --git a/packages/microservices/errors/invalid-proto-definition.exception.ts b/packages/microservices/errors/invalid-proto-definition.exception.ts
index 28ce445a0..46559050a 100644
--- a/packages/microservices/errors/invalid-proto-definition.exception.ts
+++ b/packages/microservices/errors/invalid-proto-definition.exception.ts
@@ -1,8 +1,5 @@
 import { RuntimeException } from '@nestjs/core/errors/exceptions/runtime.exception';
 
-/**
- * @publicApi
- */
 export class InvalidProtoDefinitionException extends RuntimeException {
   constructor(path: string) {
     super(`The invalid .proto definition (file at "${path}" not found)`);
diff --git a/packages/microservices/errors/net-socket-closed.exception.ts b/packages/microservices/errors/net-socket-closed.exception.ts
index 9f20bbd0d..3453aaaa7 100644
--- a/packages/microservices/errors/net-socket-closed.exception.ts
+++ b/packages/microservices/errors/net-socket-closed.exception.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export class NetSocketClosedException extends Error {
   constructor() {
     super(`The net socket is closed.`);
diff --git a/packages/microservices/exceptions/base-rpc-exception-filter.ts b/packages/microservices/exceptions/base-rpc-exception-filter.ts
index 837330fac..1c42d24b6 100644
--- a/packages/microservices/exceptions/base-rpc-exception-filter.ts
+++ b/packages/microservices/exceptions/base-rpc-exception-filter.ts
@@ -5,9 +5,6 @@ import { MESSAGES } from '@nestjs/core/constants';
 import { Observable, throwError as _throw } from 'rxjs';
 import { RpcException } from './rpc-exception';
 
-/**
- * @publicApi
- */
 export class BaseRpcExceptionFilter<T = any, R = any>
   implements RpcExceptionFilter<T>
 {
diff --git a/packages/microservices/exceptions/rpc-exception.ts b/packages/microservices/exceptions/rpc-exception.ts
index 60d77f5c1..1d59c61c7 100644
--- a/packages/microservices/exceptions/rpc-exception.ts
+++ b/packages/microservices/exceptions/rpc-exception.ts
@@ -1,8 +1,5 @@
 import { isObject, isString } from '@nestjs/common/utils/shared.utils';
 
-/**
- * @publicApi
- */
 export class RpcException extends Error {
   constructor(private readonly error: string | object) {
     super();
diff --git a/packages/microservices/exceptions/rpc-exceptions-handler.ts b/packages/microservices/exceptions/rpc-exceptions-handler.ts
index 97ee23270..7815c80d1 100644
--- a/packages/microservices/exceptions/rpc-exceptions-handler.ts
+++ b/packages/microservices/exceptions/rpc-exceptions-handler.ts
@@ -1,15 +1,11 @@
-import { isEmpty } from '@nestjs/common/utils/shared.utils';
-import { Observable } from 'rxjs';
-import { ArgumentsHost } from '@nestjs/common/interfaces/features/arguments-host.interface';
 import { RpcExceptionFilterMetadata } from '@nestjs/common/interfaces/exceptions';
-import { selectExceptionFilterMetadata } from '@nestjs/common/utils/select-exception-filter-metadata.util';
+import { ArgumentsHost } from '@nestjs/common/interfaces/features/arguments-host.interface';
+import { isEmpty } from '@nestjs/common/utils/shared.utils';
 import { InvalidExceptionFilterException } from '@nestjs/core/errors/exceptions/invalid-exception-filter.exception';
-import { RpcException } from './rpc-exception';
+import { Observable } from 'rxjs';
 import { BaseRpcExceptionFilter } from './base-rpc-exception-filter';
+import { RpcException } from './rpc-exception';
 
-/**
- * @publicApi
- */
 export class RpcExceptionsHandler extends BaseRpcExceptionFilter {
   private filters: RpcExceptionFilterMetadata[] = [];
 
@@ -38,8 +34,14 @@ export class RpcExceptionsHandler extends BaseRpcExceptionFilter {
     if (isEmpty(this.filters)) {
       return null;
     }
-
-    const filter = selectExceptionFilterMetadata(this.filters, exception);
+    const filter = this.filters.find(({ exceptionMetatypes }) => {
+      const hasMetatype =
+        !exceptionMetatypes.length ||
+        exceptionMetatypes.some(
+          ExceptionMetatype => exception instanceof ExceptionMetatype,
+        );
+      return hasMetatype;
+    });
     return filter ? filter.func(exception, host) : null;
   }
 }
diff --git a/packages/microservices/external/grpc-options.interface.ts b/packages/microservices/external/grpc-options.interface.ts
index 51ceac477..3c5bd22c2 100644
--- a/packages/microservices/external/grpc-options.interface.ts
+++ b/packages/microservices/external/grpc-options.interface.ts
@@ -1,8 +1,6 @@
 /**
  * An interface that contains options used when initializing a Channel instance.
  * This listing is incomplete. Full reference: https://grpc.github.io/grpc/core/group__grpc__arg__keys.html
- *
- * @publicApi
  */
 export interface ChannelOptions {
   'grpc.max_send_message_length'?: number;
diff --git a/packages/microservices/external/kafka.interface.ts b/packages/microservices/external/kafka.interface.ts
index ed7a07bef..cdb95dff0 100644
--- a/packages/microservices/external/kafka.interface.ts
+++ b/packages/microservices/external/kafka.interface.ts
@@ -2,9 +2,6 @@
  * Do NOT add NestJS logic to this interface.  It is meant to ONLY represent the types for the kafkajs package.
  *
  * @see https://github.com/tulios/kafkajs/blob/master/types/index.d.ts
- *
- * @publicApi
- *
  */
 
 /// <reference types="node" />
@@ -974,7 +971,7 @@ export type ConsumerRebalancingEvent = InstrumentationEvent<{
   groupId: string;
   memberId: string;
 }>;
-export type ConsumerReceivedUnsubscribedTopicsEvent = InstrumentationEvent<{
+export type ConsumerReceivedUnsubcribedTopicsEvent = InstrumentationEvent<{
   groupId: string;
   generationId: number;
   memberId: string;
@@ -1109,7 +1106,7 @@ export type Consumer = {
   ): RemoveInstrumentationEventListener<typeof eventName>;
   on(
     eventName: ConsumerEvents['RECEIVED_UNSUBSCRIBED_TOPICS'],
-    listener: (event: ConsumerReceivedUnsubscribedTopicsEvent) => void,
+    listener: (event: ConsumerReceivedUnsubcribedTopicsEvent) => void,
   ): RemoveInstrumentationEventListener<typeof eventName>;
   on(
     eventName: ConsumerEvents['REQUEST'],
diff --git a/packages/microservices/external/mqtt-client.interface.ts b/packages/microservices/external/mqtt-client.interface.ts
index 0429c850d..506081338 100644
--- a/packages/microservices/external/mqtt-client.interface.ts
+++ b/packages/microservices/external/mqtt-client.interface.ts
@@ -2,9 +2,6 @@ import { EventEmitter } from 'events';
 
 /**
  * @see https://github.com/mqttjs/MQTT.js/
- *
- * @publicApi
- *
  */
 export declare class MqttClient extends EventEmitter {
   public connected: boolean;
@@ -78,7 +75,7 @@ export declare class MqttClient extends EventEmitter {
   /**
    * unsubscribe - unsubscribe from topic(s)
    *
-   * @param {string|Array} topic - topics to unsubscribe from
+   * @param {String, Array} topic - topics to unsubscribe from
    * @param {Function} [callback] - callback fired on unsuback
    * @returns {MqttClient} this - for chaining
    * @api public
diff --git a/packages/microservices/external/mqtt-options.interface.ts b/packages/microservices/external/mqtt-options.interface.ts
index 3eba9f18d..47c0d12b8 100644
--- a/packages/microservices/external/mqtt-options.interface.ts
+++ b/packages/microservices/external/mqtt-options.interface.ts
@@ -1,7 +1,5 @@
 /**
  * @see https://github.com/mqttjs/MQTT.js/
- *
- * @publicApi
  */
 export declare type QoS = 0 | 1 | 2;
 
diff --git a/packages/microservices/external/nats-client.interface.ts b/packages/microservices/external/nats-client.interface.ts
index 637883a42..b40cd679e 100644
--- a/packages/microservices/external/nats-client.interface.ts
+++ b/packages/microservices/external/nats-client.interface.ts
@@ -1,7 +1,5 @@
 /**
  * @see https://github.com/nats-io/nats.js
- *
- * @publicApi
  */
 export interface NatsCodec<T> {
   encode(d: T): Uint8Array;
diff --git a/packages/microservices/external/redis.interface.ts b/packages/microservices/external/redis.interface.ts
index 506d3669c..6de36c439 100644
--- a/packages/microservices/external/redis.interface.ts
+++ b/packages/microservices/external/redis.interface.ts
@@ -2,8 +2,6 @@ import { ConnectionOptions } from 'tls';
 
 /**
  * @see https://github.dev/luin/ioredis/blob/df04dd8d87a44d3b64b385c86581915248554508/lib/redis/RedisOptions.ts#L184
- *
- * @publicApi
  */
 export interface IORedisOptions {
   Connector?: any;
diff --git a/packages/microservices/external/rmq-url.interface.ts b/packages/microservices/external/rmq-url.interface.ts
index 9899d2a93..c19501e59 100644
--- a/packages/microservices/external/rmq-url.interface.ts
+++ b/packages/microservices/external/rmq-url.interface.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export interface RmqUrl {
   protocol?: string;
   hostname?: string;
@@ -13,9 +10,6 @@ export interface RmqUrl {
   vhost?: string;
 }
 
-/**
- * @publicApi
- */
 export interface AmqpConnectionManagerSocketOptions {
   reconnectTimeInSeconds?: number;
   heartbeatIntervalInSeconds?: number;
@@ -23,9 +17,6 @@ export interface AmqpConnectionManagerSocketOptions {
   connectionOptions?: any;
 }
 
-/**
- * @publicApi
- */
 export interface AmqplibQueueOptions {
   durable?: boolean;
   autoDelete?: boolean;
diff --git a/packages/microservices/index.ts b/packages/microservices/index.ts
index bf44f34f7..886c0be72 100644
--- a/packages/microservices/index.ts
+++ b/packages/microservices/index.ts
@@ -1,6 +1,6 @@
 /*
  * Nest @microservices
- * Copyright(c) 2017 - 2023 Kamil Mysliwiec
+ * Copyright(c) 2017 - 2022 Kamil Mysliwiec
  * https://nestjs.com
  * MIT Licensed
  */
diff --git a/packages/microservices/interfaces/client-grpc.interface.ts b/packages/microservices/interfaces/client-grpc.interface.ts
index 95815ef0f..ebb73f466 100644
--- a/packages/microservices/interfaces/client-grpc.interface.ts
+++ b/packages/microservices/interfaces/client-grpc.interface.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export interface ClientGrpc {
   getService<T extends {}>(name: string): T;
   getClientByServiceName<T = any>(name: string): T;
diff --git a/packages/microservices/interfaces/client-metadata.interface.ts b/packages/microservices/interfaces/client-metadata.interface.ts
index 53bb8b556..ace44c265 100644
--- a/packages/microservices/interfaces/client-metadata.interface.ts
+++ b/packages/microservices/interfaces/client-metadata.interface.ts
@@ -12,7 +12,6 @@ import {
   RmqOptions,
 } from './microservice-configuration.interface';
 import { Serializer } from './serializer.interface';
-import { ConnectionOptions } from 'tls';
 
 export type ClientOptions =
   | RedisOptions
@@ -23,17 +22,11 @@ export type ClientOptions =
   | TcpClientOptions
   | RmqOptions;
 
-/**
- * @publicApi
- */
 export interface CustomClientOptions {
   customClass: Type<ClientProxy>;
   options?: Record<string, any>;
 }
 
-/**
- * @publicApi
- */
 export interface TcpClientOptions {
   transport: Transport.TCP;
   options?: {
@@ -41,7 +34,6 @@ export interface TcpClientOptions {
     port?: number;
     serializer?: Serializer;
     deserializer?: Deserializer;
-    tlsOptions?: ConnectionOptions;
     socketClass?: Type<TcpSocket>;
   };
 }
diff --git a/packages/microservices/interfaces/custom-transport-strategy.interface.ts b/packages/microservices/interfaces/custom-transport-strategy.interface.ts
index c7b4e9e44..358d77b97 100644
--- a/packages/microservices/interfaces/custom-transport-strategy.interface.ts
+++ b/packages/microservices/interfaces/custom-transport-strategy.interface.ts
@@ -1,8 +1,5 @@
 import { Transport } from '../enums';
 
-/**
- * @publicApi
- */
 export interface CustomTransportStrategy {
   readonly transportId?: Transport | symbol;
   listen(callback: (...optionalParams: unknown[]) => any): any;
diff --git a/packages/microservices/interfaces/deserializer.interface.ts b/packages/microservices/interfaces/deserializer.interface.ts
index d5529b697..69d3af4ad 100644
--- a/packages/microservices/interfaces/deserializer.interface.ts
+++ b/packages/microservices/interfaces/deserializer.interface.ts
@@ -4,9 +4,6 @@ import {
   IncomingResponse,
 } from './packet.interface';
 
-/**
- * @publicApi
- */
 export interface Deserializer<TInput = any, TOutput = any> {
   deserialize(
     value: TInput,
diff --git a/packages/microservices/interfaces/message-handler.interface.ts b/packages/microservices/interfaces/message-handler.interface.ts
index 8568262d2..00aecaa6e 100644
--- a/packages/microservices/interfaces/message-handler.interface.ts
+++ b/packages/microservices/interfaces/message-handler.interface.ts
@@ -1,8 +1,5 @@
 import { Observable } from 'rxjs';
 
-/**
- * @publicApi
- */
 export interface MessageHandler<TInput = any, TContext = any, TResult = any> {
   (data: TInput, ctx?: TContext):
     | Promise<Observable<TResult>>
diff --git a/packages/microservices/interfaces/microservice-configuration.interface.ts b/packages/microservices/interfaces/microservice-configuration.interface.ts
index 0f2da17d5..11e5b414e 100644
--- a/packages/microservices/interfaces/microservice-configuration.interface.ts
+++ b/packages/microservices/interfaces/microservice-configuration.interface.ts
@@ -1,11 +1,10 @@
 import { Type } from '@nestjs/common';
-import { ConnectionOptions } from 'tls';
 import { Transport } from '../enums/transport.enum';
 import { ChannelOptions } from '../external/grpc-options.interface';
 import {
   ConsumerConfig,
   ConsumerRunConfig,
-  ConsumerSubscribeTopics,
+  ConsumerSubscribeTopic,
   KafkaConfig,
   ProducerConfig,
   ProducerRecord,
@@ -28,17 +27,11 @@ export type MicroserviceOptions =
   | KafkaOptions
   | CustomStrategy;
 
-/**
- * @publicApi
- */
 export interface CustomStrategy {
   strategy: CustomTransportStrategy;
   options?: {};
 }
 
-/**
- * @publicApi
- */
 export interface GrpcOptions {
   transport?: Transport.GRPC;
   options: {
@@ -77,9 +70,6 @@ export interface GrpcOptions {
   };
 }
 
-/**
- * @publicApi
- */
 export interface TcpOptions {
   transport?: Transport.TCP;
   options?: {
@@ -88,15 +78,11 @@ export interface TcpOptions {
     retryAttempts?: number;
     retryDelay?: number;
     serializer?: Serializer;
-    tlsOptions?: ConnectionOptions;
     deserializer?: Deserializer;
     socketClass?: Type<TcpSocket>;
   };
 }
 
-/**
- * @publicApi
- */
 export interface RedisOptions {
   transport?: Transport.REDIS;
   options?: {
@@ -104,18 +90,11 @@ export interface RedisOptions {
     port?: number;
     retryAttempts?: number;
     retryDelay?: number;
-    /**
-     * Use `psubscribe`/`pmessage` to enable wildcards in the patterns
-     */
-    wildcards?: boolean;
     serializer?: Serializer;
     deserializer?: Deserializer;
   } & IORedisOptions;
 }
 
-/**
- * @publicApi
- */
 export interface MqttOptions {
   transport?: Transport.MQTT;
   options?: MqttClientOptions & {
@@ -144,9 +123,6 @@ export interface MqttOptions {
   };
 }
 
-/**
- * @publicApi
- */
 export interface NatsOptions {
   transport?: Transport.NATS;
   options?: {
@@ -191,9 +167,6 @@ export interface NatsOptions {
   };
 }
 
-/**
- * @publicApi
- */
 export interface RmqOptions {
   transport?: Transport.RMQ;
   options?: {
@@ -220,16 +193,10 @@ export interface RmqOptions {
   };
 }
 
-/**
- * @publicApi
- */
 export interface KafkaParserConfig {
   keepBinary?: boolean;
 }
 
-/**
- * @publicApi
- */
 export interface KafkaOptions {
   transport?: Transport.KAFKA;
   options?: {
@@ -240,7 +207,7 @@ export interface KafkaOptions {
     client?: KafkaConfig;
     consumer?: ConsumerConfig;
     run?: Omit<ConsumerRunConfig, 'eachBatch' | 'eachMessage'>;
-    subscribe?: Omit<ConsumerSubscribeTopics, 'topic'>;
+    subscribe?: Omit<ConsumerSubscribeTopic, 'topic'>;
     producer?: ProducerConfig;
     send?: Omit<ProducerRecord, 'topic' | 'messages'>;
     serializer?: Serializer;
diff --git a/packages/microservices/interfaces/microservice-entrypoint-metadata.interface.ts b/packages/microservices/interfaces/microservice-entrypoint-metadata.interface.ts
deleted file mode 100644
index 9993c7d77..000000000
--- a/packages/microservices/interfaces/microservice-entrypoint-metadata.interface.ts
+++ /dev/null
@@ -1,9 +0,0 @@
-import { Transport } from '../enums';
-import { PatternMetadata } from './pattern-metadata.interface';
-
-export type MicroserviceEntrypointMetadata = {
-  transportId: keyof typeof Transport | symbol;
-  patterns: PatternMetadata[];
-  isEventHandler: boolean;
-  extras?: Record<string, any>;
-};
diff --git a/packages/microservices/interfaces/serializer.interface.ts b/packages/microservices/interfaces/serializer.interface.ts
index 4c090467c..f8d0c8c25 100644
--- a/packages/microservices/interfaces/serializer.interface.ts
+++ b/packages/microservices/interfaces/serializer.interface.ts
@@ -4,9 +4,6 @@ import {
   OutgoingResponse,
 } from './packet.interface';
 
-/**
- * @publicApi
- */
 export interface Serializer<TInput = any, TOutput = any> {
   serialize(value: TInput, options?: Record<string, any>): TOutput;
 }
diff --git a/packages/microservices/listener-metadata-explorer.ts b/packages/microservices/listener-metadata-explorer.ts
index faa98b71b..66ddffaf0 100644
--- a/packages/microservices/listener-metadata-explorer.ts
+++ b/packages/microservices/listener-metadata-explorer.ts
@@ -4,14 +4,15 @@ import { MetadataScanner } from '@nestjs/core/metadata-scanner';
 import {
   CLIENT_CONFIGURATION_METADATA,
   CLIENT_METADATA,
-  PATTERN_EXTRAS_METADATA,
   PATTERN_HANDLER_METADATA,
   PATTERN_METADATA,
   TRANSPORT_METADATA,
+  PATTERN_EXTRAS_METADATA,
 } from './constants';
 import { Transport } from './enums';
 import { PatternHandler } from './enums/pattern-handler.enum';
-import { ClientOptions, PatternMetadata } from './interfaces';
+import { ClientOptions } from './interfaces/client-metadata.interface';
+import { PatternMetadata } from './interfaces/pattern-metadata.interface';
 
 export interface ClientProperties {
   property: string;
@@ -37,10 +38,12 @@ export class ListenerMetadataExplorer {
 
   public explore(instance: Controller): EventOrMessageListenerDefinition[] {
     const instancePrototype = Object.getPrototypeOf(instance);
-    return this.metadataScanner
-      .getAllMethodNames(instancePrototype)
-      .map(method => this.exploreMethodMetadata(instancePrototype, method))
-      .filter(metadata => metadata);
+    return this.metadataScanner.scanFromPrototype<
+      Controller,
+      EventOrMessageListenerDefinition
+    >(instance, instancePrototype, method =>
+      this.exploreMethodMetadata(instancePrototype, method),
+    );
   }
 
   public exploreMethodMetadata(
diff --git a/packages/microservices/listeners-controller.ts b/packages/microservices/listeners-controller.ts
index cba398269..12119790f 100644
--- a/packages/microservices/listeners-controller.ts
+++ b/packages/microservices/listeners-controller.ts
@@ -11,18 +11,9 @@ import {
   InstanceWrapper,
 } from '@nestjs/core/injector/instance-wrapper';
 import { Module } from '@nestjs/core/injector/module';
-import { GraphInspector } from '@nestjs/core/inspector/graph-inspector';
 import { MetadataScanner } from '@nestjs/core/metadata-scanner';
 import { REQUEST_CONTEXT_ID } from '@nestjs/core/router/request/request-constants';
-import {
-  forkJoin,
-  from as fromPromise,
-  isObservable,
-  mergeMap,
-  Observable,
-  ObservedValueOf,
-  of,
-} from 'rxjs';
+import { connectable, Observable, Subject } from 'rxjs';
 import { IClientProxyFactory } from './client/client-proxy-factory';
 import { ClientsContainer } from './container';
 import { ExceptionFiltersContext } from './context/exception-filters-context';
@@ -33,18 +24,13 @@ import {
   DEFAULT_GRPC_CALLBACK_METADATA,
 } from './context/rpc-metadata-constants';
 import { BaseRpcContext } from './ctx-host/base-rpc.context';
-import { Transport } from './enums';
 import {
   CustomTransportStrategy,
   MessageHandler,
   PatternMetadata,
   RequestContext,
 } from './interfaces';
-import { MicroserviceEntrypointMetadata } from './interfaces/microservice-entrypoint-metadata.interface';
-import {
-  EventOrMessageListenerDefinition,
-  ListenerMetadataExplorer,
-} from './listener-metadata-explorer';
+import { ListenerMetadataExplorer } from './listener-metadata-explorer';
 import { ServerGrpc } from './server';
 import { Server } from './server/server';
 
@@ -61,7 +47,6 @@ export class ListenersController {
     private readonly injector: Injector,
     private readonly clientFactory: IClientProxyFactory,
     private readonly exceptionFiltersContext: ExceptionFiltersContext,
-    private readonly graphInspector: GraphInspector,
   ) {}
 
   public registerPatternHandlers(
@@ -87,114 +72,67 @@ export class ListenersController {
           transport === server.transportId,
       )
       .reduce((acc, handler) => {
-        handler.patterns.forEach(pattern =>
+        // Optional chaining for backward-compatibility
+        handler.patterns?.forEach(pattern =>
           acc.push({ ...handler, patterns: [pattern] }),
         );
         return acc;
       }, [])
-      .forEach((definition: EventOrMessageListenerDefinition) => {
-        const {
+      .forEach(
+        ({
           patterns: [pattern],
           targetCallback,
           methodKey,
           extras,
           isEventHandler,
-        } = definition;
-
-        this.insertEntrypointDefinition(
-          instanceWrapper,
-          definition,
-          server.transportId,
-        );
-
-        if (isStatic) {
-          const proxy = this.contextCreator.create(
-            instance as object,
-            targetCallback,
+        }) => {
+          if (isStatic) {
+            const proxy = this.contextCreator.create(
+              instance as object,
+              targetCallback,
+              moduleKey,
+              methodKey,
+              STATIC_CONTEXT,
+              undefined,
+              defaultCallMetadata,
+            );
+            if (isEventHandler) {
+              const eventHandler: MessageHandler = (...args: unknown[]) => {
+                const originalArgs = args;
+                const [dataOrContextHost] = originalArgs;
+                if (dataOrContextHost instanceof RequestContextHost) {
+                  args = args.slice(1, args.length);
+                }
+                const originalReturnValue = proxy(...args);
+                const returnedValueWrapper = eventHandler.next?.(
+                  ...(originalArgs as Parameters<MessageHandler>),
+                );
+                returnedValueWrapper?.then(returnedValue =>
+                  this.connectIfStream(returnedValue as Observable<unknown>),
+                );
+                return originalReturnValue;
+              };
+              return server.addHandler(
+                pattern,
+                eventHandler,
+                isEventHandler,
+                extras,
+              );
+            } else {
+              return server.addHandler(pattern, proxy, isEventHandler, extras);
+            }
+          }
+          const asyncHandler = this.createRequestScopedHandler(
+            instanceWrapper,
+            pattern,
+            moduleRef,
             moduleKey,
             methodKey,
-            STATIC_CONTEXT,
-            undefined,
             defaultCallMetadata,
           );
-          if (isEventHandler) {
-            const eventHandler: MessageHandler = async (...args: unknown[]) => {
-              const originalArgs = args;
-              const [dataOrContextHost] = originalArgs;
-              if (dataOrContextHost instanceof RequestContextHost) {
-                args = args.slice(1, args.length);
-              }
-              const returnValue = proxy(...args);
-              return this.forkJoinHandlersIfAttached(
-                returnValue,
-                originalArgs,
-                eventHandler,
-              );
-            };
-            return server.addHandler(
-              pattern,
-              eventHandler,
-              isEventHandler,
-              extras,
-            );
-          } else {
-            return server.addHandler(pattern, proxy, isEventHandler, extras);
-          }
-        }
-        const asyncHandler = this.createRequestScopedHandler(
-          instanceWrapper,
-          pattern,
-          moduleRef,
-          moduleKey,
-          methodKey,
-          defaultCallMetadata,
-          isEventHandler,
-        );
-        server.addHandler(pattern, asyncHandler, isEventHandler, extras);
-      });
-  }
-
-  public insertEntrypointDefinition(
-    instanceWrapper: InstanceWrapper,
-    definition: EventOrMessageListenerDefinition,
-    transportId: Transport | symbol,
-  ) {
-    this.graphInspector.insertEntrypointDefinition<MicroserviceEntrypointMetadata>(
-      {
-        type: 'microservice',
-        methodName: definition.methodKey,
-        className: instanceWrapper.metatype?.name,
-        classNodeId: instanceWrapper.id,
-        metadata: {
-          key: definition.patterns.toString(),
-          transportId:
-            typeof transportId === 'number'
-              ? (Transport[transportId] as keyof typeof Transport)
-              : transportId,
-          patterns: definition.patterns,
-          isEventHandler: definition.isEventHandler,
-          extras: definition.extras,
+          server.addHandler(pattern, asyncHandler, isEventHandler, extras);
         },
-      },
-      instanceWrapper.id,
-    );
-  }
-
-  public forkJoinHandlersIfAttached(
-    currentReturnValue: Promise<unknown> | Observable<unknown>,
-    originalArgs: unknown[],
-    handlerRef: MessageHandler,
-  ) {
-    if (handlerRef.next) {
-      const returnedValueWrapper = handlerRef.next(
-        ...(originalArgs as Parameters<MessageHandler>),
       );
-      return forkJoin({
-        current: this.transformToObservable(currentReturnValue),
-        next: this.transformToObservable(returnedValueWrapper),
-      });
-    }
-    return currentReturnValue;
   }
 
   public assignClientsToProperties(instance: Controller | Injectable) {
@@ -224,20 +162,17 @@ export class ListenersController {
     moduleKey: string,
     methodKey: string,
     defaultCallMetadata: Record<string, any> = DEFAULT_CALLBACK_METADATA,
-    isEventHandler = false,
   ) {
     const collection = moduleRef.controllers;
     const { instance } = wrapper;
 
-    const isTreeDurable = wrapper.isDependencyTreeDurable();
-
     const requestScopedHandler: MessageHandler = async (...args: unknown[]) => {
       try {
         let contextId: ContextId;
 
         let [dataOrContextHost] = args;
         if (dataOrContextHost instanceof RequestContextHost) {
-          contextId = this.getContextId(dataOrContextHost, isTreeDurable);
+          contextId = this.getContextId(dataOrContextHost);
           args.shift();
         } else {
           const [data, reqCtx] = args;
@@ -246,10 +181,13 @@ export class ListenersController {
             data,
             reqCtx as BaseRpcContext,
           );
-          contextId = this.getContextId(request, isTreeDurable);
+          contextId = this.getContextId(request);
+          this.container.registerRequestProvider(
+            contextId.getParent ? contextId.payload : request,
+            contextId,
+          );
           dataOrContextHost = request;
         }
-
         const contextInstance = await this.injector.loadPerContext(
           instance,
           moduleRef,
@@ -265,16 +203,14 @@ export class ListenersController {
           wrapper.id,
           defaultCallMetadata,
         );
-
-        const returnValue = proxy(...args);
-        if (isEventHandler) {
-          return this.forkJoinHandlersIfAttached(
-            returnValue,
-            [dataOrContextHost, ...args],
-            requestScopedHandler,
-          );
-        }
-        return returnValue;
+        const returnedValueWrapper = requestScopedHandler.next?.(
+          dataOrContextHost,
+          ...args,
+        );
+        returnedValueWrapper?.then(returnedValue =>
+          this.connectIfStream(returnedValue as Observable<unknown>),
+        );
+        return proxy(...args);
       } catch (err) {
         let exceptionFilter = this.exceptionFiltersCache.get(
           instance[methodKey],
@@ -295,10 +231,7 @@ export class ListenersController {
     return requestScopedHandler;
   }
 
-  private getContextId<T extends RequestContext = any>(
-    request: T,
-    isTreeDurable: boolean,
-  ): ContextId {
+  private getContextId<T extends RequestContext = any>(request: T): ContextId {
     const contextId = ContextIdFactory.getByRequest(request);
     if (!request[REQUEST_CONTEXT_ID as any]) {
       Object.defineProperty(request, REQUEST_CONTEXT_ID, {
@@ -307,32 +240,22 @@ export class ListenersController {
         writable: false,
         configurable: false,
       });
-
-      const requestProviderValue = isTreeDurable ? contextId.payload : request;
-      this.container.registerRequestProvider(requestProviderValue, contextId);
+      this.container.registerRequestProvider(
+        contextId.getParent ? contextId.payload : request,
+        contextId,
+      );
     }
     return contextId;
   }
 
-  public transformToObservable<T>(
-    resultOrDeferred: Observable<T> | Promise<T>,
-  ): Observable<T>;
-  public transformToObservable<T>(
-    resultOrDeferred: T,
-  ): never extends Observable<ObservedValueOf<T>>
-    ? Observable<T>
-    : Observable<ObservedValueOf<T>>;
-  public transformToObservable(resultOrDeferred: any) {
-    if (resultOrDeferred instanceof Promise) {
-      return fromPromise(resultOrDeferred).pipe(
-        mergeMap(val => (isObservable(val) ? val : of(val))),
-      );
+  private connectIfStream(source: Observable<unknown>) {
+    if (!source) {
+      return;
     }
-
-    if (isObservable(resultOrDeferred)) {
-      return resultOrDeferred;
-    }
-
-    return of(resultOrDeferred);
+    const connectableSource = connectable(source, {
+      connector: () => new Subject(),
+      resetOnDisconnect: false,
+    });
+    connectableSource.connect();
   }
 }
diff --git a/packages/microservices/microservices-module.ts b/packages/microservices/microservices-module.ts
index 3dbda4464..54632e412 100644
--- a/packages/microservices/microservices-module.ts
+++ b/packages/microservices/microservices-module.ts
@@ -1,17 +1,15 @@
 import { Controller } from '@nestjs/common/interfaces/controllers/controller.interface';
-import { NestApplicationContextOptions } from '@nestjs/common/interfaces/nest-application-context-options.interface';
 import { ApplicationConfig } from '@nestjs/core/application-config';
 import { RuntimeException } from '@nestjs/core/errors/exceptions/runtime.exception';
-import { GuardsConsumer, GuardsContextCreator } from '@nestjs/core/guards';
+import { GuardsConsumer } from '@nestjs/core/guards/guards-consumer';
+import { GuardsContextCreator } from '@nestjs/core/guards/guards-context-creator';
 import { NestContainer } from '@nestjs/core/injector/container';
 import { Injector } from '@nestjs/core/injector/injector';
 import { InstanceWrapper } from '@nestjs/core/injector/instance-wrapper';
-import { GraphInspector } from '@nestjs/core/inspector/graph-inspector';
-import {
-  InterceptorsConsumer,
-  InterceptorsContextCreator,
-} from '@nestjs/core/interceptors';
-import { PipesConsumer, PipesContextCreator } from '@nestjs/core/pipes';
+import { InterceptorsConsumer } from '@nestjs/core/interceptors/interceptors-consumer';
+import { InterceptorsContextCreator } from '@nestjs/core/interceptors/interceptors-context-creator';
+import { PipesConsumer } from '@nestjs/core/pipes/pipes-consumer';
+import { PipesContextCreator } from '@nestjs/core/pipes/pipes-context-creator';
 import { ClientProxyFactory } from './client';
 import { ClientsContainer } from './container';
 import { ExceptionFiltersContext } from './context/exception-filters-context';
@@ -21,20 +19,11 @@ import { CustomTransportStrategy } from './interfaces';
 import { ListenersController } from './listeners-controller';
 import { Server } from './server/server';
 
-export class MicroservicesModule<
-  TAppOptions extends NestApplicationContextOptions = NestApplicationContextOptions,
-> {
+export class MicroservicesModule {
   private readonly clientsContainer = new ClientsContainer();
   private listenersController: ListenersController;
-  private appOptions: TAppOptions;
 
-  public register(
-    container: NestContainer,
-    graphInspector: GraphInspector,
-    config: ApplicationConfig,
-    options: TAppOptions,
-  ) {
-    this.appOptions = options;
+  public register(container: NestContainer, config: ApplicationConfig) {
     const exceptionFiltersContext = new ExceptionFiltersContext(
       container,
       config,
@@ -58,7 +47,6 @@ export class MicroservicesModule<
       injector,
       ClientProxyFactory,
       exceptionFiltersContext,
-      graphInspector,
     );
   }
 
@@ -79,9 +67,6 @@ export class MicroservicesModule<
     if (!this.listenersController) {
       throw new RuntimeException();
     }
-    if (this.appOptions?.preview) {
-      return;
-    }
     const modules = container.getModules();
     modules.forEach(({ controllers, providers }) => {
       this.bindClients(controllers);
diff --git a/packages/microservices/nest-microservice.ts b/packages/microservices/nest-microservice.ts
index 7b0930e69..3455f3acb 100644
--- a/packages/microservices/nest-microservice.ts
+++ b/packages/microservices/nest-microservice.ts
@@ -12,8 +12,6 @@ import { ApplicationConfig } from '@nestjs/core/application-config';
 import { MESSAGES } from '@nestjs/core/constants';
 import { optionalRequire } from '@nestjs/core/helpers/optional-require';
 import { NestContainer } from '@nestjs/core/injector/container';
-import { Injector } from '@nestjs/core/injector/injector';
-import { GraphInspector } from '@nestjs/core/inspector/graph-inspector';
 import { NestApplicationContext } from '@nestjs/core/nest-application-context';
 import { Transport } from './enums/transport.enum';
 import { CustomTransportStrategy } from './interfaces/custom-transport-strategy.interface';
@@ -28,10 +26,10 @@ const { SocketModule } = optionalRequire(
 );
 
 export class NestMicroservice
-  extends NestApplicationContext<NestMicroserviceOptions>
+  extends NestApplicationContext
   implements INestMicroservice
 {
-  protected readonly logger = new Logger(NestMicroservice.name, {
+  private readonly logger = new Logger(NestMicroservice.name, {
     timestamp: true,
   });
   private readonly microservicesModule = new MicroservicesModule();
@@ -44,18 +42,11 @@ export class NestMicroservice
   constructor(
     container: NestContainer,
     config: NestMicroserviceOptions & MicroserviceOptions = {},
-    private readonly graphInspector: GraphInspector,
     private readonly applicationConfig: ApplicationConfig,
   ) {
-    super(container, config);
-
-    this.injector = new Injector({ preview: config.preview });
-    this.microservicesModule.register(
-      container,
-      this.graphInspector,
-      this.applicationConfig,
-      this.appOptions,
-    );
+    super(container);
+
+    this.microservicesModule.register(container, this.applicationConfig);
     this.createServer(config);
     this.selectContextModule();
   }
@@ -78,18 +69,10 @@ export class NestMicroservice
 
   public async registerModules(): Promise<any> {
     this.socketModule &&
-      this.socketModule.register(
-        this.container,
-        this.applicationConfig,
-        this.graphInspector,
-        this.appOptions,
-      );
-
-    if (!this.appOptions.preview) {
-      this.microservicesModule.setupClients(this.container);
-      this.registerListeners();
-    }
+      this.socketModule.register(this.container, this.applicationConfig);
+    this.microservicesModule.setupClients(this.container);
 
+    this.registerListeners();
     this.setIsInitialized(true);
 
     if (!this.isInitHookCalled) {
@@ -109,45 +92,21 @@ export class NestMicroservice
 
   public useGlobalFilters(...filters: ExceptionFilter[]): this {
     this.applicationConfig.useGlobalFilters(...filters);
-    filters.forEach(item =>
-      this.graphInspector.insertOrphanedEnhancer({
-        subtype: 'filter',
-        ref: item,
-      }),
-    );
     return this;
   }
 
   public useGlobalPipes(...pipes: PipeTransform<any>[]): this {
     this.applicationConfig.useGlobalPipes(...pipes);
-    pipes.forEach(item =>
-      this.graphInspector.insertOrphanedEnhancer({
-        subtype: 'pipe',
-        ref: item,
-      }),
-    );
     return this;
   }
 
   public useGlobalInterceptors(...interceptors: NestInterceptor[]): this {
     this.applicationConfig.useGlobalInterceptors(...interceptors);
-    interceptors.forEach(item =>
-      this.graphInspector.insertOrphanedEnhancer({
-        subtype: 'interceptor',
-        ref: item,
-      }),
-    );
     return this;
   }
 
   public useGlobalGuards(...guards: CanActivate[]): this {
     this.applicationConfig.useGlobalGuards(...guards);
-    guards.forEach(item =>
-      this.graphInspector.insertOrphanedEnhancer({
-        subtype: 'guard',
-        ref: item,
-      }),
-    );
     return this;
   }
 
@@ -161,7 +120,6 @@ export class NestMicroservice
   }
 
   public async listen() {
-    this.assertNotInPreviewMode('listen');
     !this.isInitialized && (await this.registerModules());
 
     return new Promise<any>((resolve, reject) => {
diff --git a/packages/microservices/package.json b/packages/microservices/package.json
index 994bf9dc0..bd3cbd239 100644
--- a/packages/microservices/package.json
+++ b/packages/microservices/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/microservices",
-  "version": "9.4.0",
+  "version": "9.2.0",
   "description": "Nest - modern, fast, powerful node.js web framework (@microservices)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -18,11 +18,11 @@
   },
   "dependencies": {
     "iterare": "1.2.1",
-    "tslib": "2.5.0"
+    "tslib": "2.4.1"
   },
   "devDependencies": {
-    "@nestjs/common": "9.4.0",
-    "@nestjs/core": "9.4.0"
+    "@nestjs/common": "9.2.0",
+    "@nestjs/core": "9.2.0"
   },
   "peerDependencies": {
     "@grpc/grpc-js": "*",
diff --git a/packages/microservices/serializers/kafka-request.serializer.ts b/packages/microservices/serializers/kafka-request.serializer.ts
index 7c519c458..732275497 100644
--- a/packages/microservices/serializers/kafka-request.serializer.ts
+++ b/packages/microservices/serializers/kafka-request.serializer.ts
@@ -13,9 +13,6 @@ export interface KafkaRequest<T = any> {
   headers: Record<string, any>;
 }
 
-/**
- * @publicApi
- */
 export class KafkaRequestSerializer
   implements Serializer<any, KafkaRequest | Promise<KafkaRequest>>
 {
diff --git a/packages/microservices/server/server-kafka.ts b/packages/microservices/server/server-kafka.ts
index 292cbb384..7ac52f9fa 100644
--- a/packages/microservices/server/server-kafka.ts
+++ b/packages/microservices/server/server-kafka.ts
@@ -191,7 +191,7 @@ export class ServerKafka extends Server implements CustomTransportStrategy {
     }
 
     const response$ = this.transformToObservable(
-      handler(packet.data, kafkaContext),
+      await handler(packet.data, kafkaContext),
     );
 
     const replayStream$ = new ReplaySubject();
@@ -218,8 +218,6 @@ export class ServerKafka extends Server implements CustomTransportStrategy {
           if (err instanceof KafkaRetriableException && !isPromiseResolved) {
             isPromiseResolved = true;
             reject(err);
-          } else {
-            resolve();
           }
           replayStream$.error(err);
         },
diff --git a/packages/microservices/server/server-nats.ts b/packages/microservices/server/server-nats.ts
index 73206ee77..768fe3664 100644
--- a/packages/microservices/server/server-nats.ts
+++ b/packages/microservices/server/server-nats.ts
@@ -1,4 +1,5 @@
 import { isUndefined, isObject } from '@nestjs/common/utils/shared.utils';
+import { Observable } from 'rxjs';
 import { NATS_DEFAULT_URL, NO_MESSAGE_HANDLER } from '../constants';
 import { NatsContext } from '../ctx-host/nats.context';
 import { NatsRequestJSONDeserializer } from '../deserializers/nats-request-json.deserializer';
@@ -136,28 +137,17 @@ export class ServerNats extends Server implements CustomTransportStrategy {
         status.data && isObject(status.data)
           ? JSON.stringify(status.data)
           : status.data;
-
-      switch (status.type) {
-        case 'error':
-        case 'disconnect':
-          this.logger.error(
-            `NatsError: type: "${status.type}", data: "${data}".`,
-          );
-          break;
-
-        case 'pingTimer':
-          if (this.options.debug) {
-            this.logger.debug(
-              `NatsStatus: type: "${status.type}", data: "${data}".`,
-            );
-          }
-          break;
-
-        default:
-          this.logger.log(
-            `NatsStatus: type: "${status.type}", data: "${data}".`,
-          );
-          break;
+      if (status.type === 'disconnect' || status.type === 'error') {
+        this.logger.error(
+          `NatsError: type: "${status.type}", data: "${data}".`,
+        );
+      } else {
+        const message = `NatsStatus: type: "${status.type}", data: "${data}".`;
+        if (status.type === 'pingTimer') {
+          this.logger.debug(message);
+        } else {
+          this.logger.log(message);
+        }
       }
     }
   }
diff --git a/packages/microservices/server/server-redis.ts b/packages/microservices/server/server-redis.ts
index 09c619f13..6e5530165 100644
--- a/packages/microservices/server/server-redis.ts
+++ b/packages/microservices/server/server-redis.ts
@@ -1,4 +1,5 @@
 import { isUndefined } from '@nestjs/common/utils/shared.utils';
+import { Observable } from 'rxjs';
 import {
   ERROR_EVENT,
   MESSAGE_EVENT,
@@ -63,23 +64,13 @@ export class ServerRedis extends Server implements CustomTransportStrategy {
   }
 
   public bindEvents(subClient: Redis, pubClient: Redis) {
-    subClient.on(
-      this.options.wildcards ? 'pmessage' : MESSAGE_EVENT,
-      this.getMessageHandler(pubClient).bind(this),
-    );
+    subClient.on(MESSAGE_EVENT, this.getMessageHandler(pubClient).bind(this));
     const subscribePatterns = [...this.messageHandlers.keys()];
     subscribePatterns.forEach(pattern => {
       const { isEventHandler } = this.messageHandlers.get(pattern);
-
-      const channel = isEventHandler
-        ? pattern
-        : this.getRequestPattern(pattern);
-
-      if (this.options.wildcards) {
-        subClient.psubscribe(channel);
-      } else {
-        subClient.subscribe(channel);
-      }
+      subClient.subscribe(
+        isEventHandler ? pattern : this.getRequestPattern(pattern),
+      );
     });
   }
 
@@ -99,22 +90,18 @@ export class ServerRedis extends Server implements CustomTransportStrategy {
   }
 
   public getMessageHandler(pub: Redis) {
-    return this.options.wildcards
-      ? (channel: string, pattern: string, buffer: string | any) =>
-          this.handleMessage(channel, buffer, pub, pattern)
-      : (channel: string, buffer: string | any) =>
-          this.handleMessage(channel, buffer, pub, channel);
+    return async (channel: string, buffer: string | any) =>
+      this.handleMessage(channel, buffer, pub);
   }
 
   public async handleMessage(
     channel: string,
     buffer: string | any,
     pub: Redis,
-    pattern: string,
   ) {
     const rawMessage = this.parseMessage(buffer);
     const packet = await this.deserializer.deserialize(rawMessage, { channel });
-    const redisCtx = new RedisContext([pattern]);
+    const redisCtx = new RedisContext([channel]);
 
     if (isUndefined((packet as IncomingRequest).id)) {
       return this.handleEvent(channel, packet, redisCtx);
diff --git a/packages/microservices/server/server-tcp.ts b/packages/microservices/server/server-tcp.ts
index 655fcd003..bffeb158a 100644
--- a/packages/microservices/server/server-tcp.ts
+++ b/packages/microservices/server/server-tcp.ts
@@ -15,7 +15,6 @@ import {
 import { TcpContext } from '../ctx-host/tcp.context';
 import { Transport } from '../enums';
 import { JsonSocket, TcpSocket } from '../helpers';
-import { createServer as tlsCreateServer } from 'tls';
 import {
   CustomTransportStrategy,
   IncomingRequest,
@@ -36,7 +35,6 @@ export class ServerTCP extends Server implements CustomTransportStrategy {
   private readonly socketClass: Type<TcpSocket>;
   private isExplicitlyTerminated = false;
   private retryAttemptsCount = 0;
-  private tlsOptions?;
 
   constructor(private readonly options: TcpOptions['options']) {
     super();
@@ -44,7 +42,6 @@ export class ServerTCP extends Server implements CustomTransportStrategy {
     this.host = this.getOptionsProp(options, 'host') || TCP_DEFAULT_HOST;
     this.socketClass =
       this.getOptionsProp(options, 'socketClass') || JsonSocket;
-    this.tlsOptions = this.getOptionsProp(options, 'tlsOptions');
 
     this.init();
     this.initializeSerializer(options);
@@ -127,16 +124,7 @@ export class ServerTCP extends Server implements CustomTransportStrategy {
   }
 
   private init() {
-    if (this.tlsOptions) {
-      // TLS enabled, use tls server
-      this.server = tlsCreateServer(
-        this.tlsOptions,
-        this.bindHandler.bind(this),
-      );
-    } else {
-      // TLS disabled, use net server
-      this.server = net.createServer(this.bindHandler.bind(this));
-    }
+    this.server = net.createServer(this.bindHandler.bind(this));
     this.server.on(ERROR_EVENT, this.handleError.bind(this));
     this.server.on(CLOSE_EVENT, this.handleClose.bind(this));
   }
diff --git a/packages/microservices/server/server.ts b/packages/microservices/server/server.ts
index 8a88a1296..4e8ee9bf6 100644
--- a/packages/microservices/server/server.ts
+++ b/packages/microservices/server/server.ts
@@ -11,7 +11,7 @@ import {
   Subject,
   Subscription,
 } from 'rxjs';
-import { catchError, finalize, mergeMap } from 'rxjs/operators';
+import { catchError, finalize } from 'rxjs/operators';
 import { NO_EVENT_HANDLER } from '../constants';
 import { BaseRpcContext } from '../ctx-host/base-rpc.context';
 import { IncomingRequestDeserializer } from '../deserializers/incoming-request.deserializer';
@@ -133,9 +133,7 @@ export abstract class Server {
     : Observable<ObservedValueOf<T>>;
   public transformToObservable(resultOrDeferred: any) {
     if (resultOrDeferred instanceof Promise) {
-      return fromPromise(resultOrDeferred).pipe(
-        mergeMap(val => (isObservable(val) ? val : of(val))),
-      );
+      return fromPromise(resultOrDeferred);
     }
 
     if (isObservable(resultOrDeferred)) {
diff --git a/packages/microservices/tsconfig.build.json b/packages/microservices/tsconfig.build.json
deleted file mode 100644
index e8b71a07a..000000000
--- a/packages/microservices/tsconfig.build.json
+++ /dev/null
@@ -1,27 +0,0 @@
-{
-  "extends": "../tsconfig.build.json",
-  "compilerOptions": {
-    "outDir": ".",
-    "rootDir": ".",
-    "paths": {
-      "@nestjs/common": ["../common"],
-      "@nestjs/common/*": ["../common/*"],
-      "@nestjs/core": ["../core"],
-      "@nestjs/core/*": ["../core/*"],
-      "@nestjs/websockets": ["../websockets"],
-      "@nestjs/websockets/*": ["../websockets/*"]
-    }
-  },
-  "exclude": ["node_modules", "dist", "test/**/*", "*.spec.ts"],
-  "references": [
-    {
-      "path": "../common/tsconfig.build.json"
-    },
-    {
-      "path": "../core/tsconfig.build.json"
-    },
-    {
-      "path": "../websockets/tsconfig.build.json"
-    }
-  ]
-}
diff --git a/packages/microservices/tsconfig.json b/packages/microservices/tsconfig.json
index 2ae9e3c90..b238080a4 100644
--- a/packages/microservices/tsconfig.json
+++ b/packages/microservices/tsconfig.json
@@ -1,13 +1,7 @@
 {
-  "extends": "../tsconfig.build.json",
+  "extends": "./../tsconfig.base.json",
   "compilerOptions": {
-    "types": ["node"]
+    "baseUrl": "./"
   },
-  "files": [],
-  "include": [],
-  "references": [
-    {
-      "path": "./tsconfig.build.json"
-    }
-  ]
+  "include": ["*.ts", "**/*.ts"]
 }
diff --git a/packages/platform-express/Readme.md b/packages/platform-express/Readme.md
index 16f48336d..5203ac4c2 100644
--- a/packages/platform-express/Readme.md
+++ b/packages/platform-express/Readme.md
@@ -11,6 +11,7 @@
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/l/@nestjs/core.svg" alt="Package License" /></a>
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/dm/@nestjs/common.svg" alt="NPM Downloads" /></a>
 <a href="https://circleci.com/gh/nestjs/nest" target="_blank"><img src="https://img.shields.io/circleci/build/github/nestjs/nest/master" alt="CircleCI" /></a>
+<a href="https://coveralls.io/github/nestjs/nest?branch=master" target="_blank"><img src="https://coveralls.io/repos/github/nestjs/nest/badge.svg?branch=master#9" alt="Coverage" /></a>
 <a href="https://discord.gg/G7Qnnhy" target="_blank"><img src="https://img.shields.io/badge/discord-online-brightgreen.svg" alt="Discord"/></a>
 <a href="https://opencollective.com/nest#backer" target="_blank"><img src="https://opencollective.com/nest/backers/badge.svg" alt="Backers on Open Collective" /></a>
 <a href="https://opencollective.com/nest#sponsor" target="_blank"><img src="https://opencollective.com/nest/sponsors/badge.svg" alt="Sponsors on Open Collective" /></a>
@@ -77,10 +78,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
  <td>
 <a href="https://jetbrains.com/" target="_blank"><img src="https://nestjs.com/img/jetbrains-logo.svg" width="110" valign="middle" /></a></td><td>
 <a href="https://snyk.co/nestjs" target="_blank"><img src="https://nestjs.com/img/snyk-logo-black.png" width="185" valign="middle" /></a></td><td>
-<a href="https://fuseautotech.com/" target="_blank"><img src="https://nestjs.com/img/fuse-logo.svg" width="105" valign="middle" /></a></td>
-<td>
-<a href="https://ridicorp.com/career/" target="_blank"><img src="https://nestjs.com/img/ridi-logo.svg" width="105" valign="middle" /></a></td><td>
-<a href="https://www.movavi.com/imovie-for-windows.html" target="_blank"><img src="https://nestjs.com/img/movavi-logo.svg" width="105" valign="middle" /></a></td></</tr></table>
+<a href="https://fuseautotech.com/" target="_blank"><img src="https://nestjs.com/img/fuse-logo.svg" width="105" valign="middle" /></a></td></</tr></table>
 
 #### Silver Sponsors
 
@@ -93,8 +91,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
 <td><a href="https://www.tinystacks.com" target="_blank"><img src="https://nestjs.com/img/tinystacks-logo.png#1" width="140" valign="middle" /></td>
 <td><a href="https://n.inc" target="_blank"><img src="https://nestjs.com/img/n-inc-logo.svg" width="120" valign="middle" /></td></tr><tr>
 <td><a href="https://bilberrry.com/" target="_blank"><img src="https://nestjs.com/img/bilberrry-logo.svg" width="180" valign="middle" /></td>
-<td><a href="https://ipinfo.ai/" target="_blank"><img src="https://nestjs.com/img/ipinfo-logo.png" width="130" valign="middle" /></td>
-<td><a href="https://chax.at" target="_blank"><img src="https://nestjs.com/img/chaxat-logo.png" width="100" valign="middle" /></td></tr>
+<td><a href="https://ipinfo.ai/" target="_blank"><img src="https://nestjs.com/img/ipinfo-logo.png" width="130" valign="middle" /></td></tr>
 </table>
 
 #### Sponsors
@@ -135,8 +132,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
    <td align="center" valign="middle"><a href="https://mobilereality.pl/" target="_blank"><img src="https://nestjs.com/img/mobile-reality-logo.png" width="45" valign="middle" /></a></td>
      <td align="center" valign="middle"><a href="https://boringowl.io/" target="_blank"><img src="https://nestjs.com/img/boringowl-logo.svg" width="120" valign="middle" /></a></td>
  <td align="center" valign="middle"><a href="https://www.mobilefactory.jp/" target="_blank"><img src="https://nestjs.com/img/mobilefactory-logo.png" width="100" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://nordbot.app/" target="_blank"><img src="https://nestjs.com/img/nordbot-logo.png" width="120" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://doppio.sh/" target="_blank"><img src="https://nestjs.com/img/dopiosh-logo.png" width="50" valign="middle" /></a></td>
+ <td align="center" valign="middle"><a href="https://db.nordbot.app/" target="_blank"><img src="https://nestjs.com/img/nord-logo.png" width="50" valign="middle" /></a></td>
   </tr></table>
 
 ## Backers
diff --git a/packages/platform-express/adapters/express-adapter.ts b/packages/platform-express/adapters/express-adapter.ts
index 7a0597778..9d02e8b1f 100644
--- a/packages/platform-express/adapters/express-adapter.ts
+++ b/packages/platform-express/adapters/express-adapter.ts
@@ -1,12 +1,11 @@
-import type { Server } from 'http';
+import type { Server } from 'net';
 import {
-  HttpStatus,
   InternalServerErrorException,
   Logger,
   RequestMethod,
   StreamableFile,
-  VersioningOptions,
   VersioningType,
+  VersioningOptions,
   VERSION_NEUTRAL,
 } from '@nestjs/common';
 import { VersionValue } from '@nestjs/common/interfaces';
@@ -26,16 +25,15 @@ import { AbstractHttpAdapter } from '@nestjs/core/adapters/http-adapter';
 import { RouterMethodFactory } from '@nestjs/core/helpers/router-method-factory';
 import {
   json as bodyParserJson,
+  OptionsJson,
+  OptionsUrlencoded,
   urlencoded as bodyParserUrlencoded,
 } from 'body-parser';
-import * as bodyparser from 'body-parser';
 import * as cors from 'cors';
 import * as express from 'express';
 import * as http from 'http';
 import * as https from 'https';
 import { Duplex, pipeline } from 'stream';
-import { NestExpressBodyParserOptions } from '../interfaces/nest-express-body-parser-options.interface';
-import { NestExpressBodyParserType } from '../interfaces/nest-express-body-parser.interface';
 import { ServeStaticOptions } from '../interfaces/serve-static-options.interface';
 import { getBodyParserOptions } from './utils/get-body-parser-options.util';
 
@@ -48,12 +46,7 @@ type VersionedRoute = <
   next: () => void,
 ) => any;
 
-/**
- * @publicApi
- */
-export class ExpressAdapter extends AbstractHttpAdapter<
-  http.Server | https.Server
-> {
+export class ExpressAdapter extends AbstractHttpAdapter {
   private readonly routerMethodFactory = new RouterMethodFactory();
   private readonly logger = new Logger(ExpressAdapter.name);
   private readonly openConnections = new Set<Duplex>();
@@ -101,16 +94,6 @@ export class ExpressAdapter extends AbstractHttpAdapter<
         },
       );
     }
-    if (
-      response.getHeader('Content-Type') !== undefined &&
-      response.getHeader('Content-Type') !== 'application/json' &&
-      body?.statusCode >= HttpStatus.BAD_REQUEST
-    ) {
-      this.logger.warn(
-        "Content-Type doesn't match Reply body, you might need a custom ExceptionFilter for non-JSON responses",
-      );
-      response.setHeader('Content-Type', 'application/json');
-    }
     return isObject(body) ? response.json(body) : response.send(String(body));
   }
 
@@ -237,10 +220,11 @@ export class ExpressAdapter extends AbstractHttpAdapter<
   }
 
   public registerParserMiddleware(prefix?: string, rawBody?: boolean) {
-    const bodyParserJsonOptions = getBodyParserOptions(rawBody);
-    const bodyParserUrlencodedOptions = getBodyParserOptions(rawBody, {
-      extended: true,
-    });
+    const bodyParserJsonOptions = getBodyParserOptions<OptionsJson>(rawBody);
+    const bodyParserUrlencodedOptions = getBodyParserOptions<OptionsUrlencoded>(
+      rawBody,
+      { extended: true },
+    );
 
     const parserMiddleware = {
       jsonParser: bodyParserJson(bodyParserJsonOptions),
@@ -251,19 +235,6 @@ export class ExpressAdapter extends AbstractHttpAdapter<
       .forEach(parserKey => this.use(parserMiddleware[parserKey]));
   }
 
-  public useBodyParser<Options = NestExpressBodyParserOptions>(
-    type: NestExpressBodyParserType,
-    rawBody: boolean,
-    options?: Omit<Options, 'verify'>,
-  ): this {
-    const parserOptions = getBodyParserOptions<Options>(rawBody, options);
-    const parser = bodyparser[type](parserOptions);
-
-    this.use(parser);
-
-    return this;
-  }
-
   public setLocal(key: string, value: any) {
     this.instance.locals[key] = value;
     return this;
diff --git a/packages/platform-express/adapters/utils/get-body-parser-options.util.ts b/packages/platform-express/adapters/utils/get-body-parser-options.util.ts
index c89ed92ab..0f1513243 100644
--- a/packages/platform-express/adapters/utils/get-body-parser-options.util.ts
+++ b/packages/platform-express/adapters/utils/get-body-parser-options.util.ts
@@ -1,6 +1,6 @@
 import type { RawBodyRequest } from '@nestjs/common';
+import type { Options } from 'body-parser';
 import type { IncomingMessage, ServerResponse } from 'http';
-import type { NestExpressBodyParserOptions } from '../../interfaces';
 
 const rawBodyParser = (
   req: RawBodyRequest<IncomingMessage>,
@@ -13,11 +13,11 @@ const rawBodyParser = (
   return true;
 };
 
-export function getBodyParserOptions<Options = NestExpressBodyParserOptions>(
+export function getBodyParserOptions<ParserOptions extends Options>(
   rawBody: boolean,
-  options?: Omit<Options, 'verify'> | undefined,
-): Options {
-  let parserOptions: Options = (options || {}) as Options;
+  options?: ParserOptions | undefined,
+): ParserOptions {
+  let parserOptions: ParserOptions = options ?? ({} as ParserOptions);
 
   if (rawBody === true) {
     parserOptions = {
diff --git a/packages/platform-express/index.ts b/packages/platform-express/index.ts
index ce3dbc432..0ed4c2d76 100644
--- a/packages/platform-express/index.ts
+++ b/packages/platform-express/index.ts
@@ -1,6 +1,6 @@
 /*
  * Nest @platform-express
- * Copyright(c) 2017 - 2023 Kamil Mysliwiec
+ * Copyright(c) 2017 - 2022 Kamil Mysliwiec
  * https://nestjs.com
  * MIT Licensed
  */
diff --git a/packages/platform-express/interfaces/index.ts b/packages/platform-express/interfaces/index.ts
index ac057435a..3238b1c16 100644
--- a/packages/platform-express/interfaces/index.ts
+++ b/packages/platform-express/interfaces/index.ts
@@ -1,3 +1 @@
 export * from './nest-express-application.interface';
-export { NestExpressBodyParserOptions } from './nest-express-body-parser-options.interface';
-export * from './nest-express-body-parser.interface';
diff --git a/packages/platform-express/interfaces/nest-express-application.interface.ts b/packages/platform-express/interfaces/nest-express-application.interface.ts
index 62e31ebb8..75da409d2 100644
--- a/packages/platform-express/interfaces/nest-express-application.interface.ts
+++ b/packages/platform-express/interfaces/nest-express-application.interface.ts
@@ -1,10 +1,5 @@
-import { INestApplication, HttpServer } from '@nestjs/common';
-import type { Server as CoreHttpServer } from 'http';
-import type { Server as CoreHttpsServer } from 'https';
-import type { Server } from 'net';
-import type { Express } from 'express';
-import { NestExpressBodyParserOptions } from './nest-express-body-parser-options.interface';
-import { NestExpressBodyParserType } from './nest-express-body-parser.interface';
+import { Server } from 'net';
+import { INestApplication } from '@nestjs/common';
 import { ServeStaticOptions } from './serve-static-options.interface';
 
 /**
@@ -14,16 +9,7 @@ import { ServeStaticOptions } from './serve-static-options.interface';
  *
  * @publicApi
  */
-export interface NestExpressApplication<
-  TServer extends CoreHttpServer | CoreHttpsServer = CoreHttpServer,
-> extends INestApplication<TServer> {
-  /**
-   * Returns the underlying HTTP adapter bounded to the Express.js app.
-   *
-   * @returns {HttpServer}
-   */
-  getHttpAdapter(): HttpServer<Express.Request, Express.Response, Express>;
-
+export interface NestExpressApplication extends INestApplication {
   /**
    * Starts the application.
    *
@@ -87,24 +73,6 @@ export interface NestExpressApplication<
    */
   useStaticAssets(path: string, options?: ServeStaticOptions): this;
 
-  /**
-   * Register Express body parsers on the fly. Will respect
-   * the application's `rawBody` option.
-   *
-   * @example
-   * const app = await NestFactory.create<NestExpressApplication>(
-   *   AppModule,
-   *   { rawBody: true }
-   * );
-   * app.useBodyParser('json', { limit: '50mb' });
-   *
-   * @returns {this}
-   */
-  useBodyParser<Options = NestExpressBodyParserOptions>(
-    parser: NestExpressBodyParserType,
-    options?: Omit<Options, 'verify'>,
-  ): this;
-
   /**
    * Sets one or multiple base directories for templates (views).
    *
diff --git a/packages/platform-express/interfaces/nest-express-body-parser-options.interface.ts b/packages/platform-express/interfaces/nest-express-body-parser-options.interface.ts
deleted file mode 100644
index 93df3c5f6..000000000
--- a/packages/platform-express/interfaces/nest-express-body-parser-options.interface.ts
+++ /dev/null
@@ -1,26 +0,0 @@
-import type { IncomingMessage } from 'http';
-
-/**
- * Type alias to keep compatibility with @types/body-parser
- * @see https://github.com/DefinitelyTyped/DefinitelyTyped/blob/dcd1673c4fa18a15ea8cd8ff8af7d563bb6dc8e6/types/body-parser/index.d.ts#L48-L66#L48-L66
- * @publicApi
- */
-export interface NestExpressBodyParserOptions {
-  /** When set to true, then deflated (compressed) bodies will be inflated; when false, deflated bodies are rejected. Defaults to true. */
-  inflate?: boolean | undefined;
-
-  /**
-   * Controls the maximum request body size. If this is a number,
-   * then the value specifies the number of bytes; if it is a string,
-   * the value is passed to the bytes library for parsing. Defaults to '100kb'.
-   */
-  limit?: number | string | undefined;
-
-  /**
-   * The type option is used to determine what media type the middleware will parse
-   */
-  type?: string | string[] | ((req: IncomingMessage) => any) | undefined;
-
-  // Catch-all for body-parser type specific options
-  [key: string]: unknown;
-}
diff --git a/packages/platform-express/interfaces/nest-express-body-parser.interface.ts b/packages/platform-express/interfaces/nest-express-body-parser.interface.ts
deleted file mode 100644
index 9cb003054..000000000
--- a/packages/platform-express/interfaces/nest-express-body-parser.interface.ts
+++ /dev/null
@@ -1,4 +0,0 @@
-/**
- * Interface defining possible body parser types, to be used with `NestExpressApplication.useBodyParser()`.
- */
-export type NestExpressBodyParserType = 'json' | 'urlencoded' | 'text' | 'raw';
diff --git a/packages/platform-express/multer/multer/multer.constants.ts b/packages/platform-express/multer/multer/multer.constants.ts
index 5a6f6aaa4..e3c7b4557 100644
--- a/packages/platform-express/multer/multer/multer.constants.ts
+++ b/packages/platform-express/multer/multer/multer.constants.ts
@@ -1,5 +1,4 @@
 export const multerExceptions = {
-  // from https://github.com/expressjs/multer/blob/master/lib/multer-error.js
   LIMIT_PART_COUNT: 'Too many parts',
   LIMIT_FILE_SIZE: 'File too large',
   LIMIT_FILE_COUNT: 'Too many files',
@@ -7,13 +6,4 @@ export const multerExceptions = {
   LIMIT_FIELD_VALUE: 'Field value too long',
   LIMIT_FIELD_COUNT: 'Too many fields',
   LIMIT_UNEXPECTED_FILE: 'Unexpected field',
-  MISSING_FIELD_NAME: 'Field name missing',
-};
-
-export const busboyExceptions = {
-  // from https://github.com/mscdex/busboy/blob/master/lib/types/multipart.js
-  MULTIPART_BOUNDARY_NOT_FOUND: 'Multipart: Boundary not found',
-  MULTIPART_MALFORMED_PART_HEADER: 'Malformed part header',
-  MULTIPART_UNEXPECTED_END_OF_FORM: 'Unexpected end of form',
-  MULTIPART_UNEXPECTED_END_OF_FILE: 'Unexpected end of file',
 };
diff --git a/packages/platform-express/multer/multer/multer.utils.ts b/packages/platform-express/multer/multer/multer.utils.ts
index 9df215832..81e19739c 100644
--- a/packages/platform-express/multer/multer/multer.utils.ts
+++ b/packages/platform-express/multer/multer/multer.utils.ts
@@ -3,7 +3,7 @@ import {
   HttpException,
   PayloadTooLargeException,
 } from '@nestjs/common';
-import { multerExceptions, busboyExceptions } from './multer.constants';
+import { multerExceptions } from './multer.constants';
 
 export function transformException(error: Error | undefined) {
   if (!error || error instanceof HttpException) {
@@ -18,14 +18,7 @@ export function transformException(error: Error | undefined) {
     case multerExceptions.LIMIT_FIELD_COUNT:
     case multerExceptions.LIMIT_UNEXPECTED_FILE:
     case multerExceptions.LIMIT_PART_COUNT:
-    case multerExceptions.MISSING_FIELD_NAME:
       return new BadRequestException(error.message);
-    case busboyExceptions.MULTIPART_BOUNDARY_NOT_FOUND:
-      return new BadRequestException(error.message);
-    case busboyExceptions.MULTIPART_MALFORMED_PART_HEADER:
-    case busboyExceptions.MULTIPART_UNEXPECTED_END_OF_FORM:
-    case busboyExceptions.MULTIPART_UNEXPECTED_END_OF_FILE:
-      return new BadRequestException(`Multipart: ${error.message}`);
   }
   return error;
 }
diff --git a/packages/platform-express/package.json b/packages/platform-express/package.json
index e113761f2..65b0b6788 100644
--- a/packages/platform-express/package.json
+++ b/packages/platform-express/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/platform-express",
-  "version": "9.4.0",
+  "version": "9.2.0",
   "description": "Nest - modern, fast, powerful node.js web framework (@platform-express)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -17,15 +17,15 @@
     "access": "public"
   },
   "dependencies": {
-    "body-parser": "1.20.2",
+    "body-parser": "1.20.1",
     "cors": "2.8.5",
     "express": "4.18.2",
     "multer": "1.4.4-lts.1",
-    "tslib": "2.5.0"
+    "tslib": "2.4.1"
   },
   "devDependencies": {
-    "@nestjs/common": "9.4.0",
-    "@nestjs/core": "9.4.0"
+    "@nestjs/common": "9.2.0",
+    "@nestjs/core": "9.2.0"
   },
   "peerDependencies": {
     "@nestjs/common": "^9.0.0",
diff --git a/packages/platform-express/tsconfig.build.json b/packages/platform-express/tsconfig.build.json
deleted file mode 100644
index 732ca00cb..000000000
--- a/packages/platform-express/tsconfig.build.json
+++ /dev/null
@@ -1,22 +0,0 @@
-{
-  "extends": "../tsconfig.build.json",
-  "compilerOptions": {
-    "outDir": ".",
-    "rootDir": ".",
-    "paths": {
-      "@nestjs/common": ["../common"],
-      "@nestjs/common/*": ["../common/*"],
-      "@nestjs/core": ["../core"],
-      "@nestjs/core/*": ["../core/*"]
-    }
-  },
-  "exclude": ["node_modules", "dist", "test/**/*", "*.spec.ts"],
-  "references": [
-    {
-      "path": "../common/tsconfig.build.json"
-    },
-    {
-      "path": "../core/tsconfig.build.json"
-    }
-  ]
-}
diff --git a/packages/platform-express/tsconfig.json b/packages/platform-express/tsconfig.json
index 2ae9e3c90..b238080a4 100644
--- a/packages/platform-express/tsconfig.json
+++ b/packages/platform-express/tsconfig.json
@@ -1,13 +1,7 @@
 {
-  "extends": "../tsconfig.build.json",
+  "extends": "./../tsconfig.base.json",
   "compilerOptions": {
-    "types": ["node"]
+    "baseUrl": "./"
   },
-  "files": [],
-  "include": [],
-  "references": [
-    {
-      "path": "./tsconfig.build.json"
-    }
-  ]
+  "include": ["*.ts", "**/*.ts"]
 }
diff --git a/packages/platform-fastify/Readme.md b/packages/platform-fastify/Readme.md
index 16f48336d..5203ac4c2 100644
--- a/packages/platform-fastify/Readme.md
+++ b/packages/platform-fastify/Readme.md
@@ -11,6 +11,7 @@
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/l/@nestjs/core.svg" alt="Package License" /></a>
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/dm/@nestjs/common.svg" alt="NPM Downloads" /></a>
 <a href="https://circleci.com/gh/nestjs/nest" target="_blank"><img src="https://img.shields.io/circleci/build/github/nestjs/nest/master" alt="CircleCI" /></a>
+<a href="https://coveralls.io/github/nestjs/nest?branch=master" target="_blank"><img src="https://coveralls.io/repos/github/nestjs/nest/badge.svg?branch=master#9" alt="Coverage" /></a>
 <a href="https://discord.gg/G7Qnnhy" target="_blank"><img src="https://img.shields.io/badge/discord-online-brightgreen.svg" alt="Discord"/></a>
 <a href="https://opencollective.com/nest#backer" target="_blank"><img src="https://opencollective.com/nest/backers/badge.svg" alt="Backers on Open Collective" /></a>
 <a href="https://opencollective.com/nest#sponsor" target="_blank"><img src="https://opencollective.com/nest/sponsors/badge.svg" alt="Sponsors on Open Collective" /></a>
@@ -77,10 +78,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
  <td>
 <a href="https://jetbrains.com/" target="_blank"><img src="https://nestjs.com/img/jetbrains-logo.svg" width="110" valign="middle" /></a></td><td>
 <a href="https://snyk.co/nestjs" target="_blank"><img src="https://nestjs.com/img/snyk-logo-black.png" width="185" valign="middle" /></a></td><td>
-<a href="https://fuseautotech.com/" target="_blank"><img src="https://nestjs.com/img/fuse-logo.svg" width="105" valign="middle" /></a></td>
-<td>
-<a href="https://ridicorp.com/career/" target="_blank"><img src="https://nestjs.com/img/ridi-logo.svg" width="105" valign="middle" /></a></td><td>
-<a href="https://www.movavi.com/imovie-for-windows.html" target="_blank"><img src="https://nestjs.com/img/movavi-logo.svg" width="105" valign="middle" /></a></td></</tr></table>
+<a href="https://fuseautotech.com/" target="_blank"><img src="https://nestjs.com/img/fuse-logo.svg" width="105" valign="middle" /></a></td></</tr></table>
 
 #### Silver Sponsors
 
@@ -93,8 +91,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
 <td><a href="https://www.tinystacks.com" target="_blank"><img src="https://nestjs.com/img/tinystacks-logo.png#1" width="140" valign="middle" /></td>
 <td><a href="https://n.inc" target="_blank"><img src="https://nestjs.com/img/n-inc-logo.svg" width="120" valign="middle" /></td></tr><tr>
 <td><a href="https://bilberrry.com/" target="_blank"><img src="https://nestjs.com/img/bilberrry-logo.svg" width="180" valign="middle" /></td>
-<td><a href="https://ipinfo.ai/" target="_blank"><img src="https://nestjs.com/img/ipinfo-logo.png" width="130" valign="middle" /></td>
-<td><a href="https://chax.at" target="_blank"><img src="https://nestjs.com/img/chaxat-logo.png" width="100" valign="middle" /></td></tr>
+<td><a href="https://ipinfo.ai/" target="_blank"><img src="https://nestjs.com/img/ipinfo-logo.png" width="130" valign="middle" /></td></tr>
 </table>
 
 #### Sponsors
@@ -135,8 +132,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
    <td align="center" valign="middle"><a href="https://mobilereality.pl/" target="_blank"><img src="https://nestjs.com/img/mobile-reality-logo.png" width="45" valign="middle" /></a></td>
      <td align="center" valign="middle"><a href="https://boringowl.io/" target="_blank"><img src="https://nestjs.com/img/boringowl-logo.svg" width="120" valign="middle" /></a></td>
  <td align="center" valign="middle"><a href="https://www.mobilefactory.jp/" target="_blank"><img src="https://nestjs.com/img/mobilefactory-logo.png" width="100" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://nordbot.app/" target="_blank"><img src="https://nestjs.com/img/nordbot-logo.png" width="120" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://doppio.sh/" target="_blank"><img src="https://nestjs.com/img/dopiosh-logo.png" width="50" valign="middle" /></a></td>
+ <td align="center" valign="middle"><a href="https://db.nordbot.app/" target="_blank"><img src="https://nestjs.com/img/nord-logo.png" width="50" valign="middle" /></a></td>
   </tr></table>
 
 ## Backers
diff --git a/packages/platform-fastify/adapters/fastify-adapter.ts b/packages/platform-fastify/adapters/fastify-adapter.ts
index 06aa48d7e..e18ba56a8 100644
--- a/packages/platform-fastify/adapters/fastify-adapter.ts
+++ b/packages/platform-fastify/adapters/fastify-adapter.ts
@@ -18,13 +18,11 @@ import { isString, isUndefined } from '@nestjs/common/utils/shared.utils';
 import { AbstractHttpAdapter } from '@nestjs/core/adapters/http-adapter';
 import {
   fastify,
-  FastifyBaseLogger,
   FastifyBodyParser,
   FastifyInstance,
-  FastifyListenOptions,
+  FastifyLoggerInstance,
   FastifyPluginAsync,
   FastifyPluginCallback,
-  FastifyRegister,
   FastifyReply,
   FastifyRequest,
   FastifyServerOptions,
@@ -35,7 +33,6 @@ import {
   RequestGenericInterface,
 } from 'fastify';
 import * as Reply from 'fastify/lib/reply';
-import { kRouteContext } from 'fastify/lib/symbols';
 import { RouteShorthandMethod } from 'fastify/types/route';
 import * as http2 from 'http2';
 import * as https from 'https';
@@ -46,15 +43,14 @@ import {
 } from 'light-my-request';
 // `querystring` is used internally in fastify for registering urlencoded body parser.
 import { parse as querystringParse } from 'querystring';
-import { NestFastifyBodyParserOptions } from '../interfaces';
 import {
   FastifyStaticOptions,
-  FastifyViewOptions,
+  PointOfViewOptions,
 } from '../interfaces/external';
 
 type FastifyHttp2SecureOptions<
   Server extends http2.Http2SecureServer,
-  Logger extends FastifyBaseLogger = FastifyBaseLogger,
+  Logger extends FastifyLoggerInstance = FastifyLoggerInstance,
 > = FastifyServerOptions<Server, Logger> & {
   http2: true;
   https: http2.SecureServerOptions;
@@ -62,7 +58,7 @@ type FastifyHttp2SecureOptions<
 
 type FastifyHttp2Options<
   Server extends http2.Http2Server,
-  Logger extends FastifyBaseLogger = FastifyBaseLogger,
+  Logger extends FastifyLoggerInstance = FastifyLoggerInstance,
 > = FastifyServerOptions<Server, Logger> & {
   http2: true;
   http2SessionTimeout?: number;
@@ -70,7 +66,7 @@ type FastifyHttp2Options<
 
 type FastifyHttpsOptions<
   Server extends https.Server,
-  Logger extends FastifyBaseLogger = FastifyBaseLogger,
+  Logger extends FastifyLoggerInstance = FastifyLoggerInstance,
 > = FastifyServerOptions<Server, Logger> & {
   https: https.ServerOptions;
 };
@@ -93,9 +89,6 @@ type VersionedRoute<TRequest, TResponse> = ((
 type FastifyRawRequest<TServer extends RawServerBase> =
   RawRequestDefaultExpression<TServer> & { originalUrl?: string };
 
-/**
- * @publicApi
- */
 export class FastifyAdapter<
   TServer extends RawServerBase = RawServerDefault,
   TRawRequest extends FastifyRawRequest<TServer> = FastifyRawRequest<TServer>,
@@ -232,27 +225,12 @@ export class FastifyAdapter<
     hostname: string,
     callback?: () => void,
   ): void;
-  public listen(
-    listenOptions: string | number | FastifyListenOptions,
-    ...args: any[]
-  ): void {
+  public listen(port: string | number, ...args: any[]): void {
     const isFirstArgTypeofFunction = typeof args[0] === 'function';
     const callback = isFirstArgTypeofFunction ? args[0] : args[1];
-
-    let options: Record<string, any>;
-    if (
-      typeof listenOptions === 'object' &&
-      (listenOptions.host !== undefined ||
-        listenOptions.port !== undefined ||
-        listenOptions.path !== undefined)
-    ) {
-      // First parameter is an object with a path, port and/or host attributes
-      options = listenOptions;
-    } else {
-      options = {
-        port: +listenOptions,
-      };
-    }
+    const options: Record<string, any> = {
+      port: +port,
+    };
     if (!isFirstArgTypeofFunction) {
       options.host = args[0];
     }
@@ -309,7 +287,7 @@ export class FastifyAdapter<
       ? new Reply(
           response,
           {
-            [kRouteContext]: {
+            context: {
               preSerialization: null,
               preValidation: [],
               preHandler: [],
@@ -346,17 +324,6 @@ export class FastifyAdapter<
       }
       body = body.getStream();
     }
-    if (
-      fastifyReply.getHeader('Content-Type') !== undefined &&
-      fastifyReply.getHeader('Content-Type') !== 'application/json' &&
-      body?.statusCode >= HttpStatus.BAD_REQUEST
-    ) {
-      Logger.warn(
-        "Content-Type doesn't match Reply body, you might need a custom ExceptionFilter for non-JSON responses",
-        FastifyAdapter.name,
-      );
-      fastifyReply.header('Content-Type', 'application/json');
-    }
     return fastifyReply.send(body);
   }
 
@@ -401,7 +368,7 @@ export class FastifyAdapter<
     return this.instance as unknown as T;
   }
 
-  public register<TRegister extends Parameters<FastifyRegister<TInstance>>>(
+  public register<TRegister extends Parameters<TInstance['register']>>(
     plugin: TRegister['0'],
     opts?: TRegister['1'],
   ) {
@@ -441,7 +408,7 @@ export class FastifyAdapter<
     );
   }
 
-  public setViewEngine(options: FastifyViewOptions | string) {
+  public setViewEngine(options: PointOfViewOptions | string) {
     if (isString(options)) {
       new Logger('FastifyAdapter').error(
         "setViewEngine() doesn't support a string argument.",
@@ -496,43 +463,6 @@ export class FastifyAdapter<
     this._isParserRegistered = true;
   }
 
-  public useBodyParser(
-    type: string | string[] | RegExp,
-    rawBody: boolean,
-    options?: NestFastifyBodyParserOptions,
-    parser?: FastifyBodyParser<Buffer, TServer>,
-  ) {
-    const parserOptions = {
-      ...(options || {}),
-      parseAs: 'buffer' as const,
-    };
-
-    this.getInstance().addContentTypeParser<Buffer>(
-      type,
-      parserOptions,
-      (
-        req: RawBodyRequest<FastifyRequest<unknown, TServer, TRawRequest>>,
-        body: Buffer,
-        done,
-      ) => {
-        if (rawBody === true && Buffer.isBuffer(body)) {
-          req.rawBody = body;
-        }
-
-        if (parser) {
-          parser(req, body, done);
-          return;
-        }
-
-        done(null, body);
-      },
-    );
-
-    // To avoid the Nest application init to override our custom
-    // body parser, we mark the parsers as registered.
-    this._isParserRegistered = true;
-  }
-
   public async createMiddlewareFactory(
     requestMethod: RequestMethod,
   ): Promise<(path: string, callback: Function) => any> {
@@ -578,15 +508,20 @@ export class FastifyAdapter<
   }
 
   private registerJsonContentParser(rawBody?: boolean) {
-    const contentType = 'application/json';
-    const withRawBody = !!rawBody;
     const { bodyLimit } = this.getInstance().initialConfig;
 
-    this.useBodyParser(
-      contentType,
-      withRawBody,
-      { bodyLimit },
-      (req, body, done) => {
+    this.getInstance().addContentTypeParser<Buffer>(
+      'application/json',
+      { parseAs: 'buffer', bodyLimit },
+      (
+        req: RawBodyRequest<FastifyRequest<unknown, TServer, TRawRequest>>,
+        body: Buffer,
+        done,
+      ) => {
+        if (rawBody === true && Buffer.isBuffer(body)) {
+          req.rawBody = body;
+        }
+
         const { onProtoPoisoning, onConstructorPoisoning } =
           this.instance.initialConfig;
         const defaultJsonParser = this.instance.getDefaultJsonParser(
@@ -599,15 +534,20 @@ export class FastifyAdapter<
   }
 
   private registerUrlencodedContentParser(rawBody?: boolean) {
-    const contentType = 'application/x-www-form-urlencoded';
-    const withRawBody = !!rawBody;
     const { bodyLimit } = this.getInstance().initialConfig;
 
-    this.useBodyParser(
-      contentType,
-      withRawBody,
-      { bodyLimit },
-      (_req, body, done) => {
+    this.getInstance().addContentTypeParser<Buffer>(
+      'application/x-www-form-urlencoded',
+      { parseAs: 'buffer', bodyLimit },
+      (
+        req: RawBodyRequest<FastifyRequest<unknown, TServer, TRawRequest>>,
+        body: Buffer,
+        done,
+      ) => {
+        if (rawBody === true && Buffer.isBuffer(body)) {
+          req.rawBody = body;
+        }
+
         done(null, querystringParse(body.toString()));
       },
     );
diff --git a/packages/platform-fastify/index.ts b/packages/platform-fastify/index.ts
index 6d28e2ccd..2918a05af 100644
--- a/packages/platform-fastify/index.ts
+++ b/packages/platform-fastify/index.ts
@@ -1,6 +1,6 @@
 /*
  * Nest @platform-fastify
- * Copyright(c) 2017 - 2023 Kamil Mysliwiec
+ * Copyright(c) 2017 - 2022 Kamil Mysliwiec
  * https://nestjs.com
  * MIT Licensed
  */
diff --git a/packages/platform-fastify/interfaces/external/fastify-static-options.interface.ts b/packages/platform-fastify/interfaces/external/fastify-static-options.interface.ts
index 8bd294c0f..a0ccb1f22 100644
--- a/packages/platform-fastify/interfaces/external/fastify-static-options.interface.ts
+++ b/packages/platform-fastify/interfaces/external/fastify-static-options.interface.ts
@@ -1,7 +1,6 @@
 /**
  * "fastify-static" interfaces
- * @see https://github.com/fastify/fastify-static/blob/master/types/index.d.ts
- * @publicApi
+ * @see https://github.com/fastify/fastify-static/blob/master/index.d.ts
  */
 import { Stats } from 'fs';
 
@@ -50,7 +49,6 @@ interface SendOptions {
   index?: string[] | false;
   lastModified?: boolean;
   maxAge?: string | number;
-  serveDotFiles?: boolean;
 }
 
 export interface FastifyStaticOptions extends SendOptions {
diff --git a/packages/platform-fastify/interfaces/external/index.ts b/packages/platform-fastify/interfaces/external/index.ts
index a80eb8a36..df4df129f 100644
--- a/packages/platform-fastify/interfaces/external/index.ts
+++ b/packages/platform-fastify/interfaces/external/index.ts
@@ -1,2 +1,2 @@
 export * from './fastify-static-options.interface';
-export * from './fastify-view-options.interface';
+export * from './point-of-view-options.interface';
diff --git a/packages/platform-fastify/interfaces/external/point-of-view-options.interface.ts b/packages/platform-fastify/interfaces/external/point-of-view-options.interface.ts
new file mode 100644
index 000000000..f7ce1adeb
--- /dev/null
+++ b/packages/platform-fastify/interfaces/external/point-of-view-options.interface.ts
@@ -0,0 +1,29 @@
+/**
+ * @see https://github.com/fastify/point-of-view/blob/master/index.d.ts
+ */
+
+export interface PointOfViewOptions {
+  engine: {
+    ejs?: any;
+    eta?: any;
+    nunjucks?: any;
+    pug?: any;
+    handlebars?: any;
+    mustache?: any;
+    'art-template'?: any;
+    twig?: any;
+    liquid?: any;
+    dot?: any;
+  };
+  templates?: string;
+  includeViewExtension?: boolean;
+  options?: object;
+  charset?: string;
+  maxCache?: number;
+  production?: boolean;
+  defaultContext?: object;
+  layout?: string;
+  root?: string;
+  viewExt?: string;
+  propertyName?: string;
+}
diff --git a/packages/platform-fastify/interfaces/index.ts b/packages/platform-fastify/interfaces/index.ts
index ae18b9a3c..ee1841f2f 100644
--- a/packages/platform-fastify/interfaces/index.ts
+++ b/packages/platform-fastify/interfaces/index.ts
@@ -1,2 +1 @@
 export * from './nest-fastify-application.interface';
-export * from './nest-fastify-body-parser-options.interface';
diff --git a/packages/platform-fastify/interfaces/nest-fastify-application.interface.ts b/packages/platform-fastify/interfaces/nest-fastify-application.interface.ts
index e77c715fd..71908f43a 100644
--- a/packages/platform-fastify/interfaces/nest-fastify-application.interface.ts
+++ b/packages/platform-fastify/interfaces/nest-fastify-application.interface.ts
@@ -1,37 +1,19 @@
-import { INestApplication, HttpServer } from '@nestjs/common';
+import { INestApplication } from '@nestjs/common';
 import {
-  FastifyBodyParser,
   FastifyInstance,
   FastifyPluginAsync,
   FastifyPluginCallback,
   FastifyPluginOptions,
   FastifyRegisterOptions,
-  FastifyRequest,
-  FastifyReply,
-  RawServerBase,
-  RawServerDefault,
 } from 'fastify';
 import {
   Chain as LightMyRequestChain,
   InjectOptions,
   Response as LightMyRequestResponse,
 } from 'light-my-request';
-import { FastifyStaticOptions, FastifyViewOptions } from './external';
-import { NestFastifyBodyParserOptions } from './nest-fastify-body-parser-options.interface';
-
-/**
- * @publicApi
- */
-export interface NestFastifyApplication<
-  TServer extends RawServerBase = RawServerDefault,
-> extends INestApplication<TServer> {
-  /**
-   * Returns the underlying HTTP adapter bounded to a Fastify app.
-   *
-   * @returns {HttpServer}
-   */
-  getHttpAdapter(): HttpServer<FastifyRequest, FastifyReply, FastifyInstance>;
+import { FastifyStaticOptions, PointOfViewOptions } from './external';
 
+export interface NestFastifyApplication extends INestApplication {
   /**
    * A wrapper function around native `fastify.register()` method.
    * Example `app.register(require('@fastify/formbody'))
@@ -46,27 +28,6 @@ export interface NestFastifyApplication<
     opts?: FastifyRegisterOptions<Options>,
   ): Promise<FastifyInstance>;
 
-  /**
-   * Register Fastify body parsers on the fly. Will respect
-   * the application's `rawBody` option.
-   *
-   * @example
-   * const app = await NestFactory.create<NestFastifyApplication>(
-   *   AppModule,
-   *   new FastifyAdapter(),
-   *   { rawBody: true }
-   * );
-   * // enable the json parser with a parser limit of 50mb
-   * app.useBodyParser('application/json', { bodyLimit: 50 * 1000 * 1024 });
-   *
-   * @returns {this}
-   */
-  useBodyParser<TServer extends RawServerBase = RawServerBase>(
-    type: string | string[] | RegExp,
-    options?: NestFastifyBodyParserOptions,
-    parser?: FastifyBodyParser<Buffer, TServer>,
-  ): this;
-
   /**
    * Sets a base directory for public assets.
    * Example `app.useStaticAssets({ root: 'public' })`
@@ -77,10 +38,10 @@ export interface NestFastifyApplication<
   /**
    * Sets a view engine for templates (views), for example: `pug`, `handlebars`, or `ejs`.
    *
-   * Don't pass in a string. The string type in the argument is for compatibility reason and will cause an exception.
+   * Don't pass in a string. The string type in the argument is for compatibilility reason and will cause an exception.
    * @returns {this}
    */
-  setViewEngine(options: FastifyViewOptions | string): this;
+  setViewEngine(options: PointOfViewOptions | string): this;
 
   /**
    * A wrapper function around native `fastify.inject()` method.
diff --git a/packages/platform-fastify/interfaces/nest-fastify-body-parser-options.interface.ts b/packages/platform-fastify/interfaces/nest-fastify-body-parser-options.interface.ts
deleted file mode 100644
index 9f7ecc054..000000000
--- a/packages/platform-fastify/interfaces/nest-fastify-body-parser-options.interface.ts
+++ /dev/null
@@ -1,6 +0,0 @@
-import type { AddContentTypeParser } from 'fastify';
-
-export type NestFastifyBodyParserOptions = Omit<
-  Parameters<AddContentTypeParser>[1],
-  'parseAs'
->;
diff --git a/packages/platform-fastify/package.json b/packages/platform-fastify/package.json
index 8a2b0a470..5a8f47967 100644
--- a/packages/platform-fastify/package.json
+++ b/packages/platform-fastify/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/platform-fastify",
-  "version": "9.4.0",
+  "version": "9.2.0",
   "description": "Nest - modern, fast, powerful node.js web framework (@platform-fastify)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -17,13 +17,13 @@
     "access": "public"
   },
   "dependencies": {
-    "@fastify/cors": "8.2.1",
-    "@fastify/formbody": "7.4.0",
-    "@fastify/middie": "8.1.0",
-    "fastify": "4.15.0",
-    "light-my-request": "5.9.1",
+    "@fastify/cors": "8.1.1",
+    "@fastify/formbody": "7.3.0",
+    "@fastify/middie": "8.0.0",
+    "fastify": "4.9.2",
+    "light-my-request": "5.6.1",
     "path-to-regexp": "3.2.0",
-    "tslib": "2.5.0"
+    "tslib": "2.4.1"
   },
   "peerDependencies": {
     "@fastify/static": "^6.0.0",
diff --git a/packages/platform-fastify/tsconfig.build.json b/packages/platform-fastify/tsconfig.build.json
deleted file mode 100644
index 732ca00cb..000000000
--- a/packages/platform-fastify/tsconfig.build.json
+++ /dev/null
@@ -1,22 +0,0 @@
-{
-  "extends": "../tsconfig.build.json",
-  "compilerOptions": {
-    "outDir": ".",
-    "rootDir": ".",
-    "paths": {
-      "@nestjs/common": ["../common"],
-      "@nestjs/common/*": ["../common/*"],
-      "@nestjs/core": ["../core"],
-      "@nestjs/core/*": ["../core/*"]
-    }
-  },
-  "exclude": ["node_modules", "dist", "test/**/*", "*.spec.ts"],
-  "references": [
-    {
-      "path": "../common/tsconfig.build.json"
-    },
-    {
-      "path": "../core/tsconfig.build.json"
-    }
-  ]
-}
diff --git a/packages/platform-fastify/tsconfig.json b/packages/platform-fastify/tsconfig.json
index 2ae9e3c90..b238080a4 100644
--- a/packages/platform-fastify/tsconfig.json
+++ b/packages/platform-fastify/tsconfig.json
@@ -1,13 +1,7 @@
 {
-  "extends": "../tsconfig.build.json",
+  "extends": "./../tsconfig.base.json",
   "compilerOptions": {
-    "types": ["node"]
+    "baseUrl": "./"
   },
-  "files": [],
-  "include": [],
-  "references": [
-    {
-      "path": "./tsconfig.build.json"
-    }
-  ]
+  "include": ["*.ts", "**/*.ts"]
 }
diff --git a/packages/platform-socket.io/Readme.md b/packages/platform-socket.io/Readme.md
index 16f48336d..5203ac4c2 100644
--- a/packages/platform-socket.io/Readme.md
+++ b/packages/platform-socket.io/Readme.md
@@ -11,6 +11,7 @@
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/l/@nestjs/core.svg" alt="Package License" /></a>
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/dm/@nestjs/common.svg" alt="NPM Downloads" /></a>
 <a href="https://circleci.com/gh/nestjs/nest" target="_blank"><img src="https://img.shields.io/circleci/build/github/nestjs/nest/master" alt="CircleCI" /></a>
+<a href="https://coveralls.io/github/nestjs/nest?branch=master" target="_blank"><img src="https://coveralls.io/repos/github/nestjs/nest/badge.svg?branch=master#9" alt="Coverage" /></a>
 <a href="https://discord.gg/G7Qnnhy" target="_blank"><img src="https://img.shields.io/badge/discord-online-brightgreen.svg" alt="Discord"/></a>
 <a href="https://opencollective.com/nest#backer" target="_blank"><img src="https://opencollective.com/nest/backers/badge.svg" alt="Backers on Open Collective" /></a>
 <a href="https://opencollective.com/nest#sponsor" target="_blank"><img src="https://opencollective.com/nest/sponsors/badge.svg" alt="Sponsors on Open Collective" /></a>
@@ -77,10 +78,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
  <td>
 <a href="https://jetbrains.com/" target="_blank"><img src="https://nestjs.com/img/jetbrains-logo.svg" width="110" valign="middle" /></a></td><td>
 <a href="https://snyk.co/nestjs" target="_blank"><img src="https://nestjs.com/img/snyk-logo-black.png" width="185" valign="middle" /></a></td><td>
-<a href="https://fuseautotech.com/" target="_blank"><img src="https://nestjs.com/img/fuse-logo.svg" width="105" valign="middle" /></a></td>
-<td>
-<a href="https://ridicorp.com/career/" target="_blank"><img src="https://nestjs.com/img/ridi-logo.svg" width="105" valign="middle" /></a></td><td>
-<a href="https://www.movavi.com/imovie-for-windows.html" target="_blank"><img src="https://nestjs.com/img/movavi-logo.svg" width="105" valign="middle" /></a></td></</tr></table>
+<a href="https://fuseautotech.com/" target="_blank"><img src="https://nestjs.com/img/fuse-logo.svg" width="105" valign="middle" /></a></td></</tr></table>
 
 #### Silver Sponsors
 
@@ -93,8 +91,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
 <td><a href="https://www.tinystacks.com" target="_blank"><img src="https://nestjs.com/img/tinystacks-logo.png#1" width="140" valign="middle" /></td>
 <td><a href="https://n.inc" target="_blank"><img src="https://nestjs.com/img/n-inc-logo.svg" width="120" valign="middle" /></td></tr><tr>
 <td><a href="https://bilberrry.com/" target="_blank"><img src="https://nestjs.com/img/bilberrry-logo.svg" width="180" valign="middle" /></td>
-<td><a href="https://ipinfo.ai/" target="_blank"><img src="https://nestjs.com/img/ipinfo-logo.png" width="130" valign="middle" /></td>
-<td><a href="https://chax.at" target="_blank"><img src="https://nestjs.com/img/chaxat-logo.png" width="100" valign="middle" /></td></tr>
+<td><a href="https://ipinfo.ai/" target="_blank"><img src="https://nestjs.com/img/ipinfo-logo.png" width="130" valign="middle" /></td></tr>
 </table>
 
 #### Sponsors
@@ -135,8 +132,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
    <td align="center" valign="middle"><a href="https://mobilereality.pl/" target="_blank"><img src="https://nestjs.com/img/mobile-reality-logo.png" width="45" valign="middle" /></a></td>
      <td align="center" valign="middle"><a href="https://boringowl.io/" target="_blank"><img src="https://nestjs.com/img/boringowl-logo.svg" width="120" valign="middle" /></a></td>
  <td align="center" valign="middle"><a href="https://www.mobilefactory.jp/" target="_blank"><img src="https://nestjs.com/img/mobilefactory-logo.png" width="100" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://nordbot.app/" target="_blank"><img src="https://nestjs.com/img/nordbot-logo.png" width="120" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://doppio.sh/" target="_blank"><img src="https://nestjs.com/img/dopiosh-logo.png" width="50" valign="middle" /></a></td>
+ <td align="center" valign="middle"><a href="https://db.nordbot.app/" target="_blank"><img src="https://nestjs.com/img/nord-logo.png" width="50" valign="middle" /></a></td>
   </tr></table>
 
 ## Backers
diff --git a/packages/platform-socket.io/adapters/io-adapter.ts b/packages/platform-socket.io/adapters/io-adapter.ts
index d3c8d161d..22eb9155c 100644
--- a/packages/platform-socket.io/adapters/io-adapter.ts
+++ b/packages/platform-socket.io/adapters/io-adapter.ts
@@ -8,9 +8,6 @@ import { fromEvent, Observable } from 'rxjs';
 import { filter, first, map, mergeMap, share, takeUntil } from 'rxjs/operators';
 import { Server, ServerOptions, Socket } from 'socket.io';
 
-/**
- * @publicApi
- */
 export class IoAdapter extends AbstractWsAdapter {
   public create(
     port: number,
diff --git a/packages/platform-socket.io/index.ts b/packages/platform-socket.io/index.ts
index 434d79eb4..2805fc831 100644
--- a/packages/platform-socket.io/index.ts
+++ b/packages/platform-socket.io/index.ts
@@ -1,6 +1,6 @@
 /*
  * Nest @platform-socket.io
- * Copyright(c) 2017 - 2023 Kamil Mysliwiec
+ * Copyright(c) 2017 - 2022 Kamil Mysliwiec
  * https://nestjs.com
  * MIT Licensed
  */
diff --git a/packages/platform-socket.io/package.json b/packages/platform-socket.io/package.json
index 8a1eda801..057b5e2bf 100644
--- a/packages/platform-socket.io/package.json
+++ b/packages/platform-socket.io/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/platform-socket.io",
-  "version": "9.4.0",
+  "version": "9.2.0",
   "description": "Nest - modern, fast, powerful node.js web framework (@platform-socket.io)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -17,8 +17,8 @@
     "access": "public"
   },
   "dependencies": {
-    "socket.io": "4.6.1",
-    "tslib": "2.5.0"
+    "socket.io": "4.5.3",
+    "tslib": "2.4.1"
   },
   "peerDependencies": {
     "@nestjs/common": "^9.0.0",
diff --git a/packages/platform-socket.io/tsconfig.build.json b/packages/platform-socket.io/tsconfig.build.json
deleted file mode 100644
index b9ccddc22..000000000
--- a/packages/platform-socket.io/tsconfig.build.json
+++ /dev/null
@@ -1,22 +0,0 @@
-{
-  "extends": "../tsconfig.build.json",
-  "compilerOptions": {
-    "outDir": ".",
-    "rootDir": ".",
-    "paths": {
-      "@nestjs/common": ["../common"],
-      "@nestjs/common/*": ["../common/*"],
-      "@nestjs/websockets": ["../websockets"],
-      "@nestjs/websockets/*": ["../websockets/*"]
-    }
-  },
-  "exclude": ["node_modules", "dist", "test/**/*", "*.spec.ts"],
-  "references": [
-    {
-      "path": "../common/tsconfig.build.json"
-    },
-    {
-      "path": "../websockets/tsconfig.build.json"
-    }
-  ]
-}
diff --git a/packages/platform-socket.io/tsconfig.json b/packages/platform-socket.io/tsconfig.json
index 2ae9e3c90..b238080a4 100644
--- a/packages/platform-socket.io/tsconfig.json
+++ b/packages/platform-socket.io/tsconfig.json
@@ -1,13 +1,7 @@
 {
-  "extends": "../tsconfig.build.json",
+  "extends": "./../tsconfig.base.json",
   "compilerOptions": {
-    "types": ["node"]
+    "baseUrl": "./"
   },
-  "files": [],
-  "include": [],
-  "references": [
-    {
-      "path": "./tsconfig.build.json"
-    }
-  ]
+  "include": ["*.ts", "**/*.ts"]
 }
diff --git a/packages/platform-ws/Readme.md b/packages/platform-ws/Readme.md
index 16f48336d..5203ac4c2 100644
--- a/packages/platform-ws/Readme.md
+++ b/packages/platform-ws/Readme.md
@@ -11,6 +11,7 @@
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/l/@nestjs/core.svg" alt="Package License" /></a>
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/dm/@nestjs/common.svg" alt="NPM Downloads" /></a>
 <a href="https://circleci.com/gh/nestjs/nest" target="_blank"><img src="https://img.shields.io/circleci/build/github/nestjs/nest/master" alt="CircleCI" /></a>
+<a href="https://coveralls.io/github/nestjs/nest?branch=master" target="_blank"><img src="https://coveralls.io/repos/github/nestjs/nest/badge.svg?branch=master#9" alt="Coverage" /></a>
 <a href="https://discord.gg/G7Qnnhy" target="_blank"><img src="https://img.shields.io/badge/discord-online-brightgreen.svg" alt="Discord"/></a>
 <a href="https://opencollective.com/nest#backer" target="_blank"><img src="https://opencollective.com/nest/backers/badge.svg" alt="Backers on Open Collective" /></a>
 <a href="https://opencollective.com/nest#sponsor" target="_blank"><img src="https://opencollective.com/nest/sponsors/badge.svg" alt="Sponsors on Open Collective" /></a>
@@ -77,10 +78,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
  <td>
 <a href="https://jetbrains.com/" target="_blank"><img src="https://nestjs.com/img/jetbrains-logo.svg" width="110" valign="middle" /></a></td><td>
 <a href="https://snyk.co/nestjs" target="_blank"><img src="https://nestjs.com/img/snyk-logo-black.png" width="185" valign="middle" /></a></td><td>
-<a href="https://fuseautotech.com/" target="_blank"><img src="https://nestjs.com/img/fuse-logo.svg" width="105" valign="middle" /></a></td>
-<td>
-<a href="https://ridicorp.com/career/" target="_blank"><img src="https://nestjs.com/img/ridi-logo.svg" width="105" valign="middle" /></a></td><td>
-<a href="https://www.movavi.com/imovie-for-windows.html" target="_blank"><img src="https://nestjs.com/img/movavi-logo.svg" width="105" valign="middle" /></a></td></</tr></table>
+<a href="https://fuseautotech.com/" target="_blank"><img src="https://nestjs.com/img/fuse-logo.svg" width="105" valign="middle" /></a></td></</tr></table>
 
 #### Silver Sponsors
 
@@ -93,8 +91,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
 <td><a href="https://www.tinystacks.com" target="_blank"><img src="https://nestjs.com/img/tinystacks-logo.png#1" width="140" valign="middle" /></td>
 <td><a href="https://n.inc" target="_blank"><img src="https://nestjs.com/img/n-inc-logo.svg" width="120" valign="middle" /></td></tr><tr>
 <td><a href="https://bilberrry.com/" target="_blank"><img src="https://nestjs.com/img/bilberrry-logo.svg" width="180" valign="middle" /></td>
-<td><a href="https://ipinfo.ai/" target="_blank"><img src="https://nestjs.com/img/ipinfo-logo.png" width="130" valign="middle" /></td>
-<td><a href="https://chax.at" target="_blank"><img src="https://nestjs.com/img/chaxat-logo.png" width="100" valign="middle" /></td></tr>
+<td><a href="https://ipinfo.ai/" target="_blank"><img src="https://nestjs.com/img/ipinfo-logo.png" width="130" valign="middle" /></td></tr>
 </table>
 
 #### Sponsors
@@ -135,8 +132,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
    <td align="center" valign="middle"><a href="https://mobilereality.pl/" target="_blank"><img src="https://nestjs.com/img/mobile-reality-logo.png" width="45" valign="middle" /></a></td>
      <td align="center" valign="middle"><a href="https://boringowl.io/" target="_blank"><img src="https://nestjs.com/img/boringowl-logo.svg" width="120" valign="middle" /></a></td>
  <td align="center" valign="middle"><a href="https://www.mobilefactory.jp/" target="_blank"><img src="https://nestjs.com/img/mobilefactory-logo.png" width="100" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://nordbot.app/" target="_blank"><img src="https://nestjs.com/img/nordbot-logo.png" width="120" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://doppio.sh/" target="_blank"><img src="https://nestjs.com/img/dopiosh-logo.png" width="50" valign="middle" /></a></td>
+ <td align="center" valign="middle"><a href="https://db.nordbot.app/" target="_blank"><img src="https://nestjs.com/img/nord-logo.png" width="50" valign="middle" /></a></td>
   </tr></table>
 
 ## Backers
diff --git a/packages/platform-ws/adapters/ws-adapter.ts b/packages/platform-ws/adapters/ws-adapter.ts
index d0791be91..973bce7b9 100644
--- a/packages/platform-ws/adapters/ws-adapter.ts
+++ b/packages/platform-ws/adapters/ws-adapter.ts
@@ -1,6 +1,5 @@
 import { INestApplicationContext, Logger } from '@nestjs/common';
 import { loadPackage } from '@nestjs/common/utils/load-package.util';
-import { normalizePath, isNil } from '@nestjs/common/utils/shared.utils';
 import { AbstractWsAdapter } from '@nestjs/websockets';
 import {
   CLOSE_EVENT,
@@ -28,9 +27,6 @@ type WsServerRegistryEntry = any[];
 
 const UNDERLYING_HTTP_SERVER_PORT = 0;
 
-/**
- * @publicApi
- */
 export class WsAdapter extends AbstractWsAdapter {
   protected readonly logger = new Logger(WsAdapter.name);
   protected readonly httpServersRegistry = new Map<
@@ -49,13 +45,9 @@ export class WsAdapter extends AbstractWsAdapter {
 
   public create(
     port: number,
-    options?: Record<string, any> & {
-      namespace?: string;
-      server?: any;
-      path?: string;
-    },
+    options?: Record<string, any> & { namespace?: string; server?: any },
   ) {
-    const { server, path, ...wsOptions } = options;
+    const { server, ...wsOptions } = options;
     if (wsOptions?.namespace) {
       const error = new Error(
         '"WsAdapter" does not support namespaces. If you need namespaces in your project, consider using the "@nestjs/platform-socket.io" package instead.',
@@ -73,14 +65,14 @@ export class WsAdapter extends AbstractWsAdapter {
         }),
       );
 
-      this.addWsServerToRegistry(wsServer, port, path);
+      this.addWsServerToRegistry(wsServer, port, options.path || '/');
       return wsServer;
     }
 
     if (server) {
       return server;
     }
-    if (path && port !== UNDERLYING_HTTP_SERVER_PORT) {
+    if (options.path && port !== UNDERLYING_HTTP_SERVER_PORT) {
       // Multiple servers with different paths
       // sharing a single HTTP/S server running on different port
       // than a regular HTTP application
@@ -93,13 +85,12 @@ export class WsAdapter extends AbstractWsAdapter {
           ...wsOptions,
         }),
       );
-      this.addWsServerToRegistry(wsServer, port, path);
+      this.addWsServerToRegistry(wsServer, port, options.path);
       return wsServer;
     }
     const wsServer = this.bindErrorHandler(
       new wsPackage.Server({
         port,
-        path,
         ...wsOptions,
       }),
     );
@@ -115,7 +106,7 @@ export class WsAdapter extends AbstractWsAdapter {
     const source$ = fromEvent(client, 'message').pipe(
       mergeMap(data =>
         this.bindMessageHandler(data, handlers, transform).pipe(
-          filter(result => !isNil(result)),
+          filter(result => result),
         ),
       ),
       takeUntil(close$),
@@ -207,7 +198,7 @@ export class WsAdapter extends AbstractWsAdapter {
     const entries = this.wsServersRegistry.get(port) ?? [];
     entries.push(wsServer);
 
-    wsServer.path = normalizePath(path);
+    wsServer.path = path;
     this.wsServersRegistry.set(port, entries);
   }
 }
diff --git a/packages/platform-ws/index.ts b/packages/platform-ws/index.ts
index e83223e11..0fb20dd10 100644
--- a/packages/platform-ws/index.ts
+++ b/packages/platform-ws/index.ts
@@ -1,6 +1,6 @@
 /*
  * Nest @platform-ws
- * Copyright(c) 2017 - 2023 Kamil Mysliwiec
+ * Copyright(c) 2017 - 2022 Kamil Mysliwiec
  * https://nestjs.com
  * MIT Licensed
  */
diff --git a/packages/platform-ws/package.json b/packages/platform-ws/package.json
index 9410fb4b2..495095fbc 100644
--- a/packages/platform-ws/package.json
+++ b/packages/platform-ws/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/platform-ws",
-  "version": "9.4.0",
+  "version": "9.2.0",
   "description": "Nest - modern, fast, powerful node.js web framework (@platform-ws)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -17,8 +17,8 @@
     "access": "public"
   },
   "dependencies": {
-    "tslib": "2.5.0",
-    "ws": "8.13.0"
+    "tslib": "2.4.1",
+    "ws": "8.11.0"
   },
   "peerDependencies": {
     "@nestjs/common": "^9.0.0",
diff --git a/packages/platform-ws/tsconfig.build.json b/packages/platform-ws/tsconfig.build.json
deleted file mode 100644
index b9ccddc22..000000000
--- a/packages/platform-ws/tsconfig.build.json
+++ /dev/null
@@ -1,22 +0,0 @@
-{
-  "extends": "../tsconfig.build.json",
-  "compilerOptions": {
-    "outDir": ".",
-    "rootDir": ".",
-    "paths": {
-      "@nestjs/common": ["../common"],
-      "@nestjs/common/*": ["../common/*"],
-      "@nestjs/websockets": ["../websockets"],
-      "@nestjs/websockets/*": ["../websockets/*"]
-    }
-  },
-  "exclude": ["node_modules", "dist", "test/**/*", "*.spec.ts"],
-  "references": [
-    {
-      "path": "../common/tsconfig.build.json"
-    },
-    {
-      "path": "../websockets/tsconfig.build.json"
-    }
-  ]
-}
diff --git a/packages/platform-ws/tsconfig.json b/packages/platform-ws/tsconfig.json
index 2ae9e3c90..b238080a4 100644
--- a/packages/platform-ws/tsconfig.json
+++ b/packages/platform-ws/tsconfig.json
@@ -1,13 +1,7 @@
 {
-  "extends": "../tsconfig.build.json",
+  "extends": "./../tsconfig.base.json",
   "compilerOptions": {
-    "types": ["node"]
+    "baseUrl": "./"
   },
-  "files": [],
-  "include": [],
-  "references": [
-    {
-      "path": "./tsconfig.build.json"
-    }
-  ]
+  "include": ["*.ts", "**/*.ts"]
 }
diff --git a/packages/testing/Readme.md b/packages/testing/Readme.md
index 16f48336d..5203ac4c2 100644
--- a/packages/testing/Readme.md
+++ b/packages/testing/Readme.md
@@ -11,6 +11,7 @@
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/l/@nestjs/core.svg" alt="Package License" /></a>
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/dm/@nestjs/common.svg" alt="NPM Downloads" /></a>
 <a href="https://circleci.com/gh/nestjs/nest" target="_blank"><img src="https://img.shields.io/circleci/build/github/nestjs/nest/master" alt="CircleCI" /></a>
+<a href="https://coveralls.io/github/nestjs/nest?branch=master" target="_blank"><img src="https://coveralls.io/repos/github/nestjs/nest/badge.svg?branch=master#9" alt="Coverage" /></a>
 <a href="https://discord.gg/G7Qnnhy" target="_blank"><img src="https://img.shields.io/badge/discord-online-brightgreen.svg" alt="Discord"/></a>
 <a href="https://opencollective.com/nest#backer" target="_blank"><img src="https://opencollective.com/nest/backers/badge.svg" alt="Backers on Open Collective" /></a>
 <a href="https://opencollective.com/nest#sponsor" target="_blank"><img src="https://opencollective.com/nest/sponsors/badge.svg" alt="Sponsors on Open Collective" /></a>
@@ -77,10 +78,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
  <td>
 <a href="https://jetbrains.com/" target="_blank"><img src="https://nestjs.com/img/jetbrains-logo.svg" width="110" valign="middle" /></a></td><td>
 <a href="https://snyk.co/nestjs" target="_blank"><img src="https://nestjs.com/img/snyk-logo-black.png" width="185" valign="middle" /></a></td><td>
-<a href="https://fuseautotech.com/" target="_blank"><img src="https://nestjs.com/img/fuse-logo.svg" width="105" valign="middle" /></a></td>
-<td>
-<a href="https://ridicorp.com/career/" target="_blank"><img src="https://nestjs.com/img/ridi-logo.svg" width="105" valign="middle" /></a></td><td>
-<a href="https://www.movavi.com/imovie-for-windows.html" target="_blank"><img src="https://nestjs.com/img/movavi-logo.svg" width="105" valign="middle" /></a></td></</tr></table>
+<a href="https://fuseautotech.com/" target="_blank"><img src="https://nestjs.com/img/fuse-logo.svg" width="105" valign="middle" /></a></td></</tr></table>
 
 #### Silver Sponsors
 
@@ -93,8 +91,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
 <td><a href="https://www.tinystacks.com" target="_blank"><img src="https://nestjs.com/img/tinystacks-logo.png#1" width="140" valign="middle" /></td>
 <td><a href="https://n.inc" target="_blank"><img src="https://nestjs.com/img/n-inc-logo.svg" width="120" valign="middle" /></td></tr><tr>
 <td><a href="https://bilberrry.com/" target="_blank"><img src="https://nestjs.com/img/bilberrry-logo.svg" width="180" valign="middle" /></td>
-<td><a href="https://ipinfo.ai/" target="_blank"><img src="https://nestjs.com/img/ipinfo-logo.png" width="130" valign="middle" /></td>
-<td><a href="https://chax.at" target="_blank"><img src="https://nestjs.com/img/chaxat-logo.png" width="100" valign="middle" /></td></tr>
+<td><a href="https://ipinfo.ai/" target="_blank"><img src="https://nestjs.com/img/ipinfo-logo.png" width="130" valign="middle" /></td></tr>
 </table>
 
 #### Sponsors
@@ -135,8 +132,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
    <td align="center" valign="middle"><a href="https://mobilereality.pl/" target="_blank"><img src="https://nestjs.com/img/mobile-reality-logo.png" width="45" valign="middle" /></a></td>
      <td align="center" valign="middle"><a href="https://boringowl.io/" target="_blank"><img src="https://nestjs.com/img/boringowl-logo.svg" width="120" valign="middle" /></a></td>
  <td align="center" valign="middle"><a href="https://www.mobilefactory.jp/" target="_blank"><img src="https://nestjs.com/img/mobilefactory-logo.png" width="100" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://nordbot.app/" target="_blank"><img src="https://nestjs.com/img/nordbot-logo.png" width="120" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://doppio.sh/" target="_blank"><img src="https://nestjs.com/img/dopiosh-logo.png" width="50" valign="middle" /></a></td>
+ <td align="center" valign="middle"><a href="https://db.nordbot.app/" target="_blank"><img src="https://nestjs.com/img/nord-logo.png" width="50" valign="middle" /></a></td>
   </tr></table>
 
 ## Backers
diff --git a/packages/testing/index.ts b/packages/testing/index.ts
index d760d09f7..0a4a47f73 100644
--- a/packages/testing/index.ts
+++ b/packages/testing/index.ts
@@ -1,6 +1,6 @@
 /*
  * Nest @testing
- * Copyright(c) 2017 - 2023 Kamil Mysliwiec
+ * Copyright(c) 2017 - 2022 Kamil Mysliwiec
  * https://nestjs.com
  * MIT Licensed
  */
diff --git a/packages/testing/interfaces/mock-factory.ts b/packages/testing/interfaces/mock-factory.ts
index 0b67435ea..6dc400fb1 100644
--- a/packages/testing/interfaces/mock-factory.ts
+++ b/packages/testing/interfaces/mock-factory.ts
@@ -1,3 +1,3 @@
-import { InjectionToken } from '@nestjs/common';
+import { InstanceToken } from '@nestjs/core/injector/module';
 
-export type MockFactory = (token?: InjectionToken) => any;
+export type MockFactory = (token?: InstanceToken) => any;
diff --git a/packages/testing/interfaces/override-by-factory-options.interface.ts b/packages/testing/interfaces/override-by-factory-options.interface.ts
index a2d58ec91..59a78d657 100644
--- a/packages/testing/interfaces/override-by-factory-options.interface.ts
+++ b/packages/testing/interfaces/override-by-factory-options.interface.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export interface OverrideByFactoryOptions {
   factory: (...args: any[]) => any;
   inject?: any[];
diff --git a/packages/testing/interfaces/override-by.interface.ts b/packages/testing/interfaces/override-by.interface.ts
index fafc82e46..25fc60a95 100644
--- a/packages/testing/interfaces/override-by.interface.ts
+++ b/packages/testing/interfaces/override-by.interface.ts
@@ -1,9 +1,6 @@
 import { TestingModuleBuilder } from '../testing-module.builder';
 import { OverrideByFactoryOptions } from './override-by-factory-options.interface';
 
-/**
- * @publicApi
- */
 export interface OverrideBy {
   useValue: (value: any) => TestingModuleBuilder;
   useFactory: (options: OverrideByFactoryOptions) => TestingModuleBuilder;
diff --git a/packages/testing/package.json b/packages/testing/package.json
index 81c012bb0..2733cf44a 100644
--- a/packages/testing/package.json
+++ b/packages/testing/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/testing",
-  "version": "9.4.0",
+  "version": "9.2.0",
   "description": "Nest - modern, fast, powerful node.js web framework (@testing)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -17,7 +17,7 @@
     "access": "public"
   },
   "dependencies": {
-    "tslib": "2.5.0"
+    "tslib": "2.4.1"
   },
   "peerDependencies": {
     "@nestjs/common": "^9.0.0",
diff --git a/packages/testing/services/testing-logger.service.ts b/packages/testing/services/testing-logger.service.ts
index 3e4b89bf8..1e7b44b2a 100644
--- a/packages/testing/services/testing-logger.service.ts
+++ b/packages/testing/services/testing-logger.service.ts
@@ -2,9 +2,6 @@
 /* eslint-disable @typescript-eslint/no-unused-vars */
 import { ConsoleLogger } from '@nestjs/common';
 
-/**
- * @publicApi
- */
 export class TestingLogger extends ConsoleLogger {
   constructor() {
     super('Testing');
diff --git a/packages/testing/testing-injector.ts b/packages/testing/testing-injector.ts
index 4847e4122..417ef295c 100644
--- a/packages/testing/testing-injector.ts
+++ b/packages/testing/testing-injector.ts
@@ -8,9 +8,6 @@ import { InstanceWrapper } from '@nestjs/core/injector/instance-wrapper';
 import { Module } from '@nestjs/core/injector/module';
 import { MockFactory } from './interfaces';
 
-/**
- * @publicApi
- */
 export class TestingInjector extends Injector {
   protected mocker?: MockFactory;
   protected container: NestContainer;
diff --git a/packages/testing/testing-instance-loader.ts b/packages/testing/testing-instance-loader.ts
index 6c4aead48..e11062210 100644
--- a/packages/testing/testing-instance-loader.ts
+++ b/packages/testing/testing-instance-loader.ts
@@ -3,7 +3,9 @@ import { Module } from '@nestjs/core/injector/module';
 import { MockFactory } from './interfaces';
 import { TestingInjector } from './testing-injector';
 
-export class TestingInstanceLoader extends InstanceLoader<TestingInjector> {
+export class TestingInstanceLoader extends InstanceLoader {
+  protected injector = new TestingInjector();
+
   public async createInstancesOfDependencies(
     modules: Map<string, Module> = this.container.getModules(),
     mocker?: MockFactory,
diff --git a/packages/testing/testing-module.builder.ts b/packages/testing/testing-module.builder.ts
index 673d7455d..e72f67785 100644
--- a/packages/testing/testing-module.builder.ts
+++ b/packages/testing/testing-module.builder.ts
@@ -1,13 +1,7 @@
-import { Logger, LoggerService, Module, ModuleMetadata } from '@nestjs/common';
-import { NestApplicationContextOptions } from '@nestjs/common/interfaces/nest-application-context-options.interface';
+import { Logger, LoggerService, Module } from '@nestjs/common';
+import { ModuleMetadata } from '@nestjs/common/interfaces';
 import { ApplicationConfig } from '@nestjs/core/application-config';
 import { NestContainer } from '@nestjs/core/injector/container';
-import { GraphInspector } from '@nestjs/core/inspector/graph-inspector';
-import { NoopGraphInspector } from '@nestjs/core/inspector/noop-graph-inspector';
-import {
-  UuidFactory,
-  UuidFactoryMode,
-} from '@nestjs/core/inspector/uuid-factory';
 import { MetadataScanner } from '@nestjs/core/metadata-scanner';
 import { DependenciesScanner } from '@nestjs/core/scanner';
 import {
@@ -16,25 +10,25 @@ import {
   OverrideByFactoryOptions,
 } from './interfaces';
 import { TestingLogger } from './services/testing-logger.service';
-import { TestingInjector } from './testing-injector';
 import { TestingInstanceLoader } from './testing-instance-loader';
 import { TestingModule } from './testing-module';
 
-/**
- * @publicApi
- */
 export class TestingModuleBuilder {
   private readonly applicationConfig = new ApplicationConfig();
   private readonly container = new NestContainer(this.applicationConfig);
   private readonly overloadsMap = new Map();
+  private readonly scanner: DependenciesScanner;
+  private readonly instanceLoader = new TestingInstanceLoader(this.container);
   private readonly module: any;
   private testingLogger: LoggerService;
   private mocker?: MockFactory;
 
-  constructor(
-    private readonly metadataScanner: MetadataScanner,
-    metadata: ModuleMetadata,
-  ) {
+  constructor(metadataScanner: MetadataScanner, metadata: ModuleMetadata) {
+    this.scanner = new DependenciesScanner(
+      this.container,
+      metadataScanner,
+      this.applicationConfig,
+    );
     this.module = this.createModule(metadata);
   }
 
@@ -68,39 +62,19 @@ export class TestingModuleBuilder {
     return this.override(typeOrToken, true);
   }
 
-  public async compile(
-    options: Pick<NestApplicationContextOptions, 'snapshot' | 'preview'> = {},
-  ): Promise<TestingModule> {
+  public async compile(): Promise<TestingModule> {
     this.applyLogger();
-
-    let graphInspector: GraphInspector;
-    if (options?.snapshot) {
-      graphInspector = new GraphInspector(this.container);
-      UuidFactory.mode = UuidFactoryMode.Deterministic;
-    } else {
-      graphInspector = NoopGraphInspector;
-      UuidFactory.mode = UuidFactoryMode.Random;
-    }
-
-    const scanner = new DependenciesScanner(
-      this.container,
-      this.metadataScanner,
-      graphInspector,
-      this.applicationConfig,
-    );
-    await scanner.scan(this.module);
+    await this.scanner.scan(this.module);
 
     this.applyOverloadsMap();
-    await this.createInstancesOfDependencies(graphInspector, options);
-    scanner.applyApplicationProviders();
+    await this.instanceLoader.createInstancesOfDependencies(
+      this.container.getModules(),
+      this.mocker,
+    );
+    this.scanner.applyApplicationProviders();
 
     const root = this.getRootModule();
-    return new TestingModule(
-      this.container,
-      graphInspector,
-      root,
-      this.applicationConfig,
-    );
+    return new TestingModule(this.container, [], root, this.applicationConfig);
   }
 
   private override<T = any>(typeOrToken: T, isProvider: boolean): OverrideBy {
@@ -136,24 +110,6 @@ export class TestingModuleBuilder {
     return modules.next().value;
   }
 
-  private async createInstancesOfDependencies(
-    graphInspector: GraphInspector,
-    options: { preview?: boolean },
-  ) {
-    const injector = new TestingInjector({
-      preview: options?.preview ?? false,
-    });
-    const instanceLoader = new TestingInstanceLoader(
-      this.container,
-      injector,
-      graphInspector,
-    );
-    await instanceLoader.createInstancesOfDependencies(
-      this.container.getModules(),
-      this.mocker,
-    );
-  }
-
   private createModule(metadata: ModuleMetadata) {
     class RootTestModule {}
     Module(metadata)(RootTestModule);
diff --git a/packages/testing/testing-module.ts b/packages/testing/testing-module.ts
index 79d2e86c3..ec632c453 100644
--- a/packages/testing/testing-module.ts
+++ b/packages/testing/testing-module.ts
@@ -18,25 +18,15 @@ import {
 import { ApplicationConfig } from '@nestjs/core/application-config';
 import { NestContainer } from '@nestjs/core/injector/container';
 import { Module } from '@nestjs/core/injector/module';
-import { GraphInspector } from '@nestjs/core/inspector/graph-inspector';
 
-/**
- * @publicApi
- */
 export class TestingModule extends NestApplicationContext {
-  protected readonly graphInspector: GraphInspector;
-
   constructor(
     container: NestContainer,
-    graphInspector: GraphInspector,
+    scope: Type<any>[],
     contextModule: Module,
     private readonly applicationConfig: ApplicationConfig,
-    scope: Type<any>[] = [],
   ) {
-    const options = {};
-    super(container, options, contextModule, scope);
-
-    this.graphInspector = graphInspector;
+    super(container, scope, contextModule);
   }
 
   private isHttpServer(
@@ -75,7 +65,6 @@ export class TestingModule extends NestApplicationContext {
       this.container,
       httpAdapter,
       this.applicationConfig,
-      this.graphInspector,
       appOptions,
     );
     return this.createAdapterProxy<T>(instance, httpAdapter);
@@ -93,7 +82,6 @@ export class TestingModule extends NestApplicationContext {
     return new NestMicroservice(
       this.container,
       options,
-      this.graphInspector,
       this.applicationConfig,
     );
   }
diff --git a/packages/testing/tsconfig.build.json b/packages/testing/tsconfig.build.json
deleted file mode 100644
index a5a3a6305..000000000
--- a/packages/testing/tsconfig.build.json
+++ /dev/null
@@ -1,32 +0,0 @@
-{
-  "extends": "../tsconfig.build.json",
-  "compilerOptions": {
-    "outDir": ".",
-    "rootDir": ".",
-    "paths": {
-      "@nestjs/common": ["../common"],
-      "@nestjs/common/*": ["../common/*"],
-      "@nestjs/core": ["../core"],
-      "@nestjs/core/*": ["../core/*"],
-      "@nestjs/microservices": ["../microservices"],
-      "@nestjs/microservices/*": ["../microservices/*"],
-      "@nestjs/platform-express": ["../platform-express"],
-      "@nestjs/platform-express/*": ["../platform-express/*"]
-    }
-  },
-  "exclude": ["node_modules", "dist", "test/**/*", "*.spec.ts"],
-  "references": [
-    {
-      "path": "../common/tsconfig.build.json"
-    },
-    {
-      "path": "../core/tsconfig.build.json"
-    },
-    {
-      "path": "../microservices/tsconfig.build.json"
-    },
-    {
-      "path": "../platform-express/tsconfig.build.json"
-    }
-  ]
-}
diff --git a/packages/testing/tsconfig.json b/packages/testing/tsconfig.json
index 2ae9e3c90..b238080a4 100644
--- a/packages/testing/tsconfig.json
+++ b/packages/testing/tsconfig.json
@@ -1,13 +1,7 @@
 {
-  "extends": "../tsconfig.build.json",
+  "extends": "./../tsconfig.base.json",
   "compilerOptions": {
-    "types": ["node"]
+    "baseUrl": "./"
   },
-  "files": [],
-  "include": [],
-  "references": [
-    {
-      "path": "./tsconfig.build.json"
-    }
-  ]
+  "include": ["*.ts", "**/*.ts"]
 }
diff --git a/packages/tsconfig.base.json b/packages/tsconfig.base.json
new file mode 100644
index 000000000..d8d4c2be0
--- /dev/null
+++ b/packages/tsconfig.base.json
@@ -0,0 +1,23 @@
+{
+  "compilerOptions": {
+    "module": "commonjs",
+    "declaration": true,
+    "noImplicitAny": false,
+    "skipLibCheck": true,
+    "suppressImplicitAnyIndexErrors": true,
+    "noUnusedLocals": false,
+    "importHelpers": true,
+    "removeComments": false,
+    "noLib": false,
+    "emitDecoratorMetadata": true,
+    "experimentalDecorators": true,
+    "useUnknownInCatchVariables": false,
+    "target": "es2017",
+    "sourceMap": false,
+    "allowJs": false,
+    "strict": true,
+    "strictNullChecks": false,
+    "types": ["node"]
+  },
+  "exclude": ["../node_modules", "./**/*.spec.ts"]
+}
diff --git a/packages/tsconfig.json b/packages/tsconfig.json
deleted file mode 100644
index b980bbe84..000000000
--- a/packages/tsconfig.json
+++ /dev/null
@@ -1,32 +0,0 @@
-{
-  "files": [],
-  "references": [
-    {
-      "path": "./common/tsconfig.build.json"
-    },
-    {
-      "path": "./core/tsconfig.build.json"
-    },
-    {
-      "path": "./microservices/tsconfig.build.json"
-    },
-    {
-      "path": "./platform-express/tsconfig.build.json"
-    },
-    {
-      "path": "./platform-fastify/tsconfig.build.json"
-    },
-    {
-      "path": "./platform-socket.io/tsconfig.build.json"
-    },
-    {
-      "path": "./platform-ws/tsconfig.build.json"
-    },
-    {
-      "path": "./testing/tsconfig.build.json"
-    },
-    {
-      "path": "./websockets/tsconfig.build.json"
-    }
-  ]
-}
diff --git a/packages/websockets/Readme.md b/packages/websockets/Readme.md
index 16f48336d..5203ac4c2 100644
--- a/packages/websockets/Readme.md
+++ b/packages/websockets/Readme.md
@@ -11,6 +11,7 @@
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/l/@nestjs/core.svg" alt="Package License" /></a>
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/dm/@nestjs/common.svg" alt="NPM Downloads" /></a>
 <a href="https://circleci.com/gh/nestjs/nest" target="_blank"><img src="https://img.shields.io/circleci/build/github/nestjs/nest/master" alt="CircleCI" /></a>
+<a href="https://coveralls.io/github/nestjs/nest?branch=master" target="_blank"><img src="https://coveralls.io/repos/github/nestjs/nest/badge.svg?branch=master#9" alt="Coverage" /></a>
 <a href="https://discord.gg/G7Qnnhy" target="_blank"><img src="https://img.shields.io/badge/discord-online-brightgreen.svg" alt="Discord"/></a>
 <a href="https://opencollective.com/nest#backer" target="_blank"><img src="https://opencollective.com/nest/backers/badge.svg" alt="Backers on Open Collective" /></a>
 <a href="https://opencollective.com/nest#sponsor" target="_blank"><img src="https://opencollective.com/nest/sponsors/badge.svg" alt="Sponsors on Open Collective" /></a>
@@ -77,10 +78,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
  <td>
 <a href="https://jetbrains.com/" target="_blank"><img src="https://nestjs.com/img/jetbrains-logo.svg" width="110" valign="middle" /></a></td><td>
 <a href="https://snyk.co/nestjs" target="_blank"><img src="https://nestjs.com/img/snyk-logo-black.png" width="185" valign="middle" /></a></td><td>
-<a href="https://fuseautotech.com/" target="_blank"><img src="https://nestjs.com/img/fuse-logo.svg" width="105" valign="middle" /></a></td>
-<td>
-<a href="https://ridicorp.com/career/" target="_blank"><img src="https://nestjs.com/img/ridi-logo.svg" width="105" valign="middle" /></a></td><td>
-<a href="https://www.movavi.com/imovie-for-windows.html" target="_blank"><img src="https://nestjs.com/img/movavi-logo.svg" width="105" valign="middle" /></a></td></</tr></table>
+<a href="https://fuseautotech.com/" target="_blank"><img src="https://nestjs.com/img/fuse-logo.svg" width="105" valign="middle" /></a></td></</tr></table>
 
 #### Silver Sponsors
 
@@ -93,8 +91,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
 <td><a href="https://www.tinystacks.com" target="_blank"><img src="https://nestjs.com/img/tinystacks-logo.png#1" width="140" valign="middle" /></td>
 <td><a href="https://n.inc" target="_blank"><img src="https://nestjs.com/img/n-inc-logo.svg" width="120" valign="middle" /></td></tr><tr>
 <td><a href="https://bilberrry.com/" target="_blank"><img src="https://nestjs.com/img/bilberrry-logo.svg" width="180" valign="middle" /></td>
-<td><a href="https://ipinfo.ai/" target="_blank"><img src="https://nestjs.com/img/ipinfo-logo.png" width="130" valign="middle" /></td>
-<td><a href="https://chax.at" target="_blank"><img src="https://nestjs.com/img/chaxat-logo.png" width="100" valign="middle" /></td></tr>
+<td><a href="https://ipinfo.ai/" target="_blank"><img src="https://nestjs.com/img/ipinfo-logo.png" width="130" valign="middle" /></td></tr>
 </table>
 
 #### Sponsors
@@ -135,8 +132,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
    <td align="center" valign="middle"><a href="https://mobilereality.pl/" target="_blank"><img src="https://nestjs.com/img/mobile-reality-logo.png" width="45" valign="middle" /></a></td>
      <td align="center" valign="middle"><a href="https://boringowl.io/" target="_blank"><img src="https://nestjs.com/img/boringowl-logo.svg" width="120" valign="middle" /></a></td>
  <td align="center" valign="middle"><a href="https://www.mobilefactory.jp/" target="_blank"><img src="https://nestjs.com/img/mobilefactory-logo.png" width="100" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://nordbot.app/" target="_blank"><img src="https://nestjs.com/img/nordbot-logo.png" width="120" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://doppio.sh/" target="_blank"><img src="https://nestjs.com/img/dopiosh-logo.png" width="50" valign="middle" /></a></td>
+ <td align="center" valign="middle"><a href="https://db.nordbot.app/" target="_blank"><img src="https://nestjs.com/img/nord-logo.png" width="50" valign="middle" /></a></td>
   </tr></table>
 
 ## Backers
diff --git a/packages/websockets/context/exception-filters-context.ts b/packages/websockets/context/exception-filters-context.ts
index 6ec95a1f9..319aedc54 100644
--- a/packages/websockets/context/exception-filters-context.ts
+++ b/packages/websockets/context/exception-filters-context.ts
@@ -4,9 +4,6 @@ import { BaseExceptionFilterContext } from '@nestjs/core/exceptions/base-excepti
 import { NestContainer } from '@nestjs/core/injector/container';
 import { WsExceptionsHandler } from '../exceptions/ws-exceptions-handler';
 
-/**
- * @publicApi
- */
 export class ExceptionFiltersContext extends BaseExceptionFilterContext {
   constructor(container: NestContainer) {
     super(container);
diff --git a/packages/websockets/context/ws-context-creator.ts b/packages/websockets/context/ws-context-creator.ts
index 3dca71f95..7d575ef46 100644
--- a/packages/websockets/context/ws-context-creator.ts
+++ b/packages/websockets/context/ws-context-creator.ts
@@ -18,11 +18,10 @@ import {
 import { ExecutionContextHost } from '@nestjs/core/helpers/execution-context-host';
 import { HandlerMetadataStorage } from '@nestjs/core/helpers/handler-metadata-storage';
 import { ParamsMetadata } from '@nestjs/core/helpers/interfaces';
-import {
-  InterceptorsConsumer,
-  InterceptorsContextCreator,
-} from '@nestjs/core/interceptors';
-import { PipesConsumer, PipesContextCreator } from '@nestjs/core/pipes';
+import { InterceptorsConsumer } from '@nestjs/core/interceptors/interceptors-consumer';
+import { InterceptorsContextCreator } from '@nestjs/core/interceptors/interceptors-context-creator';
+import { PipesConsumer } from '@nestjs/core/pipes/pipes-consumer';
+import { PipesContextCreator } from '@nestjs/core/pipes/pipes-context-creator';
 import { PARAM_ARGS_METADATA } from '../constants';
 import { WsException } from '../errors/ws-exception';
 import { WsParamsFactory } from '../factories/ws-params-factory';
diff --git a/packages/websockets/decorators/connected-socket.decorator.ts b/packages/websockets/decorators/connected-socket.decorator.ts
index c21e4f8a1..32bd663c7 100644
--- a/packages/websockets/decorators/connected-socket.decorator.ts
+++ b/packages/websockets/decorators/connected-socket.decorator.ts
@@ -1,9 +1,6 @@
 import { WsParamtype } from '../enums/ws-paramtype.enum';
 import { createWsParamDecorator } from '../utils/param.utils';
 
-/**
- * @publicApi
- */
 export const ConnectedSocket: () => ParameterDecorator = createWsParamDecorator(
   WsParamtype.SOCKET,
 );
diff --git a/packages/websockets/decorators/gateway-server.decorator.ts b/packages/websockets/decorators/gateway-server.decorator.ts
index 3a0832639..a3a21b634 100644
--- a/packages/websockets/decorators/gateway-server.decorator.ts
+++ b/packages/websockets/decorators/gateway-server.decorator.ts
@@ -2,8 +2,6 @@ import { GATEWAY_SERVER_METADATA } from '../constants';
 
 /**
  * Attaches native Web Socket Server to a given property.
- *
- * @publicApi
  */
 export const WebSocketServer = (): PropertyDecorator => {
   return (target: object, propertyKey: string | symbol) => {
diff --git a/packages/websockets/decorators/socket-gateway.decorator.ts b/packages/websockets/decorators/socket-gateway.decorator.ts
index 8fc1c9bae..4361b121d 100644
--- a/packages/websockets/decorators/socket-gateway.decorator.ts
+++ b/packages/websockets/decorators/socket-gateway.decorator.ts
@@ -4,8 +4,6 @@ import { GatewayMetadata } from '../interfaces';
 /**
  * Decorator that marks a class as a Nest gateway that enables real-time, bidirectional
  * and event-based communication between the browser and the server.
- *
- * @publicApi
  */
 export function WebSocketGateway(port?: number): ClassDecorator;
 export function WebSocketGateway<
diff --git a/packages/websockets/decorators/subscribe-message.decorator.ts b/packages/websockets/decorators/subscribe-message.decorator.ts
index 4e3329900..2b22c9376 100644
--- a/packages/websockets/decorators/subscribe-message.decorator.ts
+++ b/packages/websockets/decorators/subscribe-message.decorator.ts
@@ -2,8 +2,6 @@ import { MESSAGE_MAPPING_METADATA, MESSAGE_METADATA } from '../constants';
 
 /**
  * Subscribes to messages that fulfils chosen pattern.
- *
- * @publicApi
  */
 export const SubscribeMessage = <T = string>(message: T): MethodDecorator => {
   return (
diff --git a/packages/websockets/exceptions/base-ws-exception-filter.ts b/packages/websockets/exceptions/base-ws-exception-filter.ts
index bcc48b0a6..5c29d5a03 100644
--- a/packages/websockets/exceptions/base-ws-exception-filter.ts
+++ b/packages/websockets/exceptions/base-ws-exception-filter.ts
@@ -3,9 +3,6 @@ import { isObject } from '@nestjs/common/utils/shared.utils';
 import { MESSAGES } from '@nestjs/core/constants';
 import { WsException } from '../errors/ws-exception';
 
-/**
- * @publicApi
- */
 export class BaseWsExceptionFilter<TError = any>
   implements WsExceptionFilter<TError>
 {
diff --git a/packages/websockets/exceptions/ws-exceptions-handler.ts b/packages/websockets/exceptions/ws-exceptions-handler.ts
index feed7d397..e1b09589d 100644
--- a/packages/websockets/exceptions/ws-exceptions-handler.ts
+++ b/packages/websockets/exceptions/ws-exceptions-handler.ts
@@ -1,14 +1,10 @@
-import { isEmpty } from '@nestjs/common/utils/shared.utils';
 import { ArgumentsHost } from '@nestjs/common';
 import { ExceptionFilterMetadata } from '@nestjs/common/interfaces/exceptions/exception-filter-metadata.interface';
-import { selectExceptionFilterMetadata } from '@nestjs/common/utils/select-exception-filter-metadata.util';
+import { isEmpty } from '@nestjs/common/utils/shared.utils';
 import { InvalidExceptionFilterException } from '@nestjs/core/errors/exceptions/invalid-exception-filter.exception';
 import { WsException } from '../errors/ws-exception';
 import { BaseWsExceptionFilter } from './base-ws-exception-filter';
 
-/**
- * @publicApi
- */
 export class WsExceptionsHandler extends BaseWsExceptionFilter {
   private filters: ExceptionFilterMetadata[] = [];
 
@@ -33,7 +29,14 @@ export class WsExceptionsHandler extends BaseWsExceptionFilter {
   ): boolean {
     if (isEmpty(this.filters)) return false;
 
-    const filter = selectExceptionFilterMetadata(this.filters, exception);
+    const filter = this.filters.find(({ exceptionMetatypes }) => {
+      const hasMetatype =
+        !exceptionMetatypes.length ||
+        exceptionMetatypes.some(
+          ExceptionMetatype => exception instanceof ExceptionMetatype,
+        );
+      return hasMetatype;
+    });
     filter && filter.func(exception, args);
     return !!filter;
   }
diff --git a/packages/websockets/gateway-metadata-explorer.ts b/packages/websockets/gateway-metadata-explorer.ts
index 65a0c4077..dc20cfbe3 100644
--- a/packages/websockets/gateway-metadata-explorer.ts
+++ b/packages/websockets/gateway-metadata-explorer.ts
@@ -19,10 +19,12 @@ export class GatewayMetadataExplorer {
 
   public explore(instance: NestGateway): MessageMappingProperties[] {
     const instancePrototype = Object.getPrototypeOf(instance);
-    return this.metadataScanner
-      .getAllMethodNames(instancePrototype)
-      .map(method => this.exploreMethodMetadata(instancePrototype, method))
-      .filter(metadata => metadata);
+    return this.metadataScanner.scanFromPrototype<
+      NestGateway,
+      MessageMappingProperties
+    >(instance, instancePrototype, method =>
+      this.exploreMethodMetadata(instancePrototype, method),
+    );
   }
 
   public exploreMethodMetadata(
diff --git a/packages/websockets/index.ts b/packages/websockets/index.ts
index bccb398b5..e8baa6f07 100644
--- a/packages/websockets/index.ts
+++ b/packages/websockets/index.ts
@@ -1,6 +1,6 @@
 /*
  * Nest @websockets
- * Copyright(c) 2017 - 2023 Kamil Mysliwiec
+ * Copyright(c) 2017 - 2022 Kamil Mysliwiec
  * https://nestjs.com
  * MIT Licensed
  */
diff --git a/packages/websockets/interfaces/gateway-metadata.interface.ts b/packages/websockets/interfaces/gateway-metadata.interface.ts
index 383287682..9221f68ab 100644
--- a/packages/websockets/interfaces/gateway-metadata.interface.ts
+++ b/packages/websockets/interfaces/gateway-metadata.interface.ts
@@ -1,10 +1,9 @@
-import { CorsOptions } from '@nestjs/common/interfaces/external/cors-options.interface';
-
 /**
- * External interface
- * @see https://github.com/socketio/socket.io/blob/master/lib/index.ts 
- * @publicApi
+ * @external https://github.com/socketio/socket.io/blob/master/lib/index.ts
  */
+
+import { CorsOptions } from '@nestjs/common/interfaces/external/cors-options.interface';
+
 export interface GatewayMetadata {
   /**
    * The name of a namespace
diff --git a/packages/websockets/interfaces/hooks/on-gateway-connection.interface.ts b/packages/websockets/interfaces/hooks/on-gateway-connection.interface.ts
index 7f39dbdcf..b3ca0f51c 100644
--- a/packages/websockets/interfaces/hooks/on-gateway-connection.interface.ts
+++ b/packages/websockets/interfaces/hooks/on-gateway-connection.interface.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export interface OnGatewayConnection<T = any> {
   handleConnection(client: T, ...args: any[]): any;
 }
diff --git a/packages/websockets/interfaces/hooks/on-gateway-disconnect.interface.ts b/packages/websockets/interfaces/hooks/on-gateway-disconnect.interface.ts
index e86e27d8f..f038c2162 100644
--- a/packages/websockets/interfaces/hooks/on-gateway-disconnect.interface.ts
+++ b/packages/websockets/interfaces/hooks/on-gateway-disconnect.interface.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export interface OnGatewayDisconnect<T = any> {
   handleDisconnect(client: T): any;
 }
diff --git a/packages/websockets/interfaces/hooks/on-gateway-init.interface.ts b/packages/websockets/interfaces/hooks/on-gateway-init.interface.ts
index c90f5d8c6..81096e55c 100644
--- a/packages/websockets/interfaces/hooks/on-gateway-init.interface.ts
+++ b/packages/websockets/interfaces/hooks/on-gateway-init.interface.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export interface OnGatewayInit<T = any> {
   afterInit(server: T): any;
 }
diff --git a/packages/websockets/interfaces/nest-gateway.interface.ts b/packages/websockets/interfaces/nest-gateway.interface.ts
index 89472d362..1011bb053 100644
--- a/packages/websockets/interfaces/nest-gateway.interface.ts
+++ b/packages/websockets/interfaces/nest-gateway.interface.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export interface NestGateway {
   afterInit?: (server: any) => void;
   handleConnection?: (...args: any[]) => void;
diff --git a/packages/websockets/interfaces/server-and-event-streams-host.interface.ts b/packages/websockets/interfaces/server-and-event-streams-host.interface.ts
index 5049dc959..4b04a81e5 100644
--- a/packages/websockets/interfaces/server-and-event-streams-host.interface.ts
+++ b/packages/websockets/interfaces/server-and-event-streams-host.interface.ts
@@ -1,8 +1,5 @@
 import { ReplaySubject, Subject } from 'rxjs';
 
-/**
- * @publicApi
- */
 export interface ServerAndEventStreamsHost<T = any> {
   server: T;
   init: ReplaySubject<T>;
diff --git a/packages/websockets/interfaces/web-socket-server.interface.ts b/packages/websockets/interfaces/web-socket-server.interface.ts
index d573038c1..0c0387acf 100644
--- a/packages/websockets/interfaces/web-socket-server.interface.ts
+++ b/packages/websockets/interfaces/web-socket-server.interface.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export interface WebSocketServerOptions {
   port: number;
   namespace: string;
diff --git a/packages/websockets/interfaces/websockets-entrypoint-metadata.interface.ts b/packages/websockets/interfaces/websockets-entrypoint-metadata.interface.ts
deleted file mode 100644
index bd80cd5d2..000000000
--- a/packages/websockets/interfaces/websockets-entrypoint-metadata.interface.ts
+++ /dev/null
@@ -1,4 +0,0 @@
-export type WebsocketEntrypointMetadata = {
-  port: number;
-  message: unknown;
-};
diff --git a/packages/websockets/interfaces/ws-response.interface.ts b/packages/websockets/interfaces/ws-response.interface.ts
index bf04aa48a..04e815cbf 100644
--- a/packages/websockets/interfaces/ws-response.interface.ts
+++ b/packages/websockets/interfaces/ws-response.interface.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export interface WsResponse<T = any> {
   event: string;
   data: T;
diff --git a/packages/websockets/package.json b/packages/websockets/package.json
index faf4ff219..e059154f2 100644
--- a/packages/websockets/package.json
+++ b/packages/websockets/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/websockets",
-  "version": "9.4.0",
+  "version": "9.2.0",
   "description": "Nest - modern, fast, powerful node.js web framework (@websockets)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -14,11 +14,11 @@
   "dependencies": {
     "iterare": "1.2.1",
     "object-hash": "3.0.0",
-    "tslib": "2.5.0"
+    "tslib": "2.4.1"
   },
   "devDependencies": {
-    "@nestjs/common": "9.4.0",
-    "@nestjs/core": "9.4.0"
+    "@nestjs/common": "9.2.0",
+    "@nestjs/core": "9.2.0"
   },
   "peerDependencies": {
     "@nestjs/common": "^9.0.0",
diff --git a/packages/websockets/socket-module.ts b/packages/websockets/socket-module.ts
index d22e45067..681cb0a08 100644
--- a/packages/websockets/socket-module.ts
+++ b/packages/websockets/socket-module.ts
@@ -1,13 +1,11 @@
-import { InjectionToken } from '@nestjs/common/interfaces';
 import { Injectable } from '@nestjs/common/interfaces/injectable.interface';
-import { NestApplicationContextOptions } from '@nestjs/common/interfaces/nest-application-context-options.interface';
 import { ApplicationConfig } from '@nestjs/core/application-config';
 import { GuardsConsumer } from '@nestjs/core/guards/guards-consumer';
 import { GuardsContextCreator } from '@nestjs/core/guards/guards-context-creator';
 import { loadAdapter } from '@nestjs/core/helpers/load-adapter';
 import { NestContainer } from '@nestjs/core/injector/container';
 import { InstanceWrapper } from '@nestjs/core/injector/instance-wrapper';
-import { GraphInspector } from '@nestjs/core/inspector/graph-inspector';
+import { InstanceToken } from '@nestjs/core/injector/module';
 import { InterceptorsConsumer } from '@nestjs/core/interceptors/interceptors-consumer';
 import { InterceptorsContextCreator } from '@nestjs/core/interceptors/interceptors-context-creator';
 import { PipesConsumer } from '@nestjs/core/pipes/pipes-consumer';
@@ -23,39 +21,30 @@ import { SocketServerProvider } from './socket-server-provider';
 import { SocketsContainer } from './sockets-container';
 import { WebSocketsController } from './web-sockets-controller';
 
-export class SocketModule<
-  THttpServer = any,
-  TAppOptions extends NestApplicationContextOptions = NestApplicationContextOptions,
-> {
+export class SocketModule<HttpServer = any> {
   private readonly socketsContainer = new SocketsContainer();
   private applicationConfig: ApplicationConfig;
   private webSocketsController: WebSocketsController;
   private isAdapterInitialized: boolean;
-  private httpServer: THttpServer | undefined;
-  private appOptions: TAppOptions;
+  private httpServer: HttpServer | undefined;
 
   public register(
     container: NestContainer,
-    applicationConfig: ApplicationConfig,
-    graphInspector: GraphInspector,
-    appOptions: TAppOptions,
-    httpServer?: THttpServer,
+    config: ApplicationConfig,
+    httpServer?: HttpServer,
   ) {
-    this.applicationConfig = applicationConfig;
-    this.appOptions = appOptions;
+    this.applicationConfig = config;
     this.httpServer = httpServer;
 
     const contextCreator = this.getContextCreator(container);
     const serverProvider = new SocketServerProvider(
       this.socketsContainer,
-      applicationConfig,
+      config,
     );
     this.webSocketsController = new WebSocketsController(
       serverProvider,
-      applicationConfig,
+      config,
       contextCreator,
-      graphInspector,
-      this.appOptions,
     );
     const modules = container.getModules();
     modules.forEach(({ providers }, moduleName: string) =>
@@ -64,7 +53,7 @@ export class SocketModule<
   }
 
   public connectAllGateways(
-    providers: Map<InjectionToken, InstanceWrapper<Injectable>>,
+    providers: Map<InstanceToken, InstanceWrapper<Injectable>>,
     moduleName: string,
   ) {
     iterate(providers.values())
@@ -88,7 +77,6 @@ export class SocketModule<
       instance as NestGateway,
       metatype,
       moduleName,
-      wrapper.id,
     );
   }
 
diff --git a/packages/websockets/tsconfig.build.json b/packages/websockets/tsconfig.build.json
deleted file mode 100644
index 732ca00cb..000000000
--- a/packages/websockets/tsconfig.build.json
+++ /dev/null
@@ -1,22 +0,0 @@
-{
-  "extends": "../tsconfig.build.json",
-  "compilerOptions": {
-    "outDir": ".",
-    "rootDir": ".",
-    "paths": {
-      "@nestjs/common": ["../common"],
-      "@nestjs/common/*": ["../common/*"],
-      "@nestjs/core": ["../core"],
-      "@nestjs/core/*": ["../core/*"]
-    }
-  },
-  "exclude": ["node_modules", "dist", "test/**/*", "*.spec.ts"],
-  "references": [
-    {
-      "path": "../common/tsconfig.build.json"
-    },
-    {
-      "path": "../core/tsconfig.build.json"
-    }
-  ]
-}
diff --git a/packages/websockets/tsconfig.json b/packages/websockets/tsconfig.json
index 2ae9e3c90..b238080a4 100644
--- a/packages/websockets/tsconfig.json
+++ b/packages/websockets/tsconfig.json
@@ -1,13 +1,7 @@
 {
-  "extends": "../tsconfig.build.json",
+  "extends": "./../tsconfig.base.json",
   "compilerOptions": {
-    "types": ["node"]
+    "baseUrl": "./"
   },
-  "files": [],
-  "include": [],
-  "references": [
-    {
-      "path": "./tsconfig.build.json"
-    }
-  ]
+  "include": ["*.ts", "**/*.ts"]
 }
diff --git a/packages/websockets/web-sockets-controller.ts b/packages/websockets/web-sockets-controller.ts
index bb29f373f..d01811e17 100644
--- a/packages/websockets/web-sockets-controller.ts
+++ b/packages/websockets/web-sockets-controller.ts
@@ -1,13 +1,11 @@
-import { NestApplicationContextOptions } from '@nestjs/common/interfaces/nest-application-context-options.interface';
 import { Type } from '@nestjs/common/interfaces/type.interface';
 import { Logger } from '@nestjs/common/services/logger.service';
 import { ApplicationConfig } from '@nestjs/core/application-config';
-import { GraphInspector } from '@nestjs/core/inspector/graph-inspector';
 import { MetadataScanner } from '@nestjs/core/metadata-scanner';
 import {
   from as fromPromise,
-  isObservable,
   Observable,
+  isObservable,
   of,
   Subject,
 } from 'rxjs';
@@ -22,7 +20,6 @@ import {
 import { GatewayMetadata } from './interfaces/gateway-metadata.interface';
 import { NestGateway } from './interfaces/nest-gateway.interface';
 import { ServerAndEventStreamsHost } from './interfaces/server-and-event-streams-host.interface';
-import { WebsocketEntrypointMetadata } from './interfaces/websockets-entrypoint-metadata.interface';
 import { SocketServerProvider } from './socket-server-provider';
 import { compareElementAt } from './utils/compare-element.util';
 
@@ -38,15 +35,12 @@ export class WebSocketsController {
     private readonly socketServerProvider: SocketServerProvider,
     private readonly config: ApplicationConfig,
     private readonly contextCreator: WsContextCreator,
-    private readonly graphInspector: GraphInspector,
-    private readonly appOptions: NestApplicationContextOptions = {},
   ) {}
 
   public connectGatewayToServer(
     instance: NestGateway,
     metatype: Type<unknown> | Function,
     moduleKey: string,
-    instanceWrapperId: string,
   ) {
     const options = Reflect.getMetadata(GATEWAY_OPTIONS, metatype) || {};
     const port = Reflect.getMetadata(PORT_METADATA, metatype) || 0;
@@ -54,13 +48,7 @@ export class WebSocketsController {
     if (!Number.isInteger(port)) {
       throw new InvalidSocketPortException(port, metatype);
     }
-    this.subscribeToServerEvents(
-      instance,
-      options,
-      port,
-      moduleKey,
-      instanceWrapperId,
-    );
+    this.subscribeToServerEvents(instance, options, port, moduleKey);
   }
 
   public subscribeToServerEvents<T extends GatewayMetadata>(
@@ -68,7 +56,6 @@ export class WebSocketsController {
     options: T,
     port: number,
     moduleKey: string,
-    instanceWrapperId: string,
   ) {
     const nativeMessageHandlers = this.metadataExplorer.explore(instance);
     const messageHandlers = nativeMessageHandlers.map(
@@ -83,17 +70,6 @@ export class WebSocketsController {
         ),
       }),
     );
-
-    this.inspectEntrypointDefinitions(
-      instance,
-      port,
-      messageHandlers,
-      instanceWrapperId,
-    );
-
-    if (this.appOptions.preview) {
-      return;
-    }
     const observableServer = this.socketServerProvider.scanForSocketServer<T>(
       options,
       port,
@@ -196,30 +172,6 @@ export class WebSocketsController {
     return of(result);
   }
 
-  public inspectEntrypointDefinitions(
-    instance: NestGateway,
-    port: number,
-    messageHandlers: MessageMappingProperties[],
-    instanceWrapperId: string,
-  ) {
-    messageHandlers.forEach(handler => {
-      this.graphInspector.insertEntrypointDefinition<WebsocketEntrypointMetadata>(
-        {
-          type: 'websocket',
-          methodName: handler.methodName,
-          className: instance.constructor?.name,
-          classNodeId: instanceWrapperId,
-          metadata: {
-            port,
-            key: handler.message,
-            message: handler.message,
-          },
-        },
-        instanceWrapperId,
-      );
-    });
-  }
-
   private assignServerToProperties<T = any>(
     instance: NestGateway,
     server: object,
diff --git a/renovate.json b/renovate.json
index 26c1d72d6..0bb2d8556 100644
--- a/renovate.json
+++ b/renovate.json
@@ -1,5 +1,5 @@
 {
-  "extends": ["config:base", ":dependencyDashboard"],
+  "extends": ["config:base"],
   "labels": ["dependencies"],
   "packageRules": [
     {
diff --git a/sample/01-cats-app/package-lock.json b/sample/01-cats-app/package-lock.json
index 641754f8f..b5c189a2f 100644
Binary files a/sample/01-cats-app/package-lock.json and b/sample/01-cats-app/package-lock.json differ
diff --git a/sample/01-cats-app/package.json b/sample/01-cats-app/package.json
index ee1ed2a48..20504858a 100644
--- a/sample/01-cats-app/package.json
+++ b/sample/01-cats-app/package.json
@@ -19,19 +19,19 @@
     "test:e2e": "jest --config ./e2e/jest-e2e.json"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/platform-express": "9.0.1",
     "class-transformer": "0.5.1",
-    "class-validator": "0.14.0",
+    "class-validator": "0.13.2",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
+    "rimraf": "3.0.2",
     "rxjs": "7.5.5"
   },
   "devDependencies": {
     "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
     "@types/express": "4.17.13",
     "@types/jest": "28.1.4",
     "@types/node": "18.0.3",
@@ -39,16 +39,16 @@
     "jest": "28.1.2",
     "prettier": "2.7.1",
     "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
+    "ts-jest": "28.0.5",
     "ts-loader": "9.3.1",
     "ts-node": "10.8.2",
     "tsconfig-paths": "4.0.0",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
     "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
+    "eslint-config-prettier": "8.5.0",
     "eslint-plugin-import": "2.26.0",
-    "typescript": "4.9.5"
+    "typescript": "4.7.4"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/01-cats-app/tsconfig.json b/sample/01-cats-app/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/01-cats-app/tsconfig.json
+++ b/sample/01-cats-app/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/02-gateways/e2e/events-gateway/gateway.e2e-spec.ts b/sample/02-gateways/e2e/events-gateway/gateway.e2e-spec.ts
deleted file mode 100644
index 26b9f42ed..000000000
--- a/sample/02-gateways/e2e/events-gateway/gateway.e2e-spec.ts
+++ /dev/null
@@ -1,53 +0,0 @@
-import { INestApplication } from '@nestjs/common';
-import { Test } from '@nestjs/testing';
-import { AppModule } from '../../src/app.module';
-import { io, Socket } from 'socket.io-client';
-
-describe('EventsGateway', () => {
-  let app: INestApplication;
-  let socket: Socket;
-
-  beforeAll(async () => {
-    const moduleRef = await Test.createTestingModule({
-      imports: [AppModule],
-    }).compile();
-
-    app = moduleRef.createNestApplication();
-    await app.listen(3000);
-  });
-
-  beforeEach(() => {
-    socket = io('http://localhost:3000');
-    socket.connect();
-  });
-
-  describe('findAll', () => {
-    it('should receive 3 numbers', done => {
-      let eventCount = 1;
-      socket.emit('events', { test: 'test' });
-      socket.on('events', data => {
-        expect(data).toBe(eventCount);
-        if (++eventCount > 3) {
-          done();
-        }
-      });
-    });
-  });
-
-  describe('identity', () => {
-    it('should return the same number has what was sent', done => {
-      socket.emit('identity', 0, response => {
-        expect(response).toBe(0);
-        done();
-      });
-    });
-  });
-
-  afterEach(() => {
-    socket.disconnect();
-  });
-
-  afterAll(async () => {
-    await app.close();
-  });
-});
diff --git a/sample/02-gateways/e2e/jest-e2e.json b/sample/02-gateways/e2e/jest-e2e.json
deleted file mode 100644
index 72eb5c3c0..000000000
--- a/sample/02-gateways/e2e/jest-e2e.json
+++ /dev/null
@@ -1,14 +0,0 @@
-{
-    "moduleFileExtensions": [
-        "ts",
-        "tsx",
-        "js",
-        "json"
-    ],
-    "transform": {
-        "^.+\\.tsx?$": "ts-jest"
-    },
-    "testRegex": "/e2e/.*\\.(e2e-test|e2e-spec).(ts|tsx|js)$",
-    "collectCoverageFrom" : ["src/**/*.{js,jsx,tsx,ts}", "!**/node_modules/**", "!**/vendor/**"],
-    "coverageReporters": ["json", "lcov"]
-}
\ No newline at end of file
diff --git a/sample/02-gateways/jest.json b/sample/02-gateways/jest.json
deleted file mode 100644
index 591de12b6..000000000
--- a/sample/02-gateways/jest.json
+++ /dev/null
@@ -1,14 +0,0 @@
-{
-  "moduleFileExtensions": [
-        "ts",
-        "tsx",
-        "js",
-        "json"
-    ],
-    "transform": {
-        "^.+\\.tsx?$": "ts-jest"
-    },
-    "testRegex": "/src/.*\\.(test|spec).(ts|tsx|js)$",
-    "collectCoverageFrom" : ["src/**/*.{js,jsx,tsx,ts}", "!**/node_modules/**", "!**/vendor/**"],
-    "coverageReporters": ["json", "lcov"]
-}
\ No newline at end of file
diff --git a/sample/02-gateways/package-lock.json b/sample/02-gateways/package-lock.json
index 365bf5d6a..321c7ce45 100644
Binary files a/sample/02-gateways/package-lock.json and b/sample/02-gateways/package-lock.json differ
diff --git a/sample/02-gateways/package.json b/sample/02-gateways/package.json
index 4e8c9c557..0317efb04 100644
--- a/sample/02-gateways/package.json
+++ b/sample/02-gateways/package.json
@@ -16,61 +16,43 @@
     "test:watch": "jest --watch",
     "test:cov": "jest --coverage",
     "test:debug": "node --inspect-brk -r tsconfig-paths/register -r ts-node/register node_modules/.bin/jest --runInBand",
-    "test:e2e": "jest --config ./e2e/jest-e2e.json"
+    "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
-    "@nestjs/platform-socket.io": "9.3.12",
-    "@nestjs/websockets": "9.3.12",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/platform-express": "9.0.1",
+    "@nestjs/platform-socket.io": "9.0.1",
+    "@nestjs/websockets": "9.0.1",
     "@socket.io/redis-adapter": "7.2.0",
     "class-transformer": "0.5.1",
-    "class-validator": "0.14.0",
+    "class-validator": "0.13.2",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
+    "rimraf": "3.0.2",
     "rxjs": "7.5.5",
-    "socket.io": "4.6.1"
+    "socket.io": "4.5.1"
   },
   "devDependencies": {
     "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
     "@types/express": "4.17.13",
-    "@types/jest": "28.1.4",
     "@types/node": "18.0.3",
     "@types/supertest": "2.0.12",
     "@types/ws": "8.5.3",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
     "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
+    "eslint-config-prettier": "8.5.0",
     "eslint-plugin-import": "2.26.0",
     "jest": "28.1.2",
     "prettier": "2.7.1",
-    "redis": "4.6.5",
+    "redis": "4.2.0",
     "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
+    "ts-jest": "28.0.5",
     "ts-loader": "9.3.1",
     "ts-node": "10.8.2",
     "tsconfig-paths": "4.0.0",
-    "typescript": "4.9.5"
-  },
-  "jest": {
-    "moduleFileExtensions": [
-      "js",
-      "json",
-      "ts"
-    ],
-    "rootDir": "src",
-    "testRegex": ".*\\.spec\\.ts$",
-    "transform": {
-      "^.+\\.(t|j)s$": "ts-jest"
-    },
-    "collectCoverageFrom": [
-      "**/*.(t|j)s"
-    ],
-    "coverageDirectory": "../coverage",
-    "testEnvironment": "node"
+    "typescript": "4.7.4"
   }
 }
diff --git a/sample/02-gateways/tsconfig.json b/sample/02-gateways/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/02-gateways/tsconfig.json
+++ b/sample/02-gateways/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/03-microservices/package-lock.json b/sample/03-microservices/package-lock.json
index 5f916f6cd..37931ba11 100644
Binary files a/sample/03-microservices/package-lock.json and b/sample/03-microservices/package-lock.json differ
diff --git a/sample/03-microservices/package.json b/sample/03-microservices/package.json
index 873bf9a5d..9be88ca1f 100644
--- a/sample/03-microservices/package.json
+++ b/sample/03-microservices/package.json
@@ -19,36 +19,36 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/microservices": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/microservices": "9.0.1",
+    "@nestjs/platform-express": "9.0.1",
     "class-transformer": "0.5.1",
-    "class-validator": "0.14.0",
+    "class-validator": "0.13.2",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
+    "rimraf": "3.0.2",
     "rxjs": "7.5.5"
   },
   "devDependencies": {
     "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
-    "@types/amqplib": "0.10.1",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
+    "@types/amqplib": "0.8.2",
     "@types/express": "4.17.13",
     "@types/node": "18.0.3",
     "@types/supertest": "2.0.12",
     "jest": "28.1.2",
     "prettier": "2.7.1",
     "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
+    "ts-jest": "28.0.5",
     "ts-loader": "9.3.1",
     "ts-node": "10.8.2",
     "tsconfig-paths": "4.0.0",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
     "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
+    "eslint-config-prettier": "8.5.0",
     "eslint-plugin-import": "2.26.0",
-    "typescript": "4.9.5"
+    "typescript": "4.7.4"
   }
 }
diff --git a/sample/03-microservices/tsconfig.json b/sample/03-microservices/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/03-microservices/tsconfig.json
+++ b/sample/03-microservices/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/04-grpc/package-lock.json b/sample/04-grpc/package-lock.json
index 6cbfff115..4323b0754 100644
Binary files a/sample/04-grpc/package-lock.json and b/sample/04-grpc/package-lock.json differ
diff --git a/sample/04-grpc/package.json b/sample/04-grpc/package.json
index 8cfe27426..9a4ba80c1 100644
--- a/sample/04-grpc/package.json
+++ b/sample/04-grpc/package.json
@@ -20,35 +20,35 @@
   },
   "dependencies": {
     "@grpc/grpc-js": "1.6.7",
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/microservices": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/microservices": "9.0.1",
+    "@nestjs/platform-express": "9.0.1",
     "class-transformer": "0.5.1",
-    "class-validator": "0.14.0",
+    "class-validator": "0.13.2",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
+    "rimraf": "3.0.2",
     "rxjs": "7.5.5"
   },
   "devDependencies": {
     "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
     "@types/express": "4.17.13",
     "@types/node": "18.0.3",
     "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
     "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
+    "eslint-config-prettier": "8.5.0",
     "eslint-plugin-import": "2.26.0",
     "jest": "28.1.2",
     "prettier": "2.7.1",
     "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
+    "ts-jest": "28.0.5",
     "ts-loader": "9.3.1",
     "ts-node": "10.8.2",
     "tsconfig-paths": "4.0.0",
-    "typescript": "4.9.5"
+    "typescript": "4.7.4"
   }
 }
diff --git a/sample/04-grpc/tsconfig.json b/sample/04-grpc/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/04-grpc/tsconfig.json
+++ b/sample/04-grpc/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/05-sql-typeorm/package-lock.json b/sample/05-sql-typeorm/package-lock.json
index 9f90795a7..215f6af7f 100644
Binary files a/sample/05-sql-typeorm/package-lock.json and b/sample/05-sql-typeorm/package-lock.json differ
diff --git a/sample/05-sql-typeorm/package.json b/sample/05-sql-typeorm/package.json
index 885ab90e0..761db7920 100644
--- a/sample/05-sql-typeorm/package.json
+++ b/sample/05-sql-typeorm/package.json
@@ -19,37 +19,37 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
-    "@nestjs/typeorm": "9.0.1",
-    "mysql2": "3.2.0",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/platform-express": "9.0.1",
+    "@nestjs/typeorm": "9.0.0",
+    "mysql2": "2.3.3",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
+    "rimraf": "3.0.2",
     "rxjs": "7.5.5",
-    "typeorm": "0.3.12"
+    "typeorm": "0.3.7"
   },
   "devDependencies": {
     "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
     "@types/express": "4.17.13",
     "@types/jest": "28.1.4",
     "@types/node": "18.0.3",
     "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
     "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
+    "eslint-config-prettier": "8.5.0",
     "eslint-plugin-import": "2.26.0",
     "jest": "28.1.2",
     "prettier": "2.7.1",
     "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
+    "ts-jest": "28.0.5",
     "ts-loader": "9.3.1",
     "ts-node": "10.8.2",
     "tsconfig-paths": "4.0.0",
-    "typescript": "4.9.5"
+    "typescript": "4.7.4"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/05-sql-typeorm/tsconfig.json b/sample/05-sql-typeorm/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/05-sql-typeorm/tsconfig.json
+++ b/sample/05-sql-typeorm/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/06-mongoose/package-lock.json b/sample/06-mongoose/package-lock.json
index 984b5c1fa..218af59e7 100644
Binary files a/sample/06-mongoose/package-lock.json and b/sample/06-mongoose/package-lock.json differ
diff --git a/sample/06-mongoose/package.json b/sample/06-mongoose/package.json
index 361b025cb..6b1767957 100644
--- a/sample/06-mongoose/package.json
+++ b/sample/06-mongoose/package.json
@@ -19,36 +19,36 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/mongoose": "9.2.2",
-    "@nestjs/platform-express": "9.3.12",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/mongoose": "9.2.0",
+    "@nestjs/platform-express": "9.0.1",
     "mongoose": "6.4.6",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
+    "rimraf": "3.0.2",
     "rxjs": "7.5.5"
   },
   "devDependencies": {
     "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
     "@types/express": "4.17.13",
     "@types/jest": "28.1.4",
     "@types/node": "18.0.3",
     "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
     "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
+    "eslint-config-prettier": "8.5.0",
     "eslint-plugin-import": "2.26.0",
     "jest": "28.1.2",
     "prettier": "2.7.1",
     "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
+    "ts-jest": "28.0.5",
     "ts-loader": "9.3.1",
     "ts-node": "10.8.2",
     "tsconfig-paths": "4.0.0",
-    "typescript": "4.9.5"
+    "typescript": "4.7.4"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/06-mongoose/src/cats/cats.service.ts b/sample/06-mongoose/src/cats/cats.service.ts
index 27020406f..46069489a 100644
--- a/sample/06-mongoose/src/cats/cats.service.ts
+++ b/sample/06-mongoose/src/cats/cats.service.ts
@@ -2,11 +2,13 @@ import { Injectable } from '@nestjs/common';
 import { InjectModel } from '@nestjs/mongoose';
 import { Model } from 'mongoose';
 import { CreateCatDto } from './dto/create-cat.dto';
-import { Cat } from './schemas/cat.schema';
+import { Cat, CatDocument } from './schemas/cat.schema';
 
 @Injectable()
 export class CatsService {
-  constructor(@InjectModel(Cat.name) private readonly catModel: Model<Cat>) {}
+  constructor(
+    @InjectModel(Cat.name) private readonly catModel: Model<CatDocument>,
+  ) {}
 
   async create(createCatDto: CreateCatDto): Promise<Cat> {
     const createdCat = await this.catModel.create(createCatDto);
diff --git a/sample/06-mongoose/tsconfig.json b/sample/06-mongoose/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/06-mongoose/tsconfig.json
+++ b/sample/06-mongoose/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/07-sequelize/package-lock.json b/sample/07-sequelize/package-lock.json
index 9d3e6f502..b5b037026 100644
Binary files a/sample/07-sequelize/package-lock.json and b/sample/07-sequelize/package-lock.json differ
diff --git a/sample/07-sequelize/package.json b/sample/07-sequelize/package.json
index 138ed58f6..b1233cdea 100644
--- a/sample/07-sequelize/package.json
+++ b/sample/07-sequelize/package.json
@@ -19,39 +19,39 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/platform-express": "9.0.1",
     "@nestjs/sequelize": "9.0.0",
-    "mysql2": "3.2.0",
+    "mysql2": "2.3.3",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
+    "rimraf": "3.0.2",
     "rxjs": "7.5.5",
-    "sequelize": "6.29.0",
-    "sequelize-typescript": "2.1.5",
-    "typescript": "4.9.5"
+    "sequelize": "6.21.2",
+    "sequelize-typescript": "2.1.3",
+    "typescript": "4.7.4"
   },
   "devDependencies": {
     "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
     "@types/express": "4.17.13",
     "@types/jest": "28.1.4",
     "@types/node": "18.0.3",
     "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
     "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
+    "eslint-config-prettier": "8.5.0",
     "eslint-plugin-import": "2.26.0",
     "jest": "28.1.2",
     "prettier": "2.7.1",
     "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
+    "ts-jest": "28.0.5",
     "ts-loader": "9.3.1",
     "ts-node": "10.8.2",
     "tsconfig-paths": "4.0.0",
-    "typescript": "4.9.5"
+    "typescript": "4.7.4"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/07-sequelize/tsconfig.json b/sample/07-sequelize/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/07-sequelize/tsconfig.json
+++ b/sample/07-sequelize/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/08-webpack/package-lock.json b/sample/08-webpack/package-lock.json
index a840162e4..932922722 100644
Binary files a/sample/08-webpack/package-lock.json and b/sample/08-webpack/package-lock.json differ
diff --git a/sample/08-webpack/package.json b/sample/08-webpack/package.json
index ea33f0a0d..de629c430 100644
--- a/sample/08-webpack/package.json
+++ b/sample/08-webpack/package.json
@@ -12,26 +12,26 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/platform-express": "9.0.1",
     "reflect-metadata": "0.1.13",
     "rxjs": "7.5.5",
-    "typescript": "4.9.5"
+    "typescript": "4.7.4"
   },
   "devDependencies": {
     "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
+    "@nestjs/schematics": "9.0.1",
     "@types/node": "18.0.3",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
     "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
+    "eslint-config-prettier": "8.5.0",
     "eslint-plugin-import": "2.26.0",
     "start-server-webpack-plugin": "2.2.5",
     "ts-loader": "9.3.1",
     "ts-node": "10.8.2",
-    "webpack": "5.76.3",
+    "webpack": "5.73.0",
     "webpack-cli": "4.10.0",
     "webpack-node-externals": "3.0.0"
   }
diff --git a/sample/08-webpack/tsconfig.json b/sample/08-webpack/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/08-webpack/tsconfig.json
+++ b/sample/08-webpack/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/09-babel-example/package-lock.json b/sample/09-babel-example/package-lock.json
index 040b41422..d8924b330 100644
Binary files a/sample/09-babel-example/package-lock.json and b/sample/09-babel-example/package-lock.json differ
diff --git a/sample/09-babel-example/package.json b/sample/09-babel-example/package.json
index 9ecb4f240..91eb2b03d 100644
--- a/sample/09-babel-example/package.json
+++ b/sample/09-babel-example/package.json
@@ -13,26 +13,26 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
-    "@nestjs/microservices": "9.3.12",
-    "@nestjs/websockets": "9.3.12",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/platform-express": "9.0.1",
+    "@nestjs/microservices": "9.0.1",
+    "@nestjs/websockets": "9.0.1",
     "reflect-metadata": "0.1.13",
     "rxjs": "7.5.5"
   },
   "devDependencies": {
-    "@babel/cli": "7.21.0",
-    "@babel/core": "7.21.3",
-    "@babel/node": "7.20.7",
-    "@babel/plugin-proposal-decorators": "7.21.0",
-    "@babel/plugin-transform-runtime": "7.21.0",
-    "@babel/preset-env": "7.20.2",
-    "@babel/register": "7.21.0",
-    "@babel/runtime": "7.21.0",
-    "@nestjs/testing": "9.3.12",
+    "@babel/cli": "7.18.6",
+    "@babel/core": "7.18.6",
+    "@babel/node": "7.18.6",
+    "@babel/plugin-proposal-decorators": "7.18.6",
+    "@babel/plugin-transform-runtime": "7.18.6",
+    "@babel/preset-env": "7.18.6",
+    "@babel/register": "7.18.6",
+    "@babel/runtime": "7.18.6",
+    "@nestjs/testing": "9.0.1",
     "jest": "28.1.2",
-    "nodemon": "2.0.22",
+    "nodemon": "2.0.19",
     "prettier": "2.7.1",
     "supertest": "6.2.4"
   },
diff --git a/sample/10-fastify/package-lock.json b/sample/10-fastify/package-lock.json
index b8804b6a9..9cb252ee4 100644
Binary files a/sample/10-fastify/package-lock.json and b/sample/10-fastify/package-lock.json differ
diff --git a/sample/10-fastify/package.json b/sample/10-fastify/package.json
index 0746b1379..e47a1fa77 100644
--- a/sample/10-fastify/package.json
+++ b/sample/10-fastify/package.json
@@ -19,34 +19,34 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-fastify": "9.3.12",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/platform-fastify": "9.0.1",
     "class-transformer": "0.5.1",
-    "class-validator": "0.14.0",
+    "class-validator": "0.13.2",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
+    "rimraf": "3.0.2",
     "rxjs": "7.5.5"
   },
   "devDependencies": {
     "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
     "@types/express": "4.17.13",
     "@types/node": "18.0.3",
     "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
     "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
+    "eslint-config-prettier": "8.5.0",
     "eslint-plugin-import": "2.26.0",
     "jest": "28.1.2",
     "prettier": "2.7.1",
     "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
+    "ts-jest": "28.0.5",
     "ts-loader": "9.3.1",
     "ts-node": "10.8.2",
     "tsconfig-paths": "4.0.0",
-    "typescript": "4.9.5"
+    "typescript": "4.7.4"
   }
 }
diff --git a/sample/10-fastify/tsconfig.json b/sample/10-fastify/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/10-fastify/tsconfig.json
+++ b/sample/10-fastify/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/11-swagger/package-lock.json b/sample/11-swagger/package-lock.json
index ac7915151..c11a4c7d1 100644
Binary files a/sample/11-swagger/package-lock.json and b/sample/11-swagger/package-lock.json differ
diff --git a/sample/11-swagger/package.json b/sample/11-swagger/package.json
index e3aaba9a4..32d80f423 100644
--- a/sample/11-swagger/package.json
+++ b/sample/11-swagger/package.json
@@ -19,35 +19,35 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/platform-express": "9.0.1",
     "@nestjs/swagger": "6.0.1",
     "class-transformer": "0.5.1",
-    "class-validator": "0.14.0",
+    "class-validator": "0.13.2",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
+    "rimraf": "3.0.2",
     "rxjs": "7.5.5"
   },
   "devDependencies": {
     "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
     "@types/express": "4.17.13",
     "@types/node": "18.0.3",
     "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
     "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
+    "eslint-config-prettier": "8.5.0",
     "eslint-plugin-import": "2.26.0",
     "jest": "28.1.2",
     "prettier": "2.7.1",
     "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
+    "ts-jest": "28.0.5",
     "ts-loader": "9.3.1",
     "ts-node": "10.8.2",
     "tsconfig-paths": "4.0.0",
-    "typescript": "4.9.5"
+    "typescript": "4.7.4"
   }
 }
diff --git a/sample/11-swagger/tsconfig.json b/sample/11-swagger/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/11-swagger/tsconfig.json
+++ b/sample/11-swagger/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/12-graphql-schema-first/package-lock.json b/sample/12-graphql-schema-first/package-lock.json
index eed73df26..b62db5ea8 100644
Binary files a/sample/12-graphql-schema-first/package-lock.json and b/sample/12-graphql-schema-first/package-lock.json differ
diff --git a/sample/12-graphql-schema-first/package.json b/sample/12-graphql-schema-first/package.json
index 03db9cc2d..308efcc4e 100644
--- a/sample/12-graphql-schema-first/package.json
+++ b/sample/12-graphql-schema-first/package.json
@@ -19,41 +19,42 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@apollo/server": "4.5.0",
-    "@graphql-tools/utils": "9.2.1",
-    "@nestjs/apollo": "11.0.4",
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/graphql": "11.0.0",
-    "@nestjs/platform-express": "9.3.12",
+    "@graphql-tools/utils": "8.8.0",
+    "@nestjs/apollo": "10.0.17",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/graphql": "10.0.18",
+    "@nestjs/platform-express": "9.0.1",
+    "apollo-server": "3.9.0",
+    "apollo-server-express": "3.9.0",
     "class-transformer": "0.5.1",
-    "class-validator": "0.14.0",
-    "graphql": "16.6.0",
+    "class-validator": "0.13.2",
+    "graphql": "16.5.0",
     "graphql-subscriptions": "2.0.0",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.8.0"
+    "rimraf": "3.0.2",
+    "rxjs": "7.5.5"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.2.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
-    "@types/express": "4.17.17",
-    "@types/node": "18.15.0",
+    "@nestjs/cli": "9.0.0",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
+    "@types/express": "4.17.13",
+    "@types/node": "18.0.3",
     "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.35.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.27.5",
-    "jest": "29.5.0",
-    "prettier": "2.8.4",
-    "supertest": "6.3.3",
-    "ts-jest": "29.0.5",
-    "ts-loader": "9.4.2",
-    "ts-morph": "17.0.1",
-    "ts-node": "10.9.1",
-    "tsconfig-paths": "4.1.2",
-    "typescript": "4.9.5"
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
+    "eslint": "8.19.0",
+    "eslint-config-prettier": "8.5.0",
+    "eslint-plugin-import": "2.26.0",
+    "jest": "28.1.2",
+    "prettier": "2.7.1",
+    "supertest": "6.2.4",
+    "ts-jest": "28.0.5",
+    "ts-loader": "9.3.1",
+    "ts-morph": "15.1.0",
+    "ts-node": "10.8.2",
+    "tsconfig-paths": "4.0.0",
+    "typescript": "4.7.4"
   }
 }
diff --git a/sample/12-graphql-schema-first/src/common/plugins/logging.plugin.ts b/sample/12-graphql-schema-first/src/common/plugins/logging.plugin.ts
index 77c23a96c..449d257f4 100644
--- a/sample/12-graphql-schema-first/src/common/plugins/logging.plugin.ts
+++ b/sample/12-graphql-schema-first/src/common/plugins/logging.plugin.ts
@@ -1,9 +1,12 @@
-import { ApolloServerPlugin, GraphQLRequestListener } from '@apollo/server';
 import { Plugin } from '@nestjs/apollo';
+import {
+  ApolloServerPlugin,
+  GraphQLRequestListener,
+} from 'apollo-server-plugin-base';
 
 @Plugin()
 export class LoggingPlugin implements ApolloServerPlugin {
-  async requestDidStart(): Promise<GraphQLRequestListener<any>> {
+  async requestDidStart(): Promise<GraphQLRequestListener> {
     console.log('Request started');
     return {
       async willSendResponse() {
diff --git a/sample/12-graphql-schema-first/tsconfig.json b/sample/12-graphql-schema-first/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/12-graphql-schema-first/tsconfig.json
+++ b/sample/12-graphql-schema-first/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/13-mongo-typeorm/docker-compose.yml b/sample/13-mongo-typeorm/docker-compose.yml
index e4adc7194..834d04a17 100644
--- a/sample/13-mongo-typeorm/docker-compose.yml
+++ b/sample/13-mongo-typeorm/docker-compose.yml
@@ -2,7 +2,7 @@ version: "3"
 
 services:
   mongodb:
-    image: mongo:6.0
+    image: mongo:5.0
     environment:
       - MONGODB_DATABASE="test"
     ports:
diff --git a/sample/13-mongo-typeorm/package-lock.json b/sample/13-mongo-typeorm/package-lock.json
index 28b93e391..e9465dbf6 100644
Binary files a/sample/13-mongo-typeorm/package-lock.json and b/sample/13-mongo-typeorm/package-lock.json differ
diff --git a/sample/13-mongo-typeorm/package.json b/sample/13-mongo-typeorm/package.json
index a5714a958..067b16796 100644
--- a/sample/13-mongo-typeorm/package.json
+++ b/sample/13-mongo-typeorm/package.json
@@ -19,37 +19,37 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
-    "@nestjs/typeorm": "9.0.1",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/platform-express": "9.0.1",
+    "@nestjs/typeorm": "9.0.0",
     "mongodb": "3.6.0",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
+    "rimraf": "3.0.2",
     "rxjs": "7.5.5",
-    "typeorm": "0.3.12"
+    "typeorm": "0.3.7"
   },
   "devDependencies": {
     "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
     "@types/express": "4.17.13",
     "@types/jest": "28.1.4",
     "@types/node": "18.0.3",
     "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
     "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
+    "eslint-config-prettier": "8.5.0",
     "eslint-plugin-import": "2.26.0",
     "jest": "28.1.2",
     "prettier": "2.7.1",
     "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
+    "ts-jest": "28.0.5",
     "ts-loader": "9.3.1",
     "ts-node": "10.8.2",
     "tsconfig-paths": "4.0.0",
-    "typescript": "4.9.5"
+    "typescript": "4.7.4"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/13-mongo-typeorm/tsconfig.json b/sample/13-mongo-typeorm/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/13-mongo-typeorm/tsconfig.json
+++ b/sample/13-mongo-typeorm/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/14-mongoose-base/package-lock.json b/sample/14-mongoose-base/package-lock.json
index 0f621b706..e601d1149 100644
Binary files a/sample/14-mongoose-base/package-lock.json and b/sample/14-mongoose-base/package-lock.json differ
diff --git a/sample/14-mongoose-base/package.json b/sample/14-mongoose-base/package.json
index 8e395ef6b..2ad1c11fa 100644
--- a/sample/14-mongoose-base/package.json
+++ b/sample/14-mongoose-base/package.json
@@ -19,35 +19,35 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/platform-express": "9.0.1",
     "mongoose": "6.4.6",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
+    "rimraf": "3.0.2",
     "rxjs": "7.5.5"
   },
   "devDependencies": {
     "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
     "@types/express": "4.17.13",
     "@types/jest": "28.1.4",
     "@types/node": "18.0.3",
     "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
     "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
+    "eslint-config-prettier": "8.5.0",
     "eslint-plugin-import": "2.26.0",
     "jest": "28.1.2",
     "prettier": "2.7.1",
     "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
+    "ts-jest": "28.0.5",
     "ts-loader": "9.3.1",
     "ts-node": "10.8.2",
     "tsconfig-paths": "4.0.0",
-    "typescript": "4.9.5"
+    "typescript": "4.7.4"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/14-mongoose-base/tsconfig.json b/sample/14-mongoose-base/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/14-mongoose-base/tsconfig.json
+++ b/sample/14-mongoose-base/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/15-mvc/package-lock.json b/sample/15-mvc/package-lock.json
index e03fca618..aef59f5fa 100644
Binary files a/sample/15-mvc/package-lock.json and b/sample/15-mvc/package-lock.json differ
diff --git a/sample/15-mvc/package.json b/sample/15-mvc/package.json
index 92be8e8a3..6fac51a12 100644
--- a/sample/15-mvc/package.json
+++ b/sample/15-mvc/package.json
@@ -19,33 +19,34 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/platform-express": "9.0.1",
     "hbs": "4.2.0",
+    "pug": "3.0.2",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
+    "rimraf": "3.0.2",
     "rxjs": "7.5.5"
   },
   "devDependencies": {
     "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
     "@types/express": "4.17.13",
     "@types/node": "18.0.3",
     "@types/supertest": "2.0.12",
     "jest": "28.1.2",
     "prettier": "2.7.1",
     "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
+    "ts-jest": "28.0.5",
     "ts-loader": "9.3.1",
     "ts-node": "10.8.2",
     "tsconfig-paths": "4.0.0",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
     "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
+    "eslint-config-prettier": "8.5.0",
     "eslint-plugin-import": "2.26.0",
-    "typescript": "4.9.5"
+    "typescript": "4.7.4"
   }
 }
diff --git a/sample/15-mvc/tsconfig.json b/sample/15-mvc/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/15-mvc/tsconfig.json
+++ b/sample/15-mvc/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/16-gateways-ws/package-lock.json b/sample/16-gateways-ws/package-lock.json
index bbd22ca3c..e9aff7cb6 100644
Binary files a/sample/16-gateways-ws/package-lock.json and b/sample/16-gateways-ws/package-lock.json differ
diff --git a/sample/16-gateways-ws/package.json b/sample/16-gateways-ws/package.json
index 5089aed07..b6c1e534c 100644
--- a/sample/16-gateways-ws/package.json
+++ b/sample/16-gateways-ws/package.json
@@ -19,14 +19,14 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
-    "@nestjs/platform-ws": "9.3.12",
-    "@nestjs/websockets": "9.3.12",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/platform-express": "9.0.1",
+    "@nestjs/platform-ws": "9.0.1",
+    "@nestjs/websockets": "9.0.1",
     "class-transformer": "0.5.1",
-    "class-validator": "0.14.0",
-    "rimraf": "4.4.1",
+    "class-validator": "0.13.2",
+    "rimraf": "3.0.2",
     "reflect-metadata": "0.1.13",
     "rxjs": "7.5.5",
     "ws": "8.8.0"
@@ -34,23 +34,23 @@
   "devDependencies": {
     "@types/ws": "8.5.3",
     "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
     "@types/express": "4.17.13",
     "@types/node": "18.0.3",
     "@types/supertest": "2.0.12",
     "jest": "28.1.2",
     "prettier": "2.7.1",
     "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
+    "ts-jest": "28.0.5",
     "ts-loader": "9.3.1",
     "ts-node": "10.8.2",
     "tsconfig-paths": "4.0.0",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
     "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
+    "eslint-config-prettier": "8.5.0",
     "eslint-plugin-import": "2.26.0",
-    "typescript": "4.9.5"
+    "typescript": "4.7.4"
   }
 }
diff --git a/sample/16-gateways-ws/tsconfig.json b/sample/16-gateways-ws/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/16-gateways-ws/tsconfig.json
+++ b/sample/16-gateways-ws/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/17-mvc-fastify/package-lock.json b/sample/17-mvc-fastify/package-lock.json
index 0ce71c566..d3a46d14b 100644
Binary files a/sample/17-mvc-fastify/package-lock.json and b/sample/17-mvc-fastify/package-lock.json differ
diff --git a/sample/17-mvc-fastify/package.json b/sample/17-mvc-fastify/package.json
index bc007d7aa..60c0a2486 100644
--- a/sample/17-mvc-fastify/package.json
+++ b/sample/17-mvc-fastify/package.json
@@ -19,35 +19,35 @@
         "test:e2e": "echo 'No e2e tests implemented yet.'"
     },
     "dependencies": {
-        "@nestjs/common": "9.3.12",
-        "@nestjs/core": "9.3.12",
-        "@nestjs/platform-fastify": "9.3.12",
+        "@nestjs/common": "9.0.1",
+        "@nestjs/core": "9.0.1",
+        "@nestjs/platform-fastify": "9.0.1",
         "@fastify/static": "6.4.0",
         "handlebars": "4.7.7",
-        "@fastify/view": "7.4.1",
+        "@fastify/view": "7.0.0",
         "reflect-metadata": "0.1.13",
-        "rimraf": "4.4.1",
+        "rimraf": "3.0.2",
         "rxjs": "7.5.5"
     },
     "devDependencies": {
         "@nestjs/cli": "9.0.0",
-        "@nestjs/schematics": "9.0.4",
-        "@nestjs/testing": "9.3.12",
+        "@nestjs/schematics": "9.0.1",
+        "@nestjs/testing": "9.0.1",
         "@types/express": "4.17.13",
         "@types/node": "18.0.3",
         "@types/supertest": "2.0.12",
-        "@typescript-eslint/eslint-plugin": "5.56.0",
-        "@typescript-eslint/parser": "5.56.0",
+        "@typescript-eslint/eslint-plugin": "5.30.5",
+        "@typescript-eslint/parser": "5.30.5",
         "eslint": "8.19.0",
-        "eslint-config-prettier": "8.8.0",
+        "eslint-config-prettier": "8.5.0",
         "eslint-plugin-import": "2.26.0",
         "jest": "28.1.2",
         "prettier": "2.7.1",
         "supertest": "6.2.4",
-        "ts-jest": "28.0.8",
+        "ts-jest": "28.0.5",
         "ts-loader": "9.3.1",
         "ts-node": "10.8.2",
         "tsconfig-paths": "4.0.0",
-        "typescript": "4.9.5"
+        "typescript": "4.7.4"
     }
 }
diff --git a/sample/17-mvc-fastify/tsconfig.json b/sample/17-mvc-fastify/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/17-mvc-fastify/tsconfig.json
+++ b/sample/17-mvc-fastify/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/18-context/package-lock.json b/sample/18-context/package-lock.json
index 9bd55509f..7532c6fa4 100644
Binary files a/sample/18-context/package-lock.json and b/sample/18-context/package-lock.json differ
diff --git a/sample/18-context/package.json b/sample/18-context/package.json
index 489a53079..11dccf00e 100644
--- a/sample/18-context/package.json
+++ b/sample/18-context/package.json
@@ -19,29 +19,29 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
+    "rimraf": "3.0.2",
     "rxjs": "7.5.5"
   },
   "devDependencies": {
     "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
+    "@nestjs/schematics": "9.0.1",
     "@types/node": "18.0.3",
     "@types/supertest": "2.0.12",
     "jest": "28.1.2",
     "prettier": "2.7.1",
     "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
+    "ts-jest": "28.0.5",
     "ts-loader": "9.3.1",
     "ts-node": "10.8.2",
     "tsconfig-paths": "4.0.0",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
     "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
+    "eslint-config-prettier": "8.5.0",
     "eslint-plugin-import": "2.26.0",
-    "typescript": "4.9.5"
+    "typescript": "4.7.4"
   }
 }
diff --git a/sample/18-context/tsconfig.json b/sample/18-context/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/18-context/tsconfig.json
+++ b/sample/18-context/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/19-auth-jwt/e2e/app/app.e2e-spec.ts b/sample/19-auth-jwt/e2e/app/app.e2e-spec.ts
index 066c288ff..7c07c91cc 100644
--- a/sample/19-auth-jwt/e2e/app/app.e2e-spec.ts
+++ b/sample/19-auth-jwt/e2e/app/app.e2e-spec.ts
@@ -1,6 +1,5 @@
 import { INestApplication } from '@nestjs/common';
 import { Test } from '@nestjs/testing';
-import { expect } from 'chai';
 import * as request from 'supertest';
 import { AppModule } from '../../src/app.module';
 
@@ -20,17 +19,14 @@ describe('E2E JWT Sample', () => {
     const loginReq = await request(app.getHttpServer())
       .post('/auth/login')
       .send({ username: 'john', password: 'changeme' })
-      .expect(200);
+      .expect(201);
 
     const token = loginReq.body.access_token;
     return request(app.getHttpServer())
-      .get('/auth/profile')
+      .get('/profile')
       .set('Authorization', 'Bearer ' + token)
       .expect(200)
-      .expect(({ body }) => {
-        expect(body.sub).to.equal(1);
-        expect(body.username).to.equal('john');
-      });
+      .expect({ userId: 1, username: 'john' });
   });
 
   afterAll(async () => {
diff --git a/sample/19-auth-jwt/package-lock.json b/sample/19-auth-jwt/package-lock.json
index 9850e515b..44e64794c 100644
Binary files a/sample/19-auth-jwt/package-lock.json and b/sample/19-auth-jwt/package-lock.json differ
diff --git a/sample/19-auth-jwt/package.json b/sample/19-auth-jwt/package.json
index 0dfa5a90c..d2dce9331 100644
--- a/sample/19-auth-jwt/package.json
+++ b/sample/19-auth-jwt/package.json
@@ -20,36 +20,39 @@
     "test:e2e": "jest --config ./e2e/jest-e2e.json"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/jwt": "10.0.3",
-    "@nestjs/passport": "9.0.3",
-    "@nestjs/platform-express": "9.3.12",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/jwt": "9.0.0",
+    "@nestjs/passport": "9.0.0",
+    "@nestjs/platform-express": "9.0.1",
+    "passport": "0.6.0",
+    "passport-jwt": "4.0.0",
+    "passport-local": "1.0.0",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
+    "rimraf": "3.0.2",
     "rxjs": "7.5.5"
   },
   "devDependencies": {
     "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
     "@types/express": "4.17.13",
     "@types/jest": "28.1.4",
     "@types/node": "18.0.3",
     "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.19.0",
-    "eslint-config-prettier": "8.5.0",
-    "eslint-plugin-import": "2.26.0",
     "jest": "28.1.2",
     "prettier": "2.7.1",
     "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
+    "ts-jest": "28.0.5",
     "ts-loader": "9.3.1",
     "ts-node": "10.8.2",
     "tsconfig-paths": "4.0.0",
-    "typescript": "4.9.5"
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
+    "eslint": "8.19.0",
+    "eslint-config-prettier": "8.5.0",
+    "eslint-plugin-import": "2.26.0",
+    "typescript": "4.7.4"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/19-auth-jwt/src/app.controller.ts b/sample/19-auth-jwt/src/app.controller.ts
index 24fa19368..4c6b68ca9 100644
--- a/sample/19-auth-jwt/src/app.controller.ts
+++ b/sample/19-auth-jwt/src/app.controller.ts
@@ -1,4 +1,21 @@
-import { Controller } from '@nestjs/common';
+import { Controller, Get, Post, Request, UseGuards } from '@nestjs/common';
+import { AuthService } from './auth/auth.service';
+import { JwtAuthGuard } from './auth/guards/jwt-auth.guard';
+import { LocalAuthGuard } from './auth/guards/local-auth.guard';
 
 @Controller()
-export class AppController {}
+export class AppController {
+  constructor(private readonly authService: AuthService) {}
+
+  @UseGuards(LocalAuthGuard)
+  @Post('auth/login')
+  async login(@Request() req) {
+    return this.authService.login(req.user);
+  }
+
+  @UseGuards(JwtAuthGuard)
+  @Get('profile')
+  getProfile(@Request() req) {
+    return req.user;
+  }
+}
diff --git a/sample/19-auth-jwt/src/auth/auth.controller.ts b/sample/19-auth-jwt/src/auth/auth.controller.ts
deleted file mode 100644
index 8e7b51642..000000000
--- a/sample/19-auth-jwt/src/auth/auth.controller.ts
+++ /dev/null
@@ -1,28 +0,0 @@
-import {
-  Body,
-  Controller,
-  Get,
-  HttpCode,
-  HttpStatus,
-  Post,
-  Request,
-} from '@nestjs/common';
-import { AuthService } from './auth.service';
-import { Public } from './decorators/public.decorator';
-
-@Controller('auth')
-export class AuthController {
-  constructor(private authService: AuthService) {}
-
-  @Public()
-  @HttpCode(HttpStatus.OK)
-  @Post('login')
-  signIn(@Body() signInDto: Record<string, any>) {
-    return this.authService.signIn(signInDto.username, signInDto.password);
-  }
-
-  @Get('profile')
-  getProfile(@Request() req) {
-    return req.user;
-  }
-}
diff --git a/sample/19-auth-jwt/src/auth/auth.guard.ts b/sample/19-auth-jwt/src/auth/auth.guard.ts
deleted file mode 100644
index 2fd63a07a..000000000
--- a/sample/19-auth-jwt/src/auth/auth.guard.ts
+++ /dev/null
@@ -1,49 +0,0 @@
-import {
-  CanActivate,
-  ExecutionContext,
-  Injectable,
-  UnauthorizedException,
-} from '@nestjs/common';
-import { Reflector } from '@nestjs/core';
-import { JwtService } from '@nestjs/jwt';
-import { Request } from 'express';
-import { jwtConstants } from './constants';
-import { IS_PUBLIC_KEY } from './decorators/public.decorator';
-
-@Injectable()
-export class AuthGuard implements CanActivate {
-  constructor(private jwtService: JwtService, private reflector: Reflector) {}
-
-  async canActivate(context: ExecutionContext): Promise<boolean> {
-    const isPublic = this.reflector.getAllAndOverride<boolean>(IS_PUBLIC_KEY, [
-      context.getHandler(),
-      context.getClass(),
-    ]);
-    if (isPublic) {
-      //  See this condition
-      return true;
-    }
-
-    const request = context.switchToHttp().getRequest();
-    const token = this.extractTokenFromHeader(request);
-    if (!token) {
-      throw new UnauthorizedException();
-    }
-    try {
-      const payload = await this.jwtService.verifyAsync(token, {
-        secret: jwtConstants.secret,
-      });
-      //  We're assigning the payload to the request object here
-      // so that we can access it in our route handlers
-      request['user'] = payload;
-    } catch {
-      throw new UnauthorizedException();
-    }
-    return true;
-  }
-
-  private extractTokenFromHeader(request: Request): string | undefined {
-    const [type, token] = request.headers.authorization?.split(' ') ?? [];
-    return type === 'Bearer' ? token : undefined;
-  }
-}
diff --git a/sample/19-auth-jwt/src/auth/auth.module.ts b/sample/19-auth-jwt/src/auth/auth.module.ts
index 9361229eb..7e853d5b7 100644
--- a/sample/19-auth-jwt/src/auth/auth.module.ts
+++ b/sample/19-auth-jwt/src/auth/auth.module.ts
@@ -1,29 +1,22 @@
 import { Module } from '@nestjs/common';
-import { APP_GUARD } from '@nestjs/core';
 import { JwtModule } from '@nestjs/jwt';
+import { PassportModule } from '@nestjs/passport';
 import { UsersModule } from '../users/users.module';
-import { AuthController } from './auth.controller';
-import { AuthGuard } from './auth.guard';
 import { AuthService } from './auth.service';
 import { jwtConstants } from './constants';
+import { JwtStrategy } from './strategies/jwt.strategy';
+import { LocalStrategy } from './strategies/local.strategy';
 
 @Module({
   imports: [
     UsersModule,
+    PassportModule,
     JwtModule.register({
-      global: true,
       secret: jwtConstants.secret,
       signOptions: { expiresIn: '60s' },
     }),
   ],
-  providers: [
-    AuthService,
-    {
-      provide: APP_GUARD,
-      useClass: AuthGuard,
-    },
-  ],
-  controllers: [AuthController],
+  providers: [AuthService, LocalStrategy, JwtStrategy],
   exports: [AuthService],
 })
 export class AuthModule {}
diff --git a/sample/19-auth-jwt/src/auth/auth.service.ts b/sample/19-auth-jwt/src/auth/auth.service.ts
index 6321d1c3e..c477d52b2 100644
--- a/sample/19-auth-jwt/src/auth/auth.service.ts
+++ b/sample/19-auth-jwt/src/auth/auth.service.ts
@@ -1,22 +1,27 @@
-import { Injectable, UnauthorizedException } from '@nestjs/common';
-import { JwtService } from '@nestjs/jwt';
+import { Injectable } from '@nestjs/common';
 import { UsersService } from '../users/users.service';
+import { JwtService } from '@nestjs/jwt';
 
 @Injectable()
 export class AuthService {
   constructor(
-    private usersService: UsersService,
-    private jwtService: JwtService,
+    private readonly usersService: UsersService,
+    private readonly jwtService: JwtService,
   ) {}
 
-  async signIn(username, pass) {
+  async validateUser(username: string, pass: string): Promise<any> {
     const user = await this.usersService.findOne(username);
-    if (user?.password !== pass) {
-      throw new UnauthorizedException();
+    if (user && user.password === pass) {
+      const { password, ...result } = user;
+      return result;
     }
+    return null;
+  }
+
+  async login(user: any) {
     const payload = { username: user.username, sub: user.userId };
     return {
-      access_token: await this.jwtService.signAsync(payload),
+      access_token: this.jwtService.sign(payload),
     };
   }
 }
diff --git a/sample/19-auth-jwt/src/auth/constants.ts b/sample/19-auth-jwt/src/auth/constants.ts
index 9e8c4061f..8b22f8b64 100644
--- a/sample/19-auth-jwt/src/auth/constants.ts
+++ b/sample/19-auth-jwt/src/auth/constants.ts
@@ -1,4 +1,3 @@
 export const jwtConstants = {
-  secret:
-    'DO NOT USE THIS VALUE. INSTEAD, CREATE A COMPLEX SECRET AND KEEP IT SAFE OUTSIDE OF THE SOURCE CODE.',
+  secret: 'secretKey',
 };
diff --git a/sample/19-auth-jwt/src/auth/decorators/public.decorator.ts b/sample/19-auth-jwt/src/auth/decorators/public.decorator.ts
deleted file mode 100644
index b3845e122..000000000
--- a/sample/19-auth-jwt/src/auth/decorators/public.decorator.ts
+++ /dev/null
@@ -1,4 +0,0 @@
-import { SetMetadata } from '@nestjs/common';
-
-export const IS_PUBLIC_KEY = 'isPublic';
-export const Public = () => SetMetadata(IS_PUBLIC_KEY, true);
diff --git a/sample/19-auth-jwt/src/auth/guards/jwt-auth.guard.ts b/sample/19-auth-jwt/src/auth/guards/jwt-auth.guard.ts
new file mode 100644
index 000000000..2155290ed
--- /dev/null
+++ b/sample/19-auth-jwt/src/auth/guards/jwt-auth.guard.ts
@@ -0,0 +1,5 @@
+import { Injectable } from '@nestjs/common';
+import { AuthGuard } from '@nestjs/passport';
+
+@Injectable()
+export class JwtAuthGuard extends AuthGuard('jwt') {}
diff --git a/sample/19-auth-jwt/src/auth/guards/local-auth.guard.ts b/sample/19-auth-jwt/src/auth/guards/local-auth.guard.ts
new file mode 100644
index 000000000..ccf962b67
--- /dev/null
+++ b/sample/19-auth-jwt/src/auth/guards/local-auth.guard.ts
@@ -0,0 +1,5 @@
+import { Injectable } from '@nestjs/common';
+import { AuthGuard } from '@nestjs/passport';
+
+@Injectable()
+export class LocalAuthGuard extends AuthGuard('local') {}
diff --git a/sample/19-auth-jwt/src/auth/strategies/jwt.strategy.ts b/sample/19-auth-jwt/src/auth/strategies/jwt.strategy.ts
new file mode 100644
index 000000000..08524da5a
--- /dev/null
+++ b/sample/19-auth-jwt/src/auth/strategies/jwt.strategy.ts
@@ -0,0 +1,19 @@
+import { Injectable } from '@nestjs/common';
+import { PassportStrategy } from '@nestjs/passport';
+import { ExtractJwt, Strategy } from 'passport-jwt';
+import { jwtConstants } from '../constants';
+
+@Injectable()
+export class JwtStrategy extends PassportStrategy(Strategy) {
+  constructor() {
+    super({
+      jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),
+      ignoreExpiration: false,
+      secretOrKey: jwtConstants.secret,
+    });
+  }
+
+  async validate(payload: any) {
+    return { userId: payload.sub, username: payload.username };
+  }
+}
diff --git a/sample/19-auth-jwt/src/auth/strategies/local.strategy.ts b/sample/19-auth-jwt/src/auth/strategies/local.strategy.ts
new file mode 100644
index 000000000..79f85280f
--- /dev/null
+++ b/sample/19-auth-jwt/src/auth/strategies/local.strategy.ts
@@ -0,0 +1,19 @@
+import { Injectable, UnauthorizedException } from '@nestjs/common';
+import { PassportStrategy } from '@nestjs/passport';
+import { Strategy } from 'passport-local';
+import { AuthService } from '../auth.service';
+
+@Injectable()
+export class LocalStrategy extends PassportStrategy(Strategy) {
+  constructor(private readonly authService: AuthService) {
+    super();
+  }
+
+  async validate(username: string, password: string): Promise<any> {
+    const user = await this.authService.validateUser(username, password);
+    if (!user) {
+      throw new UnauthorizedException();
+    }
+    return user;
+  }
+}
diff --git a/sample/19-auth-jwt/src/users/users.service.ts b/sample/19-auth-jwt/src/users/users.service.ts
index 47e5cde7b..f24f26b30 100644
--- a/sample/19-auth-jwt/src/users/users.service.ts
+++ b/sample/19-auth-jwt/src/users/users.service.ts
@@ -1,22 +1,30 @@
 import { Injectable } from '@nestjs/common';
 
-// This should be a real class/interface representing a user entity
 export type User = any;
 
 @Injectable()
 export class UsersService {
-  private readonly users = [
-    {
-      userId: 1,
-      username: 'john',
-      password: 'changeme',
-    },
-    {
-      userId: 2,
-      username: 'maria',
-      password: 'guess',
-    },
-  ];
+  private readonly users: User[];
+
+  constructor() {
+    this.users = [
+      {
+        userId: 1,
+        username: 'john',
+        password: 'changeme',
+      },
+      {
+        userId: 2,
+        username: 'chris',
+        password: 'secret',
+      },
+      {
+        userId: 3,
+        username: 'maria',
+        password: 'guess',
+      },
+    ];
+  }
 
   async findOne(username: string): Promise<User | undefined> {
     return this.users.find(user => user.username === username);
diff --git a/sample/19-auth-jwt/tsconfig.json b/sample/19-auth-jwt/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/19-auth-jwt/tsconfig.json
+++ b/sample/19-auth-jwt/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/20-cache/package-lock.json b/sample/20-cache/package-lock.json
index 1d13a94a7..b99936b33 100644
Binary files a/sample/20-cache/package-lock.json and b/sample/20-cache/package-lock.json differ
diff --git a/sample/20-cache/package.json b/sample/20-cache/package.json
index 392d9c6f8..2ef757339 100644
--- a/sample/20-cache/package.json
+++ b/sample/20-cache/package.json
@@ -19,36 +19,36 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/cache-manager": "1.0.0",
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/platform-express": "9.0.1",
     "cache-manager": "^4.1.0",
+    "cache-manager-redis-store": "2.0.0",
     "class-transformer": "0.5.1",
-    "class-validator": "0.14.0",
+    "class-validator": "0.13.2",
     "reflect-metadata": "0.1.13",
     "rxjs": "7.5.5"
   },
   "devDependencies": {
     "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
     "@types/cache-manager": "^4.0.1",
     "@types/express": "4.17.13",
     "@types/node": "18.0.3",
     "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
     "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
+    "eslint-config-prettier": "8.5.0",
     "eslint-plugin-import": "2.26.0",
     "jest": "28.1.2",
     "prettier": "2.7.1",
     "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
+    "ts-jest": "28.0.5",
     "ts-loader": "9.3.1",
     "ts-node": "10.8.2",
     "tsconfig-paths": "4.0.0",
-    "typescript": "4.9.5"
+    "typescript": "4.7.4"
   }
 }
diff --git a/sample/20-cache/src/app.controller.ts b/sample/20-cache/src/app.controller.ts
index 19a3b181f..d2ba94e99 100644
--- a/sample/20-cache/src/app.controller.ts
+++ b/sample/20-cache/src/app.controller.ts
@@ -1,5 +1,9 @@
-import { CacheInterceptor } from '@nestjs/cache-manager';
-import { Controller, Get, UseInterceptors } from '@nestjs/common';
+import {
+  CacheInterceptor,
+  Controller,
+  Get,
+  UseInterceptors,
+} from '@nestjs/common';
 
 @Controller()
 @UseInterceptors(CacheInterceptor)
diff --git a/sample/20-cache/src/app.module.ts b/sample/20-cache/src/app.module.ts
index 310d05226..a85f2b5fb 100644
--- a/sample/20-cache/src/app.module.ts
+++ b/sample/20-cache/src/app.module.ts
@@ -1,5 +1,4 @@
-import { CacheModule } from '@nestjs/cache-manager';
-import { Module } from '@nestjs/common';
+import { CacheModule, Module } from '@nestjs/common';
 import { AppController } from './app.controller';
 
 @Module({
diff --git a/sample/20-cache/src/common/http-cache.interceptor.ts b/sample/20-cache/src/common/http-cache.interceptor.ts
index f2bc578ef..c0d3638c7 100644
--- a/sample/20-cache/src/common/http-cache.interceptor.ts
+++ b/sample/20-cache/src/common/http-cache.interceptor.ts
@@ -1,5 +1,4 @@
-import { CacheInterceptor } from '@nestjs/cache-manager';
-import { ExecutionContext, Injectable } from '@nestjs/common';
+import { CacheInterceptor, ExecutionContext, Injectable } from '@nestjs/common';
 
 @Injectable()
 export class HttpCacheInterceptor extends CacheInterceptor {
diff --git a/sample/20-cache/tsconfig.json b/sample/20-cache/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/20-cache/tsconfig.json
+++ b/sample/20-cache/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/21-serializer/package-lock.json b/sample/21-serializer/package-lock.json
index 7f568dfb1..24e2726f0 100644
Binary files a/sample/21-serializer/package-lock.json and b/sample/21-serializer/package-lock.json differ
diff --git a/sample/21-serializer/package.json b/sample/21-serializer/package.json
index a06427aee..75e40184b 100644
--- a/sample/21-serializer/package.json
+++ b/sample/21-serializer/package.json
@@ -19,33 +19,33 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/platform-express": "9.0.1",
     "class-transformer": "0.5.1",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
+    "rimraf": "3.0.2",
     "rxjs": "7.5.5"
   },
   "devDependencies": {
     "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
     "@types/express": "4.17.13",
     "@types/node": "18.0.3",
     "@types/supertest": "2.0.12",
     "jest": "28.1.2",
     "prettier": "2.7.1",
     "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
+    "ts-jest": "28.0.5",
     "ts-loader": "9.3.1",
     "ts-node": "10.8.2",
     "tsconfig-paths": "4.0.0",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
     "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
+    "eslint-config-prettier": "8.5.0",
     "eslint-plugin-import": "2.26.0",
-    "typescript": "4.9.5"
+    "typescript": "4.7.4"
   }
 }
diff --git a/sample/21-serializer/tsconfig.json b/sample/21-serializer/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/21-serializer/tsconfig.json
+++ b/sample/21-serializer/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/22-graphql-prisma/package-lock.json b/sample/22-graphql-prisma/package-lock.json
index 8cc786aba..907e39eb2 100644
Binary files a/sample/22-graphql-prisma/package-lock.json and b/sample/22-graphql-prisma/package-lock.json differ
diff --git a/sample/22-graphql-prisma/package.json b/sample/22-graphql-prisma/package.json
old mode 100644
new mode 100755
index 839c0a723..f808c73d6
--- a/sample/22-graphql-prisma/package.json
+++ b/sample/22-graphql-prisma/package.json
@@ -20,42 +20,43 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@apollo/server": "4.5.0",
-    "@nestjs/apollo": "11.0.4",
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/graphql": "11.0.0",
-    "@nestjs/platform-express": "9.3.12",
-    "@prisma/client": "4.11.0",
+    "@nestjs/apollo": "^10.0.17",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/graphql": "10.0.18",
+    "@nestjs/platform-express": "9.0.1",
+    "@prisma/client": "3.8.1",
+    "apollo-server": "3.6.2",
+    "apollo-server-express": "3.6.2",
     "class-transformer": "0.5.1",
-    "class-validator": "0.14.0",
-    "graphql": "16.6.0",
+    "class-validator": "0.13.2",
+    "graphql": "15.8.0",
     "graphql-subscriptions": "2.0.0",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.8.0"
+    "rimraf": "3.0.2",
+    "rxjs": "7.5.5"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.2.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
-    "@types/express": "4.17.17",
-    "@types/node": "18.15.0",
+    "@nestjs/cli": "9.0.0",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
+    "@types/express": "4.17.13",
+    "@types/node": "18.0.3",
     "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.35.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.27.5",
-    "jest": "29.5.0",
-    "prettier": "2.8.4",
-    "prisma": "^4.11.0",
-    "supertest": "6.3.3",
-    "ts-jest": "29.0.5",
-    "ts-loader": "9.4.2",
-    "ts-morph": "17.0.1",
-    "ts-node": "10.9.1",
-    "tsconfig-paths": "4.1.2",
-    "typescript": "4.9.5"
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
+    "eslint": "8.19.0",
+    "eslint-config-prettier": "8.5.0",
+    "eslint-plugin-import": "2.26.0",
+    "jest": "28.1.2",
+    "prettier": "2.7.1",
+    "prisma": "^4.0.0",
+    "supertest": "6.2.4",
+    "ts-jest": "28.0.5",
+    "ts-loader": "9.3.1",
+    "ts-morph": "15.1.0",
+    "ts-node": "10.8.2",
+    "tsconfig-paths": "4.0.0",
+    "typescript": "4.7.4"
   }
 }
diff --git a/sample/22-graphql-prisma/tsconfig.json b/sample/22-graphql-prisma/tsconfig.json
index d9c82ca97..e268e37aa 100755
--- a/sample/22-graphql-prisma/tsconfig.json
+++ b/sample/22-graphql-prisma/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/23-graphql-code-first/package-lock.json b/sample/23-graphql-code-first/package-lock.json
index f40dee72a..0b6986378 100644
Binary files a/sample/23-graphql-code-first/package-lock.json and b/sample/23-graphql-code-first/package-lock.json differ
diff --git a/sample/23-graphql-code-first/package.json b/sample/23-graphql-code-first/package.json
index febc762b8..6a811d88e 100644
--- a/sample/23-graphql-code-first/package.json
+++ b/sample/23-graphql-code-first/package.json
@@ -19,39 +19,40 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@apollo/server": "4.5.0",
-    "@nestjs/apollo": "11.0.4",
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/graphql": "11.0.0",
-    "@nestjs/platform-express": "9.3.12",
+    "@nestjs/apollo": "10.0.17",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/graphql": "10.0.18",
+    "@nestjs/platform-express": "9.0.1",
+    "apollo-server": "3.9.0",
+    "apollo-server-express": "3.9.0",
     "class-transformer": "0.5.1",
-    "class-validator": "0.14.0",
-    "graphql": "16.6.0",
-    "graphql-query-complexity": "0.12.0",
+    "class-validator": "0.13.2",
+    "graphql": "16.5.0",
+    "graphql-query-complexity": "0.11.0",
     "graphql-subscriptions": "2.0.0",
     "reflect-metadata": "0.1.13",
-    "rxjs": "7.8.0"
+    "rxjs": "7.5.5"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.2.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
-    "@types/express": "4.17.17",
-    "@types/node": "18.15.0",
+    "@nestjs/cli": "9.0.0",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
+    "@types/express": "4.17.13",
+    "@types/node": "18.0.3",
     "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.35.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.27.5",
-    "jest": "29.5.0",
-    "prettier": "2.8.4",
-    "supertest": "6.3.3",
-    "ts-jest": "29.0.5",
-    "ts-loader": "9.4.2",
-    "ts-node": "10.9.1",
-    "tsconfig-paths": "4.1.2",
-    "typescript": "4.9.5"
+    "jest": "28.1.2",
+    "prettier": "2.7.1",
+    "supertest": "6.2.4",
+    "ts-jest": "28.0.5",
+    "ts-loader": "9.3.1",
+    "ts-node": "10.8.2",
+    "tsconfig-paths": "4.0.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
+    "eslint": "8.19.0",
+    "eslint-config-prettier": "8.5.0",
+    "eslint-plugin-import": "2.26.0",
+    "typescript": "4.7.4"
   }
 }
diff --git a/sample/23-graphql-code-first/schema.gql b/sample/23-graphql-code-first/schema.gql
index 7a46060d1..4df716415 100644
--- a/sample/23-graphql-code-first/schema.gql
+++ b/sample/23-graphql-code-first/schema.gql
@@ -18,7 +18,7 @@ scalar Date
 
 type Query {
   recipe(id: String!): Recipe!
-  recipes(skip: Int! = 0, take: Int! = 25): [Recipe!]!
+  recipes(skip: Int = 0, take: Int = 25): [Recipe!]!
 }
 
 type Mutation {
diff --git a/sample/23-graphql-code-first/src/common/plugins/complexity.plugin.ts b/sample/23-graphql-code-first/src/common/plugins/complexity.plugin.ts
index d7e3699e9..b58cafeb2 100644
--- a/sample/23-graphql-code-first/src/common/plugins/complexity.plugin.ts
+++ b/sample/23-graphql-code-first/src/common/plugins/complexity.plugin.ts
@@ -1,6 +1,9 @@
-import { ApolloServerPlugin, GraphQLRequestListener } from '@apollo/server';
 import { Plugin } from '@nestjs/apollo';
 import { GraphQLSchemaHost } from '@nestjs/graphql';
+import {
+  ApolloServerPlugin,
+  GraphQLRequestListener,
+} from 'apollo-server-plugin-base';
 import { GraphQLError } from 'graphql';
 import {
   fieldExtensionsEstimator,
@@ -12,7 +15,7 @@ import {
 export class ComplexityPlugin implements ApolloServerPlugin {
   constructor(private gqlSchemaHost: GraphQLSchemaHost) {}
 
-  async requestDidStart(): Promise<GraphQLRequestListener<any>> {
+  async requestDidStart(): Promise<GraphQLRequestListener> {
     const { schema } = this.gqlSchemaHost;
 
     return {
diff --git a/sample/23-graphql-code-first/src/common/plugins/logging.plugin.ts b/sample/23-graphql-code-first/src/common/plugins/logging.plugin.ts
index 77c23a96c..449d257f4 100644
--- a/sample/23-graphql-code-first/src/common/plugins/logging.plugin.ts
+++ b/sample/23-graphql-code-first/src/common/plugins/logging.plugin.ts
@@ -1,9 +1,12 @@
-import { ApolloServerPlugin, GraphQLRequestListener } from '@apollo/server';
 import { Plugin } from '@nestjs/apollo';
+import {
+  ApolloServerPlugin,
+  GraphQLRequestListener,
+} from 'apollo-server-plugin-base';
 
 @Plugin()
 export class LoggingPlugin implements ApolloServerPlugin {
-  async requestDidStart(): Promise<GraphQLRequestListener<any>> {
+  async requestDidStart(): Promise<GraphQLRequestListener> {
     console.log('Request started');
     return {
       async willSendResponse() {
diff --git a/sample/23-graphql-code-first/tsconfig.json b/sample/23-graphql-code-first/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/23-graphql-code-first/tsconfig.json
+++ b/sample/23-graphql-code-first/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/24-serve-static/package-lock.json b/sample/24-serve-static/package-lock.json
index 01d8f21ad..e2e656b81 100644
Binary files a/sample/24-serve-static/package-lock.json and b/sample/24-serve-static/package-lock.json differ
diff --git a/sample/24-serve-static/package.json b/sample/24-serve-static/package.json
index e7f0ec201..f618b0c8d 100644
--- a/sample/24-serve-static/package.json
+++ b/sample/24-serve-static/package.json
@@ -19,35 +19,35 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/serve-static": "3.0.1",
-    "@nestjs/platform-express": "9.3.12",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/serve-static": "3.0.0",
+    "@nestjs/platform-express": "9.0.1",
     "class-transformer": "0.5.1",
-    "class-validator": "0.14.0",
+    "class-validator": "0.13.2",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
+    "rimraf": "3.0.2",
     "rxjs": "7.5.5"
   },
   "devDependencies": {
     "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
     "@types/express": "4.17.13",
     "@types/node": "18.0.3",
     "@types/supertest": "2.0.12",
     "jest": "28.1.2",
     "prettier": "2.7.1",
     "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
+    "ts-jest": "28.0.5",
     "ts-loader": "9.3.1",
     "ts-node": "10.8.2",
     "tsconfig-paths": "4.0.0",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
     "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
+    "eslint-config-prettier": "8.5.0",
     "eslint-plugin-import": "2.26.0",
-    "typescript": "4.9.5"
+    "typescript": "4.7.4"
   }
 }
diff --git a/sample/24-serve-static/src/app.module.ts b/sample/24-serve-static/src/app.module.ts
index 4fbea3cf2..3f4864ce5 100644
--- a/sample/24-serve-static/src/app.module.ts
+++ b/sample/24-serve-static/src/app.module.ts
@@ -7,7 +7,7 @@ import { AppController } from './app.controller';
   imports: [
     ServeStaticModule.forRoot({
       rootPath: join(__dirname, '..', 'client'),
-      exclude: ['/api/(.*)'],
+      exclude: ['/api*'],
     }),
   ],
   controllers: [AppController],
diff --git a/sample/24-serve-static/tsconfig.json b/sample/24-serve-static/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/24-serve-static/tsconfig.json
+++ b/sample/24-serve-static/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/25-dynamic-modules/package-lock.json b/sample/25-dynamic-modules/package-lock.json
index 9bb761fd3..187f4695d 100644
Binary files a/sample/25-dynamic-modules/package-lock.json and b/sample/25-dynamic-modules/package-lock.json differ
diff --git a/sample/25-dynamic-modules/package.json b/sample/25-dynamic-modules/package.json
index 337372628..dd483bccd 100644
--- a/sample/25-dynamic-modules/package.json
+++ b/sample/25-dynamic-modules/package.json
@@ -19,19 +19,19 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/platform-express": "9.0.1",
     "dotenv": "16.0.1",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
+    "rimraf": "3.0.2",
     "rxjs": "7.5.5"
   },
   "devDependencies": {
     "@types/dotenv": "8.2.0",
     "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
     "@types/express": "4.17.13",
     "@types/jest": "28.1.4",
     "@types/node": "18.0.3",
@@ -39,16 +39,16 @@
     "jest": "28.1.2",
     "prettier": "2.7.1",
     "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
+    "ts-jest": "28.0.5",
     "ts-loader": "9.3.1",
     "ts-node": "10.8.2",
     "tsconfig-paths": "4.0.0",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
     "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
+    "eslint-config-prettier": "8.5.0",
     "eslint-plugin-import": "2.26.0",
-    "typescript": "4.9.5"
+    "typescript": "4.7.4"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/25-dynamic-modules/tsconfig.json b/sample/25-dynamic-modules/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/25-dynamic-modules/tsconfig.json
+++ b/sample/25-dynamic-modules/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/26-queues/package-lock.json b/sample/26-queues/package-lock.json
index d432abc4c..e01b48f03 100644
Binary files a/sample/26-queues/package-lock.json and b/sample/26-queues/package-lock.json differ
diff --git a/sample/26-queues/package.json b/sample/26-queues/package.json
index 5b1c44d02..98546675e 100644
--- a/sample/26-queues/package.json
+++ b/sample/26-queues/package.json
@@ -19,21 +19,21 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/bull": "0.6.3",
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
+    "@nestjs/bull": "0.6.0",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/platform-express": "9.0.1",
     "bull": "4.8.4",
     "dotenv": "16.0.1",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
+    "rimraf": "3.0.2",
     "rxjs": "7.5.5"
   },
   "devDependencies": {
     "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
-    "@types/bull": "3.15.9",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
+    "@types/bull": "3.15.8",
     "@types/dotenv": "8.2.0",
     "@types/express": "4.17.13",
     "@types/jest": "28.1.4",
@@ -42,16 +42,16 @@
     "jest": "28.1.2",
     "prettier": "2.7.1",
     "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
+    "ts-jest": "28.0.5",
     "ts-loader": "9.3.1",
     "ts-node": "10.8.2",
     "tsconfig-paths": "4.0.0",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
     "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
+    "eslint-config-prettier": "8.5.0",
     "eslint-plugin-import": "2.26.0",
-    "typescript": "4.9.5"
+    "typescript": "4.7.4"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/26-queues/tsconfig.json b/sample/26-queues/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/26-queues/tsconfig.json
+++ b/sample/26-queues/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/27-scheduling/package-lock.json b/sample/27-scheduling/package-lock.json
index 19e418ab2..a9a748432 100644
Binary files a/sample/27-scheduling/package-lock.json and b/sample/27-scheduling/package-lock.json differ
diff --git a/sample/27-scheduling/package.json b/sample/27-scheduling/package.json
index 4eda6d526..886433e40 100644
--- a/sample/27-scheduling/package.json
+++ b/sample/27-scheduling/package.json
@@ -19,20 +19,20 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/platform-express": "9.0.1",
     "@nestjs/schedule": "2.1.0",
     "dotenv": "16.0.1",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
+    "rimraf": "3.0.2",
     "rxjs": "7.5.5"
   },
   "devDependencies": {
     "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
-    "@types/bull": "3.15.9",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
+    "@types/bull": "3.15.8",
     "@types/dotenv": "8.2.0",
     "@types/express": "4.17.13",
     "@types/jest": "28.1.4",
@@ -41,16 +41,16 @@
     "jest": "28.1.2",
     "prettier": "2.7.1",
     "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
+    "ts-jest": "28.0.5",
     "ts-loader": "9.3.1",
     "ts-node": "10.8.2",
     "tsconfig-paths": "4.0.0",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
     "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
+    "eslint-config-prettier": "8.5.0",
     "eslint-plugin-import": "2.26.0",
-    "typescript": "4.9.5"
+    "typescript": "4.7.4"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/27-scheduling/tsconfig.json b/sample/27-scheduling/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/27-scheduling/tsconfig.json
+++ b/sample/27-scheduling/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/28-sse/package-lock.json b/sample/28-sse/package-lock.json
index ca85e404e..990122155 100644
Binary files a/sample/28-sse/package-lock.json and b/sample/28-sse/package-lock.json differ
diff --git a/sample/28-sse/package.json b/sample/28-sse/package.json
index 5e46008b2..232662582 100644
--- a/sample/28-sse/package.json
+++ b/sample/28-sse/package.json
@@ -19,17 +19,17 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/platform-express": "9.0.1",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
+    "rimraf": "3.0.2",
     "rxjs": "7.5.5"
   },
   "devDependencies": {
     "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
     "@types/dotenv": "8.2.0",
     "@types/express": "4.17.13",
     "@types/jest": "28.1.4",
@@ -38,16 +38,16 @@
     "jest": "28.1.2",
     "prettier": "2.7.1",
     "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
+    "ts-jest": "28.0.5",
     "ts-loader": "9.3.1",
     "ts-node": "10.8.2",
     "tsconfig-paths": "4.0.0",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
     "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
+    "eslint-config-prettier": "8.5.0",
     "eslint-plugin-import": "2.26.0",
-    "typescript": "4.9.5"
+    "typescript": "4.7.4"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/28-sse/tsconfig.json b/sample/28-sse/tsconfig.json
index 1bbdea209..4e6e210f1 100644
--- a/sample/28-sse/tsconfig.json
+++ b/sample/28-sse/tsconfig.json
@@ -5,7 +5,7 @@
     "removeComments": true,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/29-file-upload/package-lock.json b/sample/29-file-upload/package-lock.json
index 2b858006d..4cca07d6a 100644
Binary files a/sample/29-file-upload/package-lock.json and b/sample/29-file-upload/package-lock.json differ
diff --git a/sample/29-file-upload/package.json b/sample/29-file-upload/package.json
index 88a0effb5..5d80b6566 100644
--- a/sample/29-file-upload/package.json
+++ b/sample/29-file-upload/package.json
@@ -19,19 +19,19 @@
     "test:e2e": "jest --config ./e2e/jest-e2e.json"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/platform-express": "9.0.1",
     "class-transformer": "0.5.1",
-    "class-validator": "0.14.0",
+    "class-validator": "0.13.2",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
+    "rimraf": "3.0.2",
     "rxjs": "7.5.5"
   },
   "devDependencies": {
     "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
     "@types/express": "4.17.13",
     "@types/jest": "28.1.4",
     "@types/multer": "1.4.7",
@@ -40,16 +40,16 @@
     "jest": "28.1.2",
     "prettier": "2.7.1",
     "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
+    "ts-jest": "28.0.5",
     "ts-loader": "9.3.1",
     "ts-node": "10.8.2",
     "tsconfig-paths": "4.0.0",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
     "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
+    "eslint-config-prettier": "8.5.0",
     "eslint-plugin-import": "2.26.0",
-    "typescript": "4.9.5"
+    "typescript": "4.7.4"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/29-file-upload/tsconfig.json b/sample/29-file-upload/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/29-file-upload/tsconfig.json
+++ b/sample/29-file-upload/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/30-event-emitter/package-lock.json b/sample/30-event-emitter/package-lock.json
index 6808ed49d..2bc542628 100644
Binary files a/sample/30-event-emitter/package-lock.json and b/sample/30-event-emitter/package-lock.json differ
diff --git a/sample/30-event-emitter/package.json b/sample/30-event-emitter/package.json
index ae503c037..c989c709c 100644
--- a/sample/30-event-emitter/package.json
+++ b/sample/30-event-emitter/package.json
@@ -19,35 +19,35 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
     "@nestjs/event-emitter": "1.2.0",
-    "@nestjs/platform-express": "9.3.12",
+    "@nestjs/platform-express": "9.0.1",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
+    "rimraf": "3.0.2",
     "rxjs": "7.5.5"
   },
   "devDependencies": {
     "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
     "@types/express": "4.17.13",
     "@types/jest": "28.1.4",
     "@types/node": "18.0.3",
     "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
     "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
+    "eslint-config-prettier": "8.5.0",
     "eslint-plugin-import": "2.26.0",
     "jest": "28.1.2",
     "prettier": "2.7.1",
     "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
+    "ts-jest": "28.0.5",
     "ts-loader": "9.3.1",
     "ts-node": "10.8.2",
     "tsconfig-paths": "4.0.0",
-    "typescript": "4.9.5"
+    "typescript": "4.7.4"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/30-event-emitter/tsconfig.json b/sample/30-event-emitter/tsconfig.json
index d670b01d5..a0e283732 100644
--- a/sample/30-event-emitter/tsconfig.json
+++ b/sample/30-event-emitter/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/31-graphql-federation-code-first/README.md b/sample/31-graphql-federation-code-first/README.md
index bbe0acfd8..e7b90c765 100644
--- a/sample/31-graphql-federation-code-first/README.md
+++ b/sample/31-graphql-federation-code-first/README.md
@@ -4,7 +4,7 @@ A simple example of GraphQL Federation using Code First approach.
 
 ## Execution
 
-Make sure to start the two sub-graph applications first, then the gateway. Otherwise the gateway won't be able to fetch schemas from the sub-graphs.
+Make sure to start the two sub-graph applications first, then the gatway. Otherwise the gateway won't be able to fetch schemas from the sub-graphs.
 
 ```sh
 cd users-application && npm run start
diff --git a/sample/31-graphql-federation-code-first/gateway/package-lock.json b/sample/31-graphql-federation-code-first/gateway/package-lock.json
index 9f8bf7aae..04e55ac61 100644
Binary files a/sample/31-graphql-federation-code-first/gateway/package-lock.json and b/sample/31-graphql-federation-code-first/gateway/package-lock.json differ
diff --git a/sample/31-graphql-federation-code-first/gateway/package.json b/sample/31-graphql-federation-code-first/gateway/package.json
index cf98ac931..781d850bd 100644
--- a/sample/31-graphql-federation-code-first/gateway/package.json
+++ b/sample/31-graphql-federation-code-first/gateway/package.json
@@ -21,41 +21,41 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@apollo/gateway": "2.4.0",
-    "@apollo/server": "4.5.0",
-    "@nestjs/apollo": "11.0.4",
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/graphql": "11.0.0",
-    "@nestjs/platform-express": "9.3.12",
-    "graphql": "16.6.0",
-    "graphql-tools": "8.3.19",
+    "@apollo/gateway": "2.0.5",
+    "@nestjs/apollo": "10.0.17",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/graphql": "10.0.18",
+    "@nestjs/platform-express": "9.0.1",
+    "apollo-server-express": "3.9.0",
+    "graphql": "16.5.0",
+    "graphql-tools": "8.3.0",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.8.0",
-    "ts-morph": "17.0.1"
+    "rimraf": "3.0.2",
+    "rxjs": "7.5.5",
+    "ts-morph": "15.1.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.2.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
-    "@types/express": "4.17.17",
-    "@types/jest": "29.4.0",
-    "@types/node": "18.15.0",
+    "@nestjs/cli": "9.0.0",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
+    "@types/express": "4.17.13",
+    "@types/jest": "28.1.4",
+    "@types/node": "18.0.3",
     "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.35.0",
-    "eslint-config-prettier": "8.8.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
+    "eslint": "8.19.0",
+    "eslint-config-prettier": "8.5.0",
     "eslint-plugin-prettier": "4.2.1",
-    "jest": "29.5.0",
-    "prettier": "2.8.4",
-    "supertest": "6.3.3",
-    "ts-jest": "29.0.5",
-    "ts-loader": "9.4.2",
-    "ts-node": "10.9.1",
-    "tsconfig-paths": "4.1.2",
-    "typescript": "4.9.5"
+    "jest": "28.1.2",
+    "prettier": "2.7.1",
+    "supertest": "6.2.4",
+    "ts-jest": "28.0.5",
+    "ts-loader": "9.3.1",
+    "ts-node": "10.8.2",
+    "tsconfig-paths": "4.0.0",
+    "typescript": "4.7.4"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/31-graphql-federation-code-first/gateway/tsconfig.json b/sample/31-graphql-federation-code-first/gateway/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/31-graphql-federation-code-first/gateway/tsconfig.json
+++ b/sample/31-graphql-federation-code-first/gateway/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/31-graphql-federation-code-first/posts-application/package-lock.json b/sample/31-graphql-federation-code-first/posts-application/package-lock.json
index b0c7e5696..5f4c2ce91 100644
Binary files a/sample/31-graphql-federation-code-first/posts-application/package-lock.json and b/sample/31-graphql-federation-code-first/posts-application/package-lock.json differ
diff --git a/sample/31-graphql-federation-code-first/posts-application/package.json b/sample/31-graphql-federation-code-first/posts-application/package.json
index 6bcdf34d4..67cb5f415 100644
--- a/sample/31-graphql-federation-code-first/posts-application/package.json
+++ b/sample/31-graphql-federation-code-first/posts-application/package.json
@@ -21,42 +21,43 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@apollo/gateway": "2.4.0",
-    "@apollo/server": "4.5.0",
-    "@apollo/subgraph": "2.4.0",
-    "@nestjs/apollo": "11.0.4",
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/graphql": "11.0.0",
-    "@nestjs/platform-express": "9.3.12",
-    "graphql": "16.6.0",
-    "graphql-tools": "8.3.19",
+    "@apollo/federation": "0.36.1",
+    "@apollo/gateway": "2.0.5",
+    "@apollo/subgraph": "2.0.5",
+    "@nestjs/apollo": "10.0.17",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/graphql": "10.0.18",
+    "@nestjs/platform-express": "9.0.1",
+    "apollo-server-express": "3.9.0",
+    "graphql": "16.5.0",
+    "graphql-tools": "8.3.0",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.8.0",
-    "ts-morph": "17.0.1"
+    "rimraf": "3.0.2",
+    "rxjs": "7.5.5",
+    "ts-morph": "15.1.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.2.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
-    "@types/express": "4.17.17",
-    "@types/jest": "29.4.0",
-    "@types/node": "18.15.0",
+    "@nestjs/cli": "9.0.0",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
+    "@types/express": "4.17.13",
+    "@types/jest": "28.1.4",
+    "@types/node": "18.0.3",
     "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.35.0",
-    "eslint-config-prettier": "8.8.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
+    "eslint": "8.19.0",
+    "eslint-config-prettier": "8.5.0",
     "eslint-plugin-prettier": "4.2.1",
-    "jest": "29.5.0",
-    "prettier": "2.8.4",
-    "supertest": "6.3.3",
-    "ts-jest": "29.0.5",
-    "ts-loader": "9.4.2",
-    "ts-node": "10.9.1",
-    "tsconfig-paths": "4.1.2",
-    "typescript": "4.9.5"
+    "jest": "28.1.2",
+    "prettier": "2.7.1",
+    "supertest": "6.2.4",
+    "ts-jest": "28.0.5",
+    "ts-loader": "9.3.1",
+    "ts-node": "10.8.2",
+    "tsconfig-paths": "4.0.0",
+    "typescript": "4.7.4"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/31-graphql-federation-code-first/posts-application/tsconfig.json b/sample/31-graphql-federation-code-first/posts-application/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/31-graphql-federation-code-first/posts-application/tsconfig.json
+++ b/sample/31-graphql-federation-code-first/posts-application/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/31-graphql-federation-code-first/users-application/package-lock.json b/sample/31-graphql-federation-code-first/users-application/package-lock.json
index 0af9f34e7..2b31ae855 100644
Binary files a/sample/31-graphql-federation-code-first/users-application/package-lock.json and b/sample/31-graphql-federation-code-first/users-application/package-lock.json differ
diff --git a/sample/31-graphql-federation-code-first/users-application/package.json b/sample/31-graphql-federation-code-first/users-application/package.json
index 87bfa1797..922a4a5cd 100644
--- a/sample/31-graphql-federation-code-first/users-application/package.json
+++ b/sample/31-graphql-federation-code-first/users-application/package.json
@@ -20,42 +20,43 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@apollo/gateway": "2.4.0",
-    "@apollo/server": "4.5.0",
-    "@apollo/subgraph": "2.4.0",
-    "@nestjs/apollo": "11.0.4",
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/graphql": "11.0.0",
-    "@nestjs/platform-express": "9.3.12",
-    "graphql": "16.6.0",
-    "graphql-tools": "8.3.19",
+    "@apollo/federation": "0.36.1",
+    "@apollo/gateway": "2.0.5",
+    "@apollo/subgraph": "2.0.5",
+    "@nestjs/apollo": "10.0.17",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/graphql": "10.0.19",
+    "@nestjs/platform-express": "9.0.1",
+    "apollo-server-express": "3.9.0",
+    "graphql": "16.5.0",
+    "graphql-tools": "8.3.0",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.8.0",
-    "ts-morph": "17.0.1"
+    "rimraf": "3.0.2",
+    "rxjs": "7.5.5",
+    "ts-morph": "15.1.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.2.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
-    "@types/express": "4.17.17",
-    "@types/jest": "29.4.0",
-    "@types/node": "18.15.0",
+    "@nestjs/cli": "9.0.0",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
+    "@types/express": "4.17.13",
+    "@types/jest": "28.1.4",
+    "@types/node": "18.0.3",
     "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.35.0",
-    "eslint-config-prettier": "8.8.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
+    "eslint": "8.19.0",
+    "eslint-config-prettier": "8.5.0",
     "eslint-plugin-prettier": "4.2.1",
-    "jest": "29.5.0",
-    "prettier": "2.8.4",
-    "supertest": "6.3.3",
-    "ts-jest": "29.0.5",
-    "ts-loader": "9.4.2",
-    "ts-node": "10.9.1",
-    "tsconfig-paths": "4.1.2",
-    "typescript": "4.9.5"
+    "jest": "28.1.2",
+    "prettier": "2.7.1",
+    "supertest": "6.2.4",
+    "ts-jest": "28.0.5",
+    "ts-loader": "9.3.1",
+    "ts-node": "10.8.2",
+    "tsconfig-paths": "4.0.0",
+    "typescript": "4.7.4"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/31-graphql-federation-code-first/users-application/tsconfig.json b/sample/31-graphql-federation-code-first/users-application/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/31-graphql-federation-code-first/users-application/tsconfig.json
+++ b/sample/31-graphql-federation-code-first/users-application/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/32-graphql-federation-schema-first/README.md b/sample/32-graphql-federation-schema-first/README.md
index 7a0f47a9d..1f3fd3dc1 100644
--- a/sample/32-graphql-federation-schema-first/README.md
+++ b/sample/32-graphql-federation-schema-first/README.md
@@ -4,7 +4,7 @@ A simple example of GraphQL Federation using Schema First approach.
 
 ## Execution
 
-Make sure to start the two sub-graph applications first, then the gateway. Otherwise the gateway won't be able to fetch schemas from the sub-graphs.
+Make sure to start the two sub-graph applications first, then the gatway. Otherwise the gateway won't be able to fetch schemas from the sub-graphs.
 
 ```sh
 cd users-application && npm run start
diff --git a/sample/32-graphql-federation-schema-first/gateway/package-lock.json b/sample/32-graphql-federation-schema-first/gateway/package-lock.json
index 9b0805d5d..04e55ac61 100644
Binary files a/sample/32-graphql-federation-schema-first/gateway/package-lock.json and b/sample/32-graphql-federation-schema-first/gateway/package-lock.json differ
diff --git a/sample/32-graphql-federation-schema-first/gateway/package.json b/sample/32-graphql-federation-schema-first/gateway/package.json
index ff3ff8bf0..781d850bd 100644
--- a/sample/32-graphql-federation-schema-first/gateway/package.json
+++ b/sample/32-graphql-federation-schema-first/gateway/package.json
@@ -21,41 +21,41 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@apollo/gateway": "2.4.0",
-    "@apollo/server": "^4.4.1",
-    "@nestjs/apollo": "11.0.4",
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/graphql": "11.0.0",
-    "@nestjs/platform-express": "9.3.12",
-    "graphql": "16.6.0",
-    "graphql-tools": "8.3.19",
+    "@apollo/gateway": "2.0.5",
+    "@nestjs/apollo": "10.0.17",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/graphql": "10.0.18",
+    "@nestjs/platform-express": "9.0.1",
+    "apollo-server-express": "3.9.0",
+    "graphql": "16.5.0",
+    "graphql-tools": "8.3.0",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.8.0",
-    "ts-morph": "17.0.1"
+    "rimraf": "3.0.2",
+    "rxjs": "7.5.5",
+    "ts-morph": "15.1.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.2.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
-    "@types/express": "4.17.17",
-    "@types/jest": "29.4.0",
-    "@types/node": "18.15.0",
+    "@nestjs/cli": "9.0.0",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
+    "@types/express": "4.17.13",
+    "@types/jest": "28.1.4",
+    "@types/node": "18.0.3",
     "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.35.0",
-    "eslint-config-prettier": "8.8.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
+    "eslint": "8.19.0",
+    "eslint-config-prettier": "8.5.0",
     "eslint-plugin-prettier": "4.2.1",
-    "jest": "29.5.0",
-    "prettier": "2.8.4",
-    "supertest": "6.3.3",
-    "ts-jest": "29.0.5",
-    "ts-loader": "9.4.2",
-    "ts-node": "10.9.1",
-    "tsconfig-paths": "4.1.2",
-    "typescript": "4.9.5"
+    "jest": "28.1.2",
+    "prettier": "2.7.1",
+    "supertest": "6.2.4",
+    "ts-jest": "28.0.5",
+    "ts-loader": "9.3.1",
+    "ts-node": "10.8.2",
+    "tsconfig-paths": "4.0.0",
+    "typescript": "4.7.4"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/32-graphql-federation-schema-first/gateway/tsconfig.json b/sample/32-graphql-federation-schema-first/gateway/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/32-graphql-federation-schema-first/gateway/tsconfig.json
+++ b/sample/32-graphql-federation-schema-first/gateway/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/32-graphql-federation-schema-first/posts-application/package-lock.json b/sample/32-graphql-federation-schema-first/posts-application/package-lock.json
index 2eefbed12..5f4c2ce91 100644
Binary files a/sample/32-graphql-federation-schema-first/posts-application/package-lock.json and b/sample/32-graphql-federation-schema-first/posts-application/package-lock.json differ
diff --git a/sample/32-graphql-federation-schema-first/posts-application/package.json b/sample/32-graphql-federation-schema-first/posts-application/package.json
index 2f071dace..67cb5f415 100644
--- a/sample/32-graphql-federation-schema-first/posts-application/package.json
+++ b/sample/32-graphql-federation-schema-first/posts-application/package.json
@@ -21,42 +21,43 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@apollo/gateway": "2.4.0",
-    "@apollo/server": "^4.4.1",
-    "@apollo/subgraph": "2.4.0",
-    "@nestjs/apollo": "11.0.4",
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/graphql": "11.0.0",
-    "@nestjs/platform-express": "9.3.12",
-    "graphql": "16.6.0",
-    "graphql-tools": "8.3.19",
+    "@apollo/federation": "0.36.1",
+    "@apollo/gateway": "2.0.5",
+    "@apollo/subgraph": "2.0.5",
+    "@nestjs/apollo": "10.0.17",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/graphql": "10.0.18",
+    "@nestjs/platform-express": "9.0.1",
+    "apollo-server-express": "3.9.0",
+    "graphql": "16.5.0",
+    "graphql-tools": "8.3.0",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.8.0",
-    "ts-morph": "17.0.1"
+    "rimraf": "3.0.2",
+    "rxjs": "7.5.5",
+    "ts-morph": "15.1.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.2.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
-    "@types/express": "4.17.17",
-    "@types/jest": "29.4.0",
-    "@types/node": "18.15.0",
+    "@nestjs/cli": "9.0.0",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
+    "@types/express": "4.17.13",
+    "@types/jest": "28.1.4",
+    "@types/node": "18.0.3",
     "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.35.0",
-    "eslint-config-prettier": "8.8.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
+    "eslint": "8.19.0",
+    "eslint-config-prettier": "8.5.0",
     "eslint-plugin-prettier": "4.2.1",
-    "jest": "29.5.0",
-    "prettier": "2.8.4",
-    "supertest": "6.3.3",
-    "ts-jest": "29.0.5",
-    "ts-loader": "9.4.2",
-    "ts-node": "10.9.1",
-    "tsconfig-paths": "4.1.2",
-    "typescript": "4.9.5"
+    "jest": "28.1.2",
+    "prettier": "2.7.1",
+    "supertest": "6.2.4",
+    "ts-jest": "28.0.5",
+    "ts-loader": "9.3.1",
+    "ts-node": "10.8.2",
+    "tsconfig-paths": "4.0.0",
+    "typescript": "4.7.4"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/32-graphql-federation-schema-first/posts-application/tsconfig.json b/sample/32-graphql-federation-schema-first/posts-application/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/32-graphql-federation-schema-first/posts-application/tsconfig.json
+++ b/sample/32-graphql-federation-schema-first/posts-application/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/32-graphql-federation-schema-first/users-application/package-lock.json b/sample/32-graphql-federation-schema-first/users-application/package-lock.json
index 4f6f15d4c..e88571d7f 100644
Binary files a/sample/32-graphql-federation-schema-first/users-application/package-lock.json and b/sample/32-graphql-federation-schema-first/users-application/package-lock.json differ
diff --git a/sample/32-graphql-federation-schema-first/users-application/package.json b/sample/32-graphql-federation-schema-first/users-application/package.json
index 0c016b1b6..9628d9320 100644
--- a/sample/32-graphql-federation-schema-first/users-application/package.json
+++ b/sample/32-graphql-federation-schema-first/users-application/package.json
@@ -20,42 +20,43 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@apollo/gateway": "2.4.0",
-    "@apollo/server": "^4.4.1",
-    "@apollo/subgraph": "2.4.0",
-    "@nestjs/apollo": "11.0.4",
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/graphql": "11.0.0",
-    "@nestjs/platform-express": "9.3.12",
-    "graphql": "16.6.0",
-    "graphql-tools": "8.3.19",
+    "@apollo/federation": "0.36.1",
+    "@apollo/gateway": "2.0.5",
+    "@apollo/subgraph": "2.0.5",
+    "@nestjs/apollo": "10.0.17",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
+    "@nestjs/graphql": "10.0.18",
+    "@nestjs/platform-express": "9.0.1",
+    "apollo-server-express": "3.9.0",
+    "graphql": "15.8.0",
+    "graphql-tools": "8.3.0",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.8.0",
-    "ts-morph": "17.0.1"
+    "rimraf": "3.0.2",
+    "rxjs": "7.5.5",
+    "ts-morph": "15.1.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.2.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
-    "@types/express": "4.17.17",
-    "@types/jest": "29.4.0",
-    "@types/node": "18.15.0",
+    "@nestjs/cli": "9.0.0",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
+    "@types/express": "4.17.13",
+    "@types/jest": "28.1.4",
+    "@types/node": "18.0.3",
     "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.35.0",
-    "eslint-config-prettier": "8.8.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
+    "eslint": "8.19.0",
+    "eslint-config-prettier": "8.5.0",
     "eslint-plugin-prettier": "4.2.1",
-    "jest": "29.5.0",
-    "prettier": "2.8.4",
-    "supertest": "6.3.3",
-    "ts-jest": "29.0.5",
-    "ts-loader": "9.4.2",
-    "ts-node": "10.9.1",
-    "tsconfig-paths": "4.1.2",
-    "typescript": "4.9.5"
+    "jest": "28.1.2",
+    "prettier": "2.7.1",
+    "supertest": "6.2.4",
+    "ts-jest": "28.0.5",
+    "ts-loader": "9.3.1",
+    "ts-node": "10.8.2",
+    "tsconfig-paths": "4.0.0",
+    "typescript": "4.7.4"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/32-graphql-federation-schema-first/users-application/tsconfig.json b/sample/32-graphql-federation-schema-first/users-application/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/32-graphql-federation-schema-first/users-application/tsconfig.json
+++ b/sample/32-graphql-federation-schema-first/users-application/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/33-graphql-mercurius/package-lock.json b/sample/33-graphql-mercurius/package-lock.json
index c0711430a..e428d5cf6 100644
Binary files a/sample/33-graphql-mercurius/package-lock.json and b/sample/33-graphql-mercurius/package-lock.json differ
diff --git a/sample/33-graphql-mercurius/package.json b/sample/33-graphql-mercurius/package.json
index b05ea311d..14aad90bf 100644
--- a/sample/33-graphql-mercurius/package.json
+++ b/sample/33-graphql-mercurius/package.json
@@ -19,37 +19,37 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
+    "@nestjs/common": "9.0.1",
+    "@nestjs/core": "9.0.1",
     "@nestjs/graphql": "10.0.18",
     "@nestjs/mercurius": "10.0.17",
-    "@nestjs/platform-fastify": "9.3.12",
+    "@nestjs/platform-fastify": "9.0.1",
     "class-transformer": "0.5.1",
-    "class-validator": "0.14.0",
+    "class-validator": "0.13.2",
     "graphql": "16.5.0",
-    "mercurius": "12.2.0",
+    "mercurius": "10.1.0",
     "reflect-metadata": "0.1.13",
     "rxjs": "7.5.5"
   },
   "devDependencies": {
     "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/schematics": "9.0.1",
+    "@nestjs/testing": "9.0.1",
     "@types/express": "4.17.13",
     "@types/node": "18.0.3",
     "@types/supertest": "2.0.12",
     "jest": "28.1.2",
     "prettier": "2.7.1",
     "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
+    "ts-jest": "28.0.5",
     "ts-loader": "9.3.1",
     "ts-node": "10.8.2",
     "tsconfig-paths": "4.0.0",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
+    "@typescript-eslint/eslint-plugin": "5.30.5",
+    "@typescript-eslint/parser": "5.30.5",
     "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
+    "eslint-config-prettier": "8.5.0",
     "eslint-plugin-import": "2.26.0",
-    "typescript": "4.9.5"
+    "typescript": "4.7.4"
   }
 }
diff --git a/sample/33-graphql-mercurius/tsconfig.json b/sample/33-graphql-mercurius/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/33-graphql-mercurius/tsconfig.json
+++ b/sample/33-graphql-mercurius/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/tools/gulp/gulpfile.ts b/tools/gulp/gulpfile.ts
index 1e6200761..de25610c2 100644
--- a/tools/gulp/gulpfile.ts
+++ b/tools/gulp/gulpfile.ts
@@ -1,4 +1,5 @@
-import './tasks/clean';
 import './tasks/copy-misc';
+import './tasks/clean';
+import './tasks/packages';
 import './tasks/move';
 import './tasks/samples';
diff --git a/tools/gulp/tasks/move.ts b/tools/gulp/tasks/move.ts
index 0991e1e6f..d01a29d59 100644
--- a/tools/gulp/tasks/move.ts
+++ b/tools/gulp/tasks/move.ts
@@ -3,24 +3,12 @@ import { join } from 'path';
 import { samplePath } from '../config';
 import { containsPackageJson, getDirs } from '../util/task-helpers';
 
-const distFiles = src([
-  'packages/**/*',
-  '!packages/**/*.ts',
-  'packages/**/*.d.ts',
-]);
-
-/**
- * Moves the compiled nest files into "node_module" folder.
- */
-function moveToNodeModules() {
-  return distFiles.pipe(dest('node_modules/@nestjs'));
-}
-
 /**
  * Moves the compiled nest files into the `samples/*` dirs.
  */
-function moveToSamples() {
+function move() {
   const samplesDirs = getDirs(samplePath);
+  const distFiles = src(['node_modules/@nestjs/**/*']);
 
   /**
    * Flatten the sampleDirs
@@ -43,5 +31,4 @@ function moveToSamples() {
   );
 }
 
-task('move:node_modules', moveToNodeModules);
-task('move:samples', moveToSamples);
+task('move', move);
diff --git a/tools/gulp/tasks/packages.ts b/tools/gulp/tasks/packages.ts
new file mode 100644
index 000000000..28682443f
--- /dev/null
+++ b/tools/gulp/tasks/packages.ts
@@ -0,0 +1,78 @@
+import { source } from '../config';
+import { task, watch, series, dest } from 'gulp';
+import { createProject } from 'gulp-typescript';
+import * as sourcemaps from 'gulp-sourcemaps';
+import * as log from 'fancy-log';
+
+// Has to be a hardcoded object due to build order
+const packages = {
+  common: createProject('packages/common/tsconfig.json'),
+  core: createProject('packages/core/tsconfig.json'),
+  microservices: createProject('packages/microservices/tsconfig.json'),
+  websockets: createProject('packages/websockets/tsconfig.json'),
+  testing: createProject('packages/testing/tsconfig.json'),
+  'platform-express': createProject('packages/platform-express/tsconfig.json'),
+  'platform-fastify': createProject('packages/platform-fastify/tsconfig.json'),
+  'platform-socket.io': createProject(
+    'packages/platform-socket.io/tsconfig.json',
+  ),
+  'platform-ws': createProject('packages/platform-ws/tsconfig.json'),
+};
+
+const modules = Object.keys(packages);
+
+const distId = process.argv.indexOf('--dist');
+const dist = distId < 0 ? source : process.argv[distId + 1];
+
+/**
+ * Watches the packages/* folder and
+ * builds the package on file change
+ */
+function defaultTask() {
+  log.info('Watching files..');
+  modules.forEach(packageName => {
+    watch(
+      [`${source}/${packageName}/**/*.ts`, `${source}/${packageName}/*.ts`],
+      series(packageName),
+    );
+  });
+}
+
+/**
+ * Builds the given package
+ * @param packageName The name of the package
+ */
+function buildPackage(packageName: string) {
+  return packages[packageName]
+    .src()
+    .pipe(packages[packageName]())
+    .pipe(dest(`${dist}/${packageName}`));
+}
+
+/**
+ * Builds the given package and adds sourcemaps
+ * @param packageName The name of the package
+ */
+function buildPackageDev(packageName: string) {
+  return packages[packageName]
+    .src()
+    .pipe(sourcemaps.init())
+    .pipe(packages[packageName]())
+    .pipe(
+      sourcemaps.mapSources(
+        (sourcePath: string) => './' + sourcePath.split('/').pop(),
+      ),
+    )
+    .pipe(sourcemaps.write('.', {}))
+    .pipe(dest(`${dist}/${packageName}`));
+}
+
+modules.forEach(packageName => {
+  task(packageName, () => buildPackage(packageName));
+  task(`${packageName}:dev`, () => buildPackageDev(packageName));
+});
+
+task('common:dev', series(modules.map(packageName => `${packageName}:dev`)));
+task('build', series(modules));
+task('build:dev', series('common:dev'));
+task('default', defaultTask);
diff --git a/tools/gulp/tsconfig.json b/tools/gulp/tsconfig.json
index 043217830..6438b3c5a 100644
--- a/tools/gulp/tsconfig.json
+++ b/tools/gulp/tsconfig.json
@@ -3,6 +3,7 @@
     "experimentalDecorators": true,
     "noUnusedParameters": false,
     "noUnusedLocals": false,
+    "lib": ["es2015", "dom", "es2016.array.include"],
     "module": "commonjs",
     "moduleResolution": "node",
     "outDir": "../../dist/tools/gulp",
@@ -11,7 +12,7 @@
     "noImplicitThis": true,
     "noEmitOnError": true,
     "noImplicitAny": false,
-    "target": "ES2021",
+    "target": "es5",
     "types": [
       "node"
     ],
diff --git a/tools/gulp/util/task-helpers.ts b/tools/gulp/util/task-helpers.ts
index 9e9e65e3c..736a1087c 100644
--- a/tools/gulp/util/task-helpers.ts
+++ b/tools/gulp/util/task-helpers.ts
@@ -15,7 +15,7 @@ export function getDirs(base: string) {
 
 /**
  * Checks if the directory contains a package.json file
- * @param dir Path to the directory
+ * @param dir Path to the dircetory
  * @returns True if the directory contains a package.json
  */
 export function containsPackageJson(dir: string) {
diff --git a/tsconfig.json b/tsconfig.json
index 89fc99832..5712f3c0c 100644
--- a/tsconfig.json
+++ b/tsconfig.json
@@ -1,6 +1,7 @@
 {
   "compilerOptions": {
     "module": "commonjs",
+    "declaration": false,
     "noImplicitAny": false,
     "noUnusedLocals": false,
     "removeComments": true,
@@ -8,11 +9,11 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "useUnknownInCatchVariables": false,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
-    "allowJs": false,
+    "allowJs": true,
     "outDir": "dist",
-    "baseUrl": ".",
+    "lib": ["es7"],
     "paths": {
       "@nestjs/common": ["./packages/common"],
       "@nestjs/common/*": ["./packages/common/*"],
@@ -30,7 +31,7 @@
       "@nestjs/platform-ws/*": ["./packages/platform-ws/*"],
       "@nestjs/platform-fastify": ["./packages/platform-fastify"],
       "@nestjs/platform-fastify/*": ["./packages/platform-fastify/*"],
-      "@nestjs/platform-socket.io": ["./packages/platform-socket.io"],
+      "@nestjs/platform-socket.io": ["./packages/platform-ws"],
       "@nestjs/platform-socket.io/*": ["./packages/platform-socket.io/*"],
     }
   },
diff --git a/tsconfig.spec.json b/tsconfig.spec.json
index 95af08508..60e239b85 100644
--- a/tsconfig.spec.json
+++ b/tsconfig.spec.json
@@ -2,4 +2,4 @@
   "extends": "./tsconfig.json",
   "include": ["integration/**/*", "**/*.spec.ts"],
   "exclude": ["node_modules", "dist"]
-}
\ No newline at end of file
+}
