diff --git a/.changeset/angry-seals-sin.md b/.changeset/angry-seals-sin.md
new file mode 100644
index 0000000000..752eae7712
--- /dev/null
+++ b/.changeset/angry-seals-sin.md
@@ -0,0 +1,21 @@
+---
+'@xstate/graph': patch
+---
+
+Traversing state machines that have delayed transitions will now work as expected:
+
+```ts
+const machine = createMachine({
+  initial: 'a',
+  states: {
+    a: {
+      after: {
+        1000: 'b'
+      }
+    },
+    b: {}
+  }
+});
+
+const paths = getShortestPaths(machine); // works
+```
diff --git a/packages/xstate-graph/src/actorContext.ts b/packages/xstate-graph/src/actorContext.ts
new file mode 100644
index 0000000000..580222b3c1
--- /dev/null
+++ b/packages/xstate-graph/src/actorContext.ts
@@ -0,0 +1,14 @@
+import { AnyActorContext, createEmptyActor } from 'xstate';
+
+export function createMockActorContext(): AnyActorContext {
+  const emptyActor = createEmptyActor();
+  return {
+    self: emptyActor,
+    logger: console.log,
+    id: '',
+    sessionId: Math.random().toString(32).slice(2),
+    defer: () => {},
+    system: emptyActor,
+    stopChild: () => {}
+  };
+}
diff --git a/packages/xstate-graph/src/adjacency.ts b/packages/xstate-graph/src/adjacency.ts
index 1f7d0d17f2..28009c016f 100644
--- a/packages/xstate-graph/src/adjacency.ts
+++ b/packages/xstate-graph/src/adjacency.ts
@@ -1,6 +1,7 @@
 import { ActorLogic, ActorSystem, EventObject, Snapshot } from 'xstate';
 import { SerializedEvent, SerializedState, TraversalOptions } from './types';
 import { AdjacencyMap, resolveTraversalOptions } from './graph';
+import { createMockActorContext } from './actorContext';
 
 export function getAdjacencyMap<
   TSnapshot extends Snapshot<unknown>,
@@ -21,7 +22,7 @@ export function getAdjacencyMap<
     fromState: customFromState,
     stopCondition
   } = resolveTraversalOptions(logic, options);
-  const actorContext = { self: {} } as any; // TODO: figure out the simulation API
+  const actorContext = createMockActorContext();
   const fromState =
     customFromState ??
     logic.getInitialState(
diff --git a/packages/xstate-graph/src/graph.ts b/packages/xstate-graph/src/graph.ts
index 57de0f88b8..df523bec8a 100644
--- a/packages/xstate-graph/src/graph.ts
+++ b/packages/xstate-graph/src/graph.ts
@@ -20,6 +20,7 @@ import type {
   AnyStateNode,
   TraversalConfig
 } from './types.ts';
+import { createMockActorContext } from './actorContext.ts';
 
 function flatten<T>(array: Array<T | T[]>): T[] {
   return ([] as T[]).concat(...array);
@@ -101,9 +102,9 @@ export function createDefaultMachineOptions<TMachine extends AnyStateMachine>(
         })
       ) as any[];
     },
-    fromState: machine.getInitialState(
-      {} as any // TODO: figure out the simulation API
-    ) as ReturnType<TMachine['transition']>,
+    fromState: machine.getInitialState(createMockActorContext()) as ReturnType<
+      TMachine['transition']
+    >,
     ...otherOptions
   };
 
diff --git a/packages/xstate-graph/src/pathFromEvents.ts b/packages/xstate-graph/src/pathFromEvents.ts
index f75010c3fc..fe43e235e0 100644
--- a/packages/xstate-graph/src/pathFromEvents.ts
+++ b/packages/xstate-graph/src/pathFromEvents.ts
@@ -19,6 +19,7 @@ import {
   createDefaultLogicOptions
 } from './graph';
 import { alterPath } from './alterPath';
+import { createMockActorContext } from './actorContext';
 
 function isMachine(value: any): value is AnyStateMachine {
   return !!value && '__xstatenode' in value;
@@ -45,7 +46,7 @@ export function getPathsFromEvents<
       ? createDefaultMachineOptions(logic)
       : createDefaultLogicOptions()) as TraversalOptions<TSnapshot, TEvent>
   );
-  const actorContext = { self: {} } as any; // TODO: figure out the simulation API
+  const actorContext = createMockActorContext();
   const fromState =
     resolvedOptions.fromState ??
     logic.getInitialState(
diff --git a/packages/xstate-graph/src/shortestPaths.ts b/packages/xstate-graph/src/shortestPaths.ts
index 07d4a75521..37e679c376 100644
--- a/packages/xstate-graph/src/shortestPaths.ts
+++ b/packages/xstate-graph/src/shortestPaths.ts
@@ -9,6 +9,7 @@ import {
   StatePlanMap,
   TraversalOptions
 } from './types';
+import { createMockActorContext } from './actorContext';
 
 export function getShortestPaths<TLogic extends AnyActorLogic>(
   logic: TLogic,
@@ -26,10 +27,7 @@ export function getShortestPaths<TLogic extends AnyActorLogic>(
   ) => SerializedState;
   const fromState =
     resolvedOptions.fromState ??
-    logic.getInitialState(
-      {} as any, // TODO: figure out the simulation API
-      undefined
-    );
+    logic.getInitialState(createMockActorContext(), undefined);
   const adjacency = getAdjacencyMap(logic, resolvedOptions);
 
   // weight, state, event
diff --git a/packages/xstate-graph/src/simplePaths.ts b/packages/xstate-graph/src/simplePaths.ts
index 469933eec8..e8aeac3c9d 100644
--- a/packages/xstate-graph/src/simplePaths.ts
+++ b/packages/xstate-graph/src/simplePaths.ts
@@ -19,6 +19,7 @@ import {
 import { resolveTraversalOptions, createDefaultMachineOptions } from './graph';
 import { getAdjacencyMap } from './adjacency';
 import { alterPath } from './alterPath';
+import { createMockActorContext } from './actorContext';
 
 export function getSimplePaths<TLogic extends AnyActorLogic>(
   logic: TLogic,
@@ -31,7 +32,7 @@ export function getSimplePaths<TLogic extends AnyActorLogic>(
   type TEvent = EventFromLogic<TLogic>;
 
   const resolvedOptions = resolveTraversalOptions(logic, options);
-  const actorContext = { self: {} } as any; // TODO: figure out the simulation API
+  const actorContext = createMockActorContext();
   const fromState =
     resolvedOptions.fromState ?? logic.getInitialState(actorContext, undefined);
   const serializeState = resolvedOptions.serializeState as (
