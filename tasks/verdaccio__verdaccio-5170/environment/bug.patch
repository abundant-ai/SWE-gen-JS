diff --git a/.changeset/fresh-owls-hunt.md b/.changeset/fresh-owls-hunt.md
new file mode 100644
index 000000000..0d3199fbf
--- /dev/null
+++ b/.changeset/fresh-owls-hunt.md
@@ -0,0 +1,5 @@
+---
+'@verdaccio/config': patch
+---
+
+chore: expose config utils
diff --git a/.changeset/odd-fishes-cry.md b/.changeset/odd-fishes-cry.md
new file mode 100644
index 000000000..eefbce20f
--- /dev/null
+++ b/.changeset/odd-fishes-cry.md
@@ -0,0 +1,5 @@
+---
+'@verdaccio/middleware': patch
+---
+
+fix(middleware): scoped package for allow checks
diff --git a/.changeset/yellow-flies-sniff.md b/.changeset/yellow-flies-sniff.md
deleted file mode 100644
index 4c372bb29..000000000
--- a/.changeset/yellow-flies-sniff.md
+++ /dev/null
@@ -1,10 +0,0 @@
----
-'@verdaccio/search-indexer': patch
-'@verdaccio/server': patch
-'@verdaccio/loaders': patch
-'@verdaccio/store': patch
-'@verdaccio/auth': patch
-'@verdaccio/web': patch
----
-
-fix: add legacyMergeConfigs legacy plugins
diff --git a/packages/auth/src/auth.ts b/packages/auth/src/auth.ts
index 9c4ca157a..277206ffe 100644
--- a/packages/auth/src/auth.ts
+++ b/packages/auth/src/auth.ts
@@ -123,7 +123,6 @@ class Auth implements IAuthMiddleware, TokenEncryption, pluginUtils.IBasicAuth {
           typeof allow_publish !== 'undefined'
         );
       },
-      false,
       this.config?.serverSettings?.pluginPrefix,
       PLUGIN_CATEGORY.AUTHENTICATION
     );
diff --git a/packages/config/src/index.ts b/packages/config/src/index.ts
index 386f85715..730e4910e 100644
--- a/packages/config/src/index.ts
+++ b/packages/config/src/index.ts
@@ -1,6 +1,7 @@
 export * from './config';
 export * from './config-path';
 export * from './token';
+export * from './config-utils';
 export * from './package-access';
 export { fromJStoYAML, parseConfigFile } from './parse';
 export * from './uplinks';
diff --git a/packages/loaders/src/plugin-async-loader.ts b/packages/loaders/src/plugin-async-loader.ts
index 4d308038d..691a59f12 100644
--- a/packages/loaders/src/plugin-async-loader.ts
+++ b/packages/loaders/src/plugin-async-loader.ts
@@ -1,6 +1,5 @@
 import buildDebug from 'debug';
 import fs from 'fs';
-import _ from 'lodash';
 import { dirname, isAbsolute, join, resolve } from 'path';
 
 import { pluginUtils } from '@verdaccio/core';
@@ -16,10 +15,6 @@ async function isDirectory(pathFolder: string) {
   return stat.isDirectory();
 }
 
-function mergeConfig(appConfig: unknown, pluginConfig: unknown) {
-  return _.merge({}, appConfig, pluginConfig);
-}
-
 // type Plugins<T> =
 //   | pluginUtils.Auth<T>
 //   | pluginUtils.Storage<T>
@@ -52,7 +47,6 @@ export async function asyncLoadPlugin<T extends pluginUtils.Plugin<T>>(
   pluginConfigs: any = {},
   pluginOptions: pluginUtils.PluginOptions,
   sanityCheck: (plugin: PluginType<T>) => boolean,
-  legacyMergeConfigs: boolean = false,
   prefix: string = 'verdaccio',
   pluginCategory: string = ''
 ): Promise<PluginType<T>[]> {
@@ -88,12 +82,7 @@ export async function asyncLoadPlugin<T extends pluginUtils.Plugin<T>>(
           logger.error(a, b);
         });
         if (plugin && isValid(plugin)) {
-          plugin = executePlugin(
-            plugin,
-            pluginConfigs[pluginId],
-            pluginOptions,
-            legacyMergeConfigs
-          );
+          plugin = executePlugin(plugin, pluginConfigs[pluginId], pluginOptions);
           if (!sanityCheck(plugin)) {
             logger.error(
               { content: externalFilePlugin },
@@ -126,7 +115,7 @@ export async function asyncLoadPlugin<T extends pluginUtils.Plugin<T>>(
         logger.error(a, b);
       });
       if (plugin && isValid(plugin)) {
-        plugin = executePlugin(plugin, pluginConfigs[pluginId], pluginOptions, legacyMergeConfigs);
+        plugin = executePlugin(plugin, pluginConfigs[pluginId], pluginOptions);
         if (!sanityCheck(plugin)) {
           logger.error({ content: pluginName }, "@{content} doesn't look like a valid plugin");
           continue;
@@ -154,15 +143,8 @@ export async function asyncLoadPlugin<T extends pluginUtils.Plugin<T>>(
 export function executePlugin<T>(
   plugin: PluginType<T>,
   pluginConfig: unknown,
-  pluginOptions: pluginUtils.PluginOptions,
-  legacyMergeConfigs: boolean = false
+  pluginOptions: pluginUtils.PluginOptions
 ): PluginType<T> {
-  // this is a legacy support for plugins that are not using the new API
-  if (legacyMergeConfigs) {
-    debug('>>> plugin merge config enabled');
-    let originalConfig = pluginOptions.config;
-    pluginConfig = mergeConfig(originalConfig, pluginConfig);
-  }
   if (isES6(plugin)) {
     debug('plugin is ES6');
     // @ts-expect-error no relevant for the code
diff --git a/packages/loaders/test/partials/test-plugin-storage/verdaccio-plugin/index.js b/packages/loaders/test/partials/test-plugin-storage/verdaccio-plugin/index.js
index 92e66cc68..c1291e321 100644
--- a/packages/loaders/test/partials/test-plugin-storage/verdaccio-plugin/index.js
+++ b/packages/loaders/test/partials/test-plugin-storage/verdaccio-plugin/index.js
@@ -1,13 +1,7 @@
-class ValidVerdaccioPlugin {
-  config;
-  options;
-  constructor(config, options) {
-    console.log('ValidVerdaccioPlugin constructor', config);
-    this.config = config;
-    this.options = options;
-  }
-
-  authenticate() {}
+function ValidVerdaccioPlugin() {
+  return {
+    authenticate: function () {},
+  };
 }
 
-module.exports = (...rest) => new ValidVerdaccioPlugin(...rest);
+module.exports = ValidVerdaccioPlugin;
diff --git a/packages/loaders/test/plugin_loader_async.spec.ts b/packages/loaders/test/plugin_loader_async.spec.ts
index a3e1f7854..af246beff 100644
--- a/packages/loaders/test/plugin_loader_async.spec.ts
+++ b/packages/loaders/test/plugin_loader_async.spec.ts
@@ -5,7 +5,7 @@ import { Config, parseConfigFile } from '@verdaccio/config';
 import { pluginUtils } from '@verdaccio/core';
 import { logger, setup } from '@verdaccio/logger';
 
-import { asyncLoadPlugin } from '../src/index';
+import { asyncLoadPlugin } from '../src/plugin-async-loader';
 
 function getConfig(file: string) {
   const conPath = path.join(__dirname, './partials/config', file);
@@ -71,7 +71,6 @@ describe('plugin loader', () => {
         expect(plugins).toHaveLength(0);
       });
     });
-
     describe('relative path', () => {
       test('should resolve plugin based on relative path', async () => {
         const config = getConfig('relative-plugins.yaml');
@@ -94,7 +93,6 @@ describe('plugin loader', () => {
       });
 
       // config.config_path is not considered for loading plugins due legacy support
-      // @ts-ignore
       test('should fails if config path is missing (only config_path)', async () => {
         const config = getConfig('relative-plugins.yaml');
         // @ts-expect-error
@@ -144,7 +142,6 @@ describe('plugin loader', () => {
         config.auth,
         { config, logger },
         authSanitize,
-        false,
         'customprefix'
       );
 
@@ -175,27 +172,4 @@ describe('plugin loader', () => {
       expect(plugins).toHaveLength(1);
     });
   });
-
-  describe('legacy merge configs', () => {
-    // whenever 6.x and 7.x version are out of support, we can remove this test
-    test('should merge configuration with plugin configuration', async () => {
-      const config = getConfig('relative-plugins.yaml');
-      // force file instead a folder.
-      const plugins = await asyncLoadPlugin(config.auth, { config, logger }, authSanitize, true);
-
-      expect(plugins).toHaveLength(1);
-      const plugin = plugins[0];
-      // just check if the plugin has the main config
-      expect(plugin.config).toHaveProperty('self_path');
-      expect(plugin.config).toHaveProperty('storage');
-      // assume all config props are merged
-      // check if the plugin has the auth config
-      expect(plugin.config).toHaveProperty('auth');
-      expect(plugin.config.auth).toEqual({
-        plugin: {
-          enabled: true,
-        },
-      });
-    });
-  });
 });
diff --git a/packages/middleware/src/middlewares/allow.ts b/packages/middleware/src/middlewares/allow.ts
index 23a4c553f..95714e2d2 100644
--- a/packages/middleware/src/middlewares/allow.ts
+++ b/packages/middleware/src/middlewares/allow.ts
@@ -20,7 +20,7 @@ export function allow<T>(
     return function (req: $RequestExtend, res: $ResponseExtend, next: $NextFunctionVer): void {
       req.pause();
       const packageName = req.params.scope
-        ? `@${req.params.scope}/${req.params.package}`
+        ? `${req.params.scope}/${req.params.package}`
         : req.params.package;
       const packageVersion = req.params.filename
         ? tarballUtils.getVersionFromTarball(req.params.filename)
diff --git a/packages/middleware/test/allow.spec.ts b/packages/middleware/test/allow.spec.ts
index c6bc8cd9f..2f9893aa0 100644
--- a/packages/middleware/test/allow.spec.ts
+++ b/packages/middleware/test/allow.spec.ts
@@ -13,7 +13,6 @@ test('should allow request', async () => {
     },
   });
   const app = getApp([]);
-  // @ts-ignore
   app.get('/:package', can('publish'), (req, res) => {
     res.status(HTTP_STATUS.OK).json({});
   });
@@ -28,8 +27,7 @@ test('should allow scope request', async () => {
     },
   });
   const app = getApp([]);
-  // @ts-ignore
-  app.get('/:package/:scope', can('publish'), (req, res) => {
+  app.get('/:scope/:package', can('publish'), (req, res) => {
     res.status(HTTP_STATUS.OK).json({});
   });
 
@@ -43,7 +41,6 @@ test('should allow filename request', async () => {
     },
   });
   const app = getApp([]);
-  // @ts-ignore
   app.get('/:filename', can('publish'), (req, res) => {
     res.status(HTTP_STATUS.OK).json({});
   });
@@ -58,7 +55,6 @@ test('should not allow request', async () => {
     },
   });
   const app = getApp([]);
-  // @ts-ignore
   app.get('/sec', can('publish'), (req, res) => {
     res.status(HTTP_STATUS.OK).json({});
   });
@@ -73,7 +69,6 @@ test('should handle error request', async () => {
     },
   });
   const app = getApp([]);
-  // @ts-ignore
   app.get('/err', can('publish'));
 
   return request(app).get('/err').expect(HTTP_STATUS.INTERNAL_ERROR);
@@ -82,11 +77,12 @@ test('should handle error request', async () => {
 test('should allow request with version', async () => {
   const can = allow({
     allow_publish: (params, remove, cb) => {
-      return params.packageVersion === '1.0.0' ? cb(null, true) : cb(null, false);
+      return params.packageName === 'pacman' && params.packageVersion === '1.0.0'
+        ? cb(null, true)
+        : cb(new Error('not allowed'), false);
     },
   });
   const app = getApp([]);
-  // @ts-ignore
   app.get('/:package/:version', can('publish'), (req, res) => {
     res.status(HTTP_STATUS.OK).json({});
   });
@@ -94,14 +90,31 @@ test('should allow request with version', async () => {
   return request(app).get('/pacman/1.0.0').expect(HTTP_STATUS.OK);
 });
 
+test('should allow request with scope and version', async () => {
+  const can = allow({
+    allow_publish: (params, remove, cb) => {
+      return params.packageName === '@verdaccio/core'
+        ? cb(null, true)
+        : cb(new Error('not allowed'), false);
+    },
+  });
+  const app = getApp([]);
+  app.get('/:scope/:package', can('publish'), (req, res) => {
+    res.status(HTTP_STATUS.OK).json({});
+  });
+
+  return request(app).get('/@verdaccio/core').expect(HTTP_STATUS.OK);
+});
+
 test('should not allow request with version', async () => {
   const can = allow({
     allow_publish: (params, remove, cb) => {
-      return params.packageVersion === '1.0.0' ? cb(null, true) : cb(null, false);
+      return params.packageName === 'pacman' && params.packageVersion === '2.0.0'
+        ? cb(new Error('not allowed'), false)
+        : cb(null, true);
     },
   });
   const app = getApp([]);
-  // @ts-ignore
   app.get('/:package/:version', can('publish'), (req, res) => {
     res.status(HTTP_STATUS.OK).json({});
   });
diff --git a/packages/search-indexer/package.json b/packages/search-indexer/package.json
index a0abbd0aa..54fe4fc41 100644
--- a/packages/search-indexer/package.json
+++ b/packages/search-indexer/package.json
@@ -38,7 +38,7 @@
     "type-check": "tsc --noEmit -p tsconfig.build.json",
     "build:types": "tsc --emitDeclarationOnly -p tsconfig.build.json",
     "build:js": "babel src/ --out-dir build/ --copy-files --extensions \".ts,.tsx\" --source-maps",
-    "build": "esbuild src/index.ts --bundle --outfile=build/dist.js --platform=node --target=node18  && pnpm run build:types"
+    "build": "esbuild src/index.ts --bundle --outfile=build/dist.js --platform=node --target=node12  && pnpm run build:types"
   },
   "devDependencies": {
     "@verdaccio/types": "workspace:13.0.0-next-8.4",
diff --git a/packages/server/express/src/server.ts b/packages/server/express/src/server.ts
index dba5f20f8..4dc62ab96 100644
--- a/packages/server/express/src/server.ts
+++ b/packages/server/express/src/server.ts
@@ -22,7 +22,7 @@ import {
 import { Storage } from '@verdaccio/store';
 import { ConfigYaml } from '@verdaccio/types';
 import { Config as IConfig } from '@verdaccio/types';
-import webMiddleware, { PLUGIN_UI_PREFIX } from '@verdaccio/web';
+import webMiddleware from '@verdaccio/web';
 
 import { $NextFunctionVer, $RequestExtend, $ResponseExtend } from '../types/custom';
 import hookDebug from './debug';
@@ -73,8 +73,7 @@ const defineAPI = async function (config: IConfig, storage: Storage): Promise<Ex
     function (plugin) {
       return typeof plugin.register_middlewares !== 'undefined';
     },
-    false,
-    config?.serverSettings?.pluginPrefix ?? PLUGIN_UI_PREFIX,
+    config?.serverSettings?.pluginPrefix ?? 'verdaccio',
     PLUGIN_CATEGORY.MIDDLEWARE
   );
 
diff --git a/packages/store/src/local-storage.ts b/packages/store/src/local-storage.ts
index 84bd15da6..c95576783 100644
--- a/packages/store/src/local-storage.ts
+++ b/packages/store/src/local-storage.ts
@@ -80,7 +80,6 @@ class LocalStorage {
       (plugin) => {
         return typeof plugin.getPackageStorage !== 'undefined';
       },
-      false,
       this.config?.serverSettings?.pluginPrefix,
       PLUGIN_CATEGORY.STORAGE
     );
diff --git a/packages/store/src/storage.ts b/packages/store/src/storage.ts
index 6d5de1da6..56586a1c5 100644
--- a/packages/store/src/storage.ts
+++ b/packages/store/src/storage.ts
@@ -686,7 +686,6 @@ class Storage {
         (plugin: pluginUtils.ManifestFilter<Config>) => {
           return typeof plugin.filter_metadata !== 'undefined';
         },
-        false,
         this.config?.serverSettings?.pluginPrefix,
         PLUGIN_CATEGORY.FILTER
       );
@@ -1713,7 +1712,7 @@ class Storage {
       proxy: npmjs
 
     A package requires uplinks syncronization if the proxy section is defined. There can be
-    more than one uplink. The more uplinks are defined, the longer the request will take.
+    more than one uplink. The more uplinks are defined, the longer the request will take. 
     The requests are made in serial and if 1st call fails, the second will be triggered, otherwise
     the 1st will reply and others will be discarded. The order is important.
 
diff --git a/packages/web/src/middleware.ts b/packages/web/src/middleware.ts
index 80c893628..429dd7c52 100644
--- a/packages/web/src/middleware.ts
+++ b/packages/web/src/middleware.ts
@@ -26,7 +26,6 @@ export async function loadTheme(config: any) {
          */
         return plugin.staticPath && plugin.manifest && plugin.manifestFiles;
       },
-      false,
       config?.serverSettings?.pluginPrefix ?? PLUGIN_UI_PREFIX,
       PLUGIN_CATEGORY.THEME
     );
