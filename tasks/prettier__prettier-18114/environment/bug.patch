diff --git a/.github/workflows/dev-test.yml b/.github/workflows/dev-test.yml
index 87118c087..a8237f8aa 100644
--- a/.github/workflows/dev-test.yml
+++ b/.github/workflows/dev-test.yml
@@ -39,6 +39,8 @@ jobs:
             CHECK_TEST_PARSERS: true
           # Versions not tested on linux, normally only even versions
           # If latest version is an odd number, it can be listed below too
+          - os: "ubuntu-latest"
+            node: "25"
           - os: "ubuntu-latest"
             node: "22"
     env:
diff --git a/.github/workflows/prod-test.yml b/.github/workflows/prod-test.yml
index 172591dfa..b325fd4cc 100644
--- a/.github/workflows/prod-test.yml
+++ b/.github/workflows/prod-test.yml
@@ -66,6 +66,8 @@ jobs:
             FULL_TEST: true
           # Versions not tested on linux, normally only even versions
           # If latest version is an odd number, it can be listed below too
+          - os: "ubuntu-latest"
+            node: "25"
           - os: "ubuntu-latest"
             node: "22"
           - os: "ubuntu-latest"
@@ -75,7 +77,7 @@ jobs:
           - os: "ubuntu-latest"
             node: "16"
           # Tests on Intel Mac x Node.js 14 ( https://github.com/prettier/prettier/issues/16248 )
-          - os: "macos-13"
+          - os: "macos-15-intel"
             node: "14"
         # setup-node does not support Node.js 14 x M1 Mac
         exclude:
diff --git a/changelog_unreleased/api/18055.md b/changelog_unreleased/api/18055.md
index e27253e8d..8b7f949c6 100644
--- a/changelog_unreleased/api/18055.md
+++ b/changelog_unreleased/api/18055.md
@@ -1,4 +1,4 @@
-#### Pass ancestors to `plugin.print.canAttachComment()` (#18055 by @fisker)
+#### Pass ancestors to `plugin.printer.canAttachComment()` (#18055 by @fisker)
 
 This prevent attaching comments to a specific child of node.
 
diff --git a/changelog_unreleased/api/18070.md b/changelog_unreleased/api/18070.md
new file mode 100644
index 000000000..8d04ebd39
--- /dev/null
+++ b/changelog_unreleased/api/18070.md
@@ -0,0 +1,5 @@
+#### Add support for `plugin.printer.printPrettierIgnored()` (#18070 by @fisker)
+
+For a node with `prettier-ignore` comment, Prettier prints the text of the node directly. However, this may cause problems, for example, the node needs to be parenthesized or needs to print a leading semicolon to prevent ASI issue in `--no-semi` mode.
+
+Since Prettier main, plugins can add `printPrettierIgnored()` function to the printer to customize the `prettier-ignore`d node print process. This function uses the extract same signature as [`plugin.printer.print()`](https://prettier.io/docs/plugins#print)
diff --git a/changelog_unreleased/css/18114.md b/changelog_unreleased/css/18114.md
deleted file mode 100644
index 8645d2adc..000000000
--- a/changelog_unreleased/css/18114.md
+++ /dev/null
@@ -1,19 +0,0 @@
-#### Remove unexpected space between font size and line height (#18114 by @kovsu)
-
-<!-- prettier-ignore -->
-```css
-/* Input */
-a {
-  font: var(--size)/1;
-}
-
-/* Prettier stable */
-a {
-  font: var(--size) / 1;
-}
-
-/* Prettier main */
-a {
-  font: var(--size)/1;
-}
-```
diff --git a/changelog_unreleased/javascript/17329.md b/changelog_unreleased/javascript/17329.md
new file mode 100644
index 000000000..434d8c569
--- /dev/null
+++ b/changelog_unreleased/javascript/17329.md
@@ -0,0 +1,19 @@
+#### Allow break import attributes into multiple lines (#17329 by @fisker)
+
+<!-- prettier-ignore -->
+```jsx
+// Input
+import syntaxImportAssertions from "@babel/plugin-syntax-import-assertions" with {
+  BABEL_8_BREAKING: "false",
+  USE_ESM: "true", IS_STANDALONE: "false" };
+
+// Prettier stable
+import syntaxImportAssertions from "@babel/plugin-syntax-import-assertions" with { BABEL_8_BREAKING: "false", USE_ESM: "true", IS_STANDALONE: "false" };
+
+// Prettier main
+import syntaxImportAssertions from "@babel/plugin-syntax-import-assertions" with {
+  BABEL_8_BREAKING: "false",
+  USE_ESM: "true",
+  IS_STANDALONE: "false",
+};
+```
diff --git a/changelog_unreleased/javascript/18099.md b/changelog_unreleased/javascript/18099.md
new file mode 100644
index 000000000..7e743e658
--- /dev/null
+++ b/changelog_unreleased/javascript/18099.md
@@ -0,0 +1,18 @@
+#### Fix comments handling for for-statements (#18099 by @fisker, @sosukesuzuki)
+
+<!-- prettier-ignore -->
+```js
+// Input
+for (x of y)
+  // Comment
+  bar();
+
+// Prettier stable
+// Comment
+for (x of y) bar();
+
+// Prettier main
+for (x of y)
+  // Comment
+  bar();
+```
diff --git a/changelog_unreleased/javascript/18108.md b/changelog_unreleased/javascript/18108.md
new file mode 100644
index 000000000..05e03e671
--- /dev/null
+++ b/changelog_unreleased/javascript/18108.md
@@ -0,0 +1,25 @@
+#### Improve comment printing around empty statement (#18108 by @fisker)
+
+<!-- prettier-ignore -->
+```jsx
+// Input
+for (
+  index = 0;
+  doSomething(foo[index]) !== bar && doSomething(foo[index]) !== baz;
+  index ++
+) /* No op */;
+
+// Prettier stable
+for (
+  index = 0;
+  doSomething(foo[index]) !== bar && doSomething(foo[index]) !== baz;
+  index++ /* No op */
+);
+
+// Prettier main
+for (
+  index = 0;
+  doSomething(foo[index]) !== bar && doSomething(foo[index]) !== baz;
+  index++
+) /* No op */ ;
+```
diff --git a/changelog_unreleased/less/17983.md b/changelog_unreleased/less/17983.md
new file mode 100644
index 000000000..1f739ea3b
--- /dev/null
+++ b/changelog_unreleased/less/17983.md
@@ -0,0 +1,31 @@
+#### Keep property/variable accessors tight (#17983 by @kovsu)
+
+<!-- prettier-ignore -->
+```less
+// Input
+.average(@x, @y) {
+  @result: ((@x + @y) / 2);
+}
+
+div {
+  padding: .average(16px, 50px)   [   @result   ];
+}
+
+// Prettier stable
+.average(@x, @y) {
+  @result: ((@x + @y) / 2);
+}
+
+div {
+  padding: .average(16px, 50px) [ @result];
+}
+
+// Prettier main
+.average(@x, @y) {
+  @result: ((@x + @y) / 2);
+}
+
+div {
+  padding: .average(16px, 50px)[@result];
+}
+```
diff --git a/changelog_unreleased/typescript/18109.md b/changelog_unreleased/typescript/18109.md
new file mode 100644
index 000000000..1029f9034
--- /dev/null
+++ b/changelog_unreleased/typescript/18109.md
@@ -0,0 +1,32 @@
+#### Remove unexpected blank line before union types (#18109 by @jspereiramoura, @fisker)
+
+<!-- prettier-ignore -->
+```tsx
+// Input
+type SuperLongTypeNameLoremIpsumLoremIpsumBlaBlaBlaBlaBlaBlaBlaBlaBlaBlaBlaBla =
+  Fooo1000 | Baz2000 | BarLoooooooooooooooooooooooooooooooooooooooooooooooooLong;
+type A = // comment
+  Fooo1000 | Baz2000 | BarLoooooooooooooooooooooooooooooooooooooooooooooooooLong;
+
+// Prettier stable
+type SuperLongTypeNameLoremIpsumLoremIpsumBlaBlaBlaBlaBlaBlaBlaBlaBlaBlaBlaBla =
+
+    | Fooo1000
+    | Baz2000
+    | BarLoooooooooooooooooooooooooooooooooooooooooooooooooLong;
+type A = // comment
+
+    | Fooo1000
+    | Baz2000
+    | BarLoooooooooooooooooooooooooooooooooooooooooooooooooLong;
+
+// Prettier main
+type SuperLongTypeNameLoremIpsumLoremIpsumBlaBlaBlaBlaBlaBlaBlaBlaBlaBlaBlaBla =
+  | Fooo1000
+  | Baz2000
+  | BarLoooooooooooooooooooooooooooooooooooooooooooooooooLong;
+type A =  // comment
+  | Fooo1000
+  | Baz2000
+  | BarLoooooooooooooooooooooooooooooooooooooooooooooooooLong;
+```
diff --git a/docs/plugins.md b/docs/plugins.md
index 8d7718f34..fa5cfbba1 100644
--- a/docs/plugins.md
+++ b/docs/plugins.md
@@ -152,6 +152,8 @@ _(Optional)_ The preprocess function can process the input text before passing i
 function preprocess(text: string, options: object): string | Promise<string>;
 ```
 
+_Support for async preprocess first added in v3.7.0_
+
 ### `printers`
 
 Printers convert ASTs into a Prettier intermediate representation, also known as a Doc.
@@ -170,6 +172,8 @@ export const printers = {
     isBlockComment,
     printComment,
     getCommentChildNodes,
+    hasPrettierIgnore,
+    printPrettierIgnored,
     handleComments: {
       ownLine,
       endOfLine,
@@ -394,6 +398,22 @@ function getCommentChildNodes(
 
 Return `[]` if the node has no children or `undefined` to fall back on the default behavior.
 
+### (optional) `hasPrettierIgnore`
+
+```ts
+function hasPrettierIgnore(path: AstPath): boolean;
+```
+
+Returns whether or not the AST node is `prettier-ignore`d.
+
+### (optional) `printPrettierIgnored`
+
+If the AST node is `prettier-ignore`d, Prettier will slice for the text for parsing without calling `print` function by default, however plugin can also handle the `prettier-ignore`d node print by adding this property.
+
+This property have the same signature as the `print` property.
+
+_First available in v3.7.0_
+
 #### (optional) `printComment`
 
 Called whenever a comment node needs to be printed. It has the signature:
@@ -413,12 +433,6 @@ function printComment(
 function canAttachComment(node: AST, ancestors: T[]): boolean;
 ```
 
-:::note
-
-The second parameter `ancestors` first added in v3.7.0.
-
-:::
-
 This function is used for deciding whether a comment can be attached to a particular AST node. By default, _all_ AST properties are traversed searching for nodes that comments can be attached to. This function is used to prevent comments from being attached to a particular node. A typical implementation looks like
 
 ```js
@@ -432,6 +446,8 @@ function canAttachComment(node, [parent]) {
 }
 ```
 
+_The second parameter `ancestors` first added in v3.7.0._
+
 #### (optional) `isBlockComment`
 
 ```ts
diff --git a/scripts/lint-changelog.js b/scripts/lint-changelog.js
index a558d149e..ea751a6e0 100644
--- a/scripts/lint-changelog.js
+++ b/scripts/lint-changelog.js
@@ -1,8 +1,11 @@
 #!/usr/bin/env node
 
+import assert from "node:assert/strict";
 import fs from "node:fs";
 import indexToPosition from "index-to-position";
 import { outdent } from "outdent";
+import remarkParse from "remark-parse";
+import unified from "unified";
 import { CHANGELOG_CATEGORIES } from "./utils/changelog-categories.js";
 
 const CHANGELOG_DIR = "changelog_unreleased";
@@ -116,6 +119,9 @@ for (const category of CHANGELOG_CATEGORIES) {
       continue;
     }
     const [, title] = titleMatch;
+
+    validateTitle(displayPath, title);
+
     const categoryInTitle = title.split(":").shift().trim();
     if (
       [...CHANGELOG_CATEGORIES, "js"].includes(categoryInTitle.toLowerCase())
@@ -152,3 +158,20 @@ function getCommentDescription(content, comment) {
 
   return `template comment on line ${startLine}-${endLine}`;
 }
+
+// Forbid html in title
+// https://github.com/prettier/prettier/issues/17089
+function validateTitle(displayPath, title) {
+  const processor = unified().use(remarkParse);
+  const tree = processor.runSync(processor.parse(title));
+  assert.equal(tree.children.length, 1);
+  assert.equal(tree.children[0].type, "paragraph");
+  const { children } = tree.children[0];
+  for (const node of children) {
+    if (node.type === "html") {
+      showErrorMessage(
+        `[${displayPath}]: HTML "${node.value}" is restricted in title.`,
+      );
+    }
+  }
+}
diff --git a/src/index.d.ts b/src/index.d.ts
index cd177ff8b..6f8b6a9fe 100644
--- a/src/index.d.ts
+++ b/src/index.d.ts
@@ -491,6 +491,12 @@ export interface Printer<T = any> {
     print: (path: AstPath<T>) => Doc,
     args?: unknown,
   ): Doc;
+  printPrettierIgnored?(
+    path: AstPath<T>,
+    options: ParserOptions<T>,
+    print: (path: AstPath<T>) => Doc,
+    args?: unknown,
+  ): Doc;
   embed?:
     | ((
         path: AstPath,
diff --git a/src/language-css/clean.js b/src/language-css/clean.js
index b54c97c7d..063497b81 100644
--- a/src/language-css/clean.js
+++ b/src/language-css/clean.js
@@ -198,13 +198,15 @@ function clean(original, cloned, parent) {
     }
   }
 
-  // We parse `@var[ foo ]` and `@var[foo]` differently
+  // We parse `@var[ foo ]`, `@var[foo]`, and `var [ @foo ]` differently
   if (
     original.type === "value-comma_group" &&
     original.groups.some(
       (node) =>
-        (node.type === "value-atword" && node.value.endsWith("[")) ||
-        (node.type === "value-word" && node.value.startsWith("]")),
+        (node.type === "value-atword" &&
+          (node.value.endsWith("[") || node.value.endsWith("]"))) ||
+        (node.type === "value-word" &&
+          (node.value.startsWith("]") || node.value.startsWith("["))),
     )
   ) {
     return {
diff --git a/src/language-css/print/comma-separated-value-group.js b/src/language-css/print/comma-separated-value-group.js
index 00237a00d..973380c86 100644
--- a/src/language-css/print/comma-separated-value-group.js
+++ b/src/language-css/print/comma-separated-value-group.js
@@ -191,9 +191,9 @@ function printCommaSeparatedValueGroup(path, options, print) {
       iNode.type === "value-atword" &&
       (iNode.value === "" ||
         /*
-            @var[ @notVarNested ][notVar]
-            ^^^^^
-            */
+        @var[ @notVarNested ][notVar]
+        ^^^^^
+        */
         iNode.value.endsWith("["))
     ) {
       continue;
@@ -212,6 +212,38 @@ function printCommaSeparatedValueGroup(path, options, print) {
       continue;
     }
 
+    // Less property/variable lookup
+    // https://lesscss.org/features/#detached-rulesets-feature-property-variable-accessors
+    if (options.parser === "less") {
+      // `var [@result]`
+      //      ^
+      if (iNextNode?.type === "value-word" && iNextNode.value === "[") {
+        continue;
+      }
+
+      // `var[ @result]`
+      //     ^
+      // `@var [ @@foo ] [ bar ]`
+      //                 ^
+      if (
+        iNode.type === "value-word" &&
+        iNode.value === "[" &&
+        (iNextNode?.type === "value-atword" || iNextNode?.type === "value-word")
+      ) {
+        continue;
+      }
+
+      // `@var [ @@foo ][ bar ]`
+      //               ^^
+      if (
+        iNode.type === "value-word" &&
+        iNode.value === "][" &&
+        iNextNode?.type === "value-word"
+      ) {
+        continue;
+      }
+    }
+
     // Ignore escape `\`
     if (
       iNode.type !== "value-string" &&
@@ -305,6 +337,17 @@ function printCommaSeparatedValueGroup(path, options, print) {
       isColorAdjusterFuncNode(parentParentNode) &&
       !hasEmptyRawBefore(iNextNode);
 
+    const requireSpaceBeforeOperator =
+      iNextNextNode?.type === "value-func" ||
+      (iNextNextNode && isWordNode(iNextNextNode)) ||
+      iNode.type === "value-func" ||
+      isWordNode(iNode);
+    const requireSpaceAfterOperator =
+      iNextNode.type === "value-func" ||
+      isWordNode(iNextNode) ||
+      iPrevNode?.type === "value-func" ||
+      (iPrevNode && isWordNode(iPrevNode));
+
     // Space before unary minus followed by a function call.
     if (
       options.parser === "scss" &&
@@ -317,17 +360,6 @@ function printCommaSeparatedValueGroup(path, options, print) {
       continue;
     }
 
-    const requireSpaceBeforeOperator =
-      iNextNextNode?.type === "value-func" ||
-      (iNextNextNode && isWordNode(iNextNextNode)) ||
-      iNode.type === "value-func" ||
-      isWordNode(iNode);
-    const requireSpaceAfterOperator =
-      iNextNode.type === "value-func" ||
-      isWordNode(iNextNode) ||
-      iPrevNode?.type === "value-func" ||
-      (iPrevNode && isWordNode(iPrevNode));
-
     // Formatting `/`, `+`, `-` sign
     if (
       !(isMultiplicationNode(iNextNode) || isMultiplicationNode(iNode)) &&
@@ -409,28 +441,6 @@ function printCommaSeparatedValueGroup(path, options, print) {
       continue;
     }
 
-    // Formatting `font` property
-    if (
-      declAncestorProp &&
-      (declAncestorProp === "font" || declAncestorProp.startsWith("--"))
-    ) {
-      if (
-        isDivisionNode(iNextNode) &&
-        hasEmptyRawBefore(iNextNode) &&
-        isPossibleFontSize(iNode)
-      ) {
-        continue;
-      }
-
-      if (
-        isDivisionNode(iNode) &&
-        hasEmptyRawBefore(iNode) &&
-        isPossibleFontSize(iPrevNode)
-      ) {
-        continue;
-      }
-    }
-
     // Add `space` before next math operation
     // Note: `grip` property have `/` delimiter and it is not math operation, so
     // `grid` property handles above
@@ -507,24 +517,4 @@ function printCommaSeparatedValueGroup(path, options, print) {
   return group(indent(fill(parts)));
 }
 
-function isPossibleFontSize(node) {
-  if (node?.type === "value-number") {
-    return true;
-  }
-
-  if (node?.type !== "value-func") {
-    return false;
-  }
-
-  const value = node.value.toLowerCase();
-  return (
-    value === "var" ||
-    value === "calc" ||
-    value === "min" ||
-    value === "max" ||
-    value === "clamp" ||
-    value.startsWith("--")
-  );
-}
-
 export default printCommaSeparatedValueGroup;
diff --git a/src/language-css/utils/index.js b/src/language-css/utils/index.js
index b2354bdca..04b7816be 100644
--- a/src/language-css/utils/index.js
+++ b/src/language-css/utils/index.js
@@ -150,7 +150,7 @@ function isMultiplicationNode(node) {
 }
 
 function isDivisionNode(node) {
-  return node?.type === "value-operator" && node.value === "/";
+  return node.type === "value-operator" && node.value === "/";
 }
 
 function isAdditionNode(node) {
@@ -231,7 +231,7 @@ function hasParensAroundNode(node) {
 }
 
 function hasEmptyRawBefore(node) {
-  return node?.raws?.before === "";
+  return node.raws?.before === "";
 }
 
 function isKeyValuePairNode(node) {
diff --git a/src/language-js/clean.js b/src/language-js/clean.js
index 6fc821c41..d49d36539 100644
--- a/src/language-js/clean.js
+++ b/src/language-js/clean.js
@@ -1,5 +1,6 @@
 import {
   isArrayExpression,
+  isMeaningfulEmptyStatement,
   isNumericLiteral,
   isStringLiteral,
 } from "./utils/index.js";
@@ -26,7 +27,7 @@ const removeTemplateElementsValue = (node) => {
   }
 };
 
-function clean(original, cloned) {
+function clean(original, cloned, parent) {
   if (original.type === "Program") {
     delete cloned.sourceType;
   }
@@ -39,7 +40,10 @@ function clean(original, cloned) {
   }
 
   // We remove extra `;` and add them when needed
-  if (original.type === "EmptyStatement") {
+  if (
+    original.type === "EmptyStatement" &&
+    !isMeaningfulEmptyStatement({ node: original, parent })
+  ) {
     return null;
   }
 
diff --git a/src/language-js/comments/handle-comments.js b/src/language-js/comments/handle-comments.js
index 213434f15..c0779edb0 100644
--- a/src/language-js/comments/handle-comments.js
+++ b/src/language-js/comments/handle-comments.js
@@ -840,10 +840,11 @@ function handleOnlyComments({ comment, enclosingNode, ast, isLastComment }) {
   return false;
 }
 
-function handleForComments({ comment, enclosingNode }) {
+function handleForComments({ comment, enclosingNode, followingNode }) {
   if (
-    enclosingNode?.type === "ForInStatement" ||
-    enclosingNode?.type === "ForOfStatement"
+    (enclosingNode?.type === "ForInStatement" ||
+      enclosingNode?.type === "ForOfStatement") &&
+    followingNode !== enclosingNode.body
   ) {
     addLeadingComment(enclosingNode, comment);
     return true;
diff --git a/src/language-js/comments/printer-methods.js b/src/language-js/comments/printer-methods.js
index daf0ab056..a3bc7f412 100644
--- a/src/language-js/comments/printer-methods.js
+++ b/src/language-js/comments/printer-methods.js
@@ -4,6 +4,7 @@ import {
   getFunctionParameters,
   hasNodeIgnoreComment,
   isJsxElement,
+  isMeaningfulEmptyStatement,
   isMethod,
   isUnionType,
 } from "../utils/index.js";
@@ -14,7 +15,6 @@ import {
  */
 
 const isNodeCantAttachComment = createTypeCheckFunction([
-  "EmptyStatement",
   "TemplateElement",
   // There is no similar node in Babel AST
   // ```ts
@@ -84,12 +84,20 @@ const isClassMethodCantAttachComment = (node, [parent]) =>
 @returns {boolean}
 */
 function canAttachComment(node, ancestors) {
-  return !(
+  if (
     isNodeCantAttachComment(node) ||
     isChildWontPrint(node, ancestors) ||
     // @ts-expect-error -- safe
     isClassMethodCantAttachComment(node, ancestors)
-  );
+  ) {
+    return false;
+  }
+
+  if (node.type === "EmptyStatement") {
+    return isMeaningfulEmptyStatement({ node, parent: ancestors[0] });
+  }
+
+  return true;
 }
 
 /**
diff --git a/src/language-js/print/assignment.js b/src/language-js/print/assignment.js
index cbe8428a1..534cd44dd 100644
--- a/src/language-js/print/assignment.js
+++ b/src/language-js/print/assignment.js
@@ -142,6 +142,7 @@ function chooseLayout(path, options, print, leftDoc, rightPropertyName) {
     node.type === "ImportAttribute" ||
     (rightNode.type === "CallExpression" &&
       rightNode.callee.name === "require") ||
+    isUnionType(rightNode) ||
     // do not put values on a separate line from the key in json
     options.parser === "json5" ||
     options.parser === "jsonc" ||
diff --git a/src/language-js/print/estree.js b/src/language-js/print/estree.js
index d8dd34d1b..2ccd0309c 100644
--- a/src/language-js/print/estree.js
+++ b/src/language-js/print/estree.js
@@ -18,6 +18,7 @@ import {
   isArrayExpression,
   isCallExpression,
   isLiteral,
+  isMeaningfulEmptyStatement,
   isMemberExpression,
   isMethod,
   isNextLineEmpty,
@@ -101,8 +102,6 @@ function printEstree(path, options, print, args) {
     // Babel extension.
     case "File":
       return printHtmlBinding(path, options, print) ?? print("program");
-    case "EmptyStatement":
-      return "";
     case "ExpressionStatement":
       return printExpressionStatement(path, options, print);
 
@@ -493,11 +492,11 @@ function printEstree(path, options, print, args) {
         options.semi ? ";" : "",
       ];
     case "LabeledStatement":
-      if (node.body.type === "EmptyStatement") {
-        return [print("label"), ":;"];
-      }
-
-      return [print("label"), ": ", print("body")];
+      return [
+        print("label"),
+        `:${node.body.type === "EmptyStatement" && !hasComment(node.body, CommentCheckFlags.Leading) ? "" : " "}`,
+        print("body"),
+      ];
     case "TryStatement":
       return [
         "try ",
@@ -627,6 +626,11 @@ function printEstree(path, options, print, args) {
     case "VoidPattern":
       return "void";
 
+    case "EmptyStatement":
+      if (isMeaningfulEmptyStatement(path)) {
+        return ";";
+      }
+    // Fall through
     case "InterpreterDirective": // Printed as comment
     default:
       /* c8 ignore next */
diff --git a/src/language-js/print/index.js b/src/language-js/print/index.js
index 1db75c1d1..fb8b097f6 100644
--- a/src/language-js/print/index.js
+++ b/src/language-js/print/index.js
@@ -1,7 +1,7 @@
 import { group, indent, line } from "../../document/builders.js";
 import { inheritLabel } from "../../document/utils.js";
-import printIgnored from "../../main/print-ignored.js";
 import isNonEmptyArray from "../../utils/is-non-empty-array.js";
+import { locEnd, locStart } from "../loc.js";
 import pathNeedsParens from "../needs-parens.js";
 import { createTypeCheckFunction } from "../utils/index.js";
 import isIgnored from "../utils/is-ignored.js";
@@ -19,10 +19,6 @@ import { printTypescript } from "./typescript.js";
  */
 
 function printWithoutParentheses(path, options, print, args) {
-  if (isIgnored(path)) {
-    return printIgnored(path, options);
-  }
-
   for (const printer of [
     printAngular,
     printJsx,
@@ -65,12 +61,15 @@ function print(path, options, print, args) {
     options.__onHtmlBindingRoot?.(path.node, options);
   }
 
-  const doc = printWithoutParentheses(path, options, print, args);
+  const { node } = path;
+
+  const doc = isIgnored(path)
+    ? options.originalText.slice(locStart(node), locEnd(node))
+    : printWithoutParentheses(path, options, print, args);
   if (!doc) {
     return "";
   }
 
-  const { node } = path;
   if (shouldPrintDirectly(node)) {
     return doc;
   }
diff --git a/src/language-js/print/misc.js b/src/language-js/print/misc.js
index bf08be750..e8ad0e422 100644
--- a/src/language-js/print/misc.js
+++ b/src/language-js/print/misc.js
@@ -1,5 +1,10 @@
 import { indent, line } from "../../document/builders.js";
-import { isCallExpression, isMemberExpression } from "../utils/index.js";
+import {
+  CommentCheckFlags,
+  hasComment,
+  isCallExpression,
+  isMemberExpression,
+} from "../utils/index.js";
 import { printTypeAnnotationProperty } from "./type-annotation.js";
 
 /**
@@ -96,7 +101,7 @@ function printBindExpressionCallee(path, options, print) {
 
 function adjustClause(node, clause, forceSpace) {
   if (node.type === "EmptyStatement") {
-    return ";";
+    return hasComment(node, CommentCheckFlags.Leading) ? [" ", clause] : clause;
   }
 
   if (node.type === "BlockStatement" || forceSpace) {
diff --git a/src/language-js/print/module.js b/src/language-js/print/module.js
index a97402537..f78761505 100644
--- a/src/language-js/print/module.js
+++ b/src/language-js/print/module.js
@@ -7,6 +7,7 @@ import {
   line,
   softline,
 } from "../../document/builders.js";
+import { removeLines } from "../../document/utils.js";
 import { printDanglingComments } from "../../main/comments/print.js";
 import isNonEmptyArray from "../../utils/is-non-empty-array.js";
 import UnexpectedNodeError from "../../utils/unexpected-node-error.js";
@@ -23,11 +24,15 @@ import {
 } from "../utils/index.js";
 import { printDecoratorsBeforeExport } from "./decorators.js";
 import { printDeclareToken } from "./misc.js";
+import { printObject } from "./object.js";
 
 /**
  * @import {Doc} from "../../document/builders.js"
  */
 
+/*
+- `ImportDeclaration`
+*/
 function printImportDeclaration(path, options, print) {
   const { node } = path;
   /** @type{Doc[]} */
@@ -49,8 +54,8 @@ const isDefaultExport = (node) =>
 /*
 - `ExportDefaultDeclaration`
 - `ExportNamedDeclaration`
-- `DeclareExportDeclaration`(flow)
 - `ExportAllDeclaration`
+- `DeclareExportDeclaration`(flow)
 - `DeclareExportAllDeclaration`(flow)
 */
 function printExportDeclaration(path, options, print) {
@@ -271,6 +276,34 @@ function getImportAttributesKeyword(node, options) {
   return isNonEmptyArray(node.attributes) ? "with" : undefined;
 }
 
+const isSingleTypeImportAttributes = (node) => {
+  const { attributes } = node;
+
+  if (attributes.length !== 1) {
+    return false;
+  }
+
+  const [attribute] = attributes;
+  const { type, key, value } = attribute;
+  return (
+    type === "ImportAttribute" &&
+    ((key.type === "Identifier" && key.name === "type") ||
+      (isStringLiteral(key) && key.value === "type")) &&
+    isStringLiteral(value) &&
+    !hasComment(attribute) &&
+    !hasComment(key) &&
+    !hasComment(value)
+  );
+};
+
+/*
+- `ImportDeclaration`
+- `ExportDefaultDeclaration`
+- `ExportNamedDeclaration`
+- `ExportAllDeclaration`
+- `DeclareExportDeclaration` (Flow)
+- `DeclareExportAllDeclaration` (Flow)
+*/
 function printImportAttributes(path, options, print) {
   const { node } = path;
 
@@ -283,23 +316,12 @@ function printImportAttributes(path, options, print) {
     return "";
   }
 
-  /** @type{Doc[]} */
-  const parts = [` ${keyword} {`];
-
-  if (isNonEmptyArray(node.attributes)) {
-    if (options.bracketSpacing) {
-      parts.push(" ");
-    }
-
-    parts.push(join(", ", path.map(print, "attributes")));
-
-    if (options.bracketSpacing) {
-      parts.push(" ");
-    }
+  let attributesDoc = printObject(path, options, print);
+  if (isSingleTypeImportAttributes(node)) {
+    attributesDoc = removeLines(attributesDoc);
   }
-  parts.push("}");
 
-  return parts;
+  return [` ${keyword} `, attributesDoc];
 }
 
 function printModuleSpecifier(path, options, print) {
diff --git a/src/language-js/print/object.js b/src/language-js/print/object.js
index eb7c004c6..e0f38641f 100644
--- a/src/language-js/print/object.js
+++ b/src/language-js/print/object.js
@@ -1,3 +1,4 @@
+import * as assert from "#universal/assert";
 import {
   group,
   hardline,
@@ -11,8 +12,10 @@ import hasNewline from "../../utils/has-newline.js";
 import hasNewlineInRange from "../../utils/has-newline-in-range.js";
 import isNonEmptyArray from "../../utils/is-non-empty-array.js";
 import { locEnd, locStart } from "../loc.js";
+import getTextWithoutComments from "../utils/get-text-without-comments.js";
 import {
   CommentCheckFlags,
+  createTypeCheckFunction,
   getComments,
   hasComment,
   isNextLineEmpty,
@@ -26,10 +29,39 @@ import { printTypeAnnotationProperty } from "./type-annotation.js";
 
 /** @import {Doc} from "../../document/builders.js" */
 
+const isPrintingImportAttributes = createTypeCheckFunction([
+  "ImportDeclaration",
+  "ExportDefaultDeclaration",
+  "ExportNamedDeclaration",
+  "ExportAllDeclaration",
+  "DeclareExportDeclaration",
+  "DeclareExportAllDeclaration",
+]);
+
+/*
+- `ObjectExpression`
+- `ObjectPattern`
+- `RecordExpression`
+- `ImportDeclaration`
+- `ExportDefaultDeclaration`
+- `ExportNamedDeclaration`
+- `ExportAllDeclaration`
+- `ObjectTypeAnnotation` (Flow)
+- `EnumBooleanBody` (Flow)
+- `EnumNumberBody` (Flow)
+- `EnumBigIntBody` (Flow)
+- `EnumStringBody` (Flow)
+- `EnumSymbolBody` (Flow)
+- `DeclareExportDeclaration` (Flow)
+- `DeclareExportAllDeclaration` (Flow)
+- `TSInterfaceBody` (TypeScript)
+- `TSTypeLiteral` (TypeScript)
+- `TSEnumDeclaration`(TypeScript)
+*/
 function printObject(path, options, print) {
   const { node } = path;
 
-  const isTypeAnnotation = node.type === "ObjectTypeAnnotation";
+  const isFlowTypeAnnotation = node.type === "ObjectTypeAnnotation";
   const isEnumBody =
     node.type === "TSEnumBody" ||
     node.type === "EnumBooleanBody" ||
@@ -37,15 +69,22 @@ function printObject(path, options, print) {
     node.type === "EnumBigIntBody" ||
     node.type === "EnumStringBody" ||
     node.type === "EnumSymbolBody";
-  const fields = [
-    node.type === "TSTypeLiteral" || isEnumBody
-      ? "members"
-      : node.type === "TSInterfaceBody"
-        ? "body"
-        : "properties",
-  ];
-  if (isTypeAnnotation) {
-    fields.push("indexers", "callProperties", "internalSlots");
+  const isInterfaceBody = node.type === "TSInterfaceBody";
+  const isImportAttributes = isPrintingImportAttributes(node);
+
+  const fields = [];
+  if (node.type === "TSTypeLiteral" || isEnumBody) {
+    fields.push("members");
+  } else if (isInterfaceBody) {
+    fields.push("body");
+  } else if (isImportAttributes) {
+    fields.push("attributes");
+  } else {
+    fields.push("properties");
+
+    if (isFlowTypeAnnotation) {
+      fields.push("indexers", "callProperties", "internalSlots");
+    }
   }
 
   // Unfortunately, things grouped together in the ast can be
@@ -68,13 +107,13 @@ function printObject(path, options, print) {
 
   const { parent, key } = path;
   const isFlowInterfaceLikeBody =
-    isTypeAnnotation &&
+    isFlowTypeAnnotation &&
     key === "body" &&
     (parent.type === "InterfaceDeclaration" ||
       parent.type === "DeclareInterface" ||
       parent.type === "DeclareClass");
   const shouldBreak =
-    node.type === "TSInterfaceBody" ||
+    isInterfaceBody ||
     isEnumBody ||
     isFlowInterfaceLikeBody ||
     (node.type === "ObjectPattern" &&
@@ -95,15 +134,11 @@ function printObject(path, options, print) {
     (node.type !== "ObjectPattern" &&
       options.objectWrap === "preserve" &&
       propsAndLoc.length > 0 &&
-      hasNewlineInRange(
-        options.originalText,
-        locStart(node),
-        propsAndLoc[0].loc,
-      ));
+      hasNewLineAfterLeftBrace(node, propsAndLoc[0], options));
 
   const separator = isFlowInterfaceLikeBody
     ? ";"
-    : node.type === "TSInterfaceBody" || node.type === "TSTypeLiteral"
+    : isInterfaceBody || node.type === "TSTypeLiteral"
       ? options.semi
         ? ";"
         : ifBreak("", ";")
@@ -180,19 +215,20 @@ function printObject(path, options, print) {
       printTypeAnnotationProperty(path, print),
     ]);
   } else {
+    const spacing = options.bracketSpacing ? line : softline;
     content = [
       isFlowInterfaceLikeBody && isNonEmptyArray(node.properties)
         ? printHardlineAfterHeritage(parent)
         : "",
       leftBrace,
-      indent([options.bracketSpacing ? line : softline, ...props]),
+      indent([spacing, ...props]),
       ifBreak(
         canHaveTrailingSeparator &&
           (separator !== "," || shouldPrintComma(options))
           ? separator
           : "",
       ),
-      options.bracketSpacing ? line : softline,
+      spacing,
       rightBrace,
       printOptionalToken(path),
       printTypeAnnotationProperty(path, print),
@@ -244,4 +280,27 @@ function shouldHugTheOnlyParameter(node, name) {
   );
 }
 
+function hasNewLineAfterLeftBrace(node, firstPropertyAndLoc, options) {
+  const text = options.originalText;
+  let leftBraceIndex = locStart(node);
+  const firstPropertyStart = firstPropertyAndLoc.loc;
+
+  if (isPrintingImportAttributes(node)) {
+    const start = locStart(node);
+    const textBeforeAttributes = getTextWithoutComments(
+      options,
+      start,
+      firstPropertyStart,
+    );
+    leftBraceIndex = start + textBeforeAttributes.lastIndexOf("{");
+  }
+
+  /* c8 ignore next 3 */
+  if (process.env.NODE_ENV !== "production") {
+    assert.equal(text.charAt(leftBraceIndex), "{");
+  }
+
+  return hasNewlineInRange(text, leftBraceIndex, firstPropertyStart);
+}
+
 export { printObject };
diff --git a/src/language-js/printer.js b/src/language-js/printer.js
index 117fedb92..489de3a53 100644
--- a/src/language-js/printer.js
+++ b/src/language-js/printer.js
@@ -13,5 +13,9 @@ export {
 } from "./comments/printer-methods.js";
 export { default as embed } from "./embed/index.js";
 export { insertPragma } from "./pragma.js";
-export { default as print } from "./print/index.js";
+export {
+  default as print,
+  default as printPrettierIgnored,
+} from "./print/index.js";
 export { default as getVisitorKeys } from "./traverse/get-visitor-keys.js";
+export { default as hasPrettierIgnore } from "./utils/is-ignored.js";
diff --git a/src/language-js/traverse/visitor-keys.evaluate.js b/src/language-js/traverse/visitor-keys.evaluate.js
index c2e147aa6..08471fb4b 100644
--- a/src/language-js/traverse/visitor-keys.evaluate.js
+++ b/src/language-js/traverse/visitor-keys.evaluate.js
@@ -24,7 +24,6 @@ const additionalVisitorKeys = {
   NeverTypeAnnotation: [],
   SatisfiesExpression: ["expression", "typeAnnotation"],
   TupleTypeAnnotation: ["elementTypes"],
-  TypePredicate: ["asserts"],
   UndefinedTypeAnnotation: [],
   UnknownTypeAnnotation: [],
 };
diff --git a/src/language-js/utils/get-text-without-comments.js b/src/language-js/utils/get-text-without-comments.js
index 936661a56..bbff70c46 100644
--- a/src/language-js/utils/get-text-without-comments.js
+++ b/src/language-js/utils/get-text-without-comments.js
@@ -16,15 +16,17 @@ function getTextWithoutComments(options, start, end) {
       continue;
     }
 
-    const commentLength = commentEnd - commentStart;
+    const startIndex = commentStart - start;
+    const endIndex = commentEnd - start;
+
     text =
-      text.slice(0, commentStart - start) +
-      " ".repeat(commentLength) +
-      text.slice(commentEnd - start);
+      text.slice(0, startIndex) +
+      text.slice(startIndex, endIndex).replaceAll(/[^\n]/gu, " ") +
+      text.slice(endIndex);
   }
 
   if (process.env.NODE_ENV !== "production") {
-    assert.ok(text.length === end - start);
+    assert.equal(text.length, end - start);
   }
 
   return text;
diff --git a/src/language-js/utils/index.js b/src/language-js/utils/index.js
index c6644e2cd..bbd1bc05b 100644
--- a/src/language-js/utils/index.js
+++ b/src/language-js/utils/index.js
@@ -15,9 +15,9 @@ import isNodeMatches from "./is-node-matches.js";
 import isTsKeywordType from "./is-ts-keyword-type.js";
 
 /**
- * @import * as Estree from "../types/estree.js"
- * @import AstPath from "../../common/ast-path.js"
- */
+@import * as Estree from "../types/estree.js"
+@import AstPath from "../../common/ast-path.js"
+*/
 
 /**
  * @param {Estree.Node} node
@@ -1144,4 +1144,5 @@ export {
   shouldPrintComma,
   startsWithNoLookaheadToken,
 };
+export { default as isMeaningfulEmptyStatement } from "./is-meaningful-empty-statement.js";
 export { default as isNodeMatches } from "./is-node-matches.js";
diff --git a/src/language-js/utils/is-meaningful-empty-statement.js b/src/language-js/utils/is-meaningful-empty-statement.js
new file mode 100644
index 000000000..e5d1242a2
--- /dev/null
+++ b/src/language-js/utils/is-meaningful-empty-statement.js
@@ -0,0 +1,26 @@
+/* The argument is a duck type of AstPath, so we can use it in comment attach and ast massage */
+function isMeaningfulEmptyStatement({ node, parent }) {
+  if (node?.type !== "EmptyStatement") {
+    return false;
+  }
+
+  if (parent.type === "IfStatement") {
+    return parent.consequent === node || parent.alternate === node;
+  }
+
+  if (
+    parent.type === "DoWhileStatement" ||
+    parent.type === "ForInStatement" ||
+    parent.type === "ForOfStatement" ||
+    parent.type === "ForStatement" ||
+    parent.type === "LabeledStatement" ||
+    parent.type === "WithStatement" ||
+    parent.type === "WhileStatement"
+  ) {
+    return parent.body === node;
+  }
+
+  return false;
+}
+
+export default isMeaningfulEmptyStatement;
diff --git a/src/main/ast-to-doc.js b/src/main/ast-to-doc.js
index 27fd96d51..98590efeb 100644
--- a/src/main/ast-to-doc.js
+++ b/src/main/ast-to-doc.js
@@ -108,7 +108,7 @@ function callPluginPrintFunction(path, options, printPath, args, embeds) {
 
   // Escape hatch
   if (printer.hasPrettierIgnore?.(path)) {
-    doc = printIgnored(path, options);
+    doc = printIgnored(path, options, printPath, args);
   } else if (embeds.has(node)) {
     doc = embeds.get(node);
   } else {
diff --git a/src/main/print-ignored.js b/src/main/print-ignored.js
index 0af80290d..27d8fcb1d 100644
--- a/src/main/print-ignored.js
+++ b/src/main/print-ignored.js
@@ -1,4 +1,4 @@
-function printIgnored(path, options) {
+function printIgnored(path, options, printPath, args) {
   const {
     originalText,
     [Symbol.for("comments")]: comments,
@@ -17,7 +17,11 @@ function printIgnored(path, options) {
     }
   }
 
-  return originalText.slice(start, end);
+  const { printPrettierIgnored } = options.printer;
+
+  return printPrettierIgnored
+    ? printPrettierIgnored(path, options, printPath, args)
+    : originalText.slice(start, end);
 }
 
 export default printIgnored;
diff --git a/src/utils/ast-utils.js b/src/utils/ast-utils.js
index f204bfe38..7d73e9dfe 100644
--- a/src/utils/ast-utils.js
+++ b/src/utils/ast-utils.js
@@ -1,15 +1,14 @@
 import isObject from "./is-object.js";
 
 /**
- * @typedef {NonNullable<object>} Node
- * @typedef {(unknown) => string[]} GetVisitorKeys
- * @typedef {(unknown) => boolean} Predicate
- */
+@import {GetVisitorKeys, Node} from "../utils/create-get-visitor-keys.js"
+@typedef {(node: Node) => boolean} Predicate
+*/
 
 /**
- * @param {Node} node
- * @param {{getVisitorKeys: GetVisitorKeys, filter?: Predicate}} options
- */
+@param {Node} node
+@param {{getVisitorKeys: GetVisitorKeys, filter?: Predicate}} options
+*/
 function* getChildren(node, options) {
   const { getVisitorKeys, filter = () => true } = options;
   const isMatchedNode = (node) => isObject(node) && filter(node);
@@ -30,9 +29,9 @@ function* getChildren(node, options) {
 }
 
 /**
- * @param {Node} node
- * @param {{getVisitorKeys: GetVisitorKeys, filter?: Predicate}} options
- */
+@param {Node} node
+@param {{getVisitorKeys: GetVisitorKeys, filter?: Predicate}} options
+*/
 function* getDescendants(node, options) {
   const queue = [node];
   for (let index = 0; index < queue.length; index++) {
@@ -46,17 +45,17 @@ function* getDescendants(node, options) {
 }
 
 /**
- * @param {Node} node
- * @param {{getVisitorKeys: GetVisitorKeys}} options
- */
+@param {Node} node
+@param {{getVisitorKeys: GetVisitorKeys}} options
+*/
 function isLeaf(node, options) {
   return getChildren(node, options).next().done;
 }
 
 /**
- * @param {Node} node
- * @param {{getVisitorKeys: GetVisitorKeys, predicate: Predicate}} options
- */
+@param {Node} node
+@param {{getVisitorKeys: GetVisitorKeys, predicate: Predicate}} options
+*/
 function hasDescendant(node, { getVisitorKeys, predicate }) {
   for (const descendant of getDescendants(node, { getVisitorKeys })) {
     if (predicate(descendant)) {
diff --git a/src/utils/create-get-visitor-keys.js b/src/utils/create-get-visitor-keys.js
index de6920a2d..3a4664ecf 100644
--- a/src/utils/create-get-visitor-keys.js
+++ b/src/utils/create-get-visitor-keys.js
@@ -1,8 +1,20 @@
 import toFastProperties from "to-fast-properties";
 
+/**
+@typedef {(node: Node) => VisitorKeys} GetVisitorKeys
+@typedef {NonNullable<object>} Node
+@typedef {readonly string[]} VisitorKeys
+*/
+
+/**
+@param {Record<string, VisitorKeys>} visitorKeys
+@param {string} [typeProperty="type"]
+@returns {GetVisitorKeys}
+*/
 function createGetVisitorKeys(visitorKeys, typeProperty = "type") {
   toFastProperties(visitorKeys);
 
+  /** @type {GetVisitorKeys} */
   function getVisitorKeys(node) {
     const type = node[typeProperty];
 
diff --git a/tests/config/run-format-test.js b/tests/config/run-format-test.js
index 20484fbfb..3aeef86da 100644
--- a/tests/config/run-format-test.js
+++ b/tests/config/run-format-test.js
@@ -27,6 +27,7 @@ const unstableTests = new Map(
     ["js/comments/jsx.js", (options) => options.semi === false],
     "js/comments/return-statement.js",
     "js/comments/tagged-template-literal.js",
+    "js/for/9812-unstable.js",
     "markdown/spec/example-234.md",
     "markdown/spec/example-235.md",
     [
diff --git a/tests/format/css/font/__snapshots__/format.test.js.snap b/tests/format/css/font/__snapshots__/format.test.js.snap
deleted file mode 100644
index 0ca4760b9..000000000
--- a/tests/format/css/font/__snapshots__/format.test.js.snap
+++ /dev/null
@@ -1,81 +0,0 @@
-// Jest Snapshot v1, https://jestjs.io/docs/snapshot-testing
-
-exports[`font.css format 1`] = `
-====================================options=====================================
-parsers: ["css", "scss", "less"]
-printWidth: 80
-                                                                                | printWidth
-=====================================input======================================
-.font {
-  /* No space */
-  font: 1rem/1;
-  --custom-font: 1rem/1;
-  font: var(--size)/2;
-  --custom-font: var(--size)/2;
-  font: calc(var(--size)/2)/2;
-  font: min(1px, 2px)/2;
-  font: max(1px, 2px)/2;
-  font: clamp(1px, 2px, 3px)/2;
-
-  /* Space around */
-  font: 1rem   /   1;
-  --font: 1rem   /   1;
-  font: --custom(1px)   /   2;
-  --font: --custom(1px)   /   2;
-  font: calc(var(--size)   /   2)   /   2;
-  font: min(1px, 2px)   /   2;
-  font: max(1px, 2px)   /   2;
-  font: clamp(1px, 2px, 3px)   /   2;
-  font: --custom(1px)   /   2;
-
-  /* Space before */
-  font: 1rem   /1;
-  --font: 1rem   /1;
-  font: --custom(1px)   /2; /* Bug*/
-  --font: --custom(1px)   /2; /* Bug*/
-
-  /* Space after */
-  font: 1rem/   1; /* Bug*/
-  --font: 1rem/   1; /* Bug*/
-  font: --custom(1px)/   2; /* Bug*/
-  --font: --custom(1px)/   2; /* Bug*/
-}
-
-=====================================output=====================================
-.font {
-  /* No space */
-  font: 1rem/1;
-  --custom-font: 1rem/1;
-  font: var(--size)/2;
-  --custom-font: var(--size)/2;
-  font: calc(var(--size)/2)/2;
-  font: min(1px, 2px)/2;
-  font: max(1px, 2px)/2;
-  font: clamp(1px, 2px, 3px)/2;
-
-  /* Space around */
-  font: 1rem / 1;
-  --font: 1rem / 1;
-  font: --custom(1px) / 2;
-  --font: --custom(1px) / 2;
-  font: calc(var(--size) / 2) / 2;
-  font: min(1px, 2px) / 2;
-  font: max(1px, 2px) / 2;
-  font: clamp(1px, 2px, 3px) / 2;
-  font: --custom(1px) / 2;
-
-  /* Space before */
-  font: 1rem /1;
-  --font: 1rem /1;
-  font: --custom(1px) / 2; /* Bug*/
-  --font: --custom(1px) / 2; /* Bug*/
-
-  /* Space after */
-  font: 1rem/1; /* Bug*/
-  --font: 1rem/1; /* Bug*/
-  font: --custom(1px)/2; /* Bug*/
-  --font: --custom(1px)/2; /* Bug*/
-}
-
-================================================================================
-`;
diff --git a/tests/format/css/font/font.css b/tests/format/css/font/font.css
deleted file mode 100644
index 6ea5b3f45..000000000
--- a/tests/format/css/font/font.css
+++ /dev/null
@@ -1,34 +0,0 @@
-.font {
-  /* No space */
-  font: 1rem/1;
-  --custom-font: 1rem/1;
-  font: var(--size)/2;
-  --custom-font: var(--size)/2;
-  font: calc(var(--size)/2)/2;
-  font: min(1px, 2px)/2;
-  font: max(1px, 2px)/2;
-  font: clamp(1px, 2px, 3px)/2;
-
-  /* Space around */
-  font: 1rem   /   1;
-  --font: 1rem   /   1;
-  font: --custom(1px)   /   2;
-  --font: --custom(1px)   /   2;
-  font: calc(var(--size)   /   2)   /   2;
-  font: min(1px, 2px)   /   2;
-  font: max(1px, 2px)   /   2;
-  font: clamp(1px, 2px, 3px)   /   2;
-  font: --custom(1px)   /   2;
-
-  /* Space before */
-  font: 1rem   /1;
-  --font: 1rem   /1;
-  font: --custom(1px)   /2; /* Bug*/
-  --font: --custom(1px)   /2; /* Bug*/
-
-  /* Space after */
-  font: 1rem/   1; /* Bug*/
-  --font: 1rem/   1; /* Bug*/
-  font: --custom(1px)/   2; /* Bug*/
-  --font: --custom(1px)/   2; /* Bug*/
-}
diff --git a/tests/format/css/font/format.test.js b/tests/format/css/font/format.test.js
deleted file mode 100644
index 19d2938f3..000000000
--- a/tests/format/css/font/format.test.js
+++ /dev/null
@@ -1 +0,0 @@
-runFormatTest(import.meta, ["css", "scss", "less"]);
diff --git a/tests/format/js/arrows/__snapshots__/format.test.js.snap b/tests/format/js/arrows/__snapshots__/format.test.js.snap
index 34891a1aa..5540f9987 100644
--- a/tests/format/js/arrows/__snapshots__/format.test.js.snap
+++ b/tests/format/js/arrows/__snapshots__/format.test.js.snap
@@ -4394,6 +4394,60 @@ const myCurriedFn = arg1 => arg2 => arg3 => arg1 + arg2 + arg3;
 ================================================================================
 `;
 
+exports[`issue-10814.js - {"arrowParens":"always"} format 1`] = `
+====================================options=====================================
+arrowParens: "always"
+parsers: ["babel", "typescript"]
+printWidth: 80
+                                                                                | printWidth
+=====================================input======================================
+const fastifyLoggerOptions = async (
+  fastify,
+  { skip2xxHttpLogging = false },
+  // eslint-disable-next-line require-await
+) => {
+  const middleware = getMiddleware(skip2xxHttpLogging);
+};
+
+=====================================output=====================================
+const fastifyLoggerOptions = async (
+  fastify,
+  { skip2xxHttpLogging = false },
+  // eslint-disable-next-line require-await
+) => {
+  const middleware = getMiddleware(skip2xxHttpLogging);
+};
+
+================================================================================
+`;
+
+exports[`issue-10814.js - {"arrowParens":"avoid"} format 1`] = `
+====================================options=====================================
+arrowParens: "avoid"
+parsers: ["babel", "typescript"]
+printWidth: 80
+                                                                                | printWidth
+=====================================input======================================
+const fastifyLoggerOptions = async (
+  fastify,
+  { skip2xxHttpLogging = false },
+  // eslint-disable-next-line require-await
+) => {
+  const middleware = getMiddleware(skip2xxHttpLogging);
+};
+
+=====================================output=====================================
+const fastifyLoggerOptions = async (
+  fastify,
+  { skip2xxHttpLogging = false },
+  // eslint-disable-next-line require-await
+) => {
+  const middleware = getMiddleware(skip2xxHttpLogging);
+};
+
+================================================================================
+`;
+
 exports[`long-call-no-args.js - {"arrowParens":"always"} format 1`] = `
 ====================================options=====================================
 arrowParens: "always"
diff --git a/tests/format/js/arrows/issue-10814.js b/tests/format/js/arrows/issue-10814.js
new file mode 100644
index 000000000..6c9718f53
--- /dev/null
+++ b/tests/format/js/arrows/issue-10814.js
@@ -0,0 +1,7 @@
+const fastifyLoggerOptions = async (
+  fastify,
+  { skip2xxHttpLogging = false },
+  // eslint-disable-next-line require-await
+) => {
+  const middleware = getMiddleware(skip2xxHttpLogging);
+};
diff --git a/tests/format/js/comments/__snapshots__/format.test.js.snap b/tests/format/js/comments/__snapshots__/format.test.js.snap
index a4835402b..9bc3d111f 100644
--- a/tests/format/js/comments/__snapshots__/format.test.js.snap
+++ b/tests/format/js/comments/__snapshots__/format.test.js.snap
@@ -1703,11 +1703,10 @@ for // comment
 for /* comment */(;;);
 
 =====================================output=====================================
-// comment
-for (;;);
+for (;;) // comment
+;
 
-/* comment */
-for (;;);
+for (;;) /* comment */ ;
 
 ================================================================================
 `;
@@ -1724,11 +1723,10 @@ for // comment
 for /* comment */(;;);
 
 =====================================output=====================================
-// comment
-for (;;);
+for (;;) // comment
+;
 
-/* comment */
-for (;;);
+for (;;) /* comment */ ;
 
 ================================================================================
 `;
diff --git a/tests/format/js/explicit-resource-management/__snapshots__/format.test.js.snap b/tests/format/js/explicit-resource-management/__snapshots__/format.test.js.snap
index 9318ad720..efe996c67 100644
--- a/tests/format/js/explicit-resource-management/__snapshots__/format.test.js.snap
+++ b/tests/format/js/explicit-resource-management/__snapshots__/format.test.js.snap
@@ -34,7 +34,7 @@ printWidth: 80
 /*1*/ for /* 2 */ await /*3*/ ( /*4*/ using /*5*/ fo /*6*/ of /*7*/ of /*8*/) /*9*/;
 
 =====================================output=====================================
-/*1*/ for await (/* 2 */ /*3*/ /*4*/ using /*5*/ fo /*6*/ of /*7*/ of /*8*/ /*9*/);
+/*1*/ for await (/* 2 */ /*3*/ /*4*/ using /*5*/ fo /*6*/ of /*7*/ of /*8*/) /*9*/ ;
 
 ================================================================================
 `;
@@ -649,17 +649,16 @@ async function f() {
   }
   {
     /*0*/ for (
-      /*1*/ /*2*/ await using /*3*/ /*4*/ b /*5*/ =
-          /*6*/ x /*7*/ /*8*/ /*9*/ /*10*/;
+      /*1*/ /*2*/ await using /*3*/ /*4*/ b /*5*/ = /*6*/ x /*7*/ /*8*/ /*9*/;
       ;
 
-    );
+    ) /*10*/ ;
   }
   {
-    /*0*/ for (/*1*/ /*2*/ await using /*3*/ /*4*/ b /*5*/ of /*6*/ x /*7*/ /*8*/);
+    /*0*/ for (/*1*/ /*2*/ await using /*3*/ /*4*/ b /*5*/ of /*6*/ x /*7*/) /*8*/ ;
   }
   {
-    /*0*/ for await (/*1*/ /*2*/ /*3*/ await using /*4*/ /*5*/ b /*6*/ of /*7*/ x /*8*/ /*9*/);
+    /*0*/ for await (/*1*/ /*2*/ /*3*/ await using /*4*/ /*5*/ b /*6*/ of /*7*/ x /*8*/) /*9*/ ;
   }
 }
 
diff --git a/tests/format/js/for/9812-unstable.js b/tests/format/js/for/9812-unstable.js
new file mode 100644
index 000000000..c7ec7608e
--- /dev/null
+++ b/tests/format/js/for/9812-unstable.js
@@ -0,0 +1,11 @@
+for(x of y)
+// comment
+{bar();}
+
+for(x of y)
+// comment
+{}
+
+for(x of y)
+// comment
+;
diff --git a/tests/format/js/for/9812.js b/tests/format/js/for/9812.js
new file mode 100644
index 000000000..fdbd503b2
--- /dev/null
+++ b/tests/format/js/for/9812.js
@@ -0,0 +1,51 @@
+for (const p of ['fullName', 'organ', 'position', 'rank'])
+  // comment
+  form.setValue(`${prefix}.data.${p}`, response[p])
+
+for(x of y)
+  // comment
+  bar();
+
+for(x in y)
+  // comment
+  bar();
+
+for(;;)
+  // comment
+  bar();
+
+for(x of y)
+  // comment1
+  // comment2
+  bar();
+
+for(x in y)
+  // comment1
+  // comment2
+  bar();
+
+for(;;)
+  // comment1
+  // comment2
+  bar();
+
+for(x of y)
+  /* comment */
+  bar();
+
+for(x in y)
+  /* comment */
+  bar();
+
+for(;;)
+  /* comment */
+  bar();
+
+for (
+  a = 1;
+  // this condition is tricky:
+  a === b || a === c;
+  a++
+) {
+  console.log()
+}
diff --git a/tests/format/js/for/__snapshots__/format.test.js.snap b/tests/format/js/for/__snapshots__/format.test.js.snap
index 6e99781b1..30b864e01 100644
--- a/tests/format/js/for/__snapshots__/format.test.js.snap
+++ b/tests/format/js/for/__snapshots__/format.test.js.snap
@@ -1,5 +1,153 @@
 // Jest Snapshot v1, https://jestjs.io/docs/snapshot-testing
 
+exports[`9812.js format 1`] = `
+====================================options=====================================
+parsers: ["babel", "flow", "typescript"]
+printWidth: 80
+                                                                                | printWidth
+=====================================input======================================
+for (const p of ['fullName', 'organ', 'position', 'rank'])
+  // comment
+  form.setValue(\`\${prefix}.data.\${p}\`, response[p])
+
+for(x of y)
+  // comment
+  bar();
+
+for(x in y)
+  // comment
+  bar();
+
+for(;;)
+  // comment
+  bar();
+
+for(x of y)
+  // comment1
+  // comment2
+  bar();
+
+for(x in y)
+  // comment1
+  // comment2
+  bar();
+
+for(;;)
+  // comment1
+  // comment2
+  bar();
+
+for(x of y)
+  /* comment */
+  bar();
+
+for(x in y)
+  /* comment */
+  bar();
+
+for(;;)
+  /* comment */
+  bar();
+
+for (
+  a = 1;
+  // this condition is tricky:
+  a === b || a === c;
+  a++
+) {
+  console.log()
+}
+
+=====================================output=====================================
+for (const p of ["fullName", "organ", "position", "rank"])
+  // comment
+  form.setValue(\`\${prefix}.data.\${p}\`, response[p]);
+
+for (x of y)
+  // comment
+  bar();
+
+for (x in y)
+  // comment
+  bar();
+
+for (;;)
+  // comment
+  bar();
+
+for (x of y)
+  // comment1
+  // comment2
+  bar();
+
+for (x in y)
+  // comment1
+  // comment2
+  bar();
+
+for (;;)
+  // comment1
+  // comment2
+  bar();
+
+for (x of y)
+  /* comment */
+  bar();
+
+for (x in y)
+  /* comment */
+  bar();
+
+for (;;)
+  /* comment */
+  bar();
+
+for (
+  a = 1;
+  // this condition is tricky:
+  a === b || a === c;
+  a++
+) {
+  console.log();
+}
+
+================================================================================
+`;
+
+exports[`9812-unstable.js format 1`] = `
+====================================options=====================================
+parsers: ["babel", "flow", "typescript"]
+printWidth: 80
+                                                                                | printWidth
+=====================================input======================================
+for(x of y)
+// comment
+{bar();}
+
+for(x of y)
+// comment
+{}
+
+for(x of y)
+// comment
+;
+
+=====================================output=====================================
+for (x of y) // comment
+{
+  bar();
+}
+
+for (x of y) // comment
+{
+}
+
+for (x of y) // comment
+;
+
+================================================================================
+`;
+
 exports[`comment.js format 1`] = `
 ====================================options=====================================
 parsers: ["babel", "flow", "typescript"]
diff --git a/tests/format/js/if/__snapshots__/format.test.js.snap b/tests/format/js/if/__snapshots__/format.test.js.snap
index 28495b8a0..39af73281 100644
--- a/tests/format/js/if/__snapshots__/format.test.js.snap
+++ b/tests/format/js/if/__snapshots__/format.test.js.snap
@@ -254,7 +254,7 @@ function a() {
   else return 2;
 
   if (a)
-    if (b /* comment 6f */);
+    if (b); /* comment 6f */
     else return 2;
 }
 
diff --git a/tests/format/js/import-attributes/__snapshots__/format.test.js.snap b/tests/format/js/import-attributes/__snapshots__/format.test.js.snap
index 2b10b8b2b..337c3360a 100644
--- a/tests/format/js/import-attributes/__snapshots__/format.test.js.snap
+++ b/tests/format/js/import-attributes/__snapshots__/format.test.js.snap
@@ -70,18 +70,45 @@ parsers: ["babel", "typescript"]
 printWidth: 80
                                                                                 | printWidth
 =====================================input======================================
-import a10 from "./aaaaaaaaaa.json" with {
+import a11 from "./aaaaaaaaaa.json" with {
 type: "json" };
-import a20 from "./aaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
-import a30 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
-import a40 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
-import a50 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
-import a60 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
-import a70 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with {
+import a12 from "./aaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
+import a13 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
+import a14 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
+import a15 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
+import a16 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
+import a17 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with {
 type: "json" };
-import a80
+import a18
 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
 
+import a21 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with{
+// comment
+type: "json"
+};
+import a22 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with{
+type:
+// comment
+"json"
+};
+import a23 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with{
+type:"json" // comment
+};
+
+
+import a31 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with{
+/* comment */
+type: "json"
+};
+import a32 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with{
+type:
+/* comment */
+"json"
+};
+import a33 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with{
+type:"json" /* comment */
+};
+
 import("./aaaaaaaaaa.json", {with: { type: "json" }})
 import("./aaaaaaaaaaaaaaaaaaaa.json", {with: { type: "json" }})
 import("./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json", {with: { type: "json" }})
@@ -92,14 +119,40 @@ import("./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
 import("./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json", {with: { type: "json" }})
 
 =====================================output=====================================
-import a10 from "./aaaaaaaaaa.json" with { type: "json" };
-import a20 from "./aaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
-import a30 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
-import a40 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
-import a50 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
-import a60 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
-import a70 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
-import a80 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
+import a11 from "./aaaaaaaaaa.json" with { type: "json" };
+import a12 from "./aaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
+import a13 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
+import a14 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
+import a15 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
+import a16 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
+import a17 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
+import a18 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
+
+import a21 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with {
+  // comment
+  type: "json",
+};
+import a22 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with {
+  type:
+    // comment
+    "json",
+};
+import a23 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with {
+  type: "json", // comment
+};
+
+import a31 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with {
+  /* comment */
+  type: "json",
+};
+import a32 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with {
+  type:
+    /* comment */
+    "json",
+};
+import a33 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with {
+  type: "json" /* comment */,
+};
 
 import("./aaaaaaaaaa.json", { with: { type: "json" } });
 import("./aaaaaaaaaaaaaaaaaaaa.json", { with: { type: "json" } });
@@ -163,6 +216,50 @@ import json from "./foo.json" with { type: "json", type: "bar" };
 ================================================================================
 `;
 
+exports[`multiple.js format 1`] = `
+====================================options=====================================
+parsers: ["babel", "typescript"]
+printWidth: 80
+                                                                                | printWidth
+=====================================input======================================
+import syntaxImportAssertions from "@babel/plugin-syntax-import-assertions" with {
+  BABEL_8_BREAKING: "false",
+  USE_ESM: "true", IS_STANDALONE: "false" };
+
+import a1 from "foo" with {
+  BABEL_8_BREAKING: "false",
+  USE_ESM: "true", IS_STANDALONE: "false" };
+import a2 from "foo" with {BABEL_8_BREAKING: "false",
+  USE_ESM: "true", IS_STANDALONE: "false" };
+import a3 from "foo" with {
+  BABEL_8_BREAKING: "false", };
+import a4 from "foo" with { BABEL_8_BREAKING: "false", };
+
+=====================================output=====================================
+import syntaxImportAssertions from "@babel/plugin-syntax-import-assertions" with {
+  BABEL_8_BREAKING: "false",
+  USE_ESM: "true",
+  IS_STANDALONE: "false",
+};
+
+import a1 from "foo" with {
+  BABEL_8_BREAKING: "false",
+  USE_ESM: "true",
+  IS_STANDALONE: "false",
+};
+import a2 from "foo" with {
+  BABEL_8_BREAKING: "false",
+  USE_ESM: "true",
+  IS_STANDALONE: "false",
+};
+import a3 from "foo" with {
+  BABEL_8_BREAKING: "false",
+};
+import a4 from "foo" with { BABEL_8_BREAKING: "false" };
+
+================================================================================
+`;
+
 exports[`non-type.js format 1`] = `
 ====================================options=====================================
 parsers: ["babel", "typescript"]
diff --git a/tests/format/js/import-attributes/long-sources.js b/tests/format/js/import-attributes/long-sources.js
index 042d421cc..19003bf20 100644
--- a/tests/format/js/import-attributes/long-sources.js
+++ b/tests/format/js/import-attributes/long-sources.js
@@ -1,15 +1,42 @@
-import a10 from "./aaaaaaaaaa.json" with {
+import a11 from "./aaaaaaaaaa.json" with {
 type: "json" };
-import a20 from "./aaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
-import a30 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
-import a40 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
-import a50 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
-import a60 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
-import a70 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with {
+import a12 from "./aaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
+import a13 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
+import a14 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
+import a15 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
+import a16 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
+import a17 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with {
 type: "json" };
-import a80
+import a18
 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with { type: "json" };
 
+import a21 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with{
+// comment
+type: "json"
+};
+import a22 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with{
+type:
+// comment
+"json"
+};
+import a23 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with{
+type:"json" // comment
+};
+
+
+import a31 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with{
+/* comment */
+type: "json"
+};
+import a32 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with{
+type:
+/* comment */
+"json"
+};
+import a33 from "./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json" with{
+type:"json" /* comment */
+};
+
 import("./aaaaaaaaaa.json", {with: { type: "json" }})
 import("./aaaaaaaaaaaaaaaaaaaa.json", {with: { type: "json" }})
 import("./aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa.json", {with: { type: "json" }})
diff --git a/tests/format/js/import-attributes/multiple.js b/tests/format/js/import-attributes/multiple.js
new file mode 100644
index 000000000..dd3dff23c
--- /dev/null
+++ b/tests/format/js/import-attributes/multiple.js
@@ -0,0 +1,12 @@
+import syntaxImportAssertions from "@babel/plugin-syntax-import-assertions" with {
+  BABEL_8_BREAKING: "false",
+  USE_ESM: "true", IS_STANDALONE: "false" };
+
+import a1 from "foo" with {
+  BABEL_8_BREAKING: "false",
+  USE_ESM: "true", IS_STANDALONE: "false" };
+import a2 from "foo" with {BABEL_8_BREAKING: "false",
+  USE_ESM: "true", IS_STANDALONE: "false" };
+import a3 from "foo" with {
+  BABEL_8_BREAKING: "false", };
+import a4 from "foo" with { BABEL_8_BREAKING: "false", };
diff --git a/tests/format/js/label/__snapshots__/format.test.js.snap b/tests/format/js/label/__snapshots__/format.test.js.snap
index de94d2e41..dcc55812a 100644
--- a/tests/format/js/label/__snapshots__/format.test.js.snap
+++ b/tests/format/js/label/__snapshots__/format.test.js.snap
@@ -55,9 +55,17 @@ printWidth: 80
 a:;
 b
 
+a: /* comment */;
+a: ;/* comment */
+a /* comment */:;
+
 =====================================output=====================================
 a:;
 b;
 
+a: /* comment */ ;
+a:; /* comment */
+a /* comment */:;
+
 ================================================================================
 `;
diff --git a/tests/format/js/label/empty_label.js b/tests/format/js/label/empty_label.js
index 294408ee3..24020c100 100644
--- a/tests/format/js/label/empty_label.js
+++ b/tests/format/js/label/empty_label.js
@@ -1,2 +1,6 @@
 a:;
 b
+
+a: /* comment */;
+a: ;/* comment */
+a /* comment */:;
diff --git a/tests/format/less/lookup/__snapshots__/format.test.js.snap b/tests/format/less/lookup/__snapshots__/format.test.js.snap
new file mode 100644
index 000000000..930c1b575
--- /dev/null
+++ b/tests/format/less/lookup/__snapshots__/format.test.js.snap
@@ -0,0 +1,129 @@
+// Jest Snapshot v1, https://jestjs.io/docs/snapshot-testing
+
+exports[`lookup.less format 1`] = `
+====================================options=====================================
+parsers: ["less"]
+printWidth: 80
+                                                                                | printWidth
+=====================================input======================================
+.average(@x, @y) {
+  @result: ((@x + @y) / 2);
+}
+
+div {
+  padding: .average(16px, 50px)   [   @result   ];
+}
+
+div {
+  padding: @foo   [   @bar   ];
+}
+
+=====================================output=====================================
+.average(@x, @y) {
+  @result: ((@x + @y) / 2);
+}
+
+div {
+  padding: .average(16px, 50px)[@result];
+}
+
+div {
+  padding: @foo[@bar];
+}
+
+================================================================================
+`;
+
+exports[`lookup-1.less format 1`] = `
+====================================options=====================================
+parsers: ["less"]
+printWidth: 80
+                                                                                | printWidth
+=====================================input======================================
+/* https://lesscss.org/features/#detached-rulesets-feature-property-variable-accessors */
+
+@config: {
+  option1: true;
+  option2: false;
+}
+
+/*
+TODO[prettier]:
+The \`@config   [   option1]\` part should format as \`@config[option1]\`
+**/
+.mixin() when (@config   [   option1] = true) {
+  selected: value;
+}
+
+.box {
+  .mixin();
+}
+
+=====================================output=====================================
+/* https://lesscss.org/features/#detached-rulesets-feature-property-variable-accessors */
+
+@config: {
+  option1: true;
+  option2: false;
+};
+
+/*
+TODO[prettier]:
+The \`@config   [   option1]\` part should format as \`@config[option1]\`
+**/
+.mixin() when (@config   [   option1] = true) {
+  selected: value;
+}
+
+.box {
+  .mixin();
+}
+
+================================================================================
+`;
+
+exports[`lookup-2.less format 1`] = `
+====================================options=====================================
+parsers: ["less"]
+printWidth: 80
+                                                                                | printWidth
+=====================================input======================================
+/* https://lesscss.org/features/#detached-rulesets-feature-property-variable-accessors */
+
+@config: {
+  @dark: {
+    primary: darkblue;
+  }
+  @light: {
+    primary: lightblue;
+  }
+}
+
+.box {
+  @lookup: dark;
+  color: @config[@@lookup][primary];
+  color: @config   [   @@lookup   ][   primary   ];
+  color: @config   [   @@lookup   ]   [   primary   ];
+}
+
+=====================================output=====================================
+/* https://lesscss.org/features/#detached-rulesets-feature-property-variable-accessors */
+
+@config: {
+  @dark: {
+    primary: darkblue;
+  };
+  @light: {
+    primary: lightblue;
+  };
+};
+
+.box {
+  @lookup: dark;
+  color: @config[@@lookup][primary];
+  color: @config[@@lookup][primary];
+  color: @config[@@lookup][primary];
+}
+
+================================================================================
+`;
diff --git a/tests/format/less/lookup/format.test.js b/tests/format/less/lookup/format.test.js
new file mode 100644
index 000000000..82c70eb1b
--- /dev/null
+++ b/tests/format/less/lookup/format.test.js
@@ -0,0 +1 @@
+runFormatTest(import.meta, ["less"]);
diff --git a/tests/format/less/lookup/lookup-1.less b/tests/format/less/lookup/lookup-1.less
new file mode 100644
index 000000000..67a0735b8
--- /dev/null
+++ b/tests/format/less/lookup/lookup-1.less
@@ -0,0 +1,18 @@
+/* https://lesscss.org/features/#detached-rulesets-feature-property-variable-accessors */
+
+@config: {
+  option1: true;
+  option2: false;
+}
+
+/*
+TODO[prettier]:
+The `@config   [   option1]` part should format as `@config[option1]`
+**/
+.mixin() when (@config   [   option1] = true) {
+  selected: value;
+}
+
+.box {
+  .mixin();
+}
diff --git a/tests/format/less/lookup/lookup-2.less b/tests/format/less/lookup/lookup-2.less
new file mode 100644
index 000000000..1f79d05a5
--- /dev/null
+++ b/tests/format/less/lookup/lookup-2.less
@@ -0,0 +1,17 @@
+/* https://lesscss.org/features/#detached-rulesets-feature-property-variable-accessors */
+
+@config: {
+  @dark: {
+    primary: darkblue;
+  }
+  @light: {
+    primary: lightblue;
+  }
+}
+
+.box {
+  @lookup: dark;
+  color: @config[@@lookup][primary];
+  color: @config   [   @@lookup   ][   primary   ];
+  color: @config   [   @@lookup   ]   [   primary   ];
+}
diff --git a/tests/format/less/lookup/lookup.less b/tests/format/less/lookup/lookup.less
new file mode 100644
index 000000000..50335df5b
--- /dev/null
+++ b/tests/format/less/lookup/lookup.less
@@ -0,0 +1,11 @@
+.average(@x, @y) {
+  @result: ((@x + @y) / 2);
+}
+
+div {
+  padding: .average(16px, 50px)   [   @result   ];
+}
+
+div {
+  padding: @foo   [   @bar   ];
+}
diff --git a/tests/format/typescript/union/consistent-with-flow/81-characters.ts b/tests/format/typescript/union/consistent-with-flow/81-characters.ts
new file mode 100644
index 000000000..ae68c1431
--- /dev/null
+++ b/tests/format/typescript/union/consistent-with-flow/81-characters.ts
@@ -0,0 +1,52 @@
+export type ButtonColor =
+  | "primary"
+  | "danger"
+  | "warning"
+  | "muted"
+  | "success";
+export type Button__80 =
+  | "primary"
+  | "danger"
+  | "warning"
+  | "muted"
+  | "success";
+
+export type SupportOptionType =
+  | "int"
+  | "string"
+  | "boolean"
+  | "choice"
+  | "path";
+export type SupportOption_80 =
+  | "int"
+  | "string"
+  | "boolean"
+  | "choice"
+  | "path";
+
+export type RenderContextType =
+    | 'data'
+    | 'header'
+    | 'footer'
+    | 'columnsSelector';
+export type RenderContext_80 =
+    | 'data'
+    | 'header'
+    | 'footer'
+    | 'columnsSelector';
+
+export type PropertyNameNonComputed =
+  | Identifier
+  | NumberLiteral
+  | StringLiteral;
+export type PropertyNameNon_____80 =
+  | Identifier
+  | NumberLiteral
+  | StringLiteral;
+
+type ClassLikeDeclaration =
+  | TSESTree.ClassDeclaration
+  | TSESTree.ClassExpression;
+type ClassLike________80 =
+  | TSESTree.ClassDeclaration
+  | TSESTree.ClassExpression;
diff --git a/tests/format/typescript/union/consistent-with-flow/__snapshots__/format.test.js.snap b/tests/format/typescript/union/consistent-with-flow/__snapshots__/format.test.js.snap
index 343727d11..ce2c2b22e 100644
--- a/tests/format/typescript/union/consistent-with-flow/__snapshots__/format.test.js.snap
+++ b/tests/format/typescript/union/consistent-with-flow/__snapshots__/format.test.js.snap
@@ -1,5 +1,102 @@
 // Jest Snapshot v1, https://jestjs.io/docs/snapshot-testing
 
+exports[`81-characters.ts format 1`] = `
+====================================options=====================================
+parsers: ["typescript", "flow"]
+printWidth: 80
+                                                                                | printWidth
+=====================================input======================================
+export type ButtonColor =
+  | "primary"
+  | "danger"
+  | "warning"
+  | "muted"
+  | "success";
+export type Button__80 =
+  | "primary"
+  | "danger"
+  | "warning"
+  | "muted"
+  | "success";
+
+export type SupportOptionType =
+  | "int"
+  | "string"
+  | "boolean"
+  | "choice"
+  | "path";
+export type SupportOption_80 =
+  | "int"
+  | "string"
+  | "boolean"
+  | "choice"
+  | "path";
+
+export type RenderContextType =
+    | 'data'
+    | 'header'
+    | 'footer'
+    | 'columnsSelector';
+export type RenderContext_80 =
+    | 'data'
+    | 'header'
+    | 'footer'
+    | 'columnsSelector';
+
+export type PropertyNameNonComputed =
+  | Identifier
+  | NumberLiteral
+  | StringLiteral;
+export type PropertyNameNon_____80 =
+  | Identifier
+  | NumberLiteral
+  | StringLiteral;
+
+type ClassLikeDeclaration =
+  | TSESTree.ClassDeclaration
+  | TSESTree.ClassExpression;
+type ClassLike________80 =
+  | TSESTree.ClassDeclaration
+  | TSESTree.ClassExpression;
+
+=====================================output=====================================
+export type ButtonColor =
+  | "primary"
+  | "danger"
+  | "warning"
+  | "muted"
+  | "success";
+export type Button__80 = "primary" | "danger" | "warning" | "muted" | "success";
+
+export type SupportOptionType =
+  | "int"
+  | "string"
+  | "boolean"
+  | "choice"
+  | "path";
+export type SupportOption_80 = "int" | "string" | "boolean" | "choice" | "path";
+
+export type RenderContextType =
+  | "data"
+  | "header"
+  | "footer"
+  | "columnsSelector";
+export type RenderContext_80 = "data" | "header" | "footer" | "columnsSelector";
+
+export type PropertyNameNonComputed =
+  | Identifier
+  | NumberLiteral
+  | StringLiteral;
+export type PropertyNameNon_____80 = Identifier | NumberLiteral | StringLiteral;
+
+type ClassLikeDeclaration =
+  | TSESTree.ClassDeclaration
+  | TSESTree.ClassExpression;
+type ClassLike________80 = TSESTree.ClassDeclaration | TSESTree.ClassExpression;
+
+================================================================================
+`;
+
 exports[`comment.ts format 1`] = `
 ====================================options=====================================
 parsers: ["typescript", "flow"]
@@ -11,9 +108,49 @@ type A1 = /* 4 */ (
   | B
 )[]
 
+type A2 = // dir, exp, arg, modifiers
+  | [string]
+  | [string, ExpressionNode]
+  | [string, ExpressionNode, ExpressionNode]
+  | [string, ExpressionNode, ExpressionNode, ObjectExpression]
+
+type A3 = // dir, exp, arg, modifiers
+  & [string]
+  & [string, ExpressionNode]
+  & [string, ExpressionNode, ExpressionNode]
+  & [string, ExpressionNode, ExpressionNode, ObjectExpression]
+
+type SuperLongTypeNameLoremIpsumLoremIpsumBlaBlaBlaBlaBlaBlaBlaBlaBlaBlaBlaBla =
+  Fooo1000 | Baz2000 | BarLoooooooooooooooooooooooooooooooooooooooooooooooooLong;
+
+type SuperLongTypeNameLoremIpsumLoremIpsumBlaBlaBlaBlaBlaBlaBlaBlaBlaBlaBlaBl2 =
+  Fooo1000 & Baz2000 & BarLoooooooooooooooooooooooooooooooooooooooooooooooooLong;
+
 =====================================output=====================================
 type A1 = /* 4 */ (A | B)[];
 
+type A2 =  // dir, exp, arg, modifiers
+  | [string]
+  | [string, ExpressionNode]
+  | [string, ExpressionNode, ExpressionNode]
+  | [string, ExpressionNode, ExpressionNode, ObjectExpression];
+
+type A3 = // dir, exp, arg, modifiers
+  [string] &
+    [string, ExpressionNode] &
+    [string, ExpressionNode, ExpressionNode] &
+    [string, ExpressionNode, ExpressionNode, ObjectExpression];
+
+type SuperLongTypeNameLoremIpsumLoremIpsumBlaBlaBlaBlaBlaBlaBlaBlaBlaBlaBlaBla =
+  | Fooo1000
+  | Baz2000
+  | BarLoooooooooooooooooooooooooooooooooooooooooooooooooLong;
+
+type SuperLongTypeNameLoremIpsumLoremIpsumBlaBlaBlaBlaBlaBlaBlaBlaBlaBlaBlaBl2 =
+  Fooo1000 &
+    Baz2000 &
+    BarLoooooooooooooooooooooooooooooooooooooooooooooooooLong;
+
 ================================================================================
 `;
 
diff --git a/tests/format/typescript/union/consistent-with-flow/comment.ts b/tests/format/typescript/union/consistent-with-flow/comment.ts
index 72ae39339..a30b43b8a 100644
--- a/tests/format/typescript/union/consistent-with-flow/comment.ts
+++ b/tests/format/typescript/union/consistent-with-flow/comment.ts
@@ -2,3 +2,21 @@ type A1 = /* 4 */ (
   | A
   | B
 )[]
+
+type A2 = // dir, exp, arg, modifiers
+  | [string]
+  | [string, ExpressionNode]
+  | [string, ExpressionNode, ExpressionNode]
+  | [string, ExpressionNode, ExpressionNode, ObjectExpression]
+
+type A3 = // dir, exp, arg, modifiers
+  & [string]
+  & [string, ExpressionNode]
+  & [string, ExpressionNode, ExpressionNode]
+  & [string, ExpressionNode, ExpressionNode, ObjectExpression]
+
+type SuperLongTypeNameLoremIpsumLoremIpsumBlaBlaBlaBlaBlaBlaBlaBlaBlaBlaBlaBla =
+  Fooo1000 | Baz2000 | BarLoooooooooooooooooooooooooooooooooooooooooooooooooLong;
+
+type SuperLongTypeNameLoremIpsumLoremIpsumBlaBlaBlaBlaBlaBlaBlaBlaBlaBlaBlaBl2 =
+  Fooo1000 & Baz2000 & BarLoooooooooooooooooooooooooooooooooooooooooooooooooLong;
diff --git a/tests/unit/__snapshots__/visitor-keys.js.snap b/tests/unit/__snapshots__/visitor-keys.js.snap
index 79e545707..d52addf98 100644
--- a/tests/unit/__snapshots__/visitor-keys.js.snap
+++ b/tests/unit/__snapshots__/visitor-keys.js.snap
@@ -1121,7 +1121,6 @@ exports[`visitor keys estree 1`] = `
     "params",
   ],
   "TypePredicate": [
-    "asserts",
     "parameterName",
     "typeAnnotation",
   ],
diff --git a/website/package.json b/website/package.json
index ad24df76a..0edb03070 100644
--- a/website/package.json
+++ b/website/package.json
@@ -35,7 +35,7 @@
     "@vitejs/plugin-react": "5.0.3",
     "concurrently": "9.2.1",
     "js-yaml": "4.1.0",
-    "vite": "7.1.5"
+    "vite": "7.1.11"
   },
   "browserslist": {
     "production": [
diff --git a/website/yarn.lock b/website/yarn.lock
index 185a99a71..8fc0bdfd2 100644
--- a/website/yarn.lock
+++ b/website/yarn.lock
@@ -12359,7 +12359,7 @@ __metadata:
     react-dom: "npm:18.3.1"
     react-markdown: "npm:10.1.0"
     react-tweet: "npm:3.2.2"
-    vite: "npm:7.1.5"
+    vite: "npm:7.1.11"
   languageName: unknown
   linkType: soft
 
@@ -13687,9 +13687,9 @@ __metadata:
   languageName: node
   linkType: hard
 
-"vite@npm:7.1.5":
-  version: 7.1.5
-  resolution: "vite@npm:7.1.5"
+"vite@npm:7.1.11":
+  version: 7.1.11
+  resolution: "vite@npm:7.1.11"
   dependencies:
     esbuild: "npm:^0.25.0"
     fdir: "npm:^6.5.0"
@@ -13738,7 +13738,7 @@ __metadata:
       optional: true
   bin:
     vite: bin/vite.js
-  checksum: 10/59edeef7e98757a668b2ad8a1731a5657fa83e22a165a36b7359225ea98a9be39b2f486710c0cf5085edb85daee7c8b6b6b0bd85d0ef32a1aa84aef71aabd0f0
+  checksum: 10/b75ce7a38beeba7800751938df4fe2638cfb77509647329ac824332af51831eaed52ab0a0bae1d9162ac41ef59fff1c754e0acf7e1470dfa7d3da51fc3bf0985
   languageName: node
   linkType: hard
 
