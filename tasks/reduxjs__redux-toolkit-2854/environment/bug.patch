diff --git a/packages/rtk-query-codegen-openapi/package.json b/packages/rtk-query-codegen-openapi/package.json
index 321cc5f7..53cc4ccb 100644
--- a/packages/rtk-query-codegen-openapi/package.json
+++ b/packages/rtk-query-codegen-openapi/package.json
@@ -21,7 +21,6 @@
     "prepare": "npm run build && chmod +x ./lib/bin/cli.js",
     "format": "prettier --write \"src/**/*.ts\"",
     "test:update": "lib/bin/cli.js test/fixtures/petstore.json --file test/fixtures/generated.ts -h",
-    "test:update:enum": "lib/bin/cli.js test/config.example.enum.ts",
     "test": "jest --runInBand",
     "cli": "esr src/bin/cli.ts"
   },
@@ -57,12 +56,12 @@
   },
   "dependencies": {
     "@apidevtools/swagger-parser": "^10.0.2",
+    "@rtk-query/oazapfts-patched": "^3.6.0-2",
     "commander": "^6.2.0",
-    "oazapfts": "^4.2.0",
     "prettier": "^2.2.1",
     "semver": "^7.3.5",
     "swagger2openapi": "^7.0.4",
-    "typescript": "^4.9.3"
+    "typescript": ">=4.1 <=4.5"
   },
   "husky": {
     "hooks": {
diff --git a/packages/rtk-query-codegen-openapi/src/bin/cli.ts b/packages/rtk-query-codegen-openapi/src/bin/cli.ts
index ca6a9395..9bce2534 100644
--- a/packages/rtk-query-codegen-openapi/src/bin/cli.ts
+++ b/packages/rtk-query-codegen-openapi/src/bin/cli.ts
@@ -1,9 +1,16 @@
 #!/usr/bin/env node
 
+import program from 'commander';
 import { dirname, resolve } from 'path';
 import { generateEndpoints, parseConfig } from '../';
+import semver from 'semver';
+import { version as tsVersion } from 'typescript';
 
-import program from 'commander';
+if (!semver.satisfies(tsVersion, '>=4.1 <=4.5')) {
+  console.warn(
+    'Please note that `@rtk-query/codegen-openapi` only has been tested with TS versions 4.1 to 4.5 - other versions might cause problems.'
+  );
+}
 
 let ts = false;
 try {
diff --git a/packages/rtk-query-codegen-openapi/src/codegen.ts b/packages/rtk-query-codegen-openapi/src/codegen.ts
index 9ac4bd22..09518f54 100644
--- a/packages/rtk-query-codegen-openapi/src/codegen.ts
+++ b/packages/rtk-query-codegen-openapi/src/codegen.ts
@@ -1,5 +1,5 @@
-import { factory } from './utils/factory';
 import ts from 'typescript';
+import { factory } from './utils/factory';
 
 const defaultEndpointBuilder = factory.createIdentifier('build');
 
@@ -12,6 +12,7 @@ export function generateObjectProperties(obj: ObjectPropertyDefinitions) {
 
 export function generateImportNode(pkg: string, namedImports: Record<string, string>, defaultImportName?: string) {
   return factory.createImportDeclaration(
+    undefined,
     undefined,
     factory.createImportClause(
       false,
@@ -43,7 +44,17 @@ export function generateCreateApiCall({
       endpoints: factory.createArrowFunction(
         undefined,
         undefined,
-        [factory.createParameterDeclaration(undefined, undefined, endpointBuilder, undefined, undefined, undefined)],
+        [
+          factory.createParameterDeclaration(
+            undefined,
+            undefined,
+            undefined,
+            endpointBuilder,
+            undefined,
+            undefined,
+            undefined
+          ),
+        ],
         undefined,
         factory.createToken(ts.SyntaxKind.EqualsGreaterThanToken),
         factory.createParenthesizedExpression(endpointDefinitions)
@@ -56,32 +67,30 @@ export function generateCreateApiCall({
     const enhanceEndpointsObjectLiteralExpression = factory.createObjectLiteralExpression(
       [factory.createShorthandPropertyAssignment(factory.createIdentifier('addTagTypes'), undefined)],
       true
-    );
+    )
     return factory.createVariableStatement(
       undefined,
       factory.createVariableDeclarationList(
-        [
-          factory.createVariableDeclaration(
-            factory.createIdentifier('injectedRtkApi'),
-            undefined,
-            undefined,
-            factory.createCallExpression(
-              factory.createPropertyAccessExpression(
-                factory.createCallExpression(
-                  factory.createPropertyAccessExpression(
-                    factory.createIdentifier('api'),
-                    factory.createIdentifier('enhanceEndpoints')
-                  ),
-                  undefined,
-                  [enhanceEndpointsObjectLiteralExpression]
+        [factory.createVariableDeclaration(
+          factory.createIdentifier("injectedRtkApi"),
+          undefined,
+          undefined,
+          factory.createCallExpression(
+            factory.createPropertyAccessExpression(
+              factory.createCallExpression(
+                factory.createPropertyAccessExpression(
+                  factory.createIdentifier("api"),
+                  factory.createIdentifier("enhanceEndpoints")
                 ),
-                factory.createIdentifier('injectEndpoints')
+                undefined,
+                [enhanceEndpointsObjectLiteralExpression]
               ),
-              undefined,
-              [injectEndpointsObjectLiteralExpression]
-            )
-          ),
-        ],
+              factory.createIdentifier("injectEndpoints")
+            ),
+            undefined,
+            [injectEndpointsObjectLiteralExpression]
+          )
+        )],
         ts.NodeFlags.Const
       )
     );
@@ -136,7 +145,7 @@ export function generateEndpointDefinition({
         factory.createIdentifier(type === 'query' ? 'providesTags' : 'invalidatesTags'),
         factory.createArrayLiteralExpression(tags.map((tag) => factory.createStringLiteral(tag), false))
       )
-    );
+    )
   }
   return factory.createPropertyAssignment(
     factory.createIdentifier(operationName),
@@ -144,8 +153,13 @@ export function generateEndpointDefinition({
     factory.createCallExpression(
       factory.createPropertyAccessExpression(endpointBuilder, factory.createIdentifier(type)),
       [Response, QueryArg],
-      [factory.createObjectLiteralExpression(objectProperties, true)]
-    )
+      [
+        factory.createObjectLiteralExpression(
+          objectProperties,
+          true
+        ),
+      ]
+    ),
   );
 }
 
diff --git a/packages/rtk-query-codegen-openapi/src/generate.ts b/packages/rtk-query-codegen-openapi/src/generate.ts
index 123c0433..b21f3c18 100644
--- a/packages/rtk-query-codegen-openapi/src/generate.ts
+++ b/packages/rtk-query-codegen-openapi/src/generate.ts
@@ -1,27 +1,26 @@
+import ts from 'typescript';
 import * as path from 'path';
-
+import { camelCase } from 'lodash';
 import ApiGenerator, {
   getOperationName as _getOperationName,
   getReferenceName,
   isReference,
   supportDeepObjects,
-} from 'oazapfts/lib/codegen/generate';
-import type { EndpointMatcher, EndpointOverrides, GenerationOptions, OperationDefinition, TextMatcher } from './types';
-import { capitalize, getOperationDefinitions, getV3Doc, removeUndefined, isQuery as testIsQuery } from './utils';
+} from '@rtk-query/oazapfts-patched/lib/codegen/generate';
 import {
-  createPropertyAssignment,
   createQuestionToken,
-  isValidIdentifier,
   keywordType,
-} from 'oazapfts/lib/codegen/tscodegen';
-import { generateCreateApiCall, generateEndpointDefinition, generateImportNode, generateTagTypes } from './codegen';
-
-import type { ObjectPropertyDefinitions } from './codegen';
+  createPropertyAssignment,
+  isValidIdentifier,
+} from '@rtk-query/oazapfts-patched/lib/codegen/tscodegen';
 import type { OpenAPIV3 } from 'openapi-types';
-import { camelCase } from 'lodash';
-import { factory } from './utils/factory';
 import { generateReactHooks } from './generators/react-hooks';
-import ts from 'typescript';
+import type { EndpointMatcher, EndpointOverrides, GenerationOptions, OperationDefinition, TextMatcher } from './types';
+import { capitalize, getOperationDefinitions, getV3Doc, isQuery as testIsQuery, removeUndefined } from './utils';
+import { generateTagTypes } from './codegen';
+import type { ObjectPropertyDefinitions } from './codegen';
+import { generateCreateApiCall, generateEndpointDefinition, generateImportNode } from './codegen';
+import { factory } from './utils/factory';
 
 const generatedApiName = 'injectedRtkApi';
 
@@ -93,14 +92,12 @@ export async function generateApi(
     endpointOverrides,
     unionUndefined,
     flattenArg = false,
-    useEnumType = false,
   }: GenerationOptions
 ) {
   const v3Doc = await getV3Doc(spec);
 
   const apiGen = new ApiGenerator(v3Doc, {
     unionUndefined,
-    useEnumType,
   });
 
   const operationDefinitions = getOperationDefinitions(v3Doc).filter(operationMatches(filterEndpoints));
@@ -134,7 +131,7 @@ export async function generateApi(
   }
   apiFile = apiFile.replace(/\.[jt]sx?$/, '');
 
-  return printer.printNode(
+  const sourceCode = printer.printNode(
     ts.EmitHint.Unspecified,
     factory.createSourceFile(
       [
@@ -153,6 +150,7 @@ export async function generateApi(
           ),
         }),
         factory.createExportDeclaration(
+          undefined,
           undefined,
           false,
           factory.createNamedExports([
@@ -164,8 +162,7 @@ export async function generateApi(
           undefined
         ),
         ...Object.values(interfaces),
-        ...apiGen.aliases,
-        ...apiGen.enumAliases,
+        ...apiGen['aliases'],
         ...(hooks
           ? [
               generateReactHooks({
@@ -183,6 +180,8 @@ export async function generateApi(
     resultFile
   );
 
+  return sourceCode;
+
   function extractAllTagTypes({ operationDefinitions }: { operationDefinitions: OperationDefinition[] }) {
     let allTagTypes = new Set<string>();
 
@@ -243,6 +242,7 @@ export async function generateApi(
     const ResponseTypeName = factory.createTypeReferenceNode(
       registerInterface(
         factory.createTypeAliasDeclaration(
+          undefined,
           [factory.createModifier(ts.SyntaxKind.ExportKeyword)],
           capitalize(operationName + responseSuffix),
           undefined,
@@ -259,7 +259,7 @@ export async function generateApi(
     const allNames = parameters.map((p) => p.name);
     const queryArg: QueryArgDefinitions = {};
     for (const param of parameters) {
-      const isPureSnakeCase = /^[a-zA-Z][\\w]*$/.test(param.name);
+      const isPureSnakeCase = /^[a-zA-Z][a-zA-Z0-9_]*$/.test(param.name);
       const camelCaseName = camelCase(param.name);
 
       const name = isPureSnakeCase && !allNames.includes(camelCaseName) ? camelCaseName : param.name;
@@ -309,6 +309,7 @@ export async function generateApi(
     const QueryArg = factory.createTypeReferenceNode(
       registerInterface(
         factory.createTypeAliasDeclaration(
+          undefined,
           [factory.createModifier(ts.SyntaxKind.ExportKeyword)],
           capitalize(operationName + argSuffix),
           undefined,
@@ -390,7 +391,17 @@ export async function generateApi(
       undefined,
       undefined,
       Object.keys(queryArg).length
-        ? [factory.createParameterDeclaration(undefined, undefined, rootObject, undefined, undefined, undefined)]
+        ? [
+            factory.createParameterDeclaration(
+              undefined,
+              undefined,
+              undefined,
+              rootObject,
+              undefined,
+              undefined,
+              undefined
+            ),
+          ]
         : [],
       undefined,
       factory.createToken(ts.SyntaxKind.EqualsGreaterThanToken),
@@ -450,7 +461,7 @@ function generatePathExpression(
 ) {
   const expressions: Array<[string, string]> = [];
 
-  const head = path.replace(/\{(.*?)}(.*?)(?=\{|$)/g, (_, expression, literal) => {
+  const head = path.replace(/\{(.*?)\}(.*?)(?=\{|$)/g, (_, expression, literal) => {
     const param = pathParameters.find((p) => p.originalName === expression);
     if (!param) {
       throw new Error(`path parameter ${expression} does not seem to be defined in '${path}'!`);
diff --git a/packages/rtk-query-codegen-openapi/src/generators/react-hooks.ts b/packages/rtk-query-codegen-openapi/src/generators/react-hooks.ts
index a4454390..70e59254 100644
--- a/packages/rtk-query-codegen-openapi/src/generators/react-hooks.ts
+++ b/packages/rtk-query-codegen-openapi/src/generators/react-hooks.ts
@@ -1,5 +1,5 @@
 import ts from 'typescript';
-import { getOperationName } from 'oazapfts/lib/codegen/generate';
+import { getOperationName } from '@rtk-query/oazapfts-patched/lib/codegen/generate';
 import { capitalize, isQuery } from '../utils';
 import type { OperationDefinition, EndpointOverrides, ConfigFile } from '../types';
 import { getOverrides } from '../generate';
diff --git a/packages/rtk-query-codegen-openapi/src/index.ts b/packages/rtk-query-codegen-openapi/src/index.ts
index 941943c1..35d719f0 100644
--- a/packages/rtk-query-codegen-openapi/src/index.ts
+++ b/packages/rtk-query-codegen-openapi/src/index.ts
@@ -42,11 +42,11 @@ export function parseConfig(fullConfig: ConfigFile) {
 }
 
 /**
- * Enforces `oazapfts` to use the same TypeScript version as this module itself uses.
+ * Enforces `@rtk-query/oazapfts-patched` to use the same TypeScript version as this module itself uses.
  * That should prevent enums from running out of sync if both libraries use different TS versions.
  */
 function enforceOazapftsTsVersion<T>(cb: () => T): T {
-  const ozTsPath = require.resolve('typescript', { paths: [require.resolve('oazapfts')] });
+  const ozTsPath = require.resolve('typescript', { paths: [require.resolve('@rtk-query/oazapfts-patched')] });
   const tsPath = require.resolve('typescript');
   const originalEntry = require.cache[ozTsPath];
   try {
diff --git a/packages/rtk-query-codegen-openapi/src/types.ts b/packages/rtk-query-codegen-openapi/src/types.ts
index 9e4a44a9..f28f4348 100644
--- a/packages/rtk-query-codegen-openapi/src/types.ts
+++ b/packages/rtk-query-codegen-openapi/src/types.ts
@@ -79,11 +79,6 @@ export interface OutputFileOptions extends Partial<CommonOptions> {
   outputFile: string;
   filterEndpoints?: EndpointMatcher;
   endpointOverrides?: EndpointOverrides[];
-  /**
-   * defaults to false
-   * If passed as true it will generate TS enums instead of union of strings
-   */
-  useEnumType?: boolean;
 }
 
 export interface EndpointOverrides {
diff --git a/packages/rtk-query-codegen-openapi/test/config.example.enum.ts b/packages/rtk-query-codegen-openapi/test/config.example.enum.ts
deleted file mode 100644
index b79ccee3..00000000
--- a/packages/rtk-query-codegen-openapi/test/config.example.enum.ts
+++ /dev/null
@@ -1,10 +0,0 @@
-import type { ConfigFile } from '@rtk-query/codegen-openapi';
-
-const config: ConfigFile = {
-  schemaFile: './fixtures/petstore.yaml',
-  apiFile: './fixtures/emptyApi.ts',
-  outputFile: './tmp/example.ts',
-  useEnumType: true,
-};
-
-export default config;
diff --git a/yarn.lock b/yarn.lock
index ee8dc358..6228fb47 100644
--- a/yarn.lock
+++ b/yarn.lock
@@ -220,7 +220,7 @@ __metadata:
   languageName: node
   linkType: hard
 
-"@apidevtools/swagger-parser@npm:^10.0.2, @apidevtools/swagger-parser@npm:^10.1.0":
+"@apidevtools/swagger-parser@npm:^10.0.1, @apidevtools/swagger-parser@npm:^10.0.2":
   version: 10.1.0
   resolution: "@apidevtools/swagger-parser@npm:10.1.0"
   dependencies:
@@ -6521,6 +6521,7 @@ __metadata:
     "@babel/preset-env": ^7.12.11
     "@babel/preset-typescript": ^7.12.7
     "@reduxjs/toolkit": ^1.6.0
+    "@rtk-query/oazapfts-patched": ^3.6.0-2
     "@types/commander": ^2.12.2
     "@types/glob-to-regexp": ^0.4.0
     "@types/jest": ^27
@@ -6537,7 +6538,6 @@ __metadata:
     husky: ^4.3.6
     jest: ^27
     msw: ^0.40.2
-    oazapfts: ^4.2.0
     openapi-types: ^9.1.0
     prettier: ^2.2.1
     pretty-quick: ^3.1.0
@@ -6545,7 +6545,7 @@ __metadata:
     swagger2openapi: ^7.0.4
     ts-jest: ^27
     ts-node: ^10.4.0
-    typescript: ^4.9.3
+    typescript: ">=4.1 <=4.5"
     yalc: ^1.0.0-pre.47
   bin:
     rtk-query-codegen-openapi: lib/bin/cli.js
@@ -6568,6 +6568,21 @@ __metadata:
   languageName: unknown
   linkType: soft
 
+"@rtk-query/oazapfts-patched@npm:^3.6.0-2":
+  version: 3.6.0-2
+  resolution: "@rtk-query/oazapfts-patched@npm:3.6.0-2"
+  dependencies:
+    "@apidevtools/swagger-parser": ^10.0.1
+    lodash: ^4.17.20
+    minimist: ^1.2.5
+    swagger2openapi: ^7.0.7
+    typescript: ^4.1.2
+  bin:
+    oazapfts: lib/codegen/cli.js
+  checksum: f95227696b6c1e71ebaa87f7848e0af82a1b900b5c7657a8e5b94c07c8b6328894a09b17a0ff5dceb8333aa48800948081d8476d7dcce4d93e0082374f598039
+  languageName: node
+  linkType: hard
+
 "@rushstack/eslint-patch@npm:^1.1.0":
   version: 1.1.3
   resolution: "@rushstack/eslint-patch@npm:1.1.3"
@@ -19450,13 +19465,6 @@ fsevents@^1.2.7:
   languageName: node
   linkType: hard
 
-"minimist@npm:^1.2.7":
-  version: 1.2.8
-  resolution: "minimist@npm:1.2.8"
-  checksum: 75a6d645fb122dad29c06a7597bddea977258957ed88d7a6df59b5cd3fe4a527e253e9bbf2e783e4b73657f9098b96a5fe96ab8a113655d4109108577ecf85b0
-  languageName: node
-  linkType: hard
-
 "minipass-collect@npm:^1.0.2":
   version: 1.0.2
   resolution: "minipass-collect@npm:1.0.2"
@@ -20179,21 +20187,6 @@ fsevents@^1.2.7:
   languageName: node
   linkType: hard
 
-"oazapfts@npm:^4.2.0":
-  version: 4.5.2
-  resolution: "oazapfts@npm:4.5.2"
-  dependencies:
-    "@apidevtools/swagger-parser": ^10.1.0
-    lodash: ^4.17.21
-    minimist: ^1.2.7
-    swagger2openapi: ^7.0.8
-    typescript: ^4.9.3
-  bin:
-    oazapfts: lib/codegen/cli.js
-  checksum: 3abda3fc9b1cf98512254347b6e3c9eea31f0fd7dd663078e7791cd04ec94aff261fa41feceb552f70fae9863f81f537cac0079f697589faa753ba6520b883c4
-  languageName: node
-  linkType: hard
-
 "object-assign@npm:4.1.1, object-assign@npm:^4.1.0, object-assign@npm:^4.1.1":
   version: 4.1.1
   resolution: "object-assign@npm:4.1.1"
@@ -25955,7 +25948,7 @@ fsevents@^1.2.7:
   languageName: node
   linkType: hard
 
-"swagger2openapi@npm:^7.0.4, swagger2openapi@npm:^7.0.8":
+"swagger2openapi@npm:^7.0.4, swagger2openapi@npm:^7.0.7":
   version: 7.0.8
   resolution: "swagger2openapi@npm:7.0.8"
   dependencies:
@@ -26755,7 +26748,7 @@ fsevents@^1.2.7:
   languageName: node
   linkType: hard
 
-"typescript@npm:^4.1.3, typescript@npm:^4.3.4":
+"typescript@npm:>=4.1 <=4.5, typescript@npm:^4.1.2, typescript@npm:^4.1.3, typescript@npm:^4.3.4":
   version: 4.5.2
   resolution: "typescript@npm:4.5.2"
   bin:
@@ -26775,16 +26768,6 @@ fsevents@^1.2.7:
   languageName: node
   linkType: hard
 
-"typescript@npm:^4.9.3":
-  version: 4.9.5
-  resolution: "typescript@npm:4.9.5"
-  bin:
-    tsc: bin/tsc
-    tsserver: bin/tsserver
-  checksum: ee000bc26848147ad423b581bd250075662a354d84f0e06eb76d3b892328d8d4440b7487b5a83e851b12b255f55d71835b008a66cbf8f255a11e4400159237db
-  languageName: node
-  linkType: hard
-
 "typescript@npm:~4.2.4":
   version: 4.2.4
   resolution: "typescript@npm:4.2.4"
@@ -26815,7 +26798,7 @@ fsevents@^1.2.7:
   languageName: node
   linkType: hard
 
-"typescript@patch:typescript@^4.1.3#~builtin<compat/typescript>, typescript@patch:typescript@^4.3.4#~builtin<compat/typescript>":
+"typescript@patch:typescript@>=4.1 <=4.5#~builtin<compat/typescript>, typescript@patch:typescript@^4.1.2#~builtin<compat/typescript>, typescript@patch:typescript@^4.1.3#~builtin<compat/typescript>, typescript@patch:typescript@^4.3.4#~builtin<compat/typescript>":
   version: 4.5.2
   resolution: "typescript@patch:typescript@npm%3A4.5.2#~builtin<compat/typescript>::version=4.5.2&hash=701156"
   bin:
@@ -26835,16 +26818,6 @@ fsevents@^1.2.7:
   languageName: node
   linkType: hard
 
-"typescript@patch:typescript@^4.9.3#~builtin<compat/typescript>":
-  version: 4.9.5
-  resolution: "typescript@patch:typescript@npm%3A4.9.5#~builtin<compat/typescript>::version=4.9.5&hash=701156"
-  bin:
-    tsc: bin/tsc
-    tsserver: bin/tsserver
-  checksum: 2eee5c37cad4390385db5db5a8e81470e42e8f1401b0358d7390095d6f681b410f2c4a0c496c6ff9ebd775423c7785cdace7bcdad76c7bee283df3d9718c0f20
-  languageName: node
-  linkType: hard
-
 "typescript@patch:typescript@~4.2.4#~builtin<compat/typescript>":
   version: 4.2.4
   resolution: "typescript@patch:typescript@npm%3A4.2.4#~builtin<compat/typescript>::version=4.2.4&hash=701156"
