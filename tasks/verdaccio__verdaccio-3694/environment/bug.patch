diff --git a/.changeset/tender-tigers-hammer.md b/.changeset/tender-tigers-hammer.md
deleted file mode 100644
index 784b9e20e..000000000
--- a/.changeset/tender-tigers-hammer.md
+++ /dev/null
@@ -1,7 +0,0 @@
----
-'@verdaccio/auth': minor
-'@verdaccio/core': minor
-'verdaccio-htpasswd': minor
----
-
-feat: async bcrypt hash
diff --git a/packages/auth/test/auth.spec.ts b/packages/auth/test/auth.spec.ts
index ac954e62d..6003657ac 100644
--- a/packages/auth/test/auth.spec.ts
+++ b/packages/auth/test/auth.spec.ts
@@ -8,7 +8,7 @@ import { Config } from '@verdaccio/types';
 import { Auth } from '../src';
 import { authPluginFailureConf, authPluginPassThrougConf, authProfileConf } from './helper/plugin';
 
-setup({ level: 'debug', type: 'stdout' });
+setup({});
 
 describe('AuthTest', () => {
   test('should init correctly', async () => {
@@ -29,18 +29,6 @@ describe('AuthTest', () => {
     expect(auth).toBeDefined();
   });
 
-  test('should load custom algorithm', async () => {
-    const config: Config = new AppConfig({
-      ...authProfileConf,
-      auth: { htpasswd: { algorithm: 'sha1', file: './foo' } },
-    });
-    config.checkSecretKey('12345');
-
-    const auth: Auth = new Auth(config);
-    await auth.init();
-    expect(auth).toBeDefined();
-  });
-
   describe('test authenticate method', () => {
     describe('test authenticate states', () => {
       test('should be a success login', async () => {
diff --git a/packages/core/core/src/constants.ts b/packages/core/core/src/constants.ts
index 47c684e11..781167c17 100644
--- a/packages/core/core/src/constants.ts
+++ b/packages/core/core/src/constants.ts
@@ -109,10 +109,3 @@ export const PACKAGE_ACCESS = {
   SCOPE: '@*/*',
   ALL: '**',
 };
-
-export enum HtpasswdHashAlgorithm {
-  md5 = 'md5',
-  sha1 = 'sha1',
-  crypt = 'crypt',
-  bcrypt = 'bcrypt',
-}
diff --git a/packages/core/core/src/index.ts b/packages/core/core/src/index.ts
index 88a45630e..932d7ff64 100644
--- a/packages/core/core/src/index.ts
+++ b/packages/core/core/src/index.ts
@@ -23,7 +23,6 @@ export {
   DEFAULT_PASSWORD_VALIDATION,
   DEFAULT_USER,
   USERS,
-  HtpasswdHashAlgorithm,
 } from './constants';
 const validationUtils = validatioUtils;
 export {
diff --git a/packages/core/types/src/configuration.ts b/packages/core/types/src/configuration.ts
index a7af0e7ad..e613b9b32 100644
--- a/packages/core/types/src/configuration.ts
+++ b/packages/core/types/src/configuration.ts
@@ -18,6 +18,9 @@ export type LoggerLevel = 'http' | 'fatal' | 'warn' | 'info' | 'debug' | 'trace'
 
 export type LoggerConfigItem = {
   type?: LoggerType;
+  /**
+   * The format
+   */
   format?: LoggerFormat;
   path?: string;
   level?: string;
diff --git a/packages/plugins/htpasswd/src/htpasswd.ts b/packages/plugins/htpasswd/src/htpasswd.ts
index a3c749bc5..fa034e83c 100644
--- a/packages/plugins/htpasswd/src/htpasswd.ts
+++ b/packages/plugins/htpasswd/src/htpasswd.ts
@@ -2,12 +2,12 @@ import buildDebug from 'debug';
 import fs from 'fs';
 import { dirname, resolve } from 'path';
 
-import { constants, pluginUtils } from '@verdaccio/core';
+import { pluginUtils } from '@verdaccio/core';
 import { unlockFile } from '@verdaccio/file-locking';
 import { Callback, Logger } from '@verdaccio/types';
 
 import {
-  DEFAULT_BCRYPT_ROUNDS,
+  HtpasswdHashAlgorithm,
   HtpasswdHashConfig,
   addUserToHTPasswd,
   changePasswordToHTPasswd,
@@ -17,8 +17,6 @@ import {
   verifyPassword,
 } from './utils';
 
-type HtpasswdHashAlgorithm = constants.HtpasswdHashAlgorithm;
-
 const debug = buildDebug('verdaccio:plugin:htpasswd');
 
 export type HTPasswdConfig = {
@@ -29,6 +27,7 @@ export type HTPasswdConfig = {
   slow_verify_ms?: number;
 };
 
+export const DEFAULT_BCRYPT_ROUNDS = 10;
 export const DEFAULT_SLOW_VERIFY_MS = 200;
 
 /**
@@ -64,19 +63,15 @@ export default class HTPasswd
     let algorithm: HtpasswdHashAlgorithm;
     let rounds: number | undefined;
 
-    if (typeof config.algorithm === 'undefined') {
-      algorithm = constants.HtpasswdHashAlgorithm.bcrypt;
-    } else if (constants.HtpasswdHashAlgorithm[config.algorithm] !== undefined) {
-      algorithm = constants.HtpasswdHashAlgorithm[config.algorithm];
+    if (config.algorithm === undefined) {
+      algorithm = HtpasswdHashAlgorithm.bcrypt;
+    } else if (HtpasswdHashAlgorithm[config.algorithm] !== undefined) {
+      algorithm = HtpasswdHashAlgorithm[config.algorithm];
     } else {
-      this.logger.warn(
-        `The algorithm selected %s is invalid, switching to to default one "bcrypt", password validation can be affected`,
-        config.algorithm
-      );
-      algorithm = constants.HtpasswdHashAlgorithm.bcrypt;
+      throw new Error(`Invalid algorithm "${config.algorithm}"`);
     }
     debug(`password hash algorithm: ${algorithm}`);
-    if (algorithm === constants.HtpasswdHashAlgorithm.bcrypt) {
+    if (algorithm === HtpasswdHashAlgorithm.bcrypt) {
       rounds = config.rounds || DEFAULT_BCRYPT_ROUNDS;
     } else if (config.rounds !== undefined) {
       this.logger.warn({ algo: algorithm }, 'Option "rounds" is not valid for "@{algo}" algorithm');
@@ -207,7 +202,7 @@ export default class HTPasswd
       }
 
       try {
-        this._writeFile(await addUserToHTPasswd(body, user, password, this.hashConfig), cb);
+        this._writeFile(addUserToHTPasswd(body, user, password, this.hashConfig), cb);
       } catch (err: any) {
         return cb(err);
       }
diff --git a/packages/plugins/htpasswd/src/utils.ts b/packages/plugins/htpasswd/src/utils.ts
index c9a15df76..87e2e7fd1 100644
--- a/packages/plugins/htpasswd/src/utils.ts
+++ b/packages/plugins/htpasswd/src/utils.ts
@@ -3,15 +3,18 @@ import bcrypt from 'bcryptjs';
 import crypto from 'crypto';
 import createError, { HttpError } from 'http-errors';
 
-import { API_ERROR, HTTP_STATUS, constants } from '@verdaccio/core';
+import { API_ERROR, HTTP_STATUS } from '@verdaccio/core';
 import { readFile } from '@verdaccio/file-locking';
 import { Callback } from '@verdaccio/types';
 
 import crypt3 from './crypt3';
 
-export const DEFAULT_BCRYPT_ROUNDS = 10;
-
-type HtpasswdHashAlgorithm = constants.HtpasswdHashAlgorithm;
+export enum HtpasswdHashAlgorithm {
+  md5 = 'md5',
+  sha1 = 'sha1',
+  crypt = 'crypt',
+  bcrypt = 'bcrypt',
+}
 
 export interface HtpasswdHashConfig {
   algorithm: HtpasswdHashAlgorithm;
@@ -77,24 +80,24 @@ export async function verifyPassword(passwd: string, hash: string): Promise<bool
  * @param {HtpasswdHashConfig} hashConfig
  * @returns {string}
  */
-export async function generateHtpasswdLine(
+export function generateHtpasswdLine(
   user: string,
   passwd: string,
   hashConfig: HtpasswdHashConfig
-): Promise<string> {
+): string {
   let hash: string;
 
   switch (hashConfig.algorithm) {
-    case constants.HtpasswdHashAlgorithm.bcrypt:
-      hash = await bcrypt.hash(passwd, hashConfig.rounds || DEFAULT_BCRYPT_ROUNDS);
+    case HtpasswdHashAlgorithm.bcrypt:
+      hash = bcrypt.hashSync(passwd, hashConfig.rounds);
       break;
-    case constants.HtpasswdHashAlgorithm.crypt:
+    case HtpasswdHashAlgorithm.crypt:
       hash = crypt3(passwd);
       break;
-    case constants.HtpasswdHashAlgorithm.md5:
+    case HtpasswdHashAlgorithm.md5:
       hash = md5(passwd);
       break;
-    case constants.HtpasswdHashAlgorithm.sha1:
+    case HtpasswdHashAlgorithm.sha1:
       hash = '{SHA}' + crypto.createHash('sha1').update(passwd, 'utf8').digest('base64');
       break;
     default:
@@ -113,12 +116,12 @@ export async function generateHtpasswdLine(
  * @param {HtpasswdHashConfig} hashConfig
  * @returns {string}
  */
-export async function addUserToHTPasswd(
+export function addUserToHTPasswd(
   body: string,
   user: string,
   passwd: string,
   hashConfig: HtpasswdHashConfig
-): Promise<string> {
+): string {
   if (user !== encodeURIComponent(user)) {
     const err = createError('username should not contain non-uri-safe characters');
 
@@ -126,7 +129,7 @@ export async function addUserToHTPasswd(
     throw err;
   }
 
-  let newline = await generateHtpasswdLine(user, passwd, hashConfig);
+  let newline = generateHtpasswdLine(user, passwd, hashConfig);
 
   if (body.length && body[body.length - 1] !== '\n') {
     newline = '\n' + newline;
@@ -187,14 +190,13 @@ export async function sanityCheck(
 }
 
 /**
- * /**
  * changePasswordToHTPasswd - change password for existing user
  * @param {string} body
  * @param {string} user
  * @param {string} passwd
  * @param {string} newPasswd
  * @param {HtpasswdHashConfig} hashConfig
- * @returns {Promise<string>}
+ * @returns {string}
  */
 export async function changePasswordToHTPasswd(
   body: string,
@@ -213,7 +215,7 @@ export async function changePasswordToHTPasswd(
   if (!passwordValid) {
     throw new Error(`Unable to change password for user '${user}': invalid old password`);
   }
-  const updatedUserLine = await generateHtpasswdLine(username, newPasswd, hashConfig);
+  const updatedUserLine = generateHtpasswdLine(username, newPasswd, hashConfig);
   lines.splice(userLineIndex, 1, updatedUserLine);
   return lines.join('\n');
 }
diff --git a/packages/plugins/htpasswd/tests/htpasswd.test.ts b/packages/plugins/htpasswd/tests/htpasswd.test.ts
index cc23b7da9..9192a0c20 100644
--- a/packages/plugins/htpasswd/tests/htpasswd.test.ts
+++ b/packages/plugins/htpasswd/tests/htpasswd.test.ts
@@ -1,18 +1,26 @@
+/* eslint-disable jest/no-mocks-import */
+// @ts-ignore: Module has no default export
 import bcrypt from 'bcryptjs';
+// @ts-ignore: Module has no default export
 import crypto from 'crypto';
+// @ts-ignore: Module has no default export
 import fs from 'fs';
 import MockDate from 'mockdate';
 import path from 'path';
 
 import { Config, parseConfigFile } from '@verdaccio/config';
-import { constants, pluginUtils } from '@verdaccio/core';
+import { logger, setup } from '@verdaccio/logger';
+import { PluginOptions } from '@verdaccio/types';
 
 import HTPasswd, { DEFAULT_SLOW_VERIFY_MS, HTPasswdConfig } from '../src/htpasswd';
+import { HtpasswdHashAlgorithm } from '../src/utils';
+
+setup();
 
 const options = {
-  logger: { warn: jest.fn(), info: jest.fn() },
+  logger,
   config: new Config(parseConfigFile(path.join(__dirname, './__fixtures__/config.yaml'))),
-} as any as pluginUtils.PluginOptions<HTPasswdConfig>;
+} as any as PluginOptions<HTPasswdConfig>;
 
 const config = {
   file: './htpasswd',
@@ -26,8 +34,7 @@ describe('HTPasswd', () => {
     wrapper = new HTPasswd(config, options);
     jest.resetModules();
     jest.clearAllMocks();
-
-    // @ts-ignore
+    // @ts-ignore: Module has no default export
     crypto.randomBytes = jest.fn(() => {
       return {
         toString: (): string => '$6',
@@ -36,15 +43,7 @@ describe('HTPasswd', () => {
   });
 
   describe('constructor()', () => {
-    const error = jest.fn();
-    const warn = jest.fn();
-    const info = jest.fn();
-    const emptyPluginOptions = {
-      config: {
-        configPath: '',
-      },
-      logger: { warn, info, error },
-    } as any as pluginUtils.PluginOptions<HTPasswdConfig>;
+    const emptyPluginOptions = { config: {} } as any as PluginOptions<HTPasswdConfig>;
 
     test('should ensure file path configuration exists', () => {
       expect(function () {
@@ -52,14 +51,11 @@ describe('HTPasswd', () => {
       }).toThrow(/should specify "file" in config/);
     });
 
-    test('should switch to bcrypt if incorrect algorithm is set', () => {
-      let invalidConfig = { algorithm: 'invalid', ...config } as HTPasswdConfig;
-      new HTPasswd(invalidConfig, emptyPluginOptions);
-      expect(warn).toHaveBeenCalledWith(
-        'The algorithm selected %s is invalid, switching to to default one "bcrypt", password validation can be affected',
-        'invalid'
-      );
-      expect(info).toHaveBeenCalled();
+    test('should throw error about incorrect algorithm', () => {
+      expect(function () {
+        let invalidConfig = { algorithm: 'invalid', ...config } as HTPasswdConfig;
+        new HTPasswd(invalidConfig, emptyPluginOptions);
+      }).toThrow(/Invalid algorithm "invalid"/);
     });
   });
 
@@ -99,20 +95,21 @@ describe('HTPasswd', () => {
     test('it should warn on slow password verification', (done) => {
       // @ts-ignore
       // eslint-disable-next-line @typescript-eslint/no-unused-vars
-      bcrypt.compare = jest.fn((_passwd, _hash) => {
-        return new Promise((resolve) => setTimeout(resolve, DEFAULT_SLOW_VERIFY_MS + 1)).then(
-          () => true
-        );
+      bcrypt.compare = jest.fn(async (_passwd, _hash) => {
+        await new Promise((resolve) => setTimeout(resolve, DEFAULT_SLOW_VERIFY_MS + 1));
+        return true;
       });
       const callback = (a, b): void => {
         expect(a).toBeNull();
         expect(b).toContain('bcrypt');
-        const mockWarn = options.logger.warn as jest.MockedFn<jest.MockableFunction>;
-        expect(mockWarn.mock.calls.length).toBe(1);
-        const [{ user, durationMs }, message] = mockWarn.mock.calls[0];
-        expect(user).toEqual('bcrypt');
-        expect(durationMs).toBeGreaterThan(DEFAULT_SLOW_VERIFY_MS);
-        expect(message).toEqual('Password for user "@{user}" took @{durationMs}ms to verify');
+        // TODO: figure out how to test the warning properly without mocking the logger
+        // maybe mocking pino? not sure.
+        // const mockWarn = options.logger.warn as jest.MockedFn<jest.MockableFunction>;
+        // expect(mockWarn.mock.calls.length).toBe(1);
+        // const [{ user, durationMs }, message] = mockWarn.mock.calls[0];
+        // expect(user).toEqual('bcrypt');
+        // expect(durationMs).toBeGreaterThan(DEFAULT_SLOW_VERIFY_MS);
+        // expect(message).toEqual('Password for user "@{user}" took @{durationMs}ms to verify');
         done();
       };
       wrapper.authenticate('bcrypt', 'password', callback);
@@ -131,7 +128,7 @@ describe('HTPasswd', () => {
     test('it should add the user', (done) => {
       let dataToWrite;
       // @ts-ignore
-      fs.writeFile = jest.fn((name, data, callback) => {
+      fs.writeFile = jest.fn((_name, data, callback) => {
         dataToWrite = data;
         callback();
       });
@@ -153,7 +150,7 @@ describe('HTPasswd', () => {
         jest.doMock('../src/utils.ts', () => {
           return {
             sanityCheck: (): Error => Error('some error'),
-            HtpasswdHashAlgorithm: constants.HtpasswdHashAlgorithm,
+            HtpasswdHashAlgorithm,
           };
         });
 
@@ -171,7 +168,7 @@ describe('HTPasswd', () => {
           return {
             sanityCheck: (): any => null,
             lockAndRead: (_a, b): any => b(new Error('lock error')),
-            HtpasswdHashAlgorithm: constants.HtpasswdHashAlgorithm,
+            HtpasswdHashAlgorithm,
           };
         });
 
@@ -191,7 +188,7 @@ describe('HTPasswd', () => {
             parseHTPasswd: (): void => {},
             lockAndRead: (_a, b): any => b(null, ''),
             unlockFile: (_a, b): any => b(),
-            HtpasswdHashAlgorithm: constants.HtpasswdHashAlgorithm,
+            HtpasswdHashAlgorithm,
           };
         });
 
@@ -205,11 +202,11 @@ describe('HTPasswd', () => {
       test('writeFile should return an Error', (done) => {
         jest.doMock('../src/utils.ts', () => {
           return {
-            sanityCheck: () => Promise.resolve(null),
+            sanityCheck: (): any => null,
             parseHTPasswd: (): void => {},
             lockAndRead: (_a, b): any => b(null, ''),
             addUserToHTPasswd: (): void => {},
-            HtpasswdHashAlgorithm: constants.HtpasswdHashAlgorithm,
+            HtpasswdHashAlgorithm,
           };
         });
         jest.doMock('fs', () => {
@@ -249,6 +246,9 @@ describe('HTPasswd', () => {
       test('reload should fails on check file', (done) => {
         jest.doMock('fs', () => {
           return {
+            readFile: (_name, callback): void => {
+              callback(new Error('stat error'), null);
+            },
             stat: (_name, callback): void => {
               callback(new Error('stat error'), null);
             },
@@ -268,6 +268,9 @@ describe('HTPasswd', () => {
       test('reload times match', (done) => {
         jest.doMock('fs', () => {
           return {
+            readFile: (_name, callback): void => {
+              callback(new Error('stat error'), null);
+            },
             stat: (_name, callback): void => {
               callback(null, {
                 mtime: null,
diff --git a/packages/plugins/htpasswd/tests/utils.test.ts b/packages/plugins/htpasswd/tests/utils.test.ts
index 8f152c711..5d8b7ae27 100644
--- a/packages/plugins/htpasswd/tests/utils.test.ts
+++ b/packages/plugins/htpasswd/tests/utils.test.ts
@@ -3,10 +3,9 @@ import crypto from 'crypto';
 import { HttpError } from 'http-errors';
 import MockDate from 'mockdate';
 
-import { constants } from '@verdaccio/core';
-
-import { DEFAULT_BCRYPT_ROUNDS } from '../src/utils';
+import { DEFAULT_BCRYPT_ROUNDS } from '../src/htpasswd';
 import {
+  HtpasswdHashAlgorithm,
   addUserToHTPasswd,
   changePasswordToHTPasswd,
   generateHtpasswdLine,
@@ -20,7 +19,7 @@ const mockReadFile = jest.fn();
 const mockUnlockFile = jest.fn();
 
 const defaultHashConfig = {
-  algorithm: constants.HtpasswdHashAlgorithm.bcrypt,
+  algorithm: HtpasswdHashAlgorithm.bcrypt,
   rounds: DEFAULT_BCRYPT_ROUNDS,
 };
 
@@ -112,56 +111,51 @@ describe('generateHtpasswdLine', () => {
 
   const [user, passwd] = ['username', 'password'];
 
-  it('should correctly generate line for md5', async () => {
-    const md5Conf = { algorithm: constants.HtpasswdHashAlgorithm.md5 };
-    expect(await generateHtpasswdLine(user, passwd, md5Conf)).toMatchSnapshot();
+  it('should correctly generate line for md5', () => {
+    const md5Conf = { algorithm: HtpasswdHashAlgorithm.md5 };
+    expect(generateHtpasswdLine(user, passwd, md5Conf)).toMatchSnapshot();
   });
 
-  it('should correctly generate line for sha1', async () => {
-    const sha1Conf = { algorithm: constants.HtpasswdHashAlgorithm.sha1 };
-    expect(await generateHtpasswdLine(user, passwd, sha1Conf)).toMatchSnapshot();
+  it('should correctly generate line for sha1', () => {
+    const sha1Conf = { algorithm: HtpasswdHashAlgorithm.sha1 };
+    expect(generateHtpasswdLine(user, passwd, sha1Conf)).toMatchSnapshot();
   });
 
-  it('should correctly generate line for crypt', async () => {
-    const cryptConf = { algorithm: constants.HtpasswdHashAlgorithm.crypt };
-    expect(await generateHtpasswdLine(user, passwd, cryptConf)).toMatchSnapshot();
+  it('should correctly generate line for crypt', () => {
+    const cryptConf = { algorithm: HtpasswdHashAlgorithm.crypt };
+    expect(generateHtpasswdLine(user, passwd, cryptConf)).toMatchSnapshot();
   });
 
-  it('should correctly generate line for bcrypt', async () => {
+  it('should correctly generate line for bcrypt', () => {
     const bcryptAlgoConfig = {
-      algorithm: constants.HtpasswdHashAlgorithm.bcrypt,
+      algorithm: HtpasswdHashAlgorithm.bcrypt,
       rounds: 2,
     };
-    expect(await generateHtpasswdLine(user, passwd, bcryptAlgoConfig)).toMatchSnapshot();
+    expect(generateHtpasswdLine(user, passwd, bcryptAlgoConfig)).toMatchSnapshot();
   });
 });
 
 describe('addUserToHTPasswd - bcrypt', () => {
   beforeAll(mockTimeAndRandomBytes);
 
-  it('should add new htpasswd to the end', async () => {
+  it('should add new htpasswd to the end', () => {
     const input = ['', 'username', 'password'];
-    expect(
-      await addUserToHTPasswd(input[0], input[1], input[2], defaultHashConfig)
-    ).toMatchSnapshot();
+    expect(addUserToHTPasswd(input[0], input[1], input[2], defaultHashConfig)).toMatchSnapshot();
   });
 
-  it('should add new htpasswd to the end in multiline input', async () => {
+  it('should add new htpasswd to the end in multiline input', () => {
     const body = `test1:$6b9MlB3WUELU:autocreated 2017-11-06T18:17:21.957Z
     test2:$6FrCaT/v0dwE:autocreated 2017-12-14T13:30:20.838Z`;
     const input = [body, 'username', 'password'];
-    expect(
-      await addUserToHTPasswd(input[0], input[1], input[2], defaultHashConfig)
-    ).toMatchSnapshot();
+    expect(addUserToHTPasswd(input[0], input[1], input[2], defaultHashConfig)).toMatchSnapshot();
   });
 
-  it('should throw an error for incorrect username with space', async () => {
+  it('should throw an error for incorrect username with space', () => {
     const [a, b, c] = ['', 'firstname lastname', 'password'];
-    await expect(
-      addUserToHTPasswd(a, b, c, defaultHashConfig)
-    ).rejects.toThrowErrorMatchingSnapshot();
+    expect(() => addUserToHTPasswd(a, b, c, defaultHashConfig)).toThrowErrorMatchingSnapshot();
   });
 });
+
 describe('lockAndRead', () => {
   it('should call the readFile method', () => {
     const cb = (): void => {};
