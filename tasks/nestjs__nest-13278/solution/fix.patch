diff --git a/Readme.md b/Readme.md
index 4cac0d5ea..2d4fc75db 100644
--- a/Readme.md
+++ b/Readme.md
@@ -94,7 +94,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
 <td><a href="https://www.mercedes-benz.com/" target="_blank"><img src="https://nestjs.com/img/logos/mercedes-logo.png" width="100" valign="middle" /></a></td>
 <td><a href="https://www.dinii.jp/" target="_blank"><img src="https://nestjs.com/img/logos/dinii-logo.png" width="65" valign="middle" /></a></td>
 <td><a href="https://bloodycase.com/?promocode=NEST" target="_blank"><img src="https://nestjs.com/img/logos/bloodycase-logo.png" width="65" valign="middle" /></a></td>
-<td><a href="https://handsontable.com/docs/react-data-grid/?utm_source=NestJS_GH&utm_medium=sponsorship&utm_campaign=library_sponsorship_2024" target="_blank"><img src="https://nestjs.com/img/logos/handsontable-dark-logo.svg#2" width="150" valign="middle" /></a></td>
+<td><a href="https://handsontable.com/docs/react-data-grid/?utm_source=NestJS_GH&utm_medium=sponsorship&utm_campaign=library_sponsorship_2024" target="_blank"><img src="https://nestjs.com/img/logos/handsontable-logo.svg" width="150" valign="middle" /></a></td>
 <td align="center" valign="middle"><a href="https://www.itflashcards.com/" target="_blank"><img src="https://nestjs.com/img/logos/it_flashcards-logo.png" width="170" valign="middle" /></a></td>
 <td align="center" valign="middle"><a href="https://arcjet.com/?ref=nestjs" target="_blank"><img src="https://nestjs.com/img/logos/arcjet-logo.svg" width="170" valign="middle" /></a></td>
 </tr>
diff --git a/lerna.json b/lerna.json
index 8684e23cd..08b7f09fb 100644
--- a/lerna.json
+++ b/lerna.json
@@ -3,5 +3,5 @@
   "packages": [
     "packages/*"
   ],
-  "version": "10.4.7"
+  "version": "10.4.6"
 }
diff --git a/packages/common/decorators/core/inject.decorator.ts b/packages/common/decorators/core/inject.decorator.ts
index c632f423f..d06593dbe 100644
--- a/packages/common/decorators/core/inject.decorator.ts
+++ b/packages/common/decorators/core/inject.decorator.ts
@@ -3,7 +3,6 @@ import {
   PROPERTY_DEPS_METADATA,
   SELF_DECLARED_DEPS_METADATA,
 } from '../../constants';
-import { ForwardReference, InjectionToken } from '../../interfaces';
 import { isUndefined } from '../../utils/shared.utils';
 
 /**
@@ -35,8 +34,8 @@ import { isUndefined } from '../../utils/shared.utils';
  *
  * @publicApi
  */
-export function Inject(
-  token?: InjectionToken | ForwardReference,
+export function Inject<T = any>(
+  token?: T,
 ): PropertyDecorator & ParameterDecorator {
   const injectCallHasArguments = arguments.length > 0;
 
diff --git a/packages/common/decorators/http/create-route-param-metadata.decorator.ts b/packages/common/decorators/http/create-route-param-metadata.decorator.ts
index 245998d74..a2cc6c021 100644
--- a/packages/common/decorators/http/create-route-param-metadata.decorator.ts
+++ b/packages/common/decorators/http/create-route-param-metadata.decorator.ts
@@ -16,8 +16,12 @@ export type ParamDecoratorEnhancer = ParameterDecorator;
  *
  * @publicApi
  */
-export function createParamDecorator<FactoryData = any, FactoryOutput = any>(
-  factory: CustomParamFactory<FactoryData, FactoryOutput>,
+export function createParamDecorator<
+  FactoryData = any,
+  FactoryInput = any,
+  FactoryOutput = any,
+>(
+  factory: CustomParamFactory<FactoryData, FactoryInput, FactoryOutput>,
   enhancers: ParamDecoratorEnhancer[] = [],
 ): (
   ...dataOrPipes: (Type<PipeTransform> | PipeTransform | FactoryData)[]
diff --git a/packages/common/decorators/http/request-mapping.decorator.ts b/packages/common/decorators/http/request-mapping.decorator.ts
index 2b3506efc..e707883cf 100644
--- a/packages/common/decorators/http/request-mapping.decorator.ts
+++ b/packages/common/decorators/http/request-mapping.decorator.ts
@@ -118,3 +118,66 @@ export const All = createMappingDecorator(RequestMethod.ALL);
  * @publicApi
  */
 export const Search = createMappingDecorator(RequestMethod.SEARCH);
+
+/**
+ * Route handler (method) Decorator. Routes Webdav PROPFIND requests to the specified path.
+ *
+ * @see [Routing](https://docs.nestjs.com/controllers#routing)
+ *
+ * @publicApi
+ */
+export const Propfind = createMappingDecorator(RequestMethod.PROPFIND);
+
+/**
+ * Route handler (method) Decorator. Routes Webdav PROPPATCH requests to the specified path.
+ *
+ * @see [Routing](https://docs.nestjs.com/controllers#routing)
+ *
+ * @publicApi
+ */
+export const Proppatch = createMappingDecorator(RequestMethod.PROPPATCH);
+
+/**
+ * Route handler (method) Decorator. Routes Webdav MKCOL requests to the specified path.
+ *
+ * @see [Routing](https://docs.nestjs.com/controllers#routing)
+ *
+ * @publicApi
+ */
+export const Mkcol = createMappingDecorator(RequestMethod.MKCOL);
+
+/**
+ * Route handler (method) Decorator. Routes Webdav COPY requests to the specified path.
+ *
+ * @see [Routing](https://docs.nestjs.com/controllers#routing)
+ *
+ * @publicApi
+ */
+export const Copy = createMappingDecorator(RequestMethod.COPY);
+
+/**
+ * Route handler (method) Decorator. Routes Webdav MOVE requests to the specified path.
+ *
+ * @see [Routing](https://docs.nestjs.com/controllers#routing)
+ *
+ * @publicApi
+ */
+export const Move = createMappingDecorator(RequestMethod.MOVE);
+
+/**
+ * Route handler (method) Decorator. Routes Webdav LOCK requests to the specified path.
+ *
+ * @see [Routing](https://docs.nestjs.com/controllers#routing)
+ *
+ * @publicApi
+ */
+export const Lock = createMappingDecorator(RequestMethod.LOCK);
+
+/**
+ * Route handler (method) Decorator. Routes Webdav UNLOCK requests to the specified path.
+ *
+ * @see [Routing](https://docs.nestjs.com/controllers#routing)
+ *
+ * @publicApi
+ */
+export const Unlock = createMappingDecorator(RequestMethod.UNLOCK);
diff --git a/packages/common/enums/http-status.enum.ts b/packages/common/enums/http-status.enum.ts
index 326001344..8d6da4526 100644
--- a/packages/common/enums/http-status.enum.ts
+++ b/packages/common/enums/http-status.enum.ts
@@ -13,6 +13,9 @@ export enum HttpStatus {
   NO_CONTENT = 204,
   RESET_CONTENT = 205,
   PARTIAL_CONTENT = 206,
+  MULTI_STATUS = 207,
+  ALREADY_REPORTED = 208,
+  CONTENT_DIFFERENT = 210,
   AMBIGUOUS = 300,
   MOVED_PERMANENTLY = 301,
   FOUND = 302,
@@ -41,13 +44,17 @@ export enum HttpStatus {
   I_AM_A_TEAPOT = 418,
   MISDIRECTED = 421,
   UNPROCESSABLE_ENTITY = 422,
+  LOCKED = 423,
   FAILED_DEPENDENCY = 424,
   PRECONDITION_REQUIRED = 428,
   TOO_MANY_REQUESTS = 429,
+  UNRECOVERABLE_ERROR = 456,
   INTERNAL_SERVER_ERROR = 500,
   NOT_IMPLEMENTED = 501,
   BAD_GATEWAY = 502,
   SERVICE_UNAVAILABLE = 503,
   GATEWAY_TIMEOUT = 504,
   HTTP_VERSION_NOT_SUPPORTED = 505,
+  INSUFFICIENT_STORAGE = 507,
+  LOOP_DETECTED = 508,
 }
diff --git a/packages/common/enums/request-method.enum.ts b/packages/common/enums/request-method.enum.ts
index e28455633..9bd12a98c 100644
--- a/packages/common/enums/request-method.enum.ts
+++ b/packages/common/enums/request-method.enum.ts
@@ -8,4 +8,11 @@ export enum RequestMethod {
   OPTIONS,
   HEAD,
   SEARCH,
+  PROPFIND,
+  PROPPATCH,
+  MKCOL,
+  COPY,
+  MOVE,
+  LOCK,
+  UNLOCK,
 }
diff --git a/packages/common/exceptions/http.exception.ts b/packages/common/exceptions/http.exception.ts
index 143df233e..111a1f72a 100644
--- a/packages/common/exceptions/http.exception.ts
+++ b/packages/common/exceptions/http.exception.ts
@@ -2,7 +2,7 @@ import {
   HttpExceptionBody,
   HttpExceptionBodyMessage,
 } from '../interfaces/http/http-exception-body.interface';
-import { isNumber, isObject, isString } from '../utils/shared.utils';
+import { isObject, isString } from '../utils/shared.utils';
 
 export interface HttpExceptionOptions {
   /** original cause of the error */
@@ -115,14 +115,17 @@ export class HttpException extends Error {
     message: HttpExceptionBodyMessage,
     statusCode: number,
   ): HttpExceptionBody;
+
   public static createBody(
     message: HttpExceptionBodyMessage,
     error: string,
     statusCode: number,
   ): HttpExceptionBody;
+
   public static createBody<Body extends Record<string, unknown>>(
     custom: Body,
   ): Body;
+
   public static createBody<Body extends Record<string, unknown>>(
     arg0: null | HttpExceptionBodyMessage | Body,
     arg1?: HttpExceptionBodyMessage | string,
@@ -135,7 +138,7 @@ export class HttpException extends Error {
       };
     }
 
-    if (isString(arg0) || Array.isArray(arg0) || isNumber(arg0)) {
+    if (isString(arg0) || Array.isArray(arg0)) {
       return {
         message: arg0,
         error: arg1 as string,
diff --git a/packages/common/file-stream/streamable-file.ts b/packages/common/file-stream/streamable-file.ts
index 6323ca065..c41dbb388 100644
--- a/packages/common/file-stream/streamable-file.ts
+++ b/packages/common/file-stream/streamable-file.ts
@@ -1,9 +1,9 @@
 import { Readable } from 'stream';
 import { types } from 'util';
 import { HttpStatus } from '../enums';
-import { Logger } from '../services';
 import { isFunction } from '../utils/shared.utils';
 import { StreamableFileOptions, StreamableHandlerResponse } from './interfaces';
+import { Logger } from '../services';
 
 /**
  * @see [Streaming files](https://docs.nestjs.com/techniques/streaming-files)
@@ -31,7 +31,7 @@ export class StreamableFile {
   };
 
   protected logError: (err: Error) => void = (err: Error) => {
-    this.logger.error(err);
+    this.logger.error(err.message, err.stack);
   };
 
   constructor(buffer: Uint8Array, options?: StreamableFileOptions);
diff --git a/packages/common/interfaces/external/transformer-package.interface.ts b/packages/common/interfaces/external/transformer-package.interface.ts
index f13c5fa2e..cd08a0552 100644
--- a/packages/common/interfaces/external/transformer-package.interface.ts
+++ b/packages/common/interfaces/external/transformer-package.interface.ts
@@ -2,7 +2,7 @@ import { Type } from '../type.interface';
 import { ClassTransformOptions } from './class-transform-options.interface';
 
 export interface TransformerPackage {
-  plainToInstance<T>(
+  plainToClass<T>(
     cls: Type<T>,
     plain: unknown,
     options?: ClassTransformOptions,
diff --git a/packages/common/interfaces/features/custom-route-param-factory.interface.ts b/packages/common/interfaces/features/custom-route-param-factory.interface.ts
index c63b4b857..e022b6669 100644
--- a/packages/common/interfaces/features/custom-route-param-factory.interface.ts
+++ b/packages/common/interfaces/features/custom-route-param-factory.interface.ts
@@ -1,9 +1,7 @@
-import { ExecutionContext } from './execution-context.interface';
-
 /**
  * @publicApi
  */
-export type CustomParamFactory<TData = any, TOutput = any> = (
+export type CustomParamFactory<TData = any, TInput = any, TOutput = any> = (
   data: TData,
-  context: ExecutionContext,
+  input: TInput,
 ) => TOutput;
diff --git a/packages/common/interfaces/http/http-exception-body.interface.ts b/packages/common/interfaces/http/http-exception-body.interface.ts
index b9f4732d6..e0b923e5e 100644
--- a/packages/common/interfaces/http/http-exception-body.interface.ts
+++ b/packages/common/interfaces/http/http-exception-body.interface.ts
@@ -1,4 +1,4 @@
-export type HttpExceptionBodyMessage = string | string[] | number;
+export type HttpExceptionBodyMessage = string | string[];
 
 export interface HttpExceptionBody {
   message: HttpExceptionBodyMessage;
diff --git a/packages/common/interfaces/http/http-server.interface.ts b/packages/common/interfaces/http/http-server.interface.ts
index 28e8278b0..91494021e 100644
--- a/packages/common/interfaces/http/http-server.interface.ts
+++ b/packages/common/interfaces/http/http-server.interface.ts
@@ -47,6 +47,20 @@ export interface HttpServer<
   put(path: string, handler: RequestHandler<TRequest, TResponse>): any;
   patch(handler: RequestHandler<TRequest, TResponse>): any;
   patch(path: string, handler: RequestHandler<TRequest, TResponse>): any;
+  propfind?(handler: RequestHandler<TRequest, TResponse>): any;
+  propfind?(path: string, handler: RequestHandler<TRequest, TResponse>): any;
+  proppatch?(handler: RequestHandler<TRequest, TResponse>): any;
+  proppatch?(path: string, handler: RequestHandler<TRequest, TResponse>): any;
+  mkcol?(handler: RequestHandler<TRequest, TResponse>): any;
+  mkcol?(path: string, handler: RequestHandler<TRequest, TResponse>): any;
+  copy?(handler: RequestHandler<TRequest, TResponse>): any;
+  copy?(path: string, handler: RequestHandler<TRequest, TResponse>): any;
+  move?(handler: RequestHandler<TRequest, TResponse>): any;
+  move?(path: string, handler: RequestHandler<TRequest, TResponse>): any;
+  lock?(handler: RequestHandler<TRequest, TResponse>): any;
+  lock?(path: string, handler: RequestHandler<TRequest, TResponse>): any;
+  unlock?(handler: RequestHandler<TRequest, TResponse>): any;
+  unlock?(path: string, handler: RequestHandler<TRequest, TResponse>): any;
   all(path: string, handler: RequestHandler<TRequest, TResponse>): any;
   all(handler: RequestHandler<TRequest, TResponse>): any;
   options(handler: RequestHandler<TRequest, TResponse>): any;
diff --git a/packages/common/interfaces/modules/module-metadata.interface.ts b/packages/common/interfaces/modules/module-metadata.interface.ts
index 2baa7d84f..9d6699cba 100644
--- a/packages/common/interfaces/modules/module-metadata.interface.ts
+++ b/packages/common/interfaces/modules/module-metadata.interface.ts
@@ -35,6 +35,7 @@ export interface ModuleMetadata {
    */
   exports?: Array<
     | DynamicModule
+    | Promise<DynamicModule>
     | string
     | symbol
     | Provider
diff --git a/packages/common/interfaces/nest-application-context-options.interface.ts b/packages/common/interfaces/nest-application-context-options.interface.ts
index db661d953..d5204b55d 100644
--- a/packages/common/interfaces/nest-application-context-options.interface.ts
+++ b/packages/common/interfaces/nest-application-context-options.interface.ts
@@ -44,13 +44,4 @@ export class NestApplicationContextOptions {
    * @default false
    */
   snapshot?: boolean;
-
-  /**
-   * Determines what algorithm use to generate module ids.
-   * When set to `deep-hash`, the module id is generated based on the serialized module definition.
-   * When set to `reference`, each module obtains a unique id based on its reference.
-   *
-   * @default 'reference'
-   */
-  moduleIdGeneratorAlgorithm?: 'deep-hash' | 'reference';
 }
diff --git a/packages/common/interfaces/nest-application-context.interface.ts b/packages/common/interfaces/nest-application-context.interface.ts
index 3a8fe4396..554fa1d1b 100644
--- a/packages/common/interfaces/nest-application-context.interface.ts
+++ b/packages/common/interfaces/nest-application-context.interface.ts
@@ -1,11 +1,8 @@
 import { ShutdownSignal } from '../enums/shutdown-signal.enum';
 import { LoggerService, LogLevel } from '../services/logger.service';
 import { DynamicModule } from './modules';
-import { NestApplicationContextOptions } from './nest-application-context-options.interface';
 import { Type } from './type.interface';
 
-export type SelectOptions = Pick<NestApplicationContextOptions, 'abortOnError'>;
-
 export interface GetOrResolveOptions {
   /**
    * If enabled, lookup will only be performed in the host module.
@@ -30,10 +27,7 @@ export interface INestApplicationContext {
    * Allows navigating through the modules tree, for example, to pull out a specific instance from the selected module.
    * @returns {INestApplicationContext}
    */
-  select<T>(
-    module: Type<T> | DynamicModule,
-    options?: SelectOptions,
-  ): INestApplicationContext;
+  select<T>(module: Type<T> | DynamicModule): INestApplicationContext;
 
   /**
    * Retrieves an instance of either injectable or controller, otherwise, throws exception.
diff --git a/packages/common/package.json b/packages/common/package.json
index 490aca2f2..256526534 100644
--- a/packages/common/package.json
+++ b/packages/common/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/common",
-  "version": "10.4.7",
+  "version": "10.4.6",
   "description": "Nest - modern, fast, powerful node.js web framework (@common)",
   "author": "Kamil Mysliwiec",
   "homepage": "https://nestjs.com",
diff --git a/packages/common/pipes/index.ts b/packages/common/pipes/index.ts
index f416b9467..ebbc55f27 100644
--- a/packages/common/pipes/index.ts
+++ b/packages/common/pipes/index.ts
@@ -1,10 +1,9 @@
 export * from './default-value.pipe';
-export * from './file';
 export * from './parse-array.pipe';
 export * from './parse-bool.pipe';
-export * from './parse-date.pipe';
-export * from './parse-enum.pipe';
-export * from './parse-float.pipe';
 export * from './parse-int.pipe';
+export * from './parse-float.pipe';
+export * from './parse-enum.pipe';
 export * from './parse-uuid.pipe';
 export * from './validation.pipe';
+export * from './file';
diff --git a/packages/common/pipes/parse-array.pipe.ts b/packages/common/pipes/parse-array.pipe.ts
index 3887dfe23..a46acc8fd 100644
--- a/packages/common/pipes/parse-array.pipe.ts
+++ b/packages/common/pipes/parse-array.pipe.ts
@@ -7,7 +7,7 @@ import {
   PipeTransform,
 } from '../interfaces/features/pipe-transform.interface';
 import { HttpErrorByCode } from '../utils/http-error-by-code.util';
-import { isNil, isString, isUndefined } from '../utils/shared.utils';
+import { isNil, isUndefined, isString } from '../utils/shared.utils';
 import { ValidationPipe, ValidationPipeOptions } from './validation.pipe';
 
 const VALIDATION_ERROR_MESSAGE = 'Validation failed (parsable array expected)';
@@ -21,26 +21,9 @@ export interface ParseArrayOptions
     ValidationPipeOptions,
     'transform' | 'validateCustomDecorators' | 'exceptionFactory'
   > {
-  /**
-   * Type for items to be converted into
-   */
   items?: Type<unknown>;
-  /**
-   * Items separator to split string by
-   * @default ','
-   */
   separator?: string;
-  /**
-   * If true, the pipe will return null or undefined if the value is not provided
-   * @default false
-   */
   optional?: boolean;
-  /**
-   * A factory function that returns an exception object to be thrown
-   * if validation fails.
-   * @param error Error message or object
-   * @returns The exception object
-   */
   exceptionFactory?: (error: any) => any;
 }
 
diff --git a/packages/common/pipes/parse-bool.pipe.ts b/packages/common/pipes/parse-bool.pipe.ts
index 16296f058..ed1fbe553 100644
--- a/packages/common/pipes/parse-bool.pipe.ts
+++ b/packages/common/pipes/parse-bool.pipe.ts
@@ -15,21 +15,8 @@ import { isNil } from '../utils/shared.utils';
  * @publicApi
  */
 export interface ParseBoolPipeOptions {
-  /**
-   * The HTTP status code to be used in the response when the validation fails.
-   */
   errorHttpStatusCode?: ErrorHttpStatusCode;
-  /**
-   * A factory function that returns an exception object to be thrown
-   * if validation fails.
-   * @param error Error message
-   * @returns The exception object
-   */
   exceptionFactory?: (error: string) => any;
-  /**
-   * If true, the pipe will return null or undefined if the value is not provided
-   * @default false
-   */
   optional?: boolean;
 }
 
diff --git a/packages/common/pipes/parse-date.pipe.ts b/packages/common/pipes/parse-date.pipe.ts
deleted file mode 100644
index 4980882a4..000000000
--- a/packages/common/pipes/parse-date.pipe.ts
+++ /dev/null
@@ -1,74 +0,0 @@
-import { Injectable } from '../decorators/core/injectable.decorator';
-import { HttpStatus } from '../enums/http-status.enum';
-import { PipeTransform } from '../interfaces/features/pipe-transform.interface';
-import {
-  ErrorHttpStatusCode,
-  HttpErrorByCode,
-} from '../utils/http-error-by-code.util';
-import { isNil } from '../utils/shared.utils';
-
-export interface ParseDatePipeOptions {
-  /**
-   * If true, the pipe will return null or undefined if the value is not provided
-   * @default false
-   */
-  optional?: boolean;
-  /**
-   * Default value for the date
-   */
-  default?: () => Date;
-  /**
-   * The HTTP status code to be used in the response when the validation fails.
-   */
-  errorHttpStatusCode?: ErrorHttpStatusCode;
-  /**
-   * A factory function that returns an exception object to be thrown
-   * if validation fails.
-   * @param error Error message
-   * @returns The exception object
-   */
-  exceptionFactory?: (error: string) => any;
-}
-
-@Injectable()
-export class ParseDatePipe
-  implements PipeTransform<string | number | undefined | null>
-{
-  protected exceptionFactory: (error: string) => any;
-
-  constructor(private readonly options: ParseDatePipeOptions = {}) {
-    const { exceptionFactory, errorHttpStatusCode = HttpStatus.BAD_REQUEST } =
-      options;
-
-    this.exceptionFactory =
-      exceptionFactory ||
-      (error => new HttpErrorByCode[errorHttpStatusCode](error));
-  }
-
-  /**
-   * Method that accesses and performs optional transformation on argument for
-   * in-flight requests.
-   *
-   * @param value currently processed route argument
-   * @param metadata contains metadata about the currently processed route argument
-   */
-  transform(value: string | number | undefined | null): Date {
-    if (this.options.optional && isNil(value)) {
-      return this.options.default
-        ? this.options.default()
-        : (value as undefined | null);
-    }
-
-    if (!value) {
-      throw this.exceptionFactory('Validation failed (no Date provided)');
-    }
-
-    const transformedValue = new Date(value);
-
-    if (isNaN(transformedValue.getTime())) {
-      throw this.exceptionFactory('Validation failed (invalid date format)');
-    }
-
-    return transformedValue;
-  }
-}
diff --git a/packages/common/pipes/parse-enum.pipe.ts b/packages/common/pipes/parse-enum.pipe.ts
index 0bccd8b29..4d98a96ad 100644
--- a/packages/common/pipes/parse-enum.pipe.ts
+++ b/packages/common/pipes/parse-enum.pipe.ts
@@ -11,21 +11,8 @@ import { isNil } from '../utils/shared.utils';
  * @publicApi
  */
 export interface ParseEnumPipeOptions {
-  /**
-   * If true, the pipe will return null or undefined if the value is not provided
-   * @default false
-   */
   optional?: boolean;
-  /**
-   * The HTTP status code to be used in the response when the validation fails.
-   */
   errorHttpStatusCode?: ErrorHttpStatusCode;
-  /**
-   * A factory function that returns an exception object to be thrown
-   * if validation fails.
-   * @param error Error message
-   * @returns The exception object
-   */
   exceptionFactory?: (error: string) => any;
 }
 
diff --git a/packages/common/pipes/parse-float.pipe.ts b/packages/common/pipes/parse-float.pipe.ts
index 04f5e97e2..a9b25e4d7 100644
--- a/packages/common/pipes/parse-float.pipe.ts
+++ b/packages/common/pipes/parse-float.pipe.ts
@@ -11,21 +11,8 @@ import { isNil } from '../utils/shared.utils';
  * @publicApi
  */
 export interface ParseFloatPipeOptions {
-  /**
-   * The HTTP status code to be used in the response when the validation fails.
-   */
   errorHttpStatusCode?: ErrorHttpStatusCode;
-  /**
-   * A factory function that returns an exception object to be thrown
-   * if validation fails.
-   * @param error Error message
-   * @returns The exception object
-   */
   exceptionFactory?: (error: string) => any;
-  /**
-   * If true, the pipe will return null or undefined if the value is not provided
-   * @default false
-   */
   optional?: boolean;
 }
 
diff --git a/packages/common/pipes/parse-int.pipe.ts b/packages/common/pipes/parse-int.pipe.ts
index d74aa0205..a36473efe 100644
--- a/packages/common/pipes/parse-int.pipe.ts
+++ b/packages/common/pipes/parse-int.pipe.ts
@@ -15,21 +15,8 @@ import { isNil } from '../utils/shared.utils';
  * @publicApi
  */
 export interface ParseIntPipeOptions {
-  /**
-   * The HTTP status code to be used in the response when the validation fails.
-   */
   errorHttpStatusCode?: ErrorHttpStatusCode;
-  /**
-   * A factory function that returns an exception object to be thrown
-   * if validation fails.
-   * @param error Error message
-   * @returns The exception object
-   */
   exceptionFactory?: (error: string) => any;
-  /**
-   * If true, the pipe will return null or undefined if the value is not provided
-   * @default false
-   */
   optional?: boolean;
 }
 
diff --git a/packages/common/pipes/parse-uuid.pipe.ts b/packages/common/pipes/parse-uuid.pipe.ts
index 3c13c6b51..6b33ac6fc 100644
--- a/packages/common/pipes/parse-uuid.pipe.ts
+++ b/packages/common/pipes/parse-uuid.pipe.ts
@@ -15,25 +15,9 @@ import { isNil, isString } from '../utils/shared.utils';
  * @publicApi
  */
 export interface ParseUUIDPipeOptions {
-  /**
-   * UUID version to validate
-   */
   version?: '3' | '4' | '5' | '7';
-  /**
-   * The HTTP status code to be used in the response when the validation fails.
-   */
   errorHttpStatusCode?: ErrorHttpStatusCode;
-  /**
-   * A factory function that returns an exception object to be thrown
-   * if validation fails.
-   * @param error Error message
-   * @returns The exception object
-   */
   exceptionFactory?: (errors: string) => any;
-  /**
-   * If true, the pipe will return null or undefined if the value is not provided
-   * @default false
-   */
   optional?: boolean;
 }
 
diff --git a/packages/common/pipes/validation.pipe.ts b/packages/common/pipes/validation.pipe.ts
index 951f73f43..6ee05a4ad 100644
--- a/packages/common/pipes/validation.pipe.ts
+++ b/packages/common/pipes/validation.pipe.ts
@@ -121,7 +121,7 @@ export class ValidationPipe implements PipeTransform<any> {
     const isNil = value !== originalValue;
     const isPrimitive = this.isPrimitive(value);
     this.stripProtoKeys(value);
-    let entity = classTransformer.plainToInstance(
+    let entity = classTransformer.plainToClass(
       metatype,
       value,
       this.transformOptions,
@@ -203,12 +203,6 @@ export class ValidationPipe implements PipeTransform<any> {
       return value === true || value === 'true';
     }
     if (metatype === Number) {
-      if (isUndefined(value)) {
-        // This is a workaround to deal with optional numeric values since
-        // optional numerics shouldn't be parsed to a valid number when
-        // they were not defined
-        return undefined;
-      }
       return +value;
     }
     return value;
diff --git a/packages/common/serializer/class-serializer.interceptor.ts b/packages/common/serializer/class-serializer.interceptor.ts
index 795147d95..3773fddc0 100644
--- a/packages/common/serializer/class-serializer.interceptor.ts
+++ b/packages/common/serializer/class-serializer.interceptor.ts
@@ -94,11 +94,7 @@ export class ClassSerializerInterceptor implements NestInterceptor {
     if (plainOrClass instanceof options.type) {
       return classTransformer.classToPlain(plainOrClass, options);
     }
-    const instance = classTransformer.plainToInstance(
-      options.type,
-      plainOrClass,
-      options,
-    );
+    const instance = classTransformer.plainToClass(options.type, plainOrClass);
     return classTransformer.classToPlain(instance, options);
   }
 
diff --git a/packages/common/services/console-logger.service.ts b/packages/common/services/console-logger.service.ts
index 79c967f17..a6da2a419 100644
--- a/packages/common/services/console-logger.service.ts
+++ b/packages/common/services/console-logger.service.ts
@@ -1,4 +1,3 @@
-import { inspect, InspectOptions } from 'util';
 import { Injectable, Optional } from '../decorators/core';
 import { clc, yellow } from '../utils/cli-colors.util';
 import {
@@ -10,8 +9,6 @@ import {
 import { LoggerService, LogLevel } from './logger.service';
 import { isLogLevelEnabled } from './utils';
 
-const DEFAULT_DEPTH = 5;
-
 export interface ConsoleLoggerOptions {
   /**
    * Enabled log levels.
@@ -19,73 +16,8 @@ export interface ConsoleLoggerOptions {
   logLevels?: LogLevel[];
   /**
    * If enabled, will print timestamp (time difference) between current and previous log message.
-   * Note: This option is not used when `json` is enabled.
    */
   timestamp?: boolean;
-  /**
-   * A prefix to be used for each log message.
-   * Note: This option is not used when `json` is enabled.
-   */
-  prefix?: string;
-  /**
-   * If enabled, will print the log message in JSON format.
-   */
-  json?: boolean;
-  /**
-   * If enabled, will print the log message in color.
-   * Default true if json is disabled, false otherwise
-   */
-  colors?: boolean;
-  /**
-   * The context of the logger.
-   */
-  context?: string;
-  /**
-   * If enabled, will print the log message in a single line, even if it is an object with multiple properties.
-   * If set to a number, the most n inner elements are united on a single line as long as all properties fit into breakLength. Short array elements are also grouped together.
-   * Default true when `json` is enabled, false otherwise.
-   */
-  compact?: boolean | number;
-  /**
-   * Specifies the maximum number of Array, TypedArray, Map, Set, WeakMap, and WeakSet elements to include when formatting.
-   * Set to null or Infinity to show all elements. Set to 0 or negative to show no elements.
-   * Ignored when `json` is enabled, colors are disabled, and `compact` is set to true as it produces a parseable JSON output.
-   * @default 100
-   */
-  maxArrayLength?: number;
-  /**
-   * Specifies the maximum number of characters to include when formatting.
-   * Set to null or Infinity to show all elements. Set to 0 or negative to show no characters.
-   * Ignored when `json` is enabled, colors are disabled, and `compact` is set to true as it produces a parseable JSON output.
-   * @default 10000.
-   */
-  maxStringLength?: number;
-  /**
-   * If enabled, will sort keys while formatting objects.
-   * Can also be a custom sorting function.
-   * Ignored when `json` is enabled, colors are disabled, and `compact` is set to true as it produces a parseable JSON output.
-   * @default false
-   */
-  sorted?: boolean | ((a: string, b: string) => number);
-  /**
-   * Specifies the number of times to recurse while formatting object. T
-   * This is useful for inspecting large objects. To recurse up to the maximum call stack size pass Infinity or null.
-   * Ignored when `json` is enabled, colors are disabled, and `compact` is set to true as it produces a parseable JSON output.
-   * @default 5
-   */
-  depth?: number;
-  /**
-   * If true, object's non-enumerable symbols and properties are included in the formatted result.
-   * WeakMap and WeakSet entries are also included as well as user defined prototype properties
-   * @default false
-   */
-  showHidden?: boolean;
-  /**
-   * The length at which input values are split across multiple lines. Set to Infinity to format the input as a single line (in combination with "compact" set to true).
-   * Default Infinity when "compact" is true, 80 otherwise.
-   * Ignored when `json` is enabled, colors are disabled, and `compact` is set to true as it produces a parseable JSON output.
-   */
-  breakLength?: number;
 }
 
 const DEFAULT_LOG_LEVELS: LogLevel[] = [
@@ -108,54 +40,22 @@ const dateTimeFormatter = new Intl.DateTimeFormat(undefined, {
 
 @Injectable()
 export class ConsoleLogger implements LoggerService {
-  /**
-   * The options of the logger.
-   */
-  protected options: ConsoleLoggerOptions;
-  /**
-   * The context of the logger (can be set manually or automatically inferred).
-   */
-  protected context?: string;
-  /**
-   * The original context of the logger (set in the constructor).
-   */
-  protected originalContext?: string;
-  /**
-   * The options used for the "inspect" method.
-   */
-  protected inspectOptions: InspectOptions;
-  /**
-   * The last timestamp at which the log message was printed.
-   */
-  protected static lastTimestampAt?: number;
+  private static lastTimestampAt?: number;
+  private originalContext?: string;
 
   constructor();
   constructor(context: string);
-  constructor(options: ConsoleLoggerOptions);
   constructor(context: string, options: ConsoleLoggerOptions);
   constructor(
     @Optional()
-    contextOrOptions?: string | ConsoleLoggerOptions,
+    protected context?: string,
     @Optional()
-    options?: ConsoleLoggerOptions,
+    protected options: ConsoleLoggerOptions = {},
   ) {
-    // eslint-disable-next-line prefer-const
-    let [context, opts] = isString(contextOrOptions)
-      ? [contextOrOptions, options]
-      : !!options
-        ? [undefined, options]
-        : [contextOrOptions?.context, contextOrOptions];
-
-    opts = opts ?? {};
-    opts.logLevels ??= DEFAULT_LOG_LEVELS;
-    opts.colors ??= opts.colors ?? (opts.json ? false : true);
-    opts.prefix ??= 'Nest';
-
-    this.options = opts;
-    this.inspectOptions = this.getInspectOptions();
-
+    if (!options.logLevels) {
+      options.logLevels = DEFAULT_LOG_LEVELS;
+    }
     if (context) {
-      this.context = context;
       this.originalContext = context;
     }
   }
@@ -191,7 +91,7 @@ export class ConsoleLogger implements LoggerService {
     const { messages, context, stack } =
       this.getContextAndStackAndMessagesToPrint([message, ...optionalParams]);
 
-    this.printMessages(messages, context, 'error', 'stderr', stack);
+    this.printMessages(messages, context, 'error', 'stderr');
     this.printStackTrace(stack);
   }
 
@@ -303,18 +203,8 @@ export class ConsoleLogger implements LoggerService {
     context = '',
     logLevel: LogLevel = 'log',
     writeStreamType?: 'stdout' | 'stderr',
-    errorStack?: unknown,
   ) {
     messages.forEach(message => {
-      if (this.options.json) {
-        this.printAsJson(message, {
-          context,
-          logLevel,
-          writeStreamType,
-          errorStack,
-        });
-        return;
-      }
       const pidMessage = this.formatPid(process.pid);
       const contextMessage = this.formatContext(context);
       const timestampDiff = this.updateAndGetTimestampDiff();
@@ -332,57 +222,12 @@ export class ConsoleLogger implements LoggerService {
     });
   }
 
-  protected printAsJson(
-    message: unknown,
-    options: {
-      context: string;
-      logLevel: LogLevel;
-      writeStreamType?: 'stdout' | 'stderr';
-      errorStack?: unknown;
-    },
-  ) {
-    type JsonLogObject = {
-      level: LogLevel;
-      pid: number;
-      timestamp: number;
-      message: unknown;
-      context?: string;
-      stack?: unknown;
-    };
-
-    const logObject: JsonLogObject = {
-      level: options.logLevel,
-      pid: process.pid,
-      timestamp: Date.now(),
-      message,
-    };
-
-    if (options.context) {
-      logObject.context = options.context;
-    }
-
-    if (options.errorStack) {
-      logObject.stack = options.errorStack;
-    }
-
-    const formattedMessage =
-      !this.options.colors && this.inspectOptions.compact === true
-        ? JSON.stringify(logObject, this.stringifyReplacer)
-        : inspect(logObject, this.inspectOptions);
-    process[options.writeStreamType ?? 'stdout'].write(`${formattedMessage}\n`);
-  }
-
   protected formatPid(pid: number) {
-    return `[${this.options.prefix}] ${pid}  - `;
+    return `[Nest] ${pid}  - `;
   }
 
   protected formatContext(context: string): string {
-    if (!context) {
-      return '';
-    }
-
-    context = `[${context}] `;
-    return this.options.colors ? yellow(context) : context;
+    return context ? yellow(`[${context}] `) : '';
   }
 
   protected formatMessage(
@@ -411,30 +256,23 @@ export class ConsoleLogger implements LoggerService {
       return this.stringifyMessage(message(), logLevel);
     }
 
-    if (typeof message === 'string') {
-      return this.colorize(message, logLevel);
-    }
-
-    const outputText = inspect(message, this.inspectOptions);
-    if (isPlainObject(message)) {
-      return `Object(${Object.keys(message).length}) ${outputText}`;
-    }
-    if (Array.isArray(message)) {
-      return `Array(${message.length}) ${outputText}`;
-    }
-    return outputText;
+    return isPlainObject(message) || Array.isArray(message)
+      ? `${this.colorize('Object:', logLevel)}\n${JSON.stringify(
+          message,
+          (key, value) =>
+            typeof value === 'bigint' ? value.toString() : value,
+          2,
+        )}\n`
+      : this.colorize(message as string, logLevel);
   }
 
   protected colorize(message: string, logLevel: LogLevel) {
-    if (!this.options.colors || this.options.json) {
-      return message;
-    }
     const color = this.getColorByLogLevel(logLevel);
     return color(message);
   }
 
   protected printStackTrace(stack: string) {
-    if (!stack || this.options.json) {
+    if (!stack) {
       return;
     }
     process.stderr.write(`${stack}\n`);
@@ -451,58 +289,7 @@ export class ConsoleLogger implements LoggerService {
   }
 
   protected formatTimestampDiff(timestampDiff: number) {
-    const formattedDiff = ` +${timestampDiff}ms`;
-    return this.options.colors ? yellow(formattedDiff) : formattedDiff;
-  }
-
-  protected getInspectOptions() {
-    let breakLength = this.options.breakLength;
-    if (typeof breakLength === 'undefined') {
-      breakLength = this.options.colors
-        ? this.options.compact
-          ? Infinity
-          : undefined
-        : this.options.compact === false
-          ? undefined
-          : Infinity; // default breakLength to Infinity if inline is not set and colors is false
-    }
-
-    const inspectOptions: InspectOptions = {
-      depth: this.options.depth ?? DEFAULT_DEPTH,
-      sorted: this.options.sorted,
-      showHidden: this.options.showHidden,
-      compact: this.options.compact ?? (this.options.json ? true : false),
-      colors: this.options.colors,
-      breakLength,
-    };
-
-    if (this.options.maxArrayLength) {
-      inspectOptions.maxArrayLength = this.options.maxArrayLength;
-    }
-    if (this.options.maxStringLength) {
-      inspectOptions.maxStringLength = this.options.maxStringLength;
-    }
-
-    return inspectOptions;
-  }
-
-  protected stringifyReplacer(key: string, value: unknown) {
-    // Mimic util.inspect behavior for JSON logger with compact on and colors off
-    if (typeof value === 'bigint') {
-      return value.toString();
-    }
-    if (typeof value === 'symbol') {
-      return value.toString();
-    }
-
-    if (
-      value instanceof Map ||
-      value instanceof Set ||
-      value instanceof Error
-    ) {
-      return `${inspect(value, this.inspectOptions)}`;
-    }
-    return value;
+    return yellow(` +${timestampDiff}ms`);
   }
 
   private getContextAndMessagesToPrint(args: unknown[]) {
diff --git a/packages/core/adapters/http-adapter.ts b/packages/core/adapters/http-adapter.ts
index 6e079fe55..106e447ca 100644
--- a/packages/core/adapters/http-adapter.ts
+++ b/packages/core/adapters/http-adapter.ts
@@ -62,6 +62,48 @@ export abstract class AbstractHttpAdapter<
     return this.instance.patch(...args);
   }
 
+  public propfind(handler: RequestHandler);
+  public propfind(path: any, handler: RequestHandler);
+  public propfind(...args: any[]) {
+    return this.instance.propfind(...args);
+  }
+
+  public proppatch(handler: RequestHandler);
+  public proppatch(path: any, handler: RequestHandler);
+  public proppatch(...args: any[]) {
+    return this.instance.proppatch(...args);
+  }
+
+  public mkcol(handler: RequestHandler);
+  public mkcol(path: any, handler: RequestHandler);
+  public mkcol(...args: any[]) {
+    return this.instance.mkcol(...args);
+  }
+
+  public copy(handler: RequestHandler);
+  public copy(path: any, handler: RequestHandler);
+  public copy(...args: any[]) {
+    return this.instance.copy(...args);
+  }
+
+  public move(handler: RequestHandler);
+  public move(path: any, handler: RequestHandler);
+  public move(...args: any[]) {
+    return this.instance.move(...args);
+  }
+
+  public lock(handler: RequestHandler);
+  public lock(path: any, handler: RequestHandler);
+  public lock(...args: any[]) {
+    return this.instance.lock(...args);
+  }
+
+  public unlock(handler: RequestHandler);
+  public unlock(path: any, handler: RequestHandler);
+  public unlock(...args: any[]) {
+    return this.instance.unlock(...args);
+  }
+
   public all(handler: RequestHandler);
   public all(path: any, handler: RequestHandler);
   public all(...args: any[]) {
diff --git a/packages/core/errors/exception-handler.ts b/packages/core/errors/exception-handler.ts
index e34358bf2..3b1c47c00 100644
--- a/packages/core/errors/exception-handler.ts
+++ b/packages/core/errors/exception-handler.ts
@@ -1,9 +1,14 @@
+import { RuntimeException } from './exceptions/runtime.exception';
 import { Logger } from '@nestjs/common/services/logger.service';
 
 export class ExceptionHandler {
   private static readonly logger = new Logger(ExceptionHandler.name);
 
-  public handle(exception: Error) {
-    ExceptionHandler.logger.error(exception);
+  public handle(exception: RuntimeException | Error) {
+    if (!(exception instanceof RuntimeException)) {
+      ExceptionHandler.logger.error(exception.message, exception.stack);
+      return;
+    }
+    ExceptionHandler.logger.error(exception.what(), exception.stack);
   }
 }
diff --git a/packages/core/exceptions/base-exception-filter.ts b/packages/core/exceptions/base-exception-filter.ts
index 12735f136..bc3784501 100644
--- a/packages/core/exceptions/base-exception-filter.ts
+++ b/packages/core/exceptions/base-exception-filter.ts
@@ -68,6 +68,12 @@ export class BaseExceptionFilter<T = any> implements ExceptionFilter<T> {
       applicationRef.end(response);
     }
 
+    if (this.isExceptionObject(exception)) {
+      return BaseExceptionFilter.logger.error(
+        exception.message,
+        exception.stack,
+      );
+    }
     return BaseExceptionFilter.logger.error(exception);
   }
 
diff --git a/packages/core/exceptions/external-exception-filter.ts b/packages/core/exceptions/external-exception-filter.ts
index 076b6a970..9c6b2563b 100644
--- a/packages/core/exceptions/external-exception-filter.ts
+++ b/packages/core/exceptions/external-exception-filter.ts
@@ -5,7 +5,7 @@ export class ExternalExceptionFilter<T = any, R = any> {
 
   catch(exception: T, host: ArgumentsHost): R | Promise<R> {
     if (exception instanceof Error && !(exception instanceof HttpException)) {
-      ExternalExceptionFilter.logger.error(exception);
+      ExternalExceptionFilter.logger.error(exception.message, exception.stack);
     }
     throw exception;
   }
diff --git a/packages/core/helpers/router-method-factory.ts b/packages/core/helpers/router-method-factory.ts
index ff31c57e1..6051303d6 100644
--- a/packages/core/helpers/router-method-factory.ts
+++ b/packages/core/helpers/router-method-factory.ts
@@ -11,6 +11,13 @@ const REQUEST_METHOD_MAP = {
   [RequestMethod.OPTIONS]: 'options',
   [RequestMethod.HEAD]: 'head',
   [RequestMethod.SEARCH]: 'search',
+  [RequestMethod.PROPFIND]: 'propfind',
+  [RequestMethod.PROPPATCH]: 'proppatch',
+  [RequestMethod.MKCOL]: 'mkcol',
+  [RequestMethod.COPY]: 'copy',
+  [RequestMethod.MOVE]: 'move',
+  [RequestMethod.LOCK]: 'lock',
+  [RequestMethod.UNLOCK]: 'unlock',
 } as const satisfies Record<RequestMethod, keyof HttpServer>;
 
 export class RouterMethodFactory {
diff --git a/packages/core/injector/compiler.ts b/packages/core/injector/compiler.ts
index 075d97bc3..353e27581 100644
--- a/packages/core/injector/compiler.ts
+++ b/packages/core/injector/compiler.ts
@@ -3,7 +3,7 @@ import {
   ForwardReference,
   Type,
 } from '@nestjs/common/interfaces';
-import { ModuleOpaqueKeyFactory } from './opaque-key-factory/interfaces/module-opaque-key-factory.interface';
+import { ModuleTokenFactory } from './module-token-factory';
 
 export interface ModuleFactory {
   type: Type<any>;
@@ -12,59 +12,36 @@ export interface ModuleFactory {
 }
 
 export class ModuleCompiler {
-  constructor(
-    private readonly _moduleOpaqueKeyFactory: ModuleOpaqueKeyFactory,
-  ) {}
-
-  get moduleOpaqueKeyFactory(): ModuleOpaqueKeyFactory {
-    return this._moduleOpaqueKeyFactory;
-  }
+  constructor(private readonly moduleTokenFactory = new ModuleTokenFactory()) {}
 
   public async compile(
-    moduleClsOrDynamic:
-      | Type
-      | DynamicModule
-      | ForwardReference
-      | Promise<DynamicModule>,
+    metatype: Type<any> | DynamicModule | Promise<DynamicModule>,
   ): Promise<ModuleFactory> {
-    moduleClsOrDynamic = await moduleClsOrDynamic;
-
-    const { type, dynamicMetadata } = this.extractMetadata(moduleClsOrDynamic);
-    const token = dynamicMetadata
-      ? this._moduleOpaqueKeyFactory.createForDynamic(
-          type,
-          dynamicMetadata,
-          moduleClsOrDynamic as DynamicModule | ForwardReference,
-        )
-      : this._moduleOpaqueKeyFactory.createForStatic(
-          type,
-          moduleClsOrDynamic as Type,
-        );
-
+    const { type, dynamicMetadata } = this.extractMetadata(await metatype);
+    const token = this.moduleTokenFactory.create(type, dynamicMetadata);
     return { type, dynamicMetadata, token };
   }
 
   public extractMetadata(
-    moduleClsOrDynamic: Type | ForwardReference | DynamicModule,
+    metatype: Type<any> | ForwardReference | DynamicModule,
   ): {
-    type: Type;
-    dynamicMetadata: Omit<DynamicModule, 'module'> | undefined;
+    type: Type<any>;
+    dynamicMetadata?: Partial<DynamicModule> | undefined;
   } {
-    if (!this.isDynamicModule(moduleClsOrDynamic)) {
+    if (!this.isDynamicModule(metatype)) {
       return {
-        type: (moduleClsOrDynamic as ForwardReference)?.forwardRef
-          ? (moduleClsOrDynamic as ForwardReference).forwardRef()
-          : moduleClsOrDynamic,
-        dynamicMetadata: undefined,
+        type: (metatype as ForwardReference)?.forwardRef
+          ? (metatype as ForwardReference).forwardRef()
+          : metatype,
       };
     }
-    const { module: type, ...dynamicMetadata } = moduleClsOrDynamic;
+    const { module: type, ...dynamicMetadata } = metatype;
     return { type, dynamicMetadata };
   }
 
   public isDynamicModule(
-    moduleClsOrDynamic: Type | DynamicModule | ForwardReference,
-  ): moduleClsOrDynamic is DynamicModule {
-    return !!(moduleClsOrDynamic as DynamicModule).module;
+    module: Type<any> | DynamicModule | ForwardReference,
+  ): module is DynamicModule {
+    return !!(module as DynamicModule).module;
   }
 }
diff --git a/packages/core/injector/container.ts b/packages/core/injector/container.ts
index f2237ea6a..9fbbcbd8b 100644
--- a/packages/core/injector/container.ts
+++ b/packages/core/injector/container.ts
@@ -4,7 +4,6 @@ import {
   GLOBAL_MODULE_METADATA,
 } from '@nestjs/common/constants';
 import { Injectable, Type } from '@nestjs/common/interfaces';
-import { NestApplicationContextOptions } from '@nestjs/common/interfaces/nest-application-context-options.interface';
 import { ApplicationConfig } from '../application-config';
 import { DiscoverableMetaHostCollection } from '../discovery/discoverable-meta-host-collection';
 import {
@@ -20,16 +19,16 @@ import { ContextId } from './instance-wrapper';
 import { InternalCoreModule } from './internal-core-module/internal-core-module';
 import { InternalProvidersStorage } from './internal-providers-storage';
 import { Module } from './module';
+import { ModuleTokenFactory } from './module-token-factory';
 import { ModulesContainer } from './modules-container';
-import { ByReferenceModuleOpaqueKeyFactory } from './opaque-key-factory/by-reference-module-opaque-key-factory';
-import { DeepHashedModuleOpaqueKeyFactory } from './opaque-key-factory/deep-hashed-module-opaque-key-factory';
-import { ModuleOpaqueKeyFactory } from './opaque-key-factory/interfaces/module-opaque-key-factory.interface';
 
 type ModuleMetatype = Type<any> | DynamicModule | Promise<DynamicModule>;
 type ModuleScope = Type<any>[];
 
 export class NestContainer {
   private readonly globalModules = new Set<Module>();
+  private readonly moduleTokenFactory = new ModuleTokenFactory();
+  private readonly moduleCompiler = new ModuleCompiler(this.moduleTokenFactory);
   private readonly modules = new ModulesContainer();
   private readonly dynamicModulesMetadata = new Map<
     string,
@@ -37,27 +36,11 @@ export class NestContainer {
   >();
   private readonly internalProvidersStorage = new InternalProvidersStorage();
   private readonly _serializedGraph = new SerializedGraph();
-  private moduleCompiler: ModuleCompiler;
   private internalCoreModule: Module;
 
   constructor(
-    private readonly _applicationConfig:
-      | ApplicationConfig
-      | undefined = undefined,
-    private readonly _contextOptions:
-      | NestApplicationContextOptions
-      | undefined = undefined,
-  ) {
-    const moduleOpaqueKeyFactory =
-      this._contextOptions?.moduleIdGeneratorAlgorithm === 'deep-hash'
-        ? new DeepHashedModuleOpaqueKeyFactory()
-        : new ByReferenceModuleOpaqueKeyFactory({
-            keyGenerationStrategy: this._contextOptions?.snapshot
-              ? 'shallow'
-              : 'random',
-          });
-    this.moduleCompiler = new ModuleCompiler(moduleOpaqueKeyFactory);
-  }
+    private readonly _applicationConfig: ApplicationConfig = undefined,
+  ) {}
 
   get serializedGraph(): SerializedGraph {
     return this._serializedGraph;
@@ -338,8 +321,8 @@ export class NestContainer {
     this.modules[InternalCoreModule.name] = moduleRef;
   }
 
-  public getModuleTokenFactory(): ModuleOpaqueKeyFactory {
-    return this.moduleCompiler.moduleOpaqueKeyFactory;
+  public getModuleTokenFactory(): ModuleTokenFactory {
+    return this.moduleTokenFactory;
   }
 
   public registerRequestProvider<T = any>(request: T, contextId: ContextId) {
diff --git a/packages/core/injector/module-token-factory.ts b/packages/core/injector/module-token-factory.ts
new file mode 100644
index 000000000..6fbebe4e7
--- /dev/null
+++ b/packages/core/injector/module-token-factory.ts
@@ -0,0 +1,97 @@
+import { DynamicModule, Logger } from '@nestjs/common';
+import { Type } from '@nestjs/common/interfaces/type.interface';
+import { randomStringGenerator } from '@nestjs/common/utils/random-string-generator.util';
+import { isFunction, isSymbol } from '@nestjs/common/utils/shared.utils';
+import { createHash } from 'crypto';
+import stringify from 'fast-safe-stringify';
+import { performance } from 'perf_hooks';
+
+const CLASS_STR = 'class ';
+const CLASS_STR_LEN = CLASS_STR.length;
+
+export class ModuleTokenFactory {
+  private readonly moduleTokenCache = new Map<string, string>();
+  private readonly moduleIdsCache = new WeakMap<Type<unknown>, string>();
+  private readonly logger = new Logger(ModuleTokenFactory.name, {
+    timestamp: true,
+  });
+
+  public create(
+    metatype: Type<unknown>,
+    dynamicModuleMetadata?: Partial<DynamicModule> | undefined,
+  ): string {
+    const moduleId = this.getModuleId(metatype);
+
+    if (!dynamicModuleMetadata) {
+      return this.getStaticModuleToken(moduleId, this.getModuleName(metatype));
+    }
+    const opaqueToken = {
+      id: moduleId,
+      module: this.getModuleName(metatype),
+      dynamic: dynamicModuleMetadata,
+    };
+    const start = performance.now();
+    const opaqueTokenString = this.getStringifiedOpaqueToken(opaqueToken);
+    const timeSpentInMs = performance.now() - start;
+
+    if (timeSpentInMs > 10) {
+      const formattedTimeSpent = timeSpentInMs.toFixed(2);
+      this.logger.warn(
+        `The module "${opaqueToken.module}" is taking ${formattedTimeSpent}ms to serialize, this may be caused by larger objects statically assigned to the module. More details: https://github.com/nestjs/nest/issues/12738`,
+      );
+    }
+
+    return this.hashString(opaqueTokenString);
+  }
+
+  public getStaticModuleToken(moduleId: string, moduleName: string): string {
+    const key = `${moduleId}_${moduleName}`;
+    if (this.moduleTokenCache.has(key)) {
+      return this.moduleTokenCache.get(key);
+    }
+
+    const hash = this.hashString(key);
+    this.moduleTokenCache.set(key, hash);
+    return hash;
+  }
+
+  public getStringifiedOpaqueToken(opaqueToken: object | undefined): string {
+    // Uses safeStringify instead of JSON.stringify to support circular dynamic modules
+    // The replacer function is also required in order to obtain real class names
+    // instead of the unified "Function" key
+    return opaqueToken ? stringify(opaqueToken, this.replacer) : '';
+  }
+
+  public getModuleId(metatype: Type<unknown>): string {
+    let moduleId = this.moduleIdsCache.get(metatype);
+    if (moduleId) {
+      return moduleId;
+    }
+    moduleId = randomStringGenerator();
+    this.moduleIdsCache.set(metatype, moduleId);
+    return moduleId;
+  }
+
+  public getModuleName(metatype: Type<any>): string {
+    return metatype.name;
+  }
+
+  private hashString(value: string): string {
+    return createHash('sha256').update(value).digest('hex');
+  }
+
+  private replacer(key: string, value: any) {
+    if (isFunction(value)) {
+      const funcAsString = value.toString();
+      const isClass = funcAsString.slice(0, CLASS_STR_LEN) === CLASS_STR;
+      if (isClass) {
+        return value.name;
+      }
+      return funcAsString;
+    }
+    if (isSymbol(value)) {
+      return value.toString();
+    }
+    return value;
+  }
+}
diff --git a/packages/core/injector/module.ts b/packages/core/injector/module.ts
index 807e20499..634377544 100644
--- a/packages/core/injector/module.ts
+++ b/packages/core/injector/module.ts
@@ -653,12 +653,7 @@ export class Module {
 
   private generateUuid(): string {
     const prefix = 'M_';
-    const key = this.token
-      ? this.token.includes(':')
-        ? this.token.split(':')[1]
-        : this.token
-      : this.name;
-
+    const key = this.name?.toString() ?? this.token?.toString();
     return key ? UuidFactory.get(`${prefix}_${key}`) : randomStringGenerator();
   }
 }
diff --git a/packages/core/injector/opaque-key-factory/by-reference-module-opaque-key-factory.ts b/packages/core/injector/opaque-key-factory/by-reference-module-opaque-key-factory.ts
deleted file mode 100644
index a5721fb32..000000000
--- a/packages/core/injector/opaque-key-factory/by-reference-module-opaque-key-factory.ts
+++ /dev/null
@@ -1,63 +0,0 @@
-import { DynamicModule } from '@nestjs/common/interfaces/modules/dynamic-module.interface';
-import { ForwardReference } from '@nestjs/common/interfaces/modules/forward-reference.interface';
-import { Type } from '@nestjs/common/interfaces/type.interface';
-import { randomStringGenerator } from '@nestjs/common/utils/random-string-generator.util';
-import { createHash } from 'crypto';
-import { ModuleOpaqueKeyFactory } from './interfaces/module-opaque-key-factory.interface';
-
-const K_MODULE_ID = Symbol('K_MODULE_ID');
-
-export class ByReferenceModuleOpaqueKeyFactory
-  implements ModuleOpaqueKeyFactory
-{
-  private readonly keyGenerationStrategy: 'random' | 'shallow';
-
-  constructor(options?: { keyGenerationStrategy: 'random' | 'shallow' }) {
-    this.keyGenerationStrategy = options?.keyGenerationStrategy ?? 'random';
-  }
-
-  public createForStatic(
-    moduleCls: Type,
-    originalRef: Type | ForwardReference = moduleCls,
-  ): string {
-    return this.getOrCreateModuleId(moduleCls, undefined, originalRef);
-  }
-
-  public createForDynamic(
-    moduleCls: Type<unknown>,
-    dynamicMetadata: Omit<DynamicModule, 'module'>,
-    originalRef: DynamicModule | ForwardReference,
-  ): string {
-    return this.getOrCreateModuleId(moduleCls, dynamicMetadata, originalRef);
-  }
-
-  private getOrCreateModuleId(
-    moduleCls: Type<unknown>,
-    dynamicMetadata: Partial<DynamicModule> | undefined,
-    originalRef: Type | DynamicModule | ForwardReference,
-  ): string {
-    if (originalRef[K_MODULE_ID]) {
-      return originalRef[K_MODULE_ID];
-    }
-
-    let moduleId: string;
-    if (this.keyGenerationStrategy === 'random') {
-      moduleId = this.generateRandomString();
-    } else {
-      moduleId = dynamicMetadata
-        ? `${this.generateRandomString()}:${this.hashString(moduleCls.name + JSON.stringify(dynamicMetadata))}`
-        : `${this.generateRandomString()}:${this.hashString(moduleCls.toString())}`;
-    }
-
-    originalRef[K_MODULE_ID] = moduleId;
-    return moduleId;
-  }
-
-  private hashString(value: string): string {
-    return createHash('sha256').update(value).digest('hex');
-  }
-
-  private generateRandomString(): string {
-    return randomStringGenerator();
-  }
-}
diff --git a/packages/core/injector/opaque-key-factory/interfaces/module-opaque-key-factory.interface.ts b/packages/core/injector/opaque-key-factory/interfaces/module-opaque-key-factory.interface.ts
deleted file mode 100644
index 1b58a5fff..000000000
--- a/packages/core/injector/opaque-key-factory/interfaces/module-opaque-key-factory.interface.ts
+++ /dev/null
@@ -1,26 +0,0 @@
-import { DynamicModule } from '@nestjs/common/interfaces/modules/dynamic-module.interface';
-import { ForwardReference } from '@nestjs/common/interfaces/modules/forward-reference.interface';
-import { Type } from '@nestjs/common/interfaces/type.interface';
-
-export interface ModuleOpaqueKeyFactory {
-  /**
-   * Creates a unique opaque key for the given static module.
-   * @param moduleCls A static module class.
-   * @param originalRef Original object reference. In most cases, it's the same as `moduleCls`.
-   */
-  createForStatic(
-    moduleCls: Type,
-    originalRef: Type | ForwardReference,
-  ): string;
-  /**
-   * Creates a unique opaque key for the given dynamic module.
-   * @param moduleCls  A dynamic module class reference.
-   * @param dynamicMetadata Dynamic module metadata.
-   * @param originalRef Original object reference.
-   */
-  createForDynamic(
-    moduleCls: Type<unknown>,
-    dynamicMetadata: Omit<DynamicModule, 'module'>,
-    originalRef: DynamicModule | ForwardReference,
-  ): string;
-}
diff --git a/packages/core/nest-application-context.ts b/packages/core/nest-application-context.ts
index 63543231c..eacd82ec2 100644
--- a/packages/core/nest-application-context.ts
+++ b/packages/core/nest-application-context.ts
@@ -9,7 +9,6 @@ import {
   Abstract,
   DynamicModule,
   GetOrResolveOptions,
-  SelectOptions,
   Type,
 } from '@nestjs/common/interfaces';
 import { NestApplicationContextOptions } from '@nestjs/common/interfaces/nest-application-context-options.interface';
@@ -51,7 +50,7 @@ export class NestApplicationContext<
 
   private shouldFlushLogsOnOverride = false;
   private readonly activeShutdownSignals = new Array<string>();
-  private readonly moduleCompiler: ModuleCompiler;
+  private readonly moduleCompiler = new ModuleCompiler();
   private shutdownCleanupRef?: (...args: unknown[]) => unknown;
   private _instanceLinksHost: InstanceLinksHost;
   private _moduleRefsForHooksByDistance?: Array<Module>;
@@ -71,7 +70,6 @@ export class NestApplicationContext<
   ) {
     super();
     this.injector = new Injector();
-    this.moduleCompiler = container.getModuleCompiler();
 
     if (this.appOptions.preview) {
       this.printInPreviewModeWarning();
@@ -89,7 +87,6 @@ export class NestApplicationContext<
    */
   public select<T>(
     moduleType: Type<T> | DynamicModule,
-    selectOptions?: SelectOptions,
   ): INestApplicationContext {
     const modulesContainer = this.container.getModules();
     const contextModuleCtor = this.contextModule.metatype;
@@ -98,30 +95,15 @@ export class NestApplicationContext<
     const moduleTokenFactory = this.container.getModuleTokenFactory();
     const { type, dynamicMetadata } =
       this.moduleCompiler.extractMetadata(moduleType);
-    const token = dynamicMetadata
-      ? moduleTokenFactory.createForDynamic(
-          type,
-          dynamicMetadata,
-          moduleType as DynamicModule,
-        )
-      : moduleTokenFactory.createForStatic(type, moduleType as Type);
+    const token = moduleTokenFactory.create(type, dynamicMetadata);
 
     const selectedModule = modulesContainer.get(token);
     if (!selectedModule) {
       throw new UnknownModuleException(type.name);
     }
-
-    const options =
-      typeof selectOptions?.abortOnError !== 'undefined'
-        ? {
-            ...this.appOptions,
-            ...selectOptions,
-          }
-        : this.appOptions;
-
     return new NestApplicationContext(
       this.container,
-      options,
+      this.appOptions,
       selectedModule,
       scope,
     );
@@ -402,10 +384,7 @@ export class NestApplicationContext<
    * modules and its children.
    */
   protected async callDestroyHook(): Promise<void> {
-    const modulesSortedByDistance = [
-      ...this.getModulesToTriggerHooksOn(),
-    ].reverse();
-
+    const modulesSortedByDistance = this.getModulesToTriggerHooksOn();
     for (const module of modulesSortedByDistance) {
       await callModuleDestroyHook(module);
     }
diff --git a/packages/core/nest-factory.ts b/packages/core/nest-factory.ts
index f3cb93bcd..b40ce37ba 100644
--- a/packages/core/nest-factory.ts
+++ b/packages/core/nest-factory.ts
@@ -3,9 +3,6 @@ import {
   INestApplication,
   INestApplicationContext,
   INestMicroservice,
-  DynamicModule,
-  ForwardReference,
-  Type,
 } from '@nestjs/common';
 import { NestMicroserviceOptions } from '@nestjs/common/interfaces/microservices/nest-microservice-options.interface';
 import { NestApplicationContextOptions } from '@nestjs/common/interfaces/nest-application-context-options.interface';
@@ -30,12 +27,6 @@ import { NestApplication } from './nest-application';
 import { NestApplicationContext } from './nest-application-context';
 import { DependenciesScanner } from './scanner';
 
-type IEntryNestModule =
-  | Type<any>
-  | DynamicModule
-  | ForwardReference
-  | Promise<IEntryNestModule>;
-
 /**
  * @publicApi
  */
@@ -56,7 +47,7 @@ export class NestFactoryStatic {
    * contains a reference to the NestApplication instance.
    */
   public async create<T extends INestApplication = INestApplication>(
-    module: IEntryNestModule,
+    module: any,
     options?: NestApplicationOptions,
   ): Promise<T>;
   /**
@@ -71,12 +62,12 @@ export class NestFactoryStatic {
    * contains a reference to the NestApplication instance.
    */
   public async create<T extends INestApplication = INestApplication>(
-    module: IEntryNestModule,
+    module: any,
     httpAdapter: AbstractHttpAdapter,
     options?: NestApplicationOptions,
   ): Promise<T>;
   public async create<T extends INestApplication = INestApplication>(
-    moduleCls: IEntryNestModule,
+    moduleCls: any,
     serverOrOptions?: AbstractHttpAdapter | NestApplicationOptions,
     options?: NestApplicationOptions,
   ): Promise<T> {
@@ -121,7 +112,7 @@ export class NestFactoryStatic {
    * contains a reference to the NestMicroservice instance.
    */
   public async createMicroservice<T extends object>(
-    moduleCls: IEntryNestModule,
+    moduleCls: any,
     options?: NestMicroserviceOptions & T,
   ): Promise<INestMicroservice> {
     const { NestMicroservice } = loadPackage(
@@ -163,7 +154,7 @@ export class NestFactoryStatic {
    * contains a reference to the NestApplicationContext instance.
    */
   public async createApplicationContext(
-    moduleCls: IEntryNestModule,
+    moduleCls: any,
     options?: NestApplicationContextOptions,
   ): Promise<INestApplicationContext> {
     const applicationConfig = new ApplicationConfig();
diff --git a/packages/core/package.json b/packages/core/package.json
index 1fbfd815a..55dd9ec14 100644
--- a/packages/core/package.json
+++ b/packages/core/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/core",
-  "version": "10.4.7",
+  "version": "10.4.6",
   "description": "Nest - modern, fast, powerful node.js web framework (@core)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -36,7 +36,7 @@
     "uid": "2.0.2"
   },
   "devDependencies": {
-    "@nestjs/common": "10.4.7"
+    "@nestjs/common": "10.4.6"
   },
   "peerDependencies": {
     "@nestjs/common": "^10.0.0",
diff --git a/packages/core/scanner.ts b/packages/core/scanner.ts
index ac46a1813..8f334992e 100644
--- a/packages/core/scanner.ts
+++ b/packages/core/scanner.ts
@@ -92,10 +92,10 @@ export class DependenciesScanner {
       overrides: options?.overrides,
     });
     await this.scanModulesForDependencies();
+    this.calculateModulesDistance();
+
     this.addScopedEnhancersMetadata();
     this.container.bindGlobalScope();
-
-    this.calculateModulesDistance();
   }
 
   public async scanForModules({
@@ -389,12 +389,12 @@ export class DependenciesScanner {
     // Skip "InternalCoreModule" from calculating distance
     modulesGenerator.next();
 
-    const calculateDistance = (moduleRef: Module, distance = 1, modulesStack = []) => {
-      const localModulesStack = [...modulesStack];
-      if (!moduleRef || localModulesStack.includes(moduleRef)) {
+    const modulesStack = [];
+    const calculateDistance = (moduleRef: Module, distance = 1) => {
+      if (!moduleRef || modulesStack.includes(moduleRef)) {
         return;
       }
-      localModulesStack.push(moduleRef);
+      modulesStack.push(moduleRef);
 
       const moduleImports = moduleRef.imports;
       moduleImports.forEach(importedModuleRef => {
@@ -402,7 +402,7 @@ export class DependenciesScanner {
           if (distance > importedModuleRef.distance) {
             importedModuleRef.distance = distance;
           }
-          calculateDistance(importedModuleRef, distance + 1, localModulesStack);
+          calculateDistance(importedModuleRef, distance + 1);
         }
       });
     };
diff --git a/packages/core/services/reflector.service.ts b/packages/core/services/reflector.service.ts
index badd406f6..8de84dd73 100644
--- a/packages/core/services/reflector.service.ts
+++ b/packages/core/services/reflector.service.ts
@@ -127,10 +127,14 @@ export class Reflector {
    * @param targets context (decorated objects) to retrieve metadata from
    *
    */
-  public getAll<TParam = any, TTransformed = TParam>(
-    decorator: ReflectableDecorator<TParam, TTransformed>,
+  public getAll<T extends ReflectableDecorator<any>>(
+    decorator: T,
     targets: (Type<any> | Function)[],
-  ): TTransformed extends Array<any> ? TTransformed : TTransformed[];
+  ): T extends ReflectableDecorator<infer R>
+    ? R extends Array<any>
+      ? R
+      : R[]
+    : unknown;
   /**
    * Retrieve metadata for a specified key for a specified set of targets.
    *
@@ -165,14 +169,10 @@ export class Reflector {
    * @param targets context (decorated objects) to retrieve metadata from
    *
    */
-  public getAllAndMerge<TParam = any, TTransformed = TParam>(
-    decorator: ReflectableDecorator<TParam, TTransformed>,
+  public getAllAndMerge<T extends ReflectableDecorator<any>>(
+    decorator: T,
     targets: (Type<any> | Function)[],
-  ): TTransformed extends Array<any>
-    ? TTransformed
-    : TTransformed extends object
-      ? TTransformed
-      : TTransformed[];
+  ): T extends ReflectableDecorator<infer R> ? R : unknown;
   /**
    * Retrieve metadata for a specified key for a specified set of targets and merge results.
    *
@@ -203,13 +203,6 @@ export class Reflector {
     if (isEmpty(metadataCollection)) {
       return metadataCollection as TResult;
     }
-    if (metadataCollection.length === 1) {
-      const value = metadataCollection[0];
-      if (isObject(value)) {
-        return value as TResult;
-      }
-      return metadataCollection as TResult;
-    }
     return metadataCollection.reduce((a, b) => {
       if (Array.isArray(a)) {
         return a.concat(b);
@@ -231,10 +224,10 @@ export class Reflector {
    * @param targets context (decorated objects) to retrieve metadata from
    *
    */
-  public getAllAndOverride<TParam = any, TTransformed = TParam>(
-    decorator: ReflectableDecorator<TParam, TTransformed>,
+  public getAllAndOverride<T extends ReflectableDecorator<any>>(
+    decorator: T,
     targets: (Type<any> | Function)[],
-  ): TTransformed;
+  ): T extends ReflectableDecorator<infer R> ? R : unknown;
   /**
    * Retrieve metadata for a specified key for a specified set of targets and return a first not undefined value.
    *
diff --git a/packages/microservices/client/client-rmq.ts b/packages/microservices/client/client-rmq.ts
index 653e6f432..5c8824f57 100644
--- a/packages/microservices/client/client-rmq.ts
+++ b/packages/microservices/client/client-rmq.ts
@@ -192,15 +192,6 @@ export class ClientRMQ extends ClientProxy {
     if (!this.noAssert) {
       await channel.assertQueue(this.queue, this.queueOptions);
     }
-
-    if (this.options.exchange && this.options.routingKey) {
-      await channel.bindQueue(
-        this.queue,
-        this.options.exchange,
-        this.options.routingKey,
-      );
-    }
-
     await channel.prefetch(prefetchCount, isGlobalPrefetchCount);
     await this.consumeChannel(channel);
     resolve();
diff --git a/packages/microservices/constants.ts b/packages/microservices/constants.ts
index 35b6af94e..c358776dd 100644
--- a/packages/microservices/constants.ts
+++ b/packages/microservices/constants.ts
@@ -33,7 +33,7 @@ export const PARAM_ARGS_METADATA = ROUTE_ARGS_METADATA;
 export const REQUEST_PATTERN_METADATA = 'microservices:request_pattern';
 export const REPLY_PATTERN_METADATA = 'microservices:reply_pattern';
 
-export const RQM_DEFAULT_QUEUE = '';
+export const RQM_DEFAULT_QUEUE = 'default';
 export const RQM_DEFAULT_PREFETCH_COUNT = 0;
 export const RQM_DEFAULT_IS_GLOBAL_PREFETCH_COUNT = false;
 export const RQM_DEFAULT_QUEUE_OPTIONS = {};
@@ -71,5 +71,3 @@ export const EADDRINUSE = 'EADDRINUSE';
 
 export const CONNECTION_FAILED_MESSAGE =
   'Connection to transport failed. Trying to reconnect...';
-
-export const NATS_DEFAULT_GRACE_PERIOD = 10000;
diff --git a/packages/microservices/errors/max-packet-length-exceeded.exception.ts b/packages/microservices/errors/max-packet-length-exceeded.exception.ts
deleted file mode 100644
index 5d2ccd3c7..000000000
--- a/packages/microservices/errors/max-packet-length-exceeded.exception.ts
+++ /dev/null
@@ -1,8 +0,0 @@
-/**
- * @publicApi
- */
-export class MaxPacketLengthExceededException extends Error {
-  constructor(length: number) {
-    super(`The packet length (${length}) exceeds the maximum allowed length`);
-  }
-}
diff --git a/packages/microservices/exceptions/base-rpc-exception-filter.ts b/packages/microservices/exceptions/base-rpc-exception-filter.ts
index 849bc9ac2..837330fac 100644
--- a/packages/microservices/exceptions/base-rpc-exception-filter.ts
+++ b/packages/microservices/exceptions/base-rpc-exception-filter.ts
@@ -26,8 +26,11 @@ export class BaseRpcExceptionFilter<T = any, R = any>
   public handleUnknownError(exception: T, status: string) {
     const errorMessage = MESSAGES.UNKNOWN_EXCEPTION_MESSAGE;
 
+    const loggerArgs = this.isError(exception)
+      ? [exception.message, exception.stack]
+      : [exception];
     const logger = BaseRpcExceptionFilter.logger;
-    logger.error.apply(logger, [exception]);
+    logger.error.apply(logger, loggerArgs as any);
 
     return _throw(() => ({ status, message: errorMessage }));
   }
diff --git a/packages/microservices/external/nats-client.interface.ts b/packages/microservices/external/nats-client.interface.ts
index 931f1233c..637883a42 100644
--- a/packages/microservices/external/nats-client.interface.ts
+++ b/packages/microservices/external/nats-client.interface.ts
@@ -50,7 +50,7 @@ interface Sub<T> extends AsyncIterable<T> {
   getMax(): number | undefined;
 }
 
-export declare type Subscription = Sub<NatsMsg>;
+declare type Subscription = Sub<NatsMsg>;
 
 declare enum Events {
   Disconnect = 'disconnect',
diff --git a/packages/microservices/helpers/json-socket.ts b/packages/microservices/helpers/json-socket.ts
index 574d5f267..5d017f9b5 100644
--- a/packages/microservices/helpers/json-socket.ts
+++ b/packages/microservices/helpers/json-socket.ts
@@ -1,11 +1,8 @@
 import { Buffer } from 'buffer';
 import { StringDecoder } from 'string_decoder';
 import { CorruptedPacketLengthException } from '../errors/corrupted-packet-length.exception';
-import { MaxPacketLengthExceededException } from '../errors/max-packet-length-exceeded.exception';
 import { TcpSocket } from './tcp-socket';
 
-const MAX_BUFFER_SIZE = (512 * 1024 * 1024) / 4; // 512 MBs in characters with 4 bytes per character (32-bit)
-
 export class JsonSocket extends TcpSocket {
   private contentLength: number | null = null;
   private buffer = '';
@@ -23,12 +20,7 @@ export class JsonSocket extends TcpSocket {
       : dataRaw;
     this.buffer += data;
 
-    if (this.buffer.length > MAX_BUFFER_SIZE) {
-      this.buffer = '';
-      throw new MaxPacketLengthExceededException(this.buffer.length);
-    }
-
-    if (this.contentLength === null) {
+    if (this.contentLength == null) {
       const i = this.buffer.indexOf(this.delimiter);
       /**
        * Check if the buffer has the delimiter (#),
diff --git a/packages/microservices/interfaces/microservice-configuration.interface.ts b/packages/microservices/interfaces/microservice-configuration.interface.ts
index 55539f1cf..b5850e1b2 100644
--- a/packages/microservices/interfaces/microservice-configuration.interface.ts
+++ b/packages/microservices/interfaces/microservice-configuration.interface.ts
@@ -1,4 +1,4 @@
-import { FactoryProvider, InjectionToken, Type } from '@nestjs/common';
+import { Type } from '@nestjs/common';
 import { ConnectionOptions } from 'tls';
 import { Transport } from '../enums/transport.enum';
 import { ChannelOptions } from '../external/grpc-options.interface';
@@ -32,16 +32,6 @@ export type MicroserviceOptions =
   | KafkaOptions
   | CustomStrategy;
 
-export type AsyncMicroserviceOptions = {
-  inject: InjectionToken[];
-  useFactory: (...args: any[]) => MicroserviceOptions;
-};
-
-export type AsyncOptions<T extends object> = {
-  inject: InjectionToken[];
-  useFactory: (...args: any[]) => T;
-};
-
 /**
  * @publicApi
  */
@@ -203,8 +193,6 @@ export interface NatsOptions {
     token?: string;
     yieldTime?: number;
     tokenHandler?: any;
-    gracefulShutdown?: boolean;
-    gracePeriod?: number;
     [key: string]: any;
   };
 }
@@ -221,8 +209,6 @@ export interface RmqOptions {
     isGlobalPrefetchCount?: boolean;
     queueOptions?: AmqplibQueueOptions;
     socketOptions?: AmqpConnectionManagerSocketOptions;
-    exchange?: string;
-    routingKey?: string;
     noAck?: boolean;
     consumerTag?: string;
     serializer?: Serializer;
diff --git a/packages/microservices/listener-metadata-explorer.ts b/packages/microservices/listener-metadata-explorer.ts
index 721c23670..faa98b71b 100644
--- a/packages/microservices/listener-metadata-explorer.ts
+++ b/packages/microservices/listener-metadata-explorer.ts
@@ -39,36 +39,25 @@ export class ListenerMetadataExplorer {
     const instancePrototype = Object.getPrototypeOf(instance);
     return this.metadataScanner
       .getAllMethodNames(instancePrototype)
-      .map(method =>
-        this.exploreMethodMetadata(instance, instancePrototype, method),
-      )
+      .map(method => this.exploreMethodMetadata(instancePrototype, method))
       .filter(metadata => metadata);
   }
 
   public exploreMethodMetadata(
-    instance: Controller,
     instancePrototype: object,
     methodKey: string,
   ): EventOrMessageListenerDefinition {
-    const prototypeCallback = instancePrototype[methodKey];
+    const targetCallback = instancePrototype[methodKey];
     const handlerType = Reflect.getMetadata(
       PATTERN_HANDLER_METADATA,
-      prototypeCallback,
+      targetCallback,
     );
     if (isUndefined(handlerType)) {
       return;
     }
-    const patterns = Reflect.getMetadata(PATTERN_METADATA, prototypeCallback);
-    const transport = Reflect.getMetadata(
-      TRANSPORT_METADATA,
-      prototypeCallback,
-    );
-    const extras = Reflect.getMetadata(
-      PATTERN_EXTRAS_METADATA,
-      prototypeCallback,
-    );
-
-    const targetCallback = instance[methodKey];
+    const patterns = Reflect.getMetadata(PATTERN_METADATA, targetCallback);
+    const transport = Reflect.getMetadata(TRANSPORT_METADATA, targetCallback);
+    const extras = Reflect.getMetadata(PATTERN_EXTRAS_METADATA, targetCallback);
     return {
       methodKey,
       targetCallback,
diff --git a/packages/microservices/nest-microservice.ts b/packages/microservices/nest-microservice.ts
index fd9c7aee6..7b0930e69 100644
--- a/packages/microservices/nest-microservice.ts
+++ b/packages/microservices/nest-microservice.ts
@@ -17,10 +17,7 @@ import { GraphInspector } from '@nestjs/core/inspector/graph-inspector';
 import { NestApplicationContext } from '@nestjs/core/nest-application-context';
 import { Transport } from './enums/transport.enum';
 import { CustomTransportStrategy } from './interfaces/custom-transport-strategy.interface';
-import {
-  AsyncMicroserviceOptions,
-  MicroserviceOptions,
-} from './interfaces/microservice-configuration.interface';
+import { MicroserviceOptions } from './interfaces/microservice-configuration.interface';
 import { MicroservicesModule } from './microservices-module';
 import { Server } from './server/server';
 import { ServerFactory } from './server/server-factory';
@@ -46,8 +43,7 @@ export class NestMicroservice
 
   constructor(
     container: NestContainer,
-    config: NestMicroserviceOptions &
-      (MicroserviceOptions | AsyncMicroserviceOptions) = {},
+    config: NestMicroserviceOptions & MicroserviceOptions = {},
     private readonly graphInspector: GraphInspector,
     private readonly applicationConfig: ApplicationConfig,
   ) {
@@ -64,22 +60,12 @@ export class NestMicroservice
     this.selectContextModule();
   }
 
-  public createServer(
-    config: NestMicroserviceOptions &
-      (MicroserviceOptions | AsyncMicroserviceOptions),
-  ) {
+  public createServer(config: NestMicroserviceOptions & MicroserviceOptions) {
     try {
-      if ('useFactory' in config) {
-        const args = config.inject?.map(token =>
-          this.get(token, { strict: false }),
-        );
-        this.microserviceConfig = config.useFactory(...args);
-      } else {
-        this.microserviceConfig = {
-          transport: Transport.TCP,
-          ...config,
-        } as any;
-      }
+      this.microserviceConfig = {
+        transport: Transport.TCP,
+        ...config,
+      } as any;
       const { strategy } = config as any;
       this.server = strategy
         ? strategy
diff --git a/packages/microservices/package.json b/packages/microservices/package.json
index 4201b5261..4b903ef82 100644
--- a/packages/microservices/package.json
+++ b/packages/microservices/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/microservices",
-  "version": "10.4.7",
+  "version": "10.4.6",
   "description": "Nest - modern, fast, powerful node.js web framework (@microservices)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -22,8 +22,8 @@
     "tslib": "2.7.0"
   },
   "devDependencies": {
-    "@nestjs/common": "10.4.7",
-    "@nestjs/core": "10.4.7"
+    "@nestjs/common": "10.4.6",
+    "@nestjs/core": "10.4.6"
   },
   "peerDependencies": {
     "@grpc/grpc-js": "*",
diff --git a/packages/microservices/server/server-grpc.ts b/packages/microservices/server/server-grpc.ts
index c503e4805..f27e0e721 100644
--- a/packages/microservices/server/server-grpc.ts
+++ b/packages/microservices/server/server-grpc.ts
@@ -84,6 +84,7 @@ export class ServerGrpc extends Server implements CustomTransportStrategy {
 
   public async start(callback?: () => void) {
     await this.bindEvents();
+    this.grpcClient.start();
     callback();
   }
 
@@ -596,7 +597,7 @@ export class ServerGrpc extends Server implements CustomTransportStrategy {
   private async createServices(grpcPkg: any, packageName: string) {
     if (!grpcPkg) {
       const invalidPackageError = new InvalidGrpcPackageException(packageName);
-      this.logger.error(invalidPackageError);
+      this.logger.error(invalidPackageError.message, invalidPackageError.stack);
       throw invalidPackageError;
     }
 
diff --git a/packages/microservices/server/server-nats.ts b/packages/microservices/server/server-nats.ts
index a62b6c8d1..e9c376b12 100644
--- a/packages/microservices/server/server-nats.ts
+++ b/packages/microservices/server/server-nats.ts
@@ -1,17 +1,9 @@
 import { isUndefined, isObject } from '@nestjs/common/utils/shared.utils';
-import {
-  NATS_DEFAULT_GRACE_PERIOD,
-  NATS_DEFAULT_URL,
-  NO_MESSAGE_HANDLER,
-} from '../constants';
+import { NATS_DEFAULT_URL, NO_MESSAGE_HANDLER } from '../constants';
 import { NatsContext } from '../ctx-host/nats.context';
 import { NatsRequestJSONDeserializer } from '../deserializers/nats-request-json.deserializer';
 import { Transport } from '../enums';
-import {
-  Client,
-  NatsMsg,
-  Subscription,
-} from '../external/nats-client.interface';
+import { Client, NatsMsg } from '../external/nats-client.interface';
 import { CustomTransportStrategy } from '../interfaces';
 import { NatsOptions } from '../interfaces/microservice-configuration.interface';
 import { IncomingRequest } from '../interfaces/packet.interface';
@@ -29,10 +21,6 @@ export class ServerNats extends Server implements CustomTransportStrategy {
 
   private natsClient: Client;
 
-  private readonly subscriptions: Subscription[] = [];
-
-  private readonly gracePeriod: number;
-
   constructor(private readonly options: NatsOptions['options']) {
     super();
 
@@ -40,10 +28,6 @@ export class ServerNats extends Server implements CustomTransportStrategy {
       require('nats'),
     );
 
-    this.gracePeriod =
-      this.getOptionsProp(this.options, 'gracePeriod') ||
-      NATS_DEFAULT_GRACE_PERIOD;
-
     this.initializeSerializer(options);
     this.initializeDeserializer(options);
   }
@@ -76,30 +60,12 @@ export class ServerNats extends Server implements CustomTransportStrategy {
       });
 
     const registeredPatterns = [...this.messageHandlers.keys()];
-    for (const channel of registeredPatterns) {
-      const sub = subscribe(channel);
-      this.subscriptions.push(sub);
-    }
-  }
-
-  private async waitForGracePeriod() {
-    await new Promise<void>(res => {
-      setTimeout(() => {
-        res();
-      }, this.gracePeriod);
-    });
+    registeredPatterns.forEach(channel => subscribe(channel));
   }
 
   public async close() {
-    if (this.natsClient) {
-      const graceful = this.getOptionsProp(this.options, 'gracefulShutdown');
-      if (graceful) {
-        this.subscriptions.forEach(sub => sub.unsubscribe());
-        await this.waitForGracePeriod();
-      }
-      await this.natsClient?.close();
-      this.natsClient = null;
-    }
+    await this.natsClient?.close();
+    this.natsClient = null;
   }
 
   public createNatsClient(): Promise<Client> {
diff --git a/packages/microservices/server/server-rmq.ts b/packages/microservices/server/server-rmq.ts
index 9d011a673..c0ea0bd8f 100644
--- a/packages/microservices/server/server-rmq.ts
+++ b/packages/microservices/server/server-rmq.ts
@@ -153,18 +153,6 @@ export class ServerRMQ extends Server implements CustomTransportStrategy {
     if (!this.noAssert) {
       await channel.assertQueue(this.queue, this.queueOptions);
     }
-
-    if (this.options.exchange && this.options.routingKey) {
-      await channel.assertExchange(this.options.exchange, 'topic', {
-        durable: true,
-      });
-      await channel.bindQueue(
-        this.queue,
-        this.options.exchange,
-        this.options.routingKey,
-      );
-    }
-
     await channel.prefetch(this.prefetchCount, this.isGlobalPrefetchCount);
     channel.consume(
       this.queue,
diff --git a/packages/microservices/server/server-tcp.ts b/packages/microservices/server/server-tcp.ts
index af9271b76..b76a21c11 100644
--- a/packages/microservices/server/server-tcp.ts
+++ b/packages/microservices/server/server-tcp.ts
@@ -43,10 +43,10 @@ export class ServerTCP extends Server implements CustomTransportStrategy {
 
   constructor(private readonly options: TcpOptions['options']) {
     super();
-    this.port = this.getOptionsProp(options, 'port', TCP_DEFAULT_PORT);
-    this.host = this.getOptionsProp(options, 'host', TCP_DEFAULT_HOST);
+    this.port = this.getOptionsProp(options, 'port') || TCP_DEFAULT_PORT;
+    this.host = this.getOptionsProp(options, 'host') || TCP_DEFAULT_HOST;
     this.socketClass =
-      this.getOptionsProp(options, 'socketClass', JsonSocket);
+      this.getOptionsProp(options, 'socketClass') || JsonSocket;
     this.tlsOptions = this.getOptionsProp(options, 'tlsOptions');
 
     this.init();
diff --git a/packages/platform-express/multer/multer/multer.utils.ts b/packages/platform-express/multer/multer/multer.utils.ts
index 62c1a7f10..9df215832 100644
--- a/packages/platform-express/multer/multer/multer.utils.ts
+++ b/packages/platform-express/multer/multer/multer.utils.ts
@@ -5,11 +5,7 @@ import {
 } from '@nestjs/common';
 import { multerExceptions, busboyExceptions } from './multer.constants';
 
-// Multer may add in a 'field' property to the error
-// https://github.com/expressjs/multer/blob/aa42bea6ac7d0cb8fcb279b15a7278cda805dc63/lib/multer-error.js#L19
-export function transformException(
-  error: (Error & { field?: string }) | undefined,
-) {
+export function transformException(error: Error | undefined) {
   if (!error || error instanceof HttpException) {
     return error;
   }
@@ -23,9 +19,6 @@ export function transformException(
     case multerExceptions.LIMIT_UNEXPECTED_FILE:
     case multerExceptions.LIMIT_PART_COUNT:
     case multerExceptions.MISSING_FIELD_NAME:
-      if (error.field) {
-        return new BadRequestException(`${error.message} - ${error.field}`);
-      }
       return new BadRequestException(error.message);
     case busboyExceptions.MULTIPART_BOUNDARY_NOT_FOUND:
       return new BadRequestException(error.message);
diff --git a/packages/platform-express/package.json b/packages/platform-express/package.json
index aec483b08..f9dde2036 100644
--- a/packages/platform-express/package.json
+++ b/packages/platform-express/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/platform-express",
-  "version": "10.4.7",
+  "version": "10.4.6",
   "description": "Nest - modern, fast, powerful node.js web framework (@platform-express)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -25,8 +25,8 @@
     "tslib": "2.7.0"
   },
   "devDependencies": {
-    "@nestjs/common": "10.4.7",
-    "@nestjs/core": "10.4.7"
+    "@nestjs/common": "10.4.6",
+    "@nestjs/core": "10.4.6"
   },
   "peerDependencies": {
     "@nestjs/common": "^10.0.0",
diff --git a/packages/platform-fastify/adapters/fastify-adapter.ts b/packages/platform-fastify/adapters/fastify-adapter.ts
index 619c21b0c..5345f3e3c 100644
--- a/packages/platform-fastify/adapters/fastify-adapter.ts
+++ b/packages/platform-fastify/adapters/fastify-adapter.ts
@@ -320,6 +320,34 @@ export class FastifyAdapter<
     return this.injectRouteOptions('SEARCH', ...args);
   }
 
+  public propfind(...args: any[]) {
+    return this.injectRouteOptions('PROPFIND', ...args);
+  }
+
+  public proppatch(...args: any[]) {
+    return this.injectRouteOptions('PROPPATCH', ...args);
+  }
+
+  public mkcol(...args: any[]) {
+    return this.injectRouteOptions('MKCOL', ...args);
+  }
+
+  public copy(...args: any[]) {
+    return this.injectRouteOptions('COPY', ...args);
+  }
+
+  public move(...args: any[]) {
+    return this.injectRouteOptions('MOVE', ...args);
+  }
+
+  public lock(...args: any[]) {
+    return this.injectRouteOptions('LOCK', ...args);
+  }
+
+  public unlock(...args: any[]) {
+    return this.injectRouteOptions('UNLOCK', ...args);
+  }
+
   public applyVersionFilter(
     handler: Function,
     version: VersionValue,
diff --git a/packages/platform-fastify/interfaces/external/fastify-static-options.interface.ts b/packages/platform-fastify/interfaces/external/fastify-static-options.interface.ts
index e4a434a35..6414a9ed9 100644
--- a/packages/platform-fastify/interfaces/external/fastify-static-options.interface.ts
+++ b/packages/platform-fastify/interfaces/external/fastify-static-options.interface.ts
@@ -3,16 +3,9 @@
  * @see https://github.com/fastify/fastify-static/blob/master/types/index.d.ts
  * @publicApi
  */
-import { RouteOptions, FastifyRequest, FastifyReply } from 'fastify';
+import { RouteOptions, FastifyRequest } from 'fastify';
 import { Stats } from 'fs';
 
-interface SetHeadersResponse {
-  getHeader: FastifyReply['getHeader'];
-  setHeader: FastifyReply['header'];
-  readonly filename: string;
-  statusCode: number;
-}
-
 interface ExtendedInformation {
   fileCount: number;
   totalFileCount: number;
@@ -40,22 +33,13 @@ interface ListRender {
 }
 
 interface ListOptions {
+  format: 'json' | 'html';
   names: string[];
+  render: ListRender;
   extendedFolderInfo?: boolean;
   jsonFormat?: 'names' | 'extended';
 }
 
-export interface ListOptionsJsonFormat extends ListOptions {
-  format: 'json';
-  // Required when the URL parameter `format=html` exists
-  render?: ListRender;
-}
-
-export interface ListOptionsHtmlFormat extends ListOptions {
-  format: 'html';
-  render: ListRender;
-}
-
 // Passed on to `send`
 interface SendOptions {
   acceptRanges?: boolean;
@@ -71,16 +55,16 @@ interface SendOptions {
 }
 
 export interface FastifyStaticOptions extends SendOptions {
-  root: string | string[] | URL | URL[];
+  root: string | string[];
   prefix?: string;
   prefixAvoidTrailingSlash?: boolean;
   serve?: boolean;
   decorateReply?: boolean;
   schemaHide?: boolean;
-  setHeaders?: (res: SetHeadersResponse, path: string, stat: Stats) => void;
+  setHeaders?: (...args: any[]) => void;
   redirect?: boolean;
   wildcard?: boolean;
-  list?: boolean | ListOptionsJsonFormat | ListOptionsHtmlFormat;
+  list?: boolean | ListOptions;
   allowedPath?: (
     pathName: string,
     root: string,
diff --git a/packages/platform-fastify/interfaces/external/fastify-view-options.interface.ts b/packages/platform-fastify/interfaces/external/fastify-view-options.interface.ts
index 7c1959aea..1956ccd1f 100644
--- a/packages/platform-fastify/interfaces/external/fastify-view-options.interface.ts
+++ b/packages/platform-fastify/interfaces/external/fastify-view-options.interface.ts
@@ -27,5 +27,4 @@ export interface FastifyViewOptions {
   root?: string;
   viewExt?: string;
   propertyName?: string;
-  asyncProperyName?: string;
 }
diff --git a/packages/platform-fastify/interfaces/nest-fastify-application.interface.ts b/packages/platform-fastify/interfaces/nest-fastify-application.interface.ts
index 97fd813a2..4ce780d0a 100644
--- a/packages/platform-fastify/interfaces/nest-fastify-application.interface.ts
+++ b/packages/platform-fastify/interfaces/nest-fastify-application.interface.ts
@@ -1,4 +1,4 @@
-import { HttpServer, INestApplication } from '@nestjs/common';
+import { INestApplication, HttpServer } from '@nestjs/common';
 import {
   FastifyBodyParser,
   FastifyInstance,
@@ -7,14 +7,14 @@ import {
   FastifyPluginCallback,
   FastifyPluginOptions,
   FastifyRegisterOptions,
-  FastifyReply,
   FastifyRequest,
+  FastifyReply,
   RawServerBase,
   RawServerDefault,
 } from 'fastify';
 import {
-  InjectOptions,
   Chain as LightMyRequestChain,
+  InjectOptions,
   Response as LightMyRequestResponse,
 } from 'light-my-request';
 import { FastifyStaticOptions, FastifyViewOptions } from './external';
@@ -98,19 +98,33 @@ export interface NestFastifyApplication<
     opts: FastifyListenOptions,
     callback?: (err: Error | null, address: string) => void,
   ): Promise<TServer>;
-  listen(opts?: FastifyListenOptions): Promise<TServer>;
+  listen(
+    opts?: FastifyListenOptions,
+  ): Promise<TServer>;
   listen(
     callback?: (err: Error | null, address: string) => void,
   ): Promise<TServer>;
+  /**
+   * @deprecated Variadic listen method is deprecated. Please use `.listen(optionsObject, callback)` instead. The variadic signature will be removed in `fastify@5`
+   * @see https://github.com/fastify/fastify/pull/3712
+   */
   listen(
     port: number | string,
     callback?: (err: Error | null, address: string) => void,
   ): Promise<TServer>;
+  /**
+   * @deprecated Variadic listen method is deprecated. Please use `.listen(optionsObject, callback)` instead. The variadic signature will be removed in `fastify@5`
+   * @see https://github.com/fastify/fastify/pull/3712
+   */
   listen(
     port: number | string,
     address: string,
     callback?: (err: Error | null, address: string) => void,
   ): Promise<TServer>;
+  /**
+   * @deprecated Variadic listen method is deprecated. Please use `.listen(optionsObject, callback)` instead. The variadic signature will be removed in `fastify@5`
+   * @see https://github.com/fastify/fastify/pull/3712
+   */
   listen(
     port: number | string,
     address: string,
diff --git a/packages/platform-fastify/package.json b/packages/platform-fastify/package.json
index 0102f3774..17e9c191c 100644
--- a/packages/platform-fastify/package.json
+++ b/packages/platform-fastify/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/platform-fastify",
-  "version": "10.4.7",
+  "version": "10.4.6",
   "description": "Nest - modern, fast, powerful node.js web framework (@platform-fastify)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -18,17 +18,17 @@
     "access": "public"
   },
   "dependencies": {
-    "@fastify/cors": "10.0.1",
-    "@fastify/formbody": "8.0.1",
-    "@fastify/middie": "9.0.2",
-    "fastify": "5.1.0",
-    "light-my-request": "6.3.0",
+    "@fastify/cors": "9.0.1",
+    "@fastify/formbody": "7.4.0",
+    "@fastify/middie": "8.3.3",
+    "fastify": "4.28.1",
+    "light-my-request": "6.1.0",
     "path-to-regexp": "3.3.0",
     "tslib": "2.7.0"
   },
   "peerDependencies": {
-    "@fastify/static": "^6.0.0 || ^7.0.0 || ^8.0.0",
-    "@fastify/view": "^7.0.0 || ^8.0.0 || ^9.0.0 || ^10.0.0",
+    "@fastify/static": "^6.0.0 || ^7.0.0",
+    "@fastify/view": "^7.0.0 || ^8.0.0",
     "@nestjs/common": "^10.0.0",
     "@nestjs/core": "^10.0.0"
   },
diff --git a/packages/platform-socket.io/package.json b/packages/platform-socket.io/package.json
index d1965e083..2c262ecfc 100644
--- a/packages/platform-socket.io/package.json
+++ b/packages/platform-socket.io/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/platform-socket.io",
-  "version": "10.4.7",
+  "version": "10.4.6",
   "description": "Nest - modern, fast, powerful node.js web framework (@platform-socket.io)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
diff --git a/packages/platform-ws/adapters/ws-adapter.ts b/packages/platform-ws/adapters/ws-adapter.ts
index f2fbcd4d3..a1fff0230 100644
--- a/packages/platform-ws/adapters/ws-adapter.ts
+++ b/packages/platform-ws/adapters/ws-adapter.ts
@@ -25,11 +25,6 @@ type HttpServerRegistryKey = number;
 type HttpServerRegistryEntry = any;
 type WsServerRegistryKey = number;
 type WsServerRegistryEntry = any[];
-type WsData = string | Buffer | ArrayBuffer | Buffer[];
-type WsMessageParser = (data: WsData) => { event: string; data: any } | void;
-type WsAdapterOptions = {
-  messageParser?: WsMessageParser;
-};
 
 const UNDERLYING_HTTP_SERVER_PORT = 0;
 
@@ -46,20 +41,10 @@ export class WsAdapter extends AbstractWsAdapter {
     WsServerRegistryKey,
     WsServerRegistryEntry
   >();
-  protected messageParser: WsMessageParser = data => {
-    return JSON.parse(data.toString());
-  };
 
-  constructor(
-    appOrHttpServer?: INestApplicationContext | any,
-    options?: WsAdapterOptions,
-  ) {
+  constructor(appOrHttpServer?: INestApplicationContext | any) {
     super(appOrHttpServer);
     wsPackage = loadPackage('ws', 'WsAdapter', () => require('ws'));
-
-    if (options?.messageParser) {
-      this.messageParser = options.messageParser;
-    }
   }
 
   public create(
@@ -153,10 +138,7 @@ export class WsAdapter extends AbstractWsAdapter {
     transform: (data: any) => Observable<any>,
   ): Observable<any> {
     try {
-      const message = this.messageParser(buffer.data);
-      if (!message) {
-        return EMPTY;
-      }
+      const message = JSON.parse(buffer.data);
       const messageHandler = handlersMap.get(message.event);
       const { callback } = messageHandler;
       return transform(callback(message.data, message.event));
@@ -197,10 +179,6 @@ export class WsAdapter extends AbstractWsAdapter {
     this.wsServersRegistry.clear();
   }
 
-  public setMessageParser(parser: WsMessageParser) {
-    this.messageParser = parser;
-  }
-
   protected ensureHttpServerExists(
     port: number,
     httpServer = http.createServer(),
diff --git a/packages/platform-ws/package.json b/packages/platform-ws/package.json
index 625c60bca..5fbb19832 100644
--- a/packages/platform-ws/package.json
+++ b/packages/platform-ws/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/platform-ws",
-  "version": "10.4.7",
+  "version": "10.4.6",
   "description": "Nest - modern, fast, powerful node.js web framework (@platform-ws)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
diff --git a/packages/testing/package.json b/packages/testing/package.json
index 38fcfad74..c6ad7aeb2 100644
--- a/packages/testing/package.json
+++ b/packages/testing/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/testing",
-  "version": "10.4.7",
+  "version": "10.4.6",
   "description": "Nest - modern, fast, powerful node.js web framework (@testing)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
diff --git a/packages/websockets/exceptions/base-ws-exception-filter.ts b/packages/websockets/exceptions/base-ws-exception-filter.ts
index 6f1b74dee..bcc48b0a6 100644
--- a/packages/websockets/exceptions/base-ws-exception-filter.ts
+++ b/packages/websockets/exceptions/base-ws-exception-filter.ts
@@ -46,6 +46,12 @@ export class BaseWsExceptionFilter<TError = any>
       message: MESSAGES.UNKNOWN_EXCEPTION_MESSAGE,
     });
 
+    if (this.isExceptionObject(exception)) {
+      return BaseWsExceptionFilter.logger.error(
+        exception.message,
+        exception.stack,
+      );
+    }
     return BaseWsExceptionFilter.logger.error(exception);
   }
 
diff --git a/packages/websockets/package.json b/packages/websockets/package.json
index a153209b1..c6043ac8f 100644
--- a/packages/websockets/package.json
+++ b/packages/websockets/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/websockets",
-  "version": "10.4.7",
+  "version": "10.4.6",
   "description": "Nest - modern, fast, powerful node.js web framework (@websockets)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -18,8 +18,8 @@
     "tslib": "2.7.0"
   },
   "devDependencies": {
-    "@nestjs/common": "10.4.7",
-    "@nestjs/core": "10.4.7"
+    "@nestjs/common": "10.4.6",
+    "@nestjs/core": "10.4.6"
   },
   "peerDependencies": {
     "@nestjs/common": "^10.0.0",
diff --git a/sample/01-cats-app/src/common/pipes/validation.pipe.ts b/sample/01-cats-app/src/common/pipes/validation.pipe.ts
index 1a79ae214..9df091a88 100644
--- a/sample/01-cats-app/src/common/pipes/validation.pipe.ts
+++ b/sample/01-cats-app/src/common/pipes/validation.pipe.ts
@@ -5,7 +5,7 @@ import {
   PipeTransform,
   Type,
 } from '@nestjs/common';
-import { plainToInstance } from 'class-transformer';
+import { plainToClass } from 'class-transformer';
 import { validate } from 'class-validator';
 
 @Injectable()
@@ -15,7 +15,7 @@ export class ValidationPipe implements PipeTransform<any> {
     if (!metatype || !this.toValidate(metatype)) {
       return value;
     }
-    const object = plainToInstance(metatype, value);
+    const object = plainToClass(metatype, value);
     const errors = await validate(object);
     if (errors.length > 0) {
       throw new BadRequestException('Validation failed');
diff --git a/sample/10-fastify/src/common/pipes/validation.pipe.ts b/sample/10-fastify/src/common/pipes/validation.pipe.ts
index 1a79ae214..9df091a88 100644
--- a/sample/10-fastify/src/common/pipes/validation.pipe.ts
+++ b/sample/10-fastify/src/common/pipes/validation.pipe.ts
@@ -5,7 +5,7 @@ import {
   PipeTransform,
   Type,
 } from '@nestjs/common';
-import { plainToInstance } from 'class-transformer';
+import { plainToClass } from 'class-transformer';
 import { validate } from 'class-validator';
 
 @Injectable()
@@ -15,7 +15,7 @@ export class ValidationPipe implements PipeTransform<any> {
     if (!metatype || !this.toValidate(metatype)) {
       return value;
     }
-    const object = plainToInstance(metatype, value);
+    const object = plainToClass(metatype, value);
     const errors = await validate(object);
     if (errors.length > 0) {
       throw new BadRequestException('Validation failed');
