diff --git a/packages/api/src/publish.ts b/packages/api/src/publish.ts
index 9d87b280a..dc0ab089a 100644
--- a/packages/api/src/publish.ts
+++ b/packages/api/src/publish.ts
@@ -95,22 +95,20 @@ const debug = buildDebug('verdaccio:api:publish');
    */
 export default function publish(router: Router, auth: IAuth, storage: Storage): void {
   const can = allow(auth);
-  // publish (update manifest) v6
   router.put(
     '/:package',
     can('publish'),
     media(mime.getType('json')),
     expectJson,
-    publishPackageNext(storage)
+    publishPackage(storage)
   );
 
-  // unpublish a pacakge v6
   router.put(
     '/:package/-rev/:revision',
     can('unpublish'),
     media(mime.getType('json')),
     expectJson,
-    publishPackageNext(storage)
+    publishPackage(storage)
   );
 
   /**
@@ -121,7 +119,6 @@ export default function publish(router: Router, auth: IAuth, storage: Storage):
    * npm http fetch GET 304 http://localhost:4873/package-name?write=true 1076ms (from cache)
    * npm http fetch DELETE 201 http://localhost:4873/package-name/-rev/18-d8ebe3020bd4ac9c 22ms
    */
-  // v6
   router.delete(
     '/:package/-rev/:revision',
     can('unpublish'),
@@ -177,7 +174,7 @@ export default function publish(router: Router, auth: IAuth, storage: Storage):
   );
 }
 
-export function publishPackageNext(storage: Storage): any {
+export function publishPackage(storage: Storage): any {
   return async function (
     req: $RequestExtend,
     _res: $ResponseExtend,
diff --git a/packages/node-api/src/server.ts b/packages/node-api/src/server.ts
index f9987b97c..2ceebba60 100644
--- a/packages/node-api/src/server.ts
+++ b/packages/node-api/src/server.ts
@@ -155,7 +155,7 @@ export async function initServer(
           process.exitCode = 1;
         });
       function handleShutdownGracefully() {
-        logger.warn('received shutdown signal - closing server gracefully...');
+        logger.info('received shutdown signal - closing server gracefully...');
         serverFactory.close(() => {
           logger.info('server closed.');
           process.exit(0);
diff --git a/packages/store/jest.config.js b/packages/store/jest.config.js
index 535c138d4..b4b5ec7c9 100644
--- a/packages/store/jest.config.js
+++ b/packages/store/jest.config.js
@@ -4,9 +4,9 @@ module.exports = Object.assign({}, config, {
   coverageThreshold: {
     global: {
       // FIXME: increase to 90
-      branches: 55,
-      functions: 81,
-      lines: 71,
+      branches: 51,
+      functions: 69,
+      lines: 66,
     },
   },
 });
diff --git a/packages/store/src/storage.ts b/packages/store/src/storage.ts
index 51819d1e5..ef8ff30c3 100644
--- a/packages/store/src/storage.ts
+++ b/packages/store/src/storage.ts
@@ -103,11 +103,7 @@ class Storage {
    Function changes a package info from local storage and all uplinks with write access./
    Used storages: local (write)
    */
-  public async changePackageNext(
-    name: string,
-    metadata: Manifest,
-    revision: string
-  ): Promise<void> {
+  public async changePackage(name: string, metadata: Manifest, revision: string): Promise<void> {
     debug('change existing package for package %o revision %o', name, revision);
     debug(`change manifest tags for %o revision %s`, name, revision);
     if (
@@ -119,7 +115,7 @@ class Storage {
     }
 
     debug(`change manifest udapting manifest for %o`, name);
-    await this.updatePackageNext(name, async (localData: Manifest): Promise<Manifest> => {
+    await this.updatePackage(name, async (localData: Manifest): Promise<Manifest> => {
       // eslint-disable-next-line guard-for-in
       for (const version in localData.versions) {
         const incomingVersion = metadata.versions[version];
@@ -194,14 +190,11 @@ class Storage {
       throw err;
     }
 
-    const manifest = await this.updatePackageNext(
-      name,
-      async (data: Manifest): Promise<Manifest> => {
-        let newData: Manifest = { ...data };
-        delete data._attachments[filename];
-        return newData;
-      }
-    );
+    const manifest = await this.updatePackage(name, async (data: Manifest): Promise<Manifest> => {
+      let newData: Manifest = { ...data };
+      delete data._attachments[filename];
+      return newData;
+    });
 
     try {
       const storage: IPackageStorage = this.getPrivatePackageStorage(name);
@@ -879,7 +872,7 @@ class Storage {
    * @param tags list of dist-tags
    */
   public async mergeTagsNext(name: string, tags: MergeTags): Promise<Manifest> {
-    return await this.updatePackageNext(name, async (data: Manifest): Promise<Manifest> => {
+    return await this.updatePackage(name, async (data: Manifest): Promise<Manifest> => {
       let newData: Manifest = { ...data };
       for (const tag of Object.keys(tags)) {
         // this handle dist-tag rm command
@@ -922,14 +915,6 @@ class Storage {
     return uplink;
   }
 
-  public async updateLocalMetadata(pkgName: string) {
-    const storage = this.getPrivatePackageStorage(pkgName);
-
-    if (!storage) {
-      throw errorUtils.getNotFound();
-    }
-  }
-
   public async updateManifest(manifest: Manifest, options: UpdateManifestOptions): Promise<void> {
     if (isDeprecatedManifest(manifest)) {
       // if the manifest is deprecated, we need to update the package.json
@@ -968,14 +953,10 @@ class Storage {
     }
   }
 
-  // eslint-disable-next-line @typescript-eslint/no-unused-vars
-  private async deprecate(_body: Manifest, _options: PublishOptions): Promise<void> {
-    // // const storage: IPackageStorage = this.getPrivatePackageStorage(opname);
-
-    // if (typeof storage === 'undefined') {
-    //   throw errorUtils.getNotFound();
-    // }
-    throw errorUtils.getInternalError('no implementation ready for npm deprecate');
+  private async deprecate(manifest: Manifest, options: UpdateManifestOptions): Promise<void> {
+    const { name } = manifest;
+    debug('deprecating %s', name);
+    return this.changePackage(name, manifest, options.revision as string);
   }
 
   // eslint-disable-next-line @typescript-eslint/no-unused-vars
@@ -1253,7 +1234,7 @@ class Storage {
         try {
           debug('uploaded tarball %o for %o', filename, pkgName);
           // update the package metadata
-          await this.updatePackageNext(pkgName, async (data: Manifest): Promise<Manifest> => {
+          await this.updatePackage(pkgName, async (data: Manifest): Promise<Manifest> => {
             const newData: Manifest = { ...data };
             debug('added _attachment for %o', pkgName);
             newData._attachments[filename] = {
@@ -1301,7 +1282,7 @@ class Storage {
     tag: StringValue
   ): Promise<void> {
     debug(`add version %s package for %s`, version, name);
-    await this.updatePackageNext(name, async (data: Manifest): Promise<Manifest> => {
+    await this.updatePackage(name, async (data: Manifest): Promise<Manifest> => {
       // keep only one readme per package
       data.readme = metadata.readme;
       debug('%s` readme mutated', name);
@@ -1460,13 +1441,15 @@ class Storage {
 
     // this is intended in debug mode we do not want modify the store revision
     if (_.isNil(this.config._debug)) {
+      const prev = json._rev;
       json._rev = generateRevision(json._rev);
+      debug('revision metadata for %s updated from %s to %s', json.name, prev, json._rev);
     }
 
     return json;
   }
 
-  private async writePackageNext(name: string, json: Manifest): Promise<void> {
+  private async writePackage(name: string, json: Manifest): Promise<void> {
     const storage: any = this.getPrivatePackageStorage(name);
     if (_.isNil(storage)) {
       // TODO: replace here 500 error
@@ -1481,7 +1464,7 @@ class Storage {
    * @param {*} callback callback that gets invoked after it's all updated
    * @return {Function}
    */
-  private async updatePackageNext(
+  private async updatePackage(
     name: string,
     updateHandler: (manifest: Manifest) => Promise<Manifest>
   ): Promise<Manifest> {
@@ -1495,7 +1478,7 @@ class Storage {
     const updatedManifest: Manifest = await storage.updatePackage(name, updateHandler);
     // after correctly updated write to the storage
     try {
-      await this.writePackageNext(name, normalizePackage(updatedManifest));
+      await this.writePackage(name, normalizePackage(updatedManifest));
       return updatedManifest;
     } catch (err: any) {
       if (err.code === resourceNotAvailable) {
@@ -1913,7 +1896,7 @@ class Storage {
 
     if (change) {
       debug('updating package info %o', name);
-      await this.writePackageNext(name, cacheManifest);
+      await this.writePackage(name, cacheManifest);
       return cacheManifest;
     } else {
       return cacheManifest;
diff --git a/packages/tools/helpers/jest.config.js b/packages/tools/helpers/jest.config.js
index a8bfe6885..766313f2c 100644
--- a/packages/tools/helpers/jest.config.js
+++ b/packages/tools/helpers/jest.config.js
@@ -4,7 +4,7 @@ module.exports = Object.assign({}, config, {
   coverageThreshold: {
     global: {
       // FIXME: increase to 90
-      lines: 48,
+      lines: 40,
     },
   },
 });
diff --git a/packages/tools/helpers/src/generatePackageMetadata.ts b/packages/tools/helpers/src/generatePackageMetadata.ts
index ea41737b3..1cc8607c4 100644
--- a/packages/tools/helpers/src/generatePackageMetadata.ts
+++ b/packages/tools/helpers/src/generatePackageMetadata.ts
@@ -217,6 +217,21 @@ export function generateRemotePackageMetadata(
   };
 }
 
+export function getDeprecatedPackageMetadata(
+  pkgName: string,
+  version = '1.0.0',
+  distTags: DistTags = { ['latest']: version },
+  deprecated = 'default deprecated message',
+  rev = 'rev-foo'
+): Manifest {
+  const manifest = generatePackageMetadata(pkgName, version, distTags);
+  // deprecated message requires empty attachments
+  manifest._attachments = {};
+  manifest._rev = rev;
+  manifest.versions[version].deprecated = deprecated;
+  return manifest;
+}
+
 export function generatePackageMetadata(
   pkgName: string,
   version = '1.0.0',
diff --git a/packages/tools/helpers/src/index.ts b/packages/tools/helpers/src/index.ts
index bb4012018..afd88b043 100644
--- a/packages/tools/helpers/src/index.ts
+++ b/packages/tools/helpers/src/index.ts
@@ -3,6 +3,7 @@ export {
   addNewVersion,
   generateLocalPackageMetadata,
   generateRemotePackageMetadata,
+  getDeprecatedPackageMetadata,
 } from './generatePackageMetadata';
 export { generatePublishNewVersionManifest } from './generatePublishNewVersionManifest';
 export { initializeServer } from './initializeServer';
