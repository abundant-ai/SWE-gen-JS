diff --git a/.commitlintrc.json b/.commitlintrc.json
index d541ae390..5c5e64d4b 100644
--- a/.commitlintrc.json
+++ b/.commitlintrc.json
@@ -23,22 +23,6 @@
         "test",
         "sample"
       ]
-    ],
-    "scope-enum": [
-      1,
-      "always",
-      [
-        "common",
-        "core",
-        "sample",
-        "microservices",
-        "express",
-        "fastify",
-        "socket.io",
-        "ws",
-        "testing",
-        "websockets"
-      ]
     ]
   }
 }
diff --git a/.eslintignore b/.eslintignore
index 07c71c90c..4197b94e5 100644
--- a/.eslintignore
+++ b/.eslintignore
@@ -1,3 +1 @@
-**/node_modules/**
-*.d.ts
-*.js
\ No newline at end of file
+**/node_modules/**
\ No newline at end of file
diff --git a/.eslintrc.js b/.eslintrc.js
index 5280ee09d..280fe9a37 100644
--- a/.eslintrc.js
+++ b/.eslintrc.js
@@ -1,46 +1,25 @@
 module.exports = {
-  root: true,
-  env: {
-    node: true,
+  parser: '@typescript-eslint/parser',
+  parserOptions: {
+    project: 'tsconfig.json',
+    sourceType: 'module',
   },
   plugins: ['@typescript-eslint/eslint-plugin'],
   extends: [
+    'plugin:@typescript-eslint/eslint-recommended',
     'plugin:@typescript-eslint/recommended',
     'prettier',
   ],
-  overrides: [
-    {
-      files: ['**/*.ts'],
-      parser: '@typescript-eslint/parser',
-      parserOptions: {
-        project: 'tsconfig.json',
-        sourceType: 'module',
-      },
-      rules: {
-        '@typescript-eslint/interface-name-prefix': 'off',
-        '@typescript-eslint/explicit-function-return-type': 'off',
-        '@typescript-eslint/no-explicit-any': 'off',
-        '@typescript-eslint/explicit-module-boundary-types': 'off',
-        '@typescript-eslint/no-unused-vars': 'off',
-        '@typescript-eslint/ban-types': 'off',
-      },
-    },
-    {
-      files: ['**/*.spec.ts', 'integration/**/*.ts'],
-      parser: '@typescript-eslint/parser',
-      parserOptions: {
-        project: 'tsconfig.spec.json',
-        sourceType: 'module',
-      },
-      rules: {
-        '@typescript-eslint/interface-name-prefix': 'off',
-        '@typescript-eslint/explicit-function-return-type': 'off',
-        '@typescript-eslint/no-explicit-any': 'off',
-        '@typescript-eslint/explicit-module-boundary-types': 'off',
-        '@typescript-eslint/no-unused-vars': 'off',
-        '@typescript-eslint/ban-types': 'off',
-        '@typescript-eslint/no-empty-function': 'off',
-      },
-    }
-  ]
+  root: true,
+  env: {
+    node: true,
+  },
+  rules: {
+    '@typescript-eslint/interface-name-prefix': 'off',
+    '@typescript-eslint/explicit-function-return-type': 'off',
+    '@typescript-eslint/no-explicit-any': 'off',
+    '@typescript-eslint/explicit-module-boundary-types': 'off',
+    '@typescript-eslint/no-unused-vars': 'off',
+    '@typescript-eslint/ban-types': 'off',
+  },
 };
diff --git a/.gitignore b/.gitignore
index 68db39d62..e4ac8a641 100644
--- a/.gitignore
+++ b/.gitignore
@@ -5,16 +5,8 @@ node_modules/
 /.idea
 /.awcache
 /.vscode
-/.devcontainer
 *.code-workspace
 
-# Vim
-[._]*.s[a-v][a-z]
-[._]*.sw[a-p]
-[._]s[a-rt-v][a-z]
-[._]ss[a-gi-z]
-[._]sw[a-p]
-
 # bundle
 packages/**/*.d.ts
 packages/**/*.js
@@ -27,7 +19,6 @@ yarn-error.log
 /**/npm-debug.log
 /packages/**/.npmignore
 /packages/**/LICENSE
-*.tsbuildinfo
 
 # example
 /quick-start
@@ -42,6 +33,3 @@ yarn-error.log
 /packages/graphql
 /benchmarks/memory
 build/config\.gypi
-
-.npmrc
-pnpm-lock.yaml
\ No newline at end of file
diff --git a/.mocharc.js b/.mocharc.js
new file mode 100644
index 000000000..b9cef9d6d
--- /dev/null
+++ b/.mocharc.js
@@ -0,0 +1,7 @@
+module.exports = {
+  mochaHooks: {
+    beforeAll: function() {
+      require('reflect-metadata');
+    }
+  }
+};
diff --git a/.npmignore b/.npmignore
index d70d45ce9..adb8e0dd6 100644
--- a/.npmignore
+++ b/.npmignore
@@ -10,6 +10,4 @@
 package-lock.json
 tslint.json
 tsconfig.json
-.prettierrc
-
-*.tsbuildinfo
\ No newline at end of file
+.prettierrc
\ No newline at end of file
diff --git a/.prettierignore b/.prettierignore
index cb4f4fe93..59fc75a6f 100644
--- a/.prettierignore
+++ b/.prettierignore
@@ -1,3 +1,2 @@
 packages/**/*.d.ts
-packages/**/*.js
-.nyc_output
+packages/**/*.js
\ No newline at end of file
diff --git a/CONTRIBUTING.md b/CONTRIBUTING.md
index 585848980..a00cda048 100755
--- a/CONTRIBUTING.md
+++ b/CONTRIBUTING.md
@@ -19,7 +19,7 @@ Help us keep Nest open and inclusive. Please read and follow our [Code of Conduc
 
 ## <a name="question"></a> Got a Question or Problem?
 
-**Do not open issues for general support questions as we want to keep GitHub issues for bug reports and feature requests.** You've got much better chances of getting your question answered on [Stack Overflow][stackoverflow] where the questions should be tagged with tag `nestjs`.
+**Do not open issues for general support questions as we want to keep GitHub issues for bug reports and feature requests.** You've got much better chances of getting your question answered on [Stack Overflow](https://stackoverflow.com/questions/tagged/nestjs) where the questions should be tagged with tag `nestjs`.
 
 Stack Overflow is a much better place to ask questions since:
 
@@ -71,7 +71,7 @@ A minimal reproduce scenario using a repository or Gist allows us to quickly con
 
 Unfortunately, we are not able to investigate / fix bugs without a minimal reproduction, so if we don't hear back from you we are going to close an issue that doesn't have enough info to be reproduced.
 
-You can file new issues by filling out our [new issue form][new_issue].
+You can file new issues by filling out our [new issue form](https://github.com/nestjs/nest/issues/new).
 
 ### <a name="submit-pr"></a> Submitting a Pull Request (PR)
 
@@ -84,9 +84,9 @@ To the first point
 We cannot accept code without this.
 -->
 
-1. Search [GitHub Pull Requests][gh_prs] for an open or closed PR
+1. Search [GitHub](https://github.com/nestjs/nest/pulls) for an open or closed PR
    that relates to your submission. You don't want to duplicate effort.
-1. Fork this repository.
+1. Fork the nestjs/nest repo.
 1. Make your changes in a new git branch:
 
    ```shell
@@ -159,12 +159,12 @@ from the main (upstream) repository:
 
 ## <a name="development"></a> Development Setup
 
-You will need [Node.js](https://nodejs.org) version >= 10.13.0 (except for v13).
+You will need Node.js version 8.9.0+.
 
 1. After cloning the repo, run:
 
 ```bash
-$ npm ci # (or yarn install)
+$ npm i # (or yarn install)
 ```
 
 2. In order to prepare your environment run `prepare.sh` shell script:
@@ -233,7 +233,7 @@ to read on GitHub as well as in various git tools.
 
 Footer should contain a [closing reference to an issue](https://help.github.com/articles/closing-issues-via-commit-messages/) if any.
 
-Samples: (even more [samples][commits_samples])
+Samples: (even more [samples](https://github.com/nestjs/nest/commits/master))
 
 ```
 docs(changelog): update change log to beta.5
@@ -262,22 +262,16 @@ Must be one of the following:
 
 ### Scope
 
-The scope should have the name of the npm package affected (as perceived by person reading changelog generated from commit messages).
+The scope should be the name of the npm package affected (as perceived by person reading changelog generated from commit messages.
 
 The following is the list of supported scopes:
 
-- **common**: for changes made on `packages/common` directory
-- **core**: for changes made on `packages/core` directory
-- **sample**: for changes made on `packages/sample` directory
-- **microservices**: for changes made on `packages/microservices` directory
-- **express**: for changes made on `packages/platform-express` directory
-- **fastify**: for changes made on `packages/platform-fastify` directory
-- **socket.io**: for changes made on `packages/platform-socket.io` directory
-- **ws**: for changes made on `packages/platform-ws` directory
-- **testing**: for changes made on `packages/testing` directory
-- **websockets**: for changes made on `packages/websockets` directory
-
-If your change affect more than one package, separate the scopes with a comma (e.g. `common,core`).
+- **common**
+- **core**
+- **sample**
+- **microservices**
+- **testing**
+- **websockets**
 
 There are currently a few exceptions to the "use package name" rule:
 
@@ -285,6 +279,7 @@ There are currently a few exceptions to the "use package name" rule:
 - **changelog**: used for updating the release notes in CHANGELOG.md
 - **sample/#**: for the example apps directory, replacing # with the example app number
 - none/empty string: useful for `style`, `test` and `refactor` changes that are done across all packages (e.g. `style: add missing semicolons`)
+  <!-- * **aio**: used for docs-app (angular.io) related changes within the /aio directory of the repo -->
 
 ### Subject
 
@@ -322,13 +317,14 @@ changes to be accepted, the CLA must be signed. It's a quick process, we promise
 <!-- [coc]: https://github.com/angular/code-of-conduct/blob/master/CODE_OF_CONDUCT.md -->
 
 [commit-message-format]: https://docs.google.com/document/d/1QrDFcIiPjSLDn3EL15IJygNPiHORgU1_OOAqWjiDU5Y/edit#
-<!-- [individual-cla]: http://code.google.com/legal/individual-cla-v1.0.html -->
-<!-- [corporate-cla]: http://code.google.com/legal/corporate-cla-v1.0.html -->
+[corporate-cla]: http://code.google.com/legal/corporate-cla-v1.0.html
 [dev-doc]: https://github.com/nestjs/nest/blob/master/docs/DEVELOPER.md
 [github]: https://github.com/nestjs/nest
-[stackoverflow]: https://stackoverflow.com/questions/tagged/nestjs
 [discord]: https://discordapp.com/invite/G7Qnnhy
+[individual-cla]: http://code.google.com/legal/individual-cla-v1.0.html
 [js-style-guide]: https://google.github.io/styleguide/jsguide.html
-[new_issue]: https://github.com/nestjs/nest/issues/new
-[gh_prs]: https://github.com/nestjs/nest/pulls
-[commits_samples]: https://github.com/nestjs/nest/commits/master
+[jsfiddle]: http://jsfiddle.net
+[plunker]: http://plnkr.co/edit
+[runnable]: http://runnable.com
+
+<!-- [stackoverflow]: http://stackoverflow.com/questions/tagged/angular -->
diff --git a/LICENSE b/LICENSE
index 63c013f03..e0006437c 100644
--- a/LICENSE
+++ b/LICENSE
@@ -1,6 +1,6 @@
 (The MIT License)
 
-Copyright (c) 2017-2023 Kamil Mysliwiec <https://kamilmysliwiec.com>
+Copyright (c) 2017-2021 Kamil Mysliwiec <https://kamilmysliwiec.com>
 
 Permission is hereby granted, free of charge, to any person obtaining
 a copy of this software and associated documentation files (the
diff --git a/Readme.md b/Readme.md
index 16f48336d..f288809a9 100644
--- a/Readme.md
+++ b/Readme.md
@@ -11,6 +11,7 @@
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/l/@nestjs/core.svg" alt="Package License" /></a>
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/dm/@nestjs/common.svg" alt="NPM Downloads" /></a>
 <a href="https://circleci.com/gh/nestjs/nest" target="_blank"><img src="https://img.shields.io/circleci/build/github/nestjs/nest/master" alt="CircleCI" /></a>
+<a href="https://coveralls.io/github/nestjs/nest?branch=master" target="_blank"><img src="https://coveralls.io/repos/github/nestjs/nest/badge.svg?branch=master#9" alt="Coverage" /></a>
 <a href="https://discord.gg/G7Qnnhy" target="_blank"><img src="https://img.shields.io/badge/discord-online-brightgreen.svg" alt="Discord"/></a>
 <a href="https://opencollective.com/nest#backer" target="_blank"><img src="https://opencollective.com/nest/backers/badge.svg" alt="Backers on Open Collective" /></a>
 <a href="https://opencollective.com/nest#sponsor" target="_blank"><img src="https://opencollective.com/nest/sponsors/badge.svg" alt="Sponsors on Open Collective" /></a>
@@ -36,8 +37,8 @@ Nest is a framework for building efficient, scalable <a href="http://nodejs.org"
 
 * To check out the [guide](https://docs.nestjs.com), visit [docs.nestjs.com](https://docs.nestjs.com). :books:
 * 要查看中文 [指南](readme_zh.md), 请访问 [docs.nestjs.cn](https://docs.nestjs.cn). :books:
-* [가이드](readme_kr.md) 문서는 [docs.nestjs.com](https://docs.nestjs.com)에서 확인하실 수 있습니다. :books:
-* [ガイド](readme_jp.md)は [docs.nestjs.com](https://docs.nestjs.com)でご確認ください。 :books:
+* [가이드](readme_kr.md)를 확인하려면, [docs.nestjs.com](https://docs.nestjs.com)를 방문하세요.:books: 
+* チェックするには [ガイド](readme_jp.md), 詳しくは [docs.nestjs.com](https://docs.nestjs.com). :books: 
 
 ## Questions
 
@@ -53,49 +54,36 @@ With official support, you can get expert help straight from Nest core team. We
 
 ## Support
 
-Nest is an MIT-licensed open source project. It can grow thanks to the sponsors and support from the amazing backers. If you'd like to join them, please [read more here](https://docs.nestjs.com/support).
+Nest is an MIT-licensed open source project. It can grow thanks to the sponsors and support by the amazing backers. If you'd like to join them, please [read more here](https://docs.nestjs.com/support).
 
 #### Principal Sponsors
 <table style="text-align:center;"><tr>
   <td><a href="https://trilon.io" target="_blank"><img src="https://nestjs.com/img/trilon.svg" width="200" valign="middle" /></a></td>
-  <td><a href="https://www.redhat.com" target="_blank"><img src="https://nestjs.com/img/red-hat-logo.svg" width="200" valign="middle" /></a></td>
 <td>
 <a href="https://github.com/Sanofi-IADC" target="_blank"><img src="https://docs.nestjs.com/assets/sponsors/sanofi.png" width="180" valign="middle" /></a></td>
 <td>
 <a href="https://nx.dev" target="_blank"><img src="https://nestjs.com/img/nx-logo.png" height="45" valign="middle" /></a></td>
-    <td>
-<a href="https://valor-software.com/" target="_blank"><img src="https://docs.nestjs.com/assets/sponsors/valor-software.png" width="170" valign="middle" /></a></td><td>
-<a href="https://amplication.com/" target="_blank"><img src="https://nestjs.com/img/amplication-logo.svg" width="190" valign="middle" /></a></td>
 </tr></table>
 
 #### Gold Sponsors
 
 <table style="text-align:center;"><tr><td>
-<a href="https://weld.app/" target="_blank"><img src="https://nestjs.com/img/weld-logo.svg" width="140" valign="middle" /></a></td>
+  <a href="https://careers.labster.com/departments/platform" target="_blank"><img src="https://nestjs.com/img/labster-logo.png" width="170" valign="middle" /></a></td><td>
+<a href="https://weld.app/" target="_blank"><img src="https://nestjs.com/img/weld-logo.svg" width="150" valign="middle" /></a></td>
+  <td>
+<a href="https://valor-software.com/" target="_blank"><img src="https://docs.nestjs.com/assets/sponsors/valor-software.png" width="170" valign="middle" /></a></td>
 <td>
-<a href="https://intrinsic.ventures/" target="_blank"><img src="https://nestjs.com/img/intrinisic-logo.png" width="210" valign="middle" /></a></td>
- <td>
-<a href="https://jetbrains.com/" target="_blank"><img src="https://nestjs.com/img/jetbrains-logo.svg" width="110" valign="middle" /></a></td><td>
-<a href="https://snyk.co/nestjs" target="_blank"><img src="https://nestjs.com/img/snyk-logo-black.png" width="185" valign="middle" /></a></td><td>
-<a href="https://fuseautotech.com/" target="_blank"><img src="https://nestjs.com/img/fuse-logo.svg" width="105" valign="middle" /></a></td>
-<td>
-<a href="https://ridicorp.com/career/" target="_blank"><img src="https://nestjs.com/img/ridi-logo.svg" width="105" valign="middle" /></a></td><td>
-<a href="https://www.movavi.com/imovie-for-windows.html" target="_blank"><img src="https://nestjs.com/img/movavi-logo.svg" width="105" valign="middle" /></a></td></</tr></table>
+<a href="https://intrinsic.ventures/" target="_blank"><img src="https://nestjs.com/img/intrinisic-logo.png" width="210" valign="middle" /></a></td></</tr></table>
 
 #### Silver Sponsors
 
 <table style="text-align:center;"><tr><td>
 <a href="https://neoteric.eu/" target="_blank"><img src="https://nestjs.com/img/neoteric-cut.png" width="120" valign="middle" /></a> </td><td>
   <a href="http://gojob.com" target="_blank"><img src="http://nestjs.com/img/gojob-logo.png" valign="middle" width="100" /></a> </td><td>
-<a href="https://www.myleodsc.com/" target="_blank"><img src="https://nestjs.com/img/myleo-logo.png" width="180" valign="middle" /></td><td>
+<a href="http://www.leogistics.com" target="_blank"><img src="https://nestjs.com/img/leogistics-logo.jpeg" width="150" valign="middle" /></td><td>
 <a href="https://careers.meetdandy.com/?gh_src=063ba61e3us" target="_blank"><img src="https://nestjs.com/img/dandy-roles-logo.svg" width="150" valign="middle" /></td><td>
 <a href="https://www.castlecraft.in" target="_blank"><img src="https://nestjs.com/img/castlecraft-logo.png" width="150" valign="middle" /></td>
-<td><a href="https://www.tinystacks.com" target="_blank"><img src="https://nestjs.com/img/tinystacks-logo.png#1" width="140" valign="middle" /></td>
-<td><a href="https://n.inc" target="_blank"><img src="https://nestjs.com/img/n-inc-logo.svg" width="120" valign="middle" /></td></tr><tr>
-<td><a href="https://bilberrry.com/" target="_blank"><img src="https://nestjs.com/img/bilberrry-logo.svg" width="180" valign="middle" /></td>
-<td><a href="https://ipinfo.ai/" target="_blank"><img src="https://nestjs.com/img/ipinfo-logo.png" width="130" valign="middle" /></td>
-<td><a href="https://chax.at" target="_blank"><img src="https://nestjs.com/img/chaxat-logo.png" width="100" valign="middle" /></td></tr>
-</table>
+<td><a href="https://www.tinystacks.com" target="_blank"><img src="https://nestjs.com/img/tinystacks-logo.png#1" width="140" valign="middle" /></td></tr></table>
 
 #### Sponsors
 
@@ -103,7 +91,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
 <a href="https://www.swingdev.io" target="_blank"><img src="https://nestjs.com/img/swingdev-logo.svg#1" width="110" valign="middle" /> </a></td><td align="center" valign="middle">
 <a href="https://www.novologic.com/" target="_blank"><img src="https://nestjs.com/img/novologic.png" width="110" valign="middle" /></a> </td><td align="center" valign="middle">
 <a href="https://ever.co/" target="_blank"><img src="https://nestjs.com/img/ever-logo.png" width="72" valign="middle" /></a>  </td><td align="center" valign="middle">
-<a href="https://blokt.com" target="_blank"><img src="https://nestjs.com/img/blokt-logo.png" width="120" valign="middle" /></a>  </td><td align="center" valign="middle">
+<a href="https://blokt.com" target="_blank"><img src="https://nestjs.com/img/blokt-logo.png" width="120" valign="middle" /></a>  </td><td align="center" valign="middle"> 
   <a href="http://architectnow.net/" target="_blank"><img src="https://nestjs.com/img/architectnow.png" width="125" valign="middle" /></a> </td><td align="center" valign="middle">
   <a href="https://quander.io/" target="_blank"><img src="https://nestjs.com/img/quander.png" width="100" valign="middle" /></a> </td></tr><tr><td align="center" valign="middle">
   <a href="https://mantro.net/" target="_blank"><img src="https://nestjs.com/img/mantro-logo.svg" width="95" valign="middle" /></a> </td><td align="center" valign="middle">
@@ -129,14 +117,6 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
 <td align="center" valign="middle"><a href="https://www.naologic.com/" target="_blank"><img src="https://nestjs.com/img/naologic-logo.svg" width="125" valign="middle" /></a></td>
   <td align="center" valign="middle"><a href="https://messaged.com/" target="_blank"><img src="https://nestjs.com/img/messaged-logo.png" width="50" valign="middle" /></a></td>
   <td align="center" valign="middle"><a href="https://triplecore.io" target="_blank"><img src="https://nestjs.com/img/triplecore-logo.svg" width="50" valign="middle" /></a></td>
-   <td align="center" valign="middle"><a href="https://klqc.de" target="_blank"><img src="https://nestjs.com/img/klcqcl-logo.png" width="120" valign="middle" /></a></td>
-   <td align="center" valign="middle"><a href="https://thecasinowizard.com/bonuses/no-deposit-bonuses/" target="_blank"><img src="https://nestjs.com/img/casinowizard-logo.png" width="120" valign="middle" /></a></td></tr><tr>
-     <td align="center" valign="middle"><a href="https://polygon-software.ch/" target="_blank"><img src="https://nestjs.com/img/polygon-logo.svg" width="120" valign="middle" /></a></td>
-   <td align="center" valign="middle"><a href="https://mobilereality.pl/" target="_blank"><img src="https://nestjs.com/img/mobile-reality-logo.png" width="45" valign="middle" /></a></td>
-     <td align="center" valign="middle"><a href="https://boringowl.io/" target="_blank"><img src="https://nestjs.com/img/boringowl-logo.svg" width="120" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://www.mobilefactory.jp/" target="_blank"><img src="https://nestjs.com/img/mobilefactory-logo.png" width="100" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://nordbot.app/" target="_blank"><img src="https://nestjs.com/img/nordbot-logo.png" width="120" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://doppio.sh/" target="_blank"><img src="https://nestjs.com/img/dopiosh-logo.png" width="50" valign="middle" /></a></td>
   </tr></table>
 
 ## Backers
diff --git a/benchmarks/fastify.js b/benchmarks/fastify.js
index eb70ea0ba..baf5e7ab8 100644
--- a/benchmarks/fastify.js
+++ b/benchmarks/fastify.js
@@ -2,6 +2,4 @@
 
 const fastify = require('fastify')();
 fastify.get('/', async (req, reply) => reply.send('Hello world'));
-fastify.listen({
-  port: 3000
-});
+fastify.listen(3000);
diff --git a/hooks/mocha-init-hook.ts b/hooks/mocha-init-hook.ts
deleted file mode 100644
index 82b14a111..000000000
--- a/hooks/mocha-init-hook.ts
+++ /dev/null
@@ -1,7 +0,0 @@
-export const mochaHooks = (): Mocha.RootHookObject => {
-  return {
-    async beforeAll(this: Mocha.Context) {
-      await import('reflect-metadata');
-    },
-  };
-};
diff --git a/integration/auto-mock/src/bar.service.ts b/integration/auto-mock/src/bar.service.ts
index 5b75933f9..d4224329a 100644
--- a/integration/auto-mock/src/bar.service.ts
+++ b/integration/auto-mock/src/bar.service.ts
@@ -3,9 +3,10 @@ import { FooService } from './foo.service';
 
 @Injectable()
 export class BarService {
+
   constructor(private readonly foo: FooService) {}
 
   bar() {
     this.foo.foo();
   }
-}
+}
\ No newline at end of file
diff --git a/integration/auto-mock/tsconfig.json b/integration/auto-mock/tsconfig.json
index cef623d14..c6354c564 100644
--- a/integration/auto-mock/tsconfig.json
+++ b/integration/auto-mock/tsconfig.json
@@ -7,28 +7,10 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
     "src/**/*",
diff --git a/integration/cache/src/multi-store/multi-store.controller.ts b/integration/cache/src/multi-store/multi-store.controller.ts
new file mode 100644
index 000000000..ce4a446a8
--- /dev/null
+++ b/integration/cache/src/multi-store/multi-store.controller.ts
@@ -0,0 +1,16 @@
+import { Controller, Get, Inject, CACHE_MANAGER } from '@nestjs/common';
+import { Cache } from 'cache-manager';
+
+@Controller()
+export class MultiStoreController {
+  constructor(@Inject(CACHE_MANAGER) private cacheManager: Cache) {}
+
+  @Get()
+  async getFromMultiStore(): Promise<unknown> {
+    const value = await this.cacheManager.get('multi-store-key');
+    if (!value) {
+      await this.cacheManager.set('multi-store-key', 'multi-store-value');
+    }
+    return value;
+  }
+}
diff --git a/integration/cache/src/multi-store/multi-store.module.ts b/integration/cache/src/multi-store/multi-store.module.ts
new file mode 100644
index 000000000..8ebc34e5b
--- /dev/null
+++ b/integration/cache/src/multi-store/multi-store.module.ts
@@ -0,0 +1,24 @@
+import { CacheModule, Module } from '@nestjs/common';
+import * as redisStore from 'cache-manager-redis-store';
+import { MultiStoreController } from './multi-store.controller';
+
+@Module({
+  imports: [
+    CacheModule.register([
+      {
+        store: 'memory',
+        max: 100,
+        ttl: 10,
+      },
+      {
+        store: redisStore,
+        host: 'localhost',
+        port: 6379,
+        db: 0,
+        ttl: 600,
+      },
+    ]),
+  ],
+  controllers: [MultiStoreController],
+})
+export class MultiStoreModule {}
diff --git a/integration/cache/src/multi-store/tsconfig.json b/integration/cache/src/multi-store/tsconfig.json
new file mode 100644
index 000000000..567a5c9e6
--- /dev/null
+++ b/integration/cache/src/multi-store/tsconfig.json
@@ -0,0 +1,22 @@
+{
+  "compilerOptions": {
+    "module": "commonjs",
+    "declaration": false,
+    "noImplicitAny": false,
+    "removeComments": true,
+    "noLib": false,
+    "emitDecoratorMetadata": true,
+    "experimentalDecorators": true,
+    "target": "es6",
+    "sourceMap": true,
+    "allowJs": true,
+    "outDir": "./dist"
+  },
+  "include": [
+    "src/**/*",
+    "e2e/**/*"
+  ],
+  "exclude": [
+    "node_modules",
+  ]
+}
diff --git a/integration/cors/tsconfig.json b/integration/cors/tsconfig.json
index cef623d14..c6354c564 100644
--- a/integration/cors/tsconfig.json
+++ b/integration/cors/tsconfig.json
@@ -7,28 +7,10 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
     "src/**/*",
diff --git a/integration/docker-compose.yml b/integration/docker-compose.yml
index bbf95d3a9..7ee1a96ac 100644
--- a/integration/docker-compose.yml
+++ b/integration/docker-compose.yml
@@ -17,15 +17,13 @@ services:
     restart: always
   mqtt:
     container_name: test-mqtt
-    image: eclipse-mosquitto
-    volumes:
-      - ./mosquitto.conf:/mosquitto/config/mosquitto.conf
+    image: toke/mosquitto
     ports:
       - "1883:1883"
       - "9001:9001"
     restart: always
   mysql:
-    image: mysql:8.0.32
+    image: mysql:8.0.27
     environment:
       MYSQL_ROOT_PASSWORD: root
       MYSQL_DATABASE: test
@@ -50,7 +48,7 @@ services:
   zookeeper:
     container_name: test-zookeeper
     hostname: zookeeper
-    image: confluentinc/cp-zookeeper:7.3.2
+    image: confluentinc/cp-zookeeper:7.0.0
     ports:
       - "2181:2181"
     environment:
@@ -59,7 +57,7 @@ services:
   kafka:
     container_name: test-kafka
     hostname: kafka
-    image: confluentinc/cp-kafka:7.3.2
+    image: confluentinc/cp-kafka:7.0.0
     depends_on:
       - zookeeper
     ports:
diff --git a/integration/graphql-code-first/schema.gql b/integration/graphql-code-first/schema.gql
index c196e332d..59f110694 100644
--- a/integration/graphql-code-first/schema.gql
+++ b/integration/graphql-code-first/schema.gql
@@ -15,7 +15,7 @@ scalar Date
 
 type Query {
   recipe(id: String!): Recipe!
-  recipes(skip: Int! = 0, take: Int! = 25): [Recipe!]!
+  recipes(skip: Int = 0, take: Int = 25): [Recipe!]!
 }
 
 type Mutation {
@@ -31,4 +31,4 @@ input NewRecipeInput {
 
 type Subscription {
   recipeAdded: Recipe!
-}
\ No newline at end of file
+}
diff --git a/integration/graphql-code-first/src/app.module.ts b/integration/graphql-code-first/src/app.module.ts
index 5da27fa35..4fd71db94 100644
--- a/integration/graphql-code-first/src/app.module.ts
+++ b/integration/graphql-code-first/src/app.module.ts
@@ -1,4 +1,3 @@
-import { ApolloDriver, ApolloDriverConfig } from '@nestjs/apollo';
 import { Module } from '@nestjs/common';
 import { GraphQLModule } from '@nestjs/graphql';
 import { join } from 'path';
@@ -7,9 +6,8 @@ import { RecipesModule } from './recipes/recipes.module';
 @Module({
   imports: [
     RecipesModule,
-    GraphQLModule.forRoot<ApolloDriverConfig>({
-      driver: ApolloDriver,
-      includeStacktraceInErrorResponses: false,
+    GraphQLModule.forRoot({
+      debug: false,
       installSubscriptionHandlers: true,
       autoSchemaFile: join(
         process.cwd(),
@@ -18,4 +16,4 @@ import { RecipesModule } from './recipes/recipes.module';
     }),
   ],
 })
-export class AppModule {}
+export class ApplicationModule {}
diff --git a/integration/graphql-code-first/src/main.ts b/integration/graphql-code-first/src/main.ts
index 5a5fd57ce..c04a543a1 100644
--- a/integration/graphql-code-first/src/main.ts
+++ b/integration/graphql-code-first/src/main.ts
@@ -1,9 +1,9 @@
 import { ValidationPipe } from '@nestjs/common';
 import { NestFactory } from '@nestjs/core';
-import { AppModule } from './app.module';
+import { ApplicationModule } from './app.module';
 
 async function bootstrap() {
-  const app = await NestFactory.create(AppModule);
+  const app = await NestFactory.create(ApplicationModule);
   app.useGlobalPipes(new ValidationPipe());
   await app.listen(3000);
 }
diff --git a/integration/graphql-code-first/tsconfig.json b/integration/graphql-code-first/tsconfig.json
index cef623d14..ea15af490 100644
--- a/integration/graphql-code-first/tsconfig.json
+++ b/integration/graphql-code-first/tsconfig.json
@@ -7,34 +7,16 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
-    "src/**/*",
-    "e2e/**/*"
+    "src/**/*"
   ],
   "exclude": [
     "node_modules",
+    "**/*.spec.ts"
   ]
 }
\ No newline at end of file
diff --git a/integration/graphql-schema-first/src/app.module.ts b/integration/graphql-schema-first/src/app.module.ts
index 2879cfc9f..a3cfa7a6d 100644
--- a/integration/graphql-schema-first/src/app.module.ts
+++ b/integration/graphql-schema-first/src/app.module.ts
@@ -1,4 +1,3 @@
-import { ApolloDriver, ApolloDriverConfig } from '@nestjs/apollo';
 import { Module } from '@nestjs/common';
 import { GraphQLModule } from '@nestjs/graphql';
 import { join } from 'path';
@@ -7,11 +6,9 @@ import { CatsModule } from './cats/cats.module';
 @Module({
   imports: [
     CatsModule,
-    GraphQLModule.forRoot<ApolloDriverConfig>({
-      driver: ApolloDriver,
-      includeStacktraceInErrorResponses: true,
+    GraphQLModule.forRoot({
       typePaths: [join(__dirname, '**', '*.graphql')],
     }),
   ],
 })
-export class AppModule {}
+export class ApplicationModule {}
diff --git a/integration/graphql-schema-first/src/async-options-class.module.ts b/integration/graphql-schema-first/src/async-options-class.module.ts
index 5e702348d..749492e8c 100644
--- a/integration/graphql-schema-first/src/async-options-class.module.ts
+++ b/integration/graphql-schema-first/src/async-options-class.module.ts
@@ -1,11 +1,14 @@
-import { ApolloDriver, ApolloDriverConfig } from '@nestjs/apollo';
 import { Module } from '@nestjs/common';
-import { GqlOptionsFactory, GraphQLModule } from '@nestjs/graphql';
+import {
+  GqlModuleOptions,
+  GqlOptionsFactory,
+  GraphQLModule,
+} from '@nestjs/graphql';
 import { join } from 'path';
 import { CatsModule } from './cats/cats.module';
 
 class ConfigService implements GqlOptionsFactory {
-  createGqlOptions(): ApolloDriverConfig {
+  createGqlOptions(): GqlModuleOptions {
     return {
       typePaths: [join(__dirname, '**', '*.graphql')],
     };
@@ -15,8 +18,7 @@ class ConfigService implements GqlOptionsFactory {
 @Module({
   imports: [
     CatsModule,
-    GraphQLModule.forRootAsync<ApolloDriverConfig>({
-      driver: ApolloDriver,
+    GraphQLModule.forRootAsync({
       useClass: ConfigService,
     }),
   ],
diff --git a/integration/graphql-schema-first/src/async-options-existing.module.ts b/integration/graphql-schema-first/src/async-options-existing.module.ts
index e68b65ada..9bfe86369 100644
--- a/integration/graphql-schema-first/src/async-options-existing.module.ts
+++ b/integration/graphql-schema-first/src/async-options-existing.module.ts
@@ -1,4 +1,3 @@
-import { ApolloDriver, ApolloDriverConfig } from '@nestjs/apollo';
 import { Module } from '@nestjs/common';
 import { GraphQLModule } from '@nestjs/graphql';
 import { CatsModule } from './cats/cats.module';
@@ -8,8 +7,7 @@ import { ConfigService } from './config.service';
 @Module({
   imports: [
     CatsModule,
-    GraphQLModule.forRootAsync<ApolloDriverConfig>({
-      driver: ApolloDriver,
+    GraphQLModule.forRootAsync({
       imports: [ConfigModule],
       useExisting: ConfigService,
     }),
diff --git a/integration/graphql-schema-first/src/async-options.module.ts b/integration/graphql-schema-first/src/async-options.module.ts
index c123cbc97..77dfb471d 100644
--- a/integration/graphql-schema-first/src/async-options.module.ts
+++ b/integration/graphql-schema-first/src/async-options.module.ts
@@ -1,4 +1,3 @@
-import { ApolloDriver, ApolloDriverConfig } from '@nestjs/apollo';
 import { Module } from '@nestjs/common';
 import { GraphQLModule } from '@nestjs/graphql';
 import { join } from 'path';
@@ -7,8 +6,7 @@ import { CatsModule } from './cats/cats.module';
 @Module({
   imports: [
     CatsModule,
-    GraphQLModule.forRootAsync<ApolloDriverConfig>({
-      driver: ApolloDriver,
+    GraphQLModule.forRootAsync({
       useFactory: async () => ({
         typePaths: [join(__dirname, '**', '*.graphql')],
       }),
diff --git a/integration/graphql-schema-first/src/main.ts b/integration/graphql-schema-first/src/main.ts
index 13cad38cf..afb93ba07 100644
--- a/integration/graphql-schema-first/src/main.ts
+++ b/integration/graphql-schema-first/src/main.ts
@@ -1,8 +1,8 @@
 import { NestFactory } from '@nestjs/core';
-import { AppModule } from './app.module';
+import { ApplicationModule } from './app.module';
 
 async function bootstrap() {
-  const app = await NestFactory.create(AppModule);
+  const app = await NestFactory.create(ApplicationModule);
   await app.listen(3000);
 }
 bootstrap();
diff --git a/integration/graphql-schema-first/tsconfig.json b/integration/graphql-schema-first/tsconfig.json
index cef623d14..3229c5596 100644
--- a/integration/graphql-schema-first/tsconfig.json
+++ b/integration/graphql-schema-first/tsconfig.json
@@ -7,34 +7,17 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
     "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
+    "skipLibCheck": true
   },
   "include": [
-    "src/**/*",
-    "e2e/**/*"
+    "src/**/*"
   ],
   "exclude": [
     "node_modules",
+    "**/*.spec.ts"
   ]
 }
\ No newline at end of file
diff --git a/integration/hello-world/src/app.module.ts b/integration/hello-world/src/app.module.ts
index b34bf1cfe..982d6c65f 100644
--- a/integration/hello-world/src/app.module.ts
+++ b/integration/hello-world/src/app.module.ts
@@ -6,4 +6,4 @@ import { HostModule } from './host/host.module';
 @Module({
   imports: [HelloModule, HostModule, HostArrayModule],
 })
-export class AppModule {}
+export class ApplicationModule {}
diff --git a/integration/hello-world/src/errors/errors.controller.ts b/integration/hello-world/src/errors/errors.controller.ts
index 7b2b9e1b8..76f867bb7 100644
--- a/integration/hello-world/src/errors/errors.controller.ts
+++ b/integration/hello-world/src/errors/errors.controller.ts
@@ -1,4 +1,4 @@
-import { BadRequestException, Controller, Get, Header } from '@nestjs/common';
+import { BadRequestException, Controller, Get } from '@nestjs/common';
 
 @Controller()
 export class ErrorsController {
@@ -12,12 +12,6 @@ export class ErrorsController {
     this.throwError();
   }
 
-  @Get('unexpected-error')
-  @Header('Content-Type', 'application/pdf')
-  unexpectedError() {
-    throw new Error();
-  }
-
   throwError() {
     throw new BadRequestException({
       statusCode: 400,
diff --git a/integration/hello-world/tsconfig.json b/integration/hello-world/tsconfig.json
index cef623d14..c6354c564 100644
--- a/integration/hello-world/tsconfig.json
+++ b/integration/hello-world/tsconfig.json
@@ -7,28 +7,10 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
     "src/**/*",
diff --git a/integration/hooks/tsconfig.json b/integration/hooks/tsconfig.json
index cef623d14..c6354c564 100644
--- a/integration/hooks/tsconfig.json
+++ b/integration/hooks/tsconfig.json
@@ -7,28 +7,10 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
     "src/**/*",
diff --git a/integration/injector/src/inject/inject-same-name.module.ts b/integration/injector/src/inject/inject-same-name.module.ts
deleted file mode 100644
index f66fd51a7..000000000
--- a/integration/injector/src/inject/inject-same-name.module.ts
+++ /dev/null
@@ -1,16 +0,0 @@
-import { Module, Injectable, Inject } from '@nestjs/common';
-
-@Injectable()
-class CoreService {
-  constructor(@Inject(CoreService.name) private readonly coreService: any) {}
-}
-
-@Module({
-  providers: [
-    {
-      provide: CoreService.name,
-      useValue: 'anything',
-    },
-  ],
-})
-export class InjectSameNameModule {}
diff --git a/integration/injector/src/multiple-providers/a.module.ts b/integration/injector/src/multiple-providers/a.module.ts
deleted file mode 100644
index 95ae5eea1..000000000
--- a/integration/injector/src/multiple-providers/a.module.ts
+++ /dev/null
@@ -1,16 +0,0 @@
-import { Module, Scope } from '@nestjs/common';
-
-@Module({
-  providers: [
-    {
-      provide: 'MULTI_PROVIDER',
-      useValue: 'A',
-    },
-    {
-      provide: 'REQ_SCOPED_MULTI_PROVIDER',
-      useFactory: () => 'A',
-      scope: Scope.REQUEST,
-    },
-  ],
-})
-export class AModule {}
diff --git a/integration/injector/src/multiple-providers/b.module.ts b/integration/injector/src/multiple-providers/b.module.ts
deleted file mode 100644
index 1ed8ac423..000000000
--- a/integration/injector/src/multiple-providers/b.module.ts
+++ /dev/null
@@ -1,16 +0,0 @@
-import { Module, Scope } from '@nestjs/common';
-
-@Module({
-  providers: [
-    {
-      provide: 'MULTI_PROVIDER',
-      useValue: 'B',
-    },
-    {
-      provide: 'REQ_SCOPED_MULTI_PROVIDER',
-      useFactory: () => 'B',
-      scope: Scope.REQUEST,
-    },
-  ],
-})
-export class BModule {}
diff --git a/integration/injector/src/multiple-providers/c.module.ts b/integration/injector/src/multiple-providers/c.module.ts
deleted file mode 100644
index 4def2a71a..000000000
--- a/integration/injector/src/multiple-providers/c.module.ts
+++ /dev/null
@@ -1,16 +0,0 @@
-import { Module, Scope } from '@nestjs/common';
-
-@Module({
-  providers: [
-    {
-      provide: 'MULTI_PROVIDER',
-      useValue: 'C',
-    },
-    {
-      provide: 'REQ_SCOPED_MULTI_PROVIDER',
-      useFactory: () => 'C',
-      scope: Scope.REQUEST,
-    },
-  ],
-})
-export class CModule {}
diff --git a/integration/injector/src/multiple-providers/multiple-providers.module.ts b/integration/injector/src/multiple-providers/multiple-providers.module.ts
deleted file mode 100644
index 1bb2345ee..000000000
--- a/integration/injector/src/multiple-providers/multiple-providers.module.ts
+++ /dev/null
@@ -1,9 +0,0 @@
-import { Module } from '@nestjs/common';
-import { AModule } from './a.module';
-import { BModule } from './b.module';
-import { CModule } from './c.module';
-
-@Module({
-  imports: [AModule, BModule, CModule],
-})
-export class MultipleProvidersModule {}
diff --git a/integration/injector/src/self-injection/self-injection-provider.module.ts b/integration/injector/src/self-injection/self-injection-provider.module.ts
deleted file mode 100644
index 1dcf6eecb..000000000
--- a/integration/injector/src/self-injection/self-injection-provider.module.ts
+++ /dev/null
@@ -1,40 +0,0 @@
-import { Module, Injectable, Inject, forwardRef } from '@nestjs/common';
-
-@Injectable()
-class ServiceInjectingItself {
-  constructor(private readonly coreService: ServiceInjectingItself) {}
-}
-
-@Injectable()
-class ServiceInjectingItselfForward {
-  constructor(
-    @Inject(forwardRef(() => ServiceInjectingItself))
-    private readonly coreService: ServiceInjectingItself,
-  ) {}
-}
-
-@Injectable()
-class ServiceInjectingItselfViaCustomToken {
-  constructor(@Inject('AnotherToken') private readonly coreService: any) {}
-}
-
-@Module({
-  providers: [ServiceInjectingItself],
-})
-export class SelfInjectionProviderModule {}
-
-@Module({
-  providers: [ServiceInjectingItselfForward],
-})
-export class SelfInjectionForwardProviderModule {}
-
-@Module({
-  providers: [
-    ServiceInjectingItselfViaCustomToken,
-    {
-      provide: 'AnotherToken',
-      useClass: ServiceInjectingItselfViaCustomToken,
-    },
-  ],
-})
-export class SelfInjectionProviderCustomTokenModule {}
diff --git a/integration/injector/tsconfig.json b/integration/injector/tsconfig.json
index cef623d14..c6354c564 100644
--- a/integration/injector/tsconfig.json
+++ b/integration/injector/tsconfig.json
@@ -7,28 +7,10 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
     "src/**/*",
diff --git a/integration/inspector/e2e/fixtures/post-init-graph.json b/integration/inspector/e2e/fixtures/post-init-graph.json
deleted file mode 100644
index 36ca478b2..000000000
--- a/integration/inspector/e2e/fixtures/post-init-graph.json
+++ /dev/null
@@ -1,3171 +0,0 @@
-{
-  "nodes": {
-    "18347652": {
-      "id": "18347652",
-      "label": "LoggingInterceptor",
-      "parent": "2133316171",
-      "metadata": {
-        "type": "injectable",
-        "internal": false,
-        "sourceModuleName": "RequestChainModule",
-        "durable": false,
-        "static": false,
-        "transient": false,
-        "exported": false,
-        "token": "LoggingInterceptor",
-        "subtype": "interceptor",
-        "initTime": 0
-      }
-    },
-    "55510001": {
-      "id": "55510001",
-      "label": "UsersService",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": false,
-        "token": "UsersService",
-        "initTime": 0
-      }
-    },
-    "91819333": {
-      "id": "91819333",
-      "label": "ModuleRef",
-      "parent": "2133316171",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "RequestChainModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "203550704": {
-      "id": "203550704",
-      "label": "ExternalContextCreator",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": true,
-        "token": "ExternalContextCreator"
-      }
-    },
-    "208171089": {
-      "id": "208171089",
-      "label": "RolesGuard",
-      "parent": "1434441974",
-      "metadata": {
-        "type": "injectable",
-        "internal": false,
-        "sourceModuleName": "CatsModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "RolesGuard",
-        "subtype": "guard",
-        "initTime": 0
-      }
-    },
-    "225063248": {
-      "id": "225063248",
-      "label": "InternalCoreModule",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "InternalCoreModule",
-        "initTime": 0
-      }
-    },
-    "256260345": {
-      "id": "256260345",
-      "label": "ApplicationConfig",
-      "parent": "1528017428",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DatabaseModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "345516396": {
-      "id": "345516396",
-      "label": "ApplicationConfig",
-      "parent": "1142369607",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "HelperModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "345719894": {
-      "id": "345719894",
-      "label": "CoreModule",
-      "parent": "-1125887048",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "CoreModule",
-        "initTime": 0
-      }
-    },
-    "437945905": {
-      "id": "437945905",
-      "label": "ApplicationConfig",
-      "parent": "-1469176692",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "PropertiesModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "519735830": {
-      "id": "519735830",
-      "label": "ApplicationConfig",
-      "parent": "-493958991",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "ChatModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "521671888": {
-      "id": "521671888",
-      "label": "DogsModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "555176277": {
-      "id": "555176277",
-      "label": "InternalCoreModule",
-      "metadata": {
-        "type": "module",
-        "global": true,
-        "dynamic": true,
-        "internal": true
-      }
-    },
-    "594986539": {
-      "id": "594986539",
-      "label": "InputService",
-      "parent": "-1813741655",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "InputModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": true,
-        "token": "InputService",
-        "initTime": 0
-      }
-    },
-    "603011239": {
-      "id": "603011239",
-      "label": "UsersService",
-      "parent": "-2003726489",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "UsersModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "UsersService",
-        "initTime": 0
-      }
-    },
-    "671882984": {
-      "id": "671882984",
-      "label": "Reflector",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": true,
-        "token": "Reflector",
-        "initTime": 0
-      }
-    },
-    "791004148": {
-      "id": "791004148",
-      "label": "ExternalSvcModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "867482265": {
-      "id": "867482265",
-      "label": "Interceptor",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "injectable",
-        "internal": false,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": false,
-        "token": "Interceptor",
-        "subtype": "interceptor",
-        "initTime": 0
-      }
-    },
-    "927096496": {
-      "id": "927096496",
-      "label": "ApplicationConfig",
-      "parent": "2133316171",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "RequestChainModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "928565345": {
-      "id": "928565345",
-      "label": "HelperService",
-      "parent": "1142369607",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "HelperModule",
-        "durable": false,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": true,
-        "token": "HelperService",
-        "initTime": 0
-      }
-    },
-    "941957564": {
-      "id": "941957564",
-      "label": "RequestChainModule",
-      "parent": "2133316171",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "RequestChainModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "RequestChainModule",
-        "initTime": 0
-      }
-    },
-    "980514911": {
-      "id": "980514911",
-      "label": "Symbol(token)",
-      "parent": "-1469176692",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "PropertiesModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "Symbol(token)"
-      }
-    },
-    "1004276345": {
-      "id": "1004276345",
-      "label": "Meta",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": false,
-        "token": "META",
-        "initTime": 0
-      }
-    },
-    "1010833816": {
-      "id": "1010833816",
-      "label": "token",
-      "parent": "-1469176692",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "PropertiesModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "token"
-      }
-    },
-    "1047229654": {
-      "id": "1047229654",
-      "label": "CircularModule",
-      "parent": "-369869768",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CircularModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "CircularModule",
-        "initTime": 0
-      }
-    },
-    "1074192353": {
-      "id": "1074192353",
-      "label": "ChatService",
-      "parent": "-493958991",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "ChatModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "ChatService",
-        "initTime": 0
-      }
-    },
-    "1120316353": {
-      "id": "1120316353",
-      "label": "ModuleRef",
-      "parent": "1142369607",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "HelperModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "1131051184": {
-      "id": "1131051184",
-      "label": "ChatGateway",
-      "parent": "-493958991",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "ChatModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "ChatGateway",
-        "initTime": 0
-      }
-    },
-    "1142369607": {
-      "id": "1142369607",
-      "label": "HelperModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "1189153544": {
-      "id": "1189153544",
-      "label": "ChatModule",
-      "parent": "-493958991",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "ChatModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ChatModule",
-        "initTime": 0
-      }
-    },
-    "1253818496": {
-      "id": "1253818496",
-      "label": "RootTestModule",
-      "parent": "-1251270035",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "RootTestModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "RootTestModule",
-        "initTime": 0
-      }
-    },
-    "1433815174": {
-      "id": "1433815174",
-      "label": "DogsModule",
-      "parent": "521671888",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DogsModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "DogsModule",
-        "initTime": 0
-      }
-    },
-    "1434441974": {
-      "id": "1434441974",
-      "label": "CatsModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "1434456218": {
-      "id": "1434456218",
-      "label": "Reflector",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": true,
-        "token": "Reflector",
-        "initTime": 0
-      }
-    },
-    "1472486160": {
-      "id": "1472486160",
-      "label": "HelloController",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "transient": false,
-        "exported": false,
-        "token": "HelloController",
-        "initTime": 0,
-        "enhancers": [
-          {
-            "id": "-2010060263",
-            "methodKey": "greeting",
-            "subtype": "guard"
-          },
-          {
-            "id": "867482265",
-            "methodKey": "greeting",
-            "subtype": "interceptor"
-          },
-          {
-            "id": "1893794611",
-            "methodKey": "greeting",
-            "subtype": "pipe"
-          }
-        ]
-      }
-    },
-    "1528017428": {
-      "id": "1528017428",
-      "label": "DatabaseModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "1535366709": {
-      "id": "1535366709",
-      "label": "ApplicationConfig",
-      "parent": "521671888",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DogsModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "1551182002": {
-      "id": "1551182002",
-      "label": "ModuleRef",
-      "parent": "-1125887048",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "1616075090": {
-      "id": "1616075090",
-      "label": "CatsModule",
-      "parent": "1434441974",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CatsModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "CatsModule",
-        "initTime": 0
-      }
-    },
-    "1634859874": {
-      "id": "1634859874",
-      "label": "LoggerMiddleware",
-      "parent": "-1125887048",
-      "metadata": {
-        "type": "middleware",
-        "internal": false,
-        "sourceModuleName": "CoreModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "LoggerMiddleware",
-        "initTime": 0
-      }
-    },
-    "1743739569": {
-      "id": "1743739569",
-      "label": "HelloModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": true,
-        "internal": false
-      }
-    },
-    "1771940178": {
-      "id": "1771940178",
-      "label": "ApplicationConfig",
-      "parent": "-1251270035",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "RootTestModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "1809676814": {
-      "id": "1809676814",
-      "label": "ModuleRef",
-      "parent": "1528017428",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DatabaseModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "1893794611": {
-      "id": "1893794611",
-      "label": "UserByIdPipe",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "injectable",
-        "internal": false,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "transient": false,
-        "exported": false,
-        "token": "UserByIdPipe",
-        "subtype": "pipe",
-        "initTime": 0
-      }
-    },
-    "1919157847": {
-      "id": "1919157847",
-      "label": "REQUEST",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": true,
-        "token": "REQUEST",
-        "initTime": 0
-      }
-    },
-    "2018972420": {
-      "id": "2018972420",
-      "label": "TransformInterceptor",
-      "parent": "-1125887048",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "CoreModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "APP_INTERCEPTOR (UUID: -1146749753)",
-        "subtype": "interceptor",
-        "initTime": 0,
-        "global": true
-      }
-    },
-    "2133316171": {
-      "id": "2133316171",
-      "label": "RequestChainModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-1486320561": {
-      "id": "-1486320561",
-      "label": "ModuleRef",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-651043398": {
-      "id": "-651043398",
-      "label": "ApplicationConfig",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-255469305": {
-      "id": "-255469305",
-      "label": "INQUIRER",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 1,
-        "transient": true,
-        "exported": true,
-        "token": "INQUIRER",
-        "initTime": 0
-      }
-    },
-    "-26938366": {
-      "id": "-26938366",
-      "label": "ModulesContainer",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": true,
-        "token": "ModulesContainer"
-      }
-    },
-    "-326832201": {
-      "id": "-326832201",
-      "label": "HttpAdapterHost",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": true,
-        "token": "HttpAdapterHost"
-      }
-    },
-    "-553129559": {
-      "id": "-553129559",
-      "label": "HttpAdapterHost",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": true,
-        "token": "HttpAdapterHost",
-        "initTime": 0
-      }
-    },
-    "-702581189": {
-      "id": "-702581189",
-      "label": "LazyModuleLoader",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": true,
-        "token": "LazyModuleLoader",
-        "initTime": 0
-      }
-    },
-    "-1904419534": {
-      "id": "-1904419534",
-      "label": "SerializedGraph",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": true,
-        "token": "SerializedGraph"
-      }
-    },
-    "-1251270035": {
-      "id": "-1251270035",
-      "label": "RootTestModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-969610649": {
-      "id": "-969610649",
-      "label": "ModuleRef",
-      "parent": "-1251270035",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "RootTestModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-19112576": {
-      "id": "-19112576",
-      "label": "AppModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-2139588960": {
-      "id": "-2139588960",
-      "label": "AppModule",
-      "parent": "-19112576",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "AppModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "AppModule",
-        "initTime": 0
-      }
-    },
-    "-71302842": {
-      "id": "-71302842",
-      "label": "ModuleRef",
-      "parent": "-19112576",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "AppModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-2064622725": {
-      "id": "-2064622725",
-      "label": "ApplicationConfig",
-      "parent": "-19112576",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "AppModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-365265483": {
-      "id": "-365265483",
-      "label": "AppV1Controller",
-      "parent": "-19112576",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "AppModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "AppV1Controller",
-        "initTime": 0
-      }
-    },
-    "-774089708": {
-      "id": "-774089708",
-      "label": "AppV2Controller",
-      "parent": "-19112576",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "AppModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "AppV2Controller",
-        "initTime": 0
-      }
-    },
-    "-1125887048": {
-      "id": "-1125887048",
-      "label": "CoreModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-112192227": {
-      "id": "-112192227",
-      "label": "ApplicationConfig",
-      "parent": "-1125887048",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-2007711503": {
-      "id": "-2007711503",
-      "label": "LoggingInterceptor",
-      "parent": "-1125887048",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "CoreModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "APP_INTERCEPTOR (UUID: 1780085433)",
-        "subtype": "interceptor",
-        "initTime": 0,
-        "global": true
-      }
-    },
-    "-183456272": {
-      "id": "-183456272",
-      "label": "ModuleRef",
-      "parent": "1434441974",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CatsModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-1846830501": {
-      "id": "-1846830501",
-      "label": "ApplicationConfig",
-      "parent": "1434441974",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CatsModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-593595711": {
-      "id": "-593595711",
-      "label": "CatsService",
-      "parent": "1434441974",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "CatsModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "CatsService",
-        "initTime": 0
-      }
-    },
-    "-1550892030": {
-      "id": "-1550892030",
-      "label": "CatsController",
-      "parent": "1434441974",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "CatsModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "CatsController",
-        "initTime": 0,
-        "enhancers": [
-          {
-            "id": "208171089",
-            "subtype": "guard"
-          },
-          {
-            "name": "ParseIntPipe",
-            "methodKey": "findOne",
-            "subtype": "pipe"
-          }
-        ]
-      }
-    },
-    "-1378706112": {
-      "id": "-1378706112",
-      "label": "HelloModule",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "HelloModule",
-        "initTime": 0
-      }
-    },
-    "-1166465801": {
-      "id": "-1166465801",
-      "label": "ModuleRef",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-1191459348": {
-      "id": "-1191459348",
-      "label": "ApplicationConfig",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-1758187461": {
-      "id": "-1758187461",
-      "label": "HelloService",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": false,
-        "token": "HelloService",
-        "initTime": 0
-      }
-    },
-    "-2010060263": {
-      "id": "-2010060263",
-      "label": "Guard",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "injectable",
-        "internal": false,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": false,
-        "token": "Guard",
-        "subtype": "guard",
-        "initTime": 0
-      }
-    },
-    "-1124392646": {
-      "id": "-1124392646",
-      "label": "DurableModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-522935456": {
-      "id": "-522935456",
-      "label": "DurableModule",
-      "parent": "-1124392646",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DurableModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "DurableModule",
-        "initTime": 0
-      }
-    },
-    "-1808043520": {
-      "id": "-1808043520",
-      "label": "ModuleRef",
-      "parent": "-1124392646",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DurableModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-57038411": {
-      "id": "-57038411",
-      "label": "ApplicationConfig",
-      "parent": "-1124392646",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DurableModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-1673986099": {
-      "id": "-1673986099",
-      "label": "DurableService",
-      "parent": "-1124392646",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "DurableModule",
-        "durable": true,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": false,
-        "token": "DurableService",
-        "initTime": 0
-      }
-    },
-    "-848516688": {
-      "id": "-848516688",
-      "label": "DurableController",
-      "parent": "-1124392646",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "DurableModule",
-        "durable": true,
-        "static": false,
-        "transient": false,
-        "exported": false,
-        "token": "DurableController",
-        "initTime": 0
-      }
-    },
-    "-1096226358": {
-      "id": "-1096226358",
-      "label": "ModuleRef",
-      "parent": "521671888",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DogsModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-335387007": {
-      "id": "-335387007",
-      "label": "DogsService",
-      "parent": "521671888",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "DogsModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "DogsService",
-        "initTime": 0
-      }
-    },
-    "-1558907338": {
-      "id": "-1558907338",
-      "label": "DogsController",
-      "parent": "521671888",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "DogsModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "DogsController",
-        "initTime": 0
-      }
-    },
-    "-2003726489": {
-      "id": "-2003726489",
-      "label": "UsersModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-495603840": {
-      "id": "-495603840",
-      "label": "UsersModule",
-      "parent": "-2003726489",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "UsersModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "UsersModule",
-        "initTime": 0
-      }
-    },
-    "-618964563": {
-      "id": "-618964563",
-      "label": "ModuleRef",
-      "parent": "-2003726489",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "UsersModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-643958110": {
-      "id": "-643958110",
-      "label": "ApplicationConfig",
-      "parent": "-2003726489",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "UsersModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-1102473136": {
-      "id": "-1102473136",
-      "label": "UsersController",
-      "parent": "-2003726489",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "UsersModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "UsersController",
-        "initTime": 0
-      }
-    },
-    "-1098322034": {
-      "id": "-1098322034",
-      "label": "DatabaseModule",
-      "parent": "1528017428",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DatabaseModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "DatabaseModule",
-        "initTime": 0
-      }
-    },
-    "-616397055": {
-      "id": "-616397055",
-      "label": "DatabaseService",
-      "parent": "1528017428",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "DatabaseModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "DatabaseService",
-        "initTime": 0
-      }
-    },
-    "-377928898": {
-      "id": "-377928898",
-      "label": "DatabaseController",
-      "parent": "1528017428",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "DatabaseModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "DatabaseController",
-        "initTime": 0
-      }
-    },
-    "-511735264": {
-      "id": "-511735264",
-      "label": "ExternalSvcModule",
-      "parent": "791004148",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "ExternalSvcModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ExternalSvcModule",
-        "initTime": 0
-      }
-    },
-    "-660323910": {
-      "id": "-660323910",
-      "label": "ModuleRef",
-      "parent": "791004148",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "ExternalSvcModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-217737489": {
-      "id": "-217737489",
-      "label": "ApplicationConfig",
-      "parent": "791004148",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "ExternalSvcModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-1902429503": {
-      "id": "-1902429503",
-      "label": "ExternalSvcService",
-      "parent": "791004148",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "ExternalSvcModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "ExternalSvcService",
-        "initTime": 0
-      }
-    },
-    "-349899408": {
-      "id": "-349899408",
-      "label": "ExternalSvcController",
-      "parent": "791004148",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "ExternalSvcModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "ExternalSvcController",
-        "initTime": 0
-      }
-    },
-    "-493958991": {
-      "id": "-493958991",
-      "label": "ChatModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-2111857237": {
-      "id": "-2111857237",
-      "label": "ModuleRef",
-      "parent": "-493958991",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "ChatModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-234035039": {
-      "id": "-234035039",
-      "label": "RequestChainService",
-      "parent": "2133316171",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "RequestChainModule",
-        "durable": false,
-        "static": false,
-        "transient": false,
-        "exported": false,
-        "token": "RequestChainService",
-        "initTime": 0
-      }
-    },
-    "-1927427604": {
-      "id": "-1927427604",
-      "label": "RequestChainController",
-      "parent": "2133316171",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "RequestChainModule",
-        "durable": false,
-        "static": false,
-        "transient": false,
-        "exported": false,
-        "token": "RequestChainController",
-        "initTime": 0,
-        "enhancers": [
-          {
-            "id": "18347652",
-            "methodKey": "greeting",
-            "subtype": "interceptor"
-          }
-        ]
-      }
-    },
-    "-162987852": {
-      "id": "-162987852",
-      "label": "HelperModule",
-      "parent": "1142369607",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "HelperModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "HelperModule",
-        "initTime": 0
-      }
-    },
-    "-1469176692": {
-      "id": "-1469176692",
-      "label": "PropertiesModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-1501313730": {
-      "id": "-1501313730",
-      "label": "PropertiesModule",
-      "parent": "-1469176692",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "PropertiesModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "PropertiesModule",
-        "initTime": 0
-      }
-    },
-    "-1377446394": {
-      "id": "-1377446394",
-      "label": "ModuleRef",
-      "parent": "-1469176692",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "PropertiesModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-1494077847": {
-      "id": "-1494077847",
-      "label": "DependencyService",
-      "parent": "-1469176692",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "PropertiesModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "DependencyService",
-        "initTime": 0
-      }
-    },
-    "-1803759743": {
-      "id": "-1803759743",
-      "label": "PropertiesService",
-      "parent": "-1469176692",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "PropertiesModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "PropertiesService",
-        "initTime": 0
-      }
-    },
-    "-1813741655": {
-      "id": "-1813741655",
-      "label": "InputModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-2113121728": {
-      "id": "-2113121728",
-      "label": "InputModule",
-      "parent": "-1813741655",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InputModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "InputModule",
-        "initTime": 0
-      }
-    },
-    "-428979729": {
-      "id": "-428979729",
-      "label": "ModuleRef",
-      "parent": "-1813741655",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InputModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-453973276": {
-      "id": "-453973276",
-      "label": "ApplicationConfig",
-      "parent": "-1813741655",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InputModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-369869768": {
-      "id": "-369869768",
-      "label": "CircularModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-88210382": {
-      "id": "-88210382",
-      "label": "ModuleRef",
-      "parent": "-369869768",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CircularModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-1641626851": {
-      "id": "-1641626851",
-      "label": "ApplicationConfig",
-      "parent": "-369869768",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CircularModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-1721730431": {
-      "id": "-1721730431",
-      "label": "CircularService",
-      "parent": "-369869768",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "CircularModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": true,
-        "token": "CircularService",
-        "initTime": 0
-      }
-    }
-  },
-  "edges": {
-    "22193019": {
-      "source": "-19112576",
-      "target": "521671888",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "DogsModule"
-      },
-      "id": "22193019"
-    },
-    "33333764": {
-      "source": "791004148",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "ExternalSvcModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "33333764"
-    },
-    "40501732": {
-      "source": "521671888",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "DogsModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "40501732"
-    },
-    "73947303": {
-      "source": "-1813741655",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "InputModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "73947303"
-    },
-    "182501115": {
-      "source": "1434441974",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "CatsModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "182501115"
-    },
-    "189694679": {
-      "source": "1434456218",
-      "target": "671882984",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "InternalCoreModule",
-        "sourceClassName": "Reflector",
-        "targetClassName": "Reflector",
-        "sourceClassToken": "Reflector",
-        "targetClassToken": "Reflector",
-        "targetModuleName": "InternalCoreModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor",
-        "internal": true
-      },
-      "id": "189694679"
-    },
-    "231469845": {
-      "source": "-1803759743",
-      "target": "-1494077847",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "PropertiesModule",
-        "sourceClassName": "PropertiesService",
-        "targetClassName": "DependencyService",
-        "sourceClassToken": "PropertiesService",
-        "targetClassToken": "DependencyService",
-        "targetModuleName": "PropertiesModule",
-        "keyOrIndex": "service",
-        "injectionType": "property"
-      },
-      "id": "231469845"
-    },
-    "250652665": {
-      "source": "2133316171",
-      "target": "1142369607",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "RequestChainModule",
-        "targetModuleName": "HelperModule"
-      },
-      "id": "250652665"
-    },
-    "393939926": {
-      "source": "-1813741655",
-      "target": "-369869768",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "InputModule",
-        "targetModuleName": "CircularModule"
-      },
-      "id": "393939926"
-    },
-    "417363164": {
-      "source": "-1251270035",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "RootTestModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "417363164"
-    },
-    "469401997": {
-      "source": "-493958991",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "ChatModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "469401997"
-    },
-    "654001290": {
-      "source": "1472486160",
-      "target": "867482265",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "HelloController",
-        "targetClassName": "Interceptor",
-        "sourceClassToken": "HelloController",
-        "targetClassToken": "Interceptor",
-        "targetModuleName": "HelloModule",
-        "injectionType": "decorator"
-      },
-      "id": "654001290"
-    },
-    "676175891": {
-      "source": "-1251270035",
-      "target": "-19112576",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "RootTestModule",
-        "targetModuleName": "AppModule"
-      },
-      "id": "676175891"
-    },
-    "800268760": {
-      "source": "-1102473136",
-      "target": "603011239",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "UsersModule",
-        "sourceClassName": "UsersController",
-        "targetClassName": "UsersService",
-        "sourceClassToken": "UsersController",
-        "targetClassToken": "UsersService",
-        "targetModuleName": "UsersModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "800268760"
-    },
-    "804987620": {
-      "source": "-19112576",
-      "target": "-1125887048",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "CoreModule"
-      },
-      "id": "804987620"
-    },
-    "807697929": {
-      "source": "-19112576",
-      "target": "1528017428",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "DatabaseModule"
-      },
-      "id": "807697929"
-    },
-    "966350248": {
-      "source": "1131051184",
-      "target": "1074192353",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "ChatModule",
-        "sourceClassName": "ChatGateway",
-        "targetClassName": "ChatService",
-        "sourceClassToken": "ChatGateway",
-        "targetClassToken": "ChatService",
-        "targetModuleName": "ChatModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "966350248"
-    },
-    "987755577": {
-      "source": "-2003726489",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "UsersModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "987755577"
-    },
-    "1056428433": {
-      "source": "-19112576",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "1056428433"
-    },
-    "1059069749": {
-      "source": "-1558907338",
-      "target": "-335387007",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "DogsModule",
-        "sourceClassName": "DogsController",
-        "targetClassName": "DogsService",
-        "sourceClassToken": "DogsController",
-        "targetClassToken": "DogsService",
-        "targetModuleName": "DogsModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "1059069749"
-    },
-    "1142343545": {
-      "source": "-1758187461",
-      "target": "1004276345",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "HelloService",
-        "targetClassName": "Meta",
-        "sourceClassToken": "HelloService",
-        "targetClassToken": "META",
-        "targetModuleName": "HelloModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "1142343545"
-    },
-    "1178436405": {
-      "source": "1893794611",
-      "target": "55510001",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "UserByIdPipe",
-        "targetClassName": "UsersService",
-        "sourceClassToken": "UserByIdPipe",
-        "targetClassToken": "UsersService",
-        "targetModuleName": "HelloModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "1178436405"
-    },
-    "1195474320": {
-      "source": "-369869768",
-      "target": "-1813741655",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "CircularModule",
-        "targetModuleName": "InputModule"
-      },
-      "id": "1195474320"
-    },
-    "1247743823": {
-      "source": "2133316171",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "RequestChainModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "1247743823"
-    },
-    "1325313063": {
-      "source": "-1927427604",
-      "target": "18347652",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "RequestChainModule",
-        "sourceClassName": "RequestChainController",
-        "targetClassName": "LoggingInterceptor",
-        "sourceClassToken": "RequestChainController",
-        "targetClassToken": "LoggingInterceptor",
-        "targetModuleName": "RequestChainModule",
-        "injectionType": "decorator"
-      },
-      "id": "1325313063"
-    },
-    "1497653915": {
-      "source": "55510001",
-      "target": "1004276345",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "UsersService",
-        "targetClassName": "Meta",
-        "sourceClassToken": "UsersService",
-        "targetClassToken": "META",
-        "targetModuleName": "HelloModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "1497653915"
-    },
-    "1615322974": {
-      "source": "-1469176692",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "PropertiesModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "1615322974"
-    },
-    "1856016815": {
-      "source": "-1721730431",
-      "target": "594986539",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "CircularModule",
-        "sourceClassName": "CircularService",
-        "targetClassName": "InputService",
-        "sourceClassToken": "CircularService",
-        "targetClassToken": "InputService",
-        "targetModuleName": "InputModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "1856016815"
-    },
-    "1900414743": {
-      "source": "1472486160",
-      "target": "1893794611",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "HelloController",
-        "targetClassName": "UserByIdPipe",
-        "sourceClassToken": "HelloController",
-        "targetClassToken": "UserByIdPipe",
-        "targetModuleName": "HelloModule",
-        "injectionType": "decorator"
-      },
-      "id": "1900414743"
-    },
-    "1904579661": {
-      "source": "18347652",
-      "target": "928565345",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "RequestChainModule",
-        "sourceClassName": "LoggingInterceptor",
-        "targetClassName": "HelperService",
-        "sourceClassToken": "LoggingInterceptor",
-        "targetClassToken": "HelperService",
-        "targetModuleName": "HelperModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "1904579661"
-    },
-    "1960203007": {
-      "source": "-1803759743",
-      "target": "980514911",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "PropertiesModule",
-        "sourceClassName": "PropertiesService",
-        "targetClassName": "Symbol(token)",
-        "sourceClassToken": "PropertiesService",
-        "targetClassToken": "Symbol(token)",
-        "targetModuleName": "PropertiesModule",
-        "keyOrIndex": "symbolToken",
-        "injectionType": "property"
-      },
-      "id": "1960203007"
-    },
-    "1976848738": {
-      "source": "1528017428",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "DatabaseModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "1976848738"
-    },
-    "-1759625292": {
-      "source": "-553129559",
-      "target": "-326832201",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "InternalCoreModule",
-        "sourceClassName": "HttpAdapterHost",
-        "targetClassName": "HttpAdapterHost",
-        "sourceClassToken": "HttpAdapterHost",
-        "targetClassToken": "HttpAdapterHost",
-        "targetModuleName": "InternalCoreModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor",
-        "internal": true
-      },
-      "id": "-1759625292"
-    },
-    "-2105726668": {
-      "source": "-1803759743",
-      "target": "1010833816",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "PropertiesModule",
-        "sourceClassName": "PropertiesService",
-        "targetClassName": "token",
-        "sourceClassToken": "PropertiesService",
-        "targetClassToken": "token",
-        "targetModuleName": "PropertiesModule",
-        "keyOrIndex": "token",
-        "injectionType": "property"
-      },
-      "id": "-2105726668"
-    },
-    "-21463590": {
-      "source": "-1378706112",
-      "target": "1004276345",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "HelloModule",
-        "targetClassName": "Meta",
-        "sourceClassToken": "HelloModule",
-        "targetClassToken": "META",
-        "targetModuleName": "HelloModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-21463590"
-    },
-    "-1657371464": {
-      "source": "-1673986099",
-      "target": "1919157847",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "DurableModule",
-        "sourceClassName": "DurableService",
-        "targetClassName": "REQUEST",
-        "sourceClassToken": "DurableService",
-        "targetClassToken": "REQUEST",
-        "targetModuleName": "InternalCoreModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor",
-        "internal": true
-      },
-      "id": "-1657371464"
-    },
-    "-1303681274": {
-      "source": "928565345",
-      "target": "1919157847",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelperModule",
-        "sourceClassName": "HelperService",
-        "targetClassName": "REQUEST",
-        "sourceClassToken": "HelperService",
-        "targetClassToken": "REQUEST",
-        "targetModuleName": "InternalCoreModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor",
-        "internal": true
-      },
-      "id": "-1303681274"
-    },
-    "-886102564": {
-      "source": "208171089",
-      "target": "671882984",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "CatsModule",
-        "sourceClassName": "RolesGuard",
-        "targetClassName": "Reflector",
-        "sourceClassToken": "RolesGuard",
-        "targetClassToken": "Reflector",
-        "targetModuleName": "InternalCoreModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor",
-        "internal": true
-      },
-      "id": "-886102564"
-    },
-    "-2003045613": {
-      "source": "-377928898",
-      "target": "-616397055",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "DatabaseModule",
-        "sourceClassName": "DatabaseController",
-        "targetClassName": "DatabaseService",
-        "sourceClassToken": "DatabaseController",
-        "targetClassToken": "DatabaseService",
-        "targetModuleName": "DatabaseModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-2003045613"
-    },
-    "-881420795": {
-      "source": "-349899408",
-      "target": "-1902429503",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "ExternalSvcModule",
-        "sourceClassName": "ExternalSvcController",
-        "targetClassName": "ExternalSvcService",
-        "sourceClassToken": "ExternalSvcController",
-        "targetClassToken": "ExternalSvcService",
-        "targetModuleName": "ExternalSvcModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-881420795"
-    },
-    "-831049991": {
-      "source": "594986539",
-      "target": "-1721730431",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "InputModule",
-        "sourceClassName": "InputService",
-        "targetClassName": "CircularService",
-        "sourceClassToken": "InputService",
-        "targetClassToken": "CircularService",
-        "targetModuleName": "CircularModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-831049991"
-    },
-    "-2146943494": {
-      "source": "-234035039",
-      "target": "928565345",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "RequestChainModule",
-        "sourceClassName": "RequestChainService",
-        "targetClassName": "HelperService",
-        "sourceClassToken": "RequestChainService",
-        "targetClassToken": "HelperService",
-        "targetModuleName": "HelperModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-2146943494"
-    },
-    "-1816180282": {
-      "source": "-848516688",
-      "target": "-1673986099",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "DurableModule",
-        "sourceClassName": "DurableController",
-        "targetClassName": "DurableService",
-        "sourceClassToken": "DurableController",
-        "targetClassToken": "DurableService",
-        "targetModuleName": "DurableModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-1816180282"
-    },
-    "-180350082": {
-      "source": "-1550892030",
-      "target": "-593595711",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "CatsModule",
-        "sourceClassName": "CatsController",
-        "targetClassName": "CatsService",
-        "sourceClassToken": "CatsController",
-        "targetClassToken": "CatsService",
-        "targetModuleName": "CatsModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-180350082"
-    },
-    "-1043628608": {
-      "source": "1472486160",
-      "target": "-1758187461",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "HelloController",
-        "targetClassName": "HelloService",
-        "sourceClassToken": "HelloController",
-        "targetClassToken": "HelloService",
-        "targetModuleName": "HelloModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-1043628608"
-    },
-    "-1335121169": {
-      "source": "1472486160",
-      "target": "55510001",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "HelloController",
-        "targetClassName": "UsersService",
-        "sourceClassToken": "HelloController",
-        "targetClassToken": "UsersService",
-        "targetModuleName": "HelloModule",
-        "keyOrIndex": 1,
-        "injectionType": "constructor"
-      },
-      "id": "-1335121169"
-    },
-    "-296280311": {
-      "source": "-1927427604",
-      "target": "-234035039",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "RequestChainModule",
-        "sourceClassName": "RequestChainController",
-        "targetClassName": "RequestChainService",
-        "sourceClassToken": "RequestChainController",
-        "targetClassToken": "RequestChainService",
-        "targetModuleName": "RequestChainModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-296280311"
-    },
-    "-393224862": {
-      "source": "-19112576",
-      "target": "1434441974",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "CatsModule"
-      },
-      "id": "-393224862"
-    },
-    "-1675983900": {
-      "source": "-19112576",
-      "target": "1743739569",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "HelloModule"
-      },
-      "id": "-1675983900"
-    },
-    "-678699872": {
-      "source": "-19112576",
-      "target": "-1124392646",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "DurableModule"
-      },
-      "id": "-678699872"
-    },
-    "-158970266": {
-      "source": "-19112576",
-      "target": "-2003726489",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "UsersModule"
-      },
-      "id": "-158970266"
-    },
-    "-2086236431": {
-      "source": "-19112576",
-      "target": "791004148",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "ExternalSvcModule"
-      },
-      "id": "-2086236431"
-    },
-    "-192150092": {
-      "source": "-19112576",
-      "target": "-493958991",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "ChatModule"
-      },
-      "id": "-192150092"
-    },
-    "-1609022090": {
-      "source": "-19112576",
-      "target": "2133316171",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "RequestChainModule"
-      },
-      "id": "-1609022090"
-    },
-    "-773455435": {
-      "source": "-19112576",
-      "target": "-1469176692",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "PropertiesModule"
-      },
-      "id": "-773455435"
-    },
-    "-967144236": {
-      "source": "-19112576",
-      "target": "-1813741655",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "InputModule"
-      },
-      "id": "-967144236"
-    },
-    "-528424051": {
-      "source": "-1125887048",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "CoreModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "-528424051"
-    },
-    "-698929209": {
-      "source": "1743739569",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "HelloModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "-698929209"
-    },
-    "-1671708813": {
-      "source": "-1124392646",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "DurableModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "-1671708813"
-    },
-    "-665042842": {
-      "source": "1142369607",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "HelperModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "-665042842"
-    },
-    "-1891610441": {
-      "source": "-369869768",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "CircularModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "-1891610441"
-    },
-    "-878379437": {
-      "source": "-1550892030",
-      "target": "208171089",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "CatsModule",
-        "sourceClassName": "CatsController",
-        "targetClassName": "RolesGuard",
-        "sourceClassToken": "CatsController",
-        "targetClassToken": "RolesGuard",
-        "targetModuleName": "CatsModule",
-        "injectionType": "decorator"
-      },
-      "id": "-878379437"
-    },
-    "-822816169": {
-      "source": "1472486160",
-      "target": "-2010060263",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "HelloController",
-        "targetClassName": "Guard",
-        "sourceClassToken": "HelloController",
-        "targetClassToken": "Guard",
-        "targetModuleName": "HelloModule",
-        "injectionType": "decorator"
-      },
-      "id": "-822816169"
-    }
-  },
-  "entrypoints": {
-    "1131051184": [
-      {
-        "type": "websocket",
-        "methodName": "create",
-        "className": "ChatGateway",
-        "classNodeId": "1131051184",
-        "metadata": {
-          "port": 0,
-          "key": "createChat",
-          "message": "createChat"
-        },
-        "id": "1131051184_create"
-      },
-      {
-        "type": "websocket",
-        "methodName": "findAll",
-        "className": "ChatGateway",
-        "classNodeId": "1131051184",
-        "metadata": {
-          "port": 0,
-          "key": "findAllChat",
-          "message": "findAllChat"
-        },
-        "id": "1131051184_findAll"
-      },
-      {
-        "type": "websocket",
-        "methodName": "findOne",
-        "className": "ChatGateway",
-        "classNodeId": "1131051184",
-        "metadata": {
-          "port": 0,
-          "key": "findOneChat",
-          "message": "findOneChat"
-        },
-        "id": "1131051184_findOne"
-      },
-      {
-        "type": "websocket",
-        "methodName": "update",
-        "className": "ChatGateway",
-        "classNodeId": "1131051184",
-        "metadata": {
-          "port": 0,
-          "key": "updateChat",
-          "message": "updateChat"
-        },
-        "id": "1131051184_update"
-      },
-      {
-        "type": "websocket",
-        "methodName": "remove",
-        "className": "ChatGateway",
-        "classNodeId": "1131051184",
-        "metadata": {
-          "port": 0,
-          "key": "removeChat",
-          "message": "removeChat"
-        },
-        "id": "1131051184_remove"
-      }
-    ],
-    "1472486160": [
-      {
-        "type": "http-endpoint",
-        "methodName": "greeting",
-        "className": "HelloController",
-        "classNodeId": "1472486160",
-        "metadata": {
-          "key": "/hello",
-          "path": "/hello",
-          "requestMethod": "GET"
-        },
-        "id": "1472486160_greeting"
-      }
-    ],
-    "1634859874": [
-      {
-        "type": "middleware",
-        "methodName": "use",
-        "className": "LoggerMiddleware",
-        "classNodeId": "1634859874",
-        "metadata": {
-          "key": "/cats/",
-          "path": "/cats/",
-          "requestMethod": "POST"
-        },
-        "id": "1634859874_use"
-      },
-      {
-        "type": "middleware",
-        "methodName": "use",
-        "className": "LoggerMiddleware",
-        "classNodeId": "1634859874",
-        "metadata": {
-          "key": "/cats/",
-          "path": "/cats/",
-          "requestMethod": "GET"
-        },
-        "id": "1634859874_use"
-      },
-      {
-        "type": "middleware",
-        "methodName": "use",
-        "className": "LoggerMiddleware",
-        "classNodeId": "1634859874",
-        "metadata": {
-          "key": "/cats/:id",
-          "path": "/cats/:id",
-          "requestMethod": "GET"
-        },
-        "id": "1634859874_use"
-      }
-    ],
-    "-349899408": [
-      {
-        "type": "microservice",
-        "methodName": "create",
-        "className": "ExternalSvcController",
-        "classNodeId": "-349899408",
-        "metadata": {
-          "key": "createExternalSvc",
-          "transportId": "TCP",
-          "patterns": [
-            "createExternalSvc"
-          ],
-          "isEventHandler": false
-        },
-        "id": "-349899408_create"
-      },
-      {
-        "type": "microservice",
-        "methodName": "findAll",
-        "className": "ExternalSvcController",
-        "classNodeId": "-349899408",
-        "metadata": {
-          "key": "findAllExternalSvc",
-          "transportId": "TCP",
-          "patterns": [
-            "findAllExternalSvc"
-          ],
-          "isEventHandler": false
-        },
-        "id": "-349899408_findAll"
-      },
-      {
-        "type": "microservice",
-        "methodName": "findOne",
-        "className": "ExternalSvcController",
-        "classNodeId": "-349899408",
-        "metadata": {
-          "key": "findOneExternalSvc",
-          "transportId": "TCP",
-          "patterns": [
-            "findOneExternalSvc"
-          ],
-          "isEventHandler": false
-        },
-        "id": "-349899408_findOne"
-      },
-      {
-        "type": "microservice",
-        "methodName": "update",
-        "className": "ExternalSvcController",
-        "classNodeId": "-349899408",
-        "metadata": {
-          "key": "updateExternalSvc",
-          "transportId": "TCP",
-          "patterns": [
-            "updateExternalSvc"
-          ],
-          "isEventHandler": false
-        },
-        "id": "-349899408_update"
-      },
-      {
-        "type": "microservice",
-        "methodName": "remove",
-        "className": "ExternalSvcController",
-        "classNodeId": "-349899408",
-        "metadata": {
-          "key": "removeExternalSvc",
-          "transportId": "TCP",
-          "patterns": [
-            "removeExternalSvc"
-          ],
-          "isEventHandler": false
-        },
-        "id": "-349899408_remove"
-      }
-    ],
-    "-365265483": [
-      {
-        "type": "http-endpoint",
-        "methodName": "helloWorldV1",
-        "className": "AppV1Controller",
-        "classNodeId": "-365265483",
-        "metadata": {
-          "key": "/v1",
-          "path": "/v1",
-          "requestMethod": "GET",
-          "controllerVersion": "1"
-        },
-        "id": "-365265483_helloWorldV1"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "paramV1",
-        "className": "AppV1Controller",
-        "classNodeId": "-365265483",
-        "metadata": {
-          "key": "/v1/:param/hello",
-          "path": "/v1/:param/hello",
-          "requestMethod": "GET",
-          "controllerVersion": "1"
-        },
-        "id": "-365265483_paramV1"
-      }
-    ],
-    "-774089708": [
-      {
-        "type": "http-endpoint",
-        "methodName": "helloWorldV2",
-        "className": "AppV2Controller",
-        "classNodeId": "-774089708",
-        "metadata": {
-          "key": "/v2",
-          "path": "/v2",
-          "requestMethod": "GET",
-          "controllerVersion": "2"
-        },
-        "id": "-774089708_helloWorldV2"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "paramV1",
-        "className": "AppV2Controller",
-        "classNodeId": "-774089708",
-        "metadata": {
-          "key": "/v3/:param/hello",
-          "path": "/v3/:param/hello",
-          "requestMethod": "GET",
-          "methodVersion": "3",
-          "controllerVersion": "2"
-        },
-        "id": "-774089708_paramV1"
-      }
-    ],
-    "-1550892030": [
-      {
-        "type": "http-endpoint",
-        "methodName": "create",
-        "className": "CatsController",
-        "classNodeId": "-1550892030",
-        "metadata": {
-          "key": "/cats",
-          "path": "/cats",
-          "requestMethod": "POST"
-        },
-        "id": "-1550892030_create"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "findAll",
-        "className": "CatsController",
-        "classNodeId": "-1550892030",
-        "metadata": {
-          "key": "/cats",
-          "path": "/cats",
-          "requestMethod": "GET"
-        },
-        "id": "-1550892030_findAll"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "findOne",
-        "className": "CatsController",
-        "classNodeId": "-1550892030",
-        "metadata": {
-          "key": "/cats/:id",
-          "path": "/cats/:id",
-          "requestMethod": "GET"
-        },
-        "id": "-1550892030_findOne"
-      }
-    ],
-    "-848516688": [
-      {
-        "type": "http-endpoint",
-        "methodName": "greeting",
-        "className": "DurableController",
-        "classNodeId": "-848516688",
-        "metadata": {
-          "key": "/durable",
-          "path": "/durable",
-          "requestMethod": "GET"
-        },
-        "id": "-848516688_greeting"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "echo",
-        "className": "DurableController",
-        "classNodeId": "-848516688",
-        "metadata": {
-          "key": "/durable/echo",
-          "path": "/durable/echo",
-          "requestMethod": "GET"
-        },
-        "id": "-848516688_echo"
-      }
-    ],
-    "-1558907338": [
-      {
-        "type": "http-endpoint",
-        "methodName": "create",
-        "className": "DogsController",
-        "classNodeId": "-1558907338",
-        "metadata": {
-          "key": "/dogs",
-          "path": "/dogs",
-          "requestMethod": "POST"
-        },
-        "id": "-1558907338_create"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "findAll",
-        "className": "DogsController",
-        "classNodeId": "-1558907338",
-        "metadata": {
-          "key": "/dogs",
-          "path": "/dogs",
-          "requestMethod": "GET"
-        },
-        "id": "-1558907338_findAll"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "findOne",
-        "className": "DogsController",
-        "classNodeId": "-1558907338",
-        "metadata": {
-          "key": "/dogs/:id",
-          "path": "/dogs/:id",
-          "requestMethod": "GET"
-        },
-        "id": "-1558907338_findOne"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "update",
-        "className": "DogsController",
-        "classNodeId": "-1558907338",
-        "metadata": {
-          "key": "/dogs/:id",
-          "path": "/dogs/:id",
-          "requestMethod": "PATCH"
-        },
-        "id": "-1558907338_update"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "remove",
-        "className": "DogsController",
-        "classNodeId": "-1558907338",
-        "metadata": {
-          "key": "/dogs/:id",
-          "path": "/dogs/:id",
-          "requestMethod": "DELETE"
-        },
-        "id": "-1558907338_remove"
-      }
-    ],
-    "-1102473136": [
-      {
-        "type": "http-endpoint",
-        "methodName": "create",
-        "className": "UsersController",
-        "classNodeId": "-1102473136",
-        "metadata": {
-          "key": "/users",
-          "path": "/users",
-          "requestMethod": "POST"
-        },
-        "id": "-1102473136_create"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "findAll",
-        "className": "UsersController",
-        "classNodeId": "-1102473136",
-        "metadata": {
-          "key": "/users",
-          "path": "/users",
-          "requestMethod": "GET"
-        },
-        "id": "-1102473136_findAll"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "findOne",
-        "className": "UsersController",
-        "classNodeId": "-1102473136",
-        "metadata": {
-          "key": "/users/:id",
-          "path": "/users/:id",
-          "requestMethod": "GET"
-        },
-        "id": "-1102473136_findOne"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "update",
-        "className": "UsersController",
-        "classNodeId": "-1102473136",
-        "metadata": {
-          "key": "/users/:id",
-          "path": "/users/:id",
-          "requestMethod": "PATCH"
-        },
-        "id": "-1102473136_update"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "remove",
-        "className": "UsersController",
-        "classNodeId": "-1102473136",
-        "metadata": {
-          "key": "/users/:id",
-          "path": "/users/:id",
-          "requestMethod": "DELETE"
-        },
-        "id": "-1102473136_remove"
-      }
-    ],
-    "-377928898": [
-      {
-        "type": "http-endpoint",
-        "methodName": "create",
-        "className": "DatabaseController",
-        "classNodeId": "-377928898",
-        "metadata": {
-          "key": "/database",
-          "path": "/database",
-          "requestMethod": "POST"
-        },
-        "id": "-377928898_create"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "findAll",
-        "className": "DatabaseController",
-        "classNodeId": "-377928898",
-        "metadata": {
-          "key": "/database",
-          "path": "/database",
-          "requestMethod": "GET"
-        },
-        "id": "-377928898_findAll"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "findOne",
-        "className": "DatabaseController",
-        "classNodeId": "-377928898",
-        "metadata": {
-          "key": "/database/:id",
-          "path": "/database/:id",
-          "requestMethod": "GET"
-        },
-        "id": "-377928898_findOne"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "update",
-        "className": "DatabaseController",
-        "classNodeId": "-377928898",
-        "metadata": {
-          "key": "/database/:id",
-          "path": "/database/:id",
-          "requestMethod": "PATCH"
-        },
-        "id": "-377928898_update"
-      },
-      {
-        "type": "http-endpoint",
-        "methodName": "remove",
-        "className": "DatabaseController",
-        "classNodeId": "-377928898",
-        "metadata": {
-          "key": "/database/:id",
-          "path": "/database/:id",
-          "requestMethod": "DELETE"
-        },
-        "id": "-377928898_remove"
-      }
-    ],
-    "-1927427604": [
-      {
-        "type": "http-endpoint",
-        "methodName": "greeting",
-        "className": "RequestChainController",
-        "classNodeId": "-1927427604",
-        "metadata": {
-          "key": "/hello",
-          "path": "/hello",
-          "requestMethod": "GET"
-        },
-        "id": "-1927427604_greeting"
-      }
-    ]
-  },
-  "extras": {
-    "orphanedEnhancers": [
-      {
-        "subtype": "pipe",
-        "ref": "ValidationPipe"
-      },
-      {
-        "subtype": "filter",
-        "ref": "HttpExceptionFilter"
-      },
-      {
-        "subtype": "interceptor",
-        "ref": "TimeoutInterceptor"
-      }
-    ],
-    "attachedEnhancers": [
-      {
-        "nodeId": "2018972420"
-      },
-      {
-        "nodeId": "-2007711503"
-      }
-    ]
-  },
-  "status": "complete"
-}
\ No newline at end of file
diff --git a/integration/inspector/e2e/fixtures/pre-init-graph.json b/integration/inspector/e2e/fixtures/pre-init-graph.json
deleted file mode 100644
index 60aa1cc8e..000000000
--- a/integration/inspector/e2e/fixtures/pre-init-graph.json
+++ /dev/null
@@ -1,2629 +0,0 @@
-{
-  "nodes": {
-    "18347652": {
-      "id": "18347652",
-      "label": "LoggingInterceptor",
-      "parent": "2133316171",
-      "metadata": {
-        "type": "injectable",
-        "internal": false,
-        "sourceModuleName": "RequestChainModule",
-        "durable": false,
-        "static": false,
-        "transient": false,
-        "exported": false,
-        "token": "LoggingInterceptor",
-        "subtype": "interceptor",
-        "initTime": 0
-      }
-    },
-    "55510001": {
-      "id": "55510001",
-      "label": "UsersService",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": false,
-        "token": "UsersService",
-        "initTime": 0
-      }
-    },
-    "91819333": {
-      "id": "91819333",
-      "label": "ModuleRef",
-      "parent": "2133316171",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "RequestChainModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "203550704": {
-      "id": "203550704",
-      "label": "ExternalContextCreator",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": true,
-        "token": "ExternalContextCreator"
-      }
-    },
-    "208171089": {
-      "id": "208171089",
-      "label": "RolesGuard",
-      "parent": "1434441974",
-      "metadata": {
-        "type": "injectable",
-        "internal": false,
-        "sourceModuleName": "CatsModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "RolesGuard",
-        "subtype": "guard",
-        "initTime": 0
-      }
-    },
-    "225063248": {
-      "id": "225063248",
-      "label": "InternalCoreModule",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "InternalCoreModule",
-        "initTime": 0
-      }
-    },
-    "256260345": {
-      "id": "256260345",
-      "label": "ApplicationConfig",
-      "parent": "1528017428",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DatabaseModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "345516396": {
-      "id": "345516396",
-      "label": "ApplicationConfig",
-      "parent": "1142369607",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "HelperModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "345719894": {
-      "id": "345719894",
-      "label": "CoreModule",
-      "parent": "-1125887048",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "CoreModule",
-        "initTime": 0
-      }
-    },
-    "437945905": {
-      "id": "437945905",
-      "label": "ApplicationConfig",
-      "parent": "-1469176692",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "PropertiesModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "519735830": {
-      "id": "519735830",
-      "label": "ApplicationConfig",
-      "parent": "-493958991",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "ChatModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "521671888": {
-      "id": "521671888",
-      "label": "DogsModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "555176277": {
-      "id": "555176277",
-      "label": "InternalCoreModule",
-      "metadata": {
-        "type": "module",
-        "global": true,
-        "dynamic": true,
-        "internal": true
-      }
-    },
-    "594986539": {
-      "id": "594986539",
-      "label": "InputService",
-      "parent": "-1813741655",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "InputModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": true,
-        "token": "InputService",
-        "initTime": 0
-      }
-    },
-    "603011239": {
-      "id": "603011239",
-      "label": "UsersService",
-      "parent": "-2003726489",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "UsersModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "UsersService",
-        "initTime": 0
-      }
-    },
-    "671882984": {
-      "id": "671882984",
-      "label": "Reflector",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": true,
-        "token": "Reflector",
-        "initTime": 0
-      }
-    },
-    "791004148": {
-      "id": "791004148",
-      "label": "ExternalSvcModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "867482265": {
-      "id": "867482265",
-      "label": "Interceptor",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "injectable",
-        "internal": false,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": false,
-        "token": "Interceptor",
-        "subtype": "interceptor",
-        "initTime": 0
-      }
-    },
-    "927096496": {
-      "id": "927096496",
-      "label": "ApplicationConfig",
-      "parent": "2133316171",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "RequestChainModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "928565345": {
-      "id": "928565345",
-      "label": "HelperService",
-      "parent": "1142369607",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "HelperModule",
-        "durable": false,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": true,
-        "token": "HelperService",
-        "initTime": 0
-      }
-    },
-    "941957564": {
-      "id": "941957564",
-      "label": "RequestChainModule",
-      "parent": "2133316171",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "RequestChainModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "RequestChainModule",
-        "initTime": 0
-      }
-    },
-    "980514911": {
-      "id": "980514911",
-      "label": "Symbol(token)",
-      "parent": "-1469176692",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "PropertiesModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "Symbol(token)"
-      }
-    },
-    "1004276345": {
-      "id": "1004276345",
-      "label": "Meta",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": false,
-        "token": "META",
-        "initTime": 0
-      }
-    },
-    "1010833816": {
-      "id": "1010833816",
-      "label": "token",
-      "parent": "-1469176692",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "PropertiesModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "token"
-      }
-    },
-    "1047229654": {
-      "id": "1047229654",
-      "label": "CircularModule",
-      "parent": "-369869768",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CircularModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "CircularModule",
-        "initTime": 0
-      }
-    },
-    "1074192353": {
-      "id": "1074192353",
-      "label": "ChatService",
-      "parent": "-493958991",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "ChatModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "ChatService",
-        "initTime": 0
-      }
-    },
-    "1120316353": {
-      "id": "1120316353",
-      "label": "ModuleRef",
-      "parent": "1142369607",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "HelperModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "1131051184": {
-      "id": "1131051184",
-      "label": "ChatGateway",
-      "parent": "-493958991",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "ChatModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "ChatGateway",
-        "initTime": 0
-      }
-    },
-    "1142369607": {
-      "id": "1142369607",
-      "label": "HelperModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "1189153544": {
-      "id": "1189153544",
-      "label": "ChatModule",
-      "parent": "-493958991",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "ChatModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ChatModule",
-        "initTime": 0
-      }
-    },
-    "1253818496": {
-      "id": "1253818496",
-      "label": "RootTestModule",
-      "parent": "-1251270035",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "RootTestModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "RootTestModule",
-        "initTime": 0
-      }
-    },
-    "1433815174": {
-      "id": "1433815174",
-      "label": "DogsModule",
-      "parent": "521671888",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DogsModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "DogsModule",
-        "initTime": 0
-      }
-    },
-    "1434441974": {
-      "id": "1434441974",
-      "label": "CatsModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "1434456218": {
-      "id": "1434456218",
-      "label": "Reflector",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": true,
-        "token": "Reflector",
-        "initTime": 0
-      }
-    },
-    "1472486160": {
-      "id": "1472486160",
-      "label": "HelloController",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "transient": false,
-        "exported": false,
-        "token": "HelloController",
-        "initTime": 0,
-        "enhancers": [
-          {
-            "id": "-2010060263",
-            "methodKey": "greeting",
-            "subtype": "guard"
-          },
-          {
-            "id": "867482265",
-            "methodKey": "greeting",
-            "subtype": "interceptor"
-          },
-          {
-            "id": "1893794611",
-            "methodKey": "greeting",
-            "subtype": "pipe"
-          }
-        ]
-      }
-    },
-    "1528017428": {
-      "id": "1528017428",
-      "label": "DatabaseModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "1535366709": {
-      "id": "1535366709",
-      "label": "ApplicationConfig",
-      "parent": "521671888",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DogsModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "1551182002": {
-      "id": "1551182002",
-      "label": "ModuleRef",
-      "parent": "-1125887048",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "1616075090": {
-      "id": "1616075090",
-      "label": "CatsModule",
-      "parent": "1434441974",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CatsModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "CatsModule",
-        "initTime": 0
-      }
-    },
-    "1743739569": {
-      "id": "1743739569",
-      "label": "HelloModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": true,
-        "internal": false
-      }
-    },
-    "1771940178": {
-      "id": "1771940178",
-      "label": "ApplicationConfig",
-      "parent": "-1251270035",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "RootTestModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "1809676814": {
-      "id": "1809676814",
-      "label": "ModuleRef",
-      "parent": "1528017428",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DatabaseModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "1893794611": {
-      "id": "1893794611",
-      "label": "UserByIdPipe",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "injectable",
-        "internal": false,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "transient": false,
-        "exported": false,
-        "token": "UserByIdPipe",
-        "subtype": "pipe",
-        "initTime": 0
-      }
-    },
-    "1919157847": {
-      "id": "1919157847",
-      "label": "REQUEST",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": true,
-        "token": "REQUEST",
-        "initTime": 0
-      }
-    },
-    "2018972420": {
-      "id": "2018972420",
-      "label": "TransformInterceptor",
-      "parent": "-1125887048",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "CoreModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "APP_INTERCEPTOR (UUID: -1146749753)",
-        "subtype": "interceptor",
-        "initTime": 0,
-        "global": true
-      }
-    },
-    "2133316171": {
-      "id": "2133316171",
-      "label": "RequestChainModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-1486320561": {
-      "id": "-1486320561",
-      "label": "ModuleRef",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-651043398": {
-      "id": "-651043398",
-      "label": "ApplicationConfig",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-255469305": {
-      "id": "-255469305",
-      "label": "INQUIRER",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 1,
-        "transient": true,
-        "exported": true,
-        "token": "INQUIRER",
-        "initTime": 0
-      }
-    },
-    "-26938366": {
-      "id": "-26938366",
-      "label": "ModulesContainer",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": true,
-        "token": "ModulesContainer"
-      }
-    },
-    "-326832201": {
-      "id": "-326832201",
-      "label": "HttpAdapterHost",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": true,
-        "token": "HttpAdapterHost"
-      }
-    },
-    "-553129559": {
-      "id": "-553129559",
-      "label": "HttpAdapterHost",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": true,
-        "token": "HttpAdapterHost",
-        "initTime": 0
-      }
-    },
-    "-702581189": {
-      "id": "-702581189",
-      "label": "LazyModuleLoader",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": true,
-        "token": "LazyModuleLoader",
-        "initTime": 0
-      }
-    },
-    "-1904419534": {
-      "id": "-1904419534",
-      "label": "SerializedGraph",
-      "parent": "555176277",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InternalCoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": true,
-        "token": "SerializedGraph"
-      }
-    },
-    "-1251270035": {
-      "id": "-1251270035",
-      "label": "RootTestModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-969610649": {
-      "id": "-969610649",
-      "label": "ModuleRef",
-      "parent": "-1251270035",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "RootTestModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-19112576": {
-      "id": "-19112576",
-      "label": "AppModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-2139588960": {
-      "id": "-2139588960",
-      "label": "AppModule",
-      "parent": "-19112576",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "AppModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "AppModule",
-        "initTime": 0
-      }
-    },
-    "-71302842": {
-      "id": "-71302842",
-      "label": "ModuleRef",
-      "parent": "-19112576",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "AppModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-2064622725": {
-      "id": "-2064622725",
-      "label": "ApplicationConfig",
-      "parent": "-19112576",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "AppModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-365265483": {
-      "id": "-365265483",
-      "label": "AppV1Controller",
-      "parent": "-19112576",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "AppModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "AppV1Controller",
-        "initTime": 0
-      }
-    },
-    "-774089708": {
-      "id": "-774089708",
-      "label": "AppV2Controller",
-      "parent": "-19112576",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "AppModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "AppV2Controller",
-        "initTime": 0
-      }
-    },
-    "-1125887048": {
-      "id": "-1125887048",
-      "label": "CoreModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-112192227": {
-      "id": "-112192227",
-      "label": "ApplicationConfig",
-      "parent": "-1125887048",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CoreModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-2007711503": {
-      "id": "-2007711503",
-      "label": "LoggingInterceptor",
-      "parent": "-1125887048",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "CoreModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "APP_INTERCEPTOR (UUID: 1780085433)",
-        "subtype": "interceptor",
-        "initTime": 0,
-        "global": true
-      }
-    },
-    "-183456272": {
-      "id": "-183456272",
-      "label": "ModuleRef",
-      "parent": "1434441974",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CatsModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-1846830501": {
-      "id": "-1846830501",
-      "label": "ApplicationConfig",
-      "parent": "1434441974",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CatsModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-593595711": {
-      "id": "-593595711",
-      "label": "CatsService",
-      "parent": "1434441974",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "CatsModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "CatsService",
-        "initTime": 0
-      }
-    },
-    "-1550892030": {
-      "id": "-1550892030",
-      "label": "CatsController",
-      "parent": "1434441974",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "CatsModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "CatsController",
-        "initTime": 0,
-        "enhancers": [
-          {
-            "id": "208171089",
-            "subtype": "guard"
-          },
-          {
-            "name": "ParseIntPipe",
-            "methodKey": "findOne",
-            "subtype": "pipe"
-          }
-        ]
-      }
-    },
-    "-1378706112": {
-      "id": "-1378706112",
-      "label": "HelloModule",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "HelloModule",
-        "initTime": 0
-      }
-    },
-    "-1166465801": {
-      "id": "-1166465801",
-      "label": "ModuleRef",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-1191459348": {
-      "id": "-1191459348",
-      "label": "ApplicationConfig",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-1758187461": {
-      "id": "-1758187461",
-      "label": "HelloService",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": false,
-        "token": "HelloService",
-        "initTime": 0
-      }
-    },
-    "-2010060263": {
-      "id": "-2010060263",
-      "label": "Guard",
-      "parent": "1743739569",
-      "metadata": {
-        "type": "injectable",
-        "internal": false,
-        "sourceModuleName": "HelloModule",
-        "durable": false,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": false,
-        "token": "Guard",
-        "subtype": "guard",
-        "initTime": 0
-      }
-    },
-    "-1124392646": {
-      "id": "-1124392646",
-      "label": "DurableModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-522935456": {
-      "id": "-522935456",
-      "label": "DurableModule",
-      "parent": "-1124392646",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DurableModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "DurableModule",
-        "initTime": 0
-      }
-    },
-    "-1808043520": {
-      "id": "-1808043520",
-      "label": "ModuleRef",
-      "parent": "-1124392646",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DurableModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-57038411": {
-      "id": "-57038411",
-      "label": "ApplicationConfig",
-      "parent": "-1124392646",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DurableModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-1673986099": {
-      "id": "-1673986099",
-      "label": "DurableService",
-      "parent": "-1124392646",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "DurableModule",
-        "durable": true,
-        "static": false,
-        "scope": 2,
-        "transient": false,
-        "exported": false,
-        "token": "DurableService",
-        "initTime": 0
-      }
-    },
-    "-848516688": {
-      "id": "-848516688",
-      "label": "DurableController",
-      "parent": "-1124392646",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "DurableModule",
-        "durable": true,
-        "static": false,
-        "transient": false,
-        "exported": false,
-        "token": "DurableController",
-        "initTime": 0
-      }
-    },
-    "-1096226358": {
-      "id": "-1096226358",
-      "label": "ModuleRef",
-      "parent": "521671888",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DogsModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-335387007": {
-      "id": "-335387007",
-      "label": "DogsService",
-      "parent": "521671888",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "DogsModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "DogsService",
-        "initTime": 0
-      }
-    },
-    "-1558907338": {
-      "id": "-1558907338",
-      "label": "DogsController",
-      "parent": "521671888",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "DogsModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "DogsController",
-        "initTime": 0
-      }
-    },
-    "-2003726489": {
-      "id": "-2003726489",
-      "label": "UsersModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-495603840": {
-      "id": "-495603840",
-      "label": "UsersModule",
-      "parent": "-2003726489",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "UsersModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "UsersModule",
-        "initTime": 0
-      }
-    },
-    "-618964563": {
-      "id": "-618964563",
-      "label": "ModuleRef",
-      "parent": "-2003726489",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "UsersModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-643958110": {
-      "id": "-643958110",
-      "label": "ApplicationConfig",
-      "parent": "-2003726489",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "UsersModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-1102473136": {
-      "id": "-1102473136",
-      "label": "UsersController",
-      "parent": "-2003726489",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "UsersModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "UsersController",
-        "initTime": 0
-      }
-    },
-    "-1098322034": {
-      "id": "-1098322034",
-      "label": "DatabaseModule",
-      "parent": "1528017428",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "DatabaseModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "DatabaseModule",
-        "initTime": 0
-      }
-    },
-    "-616397055": {
-      "id": "-616397055",
-      "label": "DatabaseService",
-      "parent": "1528017428",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "DatabaseModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "DatabaseService",
-        "initTime": 0
-      }
-    },
-    "-377928898": {
-      "id": "-377928898",
-      "label": "DatabaseController",
-      "parent": "1528017428",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "DatabaseModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "DatabaseController",
-        "initTime": 0
-      }
-    },
-    "-511735264": {
-      "id": "-511735264",
-      "label": "ExternalSvcModule",
-      "parent": "791004148",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "ExternalSvcModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ExternalSvcModule",
-        "initTime": 0
-      }
-    },
-    "-660323910": {
-      "id": "-660323910",
-      "label": "ModuleRef",
-      "parent": "791004148",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "ExternalSvcModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-217737489": {
-      "id": "-217737489",
-      "label": "ApplicationConfig",
-      "parent": "791004148",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "ExternalSvcModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-1902429503": {
-      "id": "-1902429503",
-      "label": "ExternalSvcService",
-      "parent": "791004148",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "ExternalSvcModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "ExternalSvcService",
-        "initTime": 0
-      }
-    },
-    "-349899408": {
-      "id": "-349899408",
-      "label": "ExternalSvcController",
-      "parent": "791004148",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "ExternalSvcModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "ExternalSvcController",
-        "initTime": 0
-      }
-    },
-    "-493958991": {
-      "id": "-493958991",
-      "label": "ChatModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-2111857237": {
-      "id": "-2111857237",
-      "label": "ModuleRef",
-      "parent": "-493958991",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "ChatModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-234035039": {
-      "id": "-234035039",
-      "label": "RequestChainService",
-      "parent": "2133316171",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "RequestChainModule",
-        "durable": false,
-        "static": false,
-        "transient": false,
-        "exported": false,
-        "token": "RequestChainService",
-        "initTime": 0
-      }
-    },
-    "-1927427604": {
-      "id": "-1927427604",
-      "label": "RequestChainController",
-      "parent": "2133316171",
-      "metadata": {
-        "type": "controller",
-        "internal": false,
-        "sourceModuleName": "RequestChainModule",
-        "durable": false,
-        "static": false,
-        "transient": false,
-        "exported": false,
-        "token": "RequestChainController",
-        "initTime": 0,
-        "enhancers": [
-          {
-            "id": "18347652",
-            "methodKey": "greeting",
-            "subtype": "interceptor"
-          }
-        ]
-      }
-    },
-    "-162987852": {
-      "id": "-162987852",
-      "label": "HelperModule",
-      "parent": "1142369607",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "HelperModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "HelperModule",
-        "initTime": 0
-      }
-    },
-    "-1469176692": {
-      "id": "-1469176692",
-      "label": "PropertiesModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-1501313730": {
-      "id": "-1501313730",
-      "label": "PropertiesModule",
-      "parent": "-1469176692",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "PropertiesModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "PropertiesModule",
-        "initTime": 0
-      }
-    },
-    "-1377446394": {
-      "id": "-1377446394",
-      "label": "ModuleRef",
-      "parent": "-1469176692",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "PropertiesModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-1494077847": {
-      "id": "-1494077847",
-      "label": "DependencyService",
-      "parent": "-1469176692",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "PropertiesModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "DependencyService",
-        "initTime": 0
-      }
-    },
-    "-1803759743": {
-      "id": "-1803759743",
-      "label": "PropertiesService",
-      "parent": "-1469176692",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "PropertiesModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": false,
-        "token": "PropertiesService",
-        "initTime": 0
-      }
-    },
-    "-1813741655": {
-      "id": "-1813741655",
-      "label": "InputModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-2113121728": {
-      "id": "-2113121728",
-      "label": "InputModule",
-      "parent": "-1813741655",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InputModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "InputModule",
-        "initTime": 0
-      }
-    },
-    "-428979729": {
-      "id": "-428979729",
-      "label": "ModuleRef",
-      "parent": "-1813741655",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InputModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-453973276": {
-      "id": "-453973276",
-      "label": "ApplicationConfig",
-      "parent": "-1813741655",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "InputModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-369869768": {
-      "id": "-369869768",
-      "label": "CircularModule",
-      "metadata": {
-        "type": "module",
-        "global": false,
-        "dynamic": false,
-        "internal": false
-      }
-    },
-    "-88210382": {
-      "id": "-88210382",
-      "label": "ModuleRef",
-      "parent": "-369869768",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CircularModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ModuleRef"
-      }
-    },
-    "-1641626851": {
-      "id": "-1641626851",
-      "label": "ApplicationConfig",
-      "parent": "-369869768",
-      "metadata": {
-        "type": "provider",
-        "internal": true,
-        "sourceModuleName": "CircularModule",
-        "durable": false,
-        "static": true,
-        "scope": 0,
-        "transient": false,
-        "exported": false,
-        "token": "ApplicationConfig"
-      }
-    },
-    "-1721730431": {
-      "id": "-1721730431",
-      "label": "CircularService",
-      "parent": "-369869768",
-      "metadata": {
-        "type": "provider",
-        "internal": false,
-        "sourceModuleName": "CircularModule",
-        "durable": false,
-        "static": true,
-        "transient": false,
-        "exported": true,
-        "token": "CircularService",
-        "initTime": 0
-      }
-    }
-  },
-  "edges": {
-    "22193019": {
-      "source": "-19112576",
-      "target": "521671888",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "DogsModule"
-      },
-      "id": "22193019"
-    },
-    "33333764": {
-      "source": "791004148",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "ExternalSvcModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "33333764"
-    },
-    "40501732": {
-      "source": "521671888",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "DogsModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "40501732"
-    },
-    "73947303": {
-      "source": "-1813741655",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "InputModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "73947303"
-    },
-    "182501115": {
-      "source": "1434441974",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "CatsModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "182501115"
-    },
-    "189694679": {
-      "source": "1434456218",
-      "target": "671882984",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "InternalCoreModule",
-        "sourceClassName": "Reflector",
-        "targetClassName": "Reflector",
-        "sourceClassToken": "Reflector",
-        "targetClassToken": "Reflector",
-        "targetModuleName": "InternalCoreModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor",
-        "internal": true
-      },
-      "id": "189694679"
-    },
-    "231469845": {
-      "source": "-1803759743",
-      "target": "-1494077847",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "PropertiesModule",
-        "sourceClassName": "PropertiesService",
-        "targetClassName": "DependencyService",
-        "sourceClassToken": "PropertiesService",
-        "targetClassToken": "DependencyService",
-        "targetModuleName": "PropertiesModule",
-        "keyOrIndex": "service",
-        "injectionType": "property"
-      },
-      "id": "231469845"
-    },
-    "250652665": {
-      "source": "2133316171",
-      "target": "1142369607",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "RequestChainModule",
-        "targetModuleName": "HelperModule"
-      },
-      "id": "250652665"
-    },
-    "393939926": {
-      "source": "-1813741655",
-      "target": "-369869768",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "InputModule",
-        "targetModuleName": "CircularModule"
-      },
-      "id": "393939926"
-    },
-    "417363164": {
-      "source": "-1251270035",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "RootTestModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "417363164"
-    },
-    "469401997": {
-      "source": "-493958991",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "ChatModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "469401997"
-    },
-    "654001290": {
-      "source": "1472486160",
-      "target": "867482265",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "HelloController",
-        "targetClassName": "Interceptor",
-        "sourceClassToken": "HelloController",
-        "targetClassToken": "Interceptor",
-        "targetModuleName": "HelloModule",
-        "injectionType": "decorator"
-      },
-      "id": "654001290"
-    },
-    "676175891": {
-      "source": "-1251270035",
-      "target": "-19112576",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "RootTestModule",
-        "targetModuleName": "AppModule"
-      },
-      "id": "676175891"
-    },
-    "800268760": {
-      "source": "-1102473136",
-      "target": "603011239",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "UsersModule",
-        "sourceClassName": "UsersController",
-        "targetClassName": "UsersService",
-        "sourceClassToken": "UsersController",
-        "targetClassToken": "UsersService",
-        "targetModuleName": "UsersModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "800268760"
-    },
-    "804987620": {
-      "source": "-19112576",
-      "target": "-1125887048",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "CoreModule"
-      },
-      "id": "804987620"
-    },
-    "807697929": {
-      "source": "-19112576",
-      "target": "1528017428",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "DatabaseModule"
-      },
-      "id": "807697929"
-    },
-    "966350248": {
-      "source": "1131051184",
-      "target": "1074192353",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "ChatModule",
-        "sourceClassName": "ChatGateway",
-        "targetClassName": "ChatService",
-        "sourceClassToken": "ChatGateway",
-        "targetClassToken": "ChatService",
-        "targetModuleName": "ChatModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "966350248"
-    },
-    "987755577": {
-      "source": "-2003726489",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "UsersModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "987755577"
-    },
-    "1056428433": {
-      "source": "-19112576",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "1056428433"
-    },
-    "1059069749": {
-      "source": "-1558907338",
-      "target": "-335387007",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "DogsModule",
-        "sourceClassName": "DogsController",
-        "targetClassName": "DogsService",
-        "sourceClassToken": "DogsController",
-        "targetClassToken": "DogsService",
-        "targetModuleName": "DogsModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "1059069749"
-    },
-    "1142343545": {
-      "source": "-1758187461",
-      "target": "1004276345",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "HelloService",
-        "targetClassName": "Meta",
-        "sourceClassToken": "HelloService",
-        "targetClassToken": "META",
-        "targetModuleName": "HelloModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "1142343545"
-    },
-    "1178436405": {
-      "source": "1893794611",
-      "target": "55510001",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "UserByIdPipe",
-        "targetClassName": "UsersService",
-        "sourceClassToken": "UserByIdPipe",
-        "targetClassToken": "UsersService",
-        "targetModuleName": "HelloModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "1178436405"
-    },
-    "1195474320": {
-      "source": "-369869768",
-      "target": "-1813741655",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "CircularModule",
-        "targetModuleName": "InputModule"
-      },
-      "id": "1195474320"
-    },
-    "1247743823": {
-      "source": "2133316171",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "RequestChainModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "1247743823"
-    },
-    "1325313063": {
-      "source": "-1927427604",
-      "target": "18347652",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "RequestChainModule",
-        "sourceClassName": "RequestChainController",
-        "targetClassName": "LoggingInterceptor",
-        "sourceClassToken": "RequestChainController",
-        "targetClassToken": "LoggingInterceptor",
-        "targetModuleName": "RequestChainModule",
-        "injectionType": "decorator"
-      },
-      "id": "1325313063"
-    },
-    "1497653915": {
-      "source": "55510001",
-      "target": "1004276345",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "UsersService",
-        "targetClassName": "Meta",
-        "sourceClassToken": "UsersService",
-        "targetClassToken": "META",
-        "targetModuleName": "HelloModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "1497653915"
-    },
-    "1615322974": {
-      "source": "-1469176692",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "PropertiesModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "1615322974"
-    },
-    "1856016815": {
-      "source": "-1721730431",
-      "target": "594986539",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "CircularModule",
-        "sourceClassName": "CircularService",
-        "targetClassName": "InputService",
-        "sourceClassToken": "CircularService",
-        "targetClassToken": "InputService",
-        "targetModuleName": "InputModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "1856016815"
-    },
-    "1900414743": {
-      "source": "1472486160",
-      "target": "1893794611",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "HelloController",
-        "targetClassName": "UserByIdPipe",
-        "sourceClassToken": "HelloController",
-        "targetClassToken": "UserByIdPipe",
-        "targetModuleName": "HelloModule",
-        "injectionType": "decorator"
-      },
-      "id": "1900414743"
-    },
-    "1904579661": {
-      "source": "18347652",
-      "target": "928565345",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "RequestChainModule",
-        "sourceClassName": "LoggingInterceptor",
-        "targetClassName": "HelperService",
-        "sourceClassToken": "LoggingInterceptor",
-        "targetClassToken": "HelperService",
-        "targetModuleName": "HelperModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "1904579661"
-    },
-    "1960203007": {
-      "source": "-1803759743",
-      "target": "980514911",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "PropertiesModule",
-        "sourceClassName": "PropertiesService",
-        "targetClassName": "Symbol(token)",
-        "sourceClassToken": "PropertiesService",
-        "targetClassToken": "Symbol(token)",
-        "targetModuleName": "PropertiesModule",
-        "keyOrIndex": "symbolToken",
-        "injectionType": "property"
-      },
-      "id": "1960203007"
-    },
-    "1976848738": {
-      "source": "1528017428",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "DatabaseModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "1976848738"
-    },
-    "-1759625292": {
-      "source": "-553129559",
-      "target": "-326832201",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "InternalCoreModule",
-        "sourceClassName": "HttpAdapterHost",
-        "targetClassName": "HttpAdapterHost",
-        "sourceClassToken": "HttpAdapterHost",
-        "targetClassToken": "HttpAdapterHost",
-        "targetModuleName": "InternalCoreModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor",
-        "internal": true
-      },
-      "id": "-1759625292"
-    },
-    "-2105726668": {
-      "source": "-1803759743",
-      "target": "1010833816",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "PropertiesModule",
-        "sourceClassName": "PropertiesService",
-        "targetClassName": "token",
-        "sourceClassToken": "PropertiesService",
-        "targetClassToken": "token",
-        "targetModuleName": "PropertiesModule",
-        "keyOrIndex": "token",
-        "injectionType": "property"
-      },
-      "id": "-2105726668"
-    },
-    "-21463590": {
-      "source": "-1378706112",
-      "target": "1004276345",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "HelloModule",
-        "targetClassName": "Meta",
-        "sourceClassToken": "HelloModule",
-        "targetClassToken": "META",
-        "targetModuleName": "HelloModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-21463590"
-    },
-    "-1657371464": {
-      "source": "-1673986099",
-      "target": "1919157847",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "DurableModule",
-        "sourceClassName": "DurableService",
-        "targetClassName": "REQUEST",
-        "sourceClassToken": "DurableService",
-        "targetClassToken": "REQUEST",
-        "targetModuleName": "InternalCoreModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor",
-        "internal": true
-      },
-      "id": "-1657371464"
-    },
-    "-1303681274": {
-      "source": "928565345",
-      "target": "1919157847",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelperModule",
-        "sourceClassName": "HelperService",
-        "targetClassName": "REQUEST",
-        "sourceClassToken": "HelperService",
-        "targetClassToken": "REQUEST",
-        "targetModuleName": "InternalCoreModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor",
-        "internal": true
-      },
-      "id": "-1303681274"
-    },
-    "-886102564": {
-      "source": "208171089",
-      "target": "671882984",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "CatsModule",
-        "sourceClassName": "RolesGuard",
-        "targetClassName": "Reflector",
-        "sourceClassToken": "RolesGuard",
-        "targetClassToken": "Reflector",
-        "targetModuleName": "InternalCoreModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor",
-        "internal": true
-      },
-      "id": "-886102564"
-    },
-    "-2003045613": {
-      "source": "-377928898",
-      "target": "-616397055",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "DatabaseModule",
-        "sourceClassName": "DatabaseController",
-        "targetClassName": "DatabaseService",
-        "sourceClassToken": "DatabaseController",
-        "targetClassToken": "DatabaseService",
-        "targetModuleName": "DatabaseModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-2003045613"
-    },
-    "-881420795": {
-      "source": "-349899408",
-      "target": "-1902429503",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "ExternalSvcModule",
-        "sourceClassName": "ExternalSvcController",
-        "targetClassName": "ExternalSvcService",
-        "sourceClassToken": "ExternalSvcController",
-        "targetClassToken": "ExternalSvcService",
-        "targetModuleName": "ExternalSvcModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-881420795"
-    },
-    "-831049991": {
-      "source": "594986539",
-      "target": "-1721730431",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "InputModule",
-        "sourceClassName": "InputService",
-        "targetClassName": "CircularService",
-        "sourceClassToken": "InputService",
-        "targetClassToken": "CircularService",
-        "targetModuleName": "CircularModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-831049991"
-    },
-    "-2146943494": {
-      "source": "-234035039",
-      "target": "928565345",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "RequestChainModule",
-        "sourceClassName": "RequestChainService",
-        "targetClassName": "HelperService",
-        "sourceClassToken": "RequestChainService",
-        "targetClassToken": "HelperService",
-        "targetModuleName": "HelperModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-2146943494"
-    },
-    "-1816180282": {
-      "source": "-848516688",
-      "target": "-1673986099",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "DurableModule",
-        "sourceClassName": "DurableController",
-        "targetClassName": "DurableService",
-        "sourceClassToken": "DurableController",
-        "targetClassToken": "DurableService",
-        "targetModuleName": "DurableModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-1816180282"
-    },
-    "-180350082": {
-      "source": "-1550892030",
-      "target": "-593595711",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "CatsModule",
-        "sourceClassName": "CatsController",
-        "targetClassName": "CatsService",
-        "sourceClassToken": "CatsController",
-        "targetClassToken": "CatsService",
-        "targetModuleName": "CatsModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-180350082"
-    },
-    "-1043628608": {
-      "source": "1472486160",
-      "target": "-1758187461",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "HelloController",
-        "targetClassName": "HelloService",
-        "sourceClassToken": "HelloController",
-        "targetClassToken": "HelloService",
-        "targetModuleName": "HelloModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-1043628608"
-    },
-    "-1335121169": {
-      "source": "1472486160",
-      "target": "55510001",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "HelloController",
-        "targetClassName": "UsersService",
-        "sourceClassToken": "HelloController",
-        "targetClassToken": "UsersService",
-        "targetModuleName": "HelloModule",
-        "keyOrIndex": 1,
-        "injectionType": "constructor"
-      },
-      "id": "-1335121169"
-    },
-    "-296280311": {
-      "source": "-1927427604",
-      "target": "-234035039",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "RequestChainModule",
-        "sourceClassName": "RequestChainController",
-        "targetClassName": "RequestChainService",
-        "sourceClassToken": "RequestChainController",
-        "targetClassToken": "RequestChainService",
-        "targetModuleName": "RequestChainModule",
-        "keyOrIndex": 0,
-        "injectionType": "constructor"
-      },
-      "id": "-296280311"
-    },
-    "-393224862": {
-      "source": "-19112576",
-      "target": "1434441974",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "CatsModule"
-      },
-      "id": "-393224862"
-    },
-    "-1675983900": {
-      "source": "-19112576",
-      "target": "1743739569",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "HelloModule"
-      },
-      "id": "-1675983900"
-    },
-    "-678699872": {
-      "source": "-19112576",
-      "target": "-1124392646",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "DurableModule"
-      },
-      "id": "-678699872"
-    },
-    "-158970266": {
-      "source": "-19112576",
-      "target": "-2003726489",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "UsersModule"
-      },
-      "id": "-158970266"
-    },
-    "-2086236431": {
-      "source": "-19112576",
-      "target": "791004148",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "ExternalSvcModule"
-      },
-      "id": "-2086236431"
-    },
-    "-192150092": {
-      "source": "-19112576",
-      "target": "-493958991",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "ChatModule"
-      },
-      "id": "-192150092"
-    },
-    "-1609022090": {
-      "source": "-19112576",
-      "target": "2133316171",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "RequestChainModule"
-      },
-      "id": "-1609022090"
-    },
-    "-773455435": {
-      "source": "-19112576",
-      "target": "-1469176692",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "PropertiesModule"
-      },
-      "id": "-773455435"
-    },
-    "-967144236": {
-      "source": "-19112576",
-      "target": "-1813741655",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "AppModule",
-        "targetModuleName": "InputModule"
-      },
-      "id": "-967144236"
-    },
-    "-528424051": {
-      "source": "-1125887048",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "CoreModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "-528424051"
-    },
-    "-698929209": {
-      "source": "1743739569",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "HelloModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "-698929209"
-    },
-    "-1671708813": {
-      "source": "-1124392646",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "DurableModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "-1671708813"
-    },
-    "-665042842": {
-      "source": "1142369607",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "HelperModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "-665042842"
-    },
-    "-1891610441": {
-      "source": "-369869768",
-      "target": "555176277",
-      "metadata": {
-        "type": "module-to-module",
-        "sourceModuleName": "CircularModule",
-        "targetModuleName": "InternalCoreModule"
-      },
-      "id": "-1891610441"
-    },
-    "-878379437": {
-      "source": "-1550892030",
-      "target": "208171089",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "CatsModule",
-        "sourceClassName": "CatsController",
-        "targetClassName": "RolesGuard",
-        "sourceClassToken": "CatsController",
-        "targetClassToken": "RolesGuard",
-        "targetModuleName": "CatsModule",
-        "injectionType": "decorator"
-      },
-      "id": "-878379437"
-    },
-    "-822816169": {
-      "source": "1472486160",
-      "target": "-2010060263",
-      "metadata": {
-        "type": "class-to-class",
-        "sourceModuleName": "HelloModule",
-        "sourceClassName": "HelloController",
-        "targetClassName": "Guard",
-        "sourceClassToken": "HelloController",
-        "targetClassToken": "Guard",
-        "targetModuleName": "HelloModule",
-        "injectionType": "decorator"
-      },
-      "id": "-822816169"
-    }
-  },
-  "entrypoints": {},
-  "extras": {
-    "orphanedEnhancers": [],
-    "attachedEnhancers": [
-      {
-        "nodeId": "2018972420"
-      },
-      {
-        "nodeId": "-2007711503"
-      }
-    ]
-  },
-  "status": "complete"
-}
\ No newline at end of file
diff --git a/integration/inspector/src/app-v1.controller.ts b/integration/inspector/src/app-v1.controller.ts
deleted file mode 100644
index 90d1dacba..000000000
--- a/integration/inspector/src/app-v1.controller.ts
+++ /dev/null
@@ -1,16 +0,0 @@
-import { Controller, Get } from '@nestjs/common';
-
-@Controller({
-  version: '1',
-})
-export class AppV1Controller {
-  @Get('/')
-  helloWorldV1() {
-    return 'Hello World V1!';
-  }
-
-  @Get('/:param/hello')
-  paramV1() {
-    return 'Parameter V1!';
-  }
-}
diff --git a/integration/inspector/src/app-v2.controller.ts b/integration/inspector/src/app-v2.controller.ts
deleted file mode 100644
index 5be777871..000000000
--- a/integration/inspector/src/app-v2.controller.ts
+++ /dev/null
@@ -1,17 +0,0 @@
-import { Controller, Get, Version } from '@nestjs/common';
-
-@Controller({
-  version: '2',
-})
-export class AppV2Controller {
-  @Get('/')
-  helloWorldV2() {
-    return 'Hello World V2!';
-  }
-
-  @Version('3')
-  @Get('/:param/hello')
-  paramV1() {
-    return 'Parameter V2!';
-  }
-}
diff --git a/integration/inspector/src/app.module.ts b/integration/inspector/src/app.module.ts
deleted file mode 100644
index 1d395b9bf..000000000
--- a/integration/inspector/src/app.module.ts
+++ /dev/null
@@ -1,46 +0,0 @@
-import { Module, Scope } from '@nestjs/common';
-import { AppV1Controller } from './app-v1.controller';
-import { AppV2Controller } from './app-v2.controller';
-import { CatsModule } from './cats/cats.module';
-import { ChatModule } from './chat/chat.module';
-import { HelloModule as CircularHelloModule } from './circular-hello/hello.module';
-import { HelloService } from './circular-hello/hello.service';
-import { InputModule } from './circular-modules/input.module';
-import { CoreModule } from './core/core.module';
-import { DatabaseModule } from './database/database.module';
-import { DogsModule } from './dogs/dogs.module';
-import { DurableModule } from './durable/durable.module';
-import { ExternalSvcModule } from './external-svc/external-svc.module';
-import { PropertiesModule } from './properties/properties.module';
-import { RequestChainModule } from './request-chain/request-chain.module';
-import { UsersModule } from './users/users.module';
-
-class Meta {
-  static COUNTER = 0;
-  constructor(private readonly helloService: HelloService) {
-    Meta.COUNTER++;
-  }
-}
-
-@Module({
-  imports: [
-    CoreModule,
-    CatsModule,
-    CircularHelloModule.forRoot({
-      provide: 'META',
-      useClass: Meta,
-      scope: Scope.REQUEST,
-    }),
-    DurableModule,
-    DogsModule,
-    UsersModule,
-    DatabaseModule,
-    ExternalSvcModule,
-    ChatModule,
-    RequestChainModule,
-    PropertiesModule,
-    InputModule,
-  ],
-  controllers: [AppV1Controller, AppV2Controller],
-})
-export class AppModule {}
diff --git a/integration/inspector/src/cats/cats.controller.ts b/integration/inspector/src/cats/cats.controller.ts
deleted file mode 100644
index b9f929a21..000000000
--- a/integration/inspector/src/cats/cats.controller.ts
+++ /dev/null
@@ -1,30 +0,0 @@
-import { Body, Controller, Get, Param, Post, UseGuards } from '@nestjs/common';
-import { RolesGuard } from '../common/guards/roles.guard';
-import { ParseIntPipe } from '../common/pipes/parse-int.pipe';
-import { CatsService } from './cats.service';
-import { CreateCatDto } from './dto/create-cat.dto';
-import { Cat } from './interfaces/cat.interface';
-
-@UseGuards(RolesGuard)
-@Controller('cats')
-export class CatsController {
-  constructor(private readonly catsService: CatsService) {}
-
-  @Post()
-  async create(@Body() createCatDto: CreateCatDto) {
-    this.catsService.create(createCatDto);
-  }
-
-  @Get()
-  async findAll(): Promise<Cat[]> {
-    return this.catsService.findAll();
-  }
-
-  @Get(':id')
-  findOne(
-    @Param('id', new ParseIntPipe())
-    id: number,
-  ) {
-    // get by ID logic
-  }
-}
diff --git a/integration/inspector/src/cats/cats.module.ts b/integration/inspector/src/cats/cats.module.ts
deleted file mode 100644
index f3291c7d1..000000000
--- a/integration/inspector/src/cats/cats.module.ts
+++ /dev/null
@@ -1,9 +0,0 @@
-import { Module } from '@nestjs/common';
-import { CatsController } from './cats.controller';
-import { CatsService } from './cats.service';
-
-@Module({
-  controllers: [CatsController],
-  providers: [CatsService],
-})
-export class CatsModule {}
diff --git a/integration/inspector/src/cats/cats.service.ts b/integration/inspector/src/cats/cats.service.ts
deleted file mode 100644
index 2619cd717..000000000
--- a/integration/inspector/src/cats/cats.service.ts
+++ /dev/null
@@ -1,15 +0,0 @@
-import { Injectable } from '@nestjs/common';
-import { Cat } from './interfaces/cat.interface';
-
-@Injectable()
-export class CatsService {
-  private readonly cats: Cat[] = [];
-
-  create(cat: Cat) {
-    this.cats.push(cat);
-  }
-
-  findAll(): Cat[] {
-    return this.cats;
-  }
-}
diff --git a/integration/inspector/src/cats/dto/create-cat.dto.ts b/integration/inspector/src/cats/dto/create-cat.dto.ts
deleted file mode 100644
index acd7d288b..000000000
--- a/integration/inspector/src/cats/dto/create-cat.dto.ts
+++ /dev/null
@@ -1,12 +0,0 @@
-import { IsInt, IsString } from 'class-validator';
-
-export class CreateCatDto {
-  @IsString()
-  readonly name: string;
-
-  @IsInt()
-  readonly age: number;
-
-  @IsString()
-  readonly breed: string;
-}
diff --git a/integration/inspector/src/cats/interfaces/cat.interface.ts b/integration/inspector/src/cats/interfaces/cat.interface.ts
deleted file mode 100644
index 961c97391..000000000
--- a/integration/inspector/src/cats/interfaces/cat.interface.ts
+++ /dev/null
@@ -1,5 +0,0 @@
-export interface Cat {
-  name: string;
-  age: number;
-  breed: string;
-}
diff --git a/integration/inspector/src/chat/chat.gateway.ts b/integration/inspector/src/chat/chat.gateway.ts
deleted file mode 100644
index 75e6c7c28..000000000
--- a/integration/inspector/src/chat/chat.gateway.ts
+++ /dev/null
@@ -1,38 +0,0 @@
-import {
-  WebSocketGateway,
-  SubscribeMessage,
-  MessageBody,
-} from '@nestjs/websockets';
-import { ChatService } from './chat.service';
-import { CreateChatDto } from './dto/create-chat.dto';
-import { UpdateChatDto } from './dto/update-chat.dto';
-
-@WebSocketGateway()
-export class ChatGateway {
-  constructor(private readonly chatService: ChatService) {}
-
-  @SubscribeMessage('createChat')
-  create(@MessageBody() createChatDto: CreateChatDto) {
-    return this.chatService.create(createChatDto);
-  }
-
-  @SubscribeMessage('findAllChat')
-  findAll() {
-    return this.chatService.findAll();
-  }
-
-  @SubscribeMessage('findOneChat')
-  findOne(@MessageBody() id: number) {
-    return this.chatService.findOne(id);
-  }
-
-  @SubscribeMessage('updateChat')
-  update(@MessageBody() updateChatDto: UpdateChatDto) {
-    return this.chatService.update(updateChatDto.id, updateChatDto);
-  }
-
-  @SubscribeMessage('removeChat')
-  remove(@MessageBody() id: number) {
-    return this.chatService.remove(id);
-  }
-}
diff --git a/integration/inspector/src/chat/chat.module.ts b/integration/inspector/src/chat/chat.module.ts
deleted file mode 100644
index d3ad301f5..000000000
--- a/integration/inspector/src/chat/chat.module.ts
+++ /dev/null
@@ -1,8 +0,0 @@
-import { Module } from '@nestjs/common';
-import { ChatService } from './chat.service';
-import { ChatGateway } from './chat.gateway';
-
-@Module({
-  providers: [ChatGateway, ChatService],
-})
-export class ChatModule {}
diff --git a/integration/inspector/src/chat/chat.service.ts b/integration/inspector/src/chat/chat.service.ts
deleted file mode 100644
index 1fa0676de..000000000
--- a/integration/inspector/src/chat/chat.service.ts
+++ /dev/null
@@ -1,26 +0,0 @@
-import { Injectable } from '@nestjs/common';
-import { CreateChatDto } from './dto/create-chat.dto';
-import { UpdateChatDto } from './dto/update-chat.dto';
-
-@Injectable()
-export class ChatService {
-  create(createChatDto: CreateChatDto) {
-    return 'This action adds a new chat';
-  }
-
-  findAll() {
-    return `This action returns all chat`;
-  }
-
-  findOne(id: number) {
-    return `This action returns a #${id} chat`;
-  }
-
-  update(id: number, updateChatDto: UpdateChatDto) {
-    return `This action updates a #${id} chat`;
-  }
-
-  remove(id: number) {
-    return `This action removes a #${id} chat`;
-  }
-}
diff --git a/integration/inspector/src/chat/dto/create-chat.dto.ts b/integration/inspector/src/chat/dto/create-chat.dto.ts
deleted file mode 100644
index d9fd9013a..000000000
--- a/integration/inspector/src/chat/dto/create-chat.dto.ts
+++ /dev/null
@@ -1 +0,0 @@
-export class CreateChatDto {}
diff --git a/integration/inspector/src/chat/dto/update-chat.dto.ts b/integration/inspector/src/chat/dto/update-chat.dto.ts
deleted file mode 100644
index 0a372f666..000000000
--- a/integration/inspector/src/chat/dto/update-chat.dto.ts
+++ /dev/null
@@ -1,6 +0,0 @@
-import { PartialType } from '@nestjs/mapped-types';
-import { CreateChatDto } from './create-chat.dto';
-
-export class UpdateChatDto extends PartialType(CreateChatDto) {
-  id: number;
-}
diff --git a/integration/inspector/src/chat/entities/chat.entity.ts b/integration/inspector/src/chat/entities/chat.entity.ts
deleted file mode 100644
index 7e881f92f..000000000
--- a/integration/inspector/src/chat/entities/chat.entity.ts
+++ /dev/null
@@ -1 +0,0 @@
-export class Chat {}
diff --git a/integration/inspector/src/circular-hello/dto/test.dto.ts b/integration/inspector/src/circular-hello/dto/test.dto.ts
deleted file mode 100644
index b3a30f671..000000000
--- a/integration/inspector/src/circular-hello/dto/test.dto.ts
+++ /dev/null
@@ -1,10 +0,0 @@
-import { IsString, IsNotEmpty, IsNumber } from 'class-validator';
-
-export class TestDto {
-  @IsString()
-  @IsNotEmpty()
-  string: string;
-
-  @IsNumber()
-  number: number;
-}
diff --git a/integration/inspector/src/circular-hello/guards/request-scoped.guard.ts b/integration/inspector/src/circular-hello/guards/request-scoped.guard.ts
deleted file mode 100644
index 7e5fe1788..000000000
--- a/integration/inspector/src/circular-hello/guards/request-scoped.guard.ts
+++ /dev/null
@@ -1,21 +0,0 @@
-import {
-  CanActivate,
-  ExecutionContext,
-  Injectable,
-  Scope,
-} from '@nestjs/common';
-import { Observable } from 'rxjs';
-
-@Injectable({ scope: Scope.REQUEST })
-export class Guard implements CanActivate {
-  static COUNTER = 0;
-  constructor() {
-    Guard.COUNTER++;
-  }
-
-  canActivate(
-    context: ExecutionContext,
-  ): boolean | Promise<boolean> | Observable<boolean> {
-    return true;
-  }
-}
diff --git a/integration/inspector/src/circular-hello/hello.controller.ts b/integration/inspector/src/circular-hello/hello.controller.ts
deleted file mode 100644
index 5b4af7bf2..000000000
--- a/integration/inspector/src/circular-hello/hello.controller.ts
+++ /dev/null
@@ -1,30 +0,0 @@
-import {
-  Controller,
-  Get,
-  Param,
-  UseGuards,
-  UseInterceptors,
-} from '@nestjs/common';
-import { Guard } from './guards/request-scoped.guard';
-import { HelloService } from './hello.service';
-import { Interceptor } from './interceptors/logging.interceptor';
-import { UserByIdPipe } from './users/user-by-id.pipe';
-import { UsersService } from './users/users.service';
-
-@Controller('hello')
-export class HelloController {
-  static COUNTER = 0;
-  constructor(
-    private readonly helloService: HelloService,
-    private readonly usersService: UsersService,
-  ) {
-    HelloController.COUNTER++;
-  }
-
-  @UseGuards(Guard)
-  @UseInterceptors(Interceptor)
-  @Get()
-  greeting(@Param('id', UserByIdPipe) id): string {
-    return this.helloService.greeting();
-  }
-}
diff --git a/integration/inspector/src/circular-hello/hello.module.ts b/integration/inspector/src/circular-hello/hello.module.ts
deleted file mode 100644
index 1a0d0bbfd..000000000
--- a/integration/inspector/src/circular-hello/hello.module.ts
+++ /dev/null
@@ -1,19 +0,0 @@
-import { DynamicModule, Inject, Module, Provider } from '@nestjs/common';
-import { HelloController } from './hello.controller';
-import { HelloService } from './hello.service';
-import { UsersService } from './users/users.service';
-
-@Module({
-  controllers: [HelloController],
-  providers: [HelloService, UsersService],
-})
-export class HelloModule {
-  constructor(@Inject('META') private readonly meta) {}
-
-  static forRoot(meta: Provider): DynamicModule {
-    return {
-      module: HelloModule,
-      providers: [meta],
-    };
-  }
-}
diff --git a/integration/inspector/src/circular-hello/hello.service.ts b/integration/inspector/src/circular-hello/hello.service.ts
deleted file mode 100644
index a0a346ebf..000000000
--- a/integration/inspector/src/circular-hello/hello.service.ts
+++ /dev/null
@@ -1,13 +0,0 @@
-import { Inject, Injectable, Scope } from '@nestjs/common';
-
-@Injectable({ scope: Scope.REQUEST })
-export class HelloService {
-  static COUNTER = 0;
-  constructor(@Inject('META') private readonly meta) {
-    HelloService.COUNTER++;
-  }
-
-  greeting(): string {
-    return 'Hello world!';
-  }
-}
diff --git a/integration/inspector/src/circular-hello/interceptors/logging.interceptor.ts b/integration/inspector/src/circular-hello/interceptors/logging.interceptor.ts
deleted file mode 100644
index b8b4e5793..000000000
--- a/integration/inspector/src/circular-hello/interceptors/logging.interceptor.ts
+++ /dev/null
@@ -1,19 +0,0 @@
-import {
-  CallHandler,
-  ExecutionContext,
-  Injectable,
-  NestInterceptor,
-  Scope,
-} from '@nestjs/common';
-import { Observable } from 'rxjs';
-
-@Injectable({ scope: Scope.REQUEST })
-export class Interceptor implements NestInterceptor {
-  static COUNTER = 0;
-  constructor() {
-    Interceptor.COUNTER++;
-  }
-  intercept(context: ExecutionContext, call: CallHandler): Observable<any> {
-    return call.handle();
-  }
-}
diff --git a/integration/inspector/src/circular-hello/users/user-by-id.pipe.ts b/integration/inspector/src/circular-hello/users/user-by-id.pipe.ts
deleted file mode 100644
index 2b81cb6fb..000000000
--- a/integration/inspector/src/circular-hello/users/user-by-id.pipe.ts
+++ /dev/null
@@ -1,14 +0,0 @@
-import { ArgumentMetadata, Injectable, PipeTransform } from '@nestjs/common';
-import { UsersService } from './users.service';
-
-@Injectable()
-export class UserByIdPipe implements PipeTransform<string> {
-  static COUNTER = 0;
-  constructor(private readonly usersService: UsersService) {
-    UserByIdPipe.COUNTER++;
-  }
-
-  transform(value: string, metadata: ArgumentMetadata) {
-    return this.usersService.findById(value);
-  }
-}
diff --git a/integration/inspector/src/circular-hello/users/users.service.ts b/integration/inspector/src/circular-hello/users/users.service.ts
deleted file mode 100644
index f1cb617e1..000000000
--- a/integration/inspector/src/circular-hello/users/users.service.ts
+++ /dev/null
@@ -1,13 +0,0 @@
-import { Inject, Injectable, Scope } from '@nestjs/common';
-
-@Injectable({ scope: Scope.REQUEST })
-export class UsersService {
-  static COUNTER = 0;
-  constructor(@Inject('META') private readonly meta) {
-    UsersService.COUNTER++;
-  }
-
-  findById(id: string) {
-    return { id };
-  }
-}
diff --git a/integration/inspector/src/circular-modules/circular.module.ts b/integration/inspector/src/circular-modules/circular.module.ts
deleted file mode 100644
index bb6afb42a..000000000
--- a/integration/inspector/src/circular-modules/circular.module.ts
+++ /dev/null
@@ -1,10 +0,0 @@
-import { Module, forwardRef } from '@nestjs/common';
-import { CircularService } from './circular.service';
-import { InputModule } from './input.module';
-
-@Module({
-  imports: [forwardRef(() => InputModule)],
-  providers: [CircularService],
-  exports: [CircularService],
-})
-export class CircularModule {}
diff --git a/integration/inspector/src/circular-modules/circular.service.ts b/integration/inspector/src/circular-modules/circular.service.ts
deleted file mode 100644
index 546d63e6e..000000000
--- a/integration/inspector/src/circular-modules/circular.service.ts
+++ /dev/null
@@ -1,10 +0,0 @@
-import { Injectable, forwardRef, Inject } from '@nestjs/common';
-import { InputService } from './input.service';
-
-@Injectable()
-export class CircularService {
-  constructor(
-    @Inject(forwardRef(() => InputService))
-    public readonly service: InputService,
-  ) {}
-}
diff --git a/integration/inspector/src/circular-modules/input.module.ts b/integration/inspector/src/circular-modules/input.module.ts
deleted file mode 100644
index c76dcaa85..000000000
--- a/integration/inspector/src/circular-modules/input.module.ts
+++ /dev/null
@@ -1,10 +0,0 @@
-import { Module, forwardRef } from '@nestjs/common';
-import { CircularModule } from './circular.module';
-import { InputService } from './input.service';
-
-@Module({
-  imports: [forwardRef(() => CircularModule)],
-  providers: [InputService],
-  exports: [InputService],
-})
-export class InputModule {}
diff --git a/integration/inspector/src/circular-modules/input.service.ts b/integration/inspector/src/circular-modules/input.service.ts
deleted file mode 100644
index 342e8bf0d..000000000
--- a/integration/inspector/src/circular-modules/input.service.ts
+++ /dev/null
@@ -1,10 +0,0 @@
-import { Injectable, Inject, forwardRef } from '@nestjs/common';
-import { CircularService } from './circular.service';
-
-@Injectable()
-export class InputService {
-  constructor(
-    @Inject(forwardRef(() => CircularService))
-    public readonly service: CircularService,
-  ) {}
-}
diff --git a/integration/inspector/src/common/filters/http-exception.filter.ts b/integration/inspector/src/common/filters/http-exception.filter.ts
deleted file mode 100644
index acabf619c..000000000
--- a/integration/inspector/src/common/filters/http-exception.filter.ts
+++ /dev/null
@@ -1,22 +0,0 @@
-import {
-  ArgumentsHost,
-  Catch,
-  ExceptionFilter,
-  HttpException,
-} from '@nestjs/common';
-
-@Catch(HttpException)
-export class HttpExceptionFilter implements ExceptionFilter<HttpException> {
-  catch(exception: HttpException, host: ArgumentsHost) {
-    const ctx = host.switchToHttp();
-    const response = ctx.getResponse();
-    const request = ctx.getRequest();
-    const statusCode = exception.getStatus();
-
-    response.status(statusCode).json({
-      statusCode,
-      timestamp: new Date().toISOString(),
-      path: request.url,
-    });
-  }
-}
diff --git a/integration/inspector/src/common/guards/roles.guard.ts b/integration/inspector/src/common/guards/roles.guard.ts
deleted file mode 100644
index 0ae26c41d..000000000
--- a/integration/inspector/src/common/guards/roles.guard.ts
+++ /dev/null
@@ -1,20 +0,0 @@
-import { CanActivate, ExecutionContext, Injectable } from '@nestjs/common';
-import { Reflector } from '@nestjs/core';
-
-@Injectable()
-export class RolesGuard implements CanActivate {
-  constructor(private readonly reflector: Reflector) {}
-
-  canActivate(context: ExecutionContext): boolean {
-    const roles = this.reflector.get<string[]>('roles', context.getHandler());
-    if (!roles) {
-      return true;
-    }
-    const request = context.switchToHttp().getRequest();
-    const user = request.user;
-    const hasRole = () =>
-      user.roles.some(role => !!roles.find(item => item === role));
-
-    return user && user.roles && hasRole();
-  }
-}
diff --git a/integration/inspector/src/common/interceptors/timeout.interceptor.ts b/integration/inspector/src/common/interceptors/timeout.interceptor.ts
deleted file mode 100644
index 3bd0769ac..000000000
--- a/integration/inspector/src/common/interceptors/timeout.interceptor.ts
+++ /dev/null
@@ -1,15 +0,0 @@
-import {
-  CallHandler,
-  ExecutionContext,
-  Injectable,
-  NestInterceptor,
-} from '@nestjs/common';
-import { Observable } from 'rxjs';
-import { timeout } from 'rxjs/operators';
-
-@Injectable()
-export class TimeoutInterceptor implements NestInterceptor {
-  intercept(context: ExecutionContext, next: CallHandler): Observable<any> {
-    return next.handle().pipe(timeout(5000));
-  }
-}
diff --git a/integration/inspector/src/common/middleware/logger.middleware.ts b/integration/inspector/src/common/middleware/logger.middleware.ts
deleted file mode 100644
index 5ada9418d..000000000
--- a/integration/inspector/src/common/middleware/logger.middleware.ts
+++ /dev/null
@@ -1,9 +0,0 @@
-import { Injectable, NestMiddleware } from '@nestjs/common';
-
-@Injectable()
-export class LoggerMiddleware implements NestMiddleware {
-  use(req: any, res: any, next: () => void) {
-    console.log(`Request...`);
-    next();
-  }
-}
diff --git a/integration/inspector/src/common/pipes/parse-int.pipe.ts b/integration/inspector/src/common/pipes/parse-int.pipe.ts
deleted file mode 100644
index abc041424..000000000
--- a/integration/inspector/src/common/pipes/parse-int.pipe.ts
+++ /dev/null
@@ -1,17 +0,0 @@
-import {
-  BadRequestException,
-  PipeTransform,
-  Injectable,
-  ArgumentMetadata,
-} from '@nestjs/common';
-
-@Injectable()
-export class ParseIntPipe implements PipeTransform<string> {
-  async transform(value: string, metadata: ArgumentMetadata) {
-    const val = parseInt(value, 10);
-    if (isNaN(val)) {
-      throw new BadRequestException('Validation failed');
-    }
-    return val;
-  }
-}
diff --git a/integration/inspector/src/core/core.module.ts b/integration/inspector/src/core/core.module.ts
deleted file mode 100644
index 5bc1990b1..000000000
--- a/integration/inspector/src/core/core.module.ts
+++ /dev/null
@@ -1,18 +0,0 @@
-import { MiddlewareConsumer, Module, NestModule } from '@nestjs/common';
-import { APP_INTERCEPTOR } from '@nestjs/core';
-import { CatsController } from '../cats/cats.controller';
-import { LoggerMiddleware } from '../common/middleware/logger.middleware';
-import { LoggingInterceptor } from './interceptors/logging.interceptor';
-import { TransformInterceptor } from './interceptors/transform.interceptor';
-
-@Module({
-  providers: [
-    { provide: APP_INTERCEPTOR, useClass: TransformInterceptor },
-    { provide: APP_INTERCEPTOR, useClass: LoggingInterceptor },
-  ],
-})
-export class CoreModule implements NestModule {
-  configure(consumer: MiddlewareConsumer) {
-    consumer.apply(LoggerMiddleware).forRoutes(CatsController);
-  }
-}
diff --git a/integration/inspector/src/core/interceptors/logging.interceptor.ts b/integration/inspector/src/core/interceptors/logging.interceptor.ts
deleted file mode 100644
index 82ff0baa1..000000000
--- a/integration/inspector/src/core/interceptors/logging.interceptor.ts
+++ /dev/null
@@ -1,20 +0,0 @@
-import {
-  CallHandler,
-  ExecutionContext,
-  Injectable,
-  NestInterceptor,
-} from '@nestjs/common';
-import { Observable } from 'rxjs';
-import { tap } from 'rxjs/operators';
-
-@Injectable()
-export class LoggingInterceptor implements NestInterceptor {
-  intercept(context: ExecutionContext, next: CallHandler): Observable<any> {
-    console.log('Before...');
-
-    const now = Date.now();
-    return next
-      .handle()
-      .pipe(tap(() => console.log(`After... ${Date.now() - now}ms`)));
-  }
-}
diff --git a/integration/inspector/src/core/interceptors/transform.interceptor.ts b/integration/inspector/src/core/interceptors/transform.interceptor.ts
deleted file mode 100644
index c84c6428f..000000000
--- a/integration/inspector/src/core/interceptors/transform.interceptor.ts
+++ /dev/null
@@ -1,24 +0,0 @@
-import {
-  CallHandler,
-  ExecutionContext,
-  Injectable,
-  NestInterceptor,
-} from '@nestjs/common';
-import { Observable } from 'rxjs';
-import { map } from 'rxjs/operators';
-
-export interface Response<T> {
-  data: T;
-}
-
-@Injectable()
-export class TransformInterceptor<T>
-  implements NestInterceptor<T, Response<T>>
-{
-  intercept(
-    context: ExecutionContext,
-    next: CallHandler<T>,
-  ): Observable<Response<T>> {
-    return next.handle().pipe(map(data => ({ data })));
-  }
-}
diff --git a/integration/inspector/src/database/database.controller.ts b/integration/inspector/src/database/database.controller.ts
deleted file mode 100644
index 629762ae0..000000000
--- a/integration/inspector/src/database/database.controller.ts
+++ /dev/null
@@ -1,45 +0,0 @@
-import {
-  Controller,
-  Get,
-  Post,
-  Body,
-  Patch,
-  Param,
-  Delete,
-} from '@nestjs/common';
-import { DatabaseService } from './database.service';
-import { CreateDatabaseDto } from './dto/create-database.dto';
-import { UpdateDatabaseDto } from './dto/update-database.dto';
-
-@Controller('database')
-export class DatabaseController {
-  constructor(private readonly databaseService: DatabaseService) {}
-
-  @Post()
-  create(@Body() createDatabaseDto: CreateDatabaseDto) {
-    return this.databaseService.create(createDatabaseDto);
-  }
-
-  @Get()
-  findAll() {
-    return this.databaseService.findAll();
-  }
-
-  @Get(':id')
-  findOne(@Param('id') id: string) {
-    return this.databaseService.findOne(+id);
-  }
-
-  @Patch(':id')
-  update(
-    @Param('id') id: string,
-    @Body() updateDatabaseDto: UpdateDatabaseDto,
-  ) {
-    return this.databaseService.update(+id, updateDatabaseDto);
-  }
-
-  @Delete(':id')
-  remove(@Param('id') id: string) {
-    return this.databaseService.remove(+id);
-  }
-}
diff --git a/integration/inspector/src/database/database.module.ts b/integration/inspector/src/database/database.module.ts
deleted file mode 100644
index 2f37f674b..000000000
--- a/integration/inspector/src/database/database.module.ts
+++ /dev/null
@@ -1,9 +0,0 @@
-import { Module } from '@nestjs/common';
-import { DatabaseService } from './database.service';
-import { DatabaseController } from './database.controller';
-
-@Module({
-  controllers: [DatabaseController],
-  providers: [DatabaseService],
-})
-export class DatabaseModule {}
diff --git a/integration/inspector/src/database/database.service.ts b/integration/inspector/src/database/database.service.ts
deleted file mode 100644
index 845667895..000000000
--- a/integration/inspector/src/database/database.service.ts
+++ /dev/null
@@ -1,26 +0,0 @@
-import { Injectable } from '@nestjs/common';
-import { CreateDatabaseDto } from './dto/create-database.dto';
-import { UpdateDatabaseDto } from './dto/update-database.dto';
-
-@Injectable()
-export class DatabaseService {
-  create(createDatabaseDto: CreateDatabaseDto) {
-    return 'This action adds a new database';
-  }
-
-  findAll() {
-    return `This action returns all database`;
-  }
-
-  findOne(id: number) {
-    return `This action returns a #${id} database`;
-  }
-
-  update(id: number, updateDatabaseDto: UpdateDatabaseDto) {
-    return `This action updates a #${id} database`;
-  }
-
-  remove(id: number) {
-    return `This action removes a #${id} database`;
-  }
-}
diff --git a/integration/inspector/src/database/dto/create-database.dto.ts b/integration/inspector/src/database/dto/create-database.dto.ts
deleted file mode 100644
index 0b7bc753c..000000000
--- a/integration/inspector/src/database/dto/create-database.dto.ts
+++ /dev/null
@@ -1 +0,0 @@
-export class CreateDatabaseDto {}
diff --git a/integration/inspector/src/database/dto/update-database.dto.ts b/integration/inspector/src/database/dto/update-database.dto.ts
deleted file mode 100644
index 5cc666665..000000000
--- a/integration/inspector/src/database/dto/update-database.dto.ts
+++ /dev/null
@@ -1,4 +0,0 @@
-import { PartialType } from '@nestjs/mapped-types';
-import { CreateDatabaseDto } from './create-database.dto';
-
-export class UpdateDatabaseDto extends PartialType(CreateDatabaseDto) {}
diff --git a/integration/inspector/src/database/entities/database.entity.ts b/integration/inspector/src/database/entities/database.entity.ts
deleted file mode 100644
index 144f2990d..000000000
--- a/integration/inspector/src/database/entities/database.entity.ts
+++ /dev/null
@@ -1 +0,0 @@
-export class Database {}
diff --git a/integration/inspector/src/defaults/core.service.ts b/integration/inspector/src/defaults/core.service.ts
deleted file mode 100644
index acbb46cc2..000000000
--- a/integration/inspector/src/defaults/core.service.ts
+++ /dev/null
@@ -1,4 +0,0 @@
-import { Injectable } from '@nestjs/common';
-
-@Injectable()
-export class CoreService {}
diff --git a/integration/inspector/src/defaults/defaults.module.ts b/integration/inspector/src/defaults/defaults.module.ts
deleted file mode 100644
index f8a7ddb9f..000000000
--- a/integration/inspector/src/defaults/defaults.module.ts
+++ /dev/null
@@ -1,7 +0,0 @@
-import { Module } from '@nestjs/common';
-import { DefaultsService } from './defaults.service';
-
-@Module({
-  providers: [DefaultsService],
-})
-export class DefaultsModule {}
diff --git a/integration/inspector/src/defaults/defaults.service.ts b/integration/inspector/src/defaults/defaults.service.ts
deleted file mode 100644
index edc4790f1..000000000
--- a/integration/inspector/src/defaults/defaults.service.ts
+++ /dev/null
@@ -1,11 +0,0 @@
-import { Inject, Injectable, Optional } from '@nestjs/common';
-import { CoreService } from './core.service';
-
-@Injectable()
-export class DefaultsService {
-  constructor(
-    @Inject(CoreService)
-    @Optional()
-    public readonly coreService = { default: true },
-  ) {}
-}
diff --git a/integration/inspector/src/dogs/dogs.controller.ts b/integration/inspector/src/dogs/dogs.controller.ts
deleted file mode 100644
index 8d5ab7d8a..000000000
--- a/integration/inspector/src/dogs/dogs.controller.ts
+++ /dev/null
@@ -1,42 +0,0 @@
-import {
-  Controller,
-  Get,
-  Post,
-  Body,
-  Patch,
-  Param,
-  Delete,
-} from '@nestjs/common';
-import { DogsService } from './dogs.service';
-import { CreateDogDto } from './dto/create-dog.dto';
-import { UpdateDogDto } from './dto/update-dog.dto';
-
-@Controller('dogs')
-export class DogsController {
-  constructor(private readonly dogsService: DogsService) {}
-
-  @Post()
-  create(@Body() createDogDto: CreateDogDto) {
-    return this.dogsService.create(createDogDto);
-  }
-
-  @Get()
-  findAll() {
-    return this.dogsService.findAll();
-  }
-
-  @Get(':id')
-  findOne(@Param('id') id: string) {
-    return this.dogsService.findOne(+id);
-  }
-
-  @Patch(':id')
-  update(@Param('id') id: string, @Body() updateDogDto: UpdateDogDto) {
-    return this.dogsService.update(+id, updateDogDto);
-  }
-
-  @Delete(':id')
-  remove(@Param('id') id: string) {
-    return this.dogsService.remove(+id);
-  }
-}
diff --git a/integration/inspector/src/dogs/dogs.module.ts b/integration/inspector/src/dogs/dogs.module.ts
deleted file mode 100644
index 3385a39e3..000000000
--- a/integration/inspector/src/dogs/dogs.module.ts
+++ /dev/null
@@ -1,9 +0,0 @@
-import { Module } from '@nestjs/common';
-import { DogsService } from './dogs.service';
-import { DogsController } from './dogs.controller';
-
-@Module({
-  controllers: [DogsController],
-  providers: [DogsService],
-})
-export class DogsModule {}
diff --git a/integration/inspector/src/dogs/dogs.service.ts b/integration/inspector/src/dogs/dogs.service.ts
deleted file mode 100644
index f1f2d9347..000000000
--- a/integration/inspector/src/dogs/dogs.service.ts
+++ /dev/null
@@ -1,26 +0,0 @@
-import { Injectable } from '@nestjs/common';
-import { CreateDogDto } from './dto/create-dog.dto';
-import { UpdateDogDto } from './dto/update-dog.dto';
-
-@Injectable()
-export class DogsService {
-  create(createDogDto: CreateDogDto) {
-    return 'This action adds a new dog';
-  }
-
-  findAll() {
-    return `This action returns all dogs`;
-  }
-
-  findOne(id: number) {
-    return `This action returns a #${id} dog`;
-  }
-
-  update(id: number, updateDogDto: UpdateDogDto) {
-    return `This action updates a #${id} dog`;
-  }
-
-  remove(id: number) {
-    return `This action removes a #${id} dog`;
-  }
-}
diff --git a/integration/inspector/src/dogs/dto/create-dog.dto.ts b/integration/inspector/src/dogs/dto/create-dog.dto.ts
deleted file mode 100644
index fd21dff8a..000000000
--- a/integration/inspector/src/dogs/dto/create-dog.dto.ts
+++ /dev/null
@@ -1 +0,0 @@
-export class CreateDogDto {}
diff --git a/integration/inspector/src/dogs/dto/update-dog.dto.ts b/integration/inspector/src/dogs/dto/update-dog.dto.ts
deleted file mode 100644
index 15d4939c8..000000000
--- a/integration/inspector/src/dogs/dto/update-dog.dto.ts
+++ /dev/null
@@ -1,4 +0,0 @@
-import { PartialType } from '@nestjs/mapped-types';
-import { CreateDogDto } from './create-dog.dto';
-
-export class UpdateDogDto extends PartialType(CreateDogDto) {}
diff --git a/integration/inspector/src/dogs/entities/dog.entity.ts b/integration/inspector/src/dogs/entities/dog.entity.ts
deleted file mode 100644
index cbd6231a1..000000000
--- a/integration/inspector/src/dogs/entities/dog.entity.ts
+++ /dev/null
@@ -1 +0,0 @@
-export class Dog {}
diff --git a/integration/inspector/src/durable/durable-context-id.strategy.ts b/integration/inspector/src/durable/durable-context-id.strategy.ts
deleted file mode 100644
index d4158f3e2..000000000
--- a/integration/inspector/src/durable/durable-context-id.strategy.ts
+++ /dev/null
@@ -1,23 +0,0 @@
-import { ContextId, ContextIdStrategy, HostComponentInfo } from '@nestjs/core';
-import { Request } from 'express';
-
-const tenants = new Map<string, ContextId>();
-
-export class DurableContextIdStrategy implements ContextIdStrategy {
-  attach(contextId: ContextId, request: Request) {
-    const tenantId = request.headers['x-tenant-id'] as string;
-    let tenantSubTreeId: ContextId;
-
-    if (tenants.has(tenantId)) {
-      tenantSubTreeId = tenants.get(tenantId);
-    } else {
-      tenantSubTreeId = { id: +tenantId } as ContextId;
-      tenants.set(tenantId, tenantSubTreeId);
-    }
-    return {
-      resolve: (info: HostComponentInfo) =>
-        info.isTreeDurable ? tenantSubTreeId : contextId,
-      payload: { tenantId },
-    };
-  }
-}
diff --git a/integration/inspector/src/durable/durable.controller.ts b/integration/inspector/src/durable/durable.controller.ts
deleted file mode 100644
index be51ad2df..000000000
--- a/integration/inspector/src/durable/durable.controller.ts
+++ /dev/null
@@ -1,17 +0,0 @@
-import { Controller, Get } from '@nestjs/common';
-import { DurableService } from './durable.service';
-
-@Controller('durable')
-export class DurableController {
-  constructor(private readonly durableService: DurableService) {}
-
-  @Get()
-  greeting(): string {
-    return this.durableService.greeting();
-  }
-
-  @Get('echo')
-  echo() {
-    return this.durableService.requestPayload;
-  }
-}
diff --git a/integration/inspector/src/durable/durable.module.ts b/integration/inspector/src/durable/durable.module.ts
deleted file mode 100644
index ed312900f..000000000
--- a/integration/inspector/src/durable/durable.module.ts
+++ /dev/null
@@ -1,9 +0,0 @@
-import { Module } from '@nestjs/common';
-import { DurableController } from './durable.controller';
-import { DurableService } from './durable.service';
-
-@Module({
-  controllers: [DurableController],
-  providers: [DurableService],
-})
-export class DurableModule {}
diff --git a/integration/inspector/src/durable/durable.service.ts b/integration/inspector/src/durable/durable.service.ts
deleted file mode 100644
index 6e25b01dd..000000000
--- a/integration/inspector/src/durable/durable.service.ts
+++ /dev/null
@@ -1,14 +0,0 @@
-import { Inject, Injectable, Scope } from '@nestjs/common';
-import { REQUEST } from '@nestjs/core';
-
-@Injectable({ scope: Scope.REQUEST, durable: true })
-export class DurableService {
-  public instanceCounter = 0;
-
-  constructor(@Inject(REQUEST) public readonly requestPayload: unknown) {}
-
-  greeting() {
-    ++this.instanceCounter;
-    return `Hello world! Counter: ${this.instanceCounter}`;
-  }
-}
diff --git a/integration/inspector/src/external-svc/dto/create-external-svc.dto.ts b/integration/inspector/src/external-svc/dto/create-external-svc.dto.ts
deleted file mode 100644
index b37586bc5..000000000
--- a/integration/inspector/src/external-svc/dto/create-external-svc.dto.ts
+++ /dev/null
@@ -1 +0,0 @@
-export class CreateExternalSvcDto {}
diff --git a/integration/inspector/src/external-svc/dto/update-external-svc.dto.ts b/integration/inspector/src/external-svc/dto/update-external-svc.dto.ts
deleted file mode 100644
index 95be362d9..000000000
--- a/integration/inspector/src/external-svc/dto/update-external-svc.dto.ts
+++ /dev/null
@@ -1,6 +0,0 @@
-import { PartialType } from '@nestjs/mapped-types';
-import { CreateExternalSvcDto } from './create-external-svc.dto';
-
-export class UpdateExternalSvcDto extends PartialType(CreateExternalSvcDto) {
-  id: number;
-}
diff --git a/integration/inspector/src/external-svc/entities/external-svc.entity.ts b/integration/inspector/src/external-svc/entities/external-svc.entity.ts
deleted file mode 100644
index 645900058..000000000
--- a/integration/inspector/src/external-svc/entities/external-svc.entity.ts
+++ /dev/null
@@ -1 +0,0 @@
-export class ExternalSvc {}
diff --git a/integration/inspector/src/external-svc/external-svc.controller.ts b/integration/inspector/src/external-svc/external-svc.controller.ts
deleted file mode 100644
index f2233620f..000000000
--- a/integration/inspector/src/external-svc/external-svc.controller.ts
+++ /dev/null
@@ -1,38 +0,0 @@
-import { Controller } from '@nestjs/common';
-import { MessagePattern, Payload } from '@nestjs/microservices';
-import { ExternalSvcService } from './external-svc.service';
-import { CreateExternalSvcDto } from './dto/create-external-svc.dto';
-import { UpdateExternalSvcDto } from './dto/update-external-svc.dto';
-
-@Controller()
-export class ExternalSvcController {
-  constructor(private readonly externalSvcService: ExternalSvcService) {}
-
-  @MessagePattern('createExternalSvc')
-  create(@Payload() createExternalSvcDto: CreateExternalSvcDto) {
-    return this.externalSvcService.create(createExternalSvcDto);
-  }
-
-  @MessagePattern('findAllExternalSvc')
-  findAll() {
-    return this.externalSvcService.findAll();
-  }
-
-  @MessagePattern('findOneExternalSvc')
-  findOne(@Payload() id: number) {
-    return this.externalSvcService.findOne(id);
-  }
-
-  @MessagePattern('updateExternalSvc')
-  update(@Payload() updateExternalSvcDto: UpdateExternalSvcDto) {
-    return this.externalSvcService.update(
-      updateExternalSvcDto.id,
-      updateExternalSvcDto,
-    );
-  }
-
-  @MessagePattern('removeExternalSvc')
-  remove(@Payload() id: number) {
-    return this.externalSvcService.remove(id);
-  }
-}
diff --git a/integration/inspector/src/external-svc/external-svc.module.ts b/integration/inspector/src/external-svc/external-svc.module.ts
deleted file mode 100644
index f4b57fc02..000000000
--- a/integration/inspector/src/external-svc/external-svc.module.ts
+++ /dev/null
@@ -1,9 +0,0 @@
-import { Module } from '@nestjs/common';
-import { ExternalSvcService } from './external-svc.service';
-import { ExternalSvcController } from './external-svc.controller';
-
-@Module({
-  controllers: [ExternalSvcController],
-  providers: [ExternalSvcService],
-})
-export class ExternalSvcModule {}
diff --git a/integration/inspector/src/external-svc/external-svc.service.ts b/integration/inspector/src/external-svc/external-svc.service.ts
deleted file mode 100644
index 9620630c2..000000000
--- a/integration/inspector/src/external-svc/external-svc.service.ts
+++ /dev/null
@@ -1,26 +0,0 @@
-import { Injectable } from '@nestjs/common';
-import { CreateExternalSvcDto } from './dto/create-external-svc.dto';
-import { UpdateExternalSvcDto } from './dto/update-external-svc.dto';
-
-@Injectable()
-export class ExternalSvcService {
-  create(createExternalSvcDto: CreateExternalSvcDto) {
-    return 'This action adds a new externalSvc';
-  }
-
-  findAll() {
-    return `This action returns all externalSvc`;
-  }
-
-  findOne(id: number) {
-    return `This action returns a #${id} externalSvc`;
-  }
-
-  update(id: number, updateExternalSvcDto: UpdateExternalSvcDto) {
-    return `This action updates a #${id} externalSvc`;
-  }
-
-  remove(id: number) {
-    return `This action removes a #${id} externalSvc`;
-  }
-}
diff --git a/integration/inspector/src/properties/dependency.service.ts b/integration/inspector/src/properties/dependency.service.ts
deleted file mode 100644
index cd71d8c80..000000000
--- a/integration/inspector/src/properties/dependency.service.ts
+++ /dev/null
@@ -1,4 +0,0 @@
-import { Injectable } from '@nestjs/common';
-
-@Injectable()
-export class DependencyService {}
diff --git a/integration/inspector/src/properties/properties.module.ts b/integration/inspector/src/properties/properties.module.ts
deleted file mode 100644
index b2ad36ff3..000000000
--- a/integration/inspector/src/properties/properties.module.ts
+++ /dev/null
@@ -1,19 +0,0 @@
-import { Module } from '@nestjs/common';
-import { DependencyService } from './dependency.service';
-import { PropertiesService, SYMBOL_TOKEN } from './properties.service';
-
-@Module({
-  providers: [
-    DependencyService,
-    PropertiesService,
-    {
-      provide: 'token',
-      useValue: true,
-    },
-    {
-      provide: SYMBOL_TOKEN,
-      useValue: true,
-    },
-  ],
-})
-export class PropertiesModule {}
diff --git a/integration/inspector/src/properties/properties.service.ts b/integration/inspector/src/properties/properties.service.ts
deleted file mode 100644
index cd4507524..000000000
--- a/integration/inspector/src/properties/properties.service.ts
+++ /dev/null
@@ -1,11 +0,0 @@
-import { Inject, Injectable } from '@nestjs/common';
-import { DependencyService } from './dependency.service';
-
-export const SYMBOL_TOKEN = Symbol('token');
-
-@Injectable()
-export class PropertiesService {
-  @Inject() service: DependencyService;
-  @Inject('token') token: boolean;
-  @Inject(SYMBOL_TOKEN) symbolToken: boolean;
-}
diff --git a/integration/inspector/src/request-chain/helper/helper.module.ts b/integration/inspector/src/request-chain/helper/helper.module.ts
deleted file mode 100644
index 1c154ea44..000000000
--- a/integration/inspector/src/request-chain/helper/helper.module.ts
+++ /dev/null
@@ -1,8 +0,0 @@
-import { Module } from '@nestjs/common';
-import { HelperService } from './helper.service';
-
-@Module({
-  providers: [HelperService],
-  exports: [HelperService],
-})
-export class HelperModule {}
diff --git a/integration/inspector/src/request-chain/helper/helper.service.ts b/integration/inspector/src/request-chain/helper/helper.service.ts
deleted file mode 100644
index 52efe0eb2..000000000
--- a/integration/inspector/src/request-chain/helper/helper.service.ts
+++ /dev/null
@@ -1,9 +0,0 @@
-import { Inject, Injectable, Scope } from '@nestjs/common';
-import { REQUEST } from '@nestjs/core';
-
-@Injectable({ scope: Scope.REQUEST })
-export class HelperService {
-  constructor(@Inject(REQUEST) public readonly request) {}
-
-  public noop() {}
-}
diff --git a/integration/inspector/src/request-chain/interceptors/logging.interceptor.ts b/integration/inspector/src/request-chain/interceptors/logging.interceptor.ts
deleted file mode 100644
index 008a69993..000000000
--- a/integration/inspector/src/request-chain/interceptors/logging.interceptor.ts
+++ /dev/null
@@ -1,21 +0,0 @@
-import {
-  CallHandler,
-  ExecutionContext,
-  Injectable,
-  NestInterceptor,
-} from '@nestjs/common';
-import { Observable } from 'rxjs';
-import { HelperService } from '../helper/helper.service';
-
-@Injectable()
-export class LoggingInterceptor implements NestInterceptor {
-  constructor(private readonly helperSvc: HelperService) {}
-
-  intercept(context: ExecutionContext, next: CallHandler): Observable<any> {
-    this.helperSvc.noop();
-    if (!this.helperSvc.request) {
-      throw new Error('error');
-    }
-    return next.handle();
-  }
-}
diff --git a/integration/inspector/src/request-chain/request-chain.controller.ts b/integration/inspector/src/request-chain/request-chain.controller.ts
deleted file mode 100644
index 03813352d..000000000
--- a/integration/inspector/src/request-chain/request-chain.controller.ts
+++ /dev/null
@@ -1,14 +0,0 @@
-import { Controller, Get, UseInterceptors } from '@nestjs/common';
-import { LoggingInterceptor } from './interceptors/logging.interceptor';
-import { RequestChainService } from './request-chain.service';
-
-@Controller('hello')
-export class RequestChainController {
-  constructor(private readonly chainService: RequestChainService) {}
-
-  @UseInterceptors(LoggingInterceptor)
-  @Get()
-  greeting(): void {
-    this.chainService.call();
-  }
-}
diff --git a/integration/inspector/src/request-chain/request-chain.module.ts b/integration/inspector/src/request-chain/request-chain.module.ts
deleted file mode 100644
index eba8f451d..000000000
--- a/integration/inspector/src/request-chain/request-chain.module.ts
+++ /dev/null
@@ -1,11 +0,0 @@
-import { Module } from '@nestjs/common';
-import { HelperModule } from './helper/helper.module';
-import { RequestChainController } from './request-chain.controller';
-import { RequestChainService } from './request-chain.service';
-
-@Module({
-  imports: [HelperModule],
-  providers: [RequestChainService],
-  controllers: [RequestChainController],
-})
-export class RequestChainModule {}
diff --git a/integration/inspector/src/request-chain/request-chain.service.ts b/integration/inspector/src/request-chain/request-chain.service.ts
deleted file mode 100644
index c8c00068d..000000000
--- a/integration/inspector/src/request-chain/request-chain.service.ts
+++ /dev/null
@@ -1,15 +0,0 @@
-import { Injectable } from '@nestjs/common';
-import { HelperService } from './helper/helper.service';
-
-@Injectable()
-export class RequestChainService {
-  static COUNTER = 0;
-  constructor(private readonly helperService: HelperService) {
-    helperService.noop();
-    RequestChainService.COUNTER += 1;
-  }
-
-  call() {
-    this.helperService.noop();
-  }
-}
diff --git a/integration/inspector/src/users/dto/create-user.dto.ts b/integration/inspector/src/users/dto/create-user.dto.ts
deleted file mode 100644
index 0311be138..000000000
--- a/integration/inspector/src/users/dto/create-user.dto.ts
+++ /dev/null
@@ -1 +0,0 @@
-export class CreateUserDto {}
diff --git a/integration/inspector/src/users/dto/update-user.dto.ts b/integration/inspector/src/users/dto/update-user.dto.ts
deleted file mode 100644
index dfd37fb1e..000000000
--- a/integration/inspector/src/users/dto/update-user.dto.ts
+++ /dev/null
@@ -1,4 +0,0 @@
-import { PartialType } from '@nestjs/mapped-types';
-import { CreateUserDto } from './create-user.dto';
-
-export class UpdateUserDto extends PartialType(CreateUserDto) {}
diff --git a/integration/inspector/src/users/entities/user.entity.ts b/integration/inspector/src/users/entities/user.entity.ts
deleted file mode 100644
index 4f82c1457..000000000
--- a/integration/inspector/src/users/entities/user.entity.ts
+++ /dev/null
@@ -1 +0,0 @@
-export class User {}
diff --git a/integration/inspector/src/users/users.controller.ts b/integration/inspector/src/users/users.controller.ts
deleted file mode 100644
index d5db3a65e..000000000
--- a/integration/inspector/src/users/users.controller.ts
+++ /dev/null
@@ -1,42 +0,0 @@
-import {
-  Controller,
-  Get,
-  Post,
-  Body,
-  Patch,
-  Param,
-  Delete,
-} from '@nestjs/common';
-import { UsersService } from './users.service';
-import { CreateUserDto } from './dto/create-user.dto';
-import { UpdateUserDto } from './dto/update-user.dto';
-
-@Controller('users')
-export class UsersController {
-  constructor(private readonly usersService: UsersService) {}
-
-  @Post()
-  create(@Body() createUserDto: CreateUserDto) {
-    return this.usersService.create(createUserDto);
-  }
-
-  @Get()
-  findAll() {
-    return this.usersService.findAll();
-  }
-
-  @Get(':id')
-  findOne(@Param('id') id: string) {
-    return this.usersService.findOne(+id);
-  }
-
-  @Patch(':id')
-  update(@Param('id') id: string, @Body() updateUserDto: UpdateUserDto) {
-    return this.usersService.update(+id, updateUserDto);
-  }
-
-  @Delete(':id')
-  remove(@Param('id') id: string) {
-    return this.usersService.remove(+id);
-  }
-}
diff --git a/integration/inspector/src/users/users.module.ts b/integration/inspector/src/users/users.module.ts
deleted file mode 100644
index ecca17ad6..000000000
--- a/integration/inspector/src/users/users.module.ts
+++ /dev/null
@@ -1,9 +0,0 @@
-import { Module } from '@nestjs/common';
-import { UsersService } from './users.service';
-import { UsersController } from './users.controller';
-
-@Module({
-  controllers: [UsersController],
-  providers: [UsersService],
-})
-export class UsersModule {}
diff --git a/integration/inspector/src/users/users.service.ts b/integration/inspector/src/users/users.service.ts
deleted file mode 100644
index 0a55903da..000000000
--- a/integration/inspector/src/users/users.service.ts
+++ /dev/null
@@ -1,26 +0,0 @@
-import { Injectable } from '@nestjs/common';
-import { CreateUserDto } from './dto/create-user.dto';
-import { UpdateUserDto } from './dto/update-user.dto';
-
-@Injectable()
-export class UsersService {
-  create(createUserDto: CreateUserDto) {
-    return 'This action adds a new user';
-  }
-
-  findAll() {
-    return `This action returns all users`;
-  }
-
-  findOne(id: number) {
-    return `This action returns a #${id} user`;
-  }
-
-  update(id: number, updateUserDto: UpdateUserDto) {
-    return `This action updates a #${id} user`;
-  }
-
-  remove(id: number) {
-    return `This action removes a #${id} user`;
-  }
-}
diff --git a/integration/inspector/tsconfig.json b/integration/inspector/tsconfig.json
deleted file mode 100644
index cef623d14..000000000
--- a/integration/inspector/tsconfig.json
+++ /dev/null
@@ -1,40 +0,0 @@
-{
-  "compilerOptions": {
-    "module": "commonjs",
-    "declaration": false,
-    "noImplicitAny": false,
-    "removeComments": true,
-    "noLib": false,
-    "emitDecoratorMetadata": true,
-    "experimentalDecorators": true,
-    "target": "ES2021",
-    "sourceMap": true,
-    "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
-  },
-  "include": [
-    "src/**/*",
-    "e2e/**/*"
-  ],
-  "exclude": [
-    "node_modules",
-  ]
-}
\ No newline at end of file
diff --git a/integration/microservices/src/app.module.ts b/integration/microservices/src/app.module.ts
index dacf646e4..c9ac72909 100644
--- a/integration/microservices/src/app.module.ts
+++ b/integration/microservices/src/app.module.ts
@@ -72,4 +72,4 @@ class ClientOptionService implements ClientsModuleOptionsFactory {
   ],
   controllers: [AppController],
 })
-export class AppModule {}
+export class ApplicationModule {}
diff --git a/integration/microservices/src/disconnected.controller.ts b/integration/microservices/src/disconnected.controller.ts
index a804614a7..0f529c948 100644
--- a/integration/microservices/src/disconnected.controller.ts
+++ b/integration/microservices/src/disconnected.controller.ts
@@ -15,17 +15,16 @@ export class DisconnectedClientController {
   call(@Body() options): Observable<number> {
     const client = ClientProxyFactory.create(options);
     return client.send<number, number[]>({ cmd: 'none' }, [1, 2, 3]).pipe(
-      // tap(
-      //   console.log.bind(console, 'data'),
-      //   console.error.bind(console, 'error'),
-      // ),
+      /*tap(
+          console.log.bind(console, 'data'),
+          console.error.bind(console, 'error'),
+        ),*/
       catchError(error => {
-        const { code } = error?.err ?? error ?? { code: 'CONN_ERR' };
+        const { code } = error || { code: 'CONN_ERR' };
         return throwError(() =>
           code === 'ECONNREFUSED' ||
           code === 'CONN_ERR' ||
-          code === 'CONNECTION_REFUSED' ||
-          error.message === 'Connection is closed.'
+          code === 'CONNECTION_REFUSED'
             ? new RequestTimeoutException('ECONNREFUSED')
             : new InternalServerErrorException(),
         );
diff --git a/integration/microservices/src/grpc-advanced/advanced.grpc.controller.ts b/integration/microservices/src/grpc-advanced/advanced.grpc.controller.ts
index e4aa0234b..930644909 100644
--- a/integration/microservices/src/grpc-advanced/advanced.grpc.controller.ts
+++ b/integration/microservices/src/grpc-advanced/advanced.grpc.controller.ts
@@ -134,8 +134,8 @@ export class AdvancedGrpcController {
   async streamReq(messages: Observable<any>): Promise<any> {
     const s = new Subject();
     const o = s.asObservable();
-    messages.subscribe({
-      next: () => {
+    messages.subscribe(
+      msg => {
         s.next({
           id: 1,
           itemTypes: [1],
@@ -146,8 +146,9 @@ export class AdvancedGrpcController {
           },
         });
       },
-      complete: () => s.complete(),
-    });
+      null,
+      () => s.complete(),
+    );
     return o;
   }
 
diff --git a/integration/microservices/src/grpc/grpc.controller.ts b/integration/microservices/src/grpc/grpc.controller.ts
index 11c75e37b..9414de5f2 100644
--- a/integration/microservices/src/grpc/grpc.controller.ts
+++ b/integration/microservices/src/grpc/grpc.controller.ts
@@ -1,4 +1,4 @@
-import { Body, Controller, HttpCode, Post, Query } from '@nestjs/common';
+import { Body, Controller, HttpCode, Post } from '@nestjs/common';
 import {
   Client,
   ClientGrpc,
@@ -6,28 +6,12 @@ import {
   GrpcStreamCall,
   GrpcStreamMethod,
   Transport,
-  ClientGrpcProxy,
-  RpcException,
 } from '@nestjs/microservices';
 import { join } from 'path';
-import { Observable, of, catchError } from 'rxjs';
-
-class ErrorHandlingProxy extends ClientGrpcProxy {
-  serializeError(err) {
-    return new RpcException(err);
-  }
-}
+import { Observable, of } from 'rxjs';
 
 @Controller()
 export class GrpcController {
-  private readonly customClient: ClientGrpc;
-  constructor() {
-    this.customClient = new ErrorHandlingProxy({
-      package: 'math',
-      protoPath: join(__dirname, 'math.proto'),
-    });
-  }
-
   @Client({
     transport: Transport.GRPC,
     options: {
@@ -56,14 +40,6 @@ export class GrpcController {
     return svc.sum({ data });
   }
 
-  // Test that getService generate both lower and uppercase method
-  @Post('upperMethod/sum')
-  @HttpCode(200)
-  callWithOptions(@Body() data: number[]): Observable<number> {
-    const svc = this.client.getService<any>('Math');
-    return svc.Sum({ data });
-  }
-
   @GrpcMethod('Math')
   async sum({ data }: { data: number[] }): Promise<any> {
     return of({
@@ -74,16 +50,16 @@ export class GrpcController {
   @GrpcStreamMethod('Math')
   async sumStream(messages: Observable<any>): Promise<any> {
     return new Promise<any>((resolve, reject) => {
-      messages.subscribe({
-        next: msg => {
+      messages.subscribe(
+        msg => {
           resolve({
             result: msg.data.reduce((a, b) => a + b),
           });
         },
-        error: err => {
+        err => {
           reject(err);
         },
-      });
+      );
     });
   }
 
@@ -94,19 +70,6 @@ export class GrpcController {
     });
   }
 
-  @GrpcMethod('Math')
-  async divide(request: { dividend: number; divisor: number }): Promise<any> {
-    if (request.divisor === 0) {
-      throw new RpcException({
-        code: 3,
-        message: 'dividing by 0 is not possible',
-      });
-    }
-    return {
-      result: request.dividend / request.divisor,
-    };
-  }
-
   @GrpcMethod('Math2')
   async sum2({ data }: { data: number[] }): Promise<any> {
     return of({
@@ -127,24 +90,4 @@ export class GrpcController {
     const svc = this.clientMulti.getService<any>('Math2');
     return svc.sum2({ data });
   }
-
-  @Post('error')
-  @HttpCode(200)
-  serializeError(
-    @Query('client') query: 'custom' | 'standard' = 'standard',
-    @Body() body: Record<string, any>,
-  ): Observable<boolean> {
-    const client = query === 'custom' ? this.customClient : this.client;
-    const svc = client.getService<any>('Math');
-
-    const errorDivideRequest = {
-      dividend: 1,
-      divisor: 0,
-    };
-    return svc.divide(errorDivideRequest).pipe(
-      catchError(err => {
-        return of(err instanceof RpcException);
-      }),
-    );
-  }
 }
diff --git a/integration/microservices/src/grpc/math.proto b/integration/microservices/src/grpc/math.proto
index 0ca9b3509..43c835cb7 100644
--- a/integration/microservices/src/grpc/math.proto
+++ b/integration/microservices/src/grpc/math.proto
@@ -6,7 +6,6 @@ service Math {
   rpc Sum (RequestSum) returns (SumResult);
   rpc SumStream(stream RequestSum) returns(stream SumResult);
   rpc SumStreamPass(stream RequestSum) returns(stream SumResult);
-  rpc Divide (RequestDivide) returns (DivideResult);
 }
 
 message SumResult {
@@ -15,13 +14,4 @@ message SumResult {
 
 message RequestSum {
   repeated int32 data = 1;
-}
-
-message RequestDivide {
-  int32 dividend = 1;
-  int32 divisor = 2 ;
-}
-
-message DivideResult {
-  int32 result = 1;
-}
+}
\ No newline at end of file
diff --git a/integration/microservices/src/mqtt/mqtt.controller.ts b/integration/microservices/src/mqtt/mqtt.controller.ts
index 72de41d5c..c8d813efa 100644
--- a/integration/microservices/src/mqtt/mqtt.controller.ts
+++ b/integration/microservices/src/mqtt/mqtt.controller.ts
@@ -18,8 +18,6 @@ export class MqttController {
   static IS_NOTIFIED = false;
   static IS_WILDCARD_EVENT_RECEIVED = false;
   static IS_WILDCARD2_EVENT_RECEIVED = false;
-  static IS_SHARED_WILDCARD_EVENT_RECEIVED = false;
-  static IS_SHARED_WILDCARD2_EVENT_RECEIVED = false;
 
   @Client({ transport: Transport.MQTT })
   client: ClientProxy;
@@ -95,7 +93,7 @@ export class MqttController {
   @Post('record-builder-duplex')
   @HttpCode(200)
   useRecordBuilderDuplex(@Body() data: Record<string, any>) {
-    const record = new MqttRecordBuilder(data).setQoS(1).build();
+    const record = new MqttRecordBuilder(data).setQoS(2).build();
     return this.client.send('record-builder-duplex', record);
   }
 
@@ -111,32 +109,6 @@ export class MqttController {
     };
   }
 
-  @Post('shared-wildcard-event')
-  async sendSharedWildcardEvent(): Promise<any> {
-    return this.client.emit<number>('shared-wildcard-event/test', true);
-  }
-
-  @Post('shared-wildcard-message')
-  async sendSharedWildcardMessage(
-    @Body() data: number[],
-  ): Promise<Observable<number>> {
-    await this.client.connect();
-    return this.client.send<number>('shared-wildcard-message/test', data);
-  }
-
-  @Post('shared-wildcard-event2')
-  async sendSharedWildcardEvent2(): Promise<any> {
-    return this.client.emit<number>('shared-wildcard-event2/test/test', true);
-  }
-
-  @Post('shared-wildcard-message2')
-  async sendSharedWildcardMessage2(
-    @Body() data: number[],
-  ): Promise<Observable<number>> {
-    await this.client.connect();
-    return this.client.send<number>('shared-wildcard-message2/test/test', data);
-  }
-
   @MessagePattern('wildcard-message/#')
   wildcardMessageHandler(data: number[]): number {
     if ((data as any).response) {
@@ -184,27 +156,4 @@ export class MqttController {
   streaming(data: number[]): Observable<number> {
     return from(data);
   }
-
-  @MessagePattern('$share/test-group/shared-wildcard-message/#')
-  sharedWildcardMessageHandler(data: number[]): number {
-    if ((data as any).response) {
-      return;
-    }
-    return (data || []).reduce((a, b) => a + b);
-  }
-
-  @EventPattern('$share/test-group/shared-wildcard-event/#')
-  sharedWildcardEventHandler(data: boolean) {
-    MqttController.IS_SHARED_WILDCARD_EVENT_RECEIVED = data;
-  }
-
-  @MessagePattern('$share/test-group/shared-wildcard-message2/+/test')
-  sharedWildcardMessageHandler2(data: number[]): number {
-    return (data || []).reduce((a, b) => a + b);
-  }
-
-  @EventPattern('$share/test-group/shared-wildcard-event2/+/test')
-  sharedWildcardEventHandler2(data: boolean) {
-    MqttController.IS_SHARED_WILDCARD2_EVENT_RECEIVED = data;
-  }
 }
diff --git a/integration/microservices/src/rmq/rmq.controller.ts b/integration/microservices/src/rmq/rmq.controller.ts
index 07f8075e6..932bb46a9 100644
--- a/integration/microservices/src/rmq/rmq.controller.ts
+++ b/integration/microservices/src/rmq/rmq.controller.ts
@@ -61,21 +61,6 @@ export class RMQController {
       .reduce(async (a, b) => (await a) && b);
   }
 
-  @Post('multiple-urls')
-  @HttpCode(200)
-  multipleUrls(@Body() data: number[]) {
-    const clientWithMultipleUrls = ClientProxyFactory.create({
-      transport: Transport.RMQ,
-      options: {
-        urls: [`amqp://localhost:5671`, `amqp://localhost:5672`],
-        queue: 'test',
-        queueOptions: { durable: false },
-        socketOptions: { noDelay: true },
-      },
-    });
-    return clientWithMultipleUrls.send<number>({ cmd: 'multiple-urls' }, data);
-  }
-
   @Post('record-builder-duplex')
   @HttpCode(200)
   useRecordBuilderDuplex(@Body() data: Record<string, any>) {
@@ -124,11 +109,6 @@ export class RMQController {
     return from(data);
   }
 
-  @MessagePattern({ cmd: 'multiple-urls' })
-  handleMultipleUrls(data: number[]): number {
-    return (data || []).reduce((a, b) => a + b);
-  }
-
   @Post('notify')
   async sendNotification(): Promise<any> {
     return this.client.emit<number>('notification', true);
diff --git a/integration/microservices/src/tcp-tls/app.controller.ts b/integration/microservices/src/tcp-tls/app.controller.ts
deleted file mode 100644
index 81101741f..000000000
--- a/integration/microservices/src/tcp-tls/app.controller.ts
+++ /dev/null
@@ -1,141 +0,0 @@
-import {
-  Body,
-  Controller,
-  HttpCode,
-  Inject,
-  Post,
-  Query,
-} from '@nestjs/common';
-import {
-  Client,
-  ClientProxy,
-  EventPattern,
-  MessagePattern,
-  RpcException,
-  Transport,
-} from '@nestjs/microservices';
-import { from, lastValueFrom, Observable, of, throwError } from 'rxjs';
-import { catchError, scan } from 'rxjs/operators';
-import * as fs from 'fs';
-import * as path from 'path';
-
-@Controller()
-export class AppController {
-  constructor(
-    @Inject('USE_CLASS_CLIENT') private useClassClient: ClientProxy,
-    @Inject('USE_FACTORY_CLIENT') private useFactoryClient: ClientProxy,
-    @Inject('CUSTOM_PROXY_CLIENT') private customClient: ClientProxy,
-  ) {}
-  static IS_NOTIFIED = false;
-
-  @Client({
-    transport: Transport.TCP,
-    options: {
-      tlsOptions: {
-        ca: [
-          fs
-            .readFileSync(path.join(__dirname, 'ca.cert.pem'), 'utf-8')
-            .toString(),
-        ],
-      },
-    },
-  })
-  client: ClientProxy;
-
-  @Post()
-  @HttpCode(200)
-  call(@Query('command') cmd, @Body() data: number[]): Observable<number> {
-    return this.client.send<number>({ cmd }, data);
-  }
-
-  @Post('useFactory')
-  @HttpCode(200)
-  callWithClientUseFactory(
-    @Query('command') cmd,
-    @Body() data: number[],
-  ): Observable<number> {
-    return this.useFactoryClient.send<number>({ cmd }, data);
-  }
-
-  @Post('useClass')
-  @HttpCode(200)
-  callWithClientUseClass(
-    @Query('command') cmd,
-    @Body() data: number[],
-  ): Observable<number> {
-    return this.useClassClient.send<number>({ cmd }, data);
-  }
-
-  @Post('stream')
-  @HttpCode(200)
-  stream(@Body() data: number[]): Observable<number> {
-    return this.client
-      .send<number>({ cmd: 'streaming' }, data)
-      .pipe(scan((a, b) => a + b));
-  }
-
-  @Post('concurrent')
-  @HttpCode(200)
-  concurrent(@Body() data: number[][]): Promise<boolean> {
-    const send = async (tab: number[]) => {
-      const expected = tab.reduce((a, b) => a + b);
-      const result = await lastValueFrom(
-        this.client.send<number>({ cmd: 'sum' }, tab),
-      );
-
-      return result === expected;
-    };
-    return data
-      .map(async tab => send(tab))
-      .reduce(async (a, b) => (await a) && b);
-  }
-
-  @Post('error')
-  @HttpCode(200)
-  serializeError(
-    @Query('client') query: 'custom' | 'standard' = 'standard',
-    @Body() body: Record<string, any>,
-  ): Observable<boolean> {
-    const client = query === 'custom' ? this.customClient : this.client;
-    return client.send({ cmd: 'err' }, {}).pipe(
-      catchError(err => {
-        return of(err instanceof RpcException);
-      }),
-    );
-  }
-
-  @MessagePattern({ cmd: 'sum' })
-  sum(data: number[]): number {
-    return (data || []).reduce((a, b) => a + b);
-  }
-
-  @MessagePattern({ cmd: 'asyncSum' })
-  async asyncSum(data: number[]): Promise<number> {
-    return (data || []).reduce((a, b) => a + b);
-  }
-
-  @MessagePattern({ cmd: 'streamSum' })
-  streamSum(data: number[]): Observable<number> {
-    return of((data || []).reduce((a, b) => a + b));
-  }
-
-  @MessagePattern({ cmd: 'streaming' })
-  streaming(data: number[]): Observable<number> {
-    return from(data);
-  }
-
-  @MessagePattern({ cmd: 'err' })
-  throwAnError() {
-    return throwError(() => new Error('err'));
-  }
-
-  @Post('notify')
-  async sendNotification(): Promise<any> {
-    return this.client.emit<number>('notification', true);
-  }
-
-  @EventPattern('notification')
-  eventHandler(data: boolean) {
-    AppController.IS_NOTIFIED = data;
-  }
-}
diff --git a/integration/microservices/src/tcp-tls/app.module.ts b/integration/microservices/src/tcp-tls/app.module.ts
deleted file mode 100644
index 79a167886..000000000
--- a/integration/microservices/src/tcp-tls/app.module.ts
+++ /dev/null
@@ -1,90 +0,0 @@
-import { Module, Injectable } from '@nestjs/common';
-import { AppController } from './app.controller';
-import {
-  ClientsModule,
-  Transport,
-  ClientsModuleOptionsFactory,
-  ClientOptions,
-  ClientTCP,
-  RpcException,
-} from '@nestjs/microservices';
-
-import * as fs from 'fs';
-import * as path from 'path';
-
-const caCert = fs.readFileSync(path.join(__dirname, 'ca.cert.pem')).toString();
-
-class ErrorHandlingProxy extends ClientTCP {
-  constructor() {
-    super({
-      tlsOptions: { ca: caCert },
-    });
-  }
-
-  serializeError(err) {
-    return new RpcException(err);
-  }
-}
-
-@Injectable()
-class ConfigService {
-  private readonly config = {
-    transport: Transport.TCP,
-  };
-  get(key: string, defaultValue?: any) {
-    return this.config[key] || defaultValue;
-  }
-}
-
-@Module({
-  providers: [ConfigService],
-  exports: [ConfigService],
-})
-class ConfigModule {}
-
-@Injectable()
-class ClientOptionService implements ClientsModuleOptionsFactory {
-  constructor(private readonly configService: ConfigService) {}
-  createClientOptions(): Promise<ClientOptions> | ClientOptions {
-    return {
-      transport: this.configService.get('transport'),
-      options: {
-        tlsOptions: { ca: caCert },
-      },
-    };
-  }
-}
-
-@Module({
-  imports: [
-    ClientsModule.registerAsync([
-      {
-        imports: [ConfigModule],
-        name: 'USE_FACTORY_CLIENT',
-        useFactory: (configService: ConfigService) => ({
-          transport: configService.get('transport'),
-          options: {
-            tlsOptions: { ca: caCert },
-          },
-        }),
-        inject: [ConfigService],
-      },
-      {
-        imports: [ConfigModule],
-        name: 'USE_CLASS_CLIENT',
-        useClass: ClientOptionService,
-        inject: [ConfigService],
-      },
-      {
-        imports: [ConfigModule],
-        inject: [ConfigService],
-        name: 'CUSTOM_PROXY_CLIENT',
-        useFactory: (config: ConfigService) => ({
-          customClass: ErrorHandlingProxy,
-        }),
-      },
-    ]),
-  ],
-  controllers: [AppController],
-})
-export class ApplicationModule {}
diff --git a/integration/microservices/src/tcp-tls/ca.cert.pem b/integration/microservices/src/tcp-tls/ca.cert.pem
deleted file mode 100644
index dbc7d8a77..000000000
--- a/integration/microservices/src/tcp-tls/ca.cert.pem
+++ /dev/null
@@ -1,17 +0,0 @@
------BEGIN CERTIFICATE-----
-MIICpDCCAYwCCQCyP27z3r0PFjANBgkqhkiG9w0BAQsFADAUMRIwEAYDVQQDDAls
-b2NhbGhvc3QwHhcNMjIxMjAyMDQ0NTQ1WhcNMzIxMTI5MDQ0NTQ1WjAUMRIwEAYD
-VQQDDAlsb2NhbGhvc3QwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDZ
-1IdZZXqrwXql4AIOJnlfpoGKOKoIalnK7KaKHTsq1QOF8z2abFuNBVIIrO0etQ/0
-PPAaFGkXl6HHBuA5PrFpsw3V1wSnNs1Cns9NhvypHI2V71lkwBJrEaSicNWL2AOE
-QkQ9cZ4YsTGd0BrM8D5VvgXdrC7gOXfj7Hx3E4K+wFO/Gi4AUXl5CXxleSFcW4U+
-jFulfq/DE8rBZXs29IsGeVkkgUoICjQ4Ey4zE6EY7f3SPKgU8gfgzYyGSd/ZZ/E7
-6M2yakEUX448Nl4BeuNWroBHVm1pSiMo+Cm1g34pJScPrx1yw6qquziCc/2n1M6O
-B4WGIZAmJDWnAOEjjrxFAgMBAAEwDQYJKoZIhvcNAQELBQADggEBAABGByZZUjaq
-ZygICSH2qUGHPPIyrfaCe0qM7de6kYfxxPYQQZb0HDynzv780Lq1002XeT02fNR+
-5sBCVFuKvS8BNvTq6kHzO1FiWIk/E5fQcYNToYSeEcXgWFLhJMty7+R6sIc9y8PH
-2YNehf78Jjm9ukM52sLc4+JWl7AEeqPrOHZdh/ve8M2gTfimFKTrW5cEAVPIOPhp
-2t5BdDKt8ZxgrGC7iRxga+v80VUOHRGfrd3hf3NlDQZO8upVGY8DdJhPRDB72+R0
-kzJ7eyQwlGXM20atiFxPk43h0f273MneIJG8NgGiVU0ND4XnZkAB3KSAu7pB+nEw
-QRYMYDgo/8Q=
------END CERTIFICATE-----
diff --git a/integration/microservices/src/tcp-tls/privkey.pem b/integration/microservices/src/tcp-tls/privkey.pem
deleted file mode 100644
index f8a90acff..000000000
--- a/integration/microservices/src/tcp-tls/privkey.pem
+++ /dev/null
@@ -1,28 +0,0 @@
------BEGIN PRIVATE KEY-----
-MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDZ1IdZZXqrwXql
-4AIOJnlfpoGKOKoIalnK7KaKHTsq1QOF8z2abFuNBVIIrO0etQ/0PPAaFGkXl6HH
-BuA5PrFpsw3V1wSnNs1Cns9NhvypHI2V71lkwBJrEaSicNWL2AOEQkQ9cZ4YsTGd
-0BrM8D5VvgXdrC7gOXfj7Hx3E4K+wFO/Gi4AUXl5CXxleSFcW4U+jFulfq/DE8rB
-ZXs29IsGeVkkgUoICjQ4Ey4zE6EY7f3SPKgU8gfgzYyGSd/ZZ/E76M2yakEUX448
-Nl4BeuNWroBHVm1pSiMo+Cm1g34pJScPrx1yw6qquziCc/2n1M6OB4WGIZAmJDWn
-AOEjjrxFAgMBAAECggEANUKZtWnyjHxKGLSkzADsPE7h7YHdUSFvwwYJ0ktDZD2h
-FudacJ994wUiAa0GbTOoKvebXUUQTQxuKdOsj1Kc3lNBVr+0C46CsX9TAIm4zUCF
-/dr/6HpuBm/R6UXdcMvoUDZDqSJWnYL1trhjVSiIlT5ZANJQw9JJVhlEdXj3xtuc
-I9aC+33f9hKO1wzei/mTjIRGyRIeKselZPpA7qJnE4s3hmZxnO/rSqyPIvh1XLfZ
-3Eoyyg+xNpTZ8JqlHB5d7hDSnj8cjboa7IYpHJDXN3r8Aui+R9e/sQkezHbF7fR0
-xHpBVYQvGMuqSnTBkdJfq4qPAR1K49UrpEXB2GHaIQKBgQDs3t/ZUA138AiPIeLd
-aTsEPhf5dWEZynfNvXZ0VcoSr8ckaiaq9OEllprAriYWj+XphTDsBUAh/R7KlOR4
-eb+m6OwH7LseGiLIEr54GGP0LzVXAkfH2/uR1cak8qAmHB00jNEg7sj0eVAsHO3f
-WQm67f+RNP/IgAa+V8JKIkgTwwKBgQDrbAH8eAQsq9rjpxcic1EUI7uFHzr+cKf/
-4Y8ThLUNAzNfAbQWRBYjS1R8GM79Wiuh+WT1ooHKLryuLF7LVukvKHJ5GiNFBmaO
-llf72Zf1y4tBE2RCXQbf6h8+ohSDC/hwYy+w20/i2KzSBKkS0+gQuAX/HzfTpRd3
-q3/uEniXVwKBgDNnElDIbIPQlSrqgZ7mzSXYi79Y15+PLnx5VxFb5KQ1fRPL7WRA
-C/PqQN77a8yNoakRfFJbuVUm5t2zffkfApYoCcCWgOzBYzbjym2pbVd6PysIlacr
-d+Zn69mzxUk/5J6YyHFLIFTdVqacCIrleZUVPNa4F6HdFpmL1d/cnKOdAoGAMDuB
-sKsaF9jh0LBkEf/URa8IdT6vxH9qPAeHW7VdrpvQQ4/CyKkMbBC772zZw5hcxiOl
-Zpnzw2uN5pVamohk3++GfH85aKPmESKGRigPdSFNl3iUmvAaP3flDN0CHNMwBD6d
-/7r/A/fmeGTSCvR1YC+DswA/XNI/G5p8bFdGc6MCgYBd9oQiZlkYMiDGPUAjx+DO
-kqtAmc8DLJEanSbWdIxL2bGL04cgBRPssM4m0UScx4PucvqWEPdN/5Ug0z5TrD77
-2K5nZSBUdy4DunBImz1NHRQEiytkrYX0LesGr02QlzIH4wmwb1TFu7rLkr6KfNuV
-xqWi+JVY8N4vuHAxCeEALw==
------END PRIVATE KEY-----
\ No newline at end of file
diff --git a/integration/microservices/tsconfig.json b/integration/microservices/tsconfig.json
index cef623d14..c6354c564 100644
--- a/integration/microservices/tsconfig.json
+++ b/integration/microservices/tsconfig.json
@@ -7,28 +7,10 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
     "src/**/*",
diff --git a/integration/module-utils/src/integration.module-definition.ts b/integration/module-utils/src/integration.module-definition.ts
deleted file mode 100644
index 89d7a9842..000000000
--- a/integration/module-utils/src/integration.module-definition.ts
+++ /dev/null
@@ -1,17 +0,0 @@
-import { ConfigurableModuleBuilder } from '@nestjs/common';
-import { IntegrationModuleOptions } from './interfaces/integration-module-options.interface';
-
-export const { ConfigurableModuleClass, MODULE_OPTIONS_TOKEN } =
-  new ConfigurableModuleBuilder<IntegrationModuleOptions>()
-    .setClassMethodName('forRoot')
-    .setFactoryMethodName('construct')
-    .setExtras(
-      {
-        isGlobal: true,
-      },
-      (definition, extras) => ({
-        ...definition,
-        global: extras.isGlobal,
-      }),
-    )
-    .build();
diff --git a/integration/module-utils/src/integration.module.ts b/integration/module-utils/src/integration.module.ts
deleted file mode 100644
index 3b994f4bd..000000000
--- a/integration/module-utils/src/integration.module.ts
+++ /dev/null
@@ -1,16 +0,0 @@
-import { Inject, Module } from '@nestjs/common';
-import {
-  ConfigurableModuleClass,
-  MODULE_OPTIONS_TOKEN,
-} from './integration.module-definition';
-import { IntegrationModuleOptions } from './interfaces/integration-module-options.interface';
-
-@Module({})
-export class IntegrationModule extends ConfigurableModuleClass {
-  constructor(
-    @Inject(MODULE_OPTIONS_TOKEN)
-    public readonly options: IntegrationModuleOptions,
-  ) {
-    super();
-  }
-}
diff --git a/integration/module-utils/src/interfaces/integration-module-options.interface.ts b/integration/module-utils/src/interfaces/integration-module-options.interface.ts
deleted file mode 100644
index 802e02076..000000000
--- a/integration/module-utils/src/interfaces/integration-module-options.interface.ts
+++ /dev/null
@@ -1,4 +0,0 @@
-export interface IntegrationModuleOptions {
-  url: string;
-  secure?: boolean;
-}
diff --git a/integration/module-utils/tsconfig.json b/integration/module-utils/tsconfig.json
deleted file mode 100644
index cef623d14..000000000
--- a/integration/module-utils/tsconfig.json
+++ /dev/null
@@ -1,40 +0,0 @@
-{
-  "compilerOptions": {
-    "module": "commonjs",
-    "declaration": false,
-    "noImplicitAny": false,
-    "removeComments": true,
-    "noLib": false,
-    "emitDecoratorMetadata": true,
-    "experimentalDecorators": true,
-    "target": "ES2021",
-    "sourceMap": true,
-    "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
-  },
-  "include": [
-    "src/**/*",
-    "e2e/**/*"
-  ],
-  "exclude": [
-    "node_modules",
-  ]
-}
\ No newline at end of file
diff --git a/integration/mongoose/tsconfig.json b/integration/mongoose/tsconfig.json
index cef623d14..ea15af490 100644
--- a/integration/mongoose/tsconfig.json
+++ b/integration/mongoose/tsconfig.json
@@ -7,34 +7,16 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
-    "src/**/*",
-    "e2e/**/*"
+    "src/**/*"
   ],
   "exclude": [
     "node_modules",
+    "**/*.spec.ts"
   ]
 }
\ No newline at end of file
diff --git a/integration/mosquitto.conf b/integration/mosquitto.conf
deleted file mode 100644
index 440823741..000000000
--- a/integration/mosquitto.conf
+++ /dev/null
@@ -1,906 +0,0 @@
-# Config file for mosquitto
-#
-# See mosquitto.conf(5) for more information.
-#
-# Default values are shown, uncomment to change.
-#
-# Use the # character to indicate a comment, but only if it is the
-# very first character on the line.
-
-# =================================================================
-# General configuration
-# =================================================================
-
-# Use per listener security settings.
-#
-# It is recommended this option be set before any other options.
-#
-# If this option is set to true, then all authentication and access control
-# options are controlled on a per listener basis. The following options are
-# affected:
-#
-# acl_file
-# allow_anonymous
-# allow_zero_length_clientid
-# auto_id_prefix
-# password_file
-# plugin
-# plugin_opt_*
-# psk_file
-#
-# Note that if set to true, then a durable client (i.e. with clean session set
-# to false) that has disconnected will use the ACL settings defined for the
-# listener that it was most recently connected to.
-#
-# The default behaviour is for this to be set to false, which maintains the
-# setting behaviour from previous versions of mosquitto.
-#per_listener_settings false
-
-
-# This option controls whether a client is allowed to connect with a zero
-# length client id or not. This option only affects clients using MQTT v3.1.1
-# and later. If set to false, clients connecting with a zero length client id
-# are disconnected. If set to true, clients will be allocated a client id by
-# the broker. This means it is only useful for clients with clean session set
-# to true.
-#allow_zero_length_clientid true
-
-# If allow_zero_length_clientid is true, this option allows you to set a prefix
-# to automatically generated client ids to aid visibility in logs.
-# Defaults to 'auto-'
-#auto_id_prefix auto-
-
-# This option affects the scenario when a client subscribes to a topic that has
-# retained messages. It is possible that the client that published the retained
-# message to the topic had access at the time they published, but that access
-# has been subsequently removed. If check_retain_source is set to true, the
-# default, the source of a retained message will be checked for access rights
-# before it is republished. When set to false, no check will be made and the
-# retained message will always be published. This affects all listeners.
-#check_retain_source true
-
-# QoS 1 and 2 messages will be allowed inflight per client until this limit
-# is exceeded.  Defaults to 0. (No maximum)
-# See also max_inflight_messages
-#max_inflight_bytes 0
-
-# The maximum number of QoS 1 and 2 messages currently inflight per
-# client.
-# This includes messages that are partway through handshakes and
-# those that are being retried. Defaults to 20. Set to 0 for no
-# maximum. Setting to 1 will guarantee in-order delivery of QoS 1
-# and 2 messages.
-#max_inflight_messages 20
-
-# For MQTT v5 clients, it is possible to have the server send a "server
-# keepalive" value that will override the keepalive value set by the client.
-# This is intended to be used as a mechanism to say that the server will
-# disconnect the client earlier than it anticipated, and that the client should
-# use the new keepalive value. The max_keepalive option allows you to specify
-# that clients may only connect with keepalive less than or equal to this
-# value, otherwise they will be sent a server keepalive telling them to use
-# max_keepalive. This only applies to MQTT v5 clients. The default, and maximum
-# value allowable, is 65535.
-#
-# Set to 0 to allow clients to set keepalive = 0, which means no keepalive
-# checks are made and the client will never be disconnected by the broker if no
-# messages are received. You should be very sure this is the behaviour that you
-# want.
-#
-# For MQTT v3.1.1 and v3.1 clients, there is no mechanism to tell the client
-# what keepalive value they should use. If an MQTT v3.1.1 or v3.1 client
-# specifies a keepalive time greater than max_keepalive they will be sent a
-# CONNACK message with the "identifier rejected" reason code, and disconnected.
-#
-#max_keepalive 65535
-
-# For MQTT v5 clients, it is possible to have the server send a "maximum packet
-# size" value that will instruct the client it will not accept MQTT packets
-# with size greater than max_packet_size bytes. This applies to the full MQTT
-# packet, not just the payload. Setting this option to a positive value will
-# set the maximum packet size to that number of bytes. If a client sends a
-# packet which is larger than this value, it will be disconnected. This applies
-# to all clients regardless of the protocol version they are using, but v3.1.1
-# and earlier clients will of course not have received the maximum packet size
-# information. Defaults to no limit. Setting below 20 bytes is forbidden
-# because it is likely to interfere with ordinary client operation, even with
-# very small payloads.
-#max_packet_size 0
-
-# QoS 1 and 2 messages above those currently in-flight will be queued per
-# client until this limit is exceeded.  Defaults to 0. (No maximum)
-# See also max_queued_messages.
-# If both max_queued_messages and max_queued_bytes are specified, packets will
-# be queued until the first limit is reached.
-#max_queued_bytes 0
-
-# Set the maximum QoS supported. Clients publishing at a QoS higher than
-# specified here will be disconnected.
-#max_qos 2
-
-# The maximum number of QoS 1 and 2 messages to hold in a queue per client
-# above those that are currently in-flight.  Defaults to 1000. Set
-# to 0 for no maximum (not recommended).
-# See also queue_qos0_messages.
-# See also max_queued_bytes.
-#max_queued_messages 1000
-#
-# This option sets the maximum number of heap memory bytes that the broker will
-# allocate, and hence sets a hard limit on memory use by the broker.  Memory
-# requests that exceed this value will be denied. The effect will vary
-# depending on what has been denied. If an incoming message is being processed,
-# then the message will be dropped and the publishing client will be
-# disconnected. If an outgoing message is being sent, then the individual
-# message will be dropped and the receiving client will be disconnected.
-# Defaults to no limit.
-#memory_limit 0
-
-# This option sets the maximum publish payload size that the broker will allow.
-# Received messages that exceed this size will not be accepted by the broker.
-# The default value is 0, which means that all valid MQTT messages are
-# accepted. MQTT imposes a maximum payload size of 268435455 bytes.
-#message_size_limit 0
-
-# This option allows persistent clients (those with clean session set to false)
-# to be removed if they do not reconnect within a certain time frame.
-#
-# This is a non-standard option in MQTT V3.1 but allowed in MQTT v3.1.1.
-#
-# Badly designed clients may set clean session to false whilst using a randomly
-# generated client id. This leads to persistent clients that will never
-# reconnect. This option allows these clients to be removed.
-#
-# The expiration period should be an integer followed by one of h d w m y for
-# hour, day, week, month and year respectively. For example
-#
-# persistent_client_expiration 2m
-# persistent_client_expiration 14d
-# persistent_client_expiration 1y
-#
-# The default if not set is to never expire persistent clients.
-#persistent_client_expiration
-
-# Write process id to a file. Default is a blank string which means
-# a pid file shouldn't be written.
-# This should be set to /var/run/mosquitto/mosquitto.pid if mosquitto is
-# being run automatically on boot with an init script and
-# start-stop-daemon or similar.
-#pid_file
-
-# Set to true to queue messages with QoS 0 when a persistent client is
-# disconnected. These messages are included in the limit imposed by
-# max_queued_messages and max_queued_bytes
-# Defaults to false.
-# This is a non-standard option for the MQTT v3.1 spec but is allowed in
-# v3.1.1.
-#queue_qos0_messages false
-
-# Set to false to disable retained message support. If a client publishes a
-# message with the retain bit set, it will be disconnected if this is set to
-# false.
-#retain_available true
-
-# Disable Nagle's algorithm on client sockets. This has the effect of reducing
-# latency of individual messages at the potential cost of increasing the number
-# of packets being sent.
-#set_tcp_nodelay false
-
-# Time in seconds between updates of the $SYS tree.
-# Set to 0 to disable the publishing of the $SYS tree.
-#sys_interval 10
-
-# The MQTT specification requires that the QoS of a message delivered to a
-# subscriber is never upgraded to match the QoS of the subscription. Enabling
-# this option changes this behaviour. If upgrade_outgoing_qos is set true,
-# messages sent to a subscriber will always match the QoS of its subscription.
-# This is a non-standard option explicitly disallowed by the spec.
-#upgrade_outgoing_qos false
-
-# When run as root, drop privileges to this user and its primary
-# group.
-# Set to root to stay as root, but this is not recommended.
-# If set to "mosquitto", or left unset, and the "mosquitto" user does not exist
-# then it will drop privileges to the "nobody" user instead.
-# If run as a non-root user, this setting has no effect.
-# Note that on Windows this has no effect and so mosquitto should be started by
-# the user you wish it to run as.
-#user mosquitto
-
-# =================================================================
-# Listeners
-# =================================================================
-
-# Listen on a port/ip address combination. By using this variable
-# multiple times, mosquitto can listen on more than one port. If
-# this variable is used and neither bind_address nor port given,
-# then the default listener will not be started.
-# The port number to listen on must be given. Optionally, an ip
-# address or host name may be supplied as a second argument. In
-# this case, mosquitto will attempt to bind the listener to that
-# address and so restrict access to the associated network and
-# interface. By default, mosquitto will listen on all interfaces.
-# Note that for a websockets listener it is not possible to bind to a host
-# name.
-#
-# On systems that support Unix Domain Sockets, it is also possible
-# to create a # Unix socket rather than opening a TCP socket. In
-# this case, the port number should be set to 0 and a unix socket
-# path must be provided, e.g.
-# listener 0 /tmp/mosquitto.sock
-#
-# listener port-number [ip address/host name/unix socket path]
-#listener
-
-# By default, a listener will attempt to listen on all supported IP protocol
-# versions. If you do not have an IPv4 or IPv6 interface you may wish to
-# disable support for either of those protocol versions. In particular, note
-# that due to the limitations of the websockets library, it will only ever
-# attempt to open IPv6 sockets if IPv6 support is compiled in, and so will fail
-# if IPv6 is not available.
-#
-# Set to `ipv4` to force the listener to only use IPv4, or set to `ipv6` to
-# force the listener to only use IPv6. If you want support for both IPv4 and
-# IPv6, then do not use the socket_domain option.
-#
-#socket_domain
-
-# Bind the listener to a specific interface. This is similar to
-# the [ip address/host name] part of the listener definition, but is useful
-# when an interface has multiple addresses or the address may change. If used
-# with the [ip address/host name] part of the listener definition, then the
-# bind_interface option will take priority.
-# Not available on Windows.
-#
-# Example: bind_interface eth0
-#bind_interface
-
-# When a listener is using the websockets protocol, it is possible to serve
-# http data as well. Set http_dir to a directory which contains the files you
-# wish to serve. If this option is not specified, then no normal http
-# connections will be possible.
-#http_dir
-
-# The maximum number of client connections to allow. This is
-# a per listener setting.
-# Default is -1, which means unlimited connections.
-# Note that other process limits mean that unlimited connections
-# are not really possible. Typically the default maximum number of
-# connections possible is around 1024.
-#max_connections -1
-
-# The listener can be restricted to operating within a topic hierarchy using
-# the mount_point option. This is achieved be prefixing the mount_point string
-# to all topics for any clients connected to this listener. This prefixing only
-# happens internally to the broker; the client will not see the prefix.
-#mount_point
-
-# Choose the protocol to use when listening.
-# This can be either mqtt or websockets.
-# Certificate based TLS may be used with websockets, except that only the
-# cafile, certfile, keyfile, ciphers, and ciphers_tls13 options are supported.
-#protocol mqtt
-listener 1883
-protocol mqtt
-
-listener 9001
-protocol websockets
-
-# Set use_username_as_clientid to true to replace the clientid that a client
-# connected with with its username. This allows authentication to be tied to
-# the clientid, which means that it is possible to prevent one client
-# disconnecting another by using the same clientid.
-# If a client connects with no username it will be disconnected as not
-# authorised when this option is set to true.
-# Do not use in conjunction with clientid_prefixes.
-# See also use_identity_as_username.
-#use_username_as_clientid
-
-# Change the websockets headers size. This is a global option, it is not
-# possible to set per listener. This option sets the size of the buffer used in
-# the libwebsockets library when reading HTTP headers. If you are passing large
-# header data such as cookies then you may need to increase this value. If left
-# unset, or set to 0, then the default of 1024 bytes will be used.
-#websockets_headers_size
-
-# -----------------------------------------------------------------
-# Certificate based SSL/TLS support
-# -----------------------------------------------------------------
-# The following options can be used to enable certificate based SSL/TLS support
-# for this listener. Note that the recommended port for MQTT over TLS is 8883,
-# but this must be set manually.
-#
-# See also the mosquitto-tls man page and the "Pre-shared-key based SSL/TLS
-# support" section. Only one of certificate or PSK encryption support can be
-# enabled for any listener.
-
-# Both of certfile and keyfile must be defined to enable certificate based
-# TLS encryption.
-
-# Path to the PEM encoded server certificate.
-#certfile
-
-# Path to the PEM encoded keyfile.
-#keyfile
-
-# If you wish to control which encryption ciphers are used, use the ciphers
-# option. The list of available ciphers can be optained using the "openssl
-# ciphers" command and should be provided in the same format as the output of
-# that command. This applies to TLS 1.2 and earlier versions only. Use
-# ciphers_tls1.3 for TLS v1.3.
-#ciphers
-
-# Choose which TLS v1.3 ciphersuites are used for this listener.
-# Defaults to "TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_128_GCM_SHA256"
-#ciphers_tls1.3
-
-# If you have require_certificate set to true, you can create a certificate
-# revocation list file to revoke access to particular client certificates. If
-# you have done this, use crlfile to point to the PEM encoded revocation file.
-#crlfile
-
-# To allow the use of ephemeral DH key exchange, which provides forward
-# security, the listener must load DH parameters. This can be specified with
-# the dhparamfile option. The dhparamfile can be generated with the command
-# e.g. "openssl dhparam -out dhparam.pem 2048"
-#dhparamfile
-
-# By default an TLS enabled listener will operate in a similar fashion to a
-# https enabled web server, in that the server has a certificate signed by a CA
-# and the client will verify that it is a trusted certificate. The overall aim
-# is encryption of the network traffic. By setting require_certificate to true,
-# the client must provide a valid certificate in order for the network
-# connection to proceed. This allows access to the broker to be controlled
-# outside of the mechanisms provided by MQTT.
-#require_certificate false
-
-# cafile and capath define methods of accessing the PEM encoded
-# Certificate Authority certificates that will be considered trusted when
-# checking incoming client certificates.
-# cafile defines the path to a file containing the CA certificates.
-# capath defines a directory that will be searched for files
-# containing the CA certificates. For capath to work correctly, the
-# certificate files must have ".crt" as the file ending and you must run
-# "openssl rehash <path to capath>" each time you add/remove a certificate.
-#cafile
-#capath
-
-
-# If require_certificate is true, you may set use_identity_as_username to true
-# to use the CN value from the client certificate as a username. If this is
-# true, the password_file option will not be used for this listener.
-#use_identity_as_username false
-
-# -----------------------------------------------------------------
-# Pre-shared-key based SSL/TLS support
-# -----------------------------------------------------------------
-# The following options can be used to enable PSK based SSL/TLS support for
-# this listener. Note that the recommended port for MQTT over TLS is 8883, but
-# this must be set manually.
-#
-# See also the mosquitto-tls man page and the "Certificate based SSL/TLS
-# support" section. Only one of certificate or PSK encryption support can be
-# enabled for any listener.
-
-# The psk_hint option enables pre-shared-key support for this listener and also
-# acts as an identifier for this listener. The hint is sent to clients and may
-# be used locally to aid authentication. The hint is a free form string that
-# doesn't have much meaning in itself, so feel free to be creative.
-# If this option is provided, see psk_file to define the pre-shared keys to be
-# used or create a security plugin to handle them.
-#psk_hint
-
-# When using PSK, the encryption ciphers used will be chosen from the list of
-# available PSK ciphers. If you want to control which ciphers are available,
-# use the "ciphers" option.  The list of available ciphers can be optained
-# using the "openssl ciphers" command and should be provided in the same format
-# as the output of that command.
-#ciphers
-
-# Set use_identity_as_username to have the psk identity sent by the client used
-# as its username. Authentication will be carried out using the PSK rather than
-# the MQTT username/password and so password_file will not be used for this
-# listener.
-#use_identity_as_username false
-
-
-# =================================================================
-# Persistence
-# =================================================================
-
-# If persistence is enabled, save the in-memory database to disk
-# every autosave_interval seconds. If set to 0, the persistence
-# database will only be written when mosquitto exits. See also
-# autosave_on_changes.
-# Note that writing of the persistence database can be forced by
-# sending mosquitto a SIGUSR1 signal.
-#autosave_interval 1800
-
-# If true, mosquitto will count the number of subscription changes, retained
-# messages received and queued messages and if the total exceeds
-# autosave_interval then the in-memory database will be saved to disk.
-# If false, mosquitto will save the in-memory database to disk by treating
-# autosave_interval as a time in seconds.
-#autosave_on_changes false
-
-# Save persistent message data to disk (true/false).
-# This saves information about all messages, including
-# subscriptions, currently in-flight messages and retained
-# messages.
-# retained_persistence is a synonym for this option.
-#persistence false
-
-# The filename to use for the persistent database, not including
-# the path.
-#persistence_file mosquitto.db
-
-# Location for persistent database.
-# Default is an empty string (current directory).
-# Set to e.g. /var/lib/mosquitto if running as a proper service on Linux or
-# similar.
-#persistence_location
-
-
-# =================================================================
-# Logging
-# =================================================================
-
-# Places to log to. Use multiple log_dest lines for multiple
-# logging destinations.
-# Possible destinations are: stdout stderr syslog topic file dlt
-#
-# stdout and stderr log to the console on the named output.
-#
-# syslog uses the userspace syslog facility which usually ends up
-# in /var/log/messages or similar.
-#
-# topic logs to the broker topic '$SYS/broker/log/<severity>',
-# where severity is one of D, E, W, N, I, M which are debug, error,
-# warning, notice, information and message. Message type severity is used by
-# the subscribe/unsubscribe log_types and publishes log messages to
-# $SYS/broker/log/M/susbcribe or $SYS/broker/log/M/unsubscribe.
-#
-# The file destination requires an additional parameter which is the file to be
-# logged to, e.g. "log_dest file /var/log/mosquitto.log". The file will be
-# closed and reopened when the broker receives a HUP signal. Only a single file
-# destination may be configured.
-#
-# The dlt destination is for the automotive `Diagnostic Log and Trace` tool.
-# This requires that Mosquitto has been compiled with DLT support.
-#
-# Note that if the broker is running as a Windows service it will default to
-# "log_dest none" and neither stdout nor stderr logging is available.
-# Use "log_dest none" if you wish to disable logging.
-#log_dest stderr
-
-# Types of messages to log. Use multiple log_type lines for logging
-# multiple types of messages.
-# Possible types are: debug, error, warning, notice, information,
-# none, subscribe, unsubscribe, websockets, all.
-# Note that debug type messages are for decoding the incoming/outgoing
-# network packets. They are not logged in "topics".
-#log_type error
-#log_type warning
-#log_type notice
-#log_type information
-
-
-# If set to true, client connection and disconnection messages will be included
-# in the log.
-#connection_messages true
-
-# If using syslog logging (not on Windows), messages will be logged to the
-# "daemon" facility by default. Use the log_facility option to choose which of
-# local0 to local7 to log to instead. The option value should be an integer
-# value, e.g. "log_facility 5" to use local5.
-#log_facility
-
-# If set to true, add a timestamp value to each log message.
-#log_timestamp true
-
-# Set the format of the log timestamp. If left unset, this is the number of
-# seconds since the Unix epoch.
-# This is a free text string which will be passed to the strftime function. To
-# get an ISO 8601 datetime, for example:
-# log_timestamp_format %Y-%m-%dT%H:%M:%S
-#log_timestamp_format
-
-# Change the websockets logging level. This is a global option, it is not
-# possible to set per listener. This is an integer that is interpreted by
-# libwebsockets as a bit mask for its lws_log_levels enum. See the
-# libwebsockets documentation for more details. "log_type websockets" must also
-# be enabled.
-#websockets_log_level 0
-
-
-# =================================================================
-# Security
-# =================================================================
-
-# If set, only clients that have a matching prefix on their
-# clientid will be allowed to connect to the broker. By default,
-# all clients may connect.
-# For example, setting "secure-" here would mean a client "secure-
-# client" could connect but another with clientid "mqtt" couldn't.
-#clientid_prefixes
-
-# Boolean value that determines whether clients that connect
-# without providing a username are allowed to connect. If set to
-# false then a password file should be created (see the
-# password_file option) to control authenticated client access.
-#
-# Defaults to false, unless there are no listeners defined in the configuration
-# file, in which case it is set to true, but connections are only allowed from
-# the local machine.
-allow_anonymous true
-
-# -----------------------------------------------------------------
-# Default authentication and topic access control
-# -----------------------------------------------------------------
-
-# Control access to the broker using a password file. This file can be
-# generated using the mosquitto_passwd utility. If TLS support is not compiled
-# into mosquitto (it is recommended that TLS support should be included) then
-# plain text passwords are used, in which case the file should be a text file
-# with lines in the format:
-# username:password
-# The password (and colon) may be omitted if desired, although this
-# offers very little in the way of security.
-#
-# See the TLS client require_certificate and use_identity_as_username options
-# for alternative authentication options. If a plugin is used as well as
-# password_file, the plugin check will be made first.
-#password_file
-
-# Access may also be controlled using a pre-shared-key file. This requires
-# TLS-PSK support and a listener configured to use it. The file should be text
-# lines in the format:
-# identity:key
-# The key should be in hexadecimal format without a leading "0x".
-# If an plugin is used as well, the plugin check will be made first.
-#psk_file
-
-# Control access to topics on the broker using an access control list
-# file. If this parameter is defined then only the topics listed will
-# have access.
-# If the first character of a line of the ACL file is a # it is treated as a
-# comment.
-# Topic access is added with lines of the format:
-#
-# topic [read|write|readwrite|deny] <topic>
-#
-# The access type is controlled using "read", "write", "readwrite" or "deny".
-# This parameter is optional (unless <topic> contains a space character) - if
-# not given then the access is read/write.  <topic> can contain the + or #
-# wildcards as in subscriptions.
-#
-# The "deny" option can used to explicity deny access to a topic that would
-# otherwise be granted by a broader read/write/readwrite statement. Any "deny"
-# topics are handled before topics that grant read/write access.
-#
-# The first set of topics are applied to anonymous clients, assuming
-# allow_anonymous is true. User specific topic ACLs are added after a
-# user line as follows:
-#
-# user <username>
-#
-# The username referred to here is the same as in password_file. It is
-# not the clientid.
-#
-#
-# If is also possible to define ACLs based on pattern substitution within the
-# topic. The patterns available for substition are:
-#
-# %c to match the client id of the client
-# %u to match the username of the client
-#
-# The substitution pattern must be the only text for that level of hierarchy.
-#
-# The form is the same as for the topic keyword, but using pattern as the
-# keyword.
-# Pattern ACLs apply to all users even if the "user" keyword has previously
-# been given.
-#
-# If using bridges with usernames and ACLs, connection messages can be allowed
-# with the following pattern:
-# pattern write $SYS/broker/connection/%c/state
-#
-# pattern [read|write|readwrite] <topic>
-#
-# Example:
-#
-# pattern write sensor/%u/data
-#
-# If an plugin is used as well as acl_file, the plugin check will be
-# made first.
-#acl_file
-
-# -----------------------------------------------------------------
-# External authentication and topic access plugin options
-# -----------------------------------------------------------------
-
-# External authentication and access control can be supported with the
-# plugin option. This is a path to a loadable plugin. See also the
-# plugin_opt_* options described below.
-#
-# The plugin option can be specified multiple times to load multiple
-# plugins. The plugins will be processed in the order that they are specified
-# here. If the plugin option is specified alongside either of
-# password_file or acl_file then the plugin checks will be made first.
-#
-# If the per_listener_settings option is false, the plugin will be apply to all
-# listeners. If per_listener_settings is true, then the plugin will apply to
-# the current listener being defined only.
-#
-# This option is also available as `auth_plugin`, but this use is deprecated
-# and will be removed in the future.
-#
-#plugin
-
-# If the plugin option above is used, define options to pass to the
-# plugin here as described by the plugin instructions. All options named
-# using the format plugin_opt_* will be passed to the plugin, for example:
-#
-# This option is also available as `auth_opt_*`, but this use is deprecated
-# and will be removed in the future.
-#
-# plugin_opt_db_host
-# plugin_opt_db_port
-# plugin_opt_db_username
-# plugin_opt_db_password
-
-
-# =================================================================
-# Bridges
-# =================================================================
-
-# A bridge is a way of connecting multiple MQTT brokers together.
-# Create a new bridge using the "connection" option as described below. Set
-# options for the bridges using the remaining parameters. You must specify the
-# address and at least one topic to subscribe to.
-#
-# Each connection must have a unique name.
-#
-# The address line may have multiple host address and ports specified. See
-# below in the round_robin description for more details on bridge behaviour if
-# multiple addresses are used. Note that if you use an IPv6 address, then you
-# are required to specify a port.
-#
-# The direction that the topic will be shared can be chosen by
-# specifying out, in or both, where the default value is out.
-# The QoS level of the bridged communication can be specified with the next
-# topic option. The default QoS level is 0, to change the QoS the topic
-# direction must also be given.
-#
-# The local and remote prefix options allow a topic to be remapped when it is
-# bridged to/from the remote broker. This provides the ability to place a topic
-# tree in an appropriate location.
-#
-# For more details see the mosquitto.conf man page.
-#
-# Multiple topics can be specified per connection, but be careful
-# not to create any loops.
-#
-# If you are using bridges with cleansession set to false (the default), then
-# you may get unexpected behaviour from incoming topics if you change what
-# topics you are subscribing to. This is because the remote broker keeps the
-# subscription for the old topic. If you have this problem, connect your bridge
-# with cleansession set to true, then reconnect with cleansession set to false
-# as normal.
-#connection <name>
-#address <host>[:<port>] [<host>[:<port>]]
-#topic <topic> [[[out | in | both] qos-level] local-prefix remote-prefix]
-
-# If you need to have the bridge connect over a particular network interface,
-# use bridge_bind_address to tell the bridge which local IP address the socket
-# should bind to, e.g. `bridge_bind_address 192.168.1.10`
-#bridge_bind_address
-
-# If a bridge has topics that have "out" direction, the default behaviour is to
-# send an unsubscribe request to the remote broker on that topic. This means
-# that changing a topic direction from "in" to "out" will not keep receiving
-# incoming messages. Sending these unsubscribe requests is not always
-# desirable, setting bridge_attempt_unsubscribe to false will disable sending
-# the unsubscribe request.
-#bridge_attempt_unsubscribe true
-
-# Set the version of the MQTT protocol to use with for this bridge. Can be one
-# of mqttv50, mqttv311 or mqttv31. Defaults to mqttv311.
-#bridge_protocol_version mqttv311
-
-# Set the clean session variable for this bridge.
-# When set to true, when the bridge disconnects for any reason, all
-# messages and subscriptions will be cleaned up on the remote
-# broker. Note that with cleansession set to true, there may be a
-# significant amount of retained messages sent when the bridge
-# reconnects after losing its connection.
-# When set to false, the subscriptions and messages are kept on the
-# remote broker, and delivered when the bridge reconnects.
-#cleansession false
-
-# Set the amount of time a bridge using the lazy start type must be idle before
-# it will be stopped. Defaults to 60 seconds.
-#idle_timeout 60
-
-# Set the keepalive interval for this bridge connection, in
-# seconds.
-#keepalive_interval 60
-
-# Set the clientid to use on the local broker. If not defined, this defaults to
-# 'local.<clientid>'. If you are bridging a broker to itself, it is important
-# that local_clientid and clientid do not match.
-#local_clientid
-
-# If set to true, publish notification messages to the local and remote brokers
-# giving information about the state of the bridge connection. Retained
-# messages are published to the topic $SYS/broker/connection/<clientid>/state
-# unless the notification_topic option is used.
-# If the message is 1 then the connection is active, or 0 if the connection has
-# failed.
-# This uses the last will and testament feature.
-#notifications true
-
-# Choose the topic on which notification messages for this bridge are
-# published. If not set, messages are published on the topic
-# $SYS/broker/connection/<clientid>/state
-#notification_topic
-
-# Set the client id to use on the remote end of this bridge connection. If not
-# defined, this defaults to 'name.hostname' where name is the connection name
-# and hostname is the hostname of this computer.
-# This replaces the old "clientid" option to avoid confusion. "clientid"
-# remains valid for the time being.
-#remote_clientid
-
-# Set the password to use when connecting to a broker that requires
-# authentication. This option is only used if remote_username is also set.
-# This replaces the old "password" option to avoid confusion. "password"
-# remains valid for the time being.
-#remote_password
-
-# Set the username to use when connecting to a broker that requires
-# authentication.
-# This replaces the old "username" option to avoid confusion. "username"
-# remains valid for the time being.
-#remote_username
-
-# Set the amount of time a bridge using the automatic start type will wait
-# until attempting to reconnect.
-# This option can be configured to use a constant delay time in seconds, or to
-# use a backoff mechanism based on "Decorrelated Jitter", which adds a degree
-# of randomness to when the restart occurs.
-#
-# Set a constant timeout of 20 seconds:
-# restart_timeout 20
-#
-# Set backoff with a base (start value) of 10 seconds and a cap (upper limit) of
-# 60 seconds:
-# restart_timeout 10 30
-#
-# Defaults to jitter with a base of 5 and cap of 30
-#restart_timeout 5 30
-
-# If the bridge has more than one address given in the address/addresses
-# configuration, the round_robin option defines the behaviour of the bridge on
-# a failure of the bridge connection. If round_robin is false, the default
-# value, then the first address is treated as the main bridge connection. If
-# the connection fails, the other secondary addresses will be attempted in
-# turn. Whilst connected to a secondary bridge, the bridge will periodically
-# attempt to reconnect to the main bridge until successful.
-# If round_robin is true, then all addresses are treated as equals. If a
-# connection fails, the next address will be tried and if successful will
-# remain connected until it fails
-#round_robin false
-
-# Set the start type of the bridge. This controls how the bridge starts and
-# can be one of three types: automatic, lazy and once. Note that RSMB provides
-# a fourth start type "manual" which isn't currently supported by mosquitto.
-#
-# "automatic" is the default start type and means that the bridge connection
-# will be started automatically when the broker starts and also restarted
-# after a short delay (30 seconds) if the connection fails.
-#
-# Bridges using the "lazy" start type will be started automatically when the
-# number of queued messages exceeds the number set with the "threshold"
-# parameter. It will be stopped automatically after the time set by the
-# "idle_timeout" parameter. Use this start type if you wish the connection to
-# only be active when it is needed.
-#
-# A bridge using the "once" start type will be started automatically when the
-# broker starts but will not be restarted if the connection fails.
-#start_type automatic
-
-# Set the number of messages that need to be queued for a bridge with lazy
-# start type to be restarted. Defaults to 10 messages.
-# Must be less than max_queued_messages.
-#threshold 10
-
-# If try_private is set to true, the bridge will attempt to indicate to the
-# remote broker that it is a bridge not an ordinary client. If successful, this
-# means that loop detection will be more effective and that retained messages
-# will be propagated correctly. Not all brokers support this feature so it may
-# be necessary to set try_private to false if your bridge does not connect
-# properly.
-#try_private true
-
-# Some MQTT brokers do not allow retained messages. MQTT v5 gives a mechanism
-# for brokers to tell clients that they do not support retained messages, but
-# this is not possible for MQTT v3.1.1 or v3.1. If you need to bridge to a
-# v3.1.1 or v3.1 broker that does not support retained messages, set the
-# bridge_outgoing_retain option to false. This will remove the retain bit on
-# all outgoing messages to that bridge, regardless of any other setting.
-#bridge_outgoing_retain true
-
-# If you wish to restrict the size of messages sent to a remote bridge, use the
-# bridge_max_packet_size option. This sets the maximum number of bytes for
-# the total message, including headers and payload.
-# Note that MQTT v5 brokers may provide their own maximum-packet-size property.
-# In this case, the smaller of the two limits will be used.
-# Set to 0 for "unlimited".
-#bridge_max_packet_size 0
-
-
-# -----------------------------------------------------------------
-# Certificate based SSL/TLS support
-# -----------------------------------------------------------------
-# Either bridge_cafile or bridge_capath must be defined to enable TLS support
-# for this bridge.
-# bridge_cafile defines the path to a file containing the
-# Certificate Authority certificates that have signed the remote broker
-# certificate.
-# bridge_capath defines a directory that will be searched for files containing
-# the CA certificates. For bridge_capath to work correctly, the certificate
-# files must have ".crt" as the file ending and you must run "openssl rehash
-# <path to capath>" each time you add/remove a certificate.
-#bridge_cafile
-#bridge_capath
-
-
-# If the remote broker has more than one protocol available on its port, e.g.
-# MQTT and WebSockets, then use bridge_alpn to configure which protocol is
-# requested. Note that WebSockets support for bridges is not yet available.
-#bridge_alpn
-
-# When using certificate based encryption, bridge_insecure disables
-# verification of the server hostname in the server certificate. This can be
-# useful when testing initial server configurations, but makes it possible for
-# a malicious third party to impersonate your server through DNS spoofing, for
-# example. Use this option in testing only. If you need to resort to using this
-# option in a production environment, your setup is at fault and there is no
-# point using encryption.
-#bridge_insecure false
-
-# Path to the PEM encoded client certificate, if required by the remote broker.
-#bridge_certfile
-
-# Path to the PEM encoded client private key, if required by the remote broker.
-#bridge_keyfile
-
-# -----------------------------------------------------------------
-# PSK based SSL/TLS support
-# -----------------------------------------------------------------
-# Pre-shared-key encryption provides an alternative to certificate based
-# encryption. A bridge can be configured to use PSK with the bridge_identity
-# and bridge_psk options. These are the client PSK identity, and pre-shared-key
-# in hexadecimal format with no "0x". Only one of certificate and PSK based
-# encryption can be used on one
-# bridge at once.
-#bridge_identity
-#bridge_psk
-
-
-# =================================================================
-# External config files
-# =================================================================
-
-# External configuration files may be included by using the
-# include_dir option. This defines a directory that will be searched
-# for config files. All files that end in '.conf' will be loaded as
-# a configuration file. It is best to have this as the last option
-# in the main file. This option will only be processed from the main
-# configuration file. The directory specified must not contain the
-# main configuration file.
-# Files within include_dir will be loaded sorted in case-sensitive
-# alphabetical order, with capital letters ordered first. If this option is
-# given multiple times, all of the files from the first instance will be
-# processed before the next instance. See the man page for examples.
-#include_dir
diff --git a/integration/nest-application/app-locals/tsconfig.json b/integration/nest-application/app-locals/tsconfig.json
index c3692649c..2a0adf369 100644
--- a/integration/nest-application/app-locals/tsconfig.json
+++ b/integration/nest-application/app-locals/tsconfig.json
@@ -7,34 +7,16 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../../packages/common"],
-      "@nestjs/common/*": ["../../../packages/common/*"],
-      "@nestjs/core": ["../../../packages/core"],
-      "@nestjs/core/*": ["../../../packages/core/*"],
-      "@nestjs/microservices": ["../../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../../packages/websockets/*"],
-      "@nestjs/testing": ["../../../packages/websockets"],
-      "@nestjs/testing/*": ["../../../packages/websockets/*"],
-      "@nestjs/platform-express": ["../../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
     "src/**/*",
     "e2e/**/*"
   ],
   "exclude": [
-    "node_modules",
+    "node_modules"
   ]
 }
\ No newline at end of file
diff --git a/integration/nest-application/get-url/tsconfig.json b/integration/nest-application/get-url/tsconfig.json
index c3692649c..2a0adf369 100644
--- a/integration/nest-application/get-url/tsconfig.json
+++ b/integration/nest-application/get-url/tsconfig.json
@@ -7,34 +7,16 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../../packages/common"],
-      "@nestjs/common/*": ["../../../packages/common/*"],
-      "@nestjs/core": ["../../../packages/core"],
-      "@nestjs/core/*": ["../../../packages/core/*"],
-      "@nestjs/microservices": ["../../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../../packages/websockets/*"],
-      "@nestjs/testing": ["../../../packages/websockets"],
-      "@nestjs/testing/*": ["../../../packages/websockets/*"],
-      "@nestjs/platform-express": ["../../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
     "src/**/*",
     "e2e/**/*"
   ],
   "exclude": [
-    "node_modules",
+    "node_modules"
   ]
 }
\ No newline at end of file
diff --git a/integration/nest-application/global-prefix/src/app.controller.ts b/integration/nest-application/global-prefix/src/app.controller.ts
index d826cd0db..8d1472a2f 100644
--- a/integration/nest-application/global-prefix/src/app.controller.ts
+++ b/integration/nest-application/global-prefix/src/app.controller.ts
@@ -1,15 +1,10 @@
-import { Controller, Get, Post, Req } from '@nestjs/common';
+import { Controller, Get, Post } from '@nestjs/common';
 
 @Controller()
 export class AppController {
   @Get('hello/:name')
-  getHello(@Req() req): string {
-    return 'Hello: ' + req.extras?.data;
-  }
-
-  @Get('params')
-  getParams(@Req() req): any {
-    return req.middlewareParams;
+  getHello(): string {
+    return 'hello';
   }
 
   @Get('health')
diff --git a/integration/nest-application/global-prefix/src/app.module.ts b/integration/nest-application/global-prefix/src/app.module.ts
index f182915c4..2123145a8 100644
--- a/integration/nest-application/global-prefix/src/app.module.ts
+++ b/integration/nest-application/global-prefix/src/app.module.ts
@@ -17,16 +17,6 @@ export class AppModule {
       .apply((req, res, next) => res.end(MIDDLEWARE_PARAM_VALUE))
       .forRoutes({ path: MIDDLEWARE_VALUE + '/*', method: RequestMethod.GET })
       .apply((req, res, next) => res.status(201).end(MIDDLEWARE_PARAM_VALUE))
-      .forRoutes({ path: MIDDLEWARE_VALUE + '/*', method: RequestMethod.POST })
-      .apply((req, res, next) => {
-        req.extras = { data: 'Data attached in middleware' };
-        next();
-      })
-      .forRoutes({ path: '*', method: RequestMethod.GET })
-      .apply((req, res, next) => {
-        req.middlewareParams = req.params;
-        next();
-      })
-      .forRoutes({ path: '*', method: RequestMethod.GET });
+      .forRoutes({ path: MIDDLEWARE_VALUE + '/*', method: RequestMethod.POST });
   }
 }
diff --git a/integration/nest-application/global-prefix/tsconfig.json b/integration/nest-application/global-prefix/tsconfig.json
index c3692649c..2a0adf369 100644
--- a/integration/nest-application/global-prefix/tsconfig.json
+++ b/integration/nest-application/global-prefix/tsconfig.json
@@ -7,34 +7,16 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../../packages/common"],
-      "@nestjs/common/*": ["../../../packages/common/*"],
-      "@nestjs/core": ["../../../packages/core"],
-      "@nestjs/core/*": ["../../../packages/core/*"],
-      "@nestjs/microservices": ["../../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../../packages/websockets/*"],
-      "@nestjs/testing": ["../../../packages/websockets"],
-      "@nestjs/testing/*": ["../../../packages/websockets/*"],
-      "@nestjs/platform-express": ["../../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
     "src/**/*",
     "e2e/**/*"
   ],
   "exclude": [
-    "node_modules",
+    "node_modules"
   ]
 }
\ No newline at end of file
diff --git a/integration/nest-application/raw-body/src/express.controller.ts b/integration/nest-application/raw-body/src/express.controller.ts
deleted file mode 100644
index 5f504ede0..000000000
--- a/integration/nest-application/raw-body/src/express.controller.ts
+++ /dev/null
@@ -1,13 +0,0 @@
-import { Controller, Post, RawBodyRequest, Req } from '@nestjs/common';
-import { Request } from 'express';
-
-@Controller()
-export class ExpressController {
-  @Post()
-  getRawBody(@Req() req: RawBodyRequest<Request>) {
-    return {
-      parsed: req.body,
-      raw: req.rawBody.toString(),
-    };
-  }
-}
diff --git a/integration/nest-application/raw-body/src/express.module.ts b/integration/nest-application/raw-body/src/express.module.ts
deleted file mode 100644
index 5ddb71426..000000000
--- a/integration/nest-application/raw-body/src/express.module.ts
+++ /dev/null
@@ -1,7 +0,0 @@
-import { Module } from '@nestjs/common';
-import { ExpressController } from './express.controller';
-
-@Module({
-  controllers: [ExpressController],
-})
-export class ExpressModule {}
diff --git a/integration/nest-application/raw-body/src/fastify.controller.ts b/integration/nest-application/raw-body/src/fastify.controller.ts
deleted file mode 100644
index 3cdf8484e..000000000
--- a/integration/nest-application/raw-body/src/fastify.controller.ts
+++ /dev/null
@@ -1,13 +0,0 @@
-import { Controller, Post, RawBodyRequest, Req } from '@nestjs/common';
-import type { FastifyRequest } from 'fastify';
-
-@Controller()
-export class FastifyController {
-  @Post()
-  getRawBody(@Req() req: RawBodyRequest<FastifyRequest>) {
-    return {
-      parsed: req.body,
-      raw: req.rawBody.toString(),
-    };
-  }
-}
diff --git a/integration/nest-application/raw-body/src/fastify.module.ts b/integration/nest-application/raw-body/src/fastify.module.ts
deleted file mode 100644
index 462f427ba..000000000
--- a/integration/nest-application/raw-body/src/fastify.module.ts
+++ /dev/null
@@ -1,7 +0,0 @@
-import { Module } from '@nestjs/common';
-import { FastifyController } from './fastify.controller';
-
-@Module({
-  controllers: [FastifyController],
-})
-export class FastifyModule {}
diff --git a/integration/nest-application/raw-body/tsconfig.json b/integration/nest-application/raw-body/tsconfig.json
deleted file mode 100644
index c3692649c..000000000
--- a/integration/nest-application/raw-body/tsconfig.json
+++ /dev/null
@@ -1,40 +0,0 @@
-{
-  "compilerOptions": {
-    "module": "commonjs",
-    "declaration": false,
-    "noImplicitAny": false,
-    "removeComments": true,
-    "noLib": false,
-    "emitDecoratorMetadata": true,
-    "experimentalDecorators": true,
-    "target": "ES2021",
-    "sourceMap": true,
-    "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../../packages/common"],
-      "@nestjs/common/*": ["../../../packages/common/*"],
-      "@nestjs/core": ["../../../packages/core"],
-      "@nestjs/core/*": ["../../../packages/core/*"],
-      "@nestjs/microservices": ["../../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../../packages/websockets/*"],
-      "@nestjs/testing": ["../../../packages/websockets"],
-      "@nestjs/testing/*": ["../../../packages/websockets/*"],
-      "@nestjs/platform-express": ["../../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../../packages/platform-ws/*"]
-    }
-  },
-  "include": [
-    "src/**/*",
-    "e2e/**/*"
-  ],
-  "exclude": [
-    "node_modules",
-  ]
-}
\ No newline at end of file
diff --git a/integration/nest-application/sse/src/app.controller.ts b/integration/nest-application/sse/src/app.controller.ts
deleted file mode 100644
index 2e36fa3d3..000000000
--- a/integration/nest-application/sse/src/app.controller.ts
+++ /dev/null
@@ -1,12 +0,0 @@
-import { Controller, MessageEvent, Sse } from '@nestjs/common';
-import { interval, map, Observable } from 'rxjs';
-
-@Controller()
-export class AppController {
-  @Sse('sse')
-  sse(): Observable<MessageEvent> {
-    return interval(1000).pipe(
-      map(_ => ({ data: { hello: 'world' } } as MessageEvent)),
-    );
-  }
-}
diff --git a/integration/nest-application/sse/src/app.module.ts b/integration/nest-application/sse/src/app.module.ts
deleted file mode 100644
index 848d4aaa7..000000000
--- a/integration/nest-application/sse/src/app.module.ts
+++ /dev/null
@@ -1,7 +0,0 @@
-import { Module } from '@nestjs/common';
-import { AppController } from './app.controller';
-
-@Module({
-  controllers: [AppController],
-})
-export class AppModule {}
diff --git a/integration/nest-application/sse/tsconfig.json b/integration/nest-application/sse/tsconfig.json
deleted file mode 100644
index 261e01453..000000000
--- a/integration/nest-application/sse/tsconfig.json
+++ /dev/null
@@ -1,41 +0,0 @@
-{
-  "compilerOptions": {
-    "module": "commonjs",
-    "declaration": false,
-    "noImplicitAny": false,
-    "removeComments": true,
-    "noLib": false,
-    "emitDecoratorMetadata": true,
-    "experimentalDecorators": true,
-    "target": "ES2021",
-    "sourceMap": true,
-    "allowJs": true,
-    "lib": ["dom"],
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../../packages/common"],
-      "@nestjs/common/*": ["../../../packages/common/*"],
-      "@nestjs/core": ["../../../packages/core"],
-      "@nestjs/core/*": ["../../../packages/core/*"],
-      "@nestjs/microservices": ["../../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../../packages/websockets/*"],
-      "@nestjs/testing": ["../../../packages/websockets"],
-      "@nestjs/testing/*": ["../../../packages/websockets/*"],
-      "@nestjs/platform-express": ["../../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../../packages/platform-ws/*"]
-    }
-  },
-  "include": [
-    "src/**/*",
-    "e2e/**/*"
-  ],
-  "exclude": [
-    "node_modules",
-  ]
-}
\ No newline at end of file
diff --git a/integration/nest-application/use-body-parser/src/app.controller.ts b/integration/nest-application/use-body-parser/src/app.controller.ts
deleted file mode 100644
index 8c110580c..000000000
--- a/integration/nest-application/use-body-parser/src/app.controller.ts
+++ /dev/null
@@ -1,12 +0,0 @@
-import { Controller, Post, Req, RawBodyRequest } from '@nestjs/common';
-import { IncomingMessage } from 'http';
-
-@Controller()
-export class AppController {
-  @Post()
-  index(@Req() req: RawBodyRequest<IncomingMessage>) {
-    return {
-      raw: req.rawBody?.toString(),
-    };
-  }
-}
diff --git a/integration/nest-application/use-body-parser/src/app.module.ts b/integration/nest-application/use-body-parser/src/app.module.ts
deleted file mode 100644
index 848d4aaa7..000000000
--- a/integration/nest-application/use-body-parser/src/app.module.ts
+++ /dev/null
@@ -1,7 +0,0 @@
-import { Module } from '@nestjs/common';
-import { AppController } from './app.controller';
-
-@Module({
-  controllers: [AppController],
-})
-export class AppModule {}
diff --git a/integration/repl/src/app.module.ts b/integration/repl/src/app.module.ts
deleted file mode 100644
index 867c4b1b3..000000000
--- a/integration/repl/src/app.module.ts
+++ /dev/null
@@ -1,7 +0,0 @@
-import { Module } from '@nestjs/common';
-import { UsersModule } from './users/users.module';
-
-@Module({
-  imports: [UsersModule],
-})
-export class AppModule {}
diff --git a/integration/repl/src/users/dto/create-user.dto.ts b/integration/repl/src/users/dto/create-user.dto.ts
deleted file mode 100644
index 0311be138..000000000
--- a/integration/repl/src/users/dto/create-user.dto.ts
+++ /dev/null
@@ -1 +0,0 @@
-export class CreateUserDto {}
diff --git a/integration/repl/src/users/dto/update-user.dto.ts b/integration/repl/src/users/dto/update-user.dto.ts
deleted file mode 100644
index dfd37fb1e..000000000
--- a/integration/repl/src/users/dto/update-user.dto.ts
+++ /dev/null
@@ -1,4 +0,0 @@
-import { PartialType } from '@nestjs/mapped-types';
-import { CreateUserDto } from './create-user.dto';
-
-export class UpdateUserDto extends PartialType(CreateUserDto) {}
diff --git a/integration/repl/src/users/entities/user.entity.ts b/integration/repl/src/users/entities/user.entity.ts
deleted file mode 100644
index 4f82c1457..000000000
--- a/integration/repl/src/users/entities/user.entity.ts
+++ /dev/null
@@ -1 +0,0 @@
-export class User {}
diff --git a/integration/repl/src/users/users.controller.ts b/integration/repl/src/users/users.controller.ts
deleted file mode 100644
index d5db3a65e..000000000
--- a/integration/repl/src/users/users.controller.ts
+++ /dev/null
@@ -1,42 +0,0 @@
-import {
-  Controller,
-  Get,
-  Post,
-  Body,
-  Patch,
-  Param,
-  Delete,
-} from '@nestjs/common';
-import { UsersService } from './users.service';
-import { CreateUserDto } from './dto/create-user.dto';
-import { UpdateUserDto } from './dto/update-user.dto';
-
-@Controller('users')
-export class UsersController {
-  constructor(private readonly usersService: UsersService) {}
-
-  @Post()
-  create(@Body() createUserDto: CreateUserDto) {
-    return this.usersService.create(createUserDto);
-  }
-
-  @Get()
-  findAll() {
-    return this.usersService.findAll();
-  }
-
-  @Get(':id')
-  findOne(@Param('id') id: string) {
-    return this.usersService.findOne(+id);
-  }
-
-  @Patch(':id')
-  update(@Param('id') id: string, @Body() updateUserDto: UpdateUserDto) {
-    return this.usersService.update(+id, updateUserDto);
-  }
-
-  @Delete(':id')
-  remove(@Param('id') id: string) {
-    return this.usersService.remove(+id);
-  }
-}
diff --git a/integration/repl/src/users/users.module.ts b/integration/repl/src/users/users.module.ts
deleted file mode 100644
index 86d73a3f0..000000000
--- a/integration/repl/src/users/users.module.ts
+++ /dev/null
@@ -1,16 +0,0 @@
-import { Module } from '@nestjs/common';
-import { UsersController } from './users.controller';
-import { UsersRepository } from './users.repository';
-import { UsersService } from './users.service';
-
-@Module({
-  controllers: [UsersController],
-  providers: [
-    UsersService,
-    {
-      provide: UsersRepository.name,
-      useValue: new UsersRepository(),
-    },
-  ],
-})
-export class UsersModule {}
diff --git a/integration/repl/src/users/users.repository.ts b/integration/repl/src/users/users.repository.ts
deleted file mode 100644
index 4a6166586..000000000
--- a/integration/repl/src/users/users.repository.ts
+++ /dev/null
@@ -1,8 +0,0 @@
-import { Injectable } from '@nestjs/common';
-
-@Injectable()
-export class UsersRepository {
-  async find() {
-    return [{ id: 1, email: 'test@nestjs.com' }];
-  }
-}
diff --git a/integration/repl/src/users/users.service.ts b/integration/repl/src/users/users.service.ts
deleted file mode 100644
index ab3191152..000000000
--- a/integration/repl/src/users/users.service.ts
+++ /dev/null
@@ -1,32 +0,0 @@
-import { Inject, Injectable } from '@nestjs/common';
-import { CreateUserDto } from './dto/create-user.dto';
-import { UpdateUserDto } from './dto/update-user.dto';
-import { UsersRepository } from './users.repository';
-
-@Injectable()
-export class UsersService {
-  constructor(
-    @Inject('UsersRepository')
-    private readonly usersRepository: UsersRepository,
-  ) {}
-
-  create(createUserDto: CreateUserDto) {
-    return 'This action adds a new user';
-  }
-
-  findAll() {
-    return `This action returns all users`;
-  }
-
-  findOne(id: number) {
-    return `This action returns a #${id} user`;
-  }
-
-  update(id: number, updateUserDto: UpdateUserDto) {
-    return `This action updates a #${id} user`;
-  }
-
-  remove(id: number) {
-    return `This action removes a #${id} user`;
-  }
-}
diff --git a/integration/repl/tsconfig.json b/integration/repl/tsconfig.json
deleted file mode 100644
index cef623d14..000000000
--- a/integration/repl/tsconfig.json
+++ /dev/null
@@ -1,40 +0,0 @@
-{
-  "compilerOptions": {
-    "module": "commonjs",
-    "declaration": false,
-    "noImplicitAny": false,
-    "removeComments": true,
-    "noLib": false,
-    "emitDecoratorMetadata": true,
-    "experimentalDecorators": true,
-    "target": "ES2021",
-    "sourceMap": true,
-    "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
-  },
-  "include": [
-    "src/**/*",
-    "e2e/**/*"
-  ],
-  "exclude": [
-    "node_modules",
-  ]
-}
\ No newline at end of file
diff --git a/integration/scopes/src/durable/durable-context-id.strategy.ts b/integration/scopes/src/durable/durable-context-id.strategy.ts
deleted file mode 100644
index d4158f3e2..000000000
--- a/integration/scopes/src/durable/durable-context-id.strategy.ts
+++ /dev/null
@@ -1,23 +0,0 @@
-import { ContextId, ContextIdStrategy, HostComponentInfo } from '@nestjs/core';
-import { Request } from 'express';
-
-const tenants = new Map<string, ContextId>();
-
-export class DurableContextIdStrategy implements ContextIdStrategy {
-  attach(contextId: ContextId, request: Request) {
-    const tenantId = request.headers['x-tenant-id'] as string;
-    let tenantSubTreeId: ContextId;
-
-    if (tenants.has(tenantId)) {
-      tenantSubTreeId = tenants.get(tenantId);
-    } else {
-      tenantSubTreeId = { id: +tenantId } as ContextId;
-      tenants.set(tenantId, tenantSubTreeId);
-    }
-    return {
-      resolve: (info: HostComponentInfo) =>
-        info.isTreeDurable ? tenantSubTreeId : contextId,
-      payload: { tenantId },
-    };
-  }
-}
diff --git a/integration/scopes/src/durable/durable.controller.ts b/integration/scopes/src/durable/durable.controller.ts
deleted file mode 100644
index be51ad2df..000000000
--- a/integration/scopes/src/durable/durable.controller.ts
+++ /dev/null
@@ -1,17 +0,0 @@
-import { Controller, Get } from '@nestjs/common';
-import { DurableService } from './durable.service';
-
-@Controller('durable')
-export class DurableController {
-  constructor(private readonly durableService: DurableService) {}
-
-  @Get()
-  greeting(): string {
-    return this.durableService.greeting();
-  }
-
-  @Get('echo')
-  echo() {
-    return this.durableService.requestPayload;
-  }
-}
diff --git a/integration/scopes/src/durable/durable.guard.ts b/integration/scopes/src/durable/durable.guard.ts
deleted file mode 100644
index 8868af809..000000000
--- a/integration/scopes/src/durable/durable.guard.ts
+++ /dev/null
@@ -1,21 +0,0 @@
-import {
-  CanActivate,
-  ExecutionContext,
-  Injectable,
-  Scope,
-} from '@nestjs/common';
-import { DurableService } from './durable.service';
-
-@Injectable({ scope: Scope.REQUEST, durable: true })
-export class DurableGuard implements CanActivate {
-  public instanceCounter = 0;
-  constructor(private readonly durableService: DurableService) {}
-
-  public async canActivate(context: ExecutionContext): Promise<boolean> {
-    if (typeof this.durableService === 'undefined') {
-      throw new Error('Durable service is undefined');
-    }
-    this.instanceCounter++;
-    return true;
-  }
-}
diff --git a/integration/scopes/src/durable/durable.module.ts b/integration/scopes/src/durable/durable.module.ts
deleted file mode 100644
index d749135bd..000000000
--- a/integration/scopes/src/durable/durable.module.ts
+++ /dev/null
@@ -1,17 +0,0 @@
-import { Module } from '@nestjs/common';
-import { APP_GUARD } from '@nestjs/core';
-import { DurableController } from './durable.controller';
-import { DurableGuard } from './durable.guard';
-import { DurableService } from './durable.service';
-
-@Module({
-  controllers: [DurableController],
-  providers: [
-    DurableService,
-    {
-      provide: APP_GUARD,
-      useClass: DurableGuard,
-    },
-  ],
-})
-export class DurableModule {}
diff --git a/integration/scopes/src/durable/durable.service.ts b/integration/scopes/src/durable/durable.service.ts
deleted file mode 100644
index 6e25b01dd..000000000
--- a/integration/scopes/src/durable/durable.service.ts
+++ /dev/null
@@ -1,14 +0,0 @@
-import { Inject, Injectable, Scope } from '@nestjs/common';
-import { REQUEST } from '@nestjs/core';
-
-@Injectable({ scope: Scope.REQUEST, durable: true })
-export class DurableService {
-  public instanceCounter = 0;
-
-  constructor(@Inject(REQUEST) public readonly requestPayload: unknown) {}
-
-  greeting() {
-    ++this.instanceCounter;
-    return `Hello world! Counter: ${this.instanceCounter}`;
-  }
-}
diff --git a/integration/scopes/tsconfig.json b/integration/scopes/tsconfig.json
index cef623d14..c6354c564 100644
--- a/integration/scopes/tsconfig.json
+++ b/integration/scopes/tsconfig.json
@@ -7,28 +7,10 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
     "src/**/*",
diff --git a/integration/send-files/e2e/utils.ts b/integration/send-files/e2e/utils.ts
deleted file mode 100644
index bc2f1f7b6..000000000
--- a/integration/send-files/e2e/utils.ts
+++ /dev/null
@@ -1,47 +0,0 @@
-import { INestApplication } from '@nestjs/common';
-import { IncomingMessage, request, RequestOptions } from 'http';
-import { URL } from 'url';
-
-export const getHttpBaseOptions = async (
-  app: INestApplication,
-): Promise<URL> => {
-  const url = await app.getUrl();
-  return new URL(url);
-};
-
-export const sendCanceledHttpRequest = async (url: URL) => {
-  return new Promise((resolve, reject) => {
-    const req = request(url, res => {
-      // close the request once we get the first response of data
-      res.on('data', () => {
-        req.destroy();
-      });
-      // response is closed, move on to next request and verify it's doable
-      res.on('close', resolve);
-    });
-    // fire the request
-    req.end();
-  });
-};
-
-export const sendHttpRequest = async (url: URL) => {
-  return new Promise<IncomingMessage>((resolve, reject) => {
-    const req = request(url, res => {
-      // this makes sure that the response actually starts and is read. We could verify this value against the same
-      // that is in an earlier test, but all we care about in _this_ test is that the status code is 200
-      res.on('data', chunk => {
-        // no op
-      });
-      // fail the test if something goes wrong
-      res.on('error', err => {
-        reject(err);
-      });
-      // pass the response back so we can verify values in the test
-      res.on('end', () => {
-        resolve(res);
-      });
-    });
-    // fire the request
-    req.end();
-  });
-};
diff --git a/integration/send-files/src/app.controller.ts b/integration/send-files/src/app.controller.ts
index 69fa20ec0..606e2d598 100644
--- a/integration/send-files/src/app.controller.ts
+++ b/integration/send-files/src/app.controller.ts
@@ -31,14 +31,4 @@ export class AppController {
   getFileWithHeaders(): StreamableFile {
     return this.appService.getFileWithHeaders();
   }
-
-  @Get('file/not/exist')
-  getNonExistantFile(): StreamableFile {
-    return this.appService.getFileThatDoesNotExist();
-  }
-
-  @Get('/file/slow')
-  getSlowFile(): StreamableFile {
-    return this.appService.getSlowStream();
-  }
 }
diff --git a/integration/send-files/src/app.service.ts b/integration/send-files/src/app.service.ts
index e5f920c48..a83e6a4f6 100644
--- a/integration/send-files/src/app.service.ts
+++ b/integration/send-files/src/app.service.ts
@@ -1,16 +1,11 @@
 import { Injectable, StreamableFile } from '@nestjs/common';
-import { randomBytes } from 'crypto';
 import { createReadStream, readFileSync } from 'fs';
 import { join } from 'path';
 import { Observable, of } from 'rxjs';
-import { Readable } from 'stream';
 import { NonFile } from './non-file';
 
 @Injectable()
 export class AppService {
-  // `randomBytes` has a max value of 2^31 -1. That's all this is
-  private readonly MAX_BITES = Math.pow(2, 31) - 1;
-
   getReadStream(): StreamableFile {
     return new StreamableFile(
       createReadStream(join(process.cwd(), 'Readme.md')),
@@ -30,26 +25,12 @@ export class AppService {
   }
 
   getFileWithHeaders(): StreamableFile {
-    const file = readFileSync(join(process.cwd(), 'Readme.md'));
     return new StreamableFile(
       createReadStream(join(process.cwd(), 'Readme.md')),
       {
         type: 'text/markdown',
         disposition: 'attachment; filename="Readme.md"',
-        length: file.byteLength,
       },
     );
   }
-
-  getFileThatDoesNotExist(): StreamableFile {
-    return new StreamableFile(createReadStream('does-not-exist.txt'));
-  }
-
-  getSlowStream(): StreamableFile {
-    const stream = new Readable();
-    stream.push(Buffer.from(randomBytes(this.MAX_BITES)));
-    // necessary for a `new Readable()`. Doesn't do anything
-    stream._read = () => {};
-    return new StreamableFile(stream);
-  }
 }
diff --git a/integration/send-files/tsconfig.json b/integration/send-files/tsconfig.json
index cef623d14..c6354c564 100644
--- a/integration/send-files/tsconfig.json
+++ b/integration/send-files/tsconfig.json
@@ -7,28 +7,10 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
     "src/**/*",
diff --git a/integration/testing-module-override/e2e/circular-dependency/a.module.ts b/integration/testing-module-override/e2e/circular-dependency/a.module.ts
new file mode 100644
index 000000000..695a9edbd
--- /dev/null
+++ b/integration/testing-module-override/e2e/circular-dependency/a.module.ts
@@ -0,0 +1,12 @@
+import { Injectable, Module, forwardRef } from '@nestjs/common';
+import { BModule, BProvider } from './b.module';
+
+@Injectable()
+export class AProvider {}
+
+@Module({
+  imports: [forwardRef(() => BModule)],
+  providers: [AProvider],
+  exports: [AProvider],
+})
+export class AModule {}
diff --git a/integration/testing-module-override/e2e/circular-dependency/b.module.ts b/integration/testing-module-override/e2e/circular-dependency/b.module.ts
new file mode 100644
index 000000000..6671d82a6
--- /dev/null
+++ b/integration/testing-module-override/e2e/circular-dependency/b.module.ts
@@ -0,0 +1,12 @@
+import { Injectable, Module, forwardRef } from '@nestjs/common';
+import { AModule, AProvider } from './a.module';
+
+@Injectable()
+export class BProvider {}
+
+@Module({
+  imports: [forwardRef(() => AModule)],
+  providers: [BProvider],
+  exports: [BProvider],
+})
+export class BModule {}
diff --git a/integration/testing-module-override/tsconfig.json b/integration/testing-module-override/tsconfig.json
new file mode 100644
index 000000000..e268e37aa
--- /dev/null
+++ b/integration/testing-module-override/tsconfig.json
@@ -0,0 +1,17 @@
+{
+  "compilerOptions": {
+    "module": "commonjs",
+    "declaration": true,
+    "removeComments": true,
+    "emitDecoratorMetadata": true,
+    "experimentalDecorators": true,
+    "allowSyntheticDefaultImports": true,
+    "target": "es2017",
+    "sourceMap": true,
+    "outDir": "./dist",
+    "baseUrl": "./",
+    "incremental": true,
+    "skipLibCheck": true
+  },
+  "include": ["src/**/*"]
+}
diff --git a/integration/typeorm/src/app.module.ts b/integration/typeorm/src/app.module.ts
index 96bdb7bb1..32fbf84fd 100644
--- a/integration/typeorm/src/app.module.ts
+++ b/integration/typeorm/src/app.module.ts
@@ -21,4 +21,4 @@ import { PhotoModule } from './photo/photo.module';
     PhotoModule,
   ],
 })
-export class AppModule {}
+export class ApplicationModule {}
diff --git a/integration/typeorm/tsconfig.json b/integration/typeorm/tsconfig.json
index cef623d14..ea15af490 100644
--- a/integration/typeorm/tsconfig.json
+++ b/integration/typeorm/tsconfig.json
@@ -7,34 +7,16 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
-    "src/**/*",
-    "e2e/**/*"
+    "src/**/*"
   ],
   "exclude": [
     "node_modules",
+    "**/*.spec.ts"
   ]
 }
\ No newline at end of file
diff --git a/integration/versioning/tsconfig.json b/integration/versioning/tsconfig.json
index cef623d14..c6354c564 100644
--- a/integration/versioning/tsconfig.json
+++ b/integration/versioning/tsconfig.json
@@ -7,28 +7,10 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
     "src/**/*",
diff --git a/integration/websockets/tsconfig.json b/integration/websockets/tsconfig.json
index cef623d14..c6354c564 100644
--- a/integration/websockets/tsconfig.json
+++ b/integration/websockets/tsconfig.json
@@ -7,28 +7,10 @@
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
     "allowJs": true,
-    "outDir": "./dist",
-    "paths": {
-      "@nestjs/common": ["../../packages/common"],
-      "@nestjs/common/*": ["../../packages/common/*"],
-      "@nestjs/core": ["../../packages/core"],
-      "@nestjs/core/*": ["../../packages/core/*"],
-      "@nestjs/microservices": ["../../packages/microservices"],
-      "@nestjs/microservices/*": ["../../packages/microservices/*"],
-      "@nestjs/websockets": ["../../packages/websockets"],
-      "@nestjs/websockets/*": ["../../packages/websockets/*"],
-      "@nestjs/testing": ["../../packages/testing"],
-      "@nestjs/testing/*": ["../../packages/testing/*"],
-      "@nestjs/platform-express": ["../../packages/platform-express"],
-      "@nestjs/platform-express/*": ["../../packages/platform-express/*"],
-      "@nestjs/platform-socket.io": ["../../packages/platform-socket.io"],
-      "@nestjs/platform-socket.io/*": ["../../packages/platform-socket.io/*"],
-      "@nestjs/platform-ws": ["../../packages/platform-ws"],
-      "@nestjs/platform-ws/*": ["../../packages/platform-ws/*"]
-    }
+    "outDir": "./dist"
   },
   "include": [
     "src/**/*",
diff --git a/lerna.json b/lerna.json
index 366cd366e..042e9d281 100644
--- a/lerna.json
+++ b/lerna.json
@@ -3,5 +3,5 @@
   "packages": [
     "packages/*"
   ],
-  "version": "9.4.0"
+  "version": "8.2.3"
 }
diff --git a/package-lock.json b/package-lock.json
index b921af460..e3bd09a7e 100644
Binary files a/package-lock.json and b/package-lock.json differ
diff --git a/package.json b/package.json
index 5bd361702..0bba506cc 100644
--- a/package.json
+++ b/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/core",
-  "version": "9.4.0",
+  "version": "8.2.3",
   "description": "Modern, fast, powerful node.js web framework",
   "homepage": "https://nestjs.com",
   "repository": {
@@ -14,35 +14,28 @@
   "license": "MIT",
   "author": "Kamil Mysliwiec",
   "scripts": {
-    "build": "tsc -b -v packages",
-    "postbuild": "npm run move:node_modules",
-    "build:dev": "tsc -b -v packages --watch",
-    "prebuild:prod": "npm run clean",
-    "build:prod": "tsc -b -v packages",
+    "build": "gulp build --dist node_modules/@nestjs",
+    "postbuild": "gulp move",
     "changelog": "lerna-changelog",
-    "clean": "tsc -b --clean packages",
-    "move:samples": "gulp move:samples",
-    "move:node_modules": "gulp move:node_modules",
-    "build:samples": "gulp install:samples && npm run build && npm run move:samples && gulp build:samples && gulp test:samples && gulp test:e2e:samples",
+    "prebuild:prod": "npm run clean",
+    "build:prod": "gulp build",
+    "build:samples": "gulp install:samples && npm run build && gulp build:samples && gulp test:samples && gulp test:e2e:samples",
+    "clean": "gulp clean:bundle",
     "codechecks:benchmarks": "codechecks ./tools/benchmarks/check-benchmarks.ts",
     "coverage": "nyc report --reporter=text-lcov | coveralls",
-    "format": "prettier \"**/*.ts\" \"packages/**/*.json\" --ignore-path ./.prettierignore --write && git status",
+    "format": "prettier \"**/*.ts\" --ignore-path ./.prettierignore --write && git status",
     "postinstall": "opencollective",
-    "test": "mocha packages/**/*.spec.ts",
-    "test:dev": "mocha -w --watch-files \"packages\" packages/**/*.spec.ts",
-    "pretest:cov": "npm run clean",
-    "test:cov": "nyc mocha packages/**/*.spec.ts --reporter spec",
-    "test:integration": "mocha \"integration/*/{,!(node_modules)/**/}/*.spec.ts\"",
+    "test": "nyc --require ts-node/register mocha packages/**/*.spec.ts --reporter spec --require 'node_modules/reflect-metadata/Reflect.js' --exit",
+    "test:integration": "mocha \"integration/*/{,!(node_modules)/**/}/*.spec.ts\" --reporter spec --require ts-node/register --require 'node_modules/reflect-metadata/Reflect.js' --exit",
     "test:docker:up": "docker-compose -f integration/docker-compose.yml up -d",
     "test:docker:down": "docker-compose -f integration/docker-compose.yml down",
     "lint": "concurrently 'npm run lint:packages' 'npm run lint:integration' 'npm run lint:spec'",
     "lint:fix": "concurrently 'npm run lint:packages -- --fix' 'npm run lint:integration -- --fix' 'npm run lint:spec -- --fix'",
-    "lint:integration": "eslint 'integration/*/{,!(node_modules)/**/}/*.ts'",
+    "lint:integration": "eslint 'integration/*/{,!(node_modules)/**/}/*.ts' -c '.eslintrc.spec.js'",
     "lint:packages": "eslint 'packages/**/**.ts' --ignore-pattern 'packages/**/*.spec.ts'",
-    "lint:spec": "eslint 'packages/**/**.spec.ts'",
-    "prerelease": "gulp copy-misc",
+    "lint:spec": "eslint 'packages/**/**.spec.ts' -c '.eslintrc.spec.js'",
+    "prerelease": "gulp copy-misc && gulp build --dist node_modules/@nestjs && npm run changelog | pbcopy",
     "publish": "npm run prerelease && npm run build:prod && ./node_modules/.bin/lerna publish --force-publish --access public --exact -m \"chore(@nestjs) publish %s release\"",
-    "prepublishOnly": "npm run changelog | pbcopy",
     "publish:beta": "npm run prerelease && npm run build:prod && ./node_modules/.bin/lerna publish --npm-tag=beta --access public -m \"chore(@nestjs) publish %s release\"",
     "publish:next": "npm run prerelease && npm run build:prod && ./node_modules/.bin/lerna publish --npm-tag=next --access public --skip-git -m \"chore(@nestjs) publish %s release\"",
     "publish:rc": "npm run prerelease && npm run build:prod && ./node_modules/.bin/lerna publish --npm-tag=rc --access public -m \"chore(@nestjs) publish %s release\"",
@@ -50,133 +43,132 @@
     "prepare": "husky install"
   },
   "lint-staged": {
-    "**/*.ts": [
-      "prettier --ignore-path ./.prettierignore --write"
-    ],
-    "packages/**/*.json": [
+    "packages/**/*.{ts,json}": [
       "prettier --ignore-path ./.prettierignore --write"
     ]
   },
   "dependencies": {
     "@nuxtjs/opencollective": "0.3.2",
-    "class-transformer": "0.5.1",
-    "class-validator": "0.14.0",
-    "cli-color": "2.0.3",
+    "axios": "0.24.0",
+    "class-transformer": "0.4.0",
+    "class-validator": "0.13.2",
+    "cli-color": "2.0.1",
     "cors": "2.8.5",
-    "express": "4.18.2",
-    "fast-json-stringify": "5.7.0",
+    "express": "4.17.1",
+    "fast-json-stringify": "2.7.12",
     "fast-safe-stringify": "2.1.1",
     "graphql-subscriptions": "2.0.0",
     "iterare": "1.2.1",
-    "object-hash": "3.0.0",
+    "object-hash": "2.2.0",
     "path-to-regexp": "3.2.0",
     "reflect-metadata": "0.1.13",
-    "rxjs": "7.8.0",
-    "socket.io": "4.6.1",
-    "tslib": "2.5.0",
-    "uid": "2.0.2",
-    "uuid": "9.0.0"
+    "rxjs": "7.4.0",
+    "socket.io": "4.4.0",
+    "tslib": "2.3.1",
+    "uuid": "8.3.2"
   },
   "devDependencies": {
-    "@apollo/server": "4.6.0",
     "@codechecks/client": "0.1.12",
-    "@commitlint/cli": "17.5.1",
-    "@commitlint/config-angular": "17.4.4",
-    "@fastify/cors": "^8.0.0",
-    "@fastify/formbody": "7.4.0",
-    "@fastify/middie": "8.1.0",
-    "@fastify/multipart": "7.5.0",
-    "@fastify/static": "6.10.0",
-    "@fastify/view": "7.4.1",
-    "@grpc/grpc-js": "1.8.13",
-    "@grpc/proto-loader": "0.7.6",
-    "@nestjs/apollo": "11.0.4",
-    "@nestjs/graphql": "11.0.4",
-    "@nestjs/mongoose": "9.2.2",
-    "@nestjs/typeorm": "9.0.1",
-    "@types/amqplib": "0.10.1",
+    "@commitlint/cli": "15.0.0",
+    "@commitlint/config-angular": "15.0.0",
+    "@grpc/grpc-js": "1.4.4",
+    "@grpc/proto-loader": "0.6.7",
+    "@nestjs/graphql": "9.1.2",
+    "@nestjs/mongoose": "9.0.1",
+    "@nestjs/typeorm": "8.0.2",
+    "@types/amqplib": "0.8.2",
     "@types/bytes": "3.1.1",
-    "@types/chai": "4.3.4",
-    "@types/chai-as-promised": "7.1.5",
-    "@types/cors": "2.8.13",
-    "@types/express": "4.17.17",
-    "@types/gulp": "4.0.10",
-    "@types/http-errors": "2.0.1",
-    "@types/mocha": "10.0.1",
-    "@types/node": "18.15.11",
-    "@types/sinon": "10.0.13",
-    "@types/supertest": "2.0.12",
-    "@types/ws": "8.5.4",
+    "@types/cache-manager": "3.4.2",
+    "@types/chai": "4.2.22",
+    "@types/chai-as-promised": "7.1.4",
+    "@types/cors": "2.8.12",
+    "@types/express": "4.17.13",
+    "@types/gulp": "4.0.9",
+    "@types/http-errors": "1.8.1",
+    "@types/mocha": "9.0.0",
+    "@types/node": "16.11.11",
+    "@types/redis": "2.8.32",
+    "@types/reflect-metadata": "0.1.0",
+    "@types/sinon": "10.0.6",
+    "@types/socket.io": "3.0.2",
+    "@types/ws": "8.2.0",
     "@typescript-eslint/eslint-plugin": "4.33.0",
     "@typescript-eslint/parser": "4.33.0",
-    "amqp-connection-manager": "4.1.12",
-    "amqplib": "0.10.3",
+    "amqp-connection-manager": "3.7.0",
+    "amqplib": "0.8.0",
+    "apollo-server-core": "3.5.0",
+    "apollo-server-express": "3.5.0",
     "artillery": "1.7.9",
-    "body-parser": "1.20.2",
-    "bytes": "3.1.2",
-    "cache-manager": "5.2.0",
-    "cache-manager-redis-store": "3.0.1",
-    "chai": "4.3.7",
+    "body-parser": "1.19.0",
+    "bytes": "3.1.1",
+    "cache-manager": "3.6.0",
+    "cache-manager-redis-store": "2.0.0",
+    "chai": "4.3.4",
     "chai-as-promised": "7.1.1",
-    "clang-format": "1.8.0",
+    "clang-format": "1.6.0",
     "commitlint-circle": "1.0.0",
-    "concurrently": "8.0.1",
-    "conventional-changelog": "3.1.25",
-    "core-js": "3.30.0",
+    "concurrently": "6.4.0",
+    "conventional-changelog": "3.1.24",
+    "core-js": "3.19.2",
     "coveralls": "3.1.1",
     "delete-empty": "3.0.0",
-    "engine.io-client": "6.4.0",
+    "engine.io-client": "6.1.1",
     "eslint": "7.32.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.27.5",
-    "eventsource": "2.0.2",
-    "fancy-log": "2.0.0",
-    "fastify": "4.15.0",
-    "graphql": "16.6.0",
-    "graphql-tools": "8.3.19",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-import": "2.25.3",
+    "eventsource": "1.1.0",
+    "fancy-log": "1.3.3",
+    "fastify": "3.24.1",
+    "fastify-cors": "6.0.2",
+    "fastify-formbody": "5.2.0",
+    "fastify-multipart": "5.1.0",
+    "fastify-static": "4.5.0",
+    "graphql": "15.7.2",
+    "graphql-tools": "7.0.5",
     "gulp": "4.0.2",
     "gulp-clang-format": "1.0.27",
     "gulp-clean": "0.4.0",
     "gulp-sourcemaps": "3.0.0",
     "gulp-typescript": "5.0.1",
     "gulp-watch": "5.0.1",
-    "http-errors": "2.0.0",
-    "husky": "8.0.3",
-    "imports-loader": "4.0.1",
-    "ioredis": "5.3.1",
+    "http-errors": "1.8.1",
+    "husky": "7.0.4",
+    "imports-loader": "3.1.1",
     "json-loader": "0.5.7",
-    "kafkajs": "2.2.4",
+    "kafkajs": "1.15.0",
     "lerna": "2.11.0",
     "lerna-changelog": "2.2.0",
-    "light-my-request": "5.9.1",
-    "lint-staged": "13.2.0",
+    "light-my-request": "4.7.0",
+    "lint-staged": "12.1.2",
     "markdown-table": "2.0.0",
     "merge-graphql-schemas": "1.7.8",
-    "mocha": "10.2.0",
-    "mongoose": "7.0.3",
-    "mqtt": "4.3.7",
-    "multer": "1.4.4",
-    "mysql2": "3.2.0",
-    "nats": "2.13.1",
-    "nodemon": "2.0.22",
+    "middie": "5.3.0",
+    "mocha": "9.1.3",
+    "mongoose": "6.0.14",
+    "mqtt": "4.2.8",
+    "multer": "1.4.3",
+    "mysql2": "2.3.3",
+    "nats": "2.4.0",
+    "nodemon": "2.0.15",
     "nyc": "15.1.0",
-    "prettier": "2.8.7",
-    "redis": "4.6.5",
+    "point-of-view": "4.15.3",
+    "prettier": "2.5.0",
+    "redis": "3.1.2",
     "rxjs-compat": "6.6.7",
-    "sinon": "15.0.3",
+    "sinon": "12.0.1",
     "sinon-chai": "3.7.0",
-    "socket.io-client": "4.6.1",
+    "socket.io-client": "4.4.0",
     "subscriptions-transport-ws": "0.11.0",
-    "supertest": "6.3.3",
-    "ts-morph": "18.0.0",
-    "ts-node": "10.9.1",
-    "typeorm": "0.3.12",
-    "typescript": "5.0.3",
+    "supertest": "6.1.6",
+    "ts-morph": "13.0.2",
+    "ts-node": "10.4.0",
+    "typeorm": "0.2.41",
+    "typescript": "4.3.5",
     "wrk": "1.2.1",
-    "ws": "8.13.0"
+    "ws": "7.5.6"
   },
   "engines": {
-    "node": ">= 16"
+    "node": ">= 10.13.0"
   },
   "collective": {
     "type": "opencollective",
@@ -191,7 +183,6 @@
       "type: bug :sob:": "Bug fixes",
       "type: enhancement :wolf:": "Enhancements",
       "type: docs :page_facing_up:": "Docs",
-      "type: code style": "Code style tweaks",
       "dependencies": "Dependencies"
     }
   },
@@ -200,23 +191,20 @@
       "packages/**/*.ts"
     ],
     "exclude": [
-      "**/*.js",
-      "**/*.d.ts",
-      "**/*.spec.ts",
+      "packages/**/*.spec.ts",
       "packages/**/adapters/*.ts",
       "packages/**/nest-*.ts",
       "packages/**/test/**/*.ts",
       "packages/core/errors/**/*",
       "packages/common/exceptions/*.ts",
+      "packages/common/http/*.ts",
       "packages/common/utils/load-package.util.ts",
       "packages/microservices/exceptions/",
       "packages/microservices/microservices-module.ts",
       "packages/core/middleware/middleware-module.ts",
-      "packages/core/discovery/discovery-service.ts",
       "packages/core/injector/module-ref.ts",
       "packages/core/injector/instance-links-host.ts",
       "packages/core/helpers/context-id-factory.ts",
-      "packages/websockets/socket-module.ts",
       "packages/common/cache/**/*",
       "packages/common/serializer/**/*",
       "packages/common/services/*.ts"
@@ -233,14 +221,5 @@
     ],
     "sourceMap": true,
     "instrument": true
-  },
-  "mocha": {
-    "require": [
-      "ts-node/register",
-      "tsconfig-paths/register",
-      "node_modules/reflect-metadata/Reflect.js",
-      "hooks/mocha-init-hook.ts"
-    ],
-    "exit": true
   }
 }
diff --git a/packages/common/CHANGELOG.md b/packages/common/CHANGELOG.md
new file mode 100644
index 000000000..5d699e1d6
--- /dev/null
+++ b/packages/common/CHANGELOG.md
@@ -0,0 +1,18 @@
+# Change Log
+
+All notable changes to this project will be documented in this file.
+See [Conventional Commits](https://conventionalcommits.org) for commit guidelines.
+
+<a name="8.2.0"></a>
+# [8.2.0](https://github.com/nestjs/nest/compare/v8.1.2...v8.2.0) (2021-11-08)
+
+
+### Bug Fixes
+
+* **deps:** update dependency axios to v0.24.0 ([fc77e4f](https://github.com/nestjs/nest/commit/fc77e4f))
+
+
+### Features
+
+* **common:** add the ability to set some extra metadata about returned files ([5100573](https://github.com/nestjs/nest/commit/5100573))
+* **common:** allow to swap out class-validator and class-transformer ([2a1cc62](https://github.com/nestjs/nest/commit/2a1cc62))
diff --git a/packages/common/Readme.md b/packages/common/Readme.md
index 16f48336d..f288809a9 100644
--- a/packages/common/Readme.md
+++ b/packages/common/Readme.md
@@ -11,6 +11,7 @@
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/l/@nestjs/core.svg" alt="Package License" /></a>
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/dm/@nestjs/common.svg" alt="NPM Downloads" /></a>
 <a href="https://circleci.com/gh/nestjs/nest" target="_blank"><img src="https://img.shields.io/circleci/build/github/nestjs/nest/master" alt="CircleCI" /></a>
+<a href="https://coveralls.io/github/nestjs/nest?branch=master" target="_blank"><img src="https://coveralls.io/repos/github/nestjs/nest/badge.svg?branch=master#9" alt="Coverage" /></a>
 <a href="https://discord.gg/G7Qnnhy" target="_blank"><img src="https://img.shields.io/badge/discord-online-brightgreen.svg" alt="Discord"/></a>
 <a href="https://opencollective.com/nest#backer" target="_blank"><img src="https://opencollective.com/nest/backers/badge.svg" alt="Backers on Open Collective" /></a>
 <a href="https://opencollective.com/nest#sponsor" target="_blank"><img src="https://opencollective.com/nest/sponsors/badge.svg" alt="Sponsors on Open Collective" /></a>
@@ -36,8 +37,8 @@ Nest is a framework for building efficient, scalable <a href="http://nodejs.org"
 
 * To check out the [guide](https://docs.nestjs.com), visit [docs.nestjs.com](https://docs.nestjs.com). :books:
 * 要查看中文 [指南](readme_zh.md), 请访问 [docs.nestjs.cn](https://docs.nestjs.cn). :books:
-* [가이드](readme_kr.md) 문서는 [docs.nestjs.com](https://docs.nestjs.com)에서 확인하실 수 있습니다. :books:
-* [ガイド](readme_jp.md)は [docs.nestjs.com](https://docs.nestjs.com)でご確認ください。 :books:
+* [가이드](readme_kr.md)를 확인하려면, [docs.nestjs.com](https://docs.nestjs.com)를 방문하세요.:books: 
+* チェックするには [ガイド](readme_jp.md), 詳しくは [docs.nestjs.com](https://docs.nestjs.com). :books: 
 
 ## Questions
 
@@ -53,49 +54,36 @@ With official support, you can get expert help straight from Nest core team. We
 
 ## Support
 
-Nest is an MIT-licensed open source project. It can grow thanks to the sponsors and support from the amazing backers. If you'd like to join them, please [read more here](https://docs.nestjs.com/support).
+Nest is an MIT-licensed open source project. It can grow thanks to the sponsors and support by the amazing backers. If you'd like to join them, please [read more here](https://docs.nestjs.com/support).
 
 #### Principal Sponsors
 <table style="text-align:center;"><tr>
   <td><a href="https://trilon.io" target="_blank"><img src="https://nestjs.com/img/trilon.svg" width="200" valign="middle" /></a></td>
-  <td><a href="https://www.redhat.com" target="_blank"><img src="https://nestjs.com/img/red-hat-logo.svg" width="200" valign="middle" /></a></td>
 <td>
 <a href="https://github.com/Sanofi-IADC" target="_blank"><img src="https://docs.nestjs.com/assets/sponsors/sanofi.png" width="180" valign="middle" /></a></td>
 <td>
 <a href="https://nx.dev" target="_blank"><img src="https://nestjs.com/img/nx-logo.png" height="45" valign="middle" /></a></td>
-    <td>
-<a href="https://valor-software.com/" target="_blank"><img src="https://docs.nestjs.com/assets/sponsors/valor-software.png" width="170" valign="middle" /></a></td><td>
-<a href="https://amplication.com/" target="_blank"><img src="https://nestjs.com/img/amplication-logo.svg" width="190" valign="middle" /></a></td>
 </tr></table>
 
 #### Gold Sponsors
 
 <table style="text-align:center;"><tr><td>
-<a href="https://weld.app/" target="_blank"><img src="https://nestjs.com/img/weld-logo.svg" width="140" valign="middle" /></a></td>
+  <a href="https://careers.labster.com/departments/platform" target="_blank"><img src="https://nestjs.com/img/labster-logo.png" width="170" valign="middle" /></a></td><td>
+<a href="https://weld.app/" target="_blank"><img src="https://nestjs.com/img/weld-logo.svg" width="150" valign="middle" /></a></td>
+  <td>
+<a href="https://valor-software.com/" target="_blank"><img src="https://docs.nestjs.com/assets/sponsors/valor-software.png" width="170" valign="middle" /></a></td>
 <td>
-<a href="https://intrinsic.ventures/" target="_blank"><img src="https://nestjs.com/img/intrinisic-logo.png" width="210" valign="middle" /></a></td>
- <td>
-<a href="https://jetbrains.com/" target="_blank"><img src="https://nestjs.com/img/jetbrains-logo.svg" width="110" valign="middle" /></a></td><td>
-<a href="https://snyk.co/nestjs" target="_blank"><img src="https://nestjs.com/img/snyk-logo-black.png" width="185" valign="middle" /></a></td><td>
-<a href="https://fuseautotech.com/" target="_blank"><img src="https://nestjs.com/img/fuse-logo.svg" width="105" valign="middle" /></a></td>
-<td>
-<a href="https://ridicorp.com/career/" target="_blank"><img src="https://nestjs.com/img/ridi-logo.svg" width="105" valign="middle" /></a></td><td>
-<a href="https://www.movavi.com/imovie-for-windows.html" target="_blank"><img src="https://nestjs.com/img/movavi-logo.svg" width="105" valign="middle" /></a></td></</tr></table>
+<a href="https://intrinsic.ventures/" target="_blank"><img src="https://nestjs.com/img/intrinisic-logo.png" width="210" valign="middle" /></a></td></</tr></table>
 
 #### Silver Sponsors
 
 <table style="text-align:center;"><tr><td>
 <a href="https://neoteric.eu/" target="_blank"><img src="https://nestjs.com/img/neoteric-cut.png" width="120" valign="middle" /></a> </td><td>
   <a href="http://gojob.com" target="_blank"><img src="http://nestjs.com/img/gojob-logo.png" valign="middle" width="100" /></a> </td><td>
-<a href="https://www.myleodsc.com/" target="_blank"><img src="https://nestjs.com/img/myleo-logo.png" width="180" valign="middle" /></td><td>
+<a href="http://www.leogistics.com" target="_blank"><img src="https://nestjs.com/img/leogistics-logo.jpeg" width="150" valign="middle" /></td><td>
 <a href="https://careers.meetdandy.com/?gh_src=063ba61e3us" target="_blank"><img src="https://nestjs.com/img/dandy-roles-logo.svg" width="150" valign="middle" /></td><td>
 <a href="https://www.castlecraft.in" target="_blank"><img src="https://nestjs.com/img/castlecraft-logo.png" width="150" valign="middle" /></td>
-<td><a href="https://www.tinystacks.com" target="_blank"><img src="https://nestjs.com/img/tinystacks-logo.png#1" width="140" valign="middle" /></td>
-<td><a href="https://n.inc" target="_blank"><img src="https://nestjs.com/img/n-inc-logo.svg" width="120" valign="middle" /></td></tr><tr>
-<td><a href="https://bilberrry.com/" target="_blank"><img src="https://nestjs.com/img/bilberrry-logo.svg" width="180" valign="middle" /></td>
-<td><a href="https://ipinfo.ai/" target="_blank"><img src="https://nestjs.com/img/ipinfo-logo.png" width="130" valign="middle" /></td>
-<td><a href="https://chax.at" target="_blank"><img src="https://nestjs.com/img/chaxat-logo.png" width="100" valign="middle" /></td></tr>
-</table>
+<td><a href="https://www.tinystacks.com" target="_blank"><img src="https://nestjs.com/img/tinystacks-logo.png#1" width="140" valign="middle" /></td></tr></table>
 
 #### Sponsors
 
@@ -103,7 +91,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
 <a href="https://www.swingdev.io" target="_blank"><img src="https://nestjs.com/img/swingdev-logo.svg#1" width="110" valign="middle" /> </a></td><td align="center" valign="middle">
 <a href="https://www.novologic.com/" target="_blank"><img src="https://nestjs.com/img/novologic.png" width="110" valign="middle" /></a> </td><td align="center" valign="middle">
 <a href="https://ever.co/" target="_blank"><img src="https://nestjs.com/img/ever-logo.png" width="72" valign="middle" /></a>  </td><td align="center" valign="middle">
-<a href="https://blokt.com" target="_blank"><img src="https://nestjs.com/img/blokt-logo.png" width="120" valign="middle" /></a>  </td><td align="center" valign="middle">
+<a href="https://blokt.com" target="_blank"><img src="https://nestjs.com/img/blokt-logo.png" width="120" valign="middle" /></a>  </td><td align="center" valign="middle"> 
   <a href="http://architectnow.net/" target="_blank"><img src="https://nestjs.com/img/architectnow.png" width="125" valign="middle" /></a> </td><td align="center" valign="middle">
   <a href="https://quander.io/" target="_blank"><img src="https://nestjs.com/img/quander.png" width="100" valign="middle" /></a> </td></tr><tr><td align="center" valign="middle">
   <a href="https://mantro.net/" target="_blank"><img src="https://nestjs.com/img/mantro-logo.svg" width="95" valign="middle" /></a> </td><td align="center" valign="middle">
@@ -129,14 +117,6 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
 <td align="center" valign="middle"><a href="https://www.naologic.com/" target="_blank"><img src="https://nestjs.com/img/naologic-logo.svg" width="125" valign="middle" /></a></td>
   <td align="center" valign="middle"><a href="https://messaged.com/" target="_blank"><img src="https://nestjs.com/img/messaged-logo.png" width="50" valign="middle" /></a></td>
   <td align="center" valign="middle"><a href="https://triplecore.io" target="_blank"><img src="https://nestjs.com/img/triplecore-logo.svg" width="50" valign="middle" /></a></td>
-   <td align="center" valign="middle"><a href="https://klqc.de" target="_blank"><img src="https://nestjs.com/img/klcqcl-logo.png" width="120" valign="middle" /></a></td>
-   <td align="center" valign="middle"><a href="https://thecasinowizard.com/bonuses/no-deposit-bonuses/" target="_blank"><img src="https://nestjs.com/img/casinowizard-logo.png" width="120" valign="middle" /></a></td></tr><tr>
-     <td align="center" valign="middle"><a href="https://polygon-software.ch/" target="_blank"><img src="https://nestjs.com/img/polygon-logo.svg" width="120" valign="middle" /></a></td>
-   <td align="center" valign="middle"><a href="https://mobilereality.pl/" target="_blank"><img src="https://nestjs.com/img/mobile-reality-logo.png" width="45" valign="middle" /></a></td>
-     <td align="center" valign="middle"><a href="https://boringowl.io/" target="_blank"><img src="https://nestjs.com/img/boringowl-logo.svg" width="120" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://www.mobilefactory.jp/" target="_blank"><img src="https://nestjs.com/img/mobilefactory-logo.png" width="100" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://nordbot.app/" target="_blank"><img src="https://nestjs.com/img/nordbot-logo.png" width="120" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://doppio.sh/" target="_blank"><img src="https://nestjs.com/img/dopiosh-logo.png" width="50" valign="middle" /></a></td>
   </tr></table>
 
 ## Backers
diff --git a/packages/common/cache/cache.constants.ts b/packages/common/cache/cache.constants.ts
new file mode 100644
index 000000000..0ecf5c94e
--- /dev/null
+++ b/packages/common/cache/cache.constants.ts
@@ -0,0 +1,4 @@
+export const CACHE_MANAGER = 'CACHE_MANAGER';
+export const CACHE_MODULE_OPTIONS = 'CACHE_MODULE_OPTIONS';
+export const CACHE_KEY_METADATA = 'cache_module:cache_key';
+export const CACHE_TTL_METADATA = 'cache_module:cache_ttl';
diff --git a/packages/common/cache/cache.module.ts b/packages/common/cache/cache.module.ts
new file mode 100644
index 000000000..4e2c63d48
--- /dev/null
+++ b/packages/common/cache/cache.module.ts
@@ -0,0 +1,94 @@
+import { Module } from '../decorators';
+import { DynamicModule, Provider } from '../interfaces';
+import { CACHE_MANAGER, CACHE_MODULE_OPTIONS } from './cache.constants';
+import { createCacheManager } from './cache.providers';
+import {
+  CacheModuleAsyncOptions,
+  CacheModuleOptions,
+  CacheOptionsFactory,
+} from './interfaces/cache-module.interface';
+
+/**
+ * Module that provides Nest cache-manager.
+ *
+ * @see [Caching](https://docs.nestjs.com/techniques/caching)
+ *
+ * @publicApi
+ */
+@Module({
+  providers: [createCacheManager()],
+  exports: [CACHE_MANAGER],
+})
+export class CacheModule {
+  /**
+   * Configure the cache manager statically.
+   *
+   * @param options options to configure the cache manager
+   *
+   * @see [Customize caching](https://docs.nestjs.com/techniques/caching#customize-caching)
+   */
+  static register<StoreConfig extends Record<any, any> = Record<string, any>>(
+    options: CacheModuleOptions<StoreConfig> = {} as any,
+  ): DynamicModule {
+    return {
+      module: CacheModule,
+      global: options.isGlobal,
+      providers: [{ provide: CACHE_MODULE_OPTIONS, useValue: options }],
+    };
+  }
+
+  /**
+   * Configure the cache manager dynamically.
+   *
+   * @param options method for dynamically supplying cache manager configuration
+   * options
+   *
+   * @see [Async configuration](https://docs.nestjs.com/techniques/caching#async-configuration)
+   */
+  static registerAsync<
+    StoreConfig extends Record<any, any> = Record<string, any>,
+  >(options: CacheModuleAsyncOptions<StoreConfig>): DynamicModule {
+    return {
+      module: CacheModule,
+      global: options.isGlobal,
+      imports: options.imports,
+      providers: [
+        ...this.createAsyncProviders<StoreConfig>(options),
+        ...(options.extraProviders || []),
+      ],
+    };
+  }
+
+  private static createAsyncProviders<StoreConfig extends Record<any, any>>(
+    options: CacheModuleAsyncOptions<StoreConfig>,
+  ): Provider[] {
+    if (options.useExisting || options.useFactory) {
+      return [this.createAsyncOptionsProvider(options)];
+    }
+    return [
+      this.createAsyncOptionsProvider(options),
+      {
+        provide: options.useClass,
+        useClass: options.useClass,
+      },
+    ];
+  }
+
+  private static createAsyncOptionsProvider<
+    StoreConfig extends Record<any, any>,
+  >(options: CacheModuleAsyncOptions<StoreConfig>): Provider {
+    if (options.useFactory) {
+      return {
+        provide: CACHE_MODULE_OPTIONS,
+        useFactory: options.useFactory,
+        inject: options.inject || [],
+      };
+    }
+    return {
+      provide: CACHE_MODULE_OPTIONS,
+      useFactory: async (optionsFactory: CacheOptionsFactory<StoreConfig>) =>
+        optionsFactory.createCacheOptions(),
+      inject: [options.useExisting || options.useClass],
+    };
+  }
+}
diff --git a/packages/common/cache/cache.providers.ts b/packages/common/cache/cache.providers.ts
new file mode 100644
index 000000000..2e6df398d
--- /dev/null
+++ b/packages/common/cache/cache.providers.ts
@@ -0,0 +1,36 @@
+import { Provider } from '../interfaces';
+import { loadPackage } from '../utils/load-package.util';
+import { CACHE_MANAGER, CACHE_MODULE_OPTIONS } from './cache.constants';
+import { defaultCacheOptions } from './default-options';
+import { CacheManagerOptions } from './interfaces/cache-manager.interface';
+
+/**
+ * Creates a CacheManager Provider.
+ *
+ * @publicApi
+ */
+export function createCacheManager(): Provider {
+  return {
+    provide: CACHE_MANAGER,
+    useFactory: (options: CacheManagerOptions) => {
+      const cacheManager = loadPackage('cache-manager', 'CacheModule', () =>
+        require('cache-manager'),
+      );
+
+      return Array.isArray(options)
+        ? cacheManager.multiCaching(
+            options.map(store =>
+              cacheManager.caching({
+                ...defaultCacheOptions,
+                ...(store || {}),
+              }),
+            ),
+          )
+        : cacheManager.caching({
+            ...defaultCacheOptions,
+            ...(options || {}),
+          });
+    },
+    inject: [CACHE_MODULE_OPTIONS],
+  };
+}
diff --git a/packages/common/cache/decorators/cache-key.decorator.ts b/packages/common/cache/decorators/cache-key.decorator.ts
new file mode 100644
index 000000000..b9aa7f3c1
--- /dev/null
+++ b/packages/common/cache/decorators/cache-key.decorator.ts
@@ -0,0 +1,17 @@
+import { SetMetadata } from '../../decorators';
+import { CACHE_KEY_METADATA } from '../cache.constants';
+
+/**
+ * Decorator that sets the caching key used to store/retrieve cached items for
+ * Web sockets or Microservice based apps.
+ *
+ * For example:
+ * `@CacheKey('events')`
+ *
+ * @param key string naming the field to be used as a cache key
+ *
+ * @see [Caching](https://docs.nestjs.com/techniques/caching)
+ *
+ * @publicApi
+ */
+export const CacheKey = (key: string) => SetMetadata(CACHE_KEY_METADATA, key);
diff --git a/packages/common/cache/decorators/cache-ttl.decorator.ts b/packages/common/cache/decorators/cache-ttl.decorator.ts
new file mode 100644
index 000000000..e6b48ae93
--- /dev/null
+++ b/packages/common/cache/decorators/cache-ttl.decorator.ts
@@ -0,0 +1,18 @@
+import { SetMetadata } from '../../decorators';
+import { ExecutionContext } from '../../interfaces/features/execution-context.interface';
+import { CACHE_TTL_METADATA } from '../cache.constants';
+
+/**
+ * Decorator that sets the cache ttl setting the duration for cache expiration.
+ *
+ * For example: `@CacheTTL(5)`
+ *
+ * @param ttl number set the cache expiration time
+ *
+ * @see [Caching](https://docs.nestjs.com/techniques/caching)
+ *
+ * @publicApi
+ */
+type CacheTTLFactory = (ctx: ExecutionContext) => Promise<number> | number;
+export const CacheTTL = (ttl: number | CacheTTLFactory) =>
+  SetMetadata(CACHE_TTL_METADATA, ttl);
diff --git a/packages/common/cache/decorators/index.ts b/packages/common/cache/decorators/index.ts
new file mode 100644
index 000000000..9d60a27f5
--- /dev/null
+++ b/packages/common/cache/decorators/index.ts
@@ -0,0 +1,2 @@
+export * from './cache-key.decorator';
+export * from './cache-ttl.decorator';
diff --git a/packages/common/cache/default-options.ts b/packages/common/cache/default-options.ts
new file mode 100644
index 000000000..cdd262e2d
--- /dev/null
+++ b/packages/common/cache/default-options.ts
@@ -0,0 +1,5 @@
+export const defaultCacheOptions = {
+  ttl: 5,
+  max: 100,
+  store: 'memory',
+};
diff --git a/packages/common/cache/index.ts b/packages/common/cache/index.ts
new file mode 100644
index 000000000..1a5dfc371
--- /dev/null
+++ b/packages/common/cache/index.ts
@@ -0,0 +1,5 @@
+export * from './cache.constants';
+export * from './cache.module';
+export * from './decorators';
+export * from './interceptors';
+export * from './interfaces';
diff --git a/packages/common/cache/interceptors/cache.interceptor.ts b/packages/common/cache/interceptors/cache.interceptor.ts
new file mode 100644
index 000000000..7a27c9d73
--- /dev/null
+++ b/packages/common/cache/interceptors/cache.interceptor.ts
@@ -0,0 +1,89 @@
+import { Observable, of } from 'rxjs';
+import { tap } from 'rxjs/operators';
+import { Inject, Injectable, Optional } from '../../decorators';
+import {
+  CallHandler,
+  ExecutionContext,
+  HttpServer,
+  NestInterceptor,
+} from '../../interfaces';
+import { isFunction, isNil } from '../../utils/shared.utils';
+import {
+  CACHE_KEY_METADATA,
+  CACHE_MANAGER,
+  CACHE_TTL_METADATA,
+} from '../cache.constants';
+
+const HTTP_ADAPTER_HOST = 'HttpAdapterHost';
+const REFLECTOR = 'Reflector';
+
+export interface HttpAdapterHost<T extends HttpServer = any> {
+  httpAdapter: T;
+}
+
+@Injectable()
+export class CacheInterceptor implements NestInterceptor {
+  @Optional()
+  @Inject(HTTP_ADAPTER_HOST)
+  protected readonly httpAdapterHost: HttpAdapterHost;
+
+  protected allowedMethods = ['GET'];
+  constructor(
+    @Inject(CACHE_MANAGER) protected readonly cacheManager: any,
+    @Inject(REFLECTOR) protected readonly reflector: any,
+  ) {}
+
+  async intercept(
+    context: ExecutionContext,
+    next: CallHandler,
+  ): Promise<Observable<any>> {
+    const key = this.trackBy(context);
+    const ttlValueOrFactory =
+      this.reflector.get(CACHE_TTL_METADATA, context.getHandler()) ?? null;
+
+    if (!key) {
+      return next.handle();
+    }
+    try {
+      const value = await this.cacheManager.get(key);
+      if (!isNil(value)) {
+        return of(value);
+      }
+      const ttl = isFunction(ttlValueOrFactory)
+        ? await ttlValueOrFactory(context)
+        : ttlValueOrFactory;
+      return next.handle().pipe(
+        tap(response => {
+          const args = isNil(ttl) ? [key, response] : [key, response, { ttl }];
+          this.cacheManager.set(...args);
+        }),
+      );
+    } catch {
+      return next.handle();
+    }
+  }
+
+  protected trackBy(context: ExecutionContext): string | undefined {
+    const httpAdapter = this.httpAdapterHost.httpAdapter;
+    const isHttpApp = httpAdapter && !!httpAdapter.getRequestMethod;
+    const cacheMetadata = this.reflector.get(
+      CACHE_KEY_METADATA,
+      context.getHandler(),
+    );
+
+    if (!isHttpApp || cacheMetadata) {
+      return cacheMetadata;
+    }
+
+    const request = context.getArgByIndex(0);
+    if (!this.isRequestCacheable(context)) {
+      return undefined;
+    }
+    return httpAdapter.getRequestUrl(request);
+  }
+
+  protected isRequestCacheable(context: ExecutionContext): boolean {
+    const req = context.switchToHttp().getRequest();
+    return this.allowedMethods.includes(req.method);
+  }
+}
diff --git a/packages/common/cache/interceptors/index.ts b/packages/common/cache/interceptors/index.ts
new file mode 100644
index 000000000..474887b1f
--- /dev/null
+++ b/packages/common/cache/interceptors/index.ts
@@ -0,0 +1 @@
+export * from './cache.interceptor';
diff --git a/packages/common/cache/interfaces/cache-manager.interface.ts b/packages/common/cache/interfaces/cache-manager.interface.ts
new file mode 100644
index 000000000..13e34127d
--- /dev/null
+++ b/packages/common/cache/interfaces/cache-manager.interface.ts
@@ -0,0 +1,83 @@
+export interface LiteralObject {
+  [key: string]: any;
+}
+
+/**
+ * Interface defining a cache store. Implement this interface to create a custom
+ * cache store.
+ *
+ * @publicApi
+ */
+export interface CacheStore {
+  /**
+   * Create a key/value pair in the cache.
+   *
+   * @param key cache key
+   * @param value cache value
+   */
+  set<T>(
+    key: string,
+    value: T,
+    options?: CacheStoreSetOptions<T>,
+  ): Promise<void> | void;
+  /**
+   * Retrieve a key/value pair from the cache.
+   *
+   * @param key cache key
+   */
+  get<T>(key: string): Promise<T | undefined> | T | undefined;
+  /**
+   * Destroy a key/value pair from the cache.
+   *
+   * @param key cache key
+   */
+  del?(key: string): void | Promise<void>;
+}
+
+export interface CacheStoreSetOptions<T> {
+  /**
+   * Time to live - amount of time in seconds that a response is cached before it
+   * is deleted. Defaults based on your cache manager settings.
+   */
+  ttl?: ((value: T) => number) | number;
+}
+
+/**
+ * Interface defining a factory to create a cache store.
+ *
+ * @publicApi
+ */
+export interface CacheStoreFactory {
+  /**
+   * Return a configured cache store.
+   *
+   * @param args Cache manager options received from `CacheModule.register()`
+   * or `CacheModule.registerAsync()`
+   */
+  create(args: LiteralObject): CacheStore;
+}
+
+/**
+ * Interface defining Cache Manager configuration options.
+ *
+ * @publicApi
+ */
+export interface CacheManagerOptions {
+  /**
+   * Cache storage manager.  Default is `'memory'` (in-memory store).  See
+   * [Different stores](https://docs.nestjs.com/techniques/caching#different-stores)
+   * for more info.
+   */
+  store?: string | CacheStoreFactory | CacheStore;
+  /**
+   * Time to live - amount of time in seconds that a response is cached before it
+   * is deleted. Subsequent request will call through the route handler and refresh
+   * the cache.  Defaults to 5 seconds.
+   */
+  ttl?: number;
+  /**
+   * Maximum number of responses to store in the cache.  Defaults to 100.
+   */
+  max?: number;
+  isCacheableValue?: (value: any) => boolean;
+}
diff --git a/packages/common/cache/interfaces/cache-module.interface.ts b/packages/common/cache/interfaces/cache-module.interface.ts
new file mode 100644
index 000000000..5beb769c8
--- /dev/null
+++ b/packages/common/cache/interfaces/cache-module.interface.ts
@@ -0,0 +1,71 @@
+import { ModuleMetadata, Provider, Type } from '../../interfaces';
+import { CacheManagerOptions } from './cache-manager.interface';
+
+export type CacheModuleOptions<
+  StoreConfig extends Record<any, any> = Record<string, any>,
+> =
+  // Store-specfic configuration takes precedence over cache module options due
+  // to how `createCacheManager` is implemented.
+  CacheManagerOptions &
+    StoreConfig & {
+      /**
+       * If "true', register `CacheModule` as a global module.
+       */
+      isGlobal?: boolean;
+    };
+
+/**
+ * Interface describing a `CacheOptionsFactory`.  Providers supplying configuration
+ * options for the Cache module must implement this interface.
+ *
+ * @see [Async configuration](https://docs.nestjs.com/techniques/caching#async-configuration)
+ *
+ * @publicApi
+ */
+export interface CacheOptionsFactory<
+  StoreConfig extends Record<any, any> = Record<string, any>,
+> {
+  createCacheOptions():
+    | Promise<CacheModuleOptions<StoreConfig>>
+    | CacheModuleOptions<StoreConfig>;
+}
+
+/**
+ * Options for dynamically configuring the Cache module.
+ *
+ * @see [Async configuration](https://docs.nestjs.com/techniques/caching#async-configuration)
+ *
+ * @publicApi
+ */
+export interface CacheModuleAsyncOptions<
+  StoreConfig extends Record<any, any> = Record<string, any>,
+> extends Pick<ModuleMetadata, 'imports'> {
+  /**
+   * Injection token resolving to an existing provider. The provider must implement
+   * the `CacheOptionsFactory` interface.
+   */
+  useExisting?: Type<CacheOptionsFactory<StoreConfig>>;
+  /**
+   * Injection token resolving to a class that will be instantiated as a provider.
+   * The class must implement the `CacheOptionsFactory` interface.
+   */
+  useClass?: Type<CacheOptionsFactory<StoreConfig>>;
+  /**
+   * Function returning options (or a Promise resolving to options) to configure the
+   * cache module.
+   */
+  useFactory?: (
+    ...args: any[]
+  ) =>
+    | Promise<CacheModuleOptions<StoreConfig>>
+    | CacheModuleOptions<StoreConfig>;
+  /**
+   * Dependencies that a Factory may inject.
+   */
+  inject?: any[];
+  extraProviders?: Provider[];
+  /**
+   * If "true', register `CacheModule` as a global module.
+   */
+  isGlobal?: boolean;
+}
diff --git a/packages/common/cache/interfaces/index.ts b/packages/common/cache/interfaces/index.ts
new file mode 100644
index 000000000..54aa4c3cb
--- /dev/null
+++ b/packages/common/cache/interfaces/index.ts
@@ -0,0 +1,2 @@
+export * from './cache-manager.interface';
+export * from './cache-module.interface';
diff --git a/packages/common/constants.ts b/packages/common/constants.ts
index 71f27685d..d6ded9f97 100644
--- a/packages/common/constants.ts
+++ b/packages/common/constants.ts
@@ -4,7 +4,6 @@ export const MODULE_METADATA = {
   CONTROLLERS: 'controllers',
   EXPORTS: 'exports',
 };
-
 export const GLOBAL_MODULE_METADATA = '__module:global__';
 export const HOST_METADATA = 'host';
 export const PATH_METADATA = 'path';
@@ -16,24 +15,13 @@ export const OPTIONAL_PROPERTY_DEPS_METADATA = 'optional:properties_metadata';
 export const SCOPE_OPTIONS_METADATA = 'scope:options';
 export const METHOD_METADATA = 'method';
 export const ROUTE_ARGS_METADATA = '__routeArguments__';
-export const CUSTOM_ROUTE_ARGS_METADATA = '__customRouteArgs__';
+export const CUSTOM_ROUTE_AGRS_METADATA = '__customRouteArgs__';
+export const EXCEPTION_FILTERS_METADATA = '__exceptionFilters__';
 export const FILTER_CATCH_EXCEPTIONS = '__filterCatchExceptions__';
-
 export const PIPES_METADATA = '__pipes__';
 export const GUARDS_METADATA = '__guards__';
-export const INTERCEPTORS_METADATA = '__interceptors__';
-export const EXCEPTION_FILTERS_METADATA = '__exceptionFilters__';
-export const ENHANCER_KEY_TO_SUBTYPE_MAP = {
-  [GUARDS_METADATA]: 'guard',
-  [INTERCEPTORS_METADATA]: 'interceptor',
-  [PIPES_METADATA]: 'pipe',
-  [EXCEPTION_FILTERS_METADATA]: 'filter',
-} as const;
-
-export type EnhancerSubtype =
-  (typeof ENHANCER_KEY_TO_SUBTYPE_MAP)[keyof typeof ENHANCER_KEY_TO_SUBTYPE_MAP];
-
 export const RENDER_METADATA = '__renderTemplate__';
+export const INTERCEPTORS_METADATA = '__interceptors__';
 export const HTTP_CODE_METADATA = '__httpCode__';
 export const MODULE_PATH = '__module_path__';
 export const HEADERS_METADATA = '__headers__';
@@ -41,7 +29,3 @@ export const REDIRECT_METADATA = '__redirect__';
 export const RESPONSE_PASSTHROUGH_METADATA = '__responsePassthrough__';
 export const SSE_METADATA = '__sse__';
 export const VERSION_METADATA = '__version__';
-export const INJECTABLE_WATERMARK = '__injectable__';
-export const CONTROLLER_WATERMARK = '__controller__';
-export const CATCH_WATERMARK = '__catch__';
-export const ENTRY_PROVIDER_WATERMARK = '__entryProvider__';
diff --git a/packages/common/decorators/core/catch.decorator.ts b/packages/common/decorators/core/catch.decorator.ts
index cd3cdb161..d211a6d82 100644
--- a/packages/common/decorators/core/catch.decorator.ts
+++ b/packages/common/decorators/core/catch.decorator.ts
@@ -1,5 +1,5 @@
-import { CATCH_WATERMARK, FILTER_CATCH_EXCEPTIONS } from '../../constants';
-import { Type, Abstract } from '../../interfaces';
+import { FILTER_CATCH_EXCEPTIONS } from '../../constants';
+import { Type } from '../../interfaces';
 
 /**
  * Decorator that marks a class as a Nest exception filter. An exception filter
@@ -18,11 +18,8 @@ import { Type, Abstract } from '../../interfaces';
  *
  * @publicApi
  */
-export function Catch(
-  ...exceptions: Array<Type<any> | Abstract<any>>
-): ClassDecorator {
+export function Catch(...exceptions: Type<any>[]): ClassDecorator {
   return (target: object) => {
-    Reflect.defineMetadata(CATCH_WATERMARK, true, target);
     Reflect.defineMetadata(FILTER_CATCH_EXCEPTIONS, exceptions, target);
   };
 }
diff --git a/packages/common/decorators/core/controller.decorator.ts b/packages/common/decorators/core/controller.decorator.ts
index 531ae5151..9f17a9fb5 100644
--- a/packages/common/decorators/core/controller.decorator.ts
+++ b/packages/common/decorators/core/controller.decorator.ts
@@ -1,11 +1,11 @@
 import {
-  CONTROLLER_WATERMARK,
   HOST_METADATA,
   PATH_METADATA,
   SCOPE_OPTIONS_METADATA,
   VERSION_METADATA,
 } from '../../constants';
-import { ScopeOptions, VersionOptions } from '../../interfaces';
+import { ScopeOptions } from '../../interfaces/scope-options.interface';
+import { VersionOptions } from '../../interfaces/version-options.interface';
 import { isString, isUndefined } from '../../utils/shared.utils';
 
 /**
@@ -69,7 +69,7 @@ export function Controller(): ClassDecorator;
  * It defines a class that provides a context for one or more message or event
  * handlers.
  *
- * @param {string|Array} prefix string that defines a `route path prefix`.  The prefix
+ * @param {string, Array} prefix string that defines a `route path prefix`.  The prefix
  * is pre-pended to the path specified in any request decorator in the class.
  *
  * @see [Routing](https://docs.nestjs.com/controllers#routing)
@@ -162,14 +162,11 @@ export function Controller(
     : [
         prefixOrOptions.path || defaultPath,
         prefixOrOptions.host,
-        { scope: prefixOrOptions.scope, durable: prefixOrOptions.durable },
-        Array.isArray(prefixOrOptions.version)
-          ? Array.from(new Set(prefixOrOptions.version))
-          : prefixOrOptions.version,
+        { scope: prefixOrOptions.scope },
+        prefixOrOptions.version,
       ];
 
   return (target: object) => {
-    Reflect.defineMetadata(CONTROLLER_WATERMARK, true, target);
     Reflect.defineMetadata(PATH_METADATA, path, target);
     Reflect.defineMetadata(HOST_METADATA, host, target);
     Reflect.defineMetadata(SCOPE_OPTIONS_METADATA, scopeOptions, target);
diff --git a/packages/common/decorators/core/dependencies.decorator.ts b/packages/common/decorators/core/dependencies.decorator.ts
index b9657efa0..984269524 100644
--- a/packages/common/decorators/core/dependencies.decorator.ts
+++ b/packages/common/decorators/core/dependencies.decorator.ts
@@ -9,8 +9,6 @@ export function flatten<T extends Array<unknown> = any>(
 
 /**
  * Decorator that sets required dependencies (required with a vanilla JavaScript objects)
- *
- * @publicApi
  */
 export const Dependencies = (
   ...dependencies: Array<unknown>
diff --git a/packages/common/decorators/core/inject.decorator.ts b/packages/common/decorators/core/inject.decorator.ts
index e8f559124..471c77c08 100644
--- a/packages/common/decorators/core/inject.decorator.ts
+++ b/packages/common/decorators/core/inject.decorator.ts
@@ -33,10 +33,8 @@ import { isUndefined } from '../../utils/shared.utils';
  *
  * @publicApi
  */
-export function Inject<T = any>(
-  token?: T,
-): PropertyDecorator & ParameterDecorator {
-  return (target: object, key: string | symbol | undefined, index?: number) => {
+export function Inject<T = any>(token?: T) {
+  return (target: object, key: string | symbol, index?: number) => {
     const type = token || Reflect.getMetadata('design:type', target, key);
 
     if (!isUndefined(index)) {
diff --git a/packages/common/decorators/core/injectable.decorator.ts b/packages/common/decorators/core/injectable.decorator.ts
index ff7ae143c..91910dfc5 100644
--- a/packages/common/decorators/core/injectable.decorator.ts
+++ b/packages/common/decorators/core/injectable.decorator.ts
@@ -1,5 +1,5 @@
-import { uid } from 'uid';
-import { INJECTABLE_WATERMARK, SCOPE_OPTIONS_METADATA } from '../../constants';
+import { v4 as uuid } from 'uuid';
+import { SCOPE_OPTIONS_METADATA } from '../../constants';
 import { ScopeOptions } from '../../interfaces/scope-options.interface';
 import { Type } from '../../interfaces/type.interface';
 
@@ -42,17 +42,13 @@ export type InjectableOptions = ScopeOptions;
  */
 export function Injectable(options?: InjectableOptions): ClassDecorator {
   return (target: object) => {
-    Reflect.defineMetadata(INJECTABLE_WATERMARK, true, target);
     Reflect.defineMetadata(SCOPE_OPTIONS_METADATA, options, target);
   };
 }
 
-/**
- * @publicApi
- */
 export function mixin<T>(mixinClass: Type<T>) {
   Object.defineProperty(mixinClass, 'name', {
-    value: uid(21),
+    value: uuid(),
   });
   Injectable()(mixinClass);
   return mixinClass;
diff --git a/packages/common/decorators/core/optional.decorator.ts b/packages/common/decorators/core/optional.decorator.ts
index 0d94c20f0..49d80eec1 100644
--- a/packages/common/decorators/core/optional.decorator.ts
+++ b/packages/common/decorators/core/optional.decorator.ts
@@ -17,8 +17,8 @@ import { isUndefined } from '../../utils/shared.utils';
  *
  * @publicApi
  */
-export function Optional(): PropertyDecorator & ParameterDecorator {
-  return (target: object, key: string | symbol | undefined, index?: number) => {
+export function Optional() {
+  return (target: object, key: string | symbol, index?: number) => {
     if (!isUndefined(index)) {
       const args = Reflect.getMetadata(OPTIONAL_DEPS_METADATA, target) || [];
       Reflect.defineMetadata(OPTIONAL_DEPS_METADATA, [...args, index], target);
diff --git a/packages/common/decorators/core/version.decorator.ts b/packages/common/decorators/core/version.decorator.ts
index 9ab8fc887..d82d079e2 100644
--- a/packages/common/decorators/core/version.decorator.ts
+++ b/packages/common/decorators/core/version.decorator.ts
@@ -7,11 +7,6 @@ import { VersionValue } from '../../interfaces/version-options.interface';
  * @publicApi
  */
 export function Version(version: VersionValue): MethodDecorator {
-  if (Array.isArray(version)) {
-    // Drop duplicated versions
-    version = Array.from(new Set(version));
-  }
-
   return (
     target: any,
     key: string | symbol,
diff --git a/packages/common/decorators/http/create-route-param-metadata.decorator.ts b/packages/common/decorators/http/create-route-param-metadata.decorator.ts
index d070e47a7..f8582bf57 100644
--- a/packages/common/decorators/http/create-route-param-metadata.decorator.ts
+++ b/packages/common/decorators/http/create-route-param-metadata.decorator.ts
@@ -1,4 +1,4 @@
-import { uid } from 'uid';
+import { v4 as uuid } from 'uuid';
 import { ROUTE_ARGS_METADATA } from '../../constants';
 import { PipeTransform } from '../../index';
 import { Type } from '../../interfaces';
@@ -12,8 +12,6 @@ export type ParamDecoratorEnhancer = ParameterDecorator;
  * Defines HTTP route param decorator
  *
  * @param factory
- *
- * @publicApi
  */
 export function createParamDecorator<
   FactoryData = any,
@@ -25,7 +23,7 @@ export function createParamDecorator<
 ): (
   ...dataOrPipes: (Type<PipeTransform> | PipeTransform | FactoryData)[]
 ) => ParameterDecorator {
-  const paramtype = uid(21);
+  const paramtype = uuid();
   return (
       data?,
       ...pipes: (Type<PipeTransform> | PipeTransform | FactoryData)[]
diff --git a/packages/common/decorators/http/render.decorator.ts b/packages/common/decorators/http/render.decorator.ts
index 92d2f8d20..6e9f22a1c 100644
--- a/packages/common/decorators/http/render.decorator.ts
+++ b/packages/common/decorators/http/render.decorator.ts
@@ -7,7 +7,7 @@ import { RENDER_METADATA } from '../../constants';
  *
  * @param template name of the render engine template file
  *
- * @see [Model-View-Controller](https://docs.nestjs.com/techniques/mvc)
+ * @see [Model-View-Controller](https://docs.nestjs.com/techniques.mvc)
  *
  * @publicApi
  */
diff --git a/packages/common/decorators/http/request-mapping.decorator.ts b/packages/common/decorators/http/request-mapping.decorator.ts
index 62d61cde4..46ebc0d8f 100644
--- a/packages/common/decorators/http/request-mapping.decorator.ts
+++ b/packages/common/decorators/http/request-mapping.decorator.ts
@@ -109,12 +109,3 @@ export const Head = createMappingDecorator(RequestMethod.HEAD);
  * @publicApi
  */
 export const All = createMappingDecorator(RequestMethod.ALL);
-
-/**
- * Route handler (method) Decorator. Routes all HTTP requests to the specified path.
- *
- * @see [Routing](https://docs.nestjs.com/controllers#routing)
- *
- * @publicApi
- */
-export const Search = createMappingDecorator(RequestMethod.SEARCH);
diff --git a/packages/common/decorators/modules/module.decorator.ts b/packages/common/decorators/modules/module.decorator.ts
index b0547b6d3..c5df824d9 100644
--- a/packages/common/decorators/modules/module.decorator.ts
+++ b/packages/common/decorators/modules/module.decorator.ts
@@ -5,7 +5,7 @@ import { validateModuleKeys } from '../../utils/validate-module-keys.util';
  * Decorator that marks a class as a [module](https://docs.nestjs.com/modules).
  *
  * Modules are used by Nest to organize the application structure into scopes. Controllers
- * and Providers are scoped by the module they are declared in. Modules and their
+ * and Providers are scoped by the module they are declared in.  Modules and their
  * classes (Controllers and Providers) form a graph that determines how Nest
  * performs [Dependency Injection (DI)](https://docs.nestjs.com/providers#dependency-injection).
  *
diff --git a/packages/common/enums/http-status.enum.ts b/packages/common/enums/http-status.enum.ts
index 326001344..875597540 100644
--- a/packages/common/enums/http-status.enum.ts
+++ b/packages/common/enums/http-status.enum.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export enum HttpStatus {
   CONTINUE = 100,
   SWITCHING_PROTOCOLS = 101,
diff --git a/packages/common/enums/request-method.enum.ts b/packages/common/enums/request-method.enum.ts
index e28455633..d48f52b4d 100644
--- a/packages/common/enums/request-method.enum.ts
+++ b/packages/common/enums/request-method.enum.ts
@@ -7,5 +7,4 @@ export enum RequestMethod {
   ALL,
   OPTIONS,
   HEAD,
-  SEARCH,
 }
diff --git a/packages/common/enums/version-type.enum.ts b/packages/common/enums/version-type.enum.ts
index abe4c6416..981986e87 100644
--- a/packages/common/enums/version-type.enum.ts
+++ b/packages/common/enums/version-type.enum.ts
@@ -5,5 +5,4 @@ export enum VersioningType {
   URI,
   HEADER,
   MEDIA_TYPE,
-  CUSTOM,
 }
diff --git a/packages/common/exceptions/bad-gateway.exception.ts b/packages/common/exceptions/bad-gateway.exception.ts
index 2623d8727..78667996c 100644
--- a/packages/common/exceptions/bad-gateway.exception.ts
+++ b/packages/common/exceptions/bad-gateway.exception.ts
@@ -1,10 +1,10 @@
 import { HttpStatus } from '../enums/http-status.enum';
-import { HttpException, HttpExceptionOptions } from './http.exception';
+import { HttpException } from './http.exception';
 
 /**
  * Defines an HTTP exception for *Bad Gateway* type errors.
  *
- * @see [Built-in HTTP exceptions](https://docs.nestjs.com/exception-filters#built-in-http-exceptions)
+ * @see [Base Exceptions](https://docs.nestjs.com/exception-filters#base-exceptions)
  *
  * @publicApi
  */
@@ -18,7 +18,7 @@ export class BadGatewayException extends HttpException {
    * @usageNotes
    * The HTTP response status code will be 502.
    * - The `objectOrError` argument defines the JSON response body or the message string.
-   * - The `descriptionOrOptions` argument contains either a short description of the HTTP error or an options object used to provide an underlying error cause.
+   * - The `description` argument contains a short description of the HTTP error.
    *
    * By default, the JSON response body contains two properties:
    * - `statusCode`: this will be the value 502.
@@ -31,15 +31,12 @@ export class BadGatewayException extends HttpException {
    * and return it as the JSON response body.
    *
    * @param objectOrError string or object describing the error condition.
-   * @param descriptionOrOptions either a short description of the HTTP error or an options object used to provide an underlying error cause
+   * @param description a short description of the HTTP error.
    */
   constructor(
     objectOrError?: string | object | any,
-    descriptionOrOptions: string | HttpExceptionOptions = 'Bad Gateway',
+    description = 'Bad Gateway',
   ) {
-    const { description, httpExceptionOptions } =
-      HttpException.extractDescriptionAndOptionsFrom(descriptionOrOptions);
-
     super(
       HttpException.createBody(
         objectOrError,
@@ -47,7 +44,6 @@ export class BadGatewayException extends HttpException {
         HttpStatus.BAD_GATEWAY,
       ),
       HttpStatus.BAD_GATEWAY,
-      httpExceptionOptions,
     );
   }
 }
diff --git a/packages/common/exceptions/bad-request.exception.ts b/packages/common/exceptions/bad-request.exception.ts
index bedb7d095..b5385d09c 100644
--- a/packages/common/exceptions/bad-request.exception.ts
+++ b/packages/common/exceptions/bad-request.exception.ts
@@ -1,10 +1,10 @@
 import { HttpStatus } from '../enums/http-status.enum';
-import { HttpException, HttpExceptionOptions } from './http.exception';
+import { HttpException } from './http.exception';
 
 /**
  * Defines an HTTP exception for *Bad Request* type errors.
  *
- * @see [Built-in HTTP exceptions](https://docs.nestjs.com/exception-filters#built-in-http-exceptions)
+ * @see [Base Exceptions](https://docs.nestjs.com/exception-filters#base-exceptions)
  *
  * @publicApi
  */
@@ -18,7 +18,7 @@ export class BadRequestException extends HttpException {
    * @usageNotes
    * The HTTP response status code will be 400.
    * - The `objectOrError` argument defines the JSON response body or the message string.
-   * - The `descriptionOrOptions` argument contains either a short description of the HTTP error or an options object used to provide an underlying error cause.
+   * - The `description` argument contains a short description of the HTTP error.
    *
    * By default, the JSON response body contains two properties:
    * - `statusCode`: this will be the value 400.
@@ -31,15 +31,12 @@ export class BadRequestException extends HttpException {
    * and return it as the JSON response body.
    *
    * @param objectOrError string or object describing the error condition.
-   * @param descriptionOrOptions either a short description of the HTTP error or an options object used to provide an underlying error cause
+   * @param description a short description of the HTTP error.
    */
   constructor(
     objectOrError?: string | object | any,
-    descriptionOrOptions: string | HttpExceptionOptions = 'Bad Request',
+    description = 'Bad Request',
   ) {
-    const { description, httpExceptionOptions } =
-      HttpException.extractDescriptionAndOptionsFrom(descriptionOrOptions);
-
     super(
       HttpException.createBody(
         objectOrError,
@@ -47,7 +44,6 @@ export class BadRequestException extends HttpException {
         HttpStatus.BAD_REQUEST,
       ),
       HttpStatus.BAD_REQUEST,
-      httpExceptionOptions,
     );
   }
 }
diff --git a/packages/common/exceptions/conflict.exception.ts b/packages/common/exceptions/conflict.exception.ts
index f7810ffbe..d67cc30f4 100644
--- a/packages/common/exceptions/conflict.exception.ts
+++ b/packages/common/exceptions/conflict.exception.ts
@@ -1,10 +1,10 @@
 import { HttpStatus } from '../enums/http-status.enum';
-import { HttpException, HttpExceptionOptions } from './http.exception';
+import { HttpException } from './http.exception';
 
 /**
  * Defines an HTTP exception for *Conflict* type errors.
  *
- * @see [Built-in HTTP exceptions](https://docs.nestjs.com/exception-filters#built-in-http-exceptions)
+ * @see [Base Exceptions](https://docs.nestjs.com/exception-filters#base-exceptions)
  *
  * @publicApi
  */
@@ -18,7 +18,7 @@ export class ConflictException extends HttpException {
    * @usageNotes
    * The HTTP response status code will be 409.
    * - The `objectOrError` argument defines the JSON response body or the message string.
-   * - The `descriptionOrOptions` argument contains either a short description of the HTTP error or an options object used to provide an underlying error cause.
+   * - The `description` argument contains a short description of the HTTP error.
    *
    * By default, the JSON response body contains two properties:
    * - `statusCode`: this will be the value 409.
@@ -31,19 +31,12 @@ export class ConflictException extends HttpException {
    * and return it as the JSON response body.
    *
    * @param objectOrError string or object describing the error condition.
-   * @param descriptionOrOptions either a short description of the HTTP error or an options object used to provide an underlying error cause
+   * @param description a short description of the HTTP error.
    */
-  constructor(
-    objectOrError?: string | object | any,
-    descriptionOrOptions: string | HttpExceptionOptions = 'Conflict',
-  ) {
-    const { description, httpExceptionOptions } =
-      HttpException.extractDescriptionAndOptionsFrom(descriptionOrOptions);
-
+  constructor(objectOrError?: string | object | any, description = 'Conflict') {
     super(
       HttpException.createBody(objectOrError, description, HttpStatus.CONFLICT),
       HttpStatus.CONFLICT,
-      httpExceptionOptions,
     );
   }
 }
diff --git a/packages/common/exceptions/forbidden.exception.ts b/packages/common/exceptions/forbidden.exception.ts
index 8079823d8..7c3ae92fb 100644
--- a/packages/common/exceptions/forbidden.exception.ts
+++ b/packages/common/exceptions/forbidden.exception.ts
@@ -1,10 +1,10 @@
 import { HttpStatus } from '../enums/http-status.enum';
-import { HttpException, HttpExceptionOptions } from './http.exception';
+import { HttpException } from './http.exception';
 
 /**
  * Defines an HTTP exception for *Forbidden* type errors.
  *
- * @see [Built-in HTTP exceptions](https://docs.nestjs.com/exception-filters#built-in-http-exceptions)
+ * @see [Base Exceptions](https://docs.nestjs.com/exception-filters#base-exceptions)
  *
  * @publicApi
  */
@@ -18,7 +18,7 @@ export class ForbiddenException extends HttpException {
    * @usageNotes
    * The HTTP response status code will be 403.
    * - The `objectOrError` argument defines the JSON response body or the message string.
-   * - The `descriptionOrOptions` argument contains either a short description of the HTTP error or an options object used to provide an underlying error cause.
+   * - The `description` argument contains a short description of the HTTP error.
    *
    * By default, the JSON response body contains two properties:
    * - `statusCode`: this will be the value 403.
@@ -31,15 +31,12 @@ export class ForbiddenException extends HttpException {
    * and return it as the JSON response body.
    *
    * @param objectOrError string or object describing the error condition.
-   * @param descriptionOrOptions either a short description of the HTTP error or an options object used to provide an underlying error cause
+   * @param description a short description of the HTTP error.
    */
   constructor(
     objectOrError?: string | object | any,
-    descriptionOrOptions: string | HttpExceptionOptions = 'Forbidden',
+    description = 'Forbidden',
   ) {
-    const { description, httpExceptionOptions } =
-      HttpException.extractDescriptionAndOptionsFrom(descriptionOrOptions);
-
     super(
       HttpException.createBody(
         objectOrError,
@@ -47,7 +44,6 @@ export class ForbiddenException extends HttpException {
         HttpStatus.FORBIDDEN,
       ),
       HttpStatus.FORBIDDEN,
-      httpExceptionOptions,
     );
   }
 }
diff --git a/packages/common/exceptions/gateway-timeout.exception.ts b/packages/common/exceptions/gateway-timeout.exception.ts
index 6953f0cb2..2648ddfec 100644
--- a/packages/common/exceptions/gateway-timeout.exception.ts
+++ b/packages/common/exceptions/gateway-timeout.exception.ts
@@ -1,10 +1,10 @@
 import { HttpStatus } from '../enums/http-status.enum';
-import { HttpException, HttpExceptionOptions } from './http.exception';
+import { HttpException } from './http.exception';
 
 /**
  * Defines an HTTP exception for *Gateway Timeout* type errors.
  *
- * @see [Built-in HTTP exceptions](https://docs.nestjs.com/exception-filters#built-in-http-exceptions)
+ * @see [Base Exceptions](https://docs.nestjs.com/exception-filters#base-exceptions)
  *
  * @publicApi
  */
@@ -18,7 +18,7 @@ export class GatewayTimeoutException extends HttpException {
    * @usageNotes
    * The HTTP response status code will be 504.
    * - The `objectOrError` argument defines the JSON response body or the message string.
-   * - The `descriptionOrOptions` argument contains either a short description of the HTTP error or an options object used to provide an underlying error cause.
+   * - The `description` argument contains a short description of the HTTP error.
    *
    * By default, the JSON response body contains two properties:
    * - `statusCode`: this will be the value 504.
@@ -31,15 +31,12 @@ export class GatewayTimeoutException extends HttpException {
    * and return it as the JSON response body.
    *
    * @param objectOrError string or object describing the error condition.
-   * @param descriptionOrOptions either a short description of the HTTP error or an options object used to provide an underlying error cause
+   * @param description a short description of the HTTP error.
    */
   constructor(
     objectOrError?: string | object | any,
-    descriptionOrOptions: string | HttpExceptionOptions = 'Gateway Timeout',
+    description = 'Gateway Timeout',
   ) {
-    const { description, httpExceptionOptions } =
-      HttpException.extractDescriptionAndOptionsFrom(descriptionOrOptions);
-
     super(
       HttpException.createBody(
         objectOrError,
@@ -47,7 +44,6 @@ export class GatewayTimeoutException extends HttpException {
         HttpStatus.GATEWAY_TIMEOUT,
       ),
       HttpStatus.GATEWAY_TIMEOUT,
-      httpExceptionOptions,
     );
   }
 }
diff --git a/packages/common/exceptions/gone.exception.ts b/packages/common/exceptions/gone.exception.ts
index 3e080906a..48b141dfe 100644
--- a/packages/common/exceptions/gone.exception.ts
+++ b/packages/common/exceptions/gone.exception.ts
@@ -1,10 +1,10 @@
 import { HttpStatus } from '../enums/http-status.enum';
-import { HttpException, HttpExceptionOptions } from './http.exception';
+import { HttpException } from './http.exception';
 
 /**
  * Defines an HTTP exception for *Gone* type errors.
  *
- * @see [Built-in HTTP exceptions](https://docs.nestjs.com/exception-filters#built-in-http-exceptions)
+ * @see [Base Exceptions](https://docs.nestjs.com/exception-filters#base-exceptions)
  *
  * @publicApi
  */
@@ -18,7 +18,7 @@ export class GoneException extends HttpException {
    * @usageNotes
    * The HTTP response status code will be 410.
    * - The `objectOrError` argument defines the JSON response body or the message string.
-   * - The `descriptionOrOptions` argument contains either a short description of the HTTP error or an options object used to provide an underlying error cause.
+   * - The `description` argument contains a short description of the HTTP error.
    *
    * By default, the JSON response body contains two properties:
    * - `statusCode`: this will be the value 410.
@@ -31,19 +31,12 @@ export class GoneException extends HttpException {
    * and return it as the JSON response body.
    *
    * @param objectOrError string or object describing the error condition.
-   * @param descriptionOrOptions either a short description of the HTTP error or an options object used to provide an underlying error cause
+   * @param description a short description of the HTTP error.
    */
-  constructor(
-    objectOrError?: string | object | any,
-    descriptionOrOptions: string | HttpExceptionOptions = 'Gone',
-  ) {
-    const { description, httpExceptionOptions } =
-      HttpException.extractDescriptionAndOptionsFrom(descriptionOrOptions);
-
+  constructor(objectOrError?: string | object | any, description = 'Gone') {
     super(
       HttpException.createBody(objectOrError, description, HttpStatus.GONE),
       HttpStatus.GONE,
-      httpExceptionOptions,
     );
   }
 }
diff --git a/packages/common/exceptions/http-version-not-supported.exception.ts b/packages/common/exceptions/http-version-not-supported.exception.ts
index 922d75ff0..41b340291 100644
--- a/packages/common/exceptions/http-version-not-supported.exception.ts
+++ b/packages/common/exceptions/http-version-not-supported.exception.ts
@@ -1,10 +1,10 @@
 import { HttpStatus } from '../enums/http-status.enum';
-import { HttpException, HttpExceptionOptions } from './http.exception';
+import { HttpException } from './http.exception';
 
 /**
  * Defines an HTTP exception for *Http Version Not Supported* type errors.
  *
- * @see [Built-in HTTP exceptions](https://docs.nestjs.com/exception-filters#built-in-http-exceptions)
+ * @see [Base Exceptions](https://docs.nestjs.com/exception-filters#base-exceptions)
  *
  * @publicApi
  */
@@ -18,7 +18,7 @@ export class HttpVersionNotSupportedException extends HttpException {
    * @usageNotes
    * The HTTP response status code will be 505.
    * - The `objectOrError` argument defines the JSON response body or the message string.
-   * - The `descriptionOrOptions` argument contains either a short description of the HTTP error or an options object used to provide an underlying error cause.
+   * - The `description` argument contains a short description of the HTTP error.
    *
    * By default, the JSON response body contains two properties:
    * - `statusCode`: this will be the value 505.
@@ -31,17 +31,12 @@ export class HttpVersionNotSupportedException extends HttpException {
    * and return it as the JSON response body.
    *
    * @param objectOrError string or object describing the error condition.
-   * @param descriptionOrOptions either a short description of the HTTP error or an options object used to provide an underlying error cause
+   * @param description a short description of the HTTP error.
    */
   constructor(
     objectOrError?: string | object | any,
-    descriptionOrOptions:
-      | string
-      | HttpExceptionOptions = 'HTTP Version Not Supported',
+    description = 'HTTP Version Not Supported',
   ) {
-    const { description, httpExceptionOptions } =
-      HttpException.extractDescriptionAndOptionsFrom(descriptionOrOptions);
-
     super(
       HttpException.createBody(
         objectOrError,
@@ -49,7 +44,6 @@ export class HttpVersionNotSupportedException extends HttpException {
         HttpStatus.HTTP_VERSION_NOT_SUPPORTED,
       ),
       HttpStatus.HTTP_VERSION_NOT_SUPPORTED,
-      httpExceptionOptions,
     );
   }
 }
diff --git a/packages/common/exceptions/http.exception.ts b/packages/common/exceptions/http.exception.ts
index ca07c5d6e..e907834c8 100644
--- a/packages/common/exceptions/http.exception.ts
+++ b/packages/common/exceptions/http.exception.ts
@@ -1,20 +1,10 @@
 import { isObject, isString } from '../utils/shared.utils';
 
-export interface HttpExceptionOptions {
-  cause?: Error;
-  description?: string;
-}
-
-export interface DescriptionAndOptions {
-  description?: string;
-  httpExceptionOptions?: HttpExceptionOptions;
-}
-
 /**
  * Defines the base Nest HTTP exception, which is handled by the default
  * Exceptions Handler.
  *
- * @see [Built-in HTTP exceptions](https://docs.nestjs.com/exception-filters#built-in-http-exceptions)
+ * @see [Base Exceptions](https://docs.nestjs.com/exception-filters#base-exceptions)
  *
  * @publicApi
  */
@@ -23,20 +13,12 @@ export class HttpException extends Error {
    * Instantiate a plain HTTP Exception.
    *
    * @example
-   * throw new HttpException()
-   * throw new HttpException('message', HttpStatus.BAD_REQUEST)
-   * throw new HttpException('custom message', HttpStatus.BAD_REQUEST, {
-   *  cause: new Error('Cause Error'),
-   * })
-   *
+   * `throw new HttpException()`
    *
    * @usageNotes
    * The constructor arguments define the response and the HTTP response status code.
-   * - The `response` argument (required) defines the JSON response body. alternatively, it can also be
-   *  an error object that is used to define an error [cause](https://nodejs.org/en/blog/release/v16.9.0/#error-cause).
+   * - The `response` argument (required) defines the JSON response body.
    * - The `status` argument (required) defines the HTTP Status Code.
-   * - The `options` argument (optional) defines additional error options. Currently, it supports the `cause` attribute,
-   *  and can be used as an alternative way to specify the error cause: `const error = new HttpException('description', 400, { cause: new Error() });`
    *
    * By default, the JSON response body contains two properties:
    * - `statusCode`: the Http Status Code.
@@ -49,35 +31,16 @@ export class HttpException extends Error {
    * The `status` argument is required, and should be a valid HTTP status code.
    * Best practice is to use the `HttpStatus` enum imported from `nestjs/common`.
    *
-   * @param response string, object describing the error condition or the error cause.
+   * @param response string or object describing the error condition.
    * @param status HTTP response status code.
-   * @param options An object used to add an error cause.
    */
   constructor(
     private readonly response: string | Record<string, any>,
     private readonly status: number,
-    private readonly options?: HttpExceptionOptions,
   ) {
     super();
     this.initMessage();
     this.initName();
-    this.initCause();
-  }
-
-  public cause: Error | undefined;
-
-  /**
-   * Configures error chaining support
-   *
-   * See:
-   * - https://nodejs.org/en/blog/release/v16.9.0/#error-cause
-   * - https://github.com/microsoft/TypeScript/issues/45167
-   */
-  public initCause(): void {
-    if (this.options?.cause) {
-      this.cause = this.options.cause;
-      return;
-    }
   }
 
   public initMessage() {
@@ -89,9 +52,9 @@ export class HttpException extends Error {
     ) {
       this.message = (this.response as Record<string, any>).message;
     } else if (this.constructor) {
-      this.message =
-        this.constructor.name.match(/[A-Z][a-z]+|[0-9]+/g)?.join(' ') ??
-        'Error';
+      this.message = this.constructor.name
+        .match(/[A-Z][a-z]+|[0-9]+/g)
+        .join(' ');
     }
   }
 
@@ -108,52 +71,15 @@ export class HttpException extends Error {
   }
 
   public static createBody(
-    objectOrErrorMessage: object | string,
+    objectOrError: object | string,
     description?: string,
     statusCode?: number,
   ) {
-    if (!objectOrErrorMessage) {
+    if (!objectOrError) {
       return { statusCode, message: description };
     }
-    return isObject(objectOrErrorMessage) &&
-      !Array.isArray(objectOrErrorMessage)
-      ? objectOrErrorMessage
-      : { statusCode, message: objectOrErrorMessage, error: description };
-  }
-
-  public static getDescriptionFrom(
-    descriptionOrOptions: string | HttpExceptionOptions,
-  ): string {
-    return isString(descriptionOrOptions)
-      ? descriptionOrOptions
-      : descriptionOrOptions?.description;
-  }
-
-  public static getHttpExceptionOptionsFrom(
-    descriptionOrOptions: string | HttpExceptionOptions,
-  ): HttpExceptionOptions {
-    return isString(descriptionOrOptions) ? {} : descriptionOrOptions;
-  }
-
-  /**
-   * Utility method used to extract the error description and httpExceptionOptions from the given argument.
-   * This is used by inheriting classes to correctly parse both options.
-   * @returns the error description and the httpExceptionOptions as an object.
-   */
-  public static extractDescriptionAndOptionsFrom(
-    descriptionOrOptions: string | HttpExceptionOptions,
-  ): DescriptionAndOptions {
-    const description = isString(descriptionOrOptions)
-      ? descriptionOrOptions
-      : descriptionOrOptions?.description;
-
-    const httpExceptionOptions = isString(descriptionOrOptions)
-      ? {}
-      : descriptionOrOptions;
-
-    return {
-      description,
-      httpExceptionOptions,
-    };
+    return isObject(objectOrError) && !Array.isArray(objectOrError)
+      ? objectOrError
+      : { statusCode, message: objectOrError, error: description };
   }
 }
diff --git a/packages/common/exceptions/im-a-teapot.exception.ts b/packages/common/exceptions/im-a-teapot.exception.ts
index 76c67861e..db640cd90 100644
--- a/packages/common/exceptions/im-a-teapot.exception.ts
+++ b/packages/common/exceptions/im-a-teapot.exception.ts
@@ -1,5 +1,5 @@
 import { HttpStatus } from '../enums/http-status.enum';
-import { HttpException, HttpExceptionOptions } from './http.exception';
+import { HttpException } from './http.exception';
 
 /**
  * Defines an HTTP exception for *ImATeapotException* type errors.
@@ -7,7 +7,7 @@ import { HttpException, HttpExceptionOptions } from './http.exception';
  * Any attempt to brew coffee with a teapot should result in the error code
  * "418 I'm a teapot". The resulting entity body MAY be short and stout.
  *
- * @see [Built-in HTTP exceptions](https://docs.nestjs.com/exception-filters#built-in-http-exceptions)
+ * @see [Base Exceptions](https://docs.nestjs.com/exception-filters#base-exceptions)
  *
  * @publicApi
  */
@@ -21,7 +21,7 @@ export class ImATeapotException extends HttpException {
    * @usageNotes
    * The HTTP response status code will be 418.
    * - The `objectOrError` argument defines the JSON response body or the message string.
-   * - The `descriptionOrOptions` argument contains either a short description of the HTTP error or an options object used to provide an underlying error cause.
+   * - The `description` argument contains a short description of the HTTP error.
    *
    * By default, the JSON response body contains two properties:
    * - `statusCode`: this will be the value 418.
@@ -34,15 +34,12 @@ export class ImATeapotException extends HttpException {
    * and return it as the JSON response body.
    *
    * @param objectOrError string or object describing the error condition.
-   * @param descriptionOrOptions either a short description of the HTTP error or an options object used to provide an underlying error cause
+   * @param description a short description of the HTTP error.
    */
   constructor(
     objectOrError?: string | object | any,
-    descriptionOrOptions: string | HttpExceptionOptions = `I'm a teapot`,
+    description = `I'm a teapot`,
   ) {
-    const { description, httpExceptionOptions } =
-      HttpException.extractDescriptionAndOptionsFrom(descriptionOrOptions);
-
     super(
       HttpException.createBody(
         objectOrError,
@@ -50,7 +47,6 @@ export class ImATeapotException extends HttpException {
         HttpStatus.I_AM_A_TEAPOT,
       ),
       HttpStatus.I_AM_A_TEAPOT,
-      httpExceptionOptions,
     );
   }
 }
diff --git a/packages/common/exceptions/internal-server-error.exception.ts b/packages/common/exceptions/internal-server-error.exception.ts
index c3393cf37..06a04d7d8 100644
--- a/packages/common/exceptions/internal-server-error.exception.ts
+++ b/packages/common/exceptions/internal-server-error.exception.ts
@@ -1,10 +1,10 @@
 import { HttpStatus } from '../enums/http-status.enum';
-import { HttpException, HttpExceptionOptions } from './http.exception';
+import { HttpException } from './http.exception';
 
 /**
  * Defines an HTTP exception for *Internal Server Error* type errors.
  *
- * @see [Built-in HTTP exceptions](https://docs.nestjs.com/exception-filters#built-in-http-exceptions)
+ * @see [Base Exceptions](https://docs.nestjs.com/exception-filters#base-exceptions)
  *
  * @publicApi
  */
@@ -18,7 +18,7 @@ export class InternalServerErrorException extends HttpException {
    * @usageNotes
    * The HTTP response status code will be 500.
    * - The `objectOrError` argument defines the JSON response body or the message string.
-   * - The `descriptionOrOptions` argument contains either a short description of the HTTP error or an options object used to provide an underlying error cause.
+   * - The `description` argument contains a short description of the HTTP error.
    *
    * By default, the JSON response body contains two properties:
    * - `statusCode`: this will be the value 500.
@@ -31,17 +31,12 @@ export class InternalServerErrorException extends HttpException {
    * and return it as the JSON response body.
    *
    * @param objectOrError string or object describing the error condition.
-   * @param descriptionOrOptions either a short description of the HTTP error or an options object used to provide an underlying error cause
+   * @param description a short description of the HTTP error.
    */
   constructor(
     objectOrError?: string | object | any,
-    descriptionOrOptions:
-      | string
-      | HttpExceptionOptions = 'Internal Server Error',
+    description = 'Internal Server Error',
   ) {
-    const { description, httpExceptionOptions } =
-      HttpException.extractDescriptionAndOptionsFrom(descriptionOrOptions);
-
     super(
       HttpException.createBody(
         objectOrError,
@@ -49,7 +44,6 @@ export class InternalServerErrorException extends HttpException {
         HttpStatus.INTERNAL_SERVER_ERROR,
       ),
       HttpStatus.INTERNAL_SERVER_ERROR,
-      httpExceptionOptions,
     );
   }
 }
diff --git a/packages/common/exceptions/method-not-allowed.exception.ts b/packages/common/exceptions/method-not-allowed.exception.ts
index 9cf0d8381..df7666b00 100644
--- a/packages/common/exceptions/method-not-allowed.exception.ts
+++ b/packages/common/exceptions/method-not-allowed.exception.ts
@@ -1,10 +1,10 @@
 import { HttpStatus } from '../enums/http-status.enum';
-import { HttpException, HttpExceptionOptions } from './http.exception';
+import { HttpException } from './http.exception';
 
 /**
  * Defines an HTTP exception for *Method Not Allowed* type errors.
  *
- * @see [Built-in HTTP exceptions](https://docs.nestjs.com/exception-filters#built-in-http-exceptions)
+ * @see [Base Exceptions](https://docs.nestjs.com/exception-filters#base-exceptions)
  *
  * @publicApi
  */
@@ -18,7 +18,7 @@ export class MethodNotAllowedException extends HttpException {
    * @usageNotes
    * The HTTP response status code will be 405.
    * - The `objectOrError` argument defines the JSON response body or the message string.
-   * - The `descriptionOrOptions` argument contains either a short description of the HTTP error or an options object used to provide an underlying error cause.
+   * - The `description` argument contains a short description of the HTTP error.
    *
    * By default, the JSON response body contains two properties:
    * - `statusCode`: this will be the value 405.
@@ -31,15 +31,12 @@ export class MethodNotAllowedException extends HttpException {
    * and return it as the JSON response body.
    *
    * @param objectOrError string or object describing the error condition.
-   * @param descriptionOrOptions either a short description of the HTTP error or an options object used to provide an underlying error cause
+   * @param description a short description of the HTTP error.
    */
   constructor(
     objectOrError?: string | object | any,
-    descriptionOrOptions: string | HttpExceptionOptions = 'Method Not Allowed',
+    description = 'Method Not Allowed',
   ) {
-    const { description, httpExceptionOptions } =
-      HttpException.extractDescriptionAndOptionsFrom(descriptionOrOptions);
-
     super(
       HttpException.createBody(
         objectOrError,
@@ -47,7 +44,6 @@ export class MethodNotAllowedException extends HttpException {
         HttpStatus.METHOD_NOT_ALLOWED,
       ),
       HttpStatus.METHOD_NOT_ALLOWED,
-      httpExceptionOptions,
     );
   }
 }
diff --git a/packages/common/exceptions/misdirected.exception.ts b/packages/common/exceptions/misdirected.exception.ts
index 547ab4431..11ae29bae 100644
--- a/packages/common/exceptions/misdirected.exception.ts
+++ b/packages/common/exceptions/misdirected.exception.ts
@@ -1,10 +1,10 @@
 import { HttpStatus } from '../enums/http-status.enum';
-import { HttpException, HttpExceptionOptions } from './http.exception';
+import { HttpException } from './http.exception';
 
 /**
  * Defines an HTTP exception for *Misdirected* type errors.
  *
- * @see [Built-in HTTP exceptions](https://docs.nestjs.com/exception-filters#built-in-http-exceptions)
+ * @see [Base Exceptions](https://docs.nestjs.com/exception-filters#base-exceptions)
  *
  * @publicApi
  */
@@ -18,7 +18,7 @@ export class MisdirectedException extends HttpException {
    * @usageNotes
    * The HTTP response status code will be 421.
    * - The `objectOrError` argument defines the JSON response body or the message string.
-   * - The `descriptionOrOptions` argument contains either a short description of the HTTP error or an options object used to provide an underlying error cause.
+   * - The `description` argument contains a short description of the HTTP error.
    *
    * By default, the JSON response body contains two properties:
    * - `statusCode`: this will be the value 421.
@@ -31,15 +31,12 @@ export class MisdirectedException extends HttpException {
    * and return it as the JSON response body.
    *
    * @param objectOrError string or object describing the error condition.
-   * @param descriptionOrOptions either a short description of the HTTP error or an options object used to provide an underlying error cause
+   * @param description a short description of the HTTP error.
    */
   constructor(
     objectOrError?: string | object | any,
-    descriptionOrOptions: string | HttpExceptionOptions = 'Misdirected',
+    description = 'Misdirected',
   ) {
-    const { description, httpExceptionOptions } =
-      HttpException.extractDescriptionAndOptionsFrom(descriptionOrOptions);
-
     super(
       HttpException.createBody(
         objectOrError,
@@ -47,7 +44,6 @@ export class MisdirectedException extends HttpException {
         HttpStatus.MISDIRECTED,
       ),
       HttpStatus.MISDIRECTED,
-      httpExceptionOptions,
     );
   }
 }
diff --git a/packages/common/exceptions/not-acceptable.exception.ts b/packages/common/exceptions/not-acceptable.exception.ts
index 548b2dd79..e836d3447 100644
--- a/packages/common/exceptions/not-acceptable.exception.ts
+++ b/packages/common/exceptions/not-acceptable.exception.ts
@@ -1,10 +1,10 @@
 import { HttpStatus } from '../enums/http-status.enum';
-import { HttpException, HttpExceptionOptions } from './http.exception';
+import { HttpException } from './http.exception';
 
 /**
  * Defines an HTTP exception for *Not Acceptable* type errors.
  *
- * @see [Built-in HTTP exceptions](https://docs.nestjs.com/exception-filters#built-in-http-exceptions)
+ * @see [Base Exceptions](https://docs.nestjs.com/exception-filters#base-exceptions)
  *
  * @publicApi
  */
@@ -18,7 +18,7 @@ export class NotAcceptableException extends HttpException {
    * @usageNotes
    * The HTTP response status code will be 406.
    * - The `objectOrError` argument defines the JSON response body or the message string.
-   * - The `descriptionOrOptions` argument contains either a short description of the HTTP error or an options object used to provide an underlying error cause.
+   * - The `description` argument contains a short description of the HTTP error.
    *
    * By default, the JSON response body contains two properties:
    * - `statusCode`: this will be the value 406.
@@ -31,15 +31,12 @@ export class NotAcceptableException extends HttpException {
    * and return it as the JSON response body.
    *
    * @param objectOrError string or object describing the error condition.
-   * @param descriptionOrOptions either a short description of the HTTP error or an options object used to provide an underlying error cause
+   * @param description a short description of the HTTP error.
    */
   constructor(
     objectOrError?: string | object | any,
-    descriptionOrOptions: string | HttpExceptionOptions = 'Not Acceptable',
+    description = 'Not Acceptable',
   ) {
-    const { description, httpExceptionOptions } =
-      HttpException.extractDescriptionAndOptionsFrom(descriptionOrOptions);
-
     super(
       HttpException.createBody(
         objectOrError,
@@ -47,7 +44,6 @@ export class NotAcceptableException extends HttpException {
         HttpStatus.NOT_ACCEPTABLE,
       ),
       HttpStatus.NOT_ACCEPTABLE,
-      httpExceptionOptions,
     );
   }
 }
diff --git a/packages/common/exceptions/not-found.exception.ts b/packages/common/exceptions/not-found.exception.ts
index b44a744e0..d8c38ca7f 100644
--- a/packages/common/exceptions/not-found.exception.ts
+++ b/packages/common/exceptions/not-found.exception.ts
@@ -1,10 +1,10 @@
 import { HttpStatus } from '../enums/http-status.enum';
-import { HttpException, HttpExceptionOptions } from './http.exception';
+import { HttpException } from './http.exception';
 
 /**
  * Defines an HTTP exception for *Not Found* type errors.
  *
- * @see [Built-in HTTP exceptions](https://docs.nestjs.com/exception-filters#built-in-http-exceptions)
+ * @see [Base Exceptions](https://docs.nestjs.com/exception-filters#base-exceptions)
  *
  * @publicApi
  */
@@ -18,7 +18,7 @@ export class NotFoundException extends HttpException {
    * @usageNotes
    * The HTTP response status code will be 404.
    * - The `objectOrError` argument defines the JSON response body or the message string.
-   * - The `descriptionOrOptions` argument contains either a short description of the HTTP error or an options object used to provide an underlying error cause.
+   * - The `description` argument contains a short description of the HTTP error.
    *
    * By default, the JSON response body contains two properties:
    * - `statusCode`: this will be the value 404.
@@ -31,15 +31,12 @@ export class NotFoundException extends HttpException {
    * and return it as the JSON response body.
    *
    * @param objectOrError string or object describing the error condition.
-   * @param descriptionOrOptions either a short description of the HTTP error or an options object used to provide an underlying error cause
+   * @param description a short description of the HTTP error.
    */
   constructor(
     objectOrError?: string | object | any,
-    descriptionOrOptions: string | HttpExceptionOptions = 'Not Found',
+    description = 'Not Found',
   ) {
-    const { description, httpExceptionOptions } =
-      HttpException.extractDescriptionAndOptionsFrom(descriptionOrOptions);
-
     super(
       HttpException.createBody(
         objectOrError,
@@ -47,7 +44,6 @@ export class NotFoundException extends HttpException {
         HttpStatus.NOT_FOUND,
       ),
       HttpStatus.NOT_FOUND,
-      httpExceptionOptions,
     );
   }
 }
diff --git a/packages/common/exceptions/not-implemented.exception.ts b/packages/common/exceptions/not-implemented.exception.ts
index 6f6912649..4702fe384 100644
--- a/packages/common/exceptions/not-implemented.exception.ts
+++ b/packages/common/exceptions/not-implemented.exception.ts
@@ -1,10 +1,10 @@
 import { HttpStatus } from '../enums/http-status.enum';
-import { HttpException, HttpExceptionOptions } from './http.exception';
+import { HttpException } from './http.exception';
 
 /**
  * Defines an HTTP exception for *Not Implemented* type errors.
  *
- * @see [Built-in HTTP exceptions](https://docs.nestjs.com/exception-filters#built-in-http-exceptions)
+ * @see [Base Exceptions](https://docs.nestjs.com/exception-filters#base-exceptions)
  *
  * @publicApi
  */
@@ -18,7 +18,7 @@ export class NotImplementedException extends HttpException {
    * @usageNotes
    * The HTTP response status code will be 501.
    * - The `objectOrError` argument defines the JSON response body or the message string.
-   * - The `descriptionOrOptions` argument contains either a short description of the HTTP error or an options object used to provide an underlying error cause.
+   * - The `description` argument contains a short description of the HTTP error.
    *
    * By default, the JSON response body contains two properties:
    * - `statusCode`: this will be the value 501.
@@ -30,16 +30,13 @@ export class NotImplementedException extends HttpException {
    * entire JSON response body, pass an object instead. Nest will serialize the object
    * and return it as the JSON response body.
    *
-   * @param descriptionOrOptions either a short description of the HTTP error or an options object used to provide an underlying error cause
+   * @param description string or object describing the error condition.
    * @param error a short description of the HTTP error.
    */
   constructor(
     objectOrError?: string | object | any,
-    descriptionOrOptions: string | HttpExceptionOptions = 'Not Implemented',
+    description = 'Not Implemented',
   ) {
-    const { description, httpExceptionOptions } =
-      HttpException.extractDescriptionAndOptionsFrom(descriptionOrOptions);
-
     super(
       HttpException.createBody(
         objectOrError,
@@ -47,7 +44,6 @@ export class NotImplementedException extends HttpException {
         HttpStatus.NOT_IMPLEMENTED,
       ),
       HttpStatus.NOT_IMPLEMENTED,
-      httpExceptionOptions,
     );
   }
 }
diff --git a/packages/common/exceptions/payload-too-large.exception.ts b/packages/common/exceptions/payload-too-large.exception.ts
index 73de7d1f2..968b94d3f 100644
--- a/packages/common/exceptions/payload-too-large.exception.ts
+++ b/packages/common/exceptions/payload-too-large.exception.ts
@@ -1,10 +1,10 @@
 import { HttpStatus } from '../enums/http-status.enum';
-import { HttpException, HttpExceptionOptions } from './http.exception';
+import { HttpException } from './http.exception';
 
 /**
  * Defines an HTTP exception for *Payload Too Large* type errors.
  *
- * @see [Built-in HTTP exceptions](https://docs.nestjs.com/exception-filters#built-in-http-exceptions)
+ * @see [Base Exceptions](https://docs.nestjs.com/exception-filters#base-exceptions)
  *
  * @publicApi
  */
@@ -18,7 +18,7 @@ export class PayloadTooLargeException extends HttpException {
    * @usageNotes
    * The HTTP response status code will be 413.
    * - The `objectOrError` argument defines the JSON response body or the message string.
-   * - The `descriptionOrOptions` argument contains either a short description of the HTTP error or an options object used to provide an underlying error cause.
+   * - The `description` argument contains a short description of the HTTP error.
    *
    * By default, the JSON response body contains two properties:
    * - `statusCode`: this will be the value 413.
@@ -31,15 +31,12 @@ export class PayloadTooLargeException extends HttpException {
    * and return it as the JSON response body.
    *
    * @param objectOrError string or object describing the error condition.
-   * @param descriptionOrOptions either a short description of the HTTP error or an options object used to provide an underlying error cause
+   * @param description a short description of the HTTP error.
    */
   constructor(
     objectOrError?: string | object | any,
-    descriptionOrOptions: string | HttpExceptionOptions = 'Payload Too Large',
+    description = 'Payload Too Large',
   ) {
-    const { description, httpExceptionOptions } =
-      HttpException.extractDescriptionAndOptionsFrom(descriptionOrOptions);
-
     super(
       HttpException.createBody(
         objectOrError,
@@ -47,7 +44,6 @@ export class PayloadTooLargeException extends HttpException {
         HttpStatus.PAYLOAD_TOO_LARGE,
       ),
       HttpStatus.PAYLOAD_TOO_LARGE,
-      httpExceptionOptions,
     );
   }
 }
diff --git a/packages/common/exceptions/precondition-failed.exception.ts b/packages/common/exceptions/precondition-failed.exception.ts
index d03da41d0..ca9c3a70d 100644
--- a/packages/common/exceptions/precondition-failed.exception.ts
+++ b/packages/common/exceptions/precondition-failed.exception.ts
@@ -1,10 +1,10 @@
 import { HttpStatus } from '../enums/http-status.enum';
-import { HttpException, HttpExceptionOptions } from './http.exception';
+import { HttpException } from './http.exception';
 
 /**
  * Defines an HTTP exception for *Precondition Failed* type errors.
  *
- * @see [Built-in HTTP exceptions](https://docs.nestjs.com/exception-filters#built-in-http-exceptions)
+ * @see [Base Exceptions](https://docs.nestjs.com/exception-filters#base-exceptions)
  *
  * @publicApi
  */
@@ -18,7 +18,7 @@ export class PreconditionFailedException extends HttpException {
    * @usageNotes
    * The HTTP response status code will be 412.
    * - The `objectOrError` argument defines the JSON response body or the message string.
-   * - The `descriptionOrOptions` argument contains either a short description of the HTTP error or an options object used to provide an underlying error cause.
+   * - The `description` argument contains a short description of the HTTP error.
    *
    * By default, the JSON response body contains two properties:
    * - `statusCode`: this will be the value 412.
@@ -31,15 +31,12 @@ export class PreconditionFailedException extends HttpException {
    * and return it as the JSON response body.
    *
    * @param objectOrError string or object describing the error condition.
-   * @param descriptionOrOptions either a short description of the HTTP error or an options object used to provide an underlying error cause
+   * @param description a short description of the HTTP error.
    */
   constructor(
     objectOrError?: string | object | any,
-    descriptionOrOptions: string | HttpExceptionOptions = 'Precondition Failed',
+    description = 'Precondition Failed',
   ) {
-    const { description, httpExceptionOptions } =
-      HttpException.extractDescriptionAndOptionsFrom(descriptionOrOptions);
-
     super(
       HttpException.createBody(
         objectOrError,
@@ -47,7 +44,6 @@ export class PreconditionFailedException extends HttpException {
         HttpStatus.PRECONDITION_FAILED,
       ),
       HttpStatus.PRECONDITION_FAILED,
-      httpExceptionOptions,
     );
   }
 }
diff --git a/packages/common/exceptions/request-timeout.exception.ts b/packages/common/exceptions/request-timeout.exception.ts
index d91c3cfd1..3bcd193ce 100644
--- a/packages/common/exceptions/request-timeout.exception.ts
+++ b/packages/common/exceptions/request-timeout.exception.ts
@@ -1,10 +1,10 @@
 import { HttpStatus } from '../enums/http-status.enum';
-import { HttpException, HttpExceptionOptions } from './http.exception';
+import { HttpException } from './http.exception';
 
 /**
  * Defines an HTTP exception for *Request Timeout* type errors.
  *
- * @see [Built-in HTTP exceptions](https://docs.nestjs.com/exception-filters#built-in-http-exceptions)
+ * @see [Base Exceptions](https://docs.nestjs.com/exception-filters#base-exceptions)
  *
  * @publicApi
  */
@@ -18,7 +18,7 @@ export class RequestTimeoutException extends HttpException {
    * @usageNotes
    * The HTTP response status code will be 408.
    * - The `objectOrError` argument defines the JSON response body or the message string.
-   * - The `descriptionOrOptions` argument contains either a short description of the HTTP error or an options object used to provide an underlying error cause.
+   * - The `description` argument contains a short description of the HTTP error.
    *
    * By default, the JSON response body contains two properties:
    * - `statusCode`: this will be the value 408.
@@ -31,15 +31,12 @@ export class RequestTimeoutException extends HttpException {
    * and return it as the JSON response body.
    *
    * @param objectOrError string or object describing the error condition.
-   * @param descriptionOrOptions either a short description of the HTTP error or an options object used to provide an underlying error cause
+   * @param description a short description of the HTTP error.
    */
   constructor(
     objectOrError?: string | object | any,
-    descriptionOrOptions: string | HttpExceptionOptions = 'Request Timeout',
+    description = 'Request Timeout',
   ) {
-    const { description, httpExceptionOptions } =
-      HttpException.extractDescriptionAndOptionsFrom(descriptionOrOptions);
-
     super(
       HttpException.createBody(
         objectOrError,
@@ -47,7 +44,6 @@ export class RequestTimeoutException extends HttpException {
         HttpStatus.REQUEST_TIMEOUT,
       ),
       HttpStatus.REQUEST_TIMEOUT,
-      httpExceptionOptions,
     );
   }
 }
diff --git a/packages/common/exceptions/service-unavailable.exception.ts b/packages/common/exceptions/service-unavailable.exception.ts
index 2d1c6bd03..f0270b7e6 100644
--- a/packages/common/exceptions/service-unavailable.exception.ts
+++ b/packages/common/exceptions/service-unavailable.exception.ts
@@ -1,10 +1,10 @@
 import { HttpStatus } from '../enums/http-status.enum';
-import { HttpException, HttpExceptionOptions } from './http.exception';
+import { HttpException } from './http.exception';
 
 /**
  * Defines an HTTP exception for *Service Unavailable* type errors.
  *
- * @see [Built-in HTTP exceptions](https://docs.nestjs.com/exception-filters#built-in-http-exceptions)
+ * @see [Base Exceptions](https://docs.nestjs.com/exception-filters#base-exceptions)
  *
  * @publicApi
  */
@@ -18,7 +18,7 @@ export class ServiceUnavailableException extends HttpException {
    * @usageNotes
    * The HTTP response status code will be 503.
    * - The `objectOrError` argument defines the JSON response body or the message string.
-   * - The `descriptionOrOptions` argument contains either a short description of the HTTP error or an options object used to provide an underlying error cause.
+   * - The `description` argument contains a short description of the HTTP error.
    *
    * By default, the JSON response body contains two properties:
    * - `statusCode`: this will be the value 503.
@@ -31,15 +31,12 @@ export class ServiceUnavailableException extends HttpException {
    * and return it as the JSON response body.
    *
    * @param objectOrError string or object describing the error condition.
-   * @param descriptionOrOptions either a short description of the HTTP error or an options object used to provide an underlying error cause
+   * @param description a short description of the HTTP error.
    */
   constructor(
     objectOrError?: string | object | any,
-    descriptionOrOptions: string | HttpExceptionOptions = 'Service Unavailable',
+    description = 'Service Unavailable',
   ) {
-    const { description, httpExceptionOptions } =
-      HttpException.extractDescriptionAndOptionsFrom(descriptionOrOptions);
-
     super(
       HttpException.createBody(
         objectOrError,
@@ -47,7 +44,6 @@ export class ServiceUnavailableException extends HttpException {
         HttpStatus.SERVICE_UNAVAILABLE,
       ),
       HttpStatus.SERVICE_UNAVAILABLE,
-      httpExceptionOptions,
     );
   }
 }
diff --git a/packages/common/exceptions/unauthorized.exception.ts b/packages/common/exceptions/unauthorized.exception.ts
index b85fa847e..7d9379816 100644
--- a/packages/common/exceptions/unauthorized.exception.ts
+++ b/packages/common/exceptions/unauthorized.exception.ts
@@ -1,10 +1,10 @@
 import { HttpStatus } from '../enums/http-status.enum';
-import { HttpException, HttpExceptionOptions } from './http.exception';
+import { HttpException } from './http.exception';
 
 /**
  * Defines an HTTP exception for *Unauthorized* type errors.
  *
- * @see [Built-in HTTP exceptions](https://docs.nestjs.com/exception-filters#built-in-http-exceptions)
+ * @see [Base Exceptions](https://docs.nestjs.com/exception-filters#base-exceptions)
  *
  * @publicApi
  */
@@ -18,7 +18,7 @@ export class UnauthorizedException extends HttpException {
    * @usageNotes
    * The HTTP response status code will be 401.
    * - The `objectOrError` argument defines the JSON response body or the message string.
-   * - The `descriptionOrOptions` argument contains either a short description of the HTTP error or an options object used to provide an underlying error cause.
+   * - The `description` argument contains a short description of the HTTP error.
    *
    * By default, the JSON response body contains two properties:
    * - `statusCode`: this will be the value 401.
@@ -31,15 +31,12 @@ export class UnauthorizedException extends HttpException {
    * and return it as the JSON response body.
    *
    * @param objectOrError string or object describing the error condition.
-   * @param descriptionOrOptions either a short description of the HTTP error or an options object used to provide an underlying error cause
+   * @param description a short description of the HTTP error.
    */
   constructor(
     objectOrError?: string | object | any,
-    descriptionOrOptions: string | HttpExceptionOptions = 'Unauthorized',
+    description = 'Unauthorized',
   ) {
-    const { description, httpExceptionOptions } =
-      HttpException.extractDescriptionAndOptionsFrom(descriptionOrOptions);
-
     super(
       HttpException.createBody(
         objectOrError,
@@ -47,7 +44,6 @@ export class UnauthorizedException extends HttpException {
         HttpStatus.UNAUTHORIZED,
       ),
       HttpStatus.UNAUTHORIZED,
-      httpExceptionOptions,
     );
   }
 }
diff --git a/packages/common/exceptions/unprocessable-entity.exception.ts b/packages/common/exceptions/unprocessable-entity.exception.ts
index a4e012cac..f76c8d24e 100644
--- a/packages/common/exceptions/unprocessable-entity.exception.ts
+++ b/packages/common/exceptions/unprocessable-entity.exception.ts
@@ -1,10 +1,10 @@
 import { HttpStatus } from '../enums/http-status.enum';
-import { HttpException, HttpExceptionOptions } from './http.exception';
+import { HttpException } from './http.exception';
 
 /**
  * Defines an HTTP exception for *Unprocessable Entity* type errors.
  *
- * @see [Built-in HTTP exceptions](https://docs.nestjs.com/exception-filters#built-in-http-exceptions)
+ * @see [Base Exceptions](https://docs.nestjs.com/exception-filters#base-exceptions)
  *
  * @publicApi
  */
@@ -18,7 +18,7 @@ export class UnprocessableEntityException extends HttpException {
    * @usageNotes
    * The HTTP response status code will be 422.
    * - The `objectOrError` argument defines the JSON response body or the message string.
-   * - The `descriptionOrOptions` argument contains either a short description of the HTTP error or an options object used to provide an underlying error cause.
+   * - The `description` argument contains a short description of the HTTP error.
    *
    * By default, the JSON response body contains two properties:
    * - `statusCode`: this will be the value 422.
@@ -31,17 +31,12 @@ export class UnprocessableEntityException extends HttpException {
    * and return it as the JSON response body.
    *
    * @param objectOrError string or object describing the error condition.
-   * @param descriptionOrOptions either a short description of the HTTP error or an options object used to provide an underlying error cause
+   * @param description a short description of the HTTP error.
    */
   constructor(
     objectOrError?: string | object | any,
-    descriptionOrOptions:
-      | string
-      | HttpExceptionOptions = 'Unprocessable Entity',
+    description = 'Unprocessable Entity',
   ) {
-    const { description, httpExceptionOptions } =
-      HttpException.extractDescriptionAndOptionsFrom(descriptionOrOptions);
-
     super(
       HttpException.createBody(
         objectOrError,
@@ -49,7 +44,6 @@ export class UnprocessableEntityException extends HttpException {
         HttpStatus.UNPROCESSABLE_ENTITY,
       ),
       HttpStatus.UNPROCESSABLE_ENTITY,
-      httpExceptionOptions,
     );
   }
 }
diff --git a/packages/common/exceptions/unsupported-media-type.exception.ts b/packages/common/exceptions/unsupported-media-type.exception.ts
index fb8a0e1df..49e4ab14f 100644
--- a/packages/common/exceptions/unsupported-media-type.exception.ts
+++ b/packages/common/exceptions/unsupported-media-type.exception.ts
@@ -1,10 +1,10 @@
 import { HttpStatus } from '../enums/http-status.enum';
-import { HttpException, HttpExceptionOptions } from './http.exception';
+import { HttpException } from './http.exception';
 
 /**
  * Defines an HTTP exception for *Unsupported Media Type* type errors.
  *
- * @see [Built-in HTTP exceptions](https://docs.nestjs.com/exception-filters#built-in-http-exceptions)
+ * @see [Base Exceptions](https://docs.nestjs.com/exception-filters#base-exceptions)
  *
  * @publicApi
  */
@@ -18,7 +18,7 @@ export class UnsupportedMediaTypeException extends HttpException {
    * @usageNotes
    * The HTTP response status code will be 415.
    * - The `objectOrError` argument defines the JSON response body or the message string.
-   * - The `descriptionOrOptions` argument contains either a short description of the HTTP error or an options object used to provide an underlying error cause.
+   * - The `description` argument contains a short description of the HTTP error.
    *
    * By default, the JSON response body contains two properties:
    * - `statusCode`: this will be the value 415.
@@ -31,17 +31,12 @@ export class UnsupportedMediaTypeException extends HttpException {
    * and return it as the JSON response body.
    *
    * @param objectOrError string or object describing the error condition.
-   * @param descriptionOrOptions either a short description of the HTTP error or an options object used to provide an underlying error cause
+   * @param description a short description of the HTTP error.
    */
   constructor(
     objectOrError?: string | object | any,
-    descriptionOrOptions:
-      | string
-      | HttpExceptionOptions = 'Unsupported Media Type',
+    description = 'Unsupported Media Type',
   ) {
-    const { description, httpExceptionOptions } =
-      HttpException.extractDescriptionAndOptionsFrom(descriptionOrOptions);
-
     super(
       HttpException.createBody(
         objectOrError,
@@ -49,7 +44,6 @@ export class UnsupportedMediaTypeException extends HttpException {
         HttpStatus.UNSUPPORTED_MEDIA_TYPE,
       ),
       HttpStatus.UNSUPPORTED_MEDIA_TYPE,
-      httpExceptionOptions,
     );
   }
 }
diff --git a/packages/common/file-stream/interfaces/index.ts b/packages/common/file-stream/interfaces/index.ts
deleted file mode 100644
index 9be413e21..000000000
--- a/packages/common/file-stream/interfaces/index.ts
+++ /dev/null
@@ -1,2 +0,0 @@
-export * from './streamable-options.interface';
-export * from './streamable-handler-response.interface';
diff --git a/packages/common/file-stream/interfaces/streamable-handler-response.interface.ts b/packages/common/file-stream/interfaces/streamable-handler-response.interface.ts
deleted file mode 100644
index c1c77a922..000000000
--- a/packages/common/file-stream/interfaces/streamable-handler-response.interface.ts
+++ /dev/null
@@ -1,12 +0,0 @@
-export interface StreamableHandlerResponse {
-  /** `true` if the connection is destroyed, `false` otherwise. */
-  destroyed: boolean;
-  /** `true` if headers were sent, `false` otherwise. */
-  headersSent: boolean;
-  /** The status code that will be sent to the client when the headers get flushed. */
-  statusCode: number;
-  /** Sends the HTTP response. */
-  send: (body: string) => void;
-  /** Signals to the server that all of the response headers and body have been sent. */
-  end: () => void;
-}
diff --git a/packages/common/file-stream/streamable-file.ts b/packages/common/file-stream/streamable-file.ts
index 971741d5a..305ee624b 100644
--- a/packages/common/file-stream/streamable-file.ts
+++ b/packages/common/file-stream/streamable-file.ts
@@ -1,45 +1,23 @@
 import { Readable } from 'stream';
-import { types } from 'util';
-import { HttpStatus } from '../enums';
-import { isFunction } from '../utils/shared.utils';
-import { StreamableFileOptions, StreamableHandlerResponse } from './interfaces';
+import { StreamableFileOptions } from './streamable-options.interface';
 
-/**
- * @see [Streaming files](https://docs.nestjs.com/techniques/streaming-files)
- *
- * @publicApi
- */
 export class StreamableFile {
   private readonly stream: Readable;
 
-  protected handleError: (
-    err: Error,
-    response: StreamableHandlerResponse,
-  ) => void = (err: Error, res) => {
-    if (res.destroyed) {
-      return;
-    }
-    if (res.headersSent) {
-      res.end();
-      return;
-    }
-
-    res.statusCode = HttpStatus.BAD_REQUEST;
-    res.send(err.message);
-  };
-
-  constructor(buffer: Uint8Array, options?: StreamableFileOptions);
+  constructor(buffer: Buffer, options?: StreamableFileOptions);
   constructor(readable: Readable, options?: StreamableFileOptions);
   constructor(
-    bufferOrReadStream: Uint8Array | Readable,
+    bufferOrReadStream: Buffer | Readable,
     readonly options: StreamableFileOptions = {},
   ) {
-    if (types.isUint8Array(bufferOrReadStream)) {
+    if (Buffer.isBuffer(bufferOrReadStream)) {
       this.stream = new Readable();
       this.stream.push(bufferOrReadStream);
       this.stream.push(null);
-      this.options.length ??= bufferOrReadStream.length;
-    } else if (bufferOrReadStream.pipe && isFunction(bufferOrReadStream.pipe)) {
+    } else if (
+      bufferOrReadStream.pipe &&
+      typeof bufferOrReadStream.pipe === 'function'
+    ) {
       this.stream = bufferOrReadStream;
     }
   }
@@ -49,29 +27,8 @@ export class StreamableFile {
   }
 
   getHeaders() {
-    const {
-      type = 'application/octet-stream',
-      disposition = undefined,
-      length = undefined,
-    } = this.options;
-    return {
-      type,
-      disposition,
-      length,
-    };
-  }
-
-  get errorHandler(): (
-    err: Error,
-    response: StreamableHandlerResponse,
-  ) => void {
-    return this.handleError;
-  }
-
-  setErrorHandler(
-    handler: (err: Error, response: StreamableHandlerResponse) => void,
-  ) {
-    this.handleError = handler;
-    return this;
+    const { type = 'application/octet-stream', disposition = null } =
+      this.options;
+    return { type, disposition };
   }
 }
diff --git a/packages/common/file-stream/streamable-options.interface.ts b/packages/common/file-stream/streamable-options.interface.ts
new file mode 100644
index 000000000..4b7bbee4e
--- /dev/null
+++ b/packages/common/file-stream/streamable-options.interface.ts
@@ -0,0 +1,4 @@
+export interface StreamableFileOptions {
+  type?: string;
+  disposition?: string;
+}
\ No newline at end of file
diff --git a/packages/common/http/http.constants.ts b/packages/common/http/http.constants.ts
new file mode 100644
index 000000000..21f6d8499
--- /dev/null
+++ b/packages/common/http/http.constants.ts
@@ -0,0 +1,3 @@
+export const AXIOS_INSTANCE_TOKEN = 'AXIOS_INSTANCE_TOKEN';
+export const HTTP_MODULE_ID = 'HTTP_MODULE_ID';
+export const HTTP_MODULE_OPTIONS = 'HTTP_MODULE_OPTIONS';
diff --git a/packages/common/http/http.module.ts b/packages/common/http/http.module.ts
new file mode 100644
index 000000000..cc0367673
--- /dev/null
+++ b/packages/common/http/http.module.ts
@@ -0,0 +1,99 @@
+import Axios from 'axios';
+import { Module } from '../decorators/modules/module.decorator';
+import { DynamicModule, Provider } from '../interfaces';
+import { randomStringGenerator } from '../utils/random-string-generator.util';
+import {
+  AXIOS_INSTANCE_TOKEN,
+  HTTP_MODULE_ID,
+  HTTP_MODULE_OPTIONS,
+} from './http.constants';
+import { HttpService } from './http.service';
+import {
+  HttpModuleAsyncOptions,
+  HttpModuleOptions,
+  HttpModuleOptionsFactory,
+} from './interfaces';
+
+/**
+ * @deprecated "HttpModule" (from the "@nestjs/common" package) is deprecated and will be removed in the next major release. Please, use the "@nestjs/axios" package instead.
+ */
+@Module({
+  providers: [
+    HttpService,
+    {
+      provide: AXIOS_INSTANCE_TOKEN,
+      useValue: Axios,
+    },
+  ],
+  exports: [HttpService],
+})
+export class HttpModule {
+  static register(config: HttpModuleOptions): DynamicModule {
+    return {
+      module: HttpModule,
+      providers: [
+        {
+          provide: AXIOS_INSTANCE_TOKEN,
+          useValue: Axios.create(config),
+        },
+        {
+          provide: HTTP_MODULE_ID,
+          useValue: randomStringGenerator(),
+        },
+      ],
+    };
+  }
+
+  static registerAsync(options: HttpModuleAsyncOptions): DynamicModule {
+    return {
+      module: HttpModule,
+      imports: options.imports,
+      providers: [
+        ...this.createAsyncProviders(options),
+        {
+          provide: AXIOS_INSTANCE_TOKEN,
+          useFactory: (config: HttpModuleOptions) => Axios.create(config),
+          inject: [HTTP_MODULE_OPTIONS],
+        },
+        {
+          provide: HTTP_MODULE_ID,
+          useValue: randomStringGenerator(),
+        },
+        ...(options.extraProviders || []),
+      ],
+    };
+  }
+
+  private static createAsyncProviders(
+    options: HttpModuleAsyncOptions,
+  ): Provider[] {
+    if (options.useExisting || options.useFactory) {
+      return [this.createAsyncOptionsProvider(options)];
+    }
+    return [
+      this.createAsyncOptionsProvider(options),
+      {
+        provide: options.useClass,
+        useClass: options.useClass,
+      },
+    ];
+  }
+
+  private static createAsyncOptionsProvider(
+    options: HttpModuleAsyncOptions,
+  ): Provider {
+    if (options.useFactory) {
+      return {
+        provide: HTTP_MODULE_OPTIONS,
+        useFactory: options.useFactory,
+        inject: options.inject || [],
+      };
+    }
+    return {
+      provide: HTTP_MODULE_OPTIONS,
+      useFactory: async (optionsFactory: HttpModuleOptionsFactory) =>
+        optionsFactory.createHttpOptions(),
+      inject: [options.useExisting || options.useClass],
+    };
+  }
+}
diff --git a/packages/common/http/http.service.ts b/packages/common/http/http.service.ts
new file mode 100644
index 000000000..7c6e2ded2
--- /dev/null
+++ b/packages/common/http/http.service.ts
@@ -0,0 +1,113 @@
+import Axios, {
+  AxiosInstance,
+  AxiosPromise,
+  AxiosRequestConfig,
+  AxiosResponse,
+  CancelTokenSource,
+} from 'axios';
+import { Observable } from 'rxjs';
+import { Inject } from '../decorators';
+import { Logger } from '../services';
+import { AXIOS_INSTANCE_TOKEN } from './http.constants';
+
+/**
+ * @deprecated "HttpModule" (from the "@nestjs/common" package) is deprecated and will be removed in the next major release. Please, use the "@nestjs/axios" package instead.
+ */
+export class HttpService {
+  private readonly logger = new Logger(HttpService.name);
+
+  constructor(
+    @Inject(AXIOS_INSTANCE_TOKEN)
+    private readonly instance: AxiosInstance = Axios,
+  ) {
+    this.logger.warn(
+      'DEPRECATED! "HttpModule" (from the "@nestjs/common" package) is deprecated and will be removed in the next major release. Please, use the "@nestjs/axios" package instead.',
+    );
+  }
+
+  request<T = any>(config: AxiosRequestConfig): Observable<AxiosResponse<T>> {
+    return this.makeObservable<T>(this.instance.request, config);
+  }
+
+  get<T = any>(
+    url: string,
+    config?: AxiosRequestConfig,
+  ): Observable<AxiosResponse<T>> {
+    return this.makeObservable<T>(this.instance.get, url, config);
+  }
+
+  delete<T = any>(
+    url: string,
+    config?: AxiosRequestConfig,
+  ): Observable<AxiosResponse<T>> {
+    return this.makeObservable<T>(this.instance.delete, url, config);
+  }
+
+  head<T = any>(
+    url: string,
+    config?: AxiosRequestConfig,
+  ): Observable<AxiosResponse<T>> {
+    return this.makeObservable<T>(this.instance.head, url, config);
+  }
+
+  post<T = any>(
+    url: string,
+    data?: any,
+    config?: AxiosRequestConfig,
+  ): Observable<AxiosResponse<T>> {
+    return this.makeObservable<T>(this.instance.post, url, data, config);
+  }
+
+  put<T = any>(
+    url: string,
+    data?: any,
+    config?: AxiosRequestConfig,
+  ): Observable<AxiosResponse<T>> {
+    return this.makeObservable<T>(this.instance.put, url, data, config);
+  }
+
+  patch<T = any>(
+    url: string,
+    data?: any,
+    config?: AxiosRequestConfig,
+  ): Observable<AxiosResponse<T>> {
+    return this.makeObservable<T>(this.instance.patch, url, data, config);
+  }
+
+  get axiosRef(): AxiosInstance {
+    return this.instance;
+  }
+
+  private makeObservable<T>(
+    axios: (...args: any[]) => AxiosPromise<T>,
+    ...args: any[]
+  ) {
+    return new Observable<AxiosResponse<T>>(subscriber => {
+      const config: AxiosRequestConfig = { ...(args[args.length - 1] || {}) };
+
+      let cancelSource: CancelTokenSource;
+      if (!config.cancelToken) {
+        cancelSource = Axios.CancelToken.source();
+        config.cancelToken = cancelSource.token;
+      }
+
+      axios(...args)
+        .then(res => {
+          subscriber.next(res);
+          subscriber.complete();
+        })
+        .catch(err => {
+          subscriber.error(err);
+        });
+      return () => {
+        if (config.responseType === 'stream') {
+          return;
+        }
+
+        if (cancelSource) {
+          cancelSource.cancel();
+        }
+      };
+    });
+  }
+}
diff --git a/packages/common/http/index.ts b/packages/common/http/index.ts
new file mode 100644
index 000000000..2e7a1fead
--- /dev/null
+++ b/packages/common/http/index.ts
@@ -0,0 +1,3 @@
+export * from './http.module';
+export * from './http.service';
+export * from './interfaces';
diff --git a/packages/common/http/interfaces/http-module.interface.ts b/packages/common/http/interfaces/http-module.interface.ts
new file mode 100644
index 000000000..794f9385c
--- /dev/null
+++ b/packages/common/http/interfaces/http-module.interface.ts
@@ -0,0 +1,19 @@
+import { AxiosRequestConfig } from 'axios';
+import { ModuleMetadata, Provider, Type } from '../../interfaces';
+
+export type HttpModuleOptions = AxiosRequestConfig;
+
+export interface HttpModuleOptionsFactory {
+  createHttpOptions(): Promise<HttpModuleOptions> | HttpModuleOptions;
+}
+
+export interface HttpModuleAsyncOptions
+  extends Pick<ModuleMetadata, 'imports'> {
+  useExisting?: Type<HttpModuleOptionsFactory>;
+  useClass?: Type<HttpModuleOptionsFactory>;
+  useFactory?: (
+    ...args: any[]
+  ) => Promise<HttpModuleOptions> | HttpModuleOptions;
+  inject?: any[];
+  extraProviders?: Provider[];
+}
diff --git a/packages/common/http/interfaces/index.ts b/packages/common/http/interfaces/index.ts
new file mode 100644
index 000000000..692e7247e
--- /dev/null
+++ b/packages/common/http/interfaces/index.ts
@@ -0,0 +1 @@
+export * from './http-module.interface';
diff --git a/packages/common/index.ts b/packages/common/index.ts
index bfeb90f80..6a6107762 100644
--- a/packages/common/index.ts
+++ b/packages/common/index.ts
@@ -1,15 +1,17 @@
 /*
  * Nest @common
- * Copyright(c) 2017 - 2023 Kamil Mysliwiec
+ * Copyright(c) 2017 - 2021 Kamil Mysliwiec
  * https://nestjs.com
  * MIT Licensed
  */
 import 'reflect-metadata';
 
+export * from './cache';
 export * from './decorators';
 export * from './enums';
 export * from './exceptions';
 export * from './file-stream';
+export * from './http';
 export {
   Abstract,
   ArgumentMetadata,
@@ -29,7 +31,6 @@ export {
   INestApplication,
   INestApplicationContext,
   INestMicroservice,
-  InjectionToken,
   IntrospectionResult,
   MessageEvent,
   MiddlewareConsumer,
@@ -43,11 +44,9 @@ export {
   OnApplicationShutdown,
   OnModuleDestroy,
   OnModuleInit,
-  OptionalFactoryDependency,
   Paramtype,
   PipeTransform,
   Provider,
-  RawBodyRequest,
   RpcExceptionFilter,
   Scope,
   ScopeOptions,
@@ -60,7 +59,6 @@ export {
   WsExceptionFilter,
   WsMessageHandler,
 } from './interfaces';
-export * from './module-utils';
 export * from './pipes';
 export * from './serializer';
 export * from './services';
diff --git a/packages/common/interfaces/features/custom-route-param-factory.interface.ts b/packages/common/interfaces/features/custom-route-param-factory.interface.ts
index e022b6669..3a6afd910 100644
--- a/packages/common/interfaces/features/custom-route-param-factory.interface.ts
+++ b/packages/common/interfaces/features/custom-route-param-factory.interface.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export type CustomParamFactory<TData = any, TInput = any, TOutput = any> = (
   data: TData,
   input: TInput,
diff --git a/packages/common/interfaces/features/paramtype.interface.ts b/packages/common/interfaces/features/paramtype.interface.ts
index a63184f8c..d2c299dbc 100644
--- a/packages/common/interfaces/features/paramtype.interface.ts
+++ b/packages/common/interfaces/features/paramtype.interface.ts
@@ -1,4 +1 @@
-/**
- * @publicApi
- */
 export type Paramtype = 'body' | 'query' | 'param' | 'custom';
diff --git a/packages/common/interfaces/http/http-exception-body.interface.ts b/packages/common/interfaces/http/http-exception-body.interface.ts
deleted file mode 100644
index e0b923e5e..000000000
--- a/packages/common/interfaces/http/http-exception-body.interface.ts
+++ /dev/null
@@ -1,7 +0,0 @@
-export type HttpExceptionBodyMessage = string | string[];
-
-export interface HttpExceptionBody {
-  message: HttpExceptionBodyMessage;
-  error?: string;
-  statusCode: number;
-}
diff --git a/packages/common/interfaces/http/http-server.interface.ts b/packages/common/interfaces/http/http-server.interface.ts
index 8bf7e49a9..b85595c41 100644
--- a/packages/common/interfaces/http/http-server.interface.ts
+++ b/packages/common/interfaces/http/http-server.interface.ts
@@ -18,11 +18,7 @@ export type RequestHandler<TRequest = any, TResponse = any> = (
   next?: Function,
 ) => any;
 
-export interface HttpServer<
-  TRequest = any,
-  TResponse = any,
-  ServerInstance = any,
-> {
+export interface HttpServer<TRequest = any, TResponse = any> {
   use(
     handler:
       | RequestHandler<TRequest, TResponse>
@@ -34,7 +30,6 @@ export interface HttpServer<
       | RequestHandler<TRequest, TResponse>
       | ErrorHandler<TRequest, TResponse>,
   ): any;
-  useBodyParser?(...args: any[]): any;
   get(handler: RequestHandler<TRequest, TResponse>): any;
   get(path: string, handler: RequestHandler<TRequest, TResponse>): any;
   post(handler: RequestHandler<TRequest, TResponse>): any;
@@ -55,10 +50,8 @@ export interface HttpServer<
   listen(port: number | string, hostname: string, callback?: () => void): any;
   reply(response: any, body: any, statusCode?: number): any;
   status(response: any, statusCode: number): any;
-  end(response: any, message?: string): any;
   render(response: any, view: string, options: any): any;
   redirect(response: any, statusCode: number, url: string): any;
-  isHeadersSent(response: any): boolean;
   setHeader(response: any, name: string, value: string): any;
   setErrorHandler?(handler: Function, prefix?: string): any;
   setNotFoundHandler?(handler: Function, prefix?: string): any;
@@ -73,17 +66,21 @@ export interface HttpServer<
   getRequestHostname?(request: TRequest): string;
   getRequestMethod?(request: TRequest): string;
   getRequestUrl?(request: TRequest): string;
-  getInstance(): ServerInstance;
-  registerParserMiddleware(...args: any[]): any;
+  getInstance(): any;
+  registerParserMiddleware(): any;
   enableCors(options: CorsOptions | CorsOptionsDelegate<TRequest>): any;
   getHttpServer(): any;
   initHttpServer(options: NestApplicationOptions): void;
   close(): any;
   getType(): string;
   init?(): Promise<void>;
-  applyVersionFilter(
+  applyVersionFilter?(
     handler: Function,
     version: VersionValue,
     versioningOptions: VersioningOptions,
-  ): (req: TRequest, res: TResponse, next: () => void) => Function;
+  ): <TRequest extends Record<string, any> = any, TResponse = any>(
+    req: TRequest,
+    res: TResponse,
+    next: () => void,
+  ) => any;
 }
diff --git a/packages/common/interfaces/http/index.ts b/packages/common/interfaces/http/index.ts
index 8c9eed173..f57d218dd 100644
--- a/packages/common/interfaces/http/index.ts
+++ b/packages/common/interfaces/http/index.ts
@@ -1,3 +1,2 @@
 export * from './http-server.interface';
 export * from './message-event.interface';
-export * from './raw-body-request.interface';
diff --git a/packages/common/interfaces/http/raw-body-request.interface.ts b/packages/common/interfaces/http/raw-body-request.interface.ts
deleted file mode 100644
index b87229083..000000000
--- a/packages/common/interfaces/http/raw-body-request.interface.ts
+++ /dev/null
@@ -1,4 +0,0 @@
-/**
- * @publicApi
- */
-export type RawBodyRequest<T> = T & { rawBody?: Buffer };
diff --git a/packages/common/interfaces/microservices/nest-hybrid-application-options.interface.ts b/packages/common/interfaces/microservices/nest-hybrid-application-options.interface.ts
index 5389cf5d1..bc27552c5 100644
--- a/packages/common/interfaces/microservices/nest-hybrid-application-options.interface.ts
+++ b/packages/common/interfaces/microservices/nest-hybrid-application-options.interface.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export interface NestHybridApplicationOptions {
   inheritAppConfig?: boolean;
 }
diff --git a/packages/common/interfaces/microservices/nest-microservice-options.interface.ts b/packages/common/interfaces/microservices/nest-microservice-options.interface.ts
index 34f32c9f5..04057a09d 100644
--- a/packages/common/interfaces/microservices/nest-microservice-options.interface.ts
+++ b/packages/common/interfaces/microservices/nest-microservice-options.interface.ts
@@ -1,6 +1,3 @@
 import { NestApplicationContextOptions } from '../nest-application-context-options.interface';
 
-/**
- * @publicApi
- */
 export type NestMicroserviceOptions = NestApplicationContextOptions;
diff --git a/packages/common/interfaces/middleware/middleware-config-proxy.interface.ts b/packages/common/interfaces/middleware/middleware-config-proxy.interface.ts
index b0d194b86..e23c3cf8a 100644
--- a/packages/common/interfaces/middleware/middleware-config-proxy.interface.ts
+++ b/packages/common/interfaces/middleware/middleware-config-proxy.interface.ts
@@ -2,9 +2,6 @@ import { Type } from '../type.interface';
 import { RouteInfo } from './middleware-configuration.interface';
 import { MiddlewareConsumer } from './middleware-consumer.interface';
 
-/**
- * @publicApi
- */
 export interface MiddlewareConfigProxy {
   /**
    * Excludes routes from the currently processed middleware.
diff --git a/packages/common/interfaces/middleware/middleware-configuration.interface.ts b/packages/common/interfaces/middleware/middleware-configuration.interface.ts
index 15414b6cb..aef5012ed 100644
--- a/packages/common/interfaces/middleware/middleware-configuration.interface.ts
+++ b/packages/common/interfaces/middleware/middleware-configuration.interface.ts
@@ -1,11 +1,9 @@
 import { RequestMethod } from '../../enums';
 import { Type } from '../type.interface';
-import { VersionValue } from '../version-options.interface';
 
 export interface RouteInfo {
   path: string;
   method: RequestMethod;
-  version?: VersionValue;
 }
 
 export interface MiddlewareConfiguration<T = any> {
diff --git a/packages/common/interfaces/middleware/nest-middleware.interface.ts b/packages/common/interfaces/middleware/nest-middleware.interface.ts
index 88c27bc5c..d392d052d 100644
--- a/packages/common/interfaces/middleware/nest-middleware.interface.ts
+++ b/packages/common/interfaces/middleware/nest-middleware.interface.ts
@@ -1,8 +1,3 @@
-/**
- * @see [Middleware](https://docs.nestjs.com/middleware)
- *
- * @publicApi
- */
 export interface NestMiddleware<TRequest = any, TResponse = any> {
-  use(req: TRequest, res: TResponse, next: (error?: Error | any) => void): any;
+  use(req: TRequest, res: TResponse, next: () => void): any;
 }
diff --git a/packages/common/interfaces/modules/index.ts b/packages/common/interfaces/modules/index.ts
index 458f952a3..612adb82b 100644
--- a/packages/common/interfaces/modules/index.ts
+++ b/packages/common/interfaces/modules/index.ts
@@ -1,8 +1,6 @@
 export * from './dynamic-module.interface';
 export * from './forward-reference.interface';
-export * from './injection-token.interface';
 export * from './introspection-result.interface';
 export * from './module-metadata.interface';
 export * from './nest-module.interface';
-export * from './optional-factory-dependency.interface';
 export * from './provider.interface';
diff --git a/packages/common/interfaces/modules/injection-token.interface.ts b/packages/common/interfaces/modules/injection-token.interface.ts
deleted file mode 100644
index 8a4d8d97f..000000000
--- a/packages/common/interfaces/modules/injection-token.interface.ts
+++ /dev/null
@@ -1,12 +0,0 @@
-import { Abstract } from '../abstract.interface';
-import { Type } from '../type.interface';
-
-/**
- * @publicApi
- */
-export type InjectionToken =
-  | string
-  | symbol
-  | Type<any>
-  | Abstract<any>
-  | Function;
diff --git a/packages/common/interfaces/modules/nest-module.interface.ts b/packages/common/interfaces/modules/nest-module.interface.ts
index 236658017..bef5810c2 100644
--- a/packages/common/interfaces/modules/nest-module.interface.ts
+++ b/packages/common/interfaces/modules/nest-module.interface.ts
@@ -1,8 +1,5 @@
 import { MiddlewareConsumer } from '../middleware/middleware-consumer.interface';
 
-/**
- * @publicApi
- */
 export interface NestModule {
   configure(consumer: MiddlewareConsumer);
 }
diff --git a/packages/common/interfaces/modules/optional-factory-dependency.interface.ts b/packages/common/interfaces/modules/optional-factory-dependency.interface.ts
deleted file mode 100644
index 6c8db900e..000000000
--- a/packages/common/interfaces/modules/optional-factory-dependency.interface.ts
+++ /dev/null
@@ -1,9 +0,0 @@
-import { InjectionToken } from './injection-token.interface';
-
-/**
- * @publicApi
- */
-export type OptionalFactoryDependency = {
-  token: InjectionToken;
-  optional: boolean;
-};
diff --git a/packages/common/interfaces/modules/provider.interface.ts b/packages/common/interfaces/modules/provider.interface.ts
index 2fd7f85b6..c868b3c97 100644
--- a/packages/common/interfaces/modules/provider.interface.ts
+++ b/packages/common/interfaces/modules/provider.interface.ts
@@ -1,7 +1,6 @@
+import { Abstract } from '../abstract.interface';
 import { Scope } from '../scope-options.interface';
 import { Type } from '../type.interface';
-import { InjectionToken } from './injection-token.interface';
-import { OptionalFactoryDependency } from './optional-factory-dependency.interface';
 
 /**
  *
@@ -28,7 +27,7 @@ export type Provider<T = any> =
  * };
  * ```
  *
- * @see [Class providers](https://docs.nestjs.com/fundamentals/custom-providers#class-providers-useclass)
+ * @see [Use class](https://docs.nestjs.com/fundamentals/custom-providers#use-class)
  * @see [Injection scopes](https://docs.nestjs.com/fundamentals/injection-scopes)
  *
  * @publicApi
@@ -37,7 +36,7 @@ export interface ClassProvider<T = any> {
   /**
    * Injection token
    */
-  provide: InjectionToken;
+  provide: string | symbol | Type<any> | Abstract<any> | Function;
   /**
    * Type (class name) of provider (instance to be injected).
    */
@@ -46,19 +45,6 @@ export interface ClassProvider<T = any> {
    * Optional enum defining lifetime of the provider that is injected.
    */
   scope?: Scope;
-  /**
-   * This option is only available on factory providers!
-   *
-   * @see [Use factory](https://docs.nestjs.com/fundamentals/custom-providers#factory-providers-usefactory)
-   */
-  inject?: never;
-  /**
-   * Flags provider as durable. This flag can be used in combination with custom context id
-   * factory strategy to construct lazy DI subtrees.
-   *
-   * This flag can be used only in conjunction with scope = Scope.REQUEST.
-   */
-  durable?: boolean;
 }
 
 /**
@@ -72,7 +58,7 @@ export interface ClassProvider<T = any> {
  * };
  * ```
  *
- * @see [Value providers](https://docs.nestjs.com/fundamentals/custom-providers#value-providers-usevalue)
+ * @see [Use value](https://docs.nestjs.com/fundamentals/custom-providers#use-value)
  *
  * @publicApi
  */
@@ -80,17 +66,11 @@ export interface ValueProvider<T = any> {
   /**
    * Injection token
    */
-  provide: InjectionToken;
+  provide: string | symbol | Type<any> | Abstract<any> | Function;
   /**
    * Instance of a provider to be injected.
    */
   useValue: T;
-  /**
-   * This option is only available on factory providers!
-   *
-   * @see [Use factory](https://docs.nestjs.com/fundamentals/custom-providers#factory-providers-usefactory)
-   */
-  inject?: never;
 }
 
 /**
@@ -108,7 +88,7 @@ export interface ValueProvider<T = any> {
  * };
  * ```
  *
- * @see [Factory providers](https://docs.nestjs.com/fundamentals/custom-providers#factory-providers-usefactory)
+ * @see [Use factory](https://docs.nestjs.com/fundamentals/custom-providers#use-factory)
  * @see [Injection scopes](https://docs.nestjs.com/fundamentals/injection-scopes)
  *
  * @publicApi
@@ -117,26 +97,19 @@ export interface FactoryProvider<T = any> {
   /**
    * Injection token
    */
-  provide: InjectionToken;
+  provide: string | symbol | Type<any> | Abstract<any> | Function;
   /**
    * Factory function that returns an instance of the provider to be injected.
    */
-  useFactory: (...args: any[]) => T | Promise<T>;
+  useFactory: (...args: any[]) => T;
   /**
    * Optional list of providers to be injected into the context of the Factory function.
    */
-  inject?: Array<InjectionToken | OptionalFactoryDependency>;
+  inject?: Array<Type<any> | string | symbol | Abstract<any> | Function>;
   /**
    * Optional enum defining lifetime of the provider that is returned by the Factory function.
    */
   scope?: Scope;
-  /**
-   * Flags provider as durable. This flag can be used in combination with custom context id
-   * factory strategy to construct lazy DI subtrees.
-   *
-   * This flag can be used only in conjunction with scope = Scope.REQUEST.
-   */
-  durable?: boolean;
 }
 
 /**
@@ -150,7 +123,7 @@ export interface FactoryProvider<T = any> {
  * };
  * ```
  *
- * @see [Alias providers](https://docs.nestjs.com/fundamentals/custom-providers#alias-providers-useexisting)
+ * @see [Use existing](https://docs.nestjs.com/fundamentals/custom-providers#use-existing)
  *
  * @publicApi
  */
@@ -158,7 +131,7 @@ export interface ExistingProvider<T = any> {
   /**
    * Injection token
    */
-  provide: InjectionToken;
+  provide: string | symbol | Type<any> | Abstract<any> | Function;
   /**
    * Provider to be aliased by the Injection token.
    */
diff --git a/packages/common/interfaces/nest-application-context-options.interface.ts b/packages/common/interfaces/nest-application-context-options.interface.ts
index d5204b55d..6126a1dc7 100644
--- a/packages/common/interfaces/nest-application-context-options.interface.ts
+++ b/packages/common/interfaces/nest-application-context-options.interface.ts
@@ -25,23 +25,8 @@ export class NestApplicationContextOptions {
 
   /**
    * If enabled, logs will be automatically flushed and buffer detached when
-   * application initialization process either completes or fails.
+   * application initialisation process either completes or fails.
    * @default true
    */
   autoFlushLogs?: boolean;
-
-  /**
-   * Whether to run application in the preview mode.
-   * In the preview mode, providers/controllers are not instantiated & resolved.
-   *
-   * @default false
-   */
-  preview?: boolean;
-
-  /**
-   * Whether to generate a serialized graph snapshot.
-   *
-   * @default false
-   */
-  snapshot?: boolean;
 }
diff --git a/packages/common/interfaces/nest-application-context.interface.ts b/packages/common/interfaces/nest-application-context.interface.ts
index 554fa1d1b..47ec30cad 100644
--- a/packages/common/interfaces/nest-application-context.interface.ts
+++ b/packages/common/interfaces/nest-application-context.interface.ts
@@ -3,20 +3,6 @@ import { LoggerService, LogLevel } from '../services/logger.service';
 import { DynamicModule } from './modules';
 import { Type } from './type.interface';
 
-export interface GetOrResolveOptions {
-  /**
-   * If enabled, lookup will only be performed in the host module.
-   * @default false
-   */
-  strict?: boolean;
-  /**
-   * If enabled, instead of returning a first instance registered under a given token,
-   * a list of instances will be returned.
-   * @default false
-   */
-  each?: boolean;
-}
-
 /**
  * Interface defining NestApplicationContext.
  *
@@ -35,74 +21,18 @@ export interface INestApplicationContext {
    */
   get<TInput = any, TResult = TInput>(
     typeOrToken: Type<TInput> | Function | string | symbol,
+    options?: { strict: boolean },
   ): TResult;
-  /**
-   * Retrieves an instance of either injectable or controller, otherwise, throws exception.
-   * @returns {TResult}
-   */
-  get<TInput = any, TResult = TInput>(
-    typeOrToken: Type<TInput> | Function | string | symbol,
-    options: { strict?: boolean; each?: undefined | false },
-  ): TResult;
-  /**
-   * Retrieves a list of instances of either injectables or controllers, otherwise, throws exception.
-   * @returns {Array<TResult>}
-   */
-  get<TInput = any, TResult = TInput>(
-    typeOrToken: Type<TInput> | Function | string | symbol,
-    options: { strict?: boolean; each: true },
-  ): Array<TResult>;
-  /**
-   * Retrieves an instance (or a list of instances) of either injectable or controller, otherwise, throws exception.
-   * @returns {TResult | Array<TResult>}
-   */
-  get<TInput = any, TResult = TInput>(
-    typeOrToken: Type<TInput> | Function | string | symbol,
-    options?: GetOrResolveOptions,
-  ): TResult | Array<TResult>;
 
   /**
    * Resolves transient or request-scoped instance of either injectable or controller, otherwise, throws exception.
-   * @returns {Array<TResult>}
-   */
-  resolve<TInput = any, TResult = TInput>(
-    typeOrToken: Type<TInput> | Function | string | symbol,
-  ): Promise<TResult>;
-  /**
-   * Resolves transient or request-scoped instance of either injectable or controller, otherwise, throws exception.
-   * @returns {Array<TResult>}
-   */
-  resolve<TInput = any, TResult = TInput>(
-    typeOrToken: Type<TInput> | Function | string | symbol,
-    contextId?: { id: number },
-  ): Promise<TResult>;
-  /**
-   * Resolves transient or request-scoped instance of either injectable or controller, otherwise, throws exception.
-   * @returns {Array<TResult>}
+   * @returns {Promise<TResult>}
    */
   resolve<TInput = any, TResult = TInput>(
     typeOrToken: Type<TInput> | Function | string | symbol,
     contextId?: { id: number },
-    options?: { strict?: boolean; each?: undefined | false },
+    options?: { strict: boolean },
   ): Promise<TResult>;
-  /**
-   * Resolves transient or request-scoped instances of either injectables or controllers, otherwise, throws exception.
-   * @returns {Array<TResult>}
-   */
-  resolve<TInput = any, TResult = TInput>(
-    typeOrToken: Type<TInput> | Function | string | symbol,
-    contextId?: { id: number },
-    options?: { strict?: boolean; each: true },
-  ): Promise<Array<TResult>>;
-  /**
-   * Resolves transient or request-scoped instance (or a list of instances) of either injectable or controller, otherwise, throws exception.
-   * @returns {Promise<TResult | Array<TResult>>}
-   */
-  resolve<TInput = any, TResult = TInput>(
-    typeOrToken: Type<TInput> | Function | string | symbol,
-    contextId?: { id: number },
-    options?: GetOrResolveOptions,
-  ): Promise<TResult | Array<TResult>>;
 
   /**
    * Registers the request/context object for a given context ID (DI container sub-tree).
@@ -120,8 +50,7 @@ export interface INestApplicationContext {
   close(): Promise<void>;
 
   /**
-   * Sets custom logger service.
-   * Flushes buffered logs if auto flush is on.
+   * Sets custom logger service
    * @returns {void}
    */
   useLogger(logger: LoggerService | LogLevel[] | false): void;
@@ -142,7 +71,7 @@ export interface INestApplicationContext {
   enableShutdownHooks(signals?: ShutdownSignal[] | string[]): this;
 
   /**
-   * Initializes the Nest application.
+   * Initalizes the Nest application.
    * Calls the Nest lifecycle events.
    * It isn't mandatory to call this method directly.
    *
diff --git a/packages/common/interfaces/nest-application-options.interface.ts b/packages/common/interfaces/nest-application-options.interface.ts
index 5d4c89cbc..a21bfed98 100644
--- a/packages/common/interfaces/nest-application-options.interface.ts
+++ b/packages/common/interfaces/nest-application-options.interface.ts
@@ -21,13 +21,4 @@ export interface NestApplicationOptions extends NestApplicationContextOptions {
    * Set of configurable HTTPS options
    */
   httpsOptions?: HttpsOptions;
-  /**
-   * Whether to register the raw request body on the request. Use `req.rawBody`.
-   */
-  rawBody?: boolean;
-  /**
-   * Force close open HTTP connections. Useful if restarting your application hangs due to
-   * keep-alive connections in the HTTP adapter.
-   */
-  forceCloseConnections?: boolean;
 }
diff --git a/packages/common/interfaces/nest-application.interface.ts b/packages/common/interfaces/nest-application.interface.ts
index eb2167e64..ec04c5180 100644
--- a/packages/common/interfaces/nest-application.interface.ts
+++ b/packages/common/interfaces/nest-application.interface.ts
@@ -21,8 +21,7 @@ import { WebSocketAdapter } from './websockets/web-socket-adapter.interface';
  *
  * @publicApi
  */
-export interface INestApplication<TServer = any>
-  extends INestApplicationContext {
+export interface INestApplication extends INestApplicationContext {
   /**
    * A wrapper function around HTTP adapter method: `adapter.use()`.
    * Example `app.use(cors())`
@@ -62,6 +61,16 @@ export interface INestApplication<TServer = any>
     callback?: () => void,
   ): Promise<any>;
 
+  /**
+   * Starts the application (can be awaited).
+   * @deprecated use "listen" instead.
+   *
+   * @param {number|string} port
+   * @param {string} [hostname]
+   * @returns {Promise}
+   */
+  listenAsync(port: number | string, hostname?: string): Promise<any>;
+
   /**
    * Returns the url the application is listening at, based on OS and IP version. Returns as an IP value either in IPv6 or IPv4
    *
@@ -111,9 +120,9 @@ export interface INestApplication<TServer = any>
   /**
    * Returns the underlying native HTTP server.
    *
-   * @returns {TServer}
+   * @returns {*}
    */
-  getHttpServer(): TServer;
+  getHttpServer(): any;
 
   /**
    * Returns the underlying HTTP adapter.
@@ -129,6 +138,14 @@ export interface INestApplication<TServer = any>
    */
   startAllMicroservices(): Promise<this>;
 
+  /**
+   * Starts all connected microservices and can be awaited.
+   * @deprecated use "startAllMicroservices" instead.
+   *
+   * @returns {Promise}
+   */
+  startAllMicroservicesAsync(): Promise<this>;
+
   /**
    * Registers exception filters as global filters (will be used within
    * every HTTP route handler)
diff --git a/packages/common/interfaces/nest-microservice.interface.ts b/packages/common/interfaces/nest-microservice.interface.ts
index 025c331bc..857f1d66c 100644
--- a/packages/common/interfaces/nest-microservice.interface.ts
+++ b/packages/common/interfaces/nest-microservice.interface.ts
@@ -18,6 +18,14 @@ export interface INestMicroservice extends INestApplicationContext {
    */
   listen(): Promise<any>;
 
+  /**
+   * Starts the microservice (can be awaited).
+   * @deprecated use "listen" instead.
+   *
+   * @returns {Promise}
+   */
+  listenAsync(): Promise<any>;
+
   /**
    * Register Ws Adapter which will be used inside Gateways.
    * Use when you want to override default `socket.io` library.
diff --git a/packages/common/interfaces/scope-options.interface.ts b/packages/common/interfaces/scope-options.interface.ts
index 4cca74275..f958c393b 100644
--- a/packages/common/interfaces/scope-options.interface.ts
+++ b/packages/common/interfaces/scope-options.interface.ts
@@ -28,11 +28,4 @@ export interface ScopeOptions {
    * Specifies the lifetime of an injected Provider or Controller.
    */
   scope?: Scope;
-  /**
-   * Flags provider as durable. This flag can be used in combination with custom context id
-   * factory strategy to construct lazy DI subtrees.
-   *
-   * This flag can be used only in conjunction with scope = Scope.REQUEST.
-   */
-  durable?: boolean;
 }
diff --git a/packages/common/interfaces/version-options.interface.ts b/packages/common/interfaces/version-options.interface.ts
index fc5a53b6e..3c214e64a 100644
--- a/packages/common/interfaces/version-options.interface.ts
+++ b/packages/common/interfaces/version-options.interface.ts
@@ -7,13 +7,7 @@ import { VersioningType } from '../enums/version-type.enum';
  */
 export const VERSION_NEUTRAL = Symbol('VERSION_NEUTRAL');
 
-/**
- * @publicApi
- */
-export type VersionValue =
-  | string
-  | typeof VERSION_NEUTRAL
-  | Array<string | typeof VERSION_NEUTRAL>;
+export type VersionValue = string | string[] | typeof VERSION_NEUTRAL;
 
 /**
  * @publicApi
@@ -21,7 +15,7 @@ export type VersionValue =
 export interface VersionOptions {
   /**
    * Specifies an optional API Version. When configured, methods
-   * within the controller will only be routed if the request version
+   * withing the controller will only be routed if the request version
    * matches the specified value.
    *
    * Supported only by HTTP-based applications (does not apply to non-HTTP microservices).
@@ -31,9 +25,6 @@ export interface VersionOptions {
   version?: VersionValue;
 }
 
-/**
- * @publicApi
- */
 export interface HeaderVersioningOptions {
   type: VersioningType.HEADER;
   /**
@@ -42,9 +33,6 @@ export interface HeaderVersioningOptions {
   header: string;
 }
 
-/**
- * @publicApi
- */
 export interface UriVersioningOptions {
   type: VersioningType.URI;
   /**
@@ -57,9 +45,6 @@ export interface UriVersioningOptions {
   prefix?: string | false;
 }
 
-/**
- * @publicApi
- */
 export interface MediaTypeVersioningOptions {
   type: VersioningType.MEDIA_TYPE;
   /**
@@ -70,26 +55,6 @@ export interface MediaTypeVersioningOptions {
   key: string;
 }
 
-/**
- * @publicApi
- */
-export interface CustomVersioningOptions {
-  type: VersioningType.CUSTOM;
-
-  /**
-   * A function that accepts a request object (specific to the underlying platform, ie Express or Fastify)
-   * and returns a single version value or an ordered array of versions, in order from HIGHEST to LOWEST.
-   *
-   * Ex. Returned version array = ['3.1', '3.0', '2.5', '2', '1.9']
-   *
-   * Use type assertion or narrowing to identify the specific request type.
-   */
-  extractor: (request: unknown) => string | string[];
-}
-
-/**
- * @publicApi
- */
 interface VersioningCommonOptions {
   /**
    * The default version to be used as a fallback when you did not provide some
@@ -102,9 +67,4 @@ interface VersioningCommonOptions {
  * @publicApi
  */
 export type VersioningOptions = VersioningCommonOptions &
-  (
-    | HeaderVersioningOptions
-    | UriVersioningOptions
-    | MediaTypeVersioningOptions
-    | CustomVersioningOptions
-  );
+  (HeaderVersioningOptions | UriVersioningOptions | MediaTypeVersioningOptions);
diff --git a/packages/common/interfaces/websockets/web-socket-adapter.interface.ts b/packages/common/interfaces/websockets/web-socket-adapter.interface.ts
index e3baa1272..4b1585672 100644
--- a/packages/common/interfaces/websockets/web-socket-adapter.interface.ts
+++ b/packages/common/interfaces/websockets/web-socket-adapter.interface.ts
@@ -1,16 +1,10 @@
 import { Observable } from 'rxjs';
 
-/**
- * @publicApi
- */
 export interface WsMessageHandler<T = string> {
   message: T;
   callback: (...args: any[]) => Observable<any> | Promise<any>;
 }
 
-/**
- * @publicApi
- */
 export interface WebSocketAdapter<
   TServer = any,
   TClient = any,
diff --git a/packages/common/module-utils/configurable-module.builder.ts b/packages/common/module-utils/configurable-module.builder.ts
deleted file mode 100644
index 17735f4ad..000000000
--- a/packages/common/module-utils/configurable-module.builder.ts
+++ /dev/null
@@ -1,345 +0,0 @@
-import { DynamicModule, Provider } from '../interfaces';
-import { Logger } from '../services/logger.service';
-import { randomStringGenerator } from '../utils/random-string-generator.util';
-import {
-  ASYNC_METHOD_SUFFIX,
-  CONFIGURABLE_MODULE_ID,
-  DEFAULT_FACTORY_CLASS_METHOD_KEY,
-  DEFAULT_METHOD_KEY,
-} from './constants';
-import {
-  ConfigurableModuleAsyncOptions,
-  ConfigurableModuleCls,
-  ConfigurableModuleHost,
-  ConfigurableModuleOptionsFactory,
-} from './interfaces';
-import { generateOptionsInjectionToken, getInjectionProviders } from './utils';
-
-/**
- * @publicApi
- */
-export interface ConfigurableModuleBuilderOptions {
-  /**
-   * Specified what injection token should be used for the module options provider.
-   * By default, an auto-generated UUID will be used.
-   */
-  optionsInjectionToken?: string | symbol;
-  /**
-   * By default, an UUID will be used as a module options provider token.
-   * Explicitly specifying the "moduleName" will instruct the "ConfigurableModuleBuilder"
-   * to use a more descriptive provider token.
-   *
-   * For example, if `moduleName: "Cache"` then auto-generated provider token will be "CACHE_MODULE_OPTIONS".
-   */
-  moduleName?: string;
-  /**
-   * Indicates whether module should always be "transient", meaning,
-   * every time you call the static method to construct a dynamic module,
-   * regardless of what arguments you pass in, a new "unique" module will be created.
-   *
-   * @default false
-   */
-  alwaysTransient?: boolean;
-}
-
-/**
- * Factory that lets you create configurable modules and
- * provides a way to reduce the majority of dynamic module boilerplate.
- *
- * @publicApi
- */
-export class ConfigurableModuleBuilder<
-  ModuleOptions,
-  StaticMethodKey extends string = typeof DEFAULT_METHOD_KEY,
-  FactoryClassMethodKey extends string = typeof DEFAULT_FACTORY_CLASS_METHOD_KEY,
-  ExtraModuleDefinitionOptions = {},
-> {
-  protected staticMethodKey: StaticMethodKey;
-  protected factoryClassMethodKey: FactoryClassMethodKey;
-  protected extras: ExtraModuleDefinitionOptions;
-  protected transformModuleDefinition: (
-    definition: DynamicModule,
-    extraOptions: ExtraModuleDefinitionOptions,
-  ) => DynamicModule;
-
-  protected readonly logger = new Logger(ConfigurableModuleBuilder.name);
-
-  constructor(
-    protected readonly options: ConfigurableModuleBuilderOptions = {},
-    parentBuilder?: ConfigurableModuleBuilder<ModuleOptions>,
-  ) {
-    if (parentBuilder) {
-      this.staticMethodKey = parentBuilder.staticMethodKey as StaticMethodKey;
-      this.factoryClassMethodKey =
-        parentBuilder.factoryClassMethodKey as FactoryClassMethodKey;
-      this.transformModuleDefinition = parentBuilder.transformModuleDefinition;
-      this.extras = parentBuilder.extras as ExtraModuleDefinitionOptions;
-    }
-  }
-
-  /**
-   * Registers the "extras" object (a set of extra options that can be used to modify the dynamic module definition).
-   * Values you specify within the "extras" object will be used as default values (that can be overridden by module consumers).
-   *
-   * This method also applies the so-called "module definition transform function" that takes the auto-generated
-   * dynamic module object ("DynamicModule") and the actual consumer "extras" object as input parameters.
-   * The "extras" object consists of values explicitly specified by module consumers and default values.
-   *
-   * @example
-   * ```typescript
-   * .setExtras<{ isGlobal?: boolean }>({ isGlobal: false }, (definition, extras) =>
-   *    ({ ...definition, global: extras.isGlobal })
-   * )
-   * ```
-   */
-  setExtras<ExtraModuleDefinitionOptions>(
-    extras: ExtraModuleDefinitionOptions,
-    transformDefinition: (
-      definition: DynamicModule,
-      extras: ExtraModuleDefinitionOptions,
-    ) => DynamicModule = def => def,
-  ) {
-    const builder = new ConfigurableModuleBuilder<
-      ModuleOptions,
-      StaticMethodKey,
-      FactoryClassMethodKey,
-      ExtraModuleDefinitionOptions
-    >(this.options, this as any);
-    builder.extras = extras;
-    builder.transformModuleDefinition = transformDefinition;
-    return builder;
-  }
-
-  /**
-   * Dynamic modules must expose public static methods that let you pass in
-   * configuration parameters (control the module's behavior from the outside).
-   * Some frequently used names that you may have seen in other modules are:
-   * "forRoot", "forFeature", "register", "configure".
-   *
-   * This method "setClassMethodName" lets you specify the name of the
-   * method that will be auto-generated.
-   *
-   * @param key name of the method
-   */
-  setClassMethodName<StaticMethodKey extends string>(key: StaticMethodKey) {
-    const builder = new ConfigurableModuleBuilder<
-      ModuleOptions,
-      StaticMethodKey,
-      FactoryClassMethodKey,
-      ExtraModuleDefinitionOptions
-    >(this.options, this as any);
-    builder.staticMethodKey = key;
-    return builder;
-  }
-
-  /**
-   * Asynchronously configured modules (that rely on other modules, i.e. "ConfigModule")
-   * let you pass the configuration factory class that will be registered and instantiated as a provider.
-   * This provider then will be used to retrieve the module's configuration. To provide the configuration,
-   * the corresponding factory method must be implemented.
-   *
-   * This method ("setFactoryMethodName") lets you control what method name will have to be
-   * implemented by the config factory (default is "create").
-   *
-   * @param key name of the method
-   */
-  setFactoryMethodName<FactoryClassMethodKey extends string>(
-    key: FactoryClassMethodKey,
-  ) {
-    const builder = new ConfigurableModuleBuilder<
-      ModuleOptions,
-      StaticMethodKey,
-      FactoryClassMethodKey,
-      ExtraModuleDefinitionOptions
-    >(this.options, this as any);
-    builder.factoryClassMethodKey = key;
-    return builder;
-  }
-
-  /**
-   * Returns an object consisting of multiple properties that lets you
-   * easily construct dynamic configurable modules. See "ConfigurableModuleHost" interface for more details.
-   */
-  build(): ConfigurableModuleHost<
-    ModuleOptions,
-    StaticMethodKey,
-    FactoryClassMethodKey,
-    ExtraModuleDefinitionOptions
-  > {
-    this.staticMethodKey ??= DEFAULT_METHOD_KEY as StaticMethodKey;
-    this.factoryClassMethodKey ??=
-      DEFAULT_FACTORY_CLASS_METHOD_KEY as FactoryClassMethodKey;
-    this.options.optionsInjectionToken ??= this.options.moduleName
-      ? this.constructInjectionTokenString()
-      : generateOptionsInjectionToken();
-    this.transformModuleDefinition ??= definition => definition;
-
-    return {
-      ConfigurableModuleClass:
-        this.createConfigurableModuleCls<ModuleOptions>(),
-      MODULE_OPTIONS_TOKEN: this.options.optionsInjectionToken,
-      ASYNC_OPTIONS_TYPE: this.createTypeProxy('ASYNC_OPTIONS_TYPE'),
-      OPTIONS_TYPE: this.createTypeProxy('OPTIONS_TYPE'),
-    };
-  }
-
-  private constructInjectionTokenString(): string {
-    const moduleNameInSnakeCase = this.options.moduleName
-      .trim()
-      .split(/(?=[A-Z])/)
-      .join('_')
-      .toUpperCase();
-    return `${moduleNameInSnakeCase}_MODULE_OPTIONS`;
-  }
-
-  private createConfigurableModuleCls<ModuleOptions>(): ConfigurableModuleCls<
-    ModuleOptions,
-    StaticMethodKey,
-    FactoryClassMethodKey
-  > {
-    // eslint-disable-next-line @typescript-eslint/no-this-alias
-    const self = this;
-    const asyncMethodKey = this.staticMethodKey + ASYNC_METHOD_SUFFIX;
-
-    class InternalModuleClass {
-      static [self.staticMethodKey](
-        options: ModuleOptions & ExtraModuleDefinitionOptions,
-      ): DynamicModule {
-        const providers: Array<Provider> = [
-          {
-            provide: self.options.optionsInjectionToken,
-            useValue: this.omitExtras(options, self.extras),
-          },
-        ];
-        if (self.options.alwaysTransient) {
-          providers.push({
-            provide: CONFIGURABLE_MODULE_ID,
-            useValue: randomStringGenerator(),
-          });
-        }
-        return self.transformModuleDefinition(
-          {
-            module: this,
-            providers,
-          },
-          {
-            ...self.extras,
-            ...options,
-          },
-        );
-      }
-
-      static [asyncMethodKey](
-        options: ConfigurableModuleAsyncOptions<ModuleOptions> &
-          ExtraModuleDefinitionOptions,
-      ): DynamicModule {
-        const providers = this.createAsyncProviders(options);
-        if (self.options.alwaysTransient) {
-          providers.push({
-            provide: CONFIGURABLE_MODULE_ID,
-            useValue: randomStringGenerator(),
-          });
-        }
-        return self.transformModuleDefinition(
-          {
-            module: this,
-            imports: options.imports || [],
-            providers,
-          },
-          {
-            ...self.extras,
-            ...options,
-          },
-        );
-      }
-
-      private static omitExtras(
-        input: ModuleOptions & ExtraModuleDefinitionOptions,
-        extras: ExtraModuleDefinitionOptions | undefined,
-      ): ModuleOptions {
-        if (!extras) {
-          return input;
-        }
-        const moduleOptions = {};
-        const extrasKeys = Object.keys(extras);
-
-        Object.keys(input)
-          .filter(key => !extrasKeys.includes(key))
-          .forEach(key => {
-            moduleOptions[key] = input[key];
-          });
-        return moduleOptions as ModuleOptions;
-      }
-
-      private static createAsyncProviders(
-        options: ConfigurableModuleAsyncOptions<ModuleOptions>,
-      ): Provider[] {
-        if (options.useExisting || options.useFactory) {
-          if (options.inject && options.provideInjectionTokensFrom) {
-            return [
-              this.createAsyncOptionsProvider(options),
-              ...getInjectionProviders(
-                options.provideInjectionTokensFrom,
-                options.inject,
-              ),
-            ];
-          }
-          return [this.createAsyncOptionsProvider(options)];
-        }
-        return [
-          this.createAsyncOptionsProvider(options),
-          {
-            provide: options.useClass,
-            useClass: options.useClass,
-          },
-        ];
-      }
-
-      private static createAsyncOptionsProvider(
-        options: ConfigurableModuleAsyncOptions<ModuleOptions>,
-      ): Provider {
-        if (options.useFactory) {
-          return {
-            provide: self.options.optionsInjectionToken,
-            useFactory: options.useFactory,
-            inject: options.inject || [],
-          };
-        }
-        return {
-          provide: self.options.optionsInjectionToken,
-          useFactory: async (
-            optionsFactory: ConfigurableModuleOptionsFactory<
-              ModuleOptions,
-              FactoryClassMethodKey
-            >,
-          ) =>
-            await optionsFactory[
-              self.factoryClassMethodKey as keyof typeof optionsFactory
-            ](),
-          inject: [options.useExisting || options.useClass],
-        };
-      }
-    }
-    return InternalModuleClass as unknown as ConfigurableModuleCls<
-      ModuleOptions,
-      StaticMethodKey,
-      FactoryClassMethodKey
-    >;
-  }
-
-  private createTypeProxy(
-    typeName: 'OPTIONS_TYPE' | 'ASYNC_OPTIONS_TYPE' | 'OptionsFactoryInterface',
-  ) {
-    const proxy = new Proxy(
-      {},
-      {
-        get: () => {
-          throw new Error(
-            `"${typeName}" is not supposed to be used as a value.`,
-          );
-        },
-      },
-    );
-    return proxy as any;
-  }
-}
diff --git a/packages/common/module-utils/constants.ts b/packages/common/module-utils/constants.ts
deleted file mode 100644
index 2d97c0c8c..000000000
--- a/packages/common/module-utils/constants.ts
+++ /dev/null
@@ -1,5 +0,0 @@
-export const DEFAULT_METHOD_KEY = 'register';
-export const DEFAULT_FACTORY_CLASS_METHOD_KEY = 'create';
-
-export const ASYNC_METHOD_SUFFIX = 'Async';
-export const CONFIGURABLE_MODULE_ID = 'CONFIGURABLE_MODULE_ID';
diff --git a/packages/common/module-utils/index.ts b/packages/common/module-utils/index.ts
deleted file mode 100644
index 4393992bd..000000000
--- a/packages/common/module-utils/index.ts
+++ /dev/null
@@ -1,2 +0,0 @@
-export * from './configurable-module.builder';
-export * from './interfaces';
diff --git a/packages/common/module-utils/interfaces/configurable-module-async-options.interface.ts b/packages/common/module-utils/interfaces/configurable-module-async-options.interface.ts
deleted file mode 100644
index ed1ec6288..000000000
--- a/packages/common/module-utils/interfaces/configurable-module-async-options.interface.ts
+++ /dev/null
@@ -1,62 +0,0 @@
-import {
-  FactoryProvider,
-  ModuleMetadata,
-  Provider,
-  Type,
-} from '../../interfaces';
-import { DEFAULT_FACTORY_CLASS_METHOD_KEY } from '../constants';
-
-/**
- * Interface that must be implemented by the module options factory class.
- * Method key varies depending on the "FactoryClassMethodKey" type argument.
- *
- * @publicApi
- */
-export type ConfigurableModuleOptionsFactory<
-  ModuleOptions,
-  FactoryClassMethodKey extends string,
-> = Record<
-  `${FactoryClassMethodKey}`,
-  () => Promise<ModuleOptions> | ModuleOptions
->;
-
-/**
- * Interface that represents the module async options object
- * Factory method name varies depending on the "FactoryClassMethodKey" type argument.
- *
- * @publicApi
- */
-export interface ConfigurableModuleAsyncOptions<
-  ModuleOptions,
-  FactoryClassMethodKey extends string = typeof DEFAULT_FACTORY_CLASS_METHOD_KEY,
-> extends Pick<ModuleMetadata, 'imports'> {
-  /**
-   * Injection token resolving to an existing provider. The provider must implement
-   * the corresponding interface.
-   */
-  useExisting?: Type<
-    ConfigurableModuleOptionsFactory<ModuleOptions, FactoryClassMethodKey>
-  >;
-  /**
-   * Injection token resolving to a class that will be instantiated as a provider.
-   * The class must implement the corresponding interface.
-   */
-  useClass?: Type<
-    ConfigurableModuleOptionsFactory<ModuleOptions, FactoryClassMethodKey>
-  >;
-  /**
-   * Function returning options (or a Promise resolving to options) to configure the
-   * cache module.
-   */
-  useFactory?: (...args: any[]) => Promise<ModuleOptions> | ModuleOptions;
-  /**
-   * Dependencies that a Factory may inject.
-   */
-  inject?: FactoryProvider['inject'];
-  /**
-   * List of parent module's providers that will be filtered to only provide necessary
-   * providers for the 'inject' array
-   * useful to pass options to nested async modules
-   */
-  provideInjectionTokensFrom?: Provider[];
-}
diff --git a/packages/common/module-utils/interfaces/configurable-module-cls.interface.ts b/packages/common/module-utils/interfaces/configurable-module-cls.interface.ts
deleted file mode 100644
index 0335bda2c..000000000
--- a/packages/common/module-utils/interfaces/configurable-module-cls.interface.ts
+++ /dev/null
@@ -1,37 +0,0 @@
-import { DynamicModule } from '../../interfaces';
-import {
-  DEFAULT_FACTORY_CLASS_METHOD_KEY,
-  DEFAULT_METHOD_KEY,
-} from '../constants';
-import { ConfigurableModuleAsyncOptions } from './configurable-module-async-options.interface';
-
-/**
- * Class that represents a blueprint/prototype for a configurable Nest module.
- * This class provides static methods for constructing dynamic modules. Their names
- * can be controlled through the "MethodKey" type argument.
- *
- * @publicApi
- */
-export type ConfigurableModuleCls<
-  ModuleOptions,
-  MethodKey extends string = typeof DEFAULT_METHOD_KEY,
-  FactoryClassMethodKey extends string = typeof DEFAULT_FACTORY_CLASS_METHOD_KEY,
-  ExtraModuleDefinitionOptions = {},
-> = {
-  new (): any;
-} & Record<
-  `${MethodKey}`,
-  (
-    options: ModuleOptions & Partial<ExtraModuleDefinitionOptions>,
-  ) => DynamicModule
-> &
-  Record<
-    `${MethodKey}Async`,
-    (
-      options: ConfigurableModuleAsyncOptions<
-        ModuleOptions,
-        FactoryClassMethodKey
-      > &
-        Partial<ExtraModuleDefinitionOptions>,
-    ) => DynamicModule
-  >;
diff --git a/packages/common/module-utils/interfaces/configurable-module-host.interface.ts b/packages/common/module-utils/interfaces/configurable-module-host.interface.ts
deleted file mode 100644
index c20654d73..000000000
--- a/packages/common/module-utils/interfaces/configurable-module-host.interface.ts
+++ /dev/null
@@ -1,77 +0,0 @@
-import { ConfigurableModuleAsyncOptions } from './configurable-module-async-options.interface';
-import { ConfigurableModuleCls } from './configurable-module-cls.interface';
-
-/**
- * Configurable module host. See properties for more details
- *
- * @publicApi
- */
-export interface ConfigurableModuleHost<
-  ModuleOptions = Record<string, unknown>,
-  MethodKey extends string = string,
-  FactoryClassMethodKey extends string = string,
-  ExtraModuleDefinitionOptions = {},
-> {
-  /**
-   * Class that represents a blueprint/prototype for a configurable Nest module.
-   * This class provides static methods for constructing dynamic modules. Their names
-   * can be controlled through the "MethodKey" type argument.
-   *
-   * Your module class should inherit from this class to make the static methods available.
-   *
-   * @example
-   * ```typescript
-   * @Module({})
-   * class IntegrationModule extends ConfigurableModuleCls {
-   *  // ...
-   * }
-   * ```
-   */
-  ConfigurableModuleClass: ConfigurableModuleCls<
-    ModuleOptions,
-    MethodKey,
-    FactoryClassMethodKey,
-    ExtraModuleDefinitionOptions
-  >;
-  /**
-   * Module options provider token. Can be used to inject the "options object" to
-   * providers registered within the host module.
-   */
-  MODULE_OPTIONS_TOKEN: string | symbol;
-  /**
-   * Can be used to auto-infer the compound "async module options" type.
-   * Note: this property is not supposed to be used as a value.
-   *
-   * @example
-   * ```typescript
-   * @Module({})
-   * class IntegrationModule extends ConfigurableModuleCls {
-   *  static module = initializer(IntegrationModule);
-   *
-   * static registerAsync(options: typeof ASYNC_OPTIONS_TYPE): DynamicModule {
-   *  return super.registerAsync(options);
-   * }
-   * ```
-   */
-  ASYNC_OPTIONS_TYPE: ConfigurableModuleAsyncOptions<
-    ModuleOptions,
-    FactoryClassMethodKey
-  > &
-    Partial<ExtraModuleDefinitionOptions>;
-  /**
-   * Can be used to auto-infer the compound "module options" type (options interface + extra module definition options).
-   * Note: this property is not supposed to be used as a value.
-   *
-   * @example
-   * ```typescript
-   * @Module({})
-   * class IntegrationModule extends ConfigurableModuleCls {
-   *  static module = initializer(IntegrationModule);
-   *
-   * static register(options: typeof OPTIONS_TYPE): DynamicModule {
-   *  return super.register(options);
-   * }
-   * ```
-   */
-  OPTIONS_TYPE: ModuleOptions & Partial<ExtraModuleDefinitionOptions>;
-}
diff --git a/packages/common/module-utils/interfaces/index.ts b/packages/common/module-utils/interfaces/index.ts
deleted file mode 100644
index 35c523076..000000000
--- a/packages/common/module-utils/interfaces/index.ts
+++ /dev/null
@@ -1,3 +0,0 @@
-export * from './configurable-module-async-options.interface';
-export * from './configurable-module-cls.interface';
-export * from './configurable-module-host.interface';
diff --git a/packages/common/module-utils/utils/generate-options-injection-token.util.ts b/packages/common/module-utils/utils/generate-options-injection-token.util.ts
deleted file mode 100644
index 259a6afa3..000000000
--- a/packages/common/module-utils/utils/generate-options-injection-token.util.ts
+++ /dev/null
@@ -1,6 +0,0 @@
-import { randomStringGenerator } from '../../utils/random-string-generator.util';
-
-export function generateOptionsInjectionToken() {
-  const hash = randomStringGenerator();
-  return `CONFIGURABLE_MODULE_OPTIONS[${hash}]`;
-}
diff --git a/packages/common/module-utils/utils/get-injection-providers.util.ts b/packages/common/module-utils/utils/get-injection-providers.util.ts
deleted file mode 100644
index 26743580b..000000000
--- a/packages/common/module-utils/utils/get-injection-providers.util.ts
+++ /dev/null
@@ -1,50 +0,0 @@
-import {
-  InjectionToken,
-  Provider,
-  FactoryProvider,
-  OptionalFactoryDependency,
-} from '../../interfaces';
-
-/**
- * check if x is OptionalFactoryDependency, based on prototype presence
- * (to avoid classes with a static 'token' field)
- * @param x
- * @returns x is OptionalFactoryDependency
- */
-function isOptionalFactoryDependency(
-  x: InjectionToken | OptionalFactoryDependency,
-): x is OptionalFactoryDependency {
-  return !!((x as any)?.token && !(x as any)?.prototype);
-}
-
-const mapInjectToTokens = (t: InjectionToken | OptionalFactoryDependency) =>
-  isOptionalFactoryDependency(t) ? t.token : t;
-
-/**
- *
- * @param providers List of a module's providers
- * @param tokens Injection tokens needed for a useFactory function (usually the module's options' token)
- * @returns All the providers needed for the tokens' injection (searched recursively)
- */
-export function getInjectionProviders(
-  providers: Provider[],
-  tokens: FactoryProvider['inject'],
-): Provider[] {
-  const result: Provider[] = [];
-  let search: InjectionToken[] = tokens.map(mapInjectToTokens);
-  while (search.length > 0) {
-    const match = (providers ?? []).filter(
-      p =>
-        !result.includes(p) && // this prevents circular loops and duplication
-        (search.includes(p as any) || search.includes((p as any)?.provide)),
-    );
-    result.push(...match);
-    // get injection tokens of the matched providers, if any
-    search = match
-      .filter(p => (p as any)?.inject)
-      .map(p => (p as FactoryProvider).inject)
-      .flat()
-      .map(mapInjectToTokens);
-  }
-  return result;
-}
diff --git a/packages/common/module-utils/utils/index.ts b/packages/common/module-utils/utils/index.ts
deleted file mode 100644
index 7125be0f7..000000000
--- a/packages/common/module-utils/utils/index.ts
+++ /dev/null
@@ -1,2 +0,0 @@
-export * from './generate-options-injection-token.util';
-export * from './get-injection-providers.util';
diff --git a/packages/common/package.json b/packages/common/package.json
index 697002f7a..3d75eef42 100644
--- a/packages/common/package.json
+++ b/packages/common/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/common",
-  "version": "9.4.0",
+  "version": "8.2.3",
   "description": "Nest - modern, fast, powerful node.js web framework (@common)",
   "author": "Kamil Mysliwiec",
   "homepage": "https://nestjs.com",
@@ -17,17 +17,22 @@
   },
   "license": "MIT",
   "dependencies": {
+    "axios": "0.24.0",
     "iterare": "1.2.1",
-    "tslib": "2.5.0",
-    "uid": "2.0.2"
+    "tslib": "2.3.1",
+    "uuid": "8.3.2"
   },
   "peerDependencies": {
+    "cache-manager": "*",
     "class-transformer": "*",
     "class-validator": "*",
     "reflect-metadata": "^0.1.12",
     "rxjs": "^7.1.0"
   },
   "peerDependenciesMeta": {
+    "cache-manager": {
+      "optional": true
+    },
     "class-validator": {
       "optional": true
     },
diff --git a/packages/common/pipes/default-value.pipe.ts b/packages/common/pipes/default-value.pipe.ts
index 65716f497..ee99ecc2f 100644
--- a/packages/common/pipes/default-value.pipe.ts
+++ b/packages/common/pipes/default-value.pipe.ts
@@ -3,7 +3,7 @@ import {
   ArgumentMetadata,
   PipeTransform,
 } from '../interfaces/features/pipe-transform.interface';
-import { isNil, isNumber } from '../utils/shared.utils';
+import { isNil } from '../utils/shared.utils';
 
 /**
  * Defines the built-in DefaultValue Pipe
@@ -16,12 +16,12 @@ import { isNil, isNumber } from '../utils/shared.utils';
 export class DefaultValuePipe<T = any, R = any>
   implements PipeTransform<T, T | R>
 {
-  constructor(protected readonly defaultValue: R) {}
+  constructor(private readonly defaultValue: R) {}
 
   transform(value?: T, _metadata?: ArgumentMetadata): T | R {
     if (
       isNil(value) ||
-      (isNumber(value) && isNaN(value as unknown as number))
+      (typeof value === 'number' && isNaN(value as unknown as number))
     ) {
       return this.defaultValue;
     }
diff --git a/packages/common/pipes/file/file-type.validator.ts b/packages/common/pipes/file/file-type.validator.ts
deleted file mode 100644
index ffc3e54c5..000000000
--- a/packages/common/pipes/file/file-type.validator.ts
+++ /dev/null
@@ -1,34 +0,0 @@
-import { FileValidator } from './file-validator.interface';
-import { IFile } from './interfaces';
-
-export type FileTypeValidatorOptions = {
-  fileType: string | RegExp;
-};
-
-/**
- * Defines the built-in FileType File Validator. It validates incoming files mime-type
- * matching a string or a regular expression. Note that this validator uses a naive strategy
- * to check the mime-type and could be fooled if the client provided a file with renamed extension.
- * (for instance, renaming a 'malicious.bat' to 'malicious.jpeg'). To handle such security issues
- * with more reliability, consider checking against the file's [magic-numbers](https://en.wikipedia.org/wiki/Magic_number_%28programming%29)
- *
- * @see [File Validators](https://docs.nestjs.com/techniques/file-upload#validators)
- *
- * @publicApi
- */
-export class FileTypeValidator extends FileValidator<FileTypeValidatorOptions> {
-  buildErrorMessage(): string {
-    return `Validation failed (expected type is ${this.validationOptions.fileType})`;
-  }
-
-  isValid<TFile extends IFile = any>(file: TFile): boolean {
-    if (!this.validationOptions) {
-      return true;
-    }
-
-    return (
-      'mimetype' in file &&
-      !!file.mimetype.match(this.validationOptions.fileType)
-    );
-  }
-}
diff --git a/packages/common/pipes/file/file-validator.interface.ts b/packages/common/pipes/file/file-validator.interface.ts
deleted file mode 100644
index bf43c0b6a..000000000
--- a/packages/common/pipes/file/file-validator.interface.ts
+++ /dev/null
@@ -1,25 +0,0 @@
-import { IFile } from './interfaces';
-
-/**
- * Interface describing FileValidators, which can be added to a ParseFilePipe
- *
- * @see {ParseFilePipe}
- * @publicApi
- */
-export abstract class FileValidator<TValidationOptions = Record<string, any>> {
-  constructor(protected readonly validationOptions: TValidationOptions) {}
-
-  /**
-   * Indicates if this file should be considered valid, according to the options passed in the constructor.
-   * @param file the file from the request object
-   */
-  abstract isValid<TFile extends IFile = any>(
-    file?: TFile,
-  ): boolean | Promise<boolean>;
-
-  /**
-   * Builds an error message in case the validation fails.
-   * @param file the file from the request object
-   */
-  abstract buildErrorMessage(file: any): string;
-}
diff --git a/packages/common/pipes/file/index.ts b/packages/common/pipes/file/index.ts
deleted file mode 100644
index 11d19e318..000000000
--- a/packages/common/pipes/file/index.ts
+++ /dev/null
@@ -1,6 +0,0 @@
-export * from './file-type.validator';
-export * from './file-validator.interface';
-export * from './max-file-size.validator';
-export * from './parse-file-options.interface';
-export * from './parse-file.pipe';
-export * from './parse-file-pipe.builder';
diff --git a/packages/common/pipes/file/interfaces/file.interface.ts b/packages/common/pipes/file/interfaces/file.interface.ts
deleted file mode 100644
index 37218734f..000000000
--- a/packages/common/pipes/file/interfaces/file.interface.ts
+++ /dev/null
@@ -1,4 +0,0 @@
-export interface IFile {
-  mimetype: string;
-  size: number;
-}
diff --git a/packages/common/pipes/file/interfaces/index.ts b/packages/common/pipes/file/interfaces/index.ts
deleted file mode 100644
index 09d8f3ca8..000000000
--- a/packages/common/pipes/file/interfaces/index.ts
+++ /dev/null
@@ -1 +0,0 @@
-export * from './file.interface';
diff --git a/packages/common/pipes/file/max-file-size.validator.ts b/packages/common/pipes/file/max-file-size.validator.ts
deleted file mode 100644
index c6274de91..000000000
--- a/packages/common/pipes/file/max-file-size.validator.ts
+++ /dev/null
@@ -1,27 +0,0 @@
-import { FileValidator } from './file-validator.interface';
-import { IFile } from './interfaces';
-
-export type MaxFileSizeValidatorOptions = {
-  maxSize: number;
-};
-
-/**
- * Defines the built-in MaxSize File Validator
- *
- * @see [File Validators](https://docs.nestjs.com/techniques/file-upload#file-validation)
- *
- * @publicApi
- */
-export class MaxFileSizeValidator extends FileValidator<MaxFileSizeValidatorOptions> {
-  buildErrorMessage(): string {
-    return `Validation failed (expected size is less than ${this.validationOptions.maxSize})`;
-  }
-
-  public isValid<TFile extends IFile = any>(file: TFile): boolean {
-    if (!this.validationOptions) {
-      return true;
-    }
-
-    return 'size' in file && file.size < this.validationOptions.maxSize;
-  }
-}
diff --git a/packages/common/pipes/file/parse-file-options.interface.ts b/packages/common/pipes/file/parse-file-options.interface.ts
deleted file mode 100644
index f9c67daa8..000000000
--- a/packages/common/pipes/file/parse-file-options.interface.ts
+++ /dev/null
@@ -1,17 +0,0 @@
-import { ErrorHttpStatusCode } from '../../utils/http-error-by-code.util';
-import { FileValidator } from './file-validator.interface';
-
-/**
- * @publicApi
- */
-export interface ParseFileOptions {
-  validators?: FileValidator[];
-  errorHttpStatusCode?: ErrorHttpStatusCode;
-  exceptionFactory?: (error: string) => any;
-
-  /**
-   * Defines if file parameter is required.
-   * @default true
-   */
-  fileIsRequired?: boolean;
-}
diff --git a/packages/common/pipes/file/parse-file-pipe.builder.ts b/packages/common/pipes/file/parse-file-pipe.builder.ts
deleted file mode 100644
index 9199fec3d..000000000
--- a/packages/common/pipes/file/parse-file-pipe.builder.ts
+++ /dev/null
@@ -1,43 +0,0 @@
-import {
-  FileTypeValidator,
-  FileTypeValidatorOptions,
-} from './file-type.validator';
-import { FileValidator } from './file-validator.interface';
-import {
-  MaxFileSizeValidator,
-  MaxFileSizeValidatorOptions,
-} from './max-file-size.validator';
-import { ParseFileOptions } from './parse-file-options.interface';
-import { ParseFilePipe } from './parse-file.pipe';
-
-/**
- * @publicApi
- */
-export class ParseFilePipeBuilder {
-  private validators: FileValidator[] = [];
-
-  addMaxSizeValidator(options: MaxFileSizeValidatorOptions) {
-    return this.addValidator(new MaxFileSizeValidator(options));
-  }
-
-  addFileTypeValidator(options: FileTypeValidatorOptions) {
-    return this.addValidator(new FileTypeValidator(options));
-  }
-
-  addValidator(validator: FileValidator) {
-    this.validators.push(validator);
-    return this;
-  }
-
-  build(
-    additionalOptions?: Omit<ParseFileOptions, 'validators'>,
-  ): ParseFilePipe {
-    const parseFilePipe = new ParseFilePipe({
-      ...additionalOptions,
-      validators: this.validators,
-    });
-
-    this.validators = [];
-    return parseFilePipe;
-  }
-}
diff --git a/packages/common/pipes/file/parse-file.pipe.ts b/packages/common/pipes/file/parse-file.pipe.ts
deleted file mode 100644
index d2ea60e50..000000000
--- a/packages/common/pipes/file/parse-file.pipe.ts
+++ /dev/null
@@ -1,90 +0,0 @@
-import { Injectable, Optional } from '../../decorators/core';
-import { HttpStatus } from '../../enums';
-import { PipeTransform } from '../../interfaces/features/pipe-transform.interface';
-import { HttpErrorByCode } from '../../utils/http-error-by-code.util';
-import { isEmpty, isObject, isUndefined } from '../../utils/shared.utils';
-import { FileValidator } from './file-validator.interface';
-import { ParseFileOptions } from './parse-file-options.interface';
-
-/**
- * Defines the built-in ParseFile Pipe. This pipe can be used to validate incoming files
- * with `@UploadedFile()` decorator. You can use either other specific built-in validators
- * or provide one of your own, simply implementing it through FileValidator interface
- * and adding it to ParseFilePipe's constructor.
- *
- * @see [Built-in Pipes](https://docs.nestjs.com/pipes#built-in-pipes)
- *
- * @publicApi
- */
-@Injectable()
-export class ParseFilePipe implements PipeTransform<any> {
-  protected exceptionFactory: (error: string) => any;
-  private readonly validators: FileValidator[];
-  private readonly fileIsRequired: boolean;
-
-  constructor(@Optional() options: ParseFileOptions = {}) {
-    const {
-      exceptionFactory,
-      errorHttpStatusCode = HttpStatus.BAD_REQUEST,
-      validators = [],
-      fileIsRequired,
-    } = options;
-
-    this.exceptionFactory =
-      exceptionFactory ||
-      (error => new HttpErrorByCode[errorHttpStatusCode](error));
-
-    this.validators = validators;
-    this.fileIsRequired = fileIsRequired ?? true;
-  }
-
-  async transform(value: any): Promise<any> {
-    const areThereAnyFilesIn = this.thereAreNoFilesIn(value);
-
-    if (areThereAnyFilesIn && this.fileIsRequired) {
-      throw this.exceptionFactory('File is required');
-    }
-    if (!areThereAnyFilesIn && this.validators.length) {
-      await this.validateFilesOrFile(value);
-    }
-
-    return value;
-  }
-
-  private async validateFilesOrFile(value: any): Promise<void> {
-    if (Array.isArray(value)) {
-      await Promise.all(value.map(f => this.validate(f)));
-    } else {
-      await this.validate(value);
-    }
-  }
-
-  private thereAreNoFilesIn(value: any): boolean {
-    const isEmptyArray = Array.isArray(value) && isEmpty(value);
-    const isEmptyObject = isObject(value) && isEmpty(Object.keys(value));
-    return isUndefined(value) || isEmptyArray || isEmptyObject;
-  }
-
-  protected async validate(file: any): Promise<any> {
-    for (const validator of this.validators) {
-      await this.validateOrThrow(file, validator);
-    }
-    return file;
-  }
-
-  private async validateOrThrow(file: any, validator: FileValidator) {
-    const isValid = await validator.isValid(file);
-
-    if (!isValid) {
-      const errorMessage = validator.buildErrorMessage(file);
-      throw this.exceptionFactory(errorMessage);
-    }
-  }
-
-  /**
-   * @returns list of validators used in this pipe.
-   */
-  getValidators() {
-    return this.validators;
-  }
-}
diff --git a/packages/common/pipes/index.ts b/packages/common/pipes/index.ts
index ebbc55f27..a69365493 100644
--- a/packages/common/pipes/index.ts
+++ b/packages/common/pipes/index.ts
@@ -6,4 +6,3 @@ export * from './parse-float.pipe';
 export * from './parse-enum.pipe';
 export * from './parse-uuid.pipe';
 export * from './validation.pipe';
-export * from './file';
diff --git a/packages/common/pipes/parse-array.pipe.ts b/packages/common/pipes/parse-array.pipe.ts
index a46acc8fd..125676458 100644
--- a/packages/common/pipes/parse-array.pipe.ts
+++ b/packages/common/pipes/parse-array.pipe.ts
@@ -7,15 +7,12 @@ import {
   PipeTransform,
 } from '../interfaces/features/pipe-transform.interface';
 import { HttpErrorByCode } from '../utils/http-error-by-code.util';
-import { isNil, isUndefined, isString } from '../utils/shared.utils';
+import { isNil, isString } from '../utils/shared.utils';
 import { ValidationPipe, ValidationPipeOptions } from './validation.pipe';
 
 const VALIDATION_ERROR_MESSAGE = 'Validation failed (parsable array expected)';
 const DEFAULT_ARRAY_SEPARATOR = ',';
 
-/**
- * @publicApi
- */
 export interface ParseArrayOptions
   extends Omit<
     ValidationPipeOptions,
@@ -39,7 +36,7 @@ export class ParseArrayPipe implements PipeTransform {
   protected readonly validationPipe: ValidationPipe;
   protected exceptionFactory: (error: string) => any;
 
-  constructor(@Optional() protected readonly options: ParseArrayOptions = {}) {
+  constructor(@Optional() private readonly options: ParseArrayOptions = {}) {
     this.validationPipe = new ValidationPipe({
       transform: true,
       validateCustomDecorators: true,
@@ -88,11 +85,10 @@ export class ParseArrayPipe implements PipeTransform {
 
       const isExpectedTypePrimitive = this.isExpectedTypePrimitive();
       const toClassInstance = (item: any, index?: number) => {
-        if (this.options.items !== String) {
-          try {
-            item = JSON.parse(item);
-          } catch {}
-        }
+        try {
+          item = JSON.parse(item);
+        } catch {}
+
         if (isExpectedTypePrimitive) {
           return this.validatePrimitive(item, index);
         }
@@ -145,19 +141,21 @@ export class ParseArrayPipe implements PipeTransform {
         originalValue !== null && originalValue !== '' ? +originalValue : NaN;
       if (isNaN(value)) {
         throw this.exceptionFactory(
-          `${isUndefined(index) ? '' : `[${index}] `}item must be a number`,
+          `${
+            typeof index !== 'undefined' ? `[${index}] ` : ''
+          }item must be a number`,
         );
       }
       return value;
     } else if (this.options.items === String) {
-      if (!isString(originalValue)) {
+      if (typeof originalValue !== 'string') {
         return `${originalValue}`;
       }
     } else if (this.options.items === Boolean) {
       if (typeof originalValue !== 'boolean') {
         throw this.exceptionFactory(
           `${
-            isUndefined(index) ? '' : `[${index}] `
+            typeof index !== 'undefined' ? `[${index}] ` : ''
           }item must be a boolean value`,
         );
       }
diff --git a/packages/common/pipes/parse-bool.pipe.ts b/packages/common/pipes/parse-bool.pipe.ts
index 7f6bdffef..5876144d9 100644
--- a/packages/common/pipes/parse-bool.pipe.ts
+++ b/packages/common/pipes/parse-bool.pipe.ts
@@ -10,9 +10,6 @@ import {
   HttpErrorByCode,
 } from '../utils/http-error-by-code.util';
 
-/**
- * @publicApi
- */
 export interface ParseBoolPipeOptions {
   errorHttpStatusCode?: ErrorHttpStatusCode;
   exceptionFactory?: (error: string) => any;
@@ -51,32 +48,14 @@ export class ParseBoolPipe
     value: string | boolean,
     metadata: ArgumentMetadata,
   ): Promise<boolean> {
-    if (this.isTrue(value)) {
+    if (value === true || value === 'true') {
       return true;
     }
-    if (this.isFalse(value)) {
+    if (value === false || value === 'false') {
       return false;
     }
     throw this.exceptionFactory(
       'Validation failed (boolean string is expected)',
     );
   }
-
-  /**
-   * @param value currently processed route argument
-   * @returns `true` if `value` is said 'true', ie., if it is equal to the boolean
-   * `true` or the string `"true"`
-   */
-  protected isTrue(value: string | boolean): boolean {
-    return value === true || value === 'true';
-  }
-
-  /**
-   * @param value currently processed route argument
-   * @returns `true` if `value` is said 'false', ie., if it is equal to the boolean
-   * `false` or the string `"false"`
-   */
-  protected isFalse(value: string | boolean): boolean {
-    return value === false || value === 'false';
-  }
 }
diff --git a/packages/common/pipes/parse-enum.pipe.ts b/packages/common/pipes/parse-enum.pipe.ts
index 11b4a6ca7..4f0fc8537 100644
--- a/packages/common/pipes/parse-enum.pipe.ts
+++ b/packages/common/pipes/parse-enum.pipe.ts
@@ -5,9 +5,6 @@ import {
   HttpErrorByCode,
 } from '../utils/http-error-by-code.util';
 
-/**
- * @publicApi
- */
 export interface ParseEnumPipeOptions {
   errorHttpStatusCode?: ErrorHttpStatusCode;
   exceptionFactory?: (error: string) => any;
@@ -62,6 +59,6 @@ export class ParseEnumPipe<T = any> implements PipeTransform<T> {
     const enumValues = Object.keys(this.enumType).map(
       item => this.enumType[item],
     );
-    return enumValues.includes(value);
+    return enumValues.indexOf(value) >= 0;
   }
 }
diff --git a/packages/common/pipes/parse-float.pipe.ts b/packages/common/pipes/parse-float.pipe.ts
index 462077efd..086152a9b 100644
--- a/packages/common/pipes/parse-float.pipe.ts
+++ b/packages/common/pipes/parse-float.pipe.ts
@@ -5,9 +5,6 @@ import {
   HttpErrorByCode,
 } from '../utils/http-error-by-code.util';
 
-/**
- * @publicApi
- */
 export interface ParseFloatPipeOptions {
   errorHttpStatusCode?: ErrorHttpStatusCode;
   exceptionFactory?: (error: string) => any;
@@ -42,23 +39,15 @@ export class ParseFloatPipe implements PipeTransform<string> {
    * @param metadata contains metadata about the currently processed route argument
    */
   async transform(value: string, metadata: ArgumentMetadata): Promise<number> {
-    if (!this.isNumeric(value)) {
+    const isNumeric =
+      ['string', 'number'].includes(typeof value) &&
+      !isNaN(parseFloat(value)) &&
+      isFinite(value as any);
+    if (!isNumeric) {
       throw this.exceptionFactory(
         'Validation failed (numeric string is expected)',
       );
     }
     return parseFloat(value);
   }
-
-  /**
-   * @param value currently processed route argument
-   * @returns `true` if `value` is a valid float number
-   */
-  protected isNumeric(value: string): boolean {
-    return (
-      ['string', 'number'].includes(typeof value) &&
-      !isNaN(parseFloat(value)) &&
-      isFinite(value as any)
-    );
-  }
 }
diff --git a/packages/common/pipes/parse-int.pipe.ts b/packages/common/pipes/parse-int.pipe.ts
index 11303c7e4..2ba713f85 100644
--- a/packages/common/pipes/parse-int.pipe.ts
+++ b/packages/common/pipes/parse-int.pipe.ts
@@ -10,9 +10,6 @@ import {
   HttpErrorByCode,
 } from '../utils/http-error-by-code.util';
 
-/**
- * @publicApi
- */
 export interface ParseIntPipeOptions {
   errorHttpStatusCode?: ErrorHttpStatusCode;
   exceptionFactory?: (error: string) => any;
@@ -47,23 +44,15 @@ export class ParseIntPipe implements PipeTransform<string> {
    * @param metadata contains metadata about the currently processed route argument
    */
   async transform(value: string, metadata: ArgumentMetadata): Promise<number> {
-    if (!this.isNumeric(value)) {
+    const isNumeric =
+      ['string', 'number'].includes(typeof value) &&
+      /^-?\d+$/.test(value) &&
+      isFinite(value as any);
+    if (!isNumeric) {
       throw this.exceptionFactory(
         'Validation failed (numeric string is expected)',
       );
     }
     return parseInt(value, 10);
   }
-
-  /**
-   * @param value currently processed route argument
-   * @returns `true` if `value` is a valid integer number
-   */
-  protected isNumeric(value: string): boolean {
-    return (
-      ['string', 'number'].includes(typeof value) &&
-      /^-?\d+$/.test(value) &&
-      isFinite(value as any)
-    );
-  }
 }
diff --git a/packages/common/pipes/parse-uuid.pipe.ts b/packages/common/pipes/parse-uuid.pipe.ts
index 2379e36b6..2679e8f93 100644
--- a/packages/common/pipes/parse-uuid.pipe.ts
+++ b/packages/common/pipes/parse-uuid.pipe.ts
@@ -9,32 +9,16 @@ import {
   ErrorHttpStatusCode,
   HttpErrorByCode,
 } from '../utils/http-error-by-code.util';
-import { isString } from '../utils/shared.utils';
+import { isUUID } from '../utils/is-uuid';
 
-/**
- * @publicApi
- */
 export interface ParseUUIDPipeOptions {
   version?: '3' | '4' | '5';
   errorHttpStatusCode?: ErrorHttpStatusCode;
   exceptionFactory?: (errors: string) => any;
 }
 
-/**
- * Defines the built-in ParseUUID Pipe
- *
- * @see [Built-in Pipes](https://docs.nestjs.com/pipes#built-in-pipes)
- *
- * @publicApi
- */
 @Injectable()
 export class ParseUUIDPipe implements PipeTransform<string> {
-  protected static uuidRegExps = {
-    3: /^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,
-    4: /^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,
-    5: /^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,
-    all: /^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,
-  };
   private readonly version: '3' | '4' | '5';
   protected exceptionFactory: (errors: string) => any;
 
@@ -51,23 +35,14 @@ export class ParseUUIDPipe implements PipeTransform<string> {
       exceptionFactory ||
       (error => new HttpErrorByCode[errorHttpStatusCode](error));
   }
-
   async transform(value: string, metadata: ArgumentMetadata): Promise<string> {
-    if (!this.isUUID(value, this.version)) {
+    if (!isUUID(value, this.version)) {
       throw this.exceptionFactory(
-        `Validation failed (uuid${
-          this.version ? ` v ${this.version}` : ''
+        `Validation failed (uuid ${
+          this.version ? 'v' + this.version : ''
         } is expected)`,
       );
     }
     return value;
   }
-
-  protected isUUID(str: unknown, version = 'all') {
-    if (!isString(str)) {
-      throw this.exceptionFactory('The value passed as UUID is not a string');
-    }
-    const pattern = ParseUUIDPipe.uuidRegExps[version];
-    return pattern?.test(str);
-  }
 }
diff --git a/packages/common/pipes/validation.pipe.ts b/packages/common/pipes/validation.pipe.ts
index d86326181..483498796 100644
--- a/packages/common/pipes/validation.pipe.ts
+++ b/packages/common/pipes/validation.pipe.ts
@@ -1,5 +1,4 @@
 import { iterate } from 'iterare';
-import { types } from 'util';
 import { Optional } from '../decorators';
 import { Injectable } from '../decorators/core';
 import { HttpStatus } from '../enums/http-status.enum';
@@ -18,11 +17,8 @@ import {
   HttpErrorByCode,
 } from '../utils/http-error-by-code.util';
 import { loadPackage } from '../utils/load-package.util';
-import { isNil, isUndefined } from '../utils/shared.utils';
+import { isNil } from '../utils/shared.utils';
 
-/**
- * @publicApi
- */
 export interface ValidationPipeOptions extends ValidatorOptions {
   transform?: boolean;
   disableErrorMessages?: boolean;
@@ -38,11 +34,6 @@ export interface ValidationPipeOptions extends ValidatorOptions {
 let classValidator: ValidatorPackage = {} as any;
 let classTransformer: TransformerPackage = {} as any;
 
-/**
- * @see [Validation](https://docs.nestjs.com/techniques/validation)
- *
- * @publicApi
- */
 @Injectable()
 export class ValidationPipe implements PipeTransform<any> {
   protected isTransformEnabled: boolean;
@@ -66,10 +57,8 @@ export class ValidationPipe implements PipeTransform<any> {
       ...validatorOptions
     } = options;
 
-    // @see https://github.com/nestjs/nest/issues/10683#issuecomment-1413690508
-    this.validatorOptions = { forbidUnknownValues: false, ...validatorOptions };
-
     this.isTransformEnabled = !!transform;
+    this.validatorOptions = validatorOptions;
     this.transformOptions = transformOptions;
     this.isDetailedOutputDisabled = disableErrorMessages;
     this.validateCustomDecorators = validateCustomDecorators || false;
@@ -155,11 +144,7 @@ export class ValidationPipe implements PipeTransform<any> {
       // if the value was originally undefined or null, revert it back
       return originalValue;
     }
-    // we check if the number of keys of the "validatorOptions" is higher than 1 (instead of 0)
-    // because the "forbidUnknownValues" now fallbacks to "false" (in case it wasn't explicitly specified)
-    const shouldTransformToPlain =
-      Object.keys(this.validatorOptions).length > 1;
-    return shouldTransformToPlain
+    return Object.keys(this.validatorOptions).length > 0
       ? classTransformer.classToPlain(entity, this.transformOptions)
       : value;
   }
@@ -193,13 +178,6 @@ export class ValidationPipe implements PipeTransform<any> {
       return value;
     }
     if (metatype === Boolean) {
-      if (isUndefined(value)) {
-        // This is an workaround to deal with optional boolean values since
-        // optional booleans shouldn't be parsed to a valid boolean when
-        // they were not defined
-        return undefined;
-      }
-      // Any fasly value but `undefined` will be parsed to `false`
       return value === true || value === 'true';
     }
     if (metatype === Number) {
@@ -212,24 +190,12 @@ export class ValidationPipe implements PipeTransform<any> {
     return isNil(value) ? {} : value;
   }
 
-  protected stripProtoKeys(value: any) {
-    if (
-      value == null ||
-      typeof value !== 'object' ||
-      types.isTypedArray(value)
-    ) {
-      return;
-    }
-    if (Array.isArray(value)) {
-      for (const v of value) {
-        this.stripProtoKeys(v);
-      }
-      return;
-    }
+  protected stripProtoKeys(value: Record<string, any>) {
     delete value.__proto__;
-    for (const key in value) {
-      this.stripProtoKeys(value[key]);
-    }
+    const keys = Object.keys(value);
+    iterate(keys)
+      .filter(key => typeof value[key] === 'object' && value[key])
+      .forEach(key => this.stripProtoKeys(value[key]));
   }
 
   protected isPrimitive(value: unknown): boolean {
diff --git a/packages/common/serializer/class-serializer.interceptor.ts b/packages/common/serializer/class-serializer.interceptor.ts
index 3773fddc0..7513447b0 100644
--- a/packages/common/serializer/class-serializer.interceptor.ts
+++ b/packages/common/serializer/class-serializer.interceptor.ts
@@ -1,4 +1,3 @@
-import { ClassSerializerContextOptions } from './class-serializer.interfaces';
 import { Observable } from 'rxjs';
 import { map } from 'rxjs/operators';
 import { Inject, Injectable, Optional } from '../decorators/core';
@@ -21,17 +20,11 @@ export interface PlainLiteralObject {
 // between core and common packages
 const REFLECTOR = 'Reflector';
 
-/**
- * @publicApi
- */
 export interface ClassSerializerInterceptorOptions
   extends ClassTransformOptions {
   transformerPackage?: TransformerPackage;
 }
 
-/**
- * @publicApi
- */
 @Injectable()
 export class ClassSerializerInterceptor implements NestInterceptor {
   constructor(
@@ -70,7 +63,7 @@ export class ClassSerializerInterceptor implements NestInterceptor {
    */
   serialize(
     response: PlainLiteralObject | Array<PlainLiteralObject>,
-    options: ClassSerializerContextOptions,
+    options: ClassTransformOptions,
   ): PlainLiteralObject | Array<PlainLiteralObject> {
     if (!isObject(response) || response instanceof StreamableFile) {
       return response;
@@ -83,27 +76,25 @@ export class ClassSerializerInterceptor implements NestInterceptor {
 
   transformToPlain(
     plainOrClass: any,
-    options: ClassSerializerContextOptions,
+    options: ClassTransformOptions,
   ): PlainLiteralObject {
-    if (!plainOrClass) {
-      return plainOrClass;
-    }
-    if (!options.type) {
-      return classTransformer.classToPlain(plainOrClass, options);
-    }
-    if (plainOrClass instanceof options.type) {
-      return classTransformer.classToPlain(plainOrClass, options);
-    }
-    const instance = classTransformer.plainToClass(options.type, plainOrClass);
-    return classTransformer.classToPlain(instance, options);
+    return plainOrClass
+      ? classTransformer.classToPlain(plainOrClass, options)
+      : plainOrClass;
   }
 
   protected getContextOptions(
     context: ExecutionContext,
-  ): ClassSerializerContextOptions | undefined {
-    return this.reflector.getAllAndOverride(CLASS_SERIALIZER_OPTIONS, [
-      context.getHandler(),
-      context.getClass(),
-    ]);
+  ): ClassTransformOptions | undefined {
+    return (
+      this.reflectSerializeMetadata(context.getHandler()) ||
+      this.reflectSerializeMetadata(context.getClass())
+    );
+  }
+
+  private reflectSerializeMetadata(
+    obj: object | Function,
+  ): ClassTransformOptions | undefined {
+    return this.reflector.get(CLASS_SERIALIZER_OPTIONS, obj);
   }
 }
diff --git a/packages/common/serializer/class-serializer.interfaces.ts b/packages/common/serializer/class-serializer.interfaces.ts
deleted file mode 100644
index c5404177c..000000000
--- a/packages/common/serializer/class-serializer.interfaces.ts
+++ /dev/null
@@ -1,9 +0,0 @@
-import { ClassTransformOptions } from '../interfaces/external/class-transform-options.interface';
-import { Type } from '../interfaces';
-
-/**
- * @publicApi
- */
-export interface ClassSerializerContextOptions extends ClassTransformOptions {
-  type?: Type<any>;
-}
diff --git a/packages/common/serializer/decorators/serialize-options.decorator.ts b/packages/common/serializer/decorators/serialize-options.decorator.ts
index bd92695fd..130dd992d 100644
--- a/packages/common/serializer/decorators/serialize-options.decorator.ts
+++ b/packages/common/serializer/decorators/serialize-options.decorator.ts
@@ -1,9 +1,6 @@
 import { SetMetadata } from '../../decorators';
-import { ClassSerializerContextOptions } from '../class-serializer.interfaces';
+import { ClassTransformOptions } from '../../interfaces/external/class-transform-options.interface';
 import { CLASS_SERIALIZER_OPTIONS } from '../class-serializer.constants';
 
-/**
- * @publicApi
- */
-export const SerializeOptions = (options: ClassSerializerContextOptions) =>
+export const SerializeOptions = (options: ClassTransformOptions) =>
   SetMetadata(CLASS_SERIALIZER_OPTIONS, options);
diff --git a/packages/common/serializer/index.ts b/packages/common/serializer/index.ts
index 828c4aec4..682c46707 100644
--- a/packages/common/serializer/index.ts
+++ b/packages/common/serializer/index.ts
@@ -1,3 +1,2 @@
 export * from './class-serializer.interceptor';
 export * from './decorators';
-export * from './class-serializer.interfaces';
diff --git a/packages/common/services/console-logger.service.ts b/packages/common/services/console-logger.service.ts
index 5b2f4c408..d5a4612ae 100644
--- a/packages/common/services/console-logger.service.ts
+++ b/packages/common/services/console-logger.service.ts
@@ -1,11 +1,7 @@
-import { Injectable, Optional } from '../decorators/core';
+import { Injectable } from '../decorators/core/injectable.decorator';
+import { Optional } from '../decorators/core/optional.decorator';
 import { clc, yellow } from '../utils/cli-colors.util';
-import {
-  isFunction,
-  isPlainObject,
-  isString,
-  isUndefined,
-} from '../utils/shared.utils';
+import { isPlainObject } from '../utils/shared.utils';
 import { LoggerService, LogLevel } from './logger.service';
 import { isLogLevelEnabled } from './utils';
 
@@ -28,15 +24,6 @@ const DEFAULT_LOG_LEVELS: LogLevel[] = [
   'verbose',
 ];
 
-const dateTimeFormatter = new Intl.DateTimeFormat(undefined, {
-  year: 'numeric',
-  hour: 'numeric',
-  minute: 'numeric',
-  second: 'numeric',
-  day: '2-digit',
-  month: '2-digit',
-});
-
 @Injectable()
 export class ConsoleLogger implements LoggerService {
   private static lastTimestampAt?: number;
@@ -176,7 +163,18 @@ export class ConsoleLogger implements LoggerService {
   }
 
   protected getTimestamp(): string {
-    return dateTimeFormatter.format(Date.now());
+    const localeStringOptions = {
+      year: 'numeric',
+      hour: 'numeric',
+      minute: 'numeric',
+      second: 'numeric',
+      day: '2-digit',
+      month: '2-digit',
+    };
+    return new Date(Date.now()).toLocaleString(
+      undefined,
+      localeStringOptions as Intl.DateTimeFormatOptions,
+    );
   }
 
   protected printMessages(
@@ -185,65 +183,27 @@ export class ConsoleLogger implements LoggerService {
     logLevel: LogLevel = 'log',
     writeStreamType?: 'stdout' | 'stderr',
   ) {
+    const color = this.getColorByLogLevel(logLevel);
     messages.forEach(message => {
-      const pidMessage = this.formatPid(process.pid);
-      const contextMessage = this.formatContext(context);
+      const output = isPlainObject(message)
+        ? `${color('Object:')}\n${JSON.stringify(
+            message,
+            (key, value) =>
+              typeof value === 'bigint' ? value.toString() : value,
+            2,
+          )}\n`
+        : color(message as string);
+
+      const pidMessage = color(`[Nest] ${process.pid}  - `);
+      const contextMessage = context ? yellow(`[${context}] `) : '';
       const timestampDiff = this.updateAndGetTimestampDiff();
-      const formattedLogLevel = logLevel.toUpperCase().padStart(7, ' ');
-      const formattedMessage = this.formatMessage(
-        logLevel,
-        message,
-        pidMessage,
-        formattedLogLevel,
-        contextMessage,
-        timestampDiff,
-      );
+      const formattedLogLevel = color(logLevel.toUpperCase().padStart(7, ' '));
+      const computedMessage = `${pidMessage}${this.getTimestamp()} ${formattedLogLevel} ${contextMessage}${output}${timestampDiff}\n`;
 
-      process[writeStreamType ?? 'stdout'].write(formattedMessage);
+      process[writeStreamType ?? 'stdout'].write(computedMessage);
     });
   }
 
-  protected formatPid(pid: number) {
-    return `[Nest] ${pid}  - `;
-  }
-
-  protected formatContext(context: string): string {
-    return context ? yellow(`[${context}] `) : '';
-  }
-
-  protected formatMessage(
-    logLevel: LogLevel,
-    message: unknown,
-    pidMessage: string,
-    formattedLogLevel: string,
-    contextMessage: string,
-    timestampDiff: string,
-  ) {
-    const output = this.stringifyMessage(message, logLevel);
-    pidMessage = this.colorize(pidMessage, logLevel);
-    formattedLogLevel = this.colorize(formattedLogLevel, logLevel);
-    return `${pidMessage}${this.getTimestamp()} ${formattedLogLevel} ${contextMessage}${output}${timestampDiff}\n`;
-  }
-
-  protected stringifyMessage(message: unknown, logLevel: LogLevel) {
-    // If the message is a function, call it and re-resolve its value.
-    return isFunction(message)
-      ? this.stringifyMessage(message(), logLevel)
-      : isPlainObject(message) || Array.isArray(message)
-      ? `${this.colorize('Object:', logLevel)}\n${JSON.stringify(
-          message,
-          (key, value) =>
-            typeof value === 'bigint' ? value.toString() : value,
-          2,
-        )}\n`
-      : this.colorize(message as string, logLevel);
-  }
-
-  protected colorize(message: string, logLevel: LogLevel) {
-    const color = this.getColorByLogLevel(logLevel);
-    return color(message);
-  }
-
   protected printStackTrace(stack: string) {
     if (!stack) {
       return;
@@ -251,26 +211,22 @@ export class ConsoleLogger implements LoggerService {
     process.stderr.write(`${stack}\n`);
   }
 
-  protected updateAndGetTimestampDiff(): string {
+  private updateAndGetTimestampDiff(): string {
     const includeTimestamp =
       ConsoleLogger.lastTimestampAt && this.options?.timestamp;
     const result = includeTimestamp
-      ? this.formatTimestampDiff(Date.now() - ConsoleLogger.lastTimestampAt)
+      ? yellow(` +${Date.now() - ConsoleLogger.lastTimestampAt}ms`)
       : '';
     ConsoleLogger.lastTimestampAt = Date.now();
     return result;
   }
 
-  protected formatTimestampDiff(timestampDiff: number) {
-    return yellow(` +${timestampDiff}ms`);
-  }
-
   private getContextAndMessagesToPrint(args: unknown[]) {
     if (args?.length <= 1) {
       return { messages: args, context: this.context };
     }
     const lastElement = args[args.length - 1];
-    const isContext = isString(lastElement);
+    const isContext = typeof lastElement === 'string';
     if (!isContext) {
       return { messages: args, context: this.context };
     }
@@ -286,9 +242,8 @@ export class ConsoleLogger implements LoggerService {
       return { messages, context };
     }
     const lastElement = messages[messages.length - 1];
-    const isStack = isString(lastElement);
-    // https://github.com/nestjs/nest/issues/11074#issuecomment-1421680060
-    if (!isStack && !isUndefined(lastElement)) {
+    const isStack = typeof lastElement === 'string';
+    if (!isStack) {
       return { messages, context };
     }
     return {
diff --git a/packages/common/services/logger.service.ts b/packages/common/services/logger.service.ts
index 0ac2c8378..962822b13 100644
--- a/packages/common/services/logger.service.ts
+++ b/packages/common/services/logger.service.ts
@@ -1,16 +1,11 @@
-import { Injectable, Optional } from '../decorators/core';
+import { Injectable } from '../decorators/core/injectable.decorator';
+import { Optional } from '../decorators/core/optional.decorator';
 import { isObject } from '../utils/shared.utils';
 import { ConsoleLogger } from './console-logger.service';
 import { isLogLevelEnabled } from './utils';
 
-/**
- * @publicApi
- */
 export type LogLevel = 'log' | 'error' | 'warn' | 'debug' | 'verbose';
 
-/**
- * @publicApi
- */
 export interface LoggerService {
   /**
    * Write a 'log' level log.
@@ -58,18 +53,6 @@ interface LogBufferRecord {
 
 const DEFAULT_LOGGER = new ConsoleLogger();
 
-const dateTimeFormatter = new Intl.DateTimeFormat(undefined, {
-  year: 'numeric',
-  hour: 'numeric',
-  minute: 'numeric',
-  second: 'numeric',
-  day: '2-digit',
-  month: '2-digit',
-});
-
-/**
- * @publicApi
- */
 @Injectable()
 export class Logger implements LoggerService {
   protected static logBuffer = new Array<LogBufferRecord>();
@@ -125,9 +108,7 @@ export class Logger implements LoggerService {
   @Logger.WrapBuffer
   error(message: any, ...optionalParams: any[]) {
     optionalParams = this.context
-      ? (optionalParams.length ? optionalParams : [undefined]).concat(
-          this.context,
-        )
+      ? optionalParams.concat(this.context)
       : optionalParams;
 
     this.localInstance?.error(message, ...optionalParams);
@@ -253,7 +234,7 @@ export class Logger implements LoggerService {
 
   /**
    * Attach buffer.
-   * Turns on initialization logs buffering.
+   * Turns on initialisation logs buffering.
    */
   static attachBuffer() {
     this.isBufferAttached = true;
@@ -261,14 +242,25 @@ export class Logger implements LoggerService {
 
   /**
    * Detach buffer.
-   * Turns off initialization logs buffering.
+   * Turns off initialisation logs buffering.
    */
   static detachBuffer() {
     this.isBufferAttached = false;
   }
 
   static getTimestamp() {
-    return dateTimeFormatter.format(Date.now());
+    const localeStringOptions = {
+      year: 'numeric',
+      hour: 'numeric',
+      minute: 'numeric',
+      second: 'numeric',
+      day: '2-digit',
+      month: '2-digit',
+    };
+    return new Date(Date.now()).toLocaleString(
+      undefined,
+      localeStringOptions as Intl.DateTimeFormatOptions,
+    );
   }
 
   static overrideLogger(logger: LoggerService | LogLevel[] | boolean) {
@@ -278,7 +270,7 @@ export class Logger implements LoggerService {
     }
     if (isObject(logger)) {
       if (logger instanceof Logger && logger.constructor !== Logger) {
-        const errorMessage = `Using the "extends Logger" instruction is not allowed in Nest v9. Please, use "extends ConsoleLogger" instead.`;
+        const errorMessage = `Using the "extends Logger" instruction is not allowed in Nest v8. Please, use "extends ConsoleLogger" instead.`;
         this.staticInstanceRef.error(errorMessage);
         throw new Error(errorMessage);
       }
diff --git a/packages/common/tsconfig.build.json b/packages/common/tsconfig.build.json
deleted file mode 100644
index 2d16c3a20..000000000
--- a/packages/common/tsconfig.build.json
+++ /dev/null
@@ -1,10 +0,0 @@
-{
-  "extends": "../tsconfig.build.json",
-  "compilerOptions": {
-    "outDir": ".",
-    "rootDir": ".",
-    "paths": {}
-  },
-  "exclude": ["node_modules", "dist", "test/**/*", "*.spec.ts"],
-  "references": []
-}
diff --git a/packages/common/tsconfig.json b/packages/common/tsconfig.json
index 2ae9e3c90..b238080a4 100644
--- a/packages/common/tsconfig.json
+++ b/packages/common/tsconfig.json
@@ -1,13 +1,7 @@
 {
-  "extends": "../tsconfig.build.json",
+  "extends": "./../tsconfig.base.json",
   "compilerOptions": {
-    "types": ["node"]
+    "baseUrl": "./"
   },
-  "files": [],
-  "include": [],
-  "references": [
-    {
-      "path": "./tsconfig.build.json"
-    }
-  ]
+  "include": ["*.ts", "**/*.ts"]
 }
diff --git a/packages/common/utils/assign-custom-metadata.util.ts b/packages/common/utils/assign-custom-metadata.util.ts
index 38bd926db..3fb311647 100644
--- a/packages/common/utils/assign-custom-metadata.util.ts
+++ b/packages/common/utils/assign-custom-metadata.util.ts
@@ -1,4 +1,4 @@
-import { CUSTOM_ROUTE_ARGS_METADATA } from '../constants';
+import { CUSTOM_ROUTE_AGRS_METADATA } from '../constants';
 import {
   ParamData,
   RouteParamMetadata,
@@ -16,7 +16,7 @@ export function assignCustomParameterMetadata(
 ) {
   return {
     ...args,
-    [`${paramtype}${CUSTOM_ROUTE_ARGS_METADATA}:${index}`]: {
+    [`${paramtype}${CUSTOM_ROUTE_AGRS_METADATA}:${index}`]: {
       index,
       factory,
       data,
diff --git a/packages/common/utils/cli-colors.util.ts b/packages/common/utils/cli-colors.util.ts
index 738fbc6d3..8efd61670 100644
--- a/packages/common/utils/cli-colors.util.ts
+++ b/packages/common/utils/cli-colors.util.ts
@@ -5,7 +5,6 @@ const colorIfAllowed = (colorFn: ColorTextFn) => (text: string) =>
   isColorAllowed() ? colorFn(text) : text;
 
 export const clc = {
-  bold: colorIfAllowed((text: string) => `\x1B[1m${text}\x1B[0m`),
   green: colorIfAllowed((text: string) => `\x1B[32m${text}\x1B[39m`),
   yellow: colorIfAllowed((text: string) => `\x1B[33m${text}\x1B[39m`),
   red: colorIfAllowed((text: string) => `\x1B[31m${text}\x1B[39m`),
diff --git a/packages/common/utils/forward-ref.util.ts b/packages/common/utils/forward-ref.util.ts
index 1b380c022..a43ac6df2 100644
--- a/packages/common/utils/forward-ref.util.ts
+++ b/packages/common/utils/forward-ref.util.ts
@@ -1,8 +1,5 @@
 import { ForwardReference } from '../interfaces/modules/forward-reference.interface';
 
-/**
- * @publicApi
- */
 export const forwardRef = (fn: () => any): ForwardReference => ({
   forwardRef: fn,
 });
diff --git a/packages/common/utils/is-uuid.ts b/packages/common/utils/is-uuid.ts
new file mode 100644
index 000000000..4c5474ade
--- /dev/null
+++ b/packages/common/utils/is-uuid.ts
@@ -0,0 +1,16 @@
+import { BadRequestException } from '../exceptions';
+
+const uuid = {
+  3: /^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,
+  4: /^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,
+  5: /^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,
+  all: /^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,
+};
+
+export function isUUID(str: any, version = 'all') {
+  if (typeof str !== 'string') {
+    throw new BadRequestException('The value passed as UUID is not a string');
+  }
+  const pattern = uuid[version];
+  return pattern && pattern.test(str);
+}
diff --git a/packages/common/utils/random-string-generator.util.ts b/packages/common/utils/random-string-generator.util.ts
index 7e39be7b5..6897e6e7d 100644
--- a/packages/common/utils/random-string-generator.util.ts
+++ b/packages/common/utils/random-string-generator.util.ts
@@ -1,3 +1,3 @@
-import { uid } from 'uid';
+import { v4 as uuid } from 'uuid';
 
-export const randomStringGenerator = () => uid(21);
+export const randomStringGenerator = () => uuid();
diff --git a/packages/common/utils/select-exception-filter-metadata.util.ts b/packages/common/utils/select-exception-filter-metadata.util.ts
deleted file mode 100644
index e1e1661f5..000000000
--- a/packages/common/utils/select-exception-filter-metadata.util.ts
+++ /dev/null
@@ -1,13 +0,0 @@
-import { ExceptionFilterMetadata } from '../interfaces/exceptions';
-
-export const selectExceptionFilterMetadata = <T = any>(
-  filters: ExceptionFilterMetadata[],
-  exception: T,
-): ExceptionFilterMetadata | undefined =>
-  filters.find(
-    ({ exceptionMetatypes }) =>
-      !exceptionMetatypes.length ||
-      exceptionMetatypes.some(
-        ExceptionMetaType => exception instanceof ExceptionMetaType,
-      ),
-  );
diff --git a/packages/common/utils/shared.utils.ts b/packages/common/utils/shared.utils.ts
index 876b41551..d988f0139 100644
--- a/packages/common/utils/shared.utils.ts
+++ b/packages/common/utils/shared.utils.ts
@@ -31,6 +31,12 @@ export const addLeadingSlash = (path?: string): string =>
       : path
     : '';
 
+/**
+ * Deprecated. Use the "addLeadingSlash" function instead.
+ * @deprecated
+ */
+export const validatePath = addLeadingSlash;
+
 export const normalizePath = (path?: string): string =>
   path
     ? path.startsWith('/')
@@ -41,12 +47,10 @@ export const normalizePath = (path?: string): string =>
 export const stripEndSlash = (path: string) =>
   path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;
 
-export const isFunction = (val: any): val is Function =>
-  typeof val === 'function';
-export const isString = (val: any): val is string => typeof val === 'string';
-export const isNumber = (val: any): val is number => typeof val === 'number';
-export const isConstructor = (val: any): boolean => val === 'constructor';
-export const isNil = (val: any): val is null | undefined =>
-  isUndefined(val) || val === null;
+export const isFunction = (fn: any): boolean => typeof fn === 'function';
+export const isString = (fn: any): fn is string => typeof fn === 'string';
+export const isConstructor = (fn: any): boolean => fn === 'constructor';
+export const isNil = (obj: any): obj is null | undefined =>
+  isUndefined(obj) || obj === null;
 export const isEmpty = (array: any): boolean => !(array && array.length > 0);
-export const isSymbol = (val: any): val is symbol => typeof val === 'symbol';
+export const isSymbol = (fn: any): fn is symbol => typeof fn === 'symbol';
diff --git a/packages/core/CHANGELOG.md b/packages/core/CHANGELOG.md
new file mode 100644
index 000000000..f16fa8cd1
--- /dev/null
+++ b/packages/core/CHANGELOG.md
@@ -0,0 +1,12 @@
+# Change Log
+
+All notable changes to this project will be documented in this file.
+See [Conventional Commits](https://conventionalcommits.org) for commit guidelines.
+
+<a name="8.2.0"></a>
+# [8.2.0](https://github.com/nestjs/nest/compare/v8.1.2...v8.2.0) (2021-11-08)
+
+
+
+
+**Note:** Version bump only for package @nestjs/core
diff --git a/packages/core/Readme.md b/packages/core/Readme.md
index 16f48336d..f288809a9 100644
--- a/packages/core/Readme.md
+++ b/packages/core/Readme.md
@@ -11,6 +11,7 @@
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/l/@nestjs/core.svg" alt="Package License" /></a>
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/dm/@nestjs/common.svg" alt="NPM Downloads" /></a>
 <a href="https://circleci.com/gh/nestjs/nest" target="_blank"><img src="https://img.shields.io/circleci/build/github/nestjs/nest/master" alt="CircleCI" /></a>
+<a href="https://coveralls.io/github/nestjs/nest?branch=master" target="_blank"><img src="https://coveralls.io/repos/github/nestjs/nest/badge.svg?branch=master#9" alt="Coverage" /></a>
 <a href="https://discord.gg/G7Qnnhy" target="_blank"><img src="https://img.shields.io/badge/discord-online-brightgreen.svg" alt="Discord"/></a>
 <a href="https://opencollective.com/nest#backer" target="_blank"><img src="https://opencollective.com/nest/backers/badge.svg" alt="Backers on Open Collective" /></a>
 <a href="https://opencollective.com/nest#sponsor" target="_blank"><img src="https://opencollective.com/nest/sponsors/badge.svg" alt="Sponsors on Open Collective" /></a>
@@ -36,8 +37,8 @@ Nest is a framework for building efficient, scalable <a href="http://nodejs.org"
 
 * To check out the [guide](https://docs.nestjs.com), visit [docs.nestjs.com](https://docs.nestjs.com). :books:
 * 要查看中文 [指南](readme_zh.md), 请访问 [docs.nestjs.cn](https://docs.nestjs.cn). :books:
-* [가이드](readme_kr.md) 문서는 [docs.nestjs.com](https://docs.nestjs.com)에서 확인하실 수 있습니다. :books:
-* [ガイド](readme_jp.md)は [docs.nestjs.com](https://docs.nestjs.com)でご確認ください。 :books:
+* [가이드](readme_kr.md)를 확인하려면, [docs.nestjs.com](https://docs.nestjs.com)를 방문하세요.:books: 
+* チェックするには [ガイド](readme_jp.md), 詳しくは [docs.nestjs.com](https://docs.nestjs.com). :books: 
 
 ## Questions
 
@@ -53,49 +54,36 @@ With official support, you can get expert help straight from Nest core team. We
 
 ## Support
 
-Nest is an MIT-licensed open source project. It can grow thanks to the sponsors and support from the amazing backers. If you'd like to join them, please [read more here](https://docs.nestjs.com/support).
+Nest is an MIT-licensed open source project. It can grow thanks to the sponsors and support by the amazing backers. If you'd like to join them, please [read more here](https://docs.nestjs.com/support).
 
 #### Principal Sponsors
 <table style="text-align:center;"><tr>
   <td><a href="https://trilon.io" target="_blank"><img src="https://nestjs.com/img/trilon.svg" width="200" valign="middle" /></a></td>
-  <td><a href="https://www.redhat.com" target="_blank"><img src="https://nestjs.com/img/red-hat-logo.svg" width="200" valign="middle" /></a></td>
 <td>
 <a href="https://github.com/Sanofi-IADC" target="_blank"><img src="https://docs.nestjs.com/assets/sponsors/sanofi.png" width="180" valign="middle" /></a></td>
 <td>
 <a href="https://nx.dev" target="_blank"><img src="https://nestjs.com/img/nx-logo.png" height="45" valign="middle" /></a></td>
-    <td>
-<a href="https://valor-software.com/" target="_blank"><img src="https://docs.nestjs.com/assets/sponsors/valor-software.png" width="170" valign="middle" /></a></td><td>
-<a href="https://amplication.com/" target="_blank"><img src="https://nestjs.com/img/amplication-logo.svg" width="190" valign="middle" /></a></td>
 </tr></table>
 
 #### Gold Sponsors
 
 <table style="text-align:center;"><tr><td>
-<a href="https://weld.app/" target="_blank"><img src="https://nestjs.com/img/weld-logo.svg" width="140" valign="middle" /></a></td>
+  <a href="https://careers.labster.com/departments/platform" target="_blank"><img src="https://nestjs.com/img/labster-logo.png" width="170" valign="middle" /></a></td><td>
+<a href="https://weld.app/" target="_blank"><img src="https://nestjs.com/img/weld-logo.svg" width="150" valign="middle" /></a></td>
+  <td>
+<a href="https://valor-software.com/" target="_blank"><img src="https://docs.nestjs.com/assets/sponsors/valor-software.png" width="170" valign="middle" /></a></td>
 <td>
-<a href="https://intrinsic.ventures/" target="_blank"><img src="https://nestjs.com/img/intrinisic-logo.png" width="210" valign="middle" /></a></td>
- <td>
-<a href="https://jetbrains.com/" target="_blank"><img src="https://nestjs.com/img/jetbrains-logo.svg" width="110" valign="middle" /></a></td><td>
-<a href="https://snyk.co/nestjs" target="_blank"><img src="https://nestjs.com/img/snyk-logo-black.png" width="185" valign="middle" /></a></td><td>
-<a href="https://fuseautotech.com/" target="_blank"><img src="https://nestjs.com/img/fuse-logo.svg" width="105" valign="middle" /></a></td>
-<td>
-<a href="https://ridicorp.com/career/" target="_blank"><img src="https://nestjs.com/img/ridi-logo.svg" width="105" valign="middle" /></a></td><td>
-<a href="https://www.movavi.com/imovie-for-windows.html" target="_blank"><img src="https://nestjs.com/img/movavi-logo.svg" width="105" valign="middle" /></a></td></</tr></table>
+<a href="https://intrinsic.ventures/" target="_blank"><img src="https://nestjs.com/img/intrinisic-logo.png" width="210" valign="middle" /></a></td></</tr></table>
 
 #### Silver Sponsors
 
 <table style="text-align:center;"><tr><td>
 <a href="https://neoteric.eu/" target="_blank"><img src="https://nestjs.com/img/neoteric-cut.png" width="120" valign="middle" /></a> </td><td>
   <a href="http://gojob.com" target="_blank"><img src="http://nestjs.com/img/gojob-logo.png" valign="middle" width="100" /></a> </td><td>
-<a href="https://www.myleodsc.com/" target="_blank"><img src="https://nestjs.com/img/myleo-logo.png" width="180" valign="middle" /></td><td>
+<a href="http://www.leogistics.com" target="_blank"><img src="https://nestjs.com/img/leogistics-logo.jpeg" width="150" valign="middle" /></td><td>
 <a href="https://careers.meetdandy.com/?gh_src=063ba61e3us" target="_blank"><img src="https://nestjs.com/img/dandy-roles-logo.svg" width="150" valign="middle" /></td><td>
 <a href="https://www.castlecraft.in" target="_blank"><img src="https://nestjs.com/img/castlecraft-logo.png" width="150" valign="middle" /></td>
-<td><a href="https://www.tinystacks.com" target="_blank"><img src="https://nestjs.com/img/tinystacks-logo.png#1" width="140" valign="middle" /></td>
-<td><a href="https://n.inc" target="_blank"><img src="https://nestjs.com/img/n-inc-logo.svg" width="120" valign="middle" /></td></tr><tr>
-<td><a href="https://bilberrry.com/" target="_blank"><img src="https://nestjs.com/img/bilberrry-logo.svg" width="180" valign="middle" /></td>
-<td><a href="https://ipinfo.ai/" target="_blank"><img src="https://nestjs.com/img/ipinfo-logo.png" width="130" valign="middle" /></td>
-<td><a href="https://chax.at" target="_blank"><img src="https://nestjs.com/img/chaxat-logo.png" width="100" valign="middle" /></td></tr>
-</table>
+<td><a href="https://www.tinystacks.com" target="_blank"><img src="https://nestjs.com/img/tinystacks-logo.png#1" width="140" valign="middle" /></td></tr></table>
 
 #### Sponsors
 
@@ -103,7 +91,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
 <a href="https://www.swingdev.io" target="_blank"><img src="https://nestjs.com/img/swingdev-logo.svg#1" width="110" valign="middle" /> </a></td><td align="center" valign="middle">
 <a href="https://www.novologic.com/" target="_blank"><img src="https://nestjs.com/img/novologic.png" width="110" valign="middle" /></a> </td><td align="center" valign="middle">
 <a href="https://ever.co/" target="_blank"><img src="https://nestjs.com/img/ever-logo.png" width="72" valign="middle" /></a>  </td><td align="center" valign="middle">
-<a href="https://blokt.com" target="_blank"><img src="https://nestjs.com/img/blokt-logo.png" width="120" valign="middle" /></a>  </td><td align="center" valign="middle">
+<a href="https://blokt.com" target="_blank"><img src="https://nestjs.com/img/blokt-logo.png" width="120" valign="middle" /></a>  </td><td align="center" valign="middle"> 
   <a href="http://architectnow.net/" target="_blank"><img src="https://nestjs.com/img/architectnow.png" width="125" valign="middle" /></a> </td><td align="center" valign="middle">
   <a href="https://quander.io/" target="_blank"><img src="https://nestjs.com/img/quander.png" width="100" valign="middle" /></a> </td></tr><tr><td align="center" valign="middle">
   <a href="https://mantro.net/" target="_blank"><img src="https://nestjs.com/img/mantro-logo.svg" width="95" valign="middle" /></a> </td><td align="center" valign="middle">
@@ -129,14 +117,6 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
 <td align="center" valign="middle"><a href="https://www.naologic.com/" target="_blank"><img src="https://nestjs.com/img/naologic-logo.svg" width="125" valign="middle" /></a></td>
   <td align="center" valign="middle"><a href="https://messaged.com/" target="_blank"><img src="https://nestjs.com/img/messaged-logo.png" width="50" valign="middle" /></a></td>
   <td align="center" valign="middle"><a href="https://triplecore.io" target="_blank"><img src="https://nestjs.com/img/triplecore-logo.svg" width="50" valign="middle" /></a></td>
-   <td align="center" valign="middle"><a href="https://klqc.de" target="_blank"><img src="https://nestjs.com/img/klcqcl-logo.png" width="120" valign="middle" /></a></td>
-   <td align="center" valign="middle"><a href="https://thecasinowizard.com/bonuses/no-deposit-bonuses/" target="_blank"><img src="https://nestjs.com/img/casinowizard-logo.png" width="120" valign="middle" /></a></td></tr><tr>
-     <td align="center" valign="middle"><a href="https://polygon-software.ch/" target="_blank"><img src="https://nestjs.com/img/polygon-logo.svg" width="120" valign="middle" /></a></td>
-   <td align="center" valign="middle"><a href="https://mobilereality.pl/" target="_blank"><img src="https://nestjs.com/img/mobile-reality-logo.png" width="45" valign="middle" /></a></td>
-     <td align="center" valign="middle"><a href="https://boringowl.io/" target="_blank"><img src="https://nestjs.com/img/boringowl-logo.svg" width="120" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://www.mobilefactory.jp/" target="_blank"><img src="https://nestjs.com/img/mobilefactory-logo.png" width="100" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://nordbot.app/" target="_blank"><img src="https://nestjs.com/img/nordbot-logo.png" width="120" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://doppio.sh/" target="_blank"><img src="https://nestjs.com/img/dopiosh-logo.png" width="50" valign="middle" /></a></td>
   </tr></table>
 
 ## Backers
diff --git a/packages/core/adapters/http-adapter.ts b/packages/core/adapters/http-adapter.ts
index 6bfc4add7..b5379933a 100644
--- a/packages/core/adapters/http-adapter.ts
+++ b/packages/core/adapters/http-adapter.ts
@@ -1,5 +1,5 @@
-import { HttpServer, RequestMethod, VersioningOptions } from '@nestjs/common';
-import { RequestHandler, VersionValue } from '@nestjs/common/interfaces';
+import { HttpServer, RequestMethod } from '@nestjs/common';
+import { RequestHandler } from '@nestjs/common/interfaces';
 import {
   CorsOptions,
   CorsOptionsDelegate,
@@ -68,12 +68,6 @@ export abstract class AbstractHttpAdapter<
     return this.instance.all(...args);
   }
 
-  public search(port: string | number, callback?: () => void);
-  public search(port: string | number, hostname: string, callback?: () => void);
-  public search(port: any, hostname?: any, callback?: any) {
-    return this.instance.search(port, hostname, callback);
-  }
-
   public options(handler: RequestHandler);
   public options(path: any, handler: RequestHandler);
   public options(...args: any[]) {
@@ -106,19 +100,17 @@ export abstract class AbstractHttpAdapter<
   abstract initHttpServer(options: NestApplicationOptions);
   abstract useStaticAssets(...args: any[]);
   abstract setViewEngine(engine: string);
-  abstract getRequestHostname(request: any);
-  abstract getRequestMethod(request: any);
-  abstract getRequestUrl(request: any);
-  abstract status(response: any, statusCode: number);
-  abstract reply(response: any, body: any, statusCode?: number);
-  abstract end(response: any, message?: string);
-  abstract render(response: any, view: string, options: any);
-  abstract redirect(response: any, statusCode: number, url: string);
+  abstract getRequestHostname(request);
+  abstract getRequestMethod(request);
+  abstract getRequestUrl(request);
+  abstract status(response, statusCode: number);
+  abstract reply(response, body: any, statusCode?: number);
+  abstract render(response, view: string, options: any);
+  abstract redirect(response, statusCode: number, url: string);
   abstract setErrorHandler(handler: Function, prefix?: string);
   abstract setNotFoundHandler(handler: Function, prefix?: string);
-  abstract isHeadersSent(response: any);
-  abstract setHeader(response: any, name: string, value: string);
-  abstract registerParserMiddleware(prefix?: string, rawBody?: boolean);
+  abstract setHeader(response, name: string, value: string);
+  abstract registerParserMiddleware(prefix?: string);
   abstract enableCors(
     options: CorsOptions | CorsOptionsDelegate<TRequest>,
     prefix?: string,
@@ -129,9 +121,4 @@ export abstract class AbstractHttpAdapter<
     | ((path: string, callback: Function) => any)
     | Promise<(path: string, callback: Function) => any>;
   abstract getType(): string;
-  abstract applyVersionFilter(
-    handler: Function,
-    version: VersionValue,
-    versioningOptions: VersioningOptions,
-  ): (req: TRequest, res: TResponse, next: () => void) => Function;
 }
diff --git a/packages/core/application-config.ts b/packages/core/application-config.ts
index 1b6adfa4e..4df293753 100644
--- a/packages/core/application-config.ts
+++ b/packages/core/application-config.ts
@@ -136,11 +136,6 @@ export class ApplicationConfig {
   }
 
   public enableVersioning(options: VersioningOptions): void {
-    if (Array.isArray(options.defaultVersion)) {
-      // Drop duplicated versions
-      options.defaultVersion = Array.from(new Set(options.defaultVersion));
-    }
-
     this.versioningOptions = options;
   }
 
diff --git a/packages/core/constants.ts b/packages/core/constants.ts
index 6b0f56267..877226690 100644
--- a/packages/core/constants.ts
+++ b/packages/core/constants.ts
@@ -1,5 +1,3 @@
-import { EnhancerSubtype } from '@nestjs/common/constants';
-
 export const MESSAGES = {
   APPLICATION_START: `Starting Nest application...`,
   APPLICATION_READY: `Nest application successfully started`,
@@ -14,15 +12,3 @@ export const APP_INTERCEPTOR = 'APP_INTERCEPTOR';
 export const APP_PIPE = 'APP_PIPE';
 export const APP_GUARD = 'APP_GUARD';
 export const APP_FILTER = 'APP_FILTER';
-export const ENHANCER_TOKEN_TO_SUBTYPE_MAP: Record<
-  | typeof APP_GUARD
-  | typeof APP_PIPE
-  | typeof APP_FILTER
-  | typeof APP_INTERCEPTOR,
-  EnhancerSubtype
-> = {
-  [APP_GUARD]: 'guard',
-  [APP_INTERCEPTOR]: 'interceptor',
-  [APP_PIPE]: 'pipe',
-  [APP_FILTER]: 'filter',
-} as const;
diff --git a/packages/core/errors/exceptions/index.ts b/packages/core/errors/exceptions/index.ts
deleted file mode 100644
index 530968b2f..000000000
--- a/packages/core/errors/exceptions/index.ts
+++ /dev/null
@@ -1,8 +0,0 @@
-export * from './circular-dependency.exception';
-export * from './runtime.exception';
-export * from './unknown-element.exception';
-export * from './invalid-class-scope.exception';
-export * from './invalid-class.exception';
-export * from './unknown-export.exception';
-export * from './unknown-module.exception';
-export * from './undefined-forwardref.exception';
diff --git a/packages/core/errors/exceptions/invalid-class-module.exception.ts b/packages/core/errors/exceptions/invalid-class-module.exception.ts
deleted file mode 100644
index 0761ea5ce..000000000
--- a/packages/core/errors/exceptions/invalid-class-module.exception.ts
+++ /dev/null
@@ -1,10 +0,0 @@
-import { USING_INVALID_CLASS_AS_A_MODULE_MESSAGE } from '../messages';
-import { RuntimeException } from './runtime.exception';
-
-export class InvalidClassModuleException extends RuntimeException {
-  constructor(metatypeUsedAsAModule: any, scope: any[]) {
-    super(
-      USING_INVALID_CLASS_AS_A_MODULE_MESSAGE(metatypeUsedAsAModule, scope),
-    );
-  }
-}
diff --git a/packages/core/errors/exceptions/unknown-dependencies.exception.ts b/packages/core/errors/exceptions/unknown-dependencies.exception.ts
index 57c7207c8..d350952cb 100644
--- a/packages/core/errors/exceptions/unknown-dependencies.exception.ts
+++ b/packages/core/errors/exceptions/unknown-dependencies.exception.ts
@@ -1,18 +1,14 @@
 import { InjectorDependencyContext } from '../../injector/injector';
-import { Module } from '../../injector/module';
 import { UNKNOWN_DEPENDENCIES_MESSAGE } from '../messages';
 import { RuntimeException } from './runtime.exception';
+import { Module } from '../../injector/module';
 
 export class UnknownDependenciesException extends RuntimeException {
-  public readonly moduleRef: { id: string } | undefined;
-
   constructor(
-    public readonly type: string | symbol,
-    public readonly context: InjectorDependencyContext,
-    moduleRef?: Module,
-    public readonly metadata?: { id: string },
+    type: string | symbol,
+    unknownDependencyContext: InjectorDependencyContext,
+    module?: Module,
   ) {
-    super(UNKNOWN_DEPENDENCIES_MESSAGE(type, context, moduleRef));
-    this.moduleRef = moduleRef && { id: moduleRef.id };
+    super(UNKNOWN_DEPENDENCIES_MESSAGE(type, unknownDependencyContext, module));
   }
 }
diff --git a/packages/core/errors/exceptions/unknown-request-mapping.exception.ts b/packages/core/errors/exceptions/unknown-request-mapping.exception.ts
index 561390bd9..b0d64b212 100644
--- a/packages/core/errors/exceptions/unknown-request-mapping.exception.ts
+++ b/packages/core/errors/exceptions/unknown-request-mapping.exception.ts
@@ -1,9 +1,8 @@
-import type { Type } from '@nestjs/common';
 import { RuntimeException } from './runtime.exception';
 import { UNKNOWN_REQUEST_MAPPING } from '../messages';
 
 export class UnknownRequestMappingException extends RuntimeException {
-  constructor(metatype: Type) {
-    super(UNKNOWN_REQUEST_MAPPING(metatype));
+  constructor() {
+    super(UNKNOWN_REQUEST_MAPPING);
   }
 }
diff --git a/packages/core/errors/messages.ts b/packages/core/errors/messages.ts
index ba33e4f85..2aaec08e6 100644
--- a/packages/core/errors/messages.ts
+++ b/packages/core/errors/messages.ts
@@ -1,4 +1,4 @@
-import type { ForwardReference, Type, DynamicModule } from '@nestjs/common';
+import { ForwardReference, Type } from '@nestjs/common';
 import { isNil, isSymbol } from '@nestjs/common/utils/shared.utils';
 import {
   InjectorDependency,
@@ -7,26 +7,21 @@ import {
 import { Module } from '../injector/module';
 
 /**
- * Returns the name of an instance or `undefined`
+ * Returns the name of an instance
  * @param instance The instance which should get the name from
  */
 const getInstanceName = (instance: unknown): string => {
   if ((instance as ForwardReference)?.forwardRef) {
     return (instance as ForwardReference).forwardRef()?.name;
   }
-
-  if ((instance as DynamicModule)?.module) {
-    return (instance as DynamicModule).module?.name;
-  }
-
-  return (instance as Type)?.name;
+  return (instance as Type<any>)?.name;
 };
 
 /**
  * Returns the name of the dependency
  * Tries to get the class name, otherwise the string value
  * (= injection token). As fallback it returns '+'
- * @param dependency The name of the dependency to be displayed
+ * @param dependency The dependency whichs name should get displayed
  */
 const getDependencyName = (dependency: InjectorDependency): string =>
   // use class name
@@ -60,32 +55,20 @@ export const UNKNOWN_DEPENDENCIES_MESSAGE = (
     dependencies,
     key,
   } = unknownDependencyContext;
-  const moduleName = getModuleName(module);
+  const moduleName = getModuleName(module) || 'Module';
   const dependencyName = getDependencyName(name);
 
-  const potentialSolutions =
-    // If module's name is well defined
-    moduleName !== 'current'
-      ? `\n
+  let message = `Nest can't resolve dependencies of the ${type.toString()}`;
+
+  const potentialSolutions = `\n
 Potential solutions:
-- Is ${moduleName} a valid NestJS module?
 - If ${dependencyName} is a provider, is it part of the current ${moduleName}?
 - If ${dependencyName} is exported from a separate @Module, is that module imported within ${moduleName}?
   @Module({
     imports: [ /* the Module containing ${dependencyName} */ ]
   })
-`
-      : `\n
-Potential solutions:
-- If ${dependencyName} is a provider, is it part of the current Module?
-- If ${dependencyName} is exported from a separate @Module, is that module imported within Module?
-  @Module({
-    imports: [ /* the Module containing ${dependencyName} */ ]
-  })
 `;
 
-  let message = `Nest can't resolve dependencies of the ${type.toString()}`;
-
   if (isNil(index)) {
     message += `. Please make sure that the "${key.toString()}" property is available in the current context.${potentialSolutions}`;
     return message;
@@ -95,7 +78,9 @@ Potential solutions:
 
   message += ` (`;
   message += dependenciesName.join(', ');
-  message += `). Please make sure that the argument ${dependencyName} at index [${index}] is available in the ${moduleName} context.`;
+  message += `). Please make sure that the argument ${dependencyName} at index [${index}] is available in the ${getModuleName(
+    module,
+  )} context.`;
   message += potentialSolutions;
 
   return message;
@@ -112,7 +97,7 @@ export const UNDEFINED_FORWARDREF_MESSAGE = (
 
 (Read more: https://docs.nestjs.com/fundamentals/circular-dependency)
 Scope [${stringifyScope(scope)}]
-`;
+  `;
 
 export const INVALID_MODULE_MESSAGE = (
   parentModule: any,
@@ -122,25 +107,11 @@ export const INVALID_MODULE_MESSAGE = (
   const parentModuleName = parentModule?.name || 'module';
 
   return `Nest cannot create the ${parentModuleName} instance.
-Received an unexpected value at index [${index}] of the ${parentModuleName} "imports" array.
+Received an unexpected value at index [${index}] of the ${parentModuleName} "imports" array. 
 
 Scope [${stringifyScope(scope)}]`;
 };
 
-export const USING_INVALID_CLASS_AS_A_MODULE_MESSAGE = (
-  metatypeUsedAsAModule: Type | ForwardReference,
-  scope: any[],
-) => {
-  const metatypeNameQuote =
-    `"${getInstanceName(metatypeUsedAsAModule)}"` || 'that class';
-
-  return `Classes annotated with @Injectable(), @Catch(), and @Controller() decorators must not appear in the "imports" array of a module.
-Please remove ${metatypeNameQuote} (including forwarded occurrences, if any) from all of the "imports" arrays.
-
-Scope [${stringifyScope(scope)}]
-`;
-};
-
 export const UNDEFINED_MODULE_MESSAGE = (
   parentModule: any,
   index: number,
@@ -182,14 +153,8 @@ export const INVALID_CLASS_SCOPE_MESSAGE = (
     name || 'This class'
   } is marked as a scoped provider. Request and transient-scoped providers can't be used in combination with "get()" method. Please, use "resolve()" instead.`;
 
-export const UNKNOWN_REQUEST_MAPPING = (metatype: Type) => {
-  const className = metatype.name;
-  return className
-    ? `An invalid controller has been detected. "${className}" does not have the @Controller() decorator but it is being listed in the "controllers" array of some module.`
-    : `An invalid controller has been detected. Perhaps, one of your controllers is missing the @Controller() decorator.`;
-};
-
 export const INVALID_MIDDLEWARE_CONFIGURATION = `An invalid middleware configuration has been passed inside the module 'configure()' method.`;
+export const UNKNOWN_REQUEST_MAPPING = `An invalid controller has been detected. Perhaps, one of your controllers is missing @Controller() decorator.`;
 export const UNHANDLED_RUNTIME_EXCEPTION = `Unhandled Runtime Exception.`;
 export const INVALID_EXCEPTION_FILTER = `Invalid exception filters (@UseFilters()).`;
 export const MICROSERVICES_PACKAGE_NOT_FOUND_EXCEPTION = `Unable to load @nestjs/microservices package. (Please make sure that it's already installed.)`;
diff --git a/packages/core/exceptions/base-exception-filter-context.ts b/packages/core/exceptions/base-exception-filter-context.ts
index 40ff0a156..aa9971227 100644
--- a/packages/core/exceptions/base-exception-filter-context.ts
+++ b/packages/core/exceptions/base-exception-filter-context.ts
@@ -50,7 +50,7 @@ export class BaseExceptionFilterContext extends ContextCreator {
       return null;
     }
     const instanceHost = instanceWrapper.getInstanceByContextId(
-      this.getContextId(contextId, instanceWrapper),
+      contextId,
       inquirerId,
     );
     return instanceHost && instanceHost.instance;
diff --git a/packages/core/exceptions/base-exception-filter.ts b/packages/core/exceptions/base-exception-filter.ts
index bc3784501..ea360e84a 100644
--- a/packages/core/exceptions/base-exception-filter.ts
+++ b/packages/core/exceptions/base-exception-filter.ts
@@ -38,12 +38,7 @@ export class BaseExceptionFilter<T = any> implements ExceptionFilter<T> {
           message: res,
         };
 
-    const response = host.getArgByIndex(1);
-    if (!applicationRef.isHeadersSent(response)) {
-      applicationRef.reply(response, message, exception.getStatus());
-    } else {
-      applicationRef.end(response);
-    }
+    applicationRef.reply(host.getArgByIndex(1), message, exception.getStatus());
   }
 
   public handleUnknownError(
@@ -60,14 +55,7 @@ export class BaseExceptionFilter<T = any> implements ExceptionFilter<T> {
           statusCode: HttpStatus.INTERNAL_SERVER_ERROR,
           message: MESSAGES.UNKNOWN_EXCEPTION_MESSAGE,
         };
-
-    const response = host.getArgByIndex(1);
-    if (!applicationRef.isHeadersSent(response)) {
-      applicationRef.reply(response, body, body.statusCode);
-    } else {
-      applicationRef.end(response);
-    }
-
+    applicationRef.reply(host.getArgByIndex(1), body, body.statusCode);
     if (this.isExceptionObject(exception)) {
       return BaseExceptionFilter.logger.error(
         exception.message,
diff --git a/packages/core/exceptions/exceptions-handler.ts b/packages/core/exceptions/exceptions-handler.ts
index 14290bcd9..af54683ae 100644
--- a/packages/core/exceptions/exceptions-handler.ts
+++ b/packages/core/exceptions/exceptions-handler.ts
@@ -1,10 +1,9 @@
-import { isEmpty } from '@nestjs/common/utils/shared.utils';
-import { HttpException } from '@nestjs/common';
-import { ArgumentsHost } from '@nestjs/common/interfaces/features/arguments-host.interface';
+import { HttpException, Type } from '@nestjs/common';
 import { ExceptionFilterMetadata } from '@nestjs/common/interfaces/exceptions/exception-filter-metadata.interface';
-import { selectExceptionFilterMetadata } from '@nestjs/common/utils/select-exception-filter-metadata.util';
-import { BaseExceptionFilter } from './base-exception-filter';
+import { ArgumentsHost } from '@nestjs/common/interfaces/features/arguments-host.interface';
+import { isEmpty } from '@nestjs/common/utils/shared.utils';
 import { InvalidExceptionFilterException } from '../errors/exceptions/invalid-exception-filter.exception';
+import { BaseExceptionFilter } from './base-exception-filter';
 
 export class ExceptionsHandler extends BaseExceptionFilter {
   private filters: ExceptionFilterMetadata[] = [];
@@ -30,8 +29,14 @@ export class ExceptionsHandler extends BaseExceptionFilter {
     if (isEmpty(this.filters)) {
       return false;
     }
+    const isInstanceOf = (metatype: Type<unknown>) =>
+      exception instanceof metatype;
 
-    const filter = selectExceptionFilterMetadata(this.filters, exception);
+    const filter = this.filters.find(({ exceptionMetatypes }) => {
+      const typeExists =
+        !exceptionMetatypes.length || exceptionMetatypes.some(isInstanceOf);
+      return typeExists;
+    });
     filter && filter.func(exception, ctx);
     return !!filter;
   }
diff --git a/packages/core/exceptions/external-exceptions-handler.ts b/packages/core/exceptions/external-exceptions-handler.ts
index 9e852ba35..15a6e6b3c 100644
--- a/packages/core/exceptions/external-exceptions-handler.ts
+++ b/packages/core/exceptions/external-exceptions-handler.ts
@@ -1,9 +1,9 @@
-import { isEmpty } from '@nestjs/common/utils/shared.utils';
-import { ArgumentsHost } from '@nestjs/common/interfaces/features/arguments-host.interface';
+import { Type } from '@nestjs/common';
 import { ExceptionFilterMetadata } from '@nestjs/common/interfaces/exceptions';
-import { selectExceptionFilterMetadata } from '@nestjs/common/utils/select-exception-filter-metadata.util';
-import { ExternalExceptionFilter } from './external-exception-filter';
+import { ArgumentsHost } from '@nestjs/common/interfaces/features/arguments-host.interface';
+import { isEmpty } from '@nestjs/common/utils/shared.utils';
 import { InvalidExceptionFilterException } from '../errors/exceptions/invalid-exception-filter.exception';
+import { ExternalExceptionFilter } from './external-exception-filter';
 
 export class ExternalExceptionsHandler extends ExternalExceptionFilter {
   private filters: ExceptionFilterMetadata[] = [];
@@ -30,8 +30,14 @@ export class ExternalExceptionsHandler extends ExternalExceptionFilter {
     if (isEmpty(this.filters)) {
       return null;
     }
+    const isInstanceOf = (metatype: Type<unknown>) =>
+      exception instanceof metatype;
 
-    const filter = selectExceptionFilterMetadata(this.filters, exception);
+    const filter = this.filters.find(({ exceptionMetatypes }) => {
+      const typeExists =
+        !exceptionMetatypes.length || exceptionMetatypes.some(isInstanceOf);
+      return typeExists;
+    });
     return filter ? filter.func(exception, host) : null;
   }
 }
diff --git a/packages/core/guards/guards-context-creator.ts b/packages/core/guards/guards-context-creator.ts
index 7c9963b3a..e82a8fb04 100644
--- a/packages/core/guards/guards-context-creator.ts
+++ b/packages/core/guards/guards-context-creator.ts
@@ -69,7 +69,7 @@ export class GuardsContextCreator extends ContextCreator {
       return null;
     }
     const instanceHost = instanceWrapper.getInstanceByContextId(
-      this.getContextId(contextId, instanceWrapper),
+      contextId,
       inquirerId,
     );
     return instanceHost && instanceHost.instance;
@@ -104,12 +104,7 @@ export class GuardsContextCreator extends ContextCreator {
     const scopedGuardWrappers =
       this.config.getGlobalRequestGuards() as InstanceWrapper[];
     const scopedGuards = iterate(scopedGuardWrappers)
-      .map(wrapper =>
-        wrapper.getInstanceByContextId(
-          this.getContextId(contextId, wrapper),
-          inquirerId,
-        ),
-      )
+      .map(wrapper => wrapper.getInstanceByContextId(contextId, inquirerId))
       .filter(host => !!host)
       .map(host => host.instance)
       .toArray();
diff --git a/packages/core/guards/index.ts b/packages/core/guards/index.ts
deleted file mode 100644
index 61a8b775a..000000000
--- a/packages/core/guards/index.ts
+++ /dev/null
@@ -1,3 +0,0 @@
-export * from './constants';
-export * from './guards-consumer';
-export * from './guards-context-creator';
diff --git a/packages/core/helpers/context-creator.ts b/packages/core/helpers/context-creator.ts
index fa8c9c4ac..5028cc973 100644
--- a/packages/core/helpers/context-creator.ts
+++ b/packages/core/helpers/context-creator.ts
@@ -1,6 +1,6 @@
 import { Controller } from '@nestjs/common/interfaces';
 import { STATIC_CONTEXT } from '../injector/constants';
-import { ContextId, InstanceWrapper } from '../injector/instance-wrapper';
+import { ContextId } from '../injector/instance-wrapper';
 
 export abstract class ContextCreator {
   public abstract createConcreteContext<T extends any[], R extends any[]>(
@@ -51,16 +51,4 @@ export abstract class ContextCreator {
   ): T {
     return Reflect.getMetadata(metadataKey, callback);
   }
-
-  protected getContextId(
-    contextId: ContextId,
-    instanceWrapper: InstanceWrapper,
-  ): ContextId {
-    return contextId.getParent
-      ? contextId.getParent({
-          token: instanceWrapper.token,
-          isTreeDurable: instanceWrapper.isDependencyTreeDurable(),
-        })
-      : contextId;
-  }
 }
diff --git a/packages/core/helpers/context-id-factory.ts b/packages/core/helpers/context-id-factory.ts
index 0c7282cb9..0cb80d311 100644
--- a/packages/core/helpers/context-id-factory.ts
+++ b/packages/core/helpers/context-id-factory.ts
@@ -1,5 +1,4 @@
-import { isObject } from '@nestjs/common/utils/shared.utils';
-import { ContextId, HostComponentInfo } from '../injector/instance-wrapper';
+import { ContextId } from '../injector/instance-wrapper';
 import { REQUEST_CONTEXT_ID } from '../router/request/request-constants';
 
 export function createContextId(): ContextId {
@@ -14,35 +13,7 @@ export function createContextId(): ContextId {
   return { id: Math.random() };
 }
 
-export type ContextIdResolverFn = (info: HostComponentInfo) => ContextId;
-
-export interface ContextIdResolver {
-  /**
-   * Payload associated with the custom context id
-   */
-  payload: unknown;
-  /**
-   * A context id resolver function
-   */
-  resolve: ContextIdResolverFn;
-}
-
-export interface ContextIdStrategy<T = any> {
-  /**
-   * Allows to attach a parent context id to the existing child context id.
-   * This lets you construct durable DI sub-trees that can be shared between contexts.
-   * @param contextId auto-generated child context id
-   * @param request request object
-   */
-  attach(
-    contextId: ContextId,
-    request: T,
-  ): ContextIdResolverFn | ContextIdResolver | undefined;
-}
-
 export class ContextIdFactory {
-  private static strategy?: ContextIdStrategy;
-
   /**
    * Generates a context identifier based on the request object.
    */
@@ -56,45 +27,16 @@ export class ContextIdFactory {
    */
   public static getByRequest<T extends Record<any, any> = any>(
     request: T,
-    propsToInspect: string[] = ['raw'],
   ): ContextId {
     if (!request) {
-      return ContextIdFactory.create();
+      return createContextId();
     }
     if (request[REQUEST_CONTEXT_ID as any]) {
       return request[REQUEST_CONTEXT_ID as any];
     }
-    for (const key of propsToInspect) {
-      if (request[key]?.[REQUEST_CONTEXT_ID]) {
-        return request[key][REQUEST_CONTEXT_ID];
-      }
-    }
-    if (!this.strategy) {
-      return ContextIdFactory.create();
+    if (request.raw && request.raw[REQUEST_CONTEXT_ID]) {
+      return request.raw[REQUEST_CONTEXT_ID];
     }
-    const contextId = createContextId();
-    const resolverObjectOrFunction = this.strategy.attach(contextId, request);
-    if (this.isContextIdResolverWithPayload(resolverObjectOrFunction)) {
-      contextId.getParent = resolverObjectOrFunction.resolve;
-      contextId.payload = resolverObjectOrFunction.payload;
-    } else {
-      contextId.getParent = resolverObjectOrFunction;
-    }
-    return contextId;
-  }
-
-  /**
-   * Registers a custom context id strategy that lets you attach
-   * a parent context id to the existing context id object.
-   * @param strategy strategy instance
-   */
-  public static apply(strategy: ContextIdStrategy) {
-    this.strategy = strategy;
-  }
-
-  private static isContextIdResolverWithPayload(
-    resolverOrResolverFn: ContextIdResolver | ContextIdResolverFn,
-  ): resolverOrResolverFn is ContextIdResolver {
-    return isObject(resolverOrResolverFn);
+    return createContextId();
   }
 }
diff --git a/packages/core/helpers/context-utils.ts b/packages/core/helpers/context-utils.ts
index 10c67b5a8..dc64660f1 100644
--- a/packages/core/helpers/context-utils.ts
+++ b/packages/core/helpers/context-utils.ts
@@ -50,15 +50,12 @@ export class ContextUtils {
   }
 
   public getArgumentsLength<T>(keys: string[], metadata: T): number {
-    return keys.length
-      ? Math.max(...keys.map(key => metadata[key].index)) + 1
-      : 0;
+    return Math.max(...keys.map(key => metadata[key].index)) + 1;
   }
 
   public createNullArray(length: number): any[] {
-    const a = new Array(length);
-    for (let i = 0; i < length; ++i) a[i] = undefined;
-    return a;
+    // eslint-disable-next-line prefer-spread
+    return Array.apply(null, { length } as any).fill(undefined);
   }
 
   public mergeParamsMetatypes(
diff --git a/packages/core/helpers/external-context-creator.ts b/packages/core/helpers/external-context-creator.ts
index 83ef9994d..847da432d 100644
--- a/packages/core/helpers/external-context-creator.ts
+++ b/packages/core/helpers/external-context-creator.ts
@@ -1,24 +1,24 @@
 import { ForbiddenException, ParamData } from '@nestjs/common';
-import { CUSTOM_ROUTE_ARGS_METADATA } from '@nestjs/common/constants';
+import { CUSTOM_ROUTE_AGRS_METADATA } from '@nestjs/common/constants';
 import {
   ContextType,
   Controller,
   PipeTransform,
 } from '@nestjs/common/interfaces';
-import { isEmpty } from '@nestjs/common/utils/shared.utils';
-import { lastValueFrom, isObservable } from 'rxjs';
+import { isEmpty, isFunction } from '@nestjs/common/utils/shared.utils';
+import { lastValueFrom } from 'rxjs';
 import { ExternalExceptionFilterContext } from '../exceptions/external-exception-filter-context';
 import { FORBIDDEN_MESSAGE } from '../guards/constants';
-import { GuardsConsumer, GuardsContextCreator } from '../guards';
+import { GuardsConsumer } from '../guards/guards-consumer';
+import { GuardsContextCreator } from '../guards/guards-context-creator';
 import { STATIC_CONTEXT } from '../injector/constants';
 import { NestContainer } from '../injector/container';
 import { ContextId } from '../injector/instance-wrapper';
 import { ModulesContainer } from '../injector/modules-container';
-import {
-  InterceptorsConsumer,
-  InterceptorsContextCreator,
-} from '../interceptors';
-import { PipesConsumer, PipesContextCreator } from '../pipes';
+import { InterceptorsConsumer } from '../interceptors/interceptors-consumer';
+import { InterceptorsContextCreator } from '../interceptors/interceptors-context-creator';
+import { PipesConsumer } from '../pipes/pipes-consumer';
+import { PipesContextCreator } from '../pipes/pipes-context-creator';
 import { ContextUtils, ParamProperties } from './context-utils';
 import { ExternalErrorProxy } from './external-proxy';
 import { HandlerMetadataStorage } from './handler-metadata-storage';
@@ -272,7 +272,7 @@ export class ExternalContextCreator {
       );
       const type = this.contextUtils.mapParamType(key);
 
-      if (key.includes(CUSTOM_ROUTE_ARGS_METADATA)) {
+      if (key.includes(CUSTOM_ROUTE_AGRS_METADATA)) {
         const { factory } = metadata[key];
         const customExtractValue = this.contextUtils.getCustomFactory(
           factory,
@@ -329,7 +329,7 @@ export class ExternalContextCreator {
   }
 
   public async transformToResult(resultOrDeferred: any) {
-    if (isObservable(resultOrDeferred)) {
+    if (resultOrDeferred && isFunction(resultOrDeferred.subscribe)) {
       return lastValueFrom(resultOrDeferred);
     }
     return resultOrDeferred;
diff --git a/packages/core/helpers/handler-metadata-storage.ts b/packages/core/helpers/handler-metadata-storage.ts
index 36e280f2e..ef22c9ecc 100644
--- a/packages/core/helpers/handler-metadata-storage.ts
+++ b/packages/core/helpers/handler-metadata-storage.ts
@@ -1,4 +1,5 @@
-import { Controller, Type } from '@nestjs/common/interfaces';
+import { Type } from '@nestjs/common';
+import { Controller } from '@nestjs/common/interfaces';
 import { IncomingMessage } from 'http';
 import { Observable } from 'rxjs';
 import { CONTROLLER_ID_KEY } from '../injector/constants';
diff --git a/packages/core/helpers/index.ts b/packages/core/helpers/index.ts
index 76f854606..5319266f1 100644
--- a/packages/core/helpers/index.ts
+++ b/packages/core/helpers/index.ts
@@ -1,3 +1,2 @@
 export * from './context-id-factory';
-export * from './external-context-creator';
 export * from './http-adapter-host';
diff --git a/packages/core/helpers/is-durable.ts b/packages/core/helpers/is-durable.ts
deleted file mode 100644
index 377c84f18..000000000
--- a/packages/core/helpers/is-durable.ts
+++ /dev/null
@@ -1,7 +0,0 @@
-import { SCOPE_OPTIONS_METADATA } from '@nestjs/common/constants';
-import { Type } from '@nestjs/common/interfaces/type.interface';
-
-export function isDurable(provider: Type<unknown>): boolean | undefined {
-  const metadata = Reflect.getMetadata(SCOPE_OPTIONS_METADATA, provider);
-  return metadata && metadata.durable;
-}
diff --git a/packages/core/helpers/messages.ts b/packages/core/helpers/messages.ts
index 3c2fffd7c..b7d37cc44 100644
--- a/packages/core/helpers/messages.ts
+++ b/packages/core/helpers/messages.ts
@@ -17,12 +17,10 @@ export const VERSIONED_ROUTE_MAPPED_MESSAGE = (
   method: string | number,
   version: VersionValue,
 ) => {
-  const controllerVersions = Array.isArray(version) ? version : [version];
-  const versions = controllerVersions
-    .map(version => (version === VERSION_NEUTRAL ? 'Neutral' : version))
-    .join(',');
-
-  return `Mapped {${path}, ${RequestMethod[method]}} (version: ${versions}) route`;
+  if (version === VERSION_NEUTRAL) {
+    version = 'Neutral';
+  }
+  return `Mapped {${path}, ${RequestMethod[method]}} (version: ${version}) route`;
 };
 
 export const CONTROLLER_MAPPING_MESSAGE = (name: string, path: string) =>
@@ -33,12 +31,10 @@ export const VERSIONED_CONTROLLER_MAPPING_MESSAGE = (
   path: string,
   version: VersionValue,
 ) => {
-  const controllerVersions = Array.isArray(version) ? version : [version];
-  const versions = controllerVersions
-    .map(version => (version === VERSION_NEUTRAL ? 'Neutral' : version))
-    .join(',');
-
-  return `${name} {${path}} (version: ${versions}):`;
+  if (version === VERSION_NEUTRAL) {
+    version = 'Neutral';
+  }
+  return `${name} {${path}} (version: ${version}):`;
 };
 
 export const INVALID_EXECUTION_CONTEXT = (
diff --git a/packages/core/index.ts b/packages/core/index.ts
index 511eac90d..2915304ab 100644
--- a/packages/core/index.ts
+++ b/packages/core/index.ts
@@ -1,6 +1,6 @@
 /*
  * Nest @core
- * Copyright(c) 2017 - 2023 Kamil Mysliwiec
+ * Copyright(c) 2017 - 2021 Kamil Mysliwiec
  * https://nestjs.com
  * MIT Licensed
  */
@@ -13,12 +13,10 @@ export * from './discovery';
 export * from './exceptions';
 export * from './helpers';
 export * from './injector';
-export * from './inspector';
 export * from './metadata-scanner';
 export * from './middleware';
 export * from './nest-application';
 export * from './nest-application-context';
 export { NestFactory } from './nest-factory';
-export * from './repl';
 export * from './router';
 export * from './services';
diff --git a/packages/core/injector/abstract-instance-resolver.ts b/packages/core/injector/abstract-instance-resolver.ts
deleted file mode 100644
index 0308574d6..000000000
--- a/packages/core/injector/abstract-instance-resolver.ts
+++ /dev/null
@@ -1,86 +0,0 @@
-import { Abstract, Scope, Type } from '@nestjs/common';
-import { GetOrResolveOptions } from '@nestjs/common/interfaces';
-import {
-  InvalidClassScopeException,
-  UnknownElementException,
-} from '../errors/exceptions';
-import { Injector } from './injector';
-import { InstanceLink, InstanceLinksHost } from './instance-links-host';
-import { ContextId } from './instance-wrapper';
-import { Module } from './module';
-
-export abstract class AbstractInstanceResolver {
-  protected abstract instanceLinksHost: InstanceLinksHost;
-  protected abstract injector: Injector;
-
-  protected abstract get<TInput = any, TResult = TInput>(
-    typeOrToken: Type<TInput> | Function | string | symbol,
-    options?: GetOrResolveOptions,
-  ): TResult | Array<TResult>;
-
-  protected find<TInput = any, TResult = TInput>(
-    typeOrToken: Type<TInput> | Abstract<TInput> | string | symbol,
-    options: { moduleId?: string; each?: boolean },
-  ): TResult | Array<TResult> {
-    const instanceLinkOrArray = this.instanceLinksHost.get<TResult>(
-      typeOrToken,
-      options,
-    );
-    const pluckInstance = ({ wrapperRef }: InstanceLink) => {
-      if (
-        wrapperRef.scope === Scope.REQUEST ||
-        wrapperRef.scope === Scope.TRANSIENT
-      ) {
-        throw new InvalidClassScopeException(typeOrToken);
-      }
-      return wrapperRef.instance;
-    };
-    if (Array.isArray(instanceLinkOrArray)) {
-      return instanceLinkOrArray.map(pluckInstance);
-    }
-    return pluckInstance(instanceLinkOrArray);
-  }
-
-  protected async resolvePerContext<TInput = any, TResult = TInput>(
-    typeOrToken: Type<TInput> | Abstract<TInput> | string | symbol,
-    contextModule: Module,
-    contextId: ContextId,
-    options?: GetOrResolveOptions,
-  ): Promise<TResult | Array<TResult>> {
-    const instanceLinkOrArray = options?.strict
-      ? this.instanceLinksHost.get(typeOrToken, {
-          moduleId: contextModule.id,
-          each: options.each,
-        })
-      : this.instanceLinksHost.get(typeOrToken, {
-          each: options.each,
-        });
-
-    const pluckInstance = async (instanceLink: InstanceLink) => {
-      const { wrapperRef, collection } = instanceLink;
-      if (wrapperRef.isDependencyTreeStatic() && !wrapperRef.isTransient) {
-        return this.get(typeOrToken, { strict: options.strict });
-      }
-
-      const ctorHost = wrapperRef.instance || { constructor: typeOrToken };
-      const instance = await this.injector.loadPerContext(
-        ctorHost,
-        wrapperRef.host,
-        collection,
-        contextId,
-        wrapperRef,
-      );
-      if (!instance) {
-        throw new UnknownElementException();
-      }
-      return instance;
-    };
-
-    if (Array.isArray(instanceLinkOrArray)) {
-      return Promise.all(
-        instanceLinkOrArray.map(instanceLink => pluckInstance(instanceLink)),
-      );
-    }
-    return pluckInstance(instanceLinkOrArray);
-  }
-}
diff --git a/packages/core/injector/compiler.ts b/packages/core/injector/compiler.ts
index 353e27581..6c707fd61 100644
--- a/packages/core/injector/compiler.ts
+++ b/packages/core/injector/compiler.ts
@@ -1,8 +1,4 @@
-import {
-  DynamicModule,
-  ForwardReference,
-  Type,
-} from '@nestjs/common/interfaces';
+import { DynamicModule, Type } from '@nestjs/common/interfaces';
 import { ModuleTokenFactory } from './module-token-factory';
 
 export interface ModuleFactory {
@@ -22,25 +18,19 @@ export class ModuleCompiler {
     return { type, dynamicMetadata, token };
   }
 
-  public extractMetadata(
-    metatype: Type<any> | ForwardReference | DynamicModule,
-  ): {
+  public extractMetadata(metatype: Type<any> | DynamicModule): {
     type: Type<any>;
     dynamicMetadata?: Partial<DynamicModule> | undefined;
   } {
     if (!this.isDynamicModule(metatype)) {
-      return {
-        type: (metatype as ForwardReference)?.forwardRef
-          ? (metatype as ForwardReference).forwardRef()
-          : metatype,
-      };
+      return { type: metatype };
     }
     const { module: type, ...dynamicMetadata } = metatype;
     return { type, dynamicMetadata };
   }
 
   public isDynamicModule(
-    module: Type<any> | DynamicModule | ForwardReference,
+    module: Type<any> | DynamicModule,
   ): module is DynamicModule {
     return !!(module as DynamicModule).module;
   }
diff --git a/packages/core/injector/container.ts b/packages/core/injector/container.ts
index 2522eabed..d5b7fcbbf 100644
--- a/packages/core/injector/container.ts
+++ b/packages/core/injector/container.ts
@@ -1,26 +1,23 @@
 import { DynamicModule, Provider } from '@nestjs/common';
-import {
-  EnhancerSubtype,
-  GLOBAL_MODULE_METADATA,
-} from '@nestjs/common/constants';
-import { Injectable, Type } from '@nestjs/common/interfaces';
+import { GLOBAL_MODULE_METADATA } from '@nestjs/common/constants';
+import { Injectable } from '@nestjs/common/interfaces/injectable.interface';
+import { Type } from '@nestjs/common/interfaces/type.interface';
 import { ApplicationConfig } from '../application-config';
-import {
-  CircularDependencyException,
-  UndefinedForwardRefException,
-  UnknownModuleException,
-} from '../errors/exceptions';
-import { InitializeOnPreviewAllowlist } from '../inspector/initialize-on-preview.allowlist';
-import { SerializedGraph } from '../inspector/serialized-graph';
+import { CircularDependencyException } from '../errors/exceptions/circular-dependency.exception';
+import { UndefinedForwardRefException } from '../errors/exceptions/undefined-forwardref.exception';
+import { UnknownModuleException } from '../errors/exceptions/unknown-module.exception';
 import { REQUEST } from '../router/request/request-constants';
-import { ModuleCompiler } from './compiler';
+import { ModuleCompiler, ModuleFactory } from './compiler';
 import { ContextId } from './instance-wrapper';
-import { InternalCoreModule } from './internal-core-module/internal-core-module';
+import { InternalCoreModule } from './internal-core-module';
 import { InternalProvidersStorage } from './internal-providers-storage';
 import { Module } from './module';
 import { ModuleTokenFactory } from './module-token-factory';
 import { ModulesContainer } from './modules-container';
 
+type ModuleMetatype = Type<any> | DynamicModule | Promise<DynamicModule>;
+type ModuleScope = Type<any>[];
+
 export class NestContainer {
   private readonly globalModules = new Set<Module>();
   private readonly moduleTokenFactory = new ModuleTokenFactory();
@@ -31,17 +28,12 @@ export class NestContainer {
     Partial<DynamicModule>
   >();
   private readonly internalProvidersStorage = new InternalProvidersStorage();
-  private readonly _serializedGraph = new SerializedGraph();
   private internalCoreModule: Module;
 
   constructor(
     private readonly _applicationConfig: ApplicationConfig = undefined,
   ) {}
 
-  get serializedGraph(): SerializedGraph {
-    return this._serializedGraph;
-  }
-
   get applicationConfig(): ApplicationConfig | undefined {
     return this._applicationConfig;
   }
@@ -65,8 +57,8 @@ export class NestContainer {
   }
 
   public async addModule(
-    metatype: Type<any> | DynamicModule | Promise<DynamicModule>,
-    scope: Type<any>[],
+    metatype: ModuleMetatype,
+    scope: ModuleScope,
   ): Promise<Module | undefined> {
     // In DependenciesScanner#scanForModules we already check for undefined or invalid modules
     // We still need to catch the edge-case of `forwardRef(() => undefined)`
@@ -79,18 +71,62 @@ export class NestContainer {
     if (this.modules.has(token)) {
       return this.modules.get(token);
     }
+
+    return this.setModule(
+      {
+        token,
+        type,
+        dynamicMetadata,
+      },
+      scope,
+    );
+  }
+
+  public async replaceModule(
+    metatypeToReplace: ModuleMetatype,
+    newMetatype: ModuleMetatype,
+    scope: ModuleScope,
+  ): Promise<Module | undefined> {
+    // In DependenciesScanner#scanForModules we already check for undefined or invalid modules
+    // We still need to catch the edge-case of `forwardRef(() => undefined)`
+    if (!metatypeToReplace || !newMetatype) {
+      throw new UndefinedForwardRefException(scope);
+    }
+
+    const { token } = await this.moduleCompiler.compile(metatypeToReplace);
+    const { type, dynamicMetadata } = await this.moduleCompiler.compile(
+      newMetatype,
+    );
+
+    return this.setModule(
+      {
+        token,
+        type,
+        dynamicMetadata,
+      },
+      scope,
+    );
+  }
+
+  private async setModule(
+    { token, dynamicMetadata, type }: ModuleFactory,
+    scope: ModuleScope,
+  ): Promise<Module | undefined> {
     const moduleRef = new Module(type, this);
     moduleRef.token = token;
-    moduleRef.initOnPreview = this.shouldInitOnPreview(type);
+
     this.modules.set(token, moduleRef);
 
-    const updatedScope = [].concat(scope, type);
-    await this.addDynamicMetadata(token, dynamicMetadata, updatedScope);
+    await this.addDynamicMetadata(
+      token,
+      dynamicMetadata,
+      [].concat(scope, type),
+    );
 
     if (this.isGlobalModule(type, dynamicMetadata)) {
-      moduleRef.isGlobal = true;
       this.addGlobalModule(moduleRef);
     }
+
     return moduleRef;
   }
 
@@ -163,29 +199,27 @@ export class NestContainer {
   public addProvider(
     provider: Provider,
     token: string,
-    enhancerSubtype?: EnhancerSubtype,
   ): string | symbol | Function {
-    const moduleRef = this.modules.get(token);
     if (!provider) {
-      throw new CircularDependencyException(moduleRef?.metatype.name);
+      throw new CircularDependencyException();
     }
-    if (!moduleRef) {
+    if (!this.modules.has(token)) {
       throw new UnknownModuleException();
     }
-    return moduleRef.addProvider(provider, enhancerSubtype) as Function;
+    const moduleRef = this.modules.get(token);
+    return moduleRef.addProvider(provider);
   }
 
   public addInjectable(
     injectable: Provider,
     token: string,
-    enhancerSubtype: EnhancerSubtype,
     host?: Type<Injectable>,
   ) {
     if (!this.modules.has(token)) {
       throw new UnknownModuleException();
     }
     const moduleRef = this.modules.get(token);
-    return moduleRef.addInjectable(injectable, enhancerSubtype, host);
+    moduleRef.addInjectable(injectable, host);
   }
 
   public addExportedProvider(provider: Type<any>, token: string) {
@@ -229,16 +263,15 @@ export class NestContainer {
     target.addRelatedModule(globalModule);
   }
 
-  public getDynamicMetadataByToken(token: string): Partial<DynamicModule>;
-  public getDynamicMetadataByToken<
-    K extends Exclude<keyof DynamicModule, 'global' | 'module'>,
-  >(token: string, metadataKey: K): DynamicModule[K];
   public getDynamicMetadataByToken(
     token: string,
-    metadataKey?: Exclude<keyof DynamicModule, 'global' | 'module'>,
+    metadataKey: keyof DynamicModule,
   ) {
     const metadata = this.dynamicModulesMetadata.get(token);
-    return metadataKey ? metadata?.[metadataKey] ?? [] : metadata;
+    if (metadata && metadata[metadataKey]) {
+      return metadata[metadataKey] as any[];
+    }
+    return [];
   }
 
   public registerCoreModuleRef(moduleRef: Module) {
@@ -257,8 +290,4 @@ export class NestContainer {
       isResolved: true,
     });
   }
-
-  private shouldInitOnPreview(type: Type) {
-    return InitializeOnPreviewAllowlist.has(type);
-  }
 }
diff --git a/packages/core/injector/helpers/provider-classifier.ts b/packages/core/injector/helpers/provider-classifier.ts
deleted file mode 100644
index b883a4ea8..000000000
--- a/packages/core/injector/helpers/provider-classifier.ts
+++ /dev/null
@@ -1,26 +0,0 @@
-import {
-  ClassProvider,
-  FactoryProvider,
-  Provider,
-  ValueProvider,
-} from '@nestjs/common';
-import { isUndefined } from '@nestjs/common/utils/shared.utils';
-
-export function isClassProvider<T = any>(
-  provider: Provider,
-): provider is ClassProvider<T> {
-  return Boolean((provider as ClassProvider<T>)?.useClass);
-}
-
-export function isValueProvider<T = any>(
-  provider: Provider,
-): provider is ValueProvider<T> {
-  const providerValue = (provider as ValueProvider)?.useValue;
-  return !isUndefined(providerValue);
-}
-
-export function isFactoryProvider<T = any>(
-  provider: Provider,
-): provider is FactoryProvider<T> {
-  return Boolean((provider as FactoryProvider).useFactory);
-}
diff --git a/packages/core/injector/helpers/silent-logger.ts b/packages/core/injector/helpers/silent-logger.ts
deleted file mode 100644
index 82c37d512..000000000
--- a/packages/core/injector/helpers/silent-logger.ts
+++ /dev/null
@@ -1,12 +0,0 @@
-import { Logger } from '@nestjs/common';
-
-// eslint-disable-next-line @typescript-eslint/no-empty-function
-const noop = () => {};
-export class SilentLogger extends Logger {
-  log = noop;
-  error = noop;
-  warn = noop;
-  debug = noop;
-  verbose = noop;
-  setLogLevels = noop;
-}
diff --git a/packages/core/injector/helpers/transient-instances.ts b/packages/core/injector/helpers/transient-instances.ts
index 4e7f4afd6..17287ef80 100644
--- a/packages/core/injector/helpers/transient-instances.ts
+++ b/packages/core/injector/helpers/transient-instances.ts
@@ -1,13 +1,13 @@
-import { InjectionToken } from '@nestjs/common';
 import { iterate } from 'iterare';
 import { InstanceWrapper } from '../instance-wrapper';
+import { InstanceToken } from '../module';
 
 /**
  * Returns the instances which are transient
- * @param instances The instances which should be checked whether they are transient
+ * @param instances The instances which should be checked whether they are transcient
  */
 export function getTransientInstances(
-  instances: [InjectionToken, InstanceWrapper][],
+  instances: [InstanceToken, InstanceWrapper][],
 ): InstanceWrapper[] {
   return iterate(instances)
     .filter(([_, wrapper]) => wrapper.isDependencyTreeStatic())
@@ -20,10 +20,10 @@ export function getTransientInstances(
 
 /**
  * Returns the instances which are not transient
- * @param instances The instances which should be checked whether they are transient
+ * @param instances The instances which should be checked whether they are transcient
  */
 export function getNonTransientInstances(
-  instances: [InjectionToken, InstanceWrapper][],
+  instances: [InstanceToken, InstanceWrapper][],
 ): InstanceWrapper[] {
   return iterate(instances)
     .filter(
diff --git a/packages/core/injector/index.ts b/packages/core/injector/index.ts
index 21e406d06..6eb81c89c 100644
--- a/packages/core/injector/index.ts
+++ b/packages/core/injector/index.ts
@@ -1,6 +1,6 @@
 export * from './container';
 export * from './inquirer';
-export { ContextId, HostComponentInfo } from './instance-wrapper';
-export * from './lazy-module-loader/lazy-module-loader';
+export { ContextId } from './instance-wrapper';
+export * from './lazy-module-loader';
 export * from './module-ref';
 export * from './modules-container';
diff --git a/packages/core/injector/injector.ts b/packages/core/injector/injector.ts
index 07361bfd9..67996afb3 100644
--- a/packages/core/injector/injector.ts
+++ b/packages/core/injector/injector.ts
@@ -1,9 +1,4 @@
-import {
-  InjectionToken,
-  Logger,
-  LoggerService,
-  OptionalFactoryDependency,
-} from '@nestjs/common';
+import { Logger, LoggerService } from '@nestjs/common';
 import {
   OPTIONAL_DEPS_METADATA,
   OPTIONAL_PROPERTY_DEPS_METADATA,
@@ -11,18 +6,18 @@ import {
   PROPERTY_DEPS_METADATA,
   SELF_DECLARED_DEPS_METADATA,
 } from '@nestjs/common/constants';
-import { Controller, Injectable, Type } from '@nestjs/common/interfaces';
+import { Controller } from '@nestjs/common/interfaces/controllers/controller.interface';
+import { Injectable } from '@nestjs/common/interfaces/injectable.interface';
+import { Type } from '@nestjs/common/interfaces/type.interface';
 import { clc } from '@nestjs/common/utils/cli-colors.util';
 import {
   isFunction,
   isNil,
   isObject,
   isString,
-  isSymbol,
   isUndefined,
 } from '@nestjs/common/utils/shared.utils';
 import { iterate } from 'iterare';
-import { performance } from 'perf_hooks';
 import { RuntimeException } from '../errors/exceptions/runtime.exception';
 import { UndefinedDependencyException } from '../errors/exceptions/undefined-dependency.exception';
 import { UnknownDependenciesException } from '../errors/exceptions/unknown-dependencies.exception';
@@ -34,18 +29,18 @@ import {
   InstanceWrapper,
   PropertyMetadata,
 } from './instance-wrapper';
-import { Module } from './module';
+import { InstanceToken, Module } from './module';
 
 /**
  * The type of an injectable dependency
  */
-export type InjectorDependency = InjectionToken;
+export type InjectorDependency = Type<any> | Function | string | symbol;
 
 /**
  * The property-based dependency
  */
 export interface PropertyDependency {
-  key: symbol | string;
+  key: string;
   name: InjectorDependency;
   isOptional?: boolean;
   instance?: any;
@@ -78,11 +73,9 @@ export interface InjectorDependencyContext {
 export class Injector {
   private logger: LoggerService = new Logger('InjectorLogger');
 
-  constructor(private readonly options?: { preview: boolean }) {}
-
   public loadPrototype<T>(
     { token }: InstanceWrapper<T>,
-    collection: Map<InjectionToken, InstanceWrapper<T>>,
+    collection: Map<InstanceToken, InstanceWrapper<T>>,
     contextId = STATIC_CONTEXT,
   ) {
     if (!collection) {
@@ -101,22 +94,15 @@ export class Injector {
 
   public async loadInstance<T>(
     wrapper: InstanceWrapper<T>,
-    collection: Map<InjectionToken, InstanceWrapper>,
+    collection: Map<InstanceToken, InstanceWrapper>,
     moduleRef: Module,
     contextId = STATIC_CONTEXT,
     inquirer?: InstanceWrapper,
   ) {
     const inquirerId = this.getInquirerId(inquirer);
-    const instanceHost = wrapper.getInstanceByContextId(
-      this.getContextId(contextId, wrapper),
-      inquirerId,
-    );
+    const instanceHost = wrapper.getInstanceByContextId(contextId, inquirerId);
     if (instanceHost.isPending) {
-      return instanceHost.donePromise.then((err?: unknown) => {
-        if (err) {
-          throw err;
-        }
-      });
+      return instanceHost.donePromise;
     }
     const done = this.applyDoneHook(instanceHost);
     const token = wrapper.token || wrapper.name;
@@ -129,46 +115,39 @@ export class Injector {
     if (instanceHost.isResolved) {
       return done();
     }
-    try {
-      const t0 = this.getNowTimestamp();
-      const callback = async (instances: unknown[]) => {
-        const properties = await this.resolveProperties(
-          wrapper,
-          moduleRef,
-          inject as InjectionToken[],
-          contextId,
-          wrapper,
-          inquirer,
-        );
-        const instance = await this.instantiateClass(
-          instances,
-          wrapper,
-          targetWrapper,
-          contextId,
-          inquirer,
-        );
-        this.applyProperties(instance, properties);
-        wrapper.initTime = this.getNowTimestamp() - t0;
-        done();
-      };
-      await this.resolveConstructorParams<T>(
+    const callback = async (instances: unknown[]) => {
+      const properties = await this.resolveProperties(
         wrapper,
         moduleRef,
-        inject as InjectionToken[],
-        callback,
+        inject,
         contextId,
         wrapper,
         inquirer,
       );
-    } catch (err) {
-      done(err);
-      throw err;
-    }
+      const instance = await this.instantiateClass(
+        instances,
+        wrapper,
+        targetWrapper,
+        contextId,
+        inquirer,
+      );
+      this.applyProperties(instance, properties);
+      done();
+    };
+    await this.resolveConstructorParams<T>(
+      wrapper,
+      moduleRef,
+      inject,
+      callback,
+      contextId,
+      wrapper,
+      inquirer,
+    );
   }
 
   public async loadMiddleware(
     wrapper: InstanceWrapper,
-    collection: Map<InjectionToken, InstanceWrapper>,
+    collection: Map<InstanceToken, InstanceWrapper>,
     moduleRef: Module,
     contextId = STATIC_CONTEXT,
     inquirer?: InstanceWrapper,
@@ -237,11 +216,9 @@ export class Injector {
     await this.loadEnhancersPerContext(wrapper, contextId, wrapper);
   }
 
-  public applyDoneHook<T>(
-    wrapper: InstancePerContext<T>,
-  ): (err?: unknown) => void {
-    let done: (err?: unknown) => void;
-    wrapper.donePromise = new Promise<unknown>((resolve, reject) => {
+  public applyDoneHook<T>(wrapper: InstancePerContext<T>): () => void {
+    let done: () => void;
+    wrapper.donePromise = new Promise<void>((resolve, reject) => {
       done = resolve;
     });
     wrapper.isPending = true;
@@ -269,11 +246,12 @@ export class Injector {
       );
       return callback(deps);
     }
-
-    const isFactoryProvider = !isNil(inject);
-    const [dependencies, optionalDependenciesIds] = isFactoryProvider
-      ? this.getFactoryProviderDependencies(wrapper)
-      : this.getClassDependencies(wrapper);
+    const dependencies = isNil(inject)
+      ? this.reflectConstructorParams(wrapper.metatype as Type<any>)
+      : inject;
+    const optionalDependenciesIds = isNil(inject)
+      ? this.reflectOptionalParams(wrapper.metatype as Type<any>)
+      : [];
 
     let isResolved = true;
     const resolveParam = async (param: unknown, index: number) => {
@@ -295,7 +273,7 @@ export class Injector {
           index,
         );
         const instanceHost = paramWrapper.getInstanceByContextId(
-          this.getContextId(contextId, paramWrapper),
+          contextId,
           inquirerId,
         );
         if (!instanceHost.isResolved && !paramWrapper.forwardRef) {
@@ -314,51 +292,8 @@ export class Injector {
     isResolved && (await callback(instances));
   }
 
-  public getClassDependencies<T>(
-    wrapper: InstanceWrapper<T>,
-  ): [InjectorDependency[], number[]] {
-    const ctorRef = wrapper.metatype as Type<any>;
-    return [
-      this.reflectConstructorParams(ctorRef),
-      this.reflectOptionalParams(ctorRef),
-    ];
-  }
-
-  public getFactoryProviderDependencies<T>(
-    wrapper: InstanceWrapper<T>,
-  ): [InjectorDependency[], number[]] {
-    const optionalDependenciesIds = [];
-    const isOptionalFactoryDep = (
-      item: InjectionToken | OptionalFactoryDependency,
-    ): item is OptionalFactoryDependency =>
-      !isUndefined((item as OptionalFactoryDependency).token) &&
-      !isUndefined((item as OptionalFactoryDependency).optional);
-
-    const mapFactoryProviderInjectArray = (
-      item: InjectionToken | OptionalFactoryDependency,
-      index: number,
-    ): InjectionToken => {
-      if (typeof item !== 'object') {
-        return item;
-      }
-      if (isOptionalFactoryDep(item)) {
-        if (item.optional) {
-          optionalDependenciesIds.push(index);
-        }
-        return item?.token;
-      }
-      return item;
-    };
-    return [
-      wrapper.inject?.map?.(mapFactoryProviderInjectArray),
-      optionalDependenciesIds,
-    ];
-  }
-
   public reflectConstructorParams<T>(type: Type<T>): any[] {
-    const paramtypes = [
-      ...(Reflect.getMetadata(PARAMTYPES_METADATA, type) || []),
-    ];
+    const paramtypes = Reflect.getMetadata(PARAMTYPES_METADATA, type) || [];
     const selfParams = this.reflectSelfParams<T>(type);
 
     selfParams.forEach(({ index, param }) => (paramtypes[index] = param));
@@ -380,7 +315,7 @@ export class Injector {
     moduleRef: Module,
     contextId = STATIC_CONTEXT,
     inquirer?: InstanceWrapper,
-    keyOrIndex?: symbol | string | number,
+    keyOrIndex?: string | number,
   ) {
     if (isUndefined(param)) {
       this.logger.log(
@@ -417,12 +352,12 @@ export class Injector {
 
   public async resolveComponentInstance<T>(
     moduleRef: Module,
-    token: InjectionToken,
+    token: InstanceToken,
     dependencyContext: InjectorDependencyContext,
     wrapper: InstanceWrapper<T>,
     contextId = STATIC_CONTEXT,
     inquirer?: InstanceWrapper,
-    keyOrIndex?: symbol | string | number,
+    keyOrIndex?: string | number,
   ): Promise<InstanceWrapper> {
     this.printResolvingDependenciesLog(token, inquirer);
     this.printLookingForProviderLog(token, moduleRef);
@@ -453,16 +388,11 @@ export class Injector {
   ): Promise<InstanceWrapper> {
     const inquirerId = this.getInquirerId(inquirer);
     const instanceHost = instanceWrapper.getInstanceByContextId(
-      this.getContextId(contextId, instanceWrapper),
+      contextId,
       inquirerId,
     );
     if (!instanceHost.isResolved && !instanceWrapper.forwardRef) {
-      await this.loadProvider(
-        instanceWrapper,
-        instanceWrapper.host ?? moduleRef,
-        contextId,
-        inquirer,
-      );
+      await this.loadProvider(instanceWrapper, moduleRef, contextId, inquirer);
     } else if (
       !instanceHost.isResolved &&
       instanceWrapper.forwardRef &&
@@ -482,7 +412,7 @@ export class Injector {
     }
     if (instanceWrapper.async) {
       const host = instanceWrapper.getInstanceByContextId(
-        this.getContextId(contextId, instanceWrapper),
+        contextId,
         inquirerId,
       );
       host.instance = await host.instance;
@@ -498,16 +428,14 @@ export class Injector {
     wrapper: InstanceWrapper<T>,
     contextId = STATIC_CONTEXT,
     inquirer?: InstanceWrapper,
-    keyOrIndex?: symbol | string | number,
+    keyOrIndex?: string | number,
   ): Promise<InstanceWrapper<T>> {
-    const token = wrapper.token || wrapper.name;
     const { name } = dependencyContext;
-    if (wrapper && token === name) {
+    if (wrapper && wrapper.name === name) {
       throw new UnknownDependenciesException(
         wrapper.name,
         dependencyContext,
         moduleRef,
-        { id: wrapper.id },
       );
     }
     if (providers.has(name)) {
@@ -532,7 +460,7 @@ export class Injector {
     wrapper: InstanceWrapper<T>,
     contextId = STATIC_CONTEXT,
     inquirer?: InstanceWrapper,
-    keyOrIndex?: symbol | string | number,
+    keyOrIndex?: string | number,
   ) {
     const instanceWrapper = await this.lookupComponentInImports(
       moduleRef,
@@ -548,7 +476,6 @@ export class Injector {
         wrapper.name,
         dependencyContext,
         moduleRef,
-        { id: wrapper.id },
       );
     }
     return instanceWrapper;
@@ -556,12 +483,12 @@ export class Injector {
 
   public async lookupComponentInImports(
     moduleRef: Module,
-    name: InjectionToken,
+    name: InstanceToken,
     wrapper: InstanceWrapper,
     moduleRegistry: any[] = [],
     contextId = STATIC_CONTEXT,
     inquirer?: InstanceWrapper,
-    keyOrIndex?: symbol | string | number,
+    keyOrIndex?: string | number,
     isTraversing?: boolean,
   ): Promise<any> {
     let instanceWrapperRef: InstanceWrapper = null;
@@ -605,7 +532,7 @@ export class Injector {
 
       const inquirerId = this.getInquirerId(inquirer);
       const instanceHost = instanceWrapperRef.getInstanceByContextId(
-        this.getContextId(contextId, instanceWrapperRef),
+        contextId,
         inquirerId,
       );
       if (!instanceHost.isResolved && !instanceWrapperRef.forwardRef) {
@@ -661,7 +588,7 @@ export class Injector {
           }
           const inquirerId = this.getInquirerId(inquirer);
           const instanceHost = paramWrapper.getInstanceByContextId(
-            this.getContextId(contextId, paramWrapper),
+            contextId,
             inquirerId,
           );
           return instanceHost.instance;
@@ -713,7 +640,7 @@ export class Injector {
     const { metatype, inject } = wrapper;
     const inquirerId = this.getInquirerId(inquirer);
     const instanceHost = targetMetatype.getInstanceByContextId(
-      this.getContextId(contextId, targetMetatype),
+      contextId,
       inquirerId,
     );
     const isInContext =
@@ -722,11 +649,6 @@ export class Injector {
       wrapper.isLazyTransient(contextId, inquirer) ||
       wrapper.isExplicitlyRequested(contextId, inquirer);
 
-    if (this.options?.preview && !wrapper.host?.initOnPreview) {
-      instanceHost.isResolved = true;
-      return instanceHost.instance;
-    }
-
     if (isNil(inject) && isInContext) {
       instanceHost.instance = wrapper.forwardRef
         ? Object.assign(
@@ -747,7 +669,7 @@ export class Injector {
   public async loadPerContext<T = any>(
     instance: T,
     moduleRef: Module,
-    collection: Map<InjectionToken, InstanceWrapper>,
+    collection: Map<InstanceToken, InstanceWrapper>,
     ctx: ContextId,
     wrapper?: InstanceWrapper,
   ): Promise<T> {
@@ -758,10 +680,7 @@ export class Injector {
     await this.loadInstance(wrapper, collection, moduleRef, ctx, wrapper);
     await this.loadEnhancersPerContext(wrapper, ctx, wrapper);
 
-    const host = wrapper.getInstanceByContextId(
-      this.getContextId(ctx, wrapper),
-      wrapper.id,
-    );
+    const host = wrapper.getInstanceByContextId(ctx, wrapper.id);
     return host && (host.instance as T);
   }
 
@@ -790,7 +709,7 @@ export class Injector {
     inquirer?: InstanceWrapper,
     parentInquirer?: InstanceWrapper,
   ): Promise<any[]> {
-    const hosts: Array<InstanceWrapper<any> | undefined> = await Promise.all(
+    const hosts = await Promise.all(
       metadata.map(async item =>
         this.resolveScopedComponentHost(
           item,
@@ -802,11 +721,7 @@ export class Injector {
     );
     const inquirerId = this.getInquirerId(inquirer);
     return hosts.map(
-      item =>
-        item?.getInstanceByContextId(
-          this.getContextId(contextId, item),
-          inquirerId,
-        ).instance,
+      item => item.getInstanceByContextId(contextId, inquirerId).instance,
     );
   }
 
@@ -830,10 +745,7 @@ export class Injector {
     return dependenciesHosts.map(({ key, host }) => ({
       key,
       name: key,
-      instance: host.getInstanceByContextId(
-        this.getContextId(contextId, host),
-        inquirerId,
-      ).instance,
+      instance: host.getInstanceByContextId(contextId, inquirerId).instance,
     }));
   }
 
@@ -867,23 +779,21 @@ export class Injector {
   }
 
   protected addDependencyMetadata(
-    keyOrIndex: symbol | string | number,
+    keyOrIndex: number | string,
     hostWrapper: InstanceWrapper,
     instanceWrapper: InstanceWrapper,
   ) {
-    if (isSymbol(keyOrIndex) || isString(keyOrIndex)) {
-      hostWrapper.addPropertiesMetadata(keyOrIndex, instanceWrapper);
-    } else {
-      hostWrapper.addCtorMetadata(keyOrIndex, instanceWrapper);
-    }
+    isString(keyOrIndex)
+      ? hostWrapper.addPropertiesMetadata(keyOrIndex, instanceWrapper)
+      : hostWrapper.addCtorMetadata(keyOrIndex, instanceWrapper);
   }
 
-  private getTokenName(token: InjectionToken): string {
+  private getTokenName(token: InstanceToken): string {
     return isFunction(token) ? (token as Function).name : token.toString();
   }
 
   private printResolvingDependenciesLog(
-    token: InjectionToken,
+    token: InstanceToken,
     inquirer?: InstanceWrapper,
   ): void {
     if (!this.isDebugMode()) {
@@ -904,7 +814,7 @@ export class Injector {
   }
 
   private printLookingForProviderLog(
-    token: InjectionToken,
+    token: InstanceToken,
     moduleRef: Module,
   ): void {
     if (!this.isDebugMode()) {
@@ -919,10 +829,7 @@ export class Injector {
     );
   }
 
-  private printFoundInModuleLog(
-    token: InjectionToken,
-    moduleRef: Module,
-  ): void {
+  private printFoundInModuleLog(token: InstanceToken, moduleRef: Module): void {
     if (!this.isDebugMode()) {
       return;
     }
@@ -938,20 +845,4 @@ export class Injector {
   private isDebugMode(): boolean {
     return !!process.env.NEST_DEBUG;
   }
-
-  private getContextId(
-    contextId: ContextId,
-    instanceWrapper: InstanceWrapper,
-  ): ContextId {
-    return contextId.getParent
-      ? contextId.getParent({
-          token: instanceWrapper.token,
-          isTreeDurable: instanceWrapper.isDependencyTreeDurable(),
-        })
-      : contextId;
-  }
-
-  private getNowTimestamp() {
-    return performance.now();
-  }
 }
diff --git a/packages/core/injector/instance-links-host.ts b/packages/core/injector/instance-links-host.ts
index bd6839e30..a07617d28 100644
--- a/packages/core/injector/instance-links-host.ts
+++ b/packages/core/injector/instance-links-host.ts
@@ -1,50 +1,34 @@
-import { InjectionToken } from '@nestjs/common';
 import { isFunction } from '@nestjs/common/utils/shared.utils';
 import { UnknownElementException } from '../errors/exceptions/unknown-element.exception';
 import { NestContainer } from './container';
 import { InstanceWrapper } from './instance-wrapper';
-import { Module } from './module';
+import { InstanceToken, Module } from './module';
 
 type HostCollection = 'providers' | 'controllers' | 'injectables';
 
 export interface InstanceLink<T = any> {
-  token: InjectionToken;
+  token: InstanceToken;
   wrapperRef: InstanceWrapper<T>;
   collection: Map<any, InstanceWrapper>;
   moduleId: string;
 }
 
 export class InstanceLinksHost {
-  private readonly instanceLinks = new Map<InjectionToken, InstanceLink[]>();
+  private readonly instanceLinks = new Map<InstanceToken, InstanceLink[]>();
 
   constructor(private readonly container: NestContainer) {
     this.initialize();
   }
 
-  get<T = any>(token: InjectionToken): InstanceLink<T>;
-  get<T = any>(
-    token: InjectionToken,
-    options?: { moduleId?: string; each?: boolean },
-  ): InstanceLink<T> | Array<InstanceLink<T>>;
-  get<T = any>(
-    token: InjectionToken,
-    options: { moduleId?: string; each?: boolean } = {},
-  ): InstanceLink<T> | Array<InstanceLink<T>> {
-    const instanceLinksForGivenToken = this.instanceLinks.get(token);
+  get<T = any>(token: InstanceToken, moduleId?: string): InstanceLink<T> {
+    const modulesMap = this.instanceLinks.get(token);
 
-    if (!instanceLinksForGivenToken) {
+    if (!modulesMap) {
       throw new UnknownElementException(this.getInstanceNameByToken(token));
     }
-
-    if (options.each) {
-      return instanceLinksForGivenToken;
-    }
-
-    const instanceLink = options.moduleId
-      ? instanceLinksForGivenToken.find(
-          item => item.moduleId === options.moduleId,
-        )
-      : instanceLinksForGivenToken[instanceLinksForGivenToken.length - 1];
+    const instanceLink = moduleId
+      ? modulesMap.find(item => item.moduleId === moduleId)
+      : modulesMap[modulesMap.length - 1];
 
     if (!instanceLink) {
       throw new UnknownElementException(this.getInstanceNameByToken(token));
@@ -70,7 +54,7 @@ export class InstanceLinksHost {
 
   private addLink(
     wrapper: InstanceWrapper,
-    token: InjectionToken,
+    token: InstanceToken,
     moduleRef: Module,
     collectionName: HostCollection,
   ) {
@@ -88,7 +72,7 @@ export class InstanceLinksHost {
     }
   }
 
-  private getInstanceNameByToken(token: InjectionToken): string {
+  private getInstanceNameByToken(token: InstanceToken): string {
     return isFunction(token) ? (token as Function)?.name : (token as string);
   }
 }
diff --git a/packages/core/injector/instance-loader.ts b/packages/core/injector/instance-loader.ts
index 489ffdef4..01df482f8 100644
--- a/packages/core/injector/instance-loader.ts
+++ b/packages/core/injector/instance-loader.ts
@@ -1,40 +1,26 @@
-import { Logger, LoggerService } from '@nestjs/common';
+import { Logger } from '@nestjs/common';
 import { Controller } from '@nestjs/common/interfaces/controllers/controller.interface';
 import { Injectable } from '@nestjs/common/interfaces/injectable.interface';
 import { MODULE_INIT_MESSAGE } from '../helpers/messages';
-import { GraphInspector } from '../inspector/graph-inspector';
 import { NestContainer } from './container';
 import { Injector } from './injector';
-import { InternalCoreModule } from './internal-core-module/internal-core-module';
+import { InternalCoreModule } from './internal-core-module';
 import { Module } from './module';
 
-export class InstanceLoader<TInjector extends Injector = Injector> {
+export class InstanceLoader {
+  protected readonly injector = new Injector();
   constructor(
     protected readonly container: NestContainer,
-    protected readonly injector: TInjector,
-    protected readonly graphInspector: GraphInspector,
-    private logger: LoggerService = new Logger(InstanceLoader.name, {
+    private readonly logger = new Logger(InstanceLoader.name, {
       timestamp: true,
     }),
   ) {}
 
-  public setLogger(logger: Logger) {
-    this.logger = logger;
-  }
-
   public async createInstancesOfDependencies(
     modules: Map<string, Module> = this.container.getModules(),
   ) {
     this.createPrototypes(modules);
-
-    try {
-      await this.createInstances(modules);
-    } catch (err) {
-      this.graphInspector.inspectModules(modules);
-      this.graphInspector.registerPartial(err);
-      throw err;
-    }
-    this.graphInspector.inspectModules(modules);
+    await this.createInstances(modules);
   }
 
   private createPrototypes(modules: Map<string, Module>) {
@@ -52,7 +38,7 @@ export class InstanceLoader<TInjector extends Injector = Injector> {
         await this.createInstancesOfInjectables(moduleRef);
         await this.createInstancesOfControllers(moduleRef);
 
-        const { name } = moduleRef;
+        const { name } = moduleRef.metatype;
         this.isModuleWhitelisted(name) &&
           this.logger.log(MODULE_INIT_MESSAGE`${name}`);
       }),
@@ -70,10 +56,7 @@ export class InstanceLoader<TInjector extends Injector = Injector> {
     const { providers } = moduleRef;
     const wrappers = [...providers.values()];
     await Promise.all(
-      wrappers.map(async item => {
-        await this.injector.loadProvider(item, moduleRef);
-        this.graphInspector.inspectInstanceWrapper(item, moduleRef);
-      }),
+      wrappers.map(item => this.injector.loadProvider(item, moduleRef)),
     );
   }
 
@@ -88,10 +71,7 @@ export class InstanceLoader<TInjector extends Injector = Injector> {
     const { controllers } = moduleRef;
     const wrappers = [...controllers.values()];
     await Promise.all(
-      wrappers.map(async item => {
-        await this.injector.loadController(item, moduleRef);
-        this.graphInspector.inspectInstanceWrapper(item, moduleRef);
-      }),
+      wrappers.map(item => this.injector.loadController(item, moduleRef)),
     );
   }
 
@@ -106,10 +86,7 @@ export class InstanceLoader<TInjector extends Injector = Injector> {
     const { injectables } = moduleRef;
     const wrappers = [...injectables.values()];
     await Promise.all(
-      wrappers.map(async item => {
-        await this.injector.loadInjectable(item, moduleRef);
-        this.graphInspector.inspectInstanceWrapper(item, moduleRef);
-      }),
+      wrappers.map(item => this.injector.loadInjectable(item, moduleRef)),
     );
   }
 
diff --git a/packages/core/injector/instance-wrapper.ts b/packages/core/injector/instance-wrapper.ts
index d29ae711d..9d9d29579 100644
--- a/packages/core/injector/instance-wrapper.ts
+++ b/packages/core/injector/instance-wrapper.ts
@@ -1,52 +1,30 @@
-import { Logger, LoggerService, Provider, Scope, Type } from '@nestjs/common';
-import { EnhancerSubtype } from '@nestjs/common/constants';
-import { FactoryProvider, InjectionToken } from '@nestjs/common/interfaces';
-import { clc } from '@nestjs/common/utils/cli-colors.util';
-import { randomStringGenerator } from '@nestjs/common/utils/random-string-generator.util';
+import { Provider, Scope, Type } from '@nestjs/common';
 import {
-  isNil,
-  isString,
-  isUndefined,
-} from '@nestjs/common/utils/shared.utils';
+  ClassProvider,
+  FactoryProvider,
+  ValueProvider,
+} from '@nestjs/common/interfaces';
+import { randomStringGenerator } from '@nestjs/common/utils/random-string-generator.util';
+import { isNil, isUndefined } from '@nestjs/common/utils/shared.utils';
 import { iterate } from 'iterare';
-import { UuidFactory } from '../inspector/uuid-factory';
 import { STATIC_CONTEXT } from './constants';
-import {
-  isClassProvider,
-  isFactoryProvider,
-  isValueProvider,
-} from './helpers/provider-classifier';
-import { Module } from './module';
+import { InstanceToken, Module } from './module';
 
 export const INSTANCE_METADATA_SYMBOL = Symbol.for('instance_metadata:cache');
 export const INSTANCE_ID_SYMBOL = Symbol.for('instance_metadata:id');
 
-export interface HostComponentInfo {
-  /**
-   * Injection token (or class reference)
-   */
-  token: InjectionToken;
-  /**
-   * Flag that indicates whether DI subtree is durable
-   */
-  isTreeDurable: boolean;
-}
-
 export interface ContextId {
   readonly id: number;
-  payload?: unknown;
-  getParent?(info: HostComponentInfo): ContextId;
 }
 
 export interface InstancePerContext<T> {
   instance: T;
   isResolved?: boolean;
   isPending?: boolean;
-  donePromise?: Promise<unknown>;
+  donePromise?: Promise<void>;
 }
-
 export interface PropertyMetadata {
-  key: symbol | string;
+  key: string;
   wrapper: InstanceWrapper;
 }
 
@@ -58,20 +36,15 @@ interface InstanceMetadataStore {
 
 export class InstanceWrapper<T = any> {
   public readonly name: any;
-  public readonly token: InjectionToken;
+  public readonly token: InstanceToken;
   public readonly async?: boolean;
   public readonly host?: Module;
   public readonly isAlias: boolean = false;
-  public readonly subtype?: EnhancerSubtype;
 
   public scope?: Scope = Scope.DEFAULT;
   public metatype: Type<T> | Function;
-  public inject?: FactoryProvider['inject'];
+  public inject?: (string | symbol | Function | Type<any>)[];
   public forwardRef?: boolean;
-  public durable?: boolean;
-  public initTime?: number;
-
-  private static logger: LoggerService = new Logger(InstanceWrapper.name);
 
   private readonly values = new WeakMap<ContextId, InstancePerContext<T>>();
   private readonly [INSTANCE_METADATA_SYMBOL]: InstanceMetadataStore = {};
@@ -80,14 +53,12 @@ export class InstanceWrapper<T = any> {
     | Map<string, WeakMap<ContextId, InstancePerContext<T>>>
     | undefined;
   private isTreeStatic: boolean | undefined;
-  private isTreeDurable: boolean | undefined;
 
   constructor(
     metadata: Partial<InstanceWrapper<T>> & Partial<InstancePerContext<T>> = {},
   ) {
+    this[INSTANCE_ID_SYMBOL] = randomStringGenerator();
     this.initialize(metadata);
-    this[INSTANCE_ID_SYMBOL] =
-      metadata[INSTANCE_ID_SYMBOL] ?? this.generateUuid();
   }
 
   get id(): string {
@@ -175,7 +146,7 @@ export class InstanceWrapper<T = any> {
     return this[INSTANCE_METADATA_SYMBOL].dependencies;
   }
 
-  public addPropertiesMetadata(key: symbol | string, wrapper: InstanceWrapper) {
+  public addPropertiesMetadata(key: string, wrapper: InstanceWrapper) {
     if (!this[INSTANCE_METADATA_SYMBOL].properties) {
       this[INSTANCE_METADATA_SYMBOL].properties = [];
     }
@@ -200,91 +171,38 @@ export class InstanceWrapper<T = any> {
     return this[INSTANCE_METADATA_SYMBOL].enhancers;
   }
 
-  public isDependencyTreeDurable(lookupRegistry: string[] = []): boolean {
-    if (!isUndefined(this.isTreeDurable)) {
-      return this.isTreeDurable;
+  public isDependencyTreeStatic(lookupRegistry: string[] = []): boolean {
+    if (!isUndefined(this.isTreeStatic)) {
+      return this.isTreeStatic;
     }
     if (this.scope === Scope.REQUEST) {
-      this.isTreeDurable = this.durable === undefined ? false : this.durable;
-      if (this.isTreeDurable) {
-        this.printIntrospectedAsDurable();
-      }
-      return this.isTreeDurable;
-    }
-    const isStatic = this.isDependencyTreeStatic();
-    if (isStatic) {
-      return false;
-    }
-
-    const isTreeNonDurable = this.introspectDepsAttribute(
-      (collection, registry) =>
-        collection.some(
-          (item: InstanceWrapper) =>
-            !item.isDependencyTreeStatic() &&
-            !item.isDependencyTreeDurable(registry),
-        ),
-      lookupRegistry,
-    );
-    this.isTreeDurable = !isTreeNonDurable;
-    if (this.isTreeDurable) {
-      this.printIntrospectedAsDurable();
+      this.isTreeStatic = false;
+      return this.isTreeStatic;
     }
-    return this.isTreeDurable;
-  }
-
-  public introspectDepsAttribute(
-    callback: (
-      collection: InstanceWrapper[],
-      lookupRegistry: string[],
-    ) => boolean,
-    lookupRegistry: string[] = [],
-  ): boolean {
     if (lookupRegistry.includes(this[INSTANCE_ID_SYMBOL])) {
-      return false;
+      return true;
     }
     lookupRegistry = lookupRegistry.concat(this[INSTANCE_ID_SYMBOL]);
 
     const { dependencies, properties, enhancers } =
       this[INSTANCE_METADATA_SYMBOL];
+    let isStatic =
+      (dependencies &&
+        this.isWrapperListStatic(dependencies, lookupRegistry)) ||
+      !dependencies;
 
-    let introspectionResult = dependencies
-      ? callback(dependencies, lookupRegistry)
-      : false;
-
-    if (introspectionResult || !(properties || enhancers)) {
-      return introspectionResult;
-    }
-    introspectionResult = properties
-      ? callback(
-          properties.map(item => item.wrapper),
-          lookupRegistry,
-        )
-      : false;
-    if (introspectionResult || !enhancers) {
-      return introspectionResult;
-    }
-    return enhancers ? callback(enhancers, lookupRegistry) : false;
-  }
-
-  public isDependencyTreeStatic(lookupRegistry: string[] = []): boolean {
-    if (!isUndefined(this.isTreeStatic)) {
+    if (!isStatic || !(properties || enhancers)) {
+      this.isTreeStatic = isStatic;
       return this.isTreeStatic;
     }
-    if (this.scope === Scope.REQUEST) {
-      this.isTreeStatic = false;
-      this.printIntrospectedAsRequestScoped();
+    const propertiesHosts = (properties || []).map(item => item.wrapper);
+    isStatic =
+      isStatic && this.isWrapperListStatic(propertiesHosts, lookupRegistry);
+    if (!isStatic || !enhancers) {
+      this.isTreeStatic = isStatic;
       return this.isTreeStatic;
     }
-    this.isTreeStatic = !this.introspectDepsAttribute(
-      (collection, registry) =>
-        collection.some(
-          (item: InstanceWrapper) => !item.isDependencyTreeStatic(registry),
-        ),
-      lookupRegistry,
-    );
-    if (!this.isTreeStatic) {
-      this.printIntrospectedAsRequestScoped();
-    }
+    this.isTreeStatic = this.isWrapperListStatic(enhancers, lookupRegistry);
     return this.isTreeStatic;
   }
 
@@ -400,23 +318,22 @@ export class InstanceWrapper<T = any> {
   }
 
   public mergeWith(provider: Provider) {
-    if (isValueProvider(provider)) {
+    if (!isUndefined((provider as ValueProvider).useValue)) {
       this.metatype = null;
       this.inject = null;
-
       this.scope = Scope.DEFAULT;
 
       this.setInstanceByContextId(STATIC_CONTEXT, {
-        instance: provider.useValue,
+        instance: (provider as ValueProvider).useValue,
         isResolved: true,
         isPending: false,
       });
-    } else if (isClassProvider(provider)) {
+    } else if ((provider as ClassProvider).useClass) {
       this.inject = null;
-      this.metatype = provider.useClass;
-    } else if (isFactoryProvider(provider)) {
-      this.metatype = provider.useFactory;
-      this.inject = provider.inject || [];
+      this.metatype = (provider as ClassProvider).useClass;
+    } else if ((provider as FactoryProvider).useFactory) {
+      this.metatype = (provider as FactoryProvider).useFactory;
+      this.inject = (provider as FactoryProvider).inject || [];
     }
   }
 
@@ -424,6 +341,15 @@ export class InstanceWrapper<T = any> {
     return isNil(this.inject) && this.metatype && this.metatype.prototype;
   }
 
+  private isWrapperListStatic(
+    tree: InstanceWrapper[],
+    lookupRegistry: string[],
+  ): boolean {
+    return tree.every((item: InstanceWrapper) =>
+      item.isDependencyTreeStatic(lookupRegistry),
+    );
+  }
+
   private initialize(
     metadata: Partial<InstanceWrapper<T>> & Partial<InstancePerContext<T>>,
   ) {
@@ -436,41 +362,4 @@ export class InstanceWrapper<T = any> {
     });
     this.scope === Scope.TRANSIENT && (this.transientMap = new Map());
   }
-
-  private printIntrospectedAsRequestScoped() {
-    if (!this.isDebugMode() || this.name === 'REQUEST') {
-      return;
-    }
-    if (isString(this.name)) {
-      InstanceWrapper.logger.log(
-        `${clc.cyanBright(this.name)}${clc.green(
-          ' introspected as ',
-        )}${clc.magentaBright('request-scoped')}`,
-      );
-    }
-  }
-
-  private printIntrospectedAsDurable() {
-    if (!this.isDebugMode()) {
-      return;
-    }
-    if (isString(this.name)) {
-      InstanceWrapper.logger.log(
-        `${clc.cyanBright(this.name)}${clc.green(
-          ' introspected as ',
-        )}${clc.magentaBright('durable')}`,
-      );
-    }
-  }
-
-  private isDebugMode(): boolean {
-    return !!process.env.NEST_DEBUG;
-  }
-
-  private generateUuid(): string {
-    let key = this.name?.toString() ?? this.token?.toString();
-    key += this.host?.name ?? '';
-
-    return key ? UuidFactory.get(key) : randomStringGenerator();
-  }
 }
diff --git a/packages/core/injector/internal-core-module-factory.ts b/packages/core/injector/internal-core-module-factory.ts
new file mode 100644
index 000000000..daac18369
--- /dev/null
+++ b/packages/core/injector/internal-core-module-factory.ts
@@ -0,0 +1,55 @@
+import { Logger } from '@nestjs/common';
+import { ExternalContextCreator } from '../helpers/external-context-creator';
+import { HttpAdapterHost } from '../helpers/http-adapter-host';
+import { DependenciesScanner, ModuleToOverride } from '../scanner';
+import { ModuleCompiler } from './compiler';
+import { NestContainer } from './container';
+import { InstanceLoader } from './instance-loader';
+import { InternalCoreModule } from './internal-core-module';
+import { LazyModuleLoader } from './lazy-module-loader';
+import { ModulesContainer } from './modules-container';
+
+export class InternalCoreModuleFactory {
+  static create(
+    container: NestContainer,
+    scanner: DependenciesScanner,
+    moduleCompiler: ModuleCompiler,
+    httpAdapterHost: HttpAdapterHost,
+    modulesToOverride?: ModuleToOverride[],
+  ) {
+    return InternalCoreModule.register([
+      {
+        provide: ExternalContextCreator,
+        useValue: ExternalContextCreator.fromContainer(container),
+      },
+      {
+        provide: ModulesContainer,
+        useValue: container.getModules(),
+      },
+      {
+        provide: HttpAdapterHost,
+        useValue: httpAdapterHost,
+      },
+      {
+        provide: HttpAdapterHost.name,
+        useExisting: HttpAdapterHost,
+      },
+      {
+        provide: LazyModuleLoader,
+        useFactory: () => {
+          const logger = new Logger(LazyModuleLoader.name, {
+            timestamp: false,
+          });
+          const instanceLoader = new InstanceLoader(container, logger);
+          return new LazyModuleLoader(
+            scanner,
+            instanceLoader,
+            moduleCompiler,
+            container.getModules(),
+            modulesToOverride,
+          );
+        },
+      },
+    ]);
+  }
+}
diff --git a/packages/core/injector/internal-core-module.ts b/packages/core/injector/internal-core-module.ts
new file mode 100644
index 000000000..3e3a6156f
--- /dev/null
+++ b/packages/core/injector/internal-core-module.ts
@@ -0,0 +1,41 @@
+import { DynamicModule, Global, Module } from '@nestjs/common';
+import {
+  ExistingProvider,
+  FactoryProvider,
+  ValueProvider,
+} from '@nestjs/common/interfaces';
+import { requestProvider } from '../router/request/request-providers';
+import { Reflector } from '../services';
+import { inquirerProvider } from './inquirer/inquirer-providers';
+
+const ReflectorAliasProvider = {
+  provide: Reflector.name,
+  useExisting: Reflector,
+};
+
+@Global()
+@Module({
+  providers: [
+    Reflector,
+    ReflectorAliasProvider,
+    requestProvider,
+    inquirerProvider,
+  ],
+  exports: [
+    Reflector,
+    ReflectorAliasProvider,
+    requestProvider,
+    inquirerProvider,
+  ],
+})
+export class InternalCoreModule {
+  static register(
+    providers: Array<ValueProvider | FactoryProvider | ExistingProvider>,
+  ): DynamicModule {
+    return {
+      module: InternalCoreModule,
+      providers: [...providers],
+      exports: [...providers.map(item => item.provide)],
+    };
+  }
+}
diff --git a/packages/core/injector/internal-core-module/index.ts b/packages/core/injector/internal-core-module/index.ts
deleted file mode 100644
index a863c2132..000000000
--- a/packages/core/injector/internal-core-module/index.ts
+++ /dev/null
@@ -1 +0,0 @@
-export * from './internal-core-module';
diff --git a/packages/core/injector/internal-core-module/internal-core-module-factory.ts b/packages/core/injector/internal-core-module/internal-core-module-factory.ts
deleted file mode 100644
index 2e93650a9..000000000
--- a/packages/core/injector/internal-core-module/internal-core-module-factory.ts
+++ /dev/null
@@ -1,65 +0,0 @@
-import { Logger } from '@nestjs/common';
-import { ExternalContextCreator } from '../../helpers/external-context-creator';
-import { HttpAdapterHost } from '../../helpers/http-adapter-host';
-import { GraphInspector } from '../../inspector/graph-inspector';
-import { SerializedGraph } from '../../inspector/serialized-graph';
-import { DependenciesScanner } from '../../scanner';
-import { ModuleCompiler } from '../compiler';
-import { NestContainer } from '../container';
-import { Injector } from '../injector';
-import { InstanceLoader } from '../instance-loader';
-import { LazyModuleLoader } from '../lazy-module-loader/lazy-module-loader';
-import { ModulesContainer } from '../modules-container';
-import { InternalCoreModule } from './internal-core-module';
-
-export class InternalCoreModuleFactory {
-  static create(
-    container: NestContainer,
-    scanner: DependenciesScanner,
-    moduleCompiler: ModuleCompiler,
-    httpAdapterHost: HttpAdapterHost,
-    graphInspector: GraphInspector,
-  ) {
-    const lazyModuleLoaderFactory = () => {
-      const logger = new Logger(LazyModuleLoader.name, {
-        timestamp: false,
-      });
-      const injector = new Injector();
-      const instanceLoader = new InstanceLoader(
-        container,
-        injector,
-        graphInspector,
-        logger,
-      );
-      return new LazyModuleLoader(
-        scanner,
-        instanceLoader,
-        moduleCompiler,
-        container.getModules(),
-      );
-    };
-
-    return InternalCoreModule.register([
-      {
-        provide: ExternalContextCreator,
-        useValue: ExternalContextCreator.fromContainer(container),
-      },
-      {
-        provide: ModulesContainer,
-        useValue: container.getModules(),
-      },
-      {
-        provide: HttpAdapterHost,
-        useValue: httpAdapterHost,
-      },
-      {
-        provide: LazyModuleLoader,
-        useFactory: lazyModuleLoaderFactory,
-      },
-      {
-        provide: SerializedGraph,
-        useValue: container.serializedGraph,
-      },
-    ]);
-  }
-}
diff --git a/packages/core/injector/lazy-module-loader.ts b/packages/core/injector/lazy-module-loader.ts
new file mode 100644
index 000000000..3dd11dd15
--- /dev/null
+++ b/packages/core/injector/lazy-module-loader.ts
@@ -0,0 +1,61 @@
+import { DynamicModule, Type } from '@nestjs/common';
+import { DependenciesScanner, ModuleToOverride } from '../scanner';
+import { ModuleCompiler } from './compiler';
+import { InstanceLoader } from './instance-loader';
+import { Module } from './module';
+import { ModuleRef } from './module-ref';
+import { ModulesContainer } from './modules-container';
+
+export class LazyModuleLoader {
+  constructor(
+    private readonly dependenciesScanner: DependenciesScanner,
+    private readonly instanceLoader: InstanceLoader,
+    private readonly moduleCompiler: ModuleCompiler,
+    private readonly modulesContainer: ModulesContainer,
+    private readonly modulesToOverride?: ModuleToOverride[],
+  ) {}
+
+  public async load(
+    loaderFn: () =>
+      | Promise<Type<unknown> | DynamicModule>
+      | Type<unknown>
+      | DynamicModule,
+  ): Promise<ModuleRef> {
+    const moduleClassOrDynamicDefinition = await loaderFn();
+    const moduleInstances = await this.dependenciesScanner.scanForModules({
+      moduleDefinition: moduleClassOrDynamicDefinition,
+      modulesToOverride: this.modulesToOverride,
+    });
+    if (moduleInstances.length === 0) {
+      // The module has been loaded already. In this case, we must
+      // retrieve a module reference from the exising container.
+      const { token } = await this.moduleCompiler.compile(
+        moduleClassOrDynamicDefinition,
+      );
+      const moduleInstance = this.modulesContainer.get(token);
+      return moduleInstance && this.getTargetModuleRef(moduleInstance);
+    }
+    const lazyModulesContainer =
+      this.createLazyModulesContainer(moduleInstances);
+    await this.dependenciesScanner.scanModulesForDependencies(
+      lazyModulesContainer,
+    );
+    await this.instanceLoader.createInstancesOfDependencies(
+      lazyModulesContainer,
+    );
+    const [targetModule] = moduleInstances;
+    return this.getTargetModuleRef(targetModule);
+  }
+
+  private createLazyModulesContainer(
+    moduleInstances: Module[],
+  ): Map<string, Module> {
+    moduleInstances = Array.from(new Set(moduleInstances));
+    return new Map(moduleInstances.map(ref => [ref.token, ref]));
+  }
+
+  private getTargetModuleRef(moduleInstance: Module): ModuleRef {
+    const moduleRefInstanceWrapper = moduleInstance.getProviderByKey(ModuleRef);
+    return moduleRefInstanceWrapper.instance;
+  }
+}
diff --git a/packages/core/injector/lazy-module-loader/lazy-module-loader-options.interface.ts b/packages/core/injector/lazy-module-loader/lazy-module-loader-options.interface.ts
deleted file mode 100644
index db3a29575..000000000
--- a/packages/core/injector/lazy-module-loader/lazy-module-loader-options.interface.ts
+++ /dev/null
@@ -1,6 +0,0 @@
-export interface LazyModuleLoaderLoadOptions {
-  /**
-   * If `false`, no logs will be generated when loading some module lazily.
-   */
-  logger?: boolean;
-}
diff --git a/packages/core/injector/module-ref.ts b/packages/core/injector/module-ref.ts
index 83aa9c891..22fe0f383 100644
--- a/packages/core/injector/module-ref.ts
+++ b/packages/core/injector/module-ref.ts
@@ -1,133 +1,35 @@
 import { IntrospectionResult, Scope, Type } from '@nestjs/common';
+import { InvalidClassScopeException } from '../errors/exceptions/invalid-class-scope.exception';
+import { UnknownElementException } from '../errors/exceptions/unknown-element.exception';
 import { getClassScope } from '../helpers/get-class-scope';
-import { isDurable } from '../helpers/is-durable';
-import { AbstractInstanceResolver } from './abstract-instance-resolver';
 import { NestContainer } from './container';
 import { Injector } from './injector';
 import { InstanceLinksHost } from './instance-links-host';
 import { ContextId, InstanceWrapper } from './instance-wrapper';
 import { Module } from './module';
 
-export interface ModuleRefGetOrResolveOpts {
-  /**
-   * If enabled, lookup will only be performed in the host module.
-   * @default true
-   */
-  strict?: boolean;
-  /**
-   * If enabled, instead of returning a first instance registered under a given token,
-   * a list of instances will be returned.
-   * @default false
-   */
-  each?: boolean;
-}
-
-export abstract class ModuleRef extends AbstractInstanceResolver {
-  protected readonly injector = new Injector();
+export abstract class ModuleRef {
+  private readonly injector = new Injector();
   private _instanceLinksHost: InstanceLinksHost;
 
-  protected get instanceLinksHost() {
+  private get instanceLinksHost() {
     if (!this._instanceLinksHost) {
       this._instanceLinksHost = new InstanceLinksHost(this.container);
     }
     return this._instanceLinksHost;
   }
 
-  constructor(protected readonly container: NestContainer) {
-    super();
-  }
+  constructor(protected readonly container: NestContainer) {}
 
-  /**
-   * Retrieves an instance of either injectable or controller, otherwise, throws exception.
-   * @returns {TResult}
-   */
-  abstract get<TInput = any, TResult = TInput>(
+  public abstract get<TInput = any, TResult = TInput>(
     typeOrToken: Type<TInput> | Function | string | symbol,
+    options?: { strict: boolean },
   ): TResult;
-  /**
-   * Retrieves an instance of either injectable or controller, otherwise, throws exception.
-   * @returns {TResult}
-   */
-  abstract get<TInput = any, TResult = TInput>(
-    typeOrToken: Type<TInput> | Function | string | symbol,
-    options: {
-      /**
-       * If enabled, lookup will only be performed in the host module.
-       * @default true
-       */
-      strict?: boolean;
-      /** This indicates that only the first instance registered will be returned. */
-      each?: undefined | false;
-    },
-  ): TResult;
-  /**
-   * Retrieves a list of instances of either injectables or controllers, otherwise, throws exception.
-   * @returns {Array<TResult>}
-   */
-  abstract get<TInput = any, TResult = TInput>(
-    typeOrToken: Type<TInput> | Function | string | symbol,
-    options: {
-      /**
-       * If enabled, lookup will only be performed in the host module.
-       * @default true
-       */
-      strict?: boolean;
-      /** This indicates that a list of instances will be returned. */
-      each: true;
-    },
-  ): Array<TResult>;
-  /**
-   * Retrieves an instance (or a list of instances) of either injectable or controller, otherwise, throws exception.
-   * @returns {TResult | Array<TResult>}
-   */
-  abstract get<TInput = any, TResult = TInput>(
-    typeOrToken: Type<TInput> | Function | string | symbol,
-    options?: ModuleRefGetOrResolveOpts,
-  ): TResult | Array<TResult>;
-
-  /**
-   * Resolves transient or request-scoped instance of either injectable or controller, otherwise, throws exception.
-   * @returns {Array<TResult>}
-   */
-  abstract resolve<TInput = any, TResult = TInput>(
-    typeOrToken: Type<TInput> | Function | string | symbol,
-  ): Promise<TResult>;
-  /**
-   * Resolves transient or request-scoped instance of either injectable or controller, otherwise, throws exception.
-   * @returns {Array<TResult>}
-   */
-  abstract resolve<TInput = any, TResult = TInput>(
-    typeOrToken: Type<TInput> | Function | string | symbol,
-    contextId?: { id: number },
-  ): Promise<TResult>;
-  /**
-   * Resolves transient or request-scoped instance of either injectable or controller, otherwise, throws exception.
-   * @returns {Array<TResult>}
-   */
-  abstract resolve<TInput = any, TResult = TInput>(
+  public abstract resolve<TInput = any, TResult = TInput>(
     typeOrToken: Type<TInput> | Function | string | symbol,
-    contextId?: { id: number },
-    options?: { strict?: boolean; each?: undefined | false },
+    contextId?: ContextId,
+    options?: { strict: boolean },
   ): Promise<TResult>;
-  /**
-   * Resolves transient or request-scoped instances of either injectables or controllers, otherwise, throws exception.
-   * @returns {Array<TResult>}
-   */
-  abstract resolve<TInput = any, TResult = TInput>(
-    typeOrToken: Type<TInput> | Function | string | symbol,
-    contextId?: { id: number },
-    options?: { strict?: boolean; each: true },
-  ): Promise<Array<TResult>>;
-  /**
-   * Resolves transient or request-scoped instance (or a list of instances) of either injectable or controller, otherwise, throws exception.
-   * @returns {Promise<TResult | Array<TResult>>}
-   */
-  abstract resolve<TInput = any, TResult = TInput>(
-    typeOrToken: Type<TInput> | Function | string | symbol,
-    contextId?: { id: number },
-    options?: ModuleRefGetOrResolveOpts,
-  ): Promise<TResult | Array<TResult>>;
-
   public abstract create<T = any>(type: Type<T>): Promise<T>;
 
   public introspect<T = any>(
@@ -148,6 +50,54 @@ export abstract class ModuleRef extends AbstractInstanceResolver {
     this.container.registerRequestProvider(request, contextId);
   }
 
+  protected find<TInput = any, TResult = TInput>(
+    typeOrToken: Type<TInput> | string | symbol,
+    contextModule?: Module,
+  ): TResult {
+    const moduleId = contextModule && contextModule.id;
+    const { wrapperRef } = this.instanceLinksHost.get<TResult>(
+      typeOrToken,
+      moduleId,
+    );
+    if (
+      wrapperRef.scope === Scope.REQUEST ||
+      wrapperRef.scope === Scope.TRANSIENT
+    ) {
+      throw new InvalidClassScopeException(typeOrToken);
+    }
+    return wrapperRef.instance;
+  }
+
+  protected async resolvePerContext<TInput = any, TResult = TInput>(
+    typeOrToken: Type<TInput> | string | symbol,
+    contextModule: Module,
+    contextId: ContextId,
+    options?: { strict: boolean },
+  ): Promise<TResult> {
+    const isStrictModeEnabled = options && options.strict;
+    const instanceLink = isStrictModeEnabled
+      ? this.instanceLinksHost.get(typeOrToken, contextModule.id)
+      : this.instanceLinksHost.get(typeOrToken);
+
+    const { wrapperRef, collection } = instanceLink;
+    if (wrapperRef.isDependencyTreeStatic() && !wrapperRef.isTransient) {
+      return this.get(typeOrToken, options);
+    }
+
+    const ctorHost = wrapperRef.instance || { constructor: typeOrToken };
+    const instance = await this.injector.loadPerContext(
+      ctorHost,
+      wrapperRef.host,
+      collection,
+      contextId,
+      wrapperRef,
+    );
+    if (!instance) {
+      throw new UnknownElementException();
+    }
+    return instance;
+  }
+
   protected async instantiateClass<T = any>(
     type: Type<T>,
     moduleRef: Module,
@@ -157,7 +107,6 @@ export abstract class ModuleRef extends AbstractInstanceResolver {
       metatype: type,
       isResolved: false,
       scope: getClassScope(type),
-      durable: isDurable(type),
       host: moduleRef,
     });
     return new Promise<T>(async (resolve, reject) => {
diff --git a/packages/core/injector/module-token-factory.ts b/packages/core/injector/module-token-factory.ts
index 4a407885c..8a81ddd47 100644
--- a/packages/core/injector/module-token-factory.ts
+++ b/packages/core/injector/module-token-factory.ts
@@ -1,15 +1,10 @@
 import { DynamicModule } from '@nestjs/common';
 import { Type } from '@nestjs/common/interfaces/type.interface';
 import { randomStringGenerator } from '@nestjs/common/utils/random-string-generator.util';
-import { isFunction, isSymbol } from '@nestjs/common/utils/shared.utils';
-import { createHash } from 'crypto';
 import stringify from 'fast-safe-stringify';
-
-const CLASS_STR = 'class ';
-const CLASS_STR_LEN = CLASS_STR.length;
+import * as hash from 'object-hash';
 
 export class ModuleTokenFactory {
-  private readonly moduleTokenCache = new Map<string, string>();
   private readonly moduleIdsCache = new WeakMap<Type<unknown>, string>();
 
   public create(
@@ -17,36 +12,23 @@ export class ModuleTokenFactory {
     dynamicModuleMetadata?: Partial<DynamicModule> | undefined,
   ): string {
     const moduleId = this.getModuleId(metatype);
-
-    if (!dynamicModuleMetadata) {
-      return this.getStaticModuleToken(moduleId, this.getModuleName(metatype));
-    }
     const opaqueToken = {
       id: moduleId,
       module: this.getModuleName(metatype),
-      dynamic: dynamicModuleMetadata,
+      dynamic: this.getDynamicMetadataToken(dynamicModuleMetadata),
     };
-    const opaqueTokenString = this.getStringifiedOpaqueToken(opaqueToken);
-
-    return this.hashString(opaqueTokenString);
+    return hash(opaqueToken, { ignoreUnknown: true });
   }
 
-  public getStaticModuleToken(moduleId: string, moduleName: string): string {
-    const key = `${moduleId}_${moduleName}`;
-    if (this.moduleTokenCache.has(key)) {
-      return this.moduleTokenCache.get(key);
-    }
-
-    const hash = this.hashString(key);
-    this.moduleTokenCache.set(key, hash);
-    return hash;
-  }
-
-  public getStringifiedOpaqueToken(opaqueToken: object | undefined): string {
+  public getDynamicMetadataToken(
+    dynamicModuleMetadata: Partial<DynamicModule> | undefined,
+  ): string {
     // Uses safeStringify instead of JSON.stringify to support circular dynamic modules
     // The replacer function is also required in order to obtain real class names
     // instead of the unified "Function" key
-    return opaqueToken ? stringify(opaqueToken, this.replacer) : '';
+    return dynamicModuleMetadata
+      ? stringify(dynamicModuleMetadata, this.replacer)
+      : '';
   }
 
   public getModuleId(metatype: Type<unknown>): string {
@@ -63,20 +45,16 @@ export class ModuleTokenFactory {
     return metatype.name;
   }
 
-  private hashString(value: string): string {
-    return createHash('sha256').update(value).digest('hex');
-  }
-
   private replacer(key: string, value: any) {
-    if (isFunction(value)) {
+    if (typeof value === 'function') {
       const funcAsString = value.toString();
-      const isClass = funcAsString.slice(0, CLASS_STR_LEN) === CLASS_STR;
+      const isClass = /^class\s/.test(funcAsString);
       if (isClass) {
         return value.name;
       }
-      return funcAsString;
+      return hash(funcAsString, { ignoreUnknown: true });
     }
-    if (isSymbol(value)) {
+    if (typeof value === 'symbol') {
       return value.toString();
     }
     return value;
diff --git a/packages/core/injector/module.ts b/packages/core/injector/module.ts
index f6149ed5d..ed3102a01 100644
--- a/packages/core/injector/module.ts
+++ b/packages/core/injector/module.ts
@@ -1,70 +1,64 @@
 import {
-  EnhancerSubtype,
-  ENTRY_PROVIDER_WATERMARK,
-} from '@nestjs/common/constants';
-import {
+  Abstract,
   ClassProvider,
   Controller,
   DynamicModule,
   ExistingProvider,
   FactoryProvider,
   Injectable,
-  InjectionToken,
   NestModule,
   Provider,
-  Type,
   ValueProvider,
 } from '@nestjs/common/interfaces';
+import { Type } from '@nestjs/common/interfaces/type.interface';
 import { randomStringGenerator } from '@nestjs/common/utils/random-string-generator.util';
 import {
   isFunction,
   isNil,
-  isObject,
   isString,
   isSymbol,
   isUndefined,
 } from '@nestjs/common/utils/shared.utils';
 import { iterate } from 'iterare';
 import { ApplicationConfig } from '../application-config';
-import {
-  InvalidClassException,
-  RuntimeException,
-  UnknownExportException,
-} from '../errors/exceptions';
+import { InvalidClassException } from '../errors/exceptions/invalid-class.exception';
+import { RuntimeException } from '../errors/exceptions/runtime.exception';
+import { UnknownExportException } from '../errors/exceptions/unknown-export.exception';
 import { createContextId } from '../helpers/context-id-factory';
 import { getClassScope } from '../helpers/get-class-scope';
-import { isDurable } from '../helpers/is-durable';
-import { UuidFactory } from '../inspector/uuid-factory';
 import { CONTROLLER_ID_KEY } from './constants';
 import { NestContainer } from './container';
 import { InstanceWrapper } from './instance-wrapper';
-import { ModuleRef, ModuleRefGetOrResolveOpts } from './module-ref';
+import { ModuleRef } from './module-ref';
+
+export type InstanceToken =
+  | string
+  | symbol
+  | Type<any>
+  | Abstract<any>
+  | Function;
 
 export class Module {
   private readonly _id: string;
   private readonly _imports = new Set<Module>();
   private readonly _providers = new Map<
-    InjectionToken,
+    InstanceToken,
     InstanceWrapper<Injectable>
   >();
   private readonly _injectables = new Map<
-    InjectionToken,
+    InstanceToken,
     InstanceWrapper<Injectable>
   >();
   private readonly _middlewares = new Map<
-    InjectionToken,
+    InstanceToken,
     InstanceWrapper<Injectable>
   >();
   private readonly _controllers = new Map<
-    InjectionToken,
+    InstanceToken,
     InstanceWrapper<Controller>
   >();
-  private readonly _entryProviderKeys = new Set<InjectionToken>();
-  private readonly _exports = new Set<InjectionToken>();
-
+  private readonly _exports = new Set<InstanceToken>();
   private _distance = 0;
-  private _initOnPreview = false;
-  private _isGlobal = false;
   private _token: string;
 
   constructor(
@@ -72,7 +66,7 @@ export class Module {
     private readonly container: NestContainer,
   ) {
     this.addCoreProviders();
-    this._id = this.generateUuid();
+    this._id = randomStringGenerator();
   }
 
   get id(): string {
@@ -87,53 +81,48 @@ export class Module {
     this._token = token;
   }
 
-  get name() {
-    return this.metatype.name;
-  }
-
-  get isGlobal() {
-    return this._isGlobal;
+  get providers(): Map<InstanceToken, InstanceWrapper<Injectable>> {
+    return this._providers;
   }
 
-  set isGlobal(global: boolean) {
-    this._isGlobal = global;
+  get middlewares(): Map<InstanceToken, InstanceWrapper<Injectable>> {
+    return this._middlewares;
   }
 
-  get initOnPreview() {
-    return this._initOnPreview;
+  get imports(): Set<Module> {
+    return this._imports;
   }
 
-  set initOnPreview(initOnPreview: boolean) {
-    this._initOnPreview = initOnPreview;
+  /**
+   * Left for backward-compatibility reasons
+   */
+  get relatedModules(): Set<Module> {
+    return this._imports;
   }
 
-  get providers(): Map<InjectionToken, InstanceWrapper<Injectable>> {
+  /**
+   * Left for backward-compatibility reasons
+   */
+  get components(): Map<InstanceToken, InstanceWrapper<Injectable>> {
     return this._providers;
   }
 
-  get middlewares(): Map<InjectionToken, InstanceWrapper<Injectable>> {
-    return this._middlewares;
-  }
-
-  get imports(): Set<Module> {
-    return this._imports;
+  /**
+   * Left for backward-compatibility reasons
+   */
+  get routes(): Map<InstanceToken, InstanceWrapper<Controller>> {
+    return this._controllers;
   }
 
-  get injectables(): Map<InjectionToken, InstanceWrapper<Injectable>> {
+  get injectables(): Map<InstanceToken, InstanceWrapper<Injectable>> {
     return this._injectables;
   }
 
-  get controllers(): Map<InjectionToken, InstanceWrapper<Controller>> {
+  get controllers(): Map<InstanceToken, InstanceWrapper<Controller>> {
     return this._controllers;
   }
 
-  get entryProviders(): Array<InstanceWrapper<Injectable>> {
-    return Array.from(this._entryProviderKeys).map(token =>
-      this.providers.get(token),
-    );
-  }
-
-  get exports(): Set<InjectionToken> {
+  get exports(): Set<InstanceToken> {
     return this._exports;
   }
 
@@ -207,15 +196,10 @@ export class Module {
 
   public addInjectable<T extends Injectable>(
     injectable: Provider,
-    enhancerSubtype: EnhancerSubtype,
     host?: Type<T>,
   ) {
     if (this.isCustomProvider(injectable)) {
-      return this.addCustomProvider(
-        injectable,
-        this._injectables,
-        enhancerSubtype,
-      );
+      return this.addCustomProvider(injectable, this._injectables);
     }
     let instanceWrapper = this.injectables.get(injectable);
     if (!instanceWrapper) {
@@ -226,8 +210,6 @@ export class Module {
         instance: null,
         isResolved: false,
         scope: getClassScope(injectable),
-        durable: isDurable(injectable),
-        subtype: enhancerSubtype,
         host: this,
       });
       this._injectables.set(injectable, instanceWrapper);
@@ -237,22 +219,12 @@ export class Module {
         this._controllers.get(host) || this._providers.get(host);
       hostWrapper && hostWrapper.addEnhancerMetadata(instanceWrapper);
     }
-    return instanceWrapper;
   }
 
-  public addProvider(provider: Provider): Provider | InjectionToken;
-  public addProvider(
-    provider: Provider,
-    enhancerSubtype: EnhancerSubtype,
-  ): Provider | InjectionToken;
-  public addProvider(provider: Provider, enhancerSubtype?: EnhancerSubtype) {
+  public addProvider(provider: Provider) {
     if (this.isCustomProvider(provider)) {
-      if (this.isEntryProvider(provider.provide)) {
-        this._entryProviderKeys.add(provider.provide);
-      }
-      return this.addCustomProvider(provider, this._providers, enhancerSubtype);
+      return this.addCustomProvider(provider, this._providers);
     }
-
     this._providers.set(
       provider,
       new InstanceWrapper({
@@ -262,15 +234,9 @@ export class Module {
         instance: null,
         isResolved: false,
         scope: getClassScope(provider),
-        durable: isDurable(provider),
         host: this,
       }),
     );
-
-    if (this.isEntryProvider(provider)) {
-      this._entryProviderKeys.add(provider);
-    }
-
     return provider as Type<Injectable>;
   }
 
@@ -299,16 +265,15 @@ export class Module {
       | ValueProvider
       | ExistingProvider,
     collection: Map<Function | string | symbol, any>,
-    enhancerSubtype?: EnhancerSubtype,
   ) {
     if (this.isCustomClass(provider)) {
-      this.addCustomClass(provider, collection, enhancerSubtype);
+      this.addCustomClass(provider, collection);
     } else if (this.isCustomValue(provider)) {
-      this.addCustomValue(provider, collection, enhancerSubtype);
+      this.addCustomValue(provider, collection);
     } else if (this.isCustomFactory(provider)) {
-      this.addCustomFactory(provider, collection, enhancerSubtype);
+      this.addCustomFactory(provider, collection);
     } else if (this.isCustomUseExisting(provider)) {
-      this.addCustomUseExisting(provider, collection, enhancerSubtype);
+      this.addCustomUseExisting(provider, collection);
     }
     return provider.provide;
   }
@@ -318,10 +283,7 @@ export class Module {
   }
 
   public isCustomValue(provider: any): provider is ValueProvider {
-    return (
-      isObject(provider) &&
-      Object.prototype.hasOwnProperty.call(provider, 'useValue')
-    );
+    return !isUndefined((provider as ValueProvider).useValue);
   }
 
   public isCustomFactory(provider: any): provider is FactoryProvider {
@@ -338,32 +300,24 @@ export class Module {
 
   public addCustomClass(
     provider: ClassProvider,
-    collection: Map<InjectionToken, InstanceWrapper>,
-    enhancerSubtype?: EnhancerSubtype,
+    collection: Map<InstanceToken, InstanceWrapper>,
   ) {
-    let { scope, durable } = provider;
+    let { scope } = provider;
 
     const { useClass } = provider;
     if (isUndefined(scope)) {
       scope = getClassScope(useClass);
     }
-    if (isUndefined(durable)) {
-      durable = isDurable(useClass);
-    }
-
-    const token = provider.provide;
     collection.set(
-      token,
+      provider.provide,
       new InstanceWrapper({
-        token,
+        token: provider.provide,
         name: useClass?.name || useClass,
         metatype: useClass,
         instance: null,
         isResolved: false,
         scope,
-        durable,
         host: this,
-        subtype: enhancerSubtype,
       }),
     );
   }
@@ -371,7 +325,6 @@ export class Module {
   public addCustomValue(
     provider: ValueProvider,
     collection: Map<Function | string | symbol, InstanceWrapper>,
-    enhancerSubtype?: EnhancerSubtype,
   ) {
     const { useValue: value, provide: providerToken } = provider;
     collection.set(
@@ -384,7 +337,6 @@ export class Module {
         isResolved: true,
         async: value instanceof Promise,
         host: this,
-        subtype: enhancerSubtype,
       }),
     );
   }
@@ -392,13 +344,11 @@ export class Module {
   public addCustomFactory(
     provider: FactoryProvider,
     collection: Map<Function | string | symbol, InstanceWrapper>,
-    enhancerSubtype?: EnhancerSubtype,
   ) {
     const {
       useFactory: factory,
       inject,
       scope,
-      durable,
       provide: providerToken,
     } = provider;
 
@@ -412,9 +362,7 @@ export class Module {
         isResolved: false,
         inject: inject || [],
         scope,
-        durable,
         host: this,
-        subtype: enhancerSubtype,
       }),
     );
   }
@@ -422,7 +370,6 @@ export class Module {
   public addCustomUseExisting(
     provider: ExistingProvider,
     collection: Map<Function | string | symbol, InstanceWrapper>,
-    enhancerSubtype?: EnhancerSubtype,
   ) {
     const { useExisting, provide: providerToken } = provider;
     collection.set(
@@ -436,7 +383,6 @@ export class Module {
         inject: [useExisting],
         host: this,
         isAlias: true,
-        subtype: enhancerSubtype,
       }),
     );
   }
@@ -444,7 +390,7 @@ export class Module {
   public addExportedProvider(
     provider: Provider | string | symbol | DynamicModule,
   ) {
-    const addExportedUnit = (token: InjectionToken) =>
+    const addExportedUnit = (token: InstanceToken) =>
       this._exports.add(this.validateExportedProvider(token));
 
     if (this.isCustomProvider(provider as any)) {
@@ -472,7 +418,7 @@ export class Module {
     this._exports.add(this.validateExportedProvider(provide));
   }
 
-  public validateExportedProvider(token: InjectionToken) {
+  public validateExportedProvider(token: InstanceToken) {
     if (this._providers.has(token)) {
       return token;
     }
@@ -500,7 +446,6 @@ export class Module {
         instance: null,
         isResolved: false,
         scope: getClassScope(controller),
-        durable: isDurable(controller),
         host: this,
       }),
     );
@@ -521,7 +466,7 @@ export class Module {
     this._imports.add(module);
   }
 
-  public replace(toReplace: InjectionToken, options: any) {
+  public replace(toReplace: InstanceToken, options: any) {
     if (options.isProvider && this.hasProvider(toReplace)) {
       const originalProvider = this._providers.get(toReplace);
 
@@ -536,50 +481,20 @@ export class Module {
     }
   }
 
-  public hasProvider(token: InjectionToken): boolean {
+  public hasProvider(token: InstanceToken): boolean {
     return this._providers.has(token);
   }
 
-  public hasInjectable(token: InjectionToken): boolean {
+  public hasInjectable(token: InstanceToken): boolean {
     return this._injectables.has(token);
   }
 
-  public getProviderByKey<T = any>(name: InjectionToken): InstanceWrapper<T> {
+  public getProviderByKey<T = any>(name: InstanceToken): InstanceWrapper<T> {
     return this._providers.get(name) as InstanceWrapper<T>;
   }
 
-  public getProviderById<T = any>(id: string): InstanceWrapper<T> | undefined {
-    return Array.from(this._providers.values()).find(
-      item => item.id === id,
-    ) as InstanceWrapper<T>;
-  }
-
-  public getControllerById<T = any>(
-    id: string,
-  ): InstanceWrapper<T> | undefined {
-    return Array.from(this._controllers.values()).find(
-      item => item.id === id,
-    ) as InstanceWrapper<T>;
-  }
-
-  public getInjectableById<T = any>(
-    id: string,
-  ): InstanceWrapper<T> | undefined {
-    return Array.from(this._injectables.values()).find(
-      item => item.id === id,
-    ) as InstanceWrapper<T>;
-  }
-
-  public getMiddlewareById<T = any>(
-    id: string,
-  ): InstanceWrapper<T> | undefined {
-    return Array.from(this._middlewares.values()).find(
-      item => item.id === id,
-    ) as InstanceWrapper<T>;
-  }
-
   public getNonAliasProviders(): Array<
-    [InjectionToken, InstanceWrapper<Injectable>]
+    [InstanceToken, InstanceWrapper<Injectable>]
   > {
     return [...this._providers].filter(([_, wrapper]) => !wrapper.isAlias);
   }
@@ -594,36 +509,19 @@ export class Module {
 
       public get<TInput = any, TResult = TInput>(
         typeOrToken: Type<TInput> | string | symbol,
-        options: ModuleRefGetOrResolveOpts = {},
-      ): TResult | Array<TResult> {
-        options.strict ??= true;
-        options.each ??= false;
-
-        return this.find<TInput, TResult>(
-          typeOrToken,
-          options.strict
-            ? {
-                moduleId: self.id,
-                each: options.each,
-              }
-            : options,
-        );
+        options: { strict: boolean } = { strict: true },
+      ): TResult {
+        return !(options && options.strict)
+          ? this.find<TInput, TResult>(typeOrToken)
+          : this.find<TInput, TResult>(typeOrToken, self);
       }
 
       public resolve<TInput = any, TResult = TInput>(
         typeOrToken: Type<TInput> | string | symbol,
         contextId = createContextId(),
-        options: ModuleRefGetOrResolveOpts = {},
-      ): Promise<TResult | Array<TResult>> {
-        options.strict ??= true;
-        options.each ??= false;
-
-        return this.resolvePerContext<TInput, TResult>(
-          typeOrToken,
-          self,
-          contextId,
-          options,
-        );
+        options: { strict: boolean } = { strict: true },
+      ): Promise<TResult> {
+        return this.resolvePerContext(typeOrToken, self, contextId, options);
       }
 
       public async create<T = any>(type: Type<T>): Promise<T> {
@@ -634,16 +532,4 @@ export class Module {
       }
     };
   }
-
-  private isEntryProvider(metatype: InjectionToken): boolean {
-    return typeof metatype === 'function'
-      ? !!Reflect.getMetadata(ENTRY_PROVIDER_WATERMARK, metatype)
-      : false;
-  }
-
-  private generateUuid(): string {
-    const prefix = 'M_';
-    const key = this.name?.toString() ?? this.token?.toString();
-    return key ? UuidFactory.get(`${prefix}_${key}`) : randomStringGenerator();
-  }
 }
diff --git a/packages/core/injector/modules-container.ts b/packages/core/injector/modules-container.ts
index 31777bec2..8f1d9dec6 100644
--- a/packages/core/injector/modules-container.ts
+++ b/packages/core/injector/modules-container.ts
@@ -1,14 +1,10 @@
-import { uid } from 'uid';
+import { v4 as uuid } from 'uuid';
 import { Module } from './module';
 
 export class ModulesContainer extends Map<string, Module> {
-  private readonly _applicationId = uid(21);
+  private readonly _applicationId = uuid();
 
   get applicationId(): string {
     return this._applicationId;
   }
-
-  public getById(id: string): Module | undefined {
-    return Array.from(this.values()).find(moduleRef => moduleRef.id === id);
-  }
 }
diff --git a/packages/core/inspector/deterministic-uuid-registry.ts b/packages/core/inspector/deterministic-uuid-registry.ts
deleted file mode 100644
index 352942cde..000000000
--- a/packages/core/inspector/deterministic-uuid-registry.ts
+++ /dev/null
@@ -1,23 +0,0 @@
-export class DeterministicUuidRegistry {
-  private static readonly registry = new Map<string, boolean>();
-
-  static get(str: string, inc = 0) {
-    const id = inc ? this.hashCode(`${str}_${inc}`) : this.hashCode(str);
-    if (this.registry.has(id)) {
-      return this.get(str, inc + 1);
-    }
-    this.registry.set(id, true);
-    return id;
-  }
-
-  static clear() {
-    this.registry.clear();
-  }
-
-  private static hashCode(s: string) {
-    let h = 0;
-    for (let i = 0; i < s.length; i++)
-      h = (Math.imul(31, h) + s.charCodeAt(i)) | 0;
-    return h.toString();
-  }
-}
diff --git a/packages/core/inspector/graph-inspector.ts b/packages/core/inspector/graph-inspector.ts
deleted file mode 100644
index a2146a543..000000000
--- a/packages/core/inspector/graph-inspector.ts
+++ /dev/null
@@ -1,240 +0,0 @@
-import { UnknownDependenciesException } from '../errors/exceptions/unknown-dependencies.exception';
-import { NestContainer } from '../injector/container';
-import { InstanceWrapper } from '../injector/instance-wrapper';
-import { Module } from '../injector/module';
-import { DeterministicUuidRegistry } from './deterministic-uuid-registry';
-import { EnhancerMetadataCacheEntry } from './interfaces/enhancer-metadata-cache-entry.interface';
-import { Entrypoint } from './interfaces/entrypoint.interface';
-import { OrphanedEnhancerDefinition } from './interfaces/extras.interface';
-import { ClassNode, Node } from './interfaces/node.interface';
-import { PartialGraphHost } from './partial-graph.host';
-import { SerializedGraph } from './serialized-graph';
-
-export class GraphInspector {
-  private readonly graph: SerializedGraph;
-  private readonly enhancersMetadataCache =
-    new Array<EnhancerMetadataCacheEntry>();
-
-  constructor(private readonly container: NestContainer) {
-    this.graph = container.serializedGraph;
-  }
-
-  public inspectModules(
-    modules: Map<string, Module> = this.container.getModules(),
-  ) {
-    for (const moduleRef of modules.values()) {
-      this.insertModuleNode(moduleRef);
-      this.insertClassNodes(moduleRef);
-      this.insertModuleToModuleEdges(moduleRef);
-    }
-
-    this.enhancersMetadataCache.forEach(entry =>
-      this.insertEnhancerEdge(entry),
-    );
-
-    DeterministicUuidRegistry.clear();
-  }
-
-  public registerPartial(error: unknown) {
-    this.graph.status = 'partial';
-
-    if (error instanceof UnknownDependenciesException) {
-      this.graph.metadata = {
-        cause: {
-          type: 'unknown-dependencies',
-          context: error.context,
-          moduleId: error.moduleRef?.id,
-          nodeId: error.metadata?.id,
-        },
-      };
-    } else {
-      this.graph.metadata = {
-        cause: {
-          type: 'unknown',
-          error,
-        },
-      };
-    }
-    PartialGraphHost.register(this.graph);
-  }
-
-  public inspectInstanceWrapper<T = any>(
-    source: InstanceWrapper<T>,
-    moduleRef: Module,
-  ) {
-    const ctorMetadata = source.getCtorMetadata();
-    ctorMetadata?.forEach((target, index) =>
-      this.insertClassToClassEdge(
-        source,
-        target,
-        moduleRef,
-        index,
-        'constructor',
-      ),
-    );
-
-    const propertiesMetadata = source.getPropertiesMetadata();
-    propertiesMetadata?.forEach(({ key, wrapper: target }) =>
-      this.insertClassToClassEdge(source, target, moduleRef, key, 'property'),
-    );
-  }
-
-  public insertEnhancerMetadataCache(entry: EnhancerMetadataCacheEntry) {
-    this.enhancersMetadataCache.push(entry);
-  }
-
-  public insertOrphanedEnhancer(entry: OrphanedEnhancerDefinition) {
-    this.graph.insertOrphanedEnhancer({
-      ...entry,
-      ref: entry.ref?.constructor?.name ?? 'Object',
-    });
-  }
-
-  public insertAttachedEnhancer(wrapper: InstanceWrapper) {
-    const existingNode = this.graph.getNodeById(wrapper.id);
-    existingNode.metadata.global = true;
-
-    this.graph.insertAttachedEnhancer(existingNode.id);
-  }
-
-  public insertEntrypointDefinition<T>(
-    definition: Entrypoint<T>,
-    parentId: string,
-  ) {
-    definition = {
-      ...definition,
-      id: `${definition.classNodeId}_${definition.methodName}`,
-    };
-    this.graph.insertEntrypoint(definition, parentId);
-  }
-
-  public insertClassNode(
-    moduleRef: Module,
-    wrapper: InstanceWrapper,
-    type: Exclude<Node['metadata']['type'], 'module'>,
-  ) {
-    this.graph.insertNode({
-      id: wrapper.id,
-      label: wrapper.name,
-      parent: moduleRef.id,
-      metadata: {
-        type,
-        internal: wrapper.metatype === moduleRef.metatype,
-        sourceModuleName: moduleRef.name,
-        durable: wrapper.isDependencyTreeDurable(),
-        static: wrapper.isDependencyTreeStatic(),
-        scope: wrapper.scope,
-        transient: wrapper.isTransient,
-        exported: moduleRef.exports.has(wrapper.token),
-        token: wrapper.token,
-        subtype: wrapper.subtype,
-        initTime: wrapper.initTime,
-      },
-    });
-  }
-
-  private insertModuleNode(moduleRef: Module) {
-    const dynamicMetadata = this.container.getDynamicMetadataByToken(
-      moduleRef.token,
-    );
-    const node: Node = {
-      id: moduleRef.id,
-      label: moduleRef.name,
-      metadata: {
-        type: 'module',
-        global: moduleRef.isGlobal,
-        dynamic: !!dynamicMetadata,
-        internal: moduleRef.name === 'InternalCoreModule',
-      },
-    };
-    this.graph.insertNode(node);
-  }
-
-  private insertModuleToModuleEdges(moduleRef: Module) {
-    for (const targetModuleRef of moduleRef.imports) {
-      this.graph.insertEdge({
-        source: moduleRef.id,
-        target: targetModuleRef.id,
-        metadata: {
-          type: 'module-to-module',
-          sourceModuleName: moduleRef.name,
-          targetModuleName: targetModuleRef.name,
-        },
-      });
-    }
-  }
-
-  private insertEnhancerEdge(entry: EnhancerMetadataCacheEntry) {
-    const moduleRef = this.container.getModuleByKey(entry.moduleToken);
-    const sourceInstanceWrapper =
-      moduleRef.controllers.get(entry.classRef) ??
-      moduleRef.providers.get(entry.classRef);
-    const existingSourceNode = this.graph.getNodeById(
-      sourceInstanceWrapper.id,
-    ) as ClassNode;
-    const enhancers = existingSourceNode.metadata.enhancers ?? [];
-
-    if (entry.enhancerInstanceWrapper) {
-      this.insertClassToClassEdge(
-        sourceInstanceWrapper,
-        entry.enhancerInstanceWrapper,
-        moduleRef,
-        undefined,
-        'decorator',
-      );
-
-      enhancers.push({
-        id: entry.enhancerInstanceWrapper.id,
-        methodKey: entry.methodKey,
-        subtype: entry.subtype,
-      });
-    } else {
-      const name =
-        entry.enhancerRef.constructor?.name ??
-        (entry.enhancerRef as Function).name;
-
-      enhancers.push({
-        name,
-        methodKey: entry.methodKey,
-        subtype: entry.subtype,
-      });
-    }
-    existingSourceNode.metadata.enhancers = enhancers;
-  }
-
-  private insertClassToClassEdge<T>(
-    source: InstanceWrapper<T>,
-    target: InstanceWrapper,
-    moduleRef: Module,
-    keyOrIndex: number | string | symbol | undefined,
-    injectionType: 'constructor' | 'property' | 'decorator',
-  ) {
-    this.graph.insertEdge({
-      source: source.id,
-      target: target.id,
-      metadata: {
-        type: 'class-to-class',
-        sourceModuleName: moduleRef.name,
-        sourceClassName: source.name,
-        targetClassName: target.name,
-        sourceClassToken: source.token,
-        targetClassToken: target.token,
-        targetModuleName: target.host?.name,
-        keyOrIndex,
-        injectionType,
-      },
-    });
-  }
-
-  private insertClassNodes(moduleRef: Module) {
-    moduleRef.providers.forEach(value =>
-      this.insertClassNode(moduleRef, value, 'provider'),
-    );
-    moduleRef.injectables.forEach(value =>
-      this.insertClassNode(moduleRef, value, 'injectable'),
-    );
-    moduleRef.controllers.forEach(value =>
-      this.insertClassNode(moduleRef, value, 'controller'),
-    );
-  }
-}
diff --git a/packages/core/inspector/index.ts b/packages/core/inspector/index.ts
deleted file mode 100644
index db830f6e7..000000000
--- a/packages/core/inspector/index.ts
+++ /dev/null
@@ -1,4 +0,0 @@
-export * from './graph-inspector';
-export * from './initialize-on-preview.allowlist';
-export * from './partial-graph.host';
-export * from './serialized-graph';
diff --git a/packages/core/inspector/initialize-on-preview.allowlist.ts b/packages/core/inspector/initialize-on-preview.allowlist.ts
deleted file mode 100644
index 27d6ad593..000000000
--- a/packages/core/inspector/initialize-on-preview.allowlist.ts
+++ /dev/null
@@ -1,13 +0,0 @@
-import { Type } from '@nestjs/common';
-
-export class InitializeOnPreviewAllowlist {
-  private static readonly allowlist = new WeakMap<Type, boolean>();
-
-  public static add(type: Type) {
-    this.allowlist.set(type, true);
-  }
-
-  public static has(type: Type) {
-    return this.allowlist.has(type);
-  }
-}
diff --git a/packages/core/inspector/interfaces/edge.interface.ts b/packages/core/inspector/interfaces/edge.interface.ts
deleted file mode 100644
index 9151ab43b..000000000
--- a/packages/core/inspector/interfaces/edge.interface.ts
+++ /dev/null
@@ -1,31 +0,0 @@
-import { InjectionToken } from '@nestjs/common';
-
-type CommonEdgeMetadata = {
-  sourceModuleName: string;
-  targetModuleName: string;
-};
-
-type ModuleToModuleEdgeMetadata = {
-  type: 'module-to-module';
-} & CommonEdgeMetadata;
-
-type ClassToClassEdgeMetadata = {
-  type: 'class-to-class';
-  sourceClassName: string;
-  targetClassName: string;
-  sourceClassToken: InjectionToken;
-  targetClassToken: InjectionToken;
-  injectionType: 'constructor' | 'property' | 'decorator';
-  keyOrIndex?: string | number | symbol;
-  /**
-   * If true, indicates that this edge represents an internal providers connection
-   */
-  internal?: boolean;
-} & CommonEdgeMetadata;
-
-export interface Edge {
-  id: string;
-  source: string;
-  target: string;
-  metadata: ModuleToModuleEdgeMetadata | ClassToClassEdgeMetadata;
-}
diff --git a/packages/core/inspector/interfaces/enhancer-metadata-cache-entry.interface.ts b/packages/core/inspector/interfaces/enhancer-metadata-cache-entry.interface.ts
deleted file mode 100644
index 7f4574d94..000000000
--- a/packages/core/inspector/interfaces/enhancer-metadata-cache-entry.interface.ts
+++ /dev/null
@@ -1,13 +0,0 @@
-import { Type } from '@nestjs/common';
-import { EnhancerSubtype } from '@nestjs/common/constants';
-import { InstanceWrapper } from '../../injector/instance-wrapper';
-
-export interface EnhancerMetadataCacheEntry {
-  targetNodeId?: string;
-  moduleToken: string;
-  classRef: Type;
-  methodKey: string | undefined;
-  enhancerRef?: unknown;
-  enhancerInstanceWrapper?: InstanceWrapper;
-  subtype: EnhancerSubtype;
-}
diff --git a/packages/core/inspector/interfaces/entrypoint.interface.ts b/packages/core/inspector/interfaces/entrypoint.interface.ts
deleted file mode 100644
index 057c040c3..000000000
--- a/packages/core/inspector/interfaces/entrypoint.interface.ts
+++ /dev/null
@@ -1,24 +0,0 @@
-import { RequestMethod } from '@nestjs/common';
-import { VersionValue } from '@nestjs/common/interfaces';
-
-export type HttpEntrypointMetadata = {
-  path: string;
-  requestMethod: keyof typeof RequestMethod;
-  methodVersion?: VersionValue;
-  controllerVersion?: VersionValue;
-};
-
-export type MiddlewareEntrypointMetadata = {
-  path: string;
-  requestMethod: keyof typeof RequestMethod;
-  version?: VersionValue;
-};
-
-export type Entrypoint<T> = {
-  id?: string;
-  type: string;
-  methodName: string;
-  className: string;
-  classNodeId: string;
-  metadata: { key: string } & T;
-};
diff --git a/packages/core/inspector/interfaces/extras.interface.ts b/packages/core/inspector/interfaces/extras.interface.ts
deleted file mode 100644
index 37abd639f..000000000
--- a/packages/core/inspector/interfaces/extras.interface.ts
+++ /dev/null
@@ -1,21 +0,0 @@
-import { EnhancerSubtype } from '@nestjs/common/constants';
-
-/**
- * Enhancers attached through APP_PIPE, APP_GUARD, APP_INTERCEPTOR, and APP_FILTER tokens.
- */
-export interface AttachedEnhancerDefinition {
-  nodeId: string;
-}
-
-/**
- * Enhancers registered through "app.useGlobalPipes()", "app.useGlobalGuards()", "app.useGlobalInterceptors()", and "app.useGlobalFilters()" methods.
- */
-export interface OrphanedEnhancerDefinition {
-  subtype: EnhancerSubtype;
-  ref: unknown;
-}
-
-export interface Extras {
-  orphanedEnhancers: Array<OrphanedEnhancerDefinition>;
-  attachedEnhancers: Array<AttachedEnhancerDefinition>;
-}
diff --git a/packages/core/inspector/interfaces/node.interface.ts b/packages/core/inspector/interfaces/node.interface.ts
deleted file mode 100644
index 1d8589399..000000000
--- a/packages/core/inspector/interfaces/node.interface.ts
+++ /dev/null
@@ -1,47 +0,0 @@
-import { InjectionToken, Scope } from '@nestjs/common';
-import { EnhancerSubtype } from '@nestjs/common/constants';
-
-export type ModuleNode = {
-  metadata: {
-    type: 'module';
-    global: boolean;
-    dynamic: boolean;
-    internal: boolean;
-  };
-};
-
-export type ClassNode = {
-  parent: string;
-  metadata: {
-    type: 'provider' | 'controller' | 'middleware' | 'injectable';
-    subtype?: EnhancerSubtype;
-    sourceModuleName: string;
-    durable: boolean;
-    static: boolean;
-    transient: boolean;
-    exported: boolean;
-    scope: Scope;
-    token: InjectionToken;
-    initTime: number;
-    /**
-     * Enhancers metadata collection
-     */
-    enhancers?: Array<
-      | { id: string; subtype: EnhancerSubtype }
-      | { name: string; methodKey?: string; subtype: EnhancerSubtype }
-    >;
-    /**
-     * If true, node is a globally registered enhancer
-     */
-    global?: boolean;
-    /**
-     * If true, indicates that this node represents an internal provider
-     */
-    internal?: boolean;
-  };
-};
-
-export type Node = {
-  id: string;
-  label: string;
-} & (ClassNode | ModuleNode);
diff --git a/packages/core/inspector/interfaces/serialized-graph-json.interface.ts b/packages/core/inspector/interfaces/serialized-graph-json.interface.ts
deleted file mode 100644
index 9cd9d76cf..000000000
--- a/packages/core/inspector/interfaces/serialized-graph-json.interface.ts
+++ /dev/null
@@ -1,15 +0,0 @@
-import { SerializedGraphStatus } from '../serialized-graph';
-import { Edge } from './edge.interface';
-import { Entrypoint } from './entrypoint.interface';
-import { Extras } from './extras.interface';
-import { Node } from './node.interface';
-import { SerializedGraphMetadata } from './serialized-graph-metadata.interface';
-
-export interface SerializedGraphJson {
-  nodes: Record<string, Node>;
-  edges: Record<string, Edge>;
-  entrypoints: Record<string, Entrypoint<unknown>[]>;
-  extras: Extras;
-  status?: SerializedGraphStatus;
-  metadata?: SerializedGraphMetadata;
-}
diff --git a/packages/core/inspector/interfaces/serialized-graph-metadata.interface.ts b/packages/core/inspector/interfaces/serialized-graph-metadata.interface.ts
deleted file mode 100644
index c88749d01..000000000
--- a/packages/core/inspector/interfaces/serialized-graph-metadata.interface.ts
+++ /dev/null
@@ -1,11 +0,0 @@
-import { InjectorDependencyContext } from '../../injector/injector';
-
-export interface SerializedGraphMetadata {
-  cause: {
-    type: 'unknown-dependencies' | 'unknown';
-    context?: InjectorDependencyContext;
-    moduleId?: string;
-    nodeId?: string;
-    error?: any;
-  };
-}
diff --git a/packages/core/inspector/noop-graph-inspector.ts b/packages/core/inspector/noop-graph-inspector.ts
deleted file mode 100644
index f4a36ee0e..000000000
--- a/packages/core/inspector/noop-graph-inspector.ts
+++ /dev/null
@@ -1,10 +0,0 @@
-import { GraphInspector } from './graph-inspector';
-
-// eslint-disable-next-line @typescript-eslint/no-empty-function
-const noop = () => {};
-export const NoopGraphInspector: GraphInspector = new Proxy(
-  GraphInspector.prototype,
-  {
-    get: () => noop,
-  },
-);
diff --git a/packages/core/inspector/partial-graph.host.ts b/packages/core/inspector/partial-graph.host.ts
deleted file mode 100644
index 84ae71f51..000000000
--- a/packages/core/inspector/partial-graph.host.ts
+++ /dev/null
@@ -1,17 +0,0 @@
-import { SerializedGraph } from './serialized-graph';
-
-export class PartialGraphHost {
-  private static partialGraph: SerializedGraph;
-
-  static toJSON() {
-    return this.partialGraph?.toJSON();
-  }
-
-  static toString() {
-    return this.partialGraph?.toString();
-  }
-
-  static register(partialGraph: SerializedGraph) {
-    this.partialGraph = partialGraph;
-  }
-}
diff --git a/packages/core/inspector/serialized-graph.ts b/packages/core/inspector/serialized-graph.ts
deleted file mode 100644
index 9ba1b7d4c..000000000
--- a/packages/core/inspector/serialized-graph.ts
+++ /dev/null
@@ -1,157 +0,0 @@
-import { InjectionToken } from '@nestjs/common';
-import { ApplicationConfig } from '../application-config';
-import { ExternalContextCreator } from '../helpers/external-context-creator';
-import { HttpAdapterHost } from '../helpers/http-adapter-host';
-import { INQUIRER } from '../injector/inquirer/inquirer-constants';
-import { LazyModuleLoader } from '../injector/lazy-module-loader/lazy-module-loader';
-import { ModuleRef } from '../injector/module-ref';
-import { ModulesContainer } from '../injector/modules-container';
-import { REQUEST } from '../router/request/request-constants';
-import { Reflector } from '../services/reflector.service';
-import { DeterministicUuidRegistry } from './deterministic-uuid-registry';
-import { Edge } from './interfaces/edge.interface';
-import { Entrypoint } from './interfaces/entrypoint.interface';
-import {
-  Extras,
-  OrphanedEnhancerDefinition,
-} from './interfaces/extras.interface';
-import { Node } from './interfaces/node.interface';
-import { SerializedGraphJson } from './interfaces/serialized-graph-json.interface';
-import { SerializedGraphMetadata } from './interfaces/serialized-graph-metadata.interface';
-
-export type SerializedGraphStatus = 'partial' | 'complete';
-type WithOptionalId<T extends Record<'id', string>> = Omit<T, 'id'> &
-  Partial<Pick<T, 'id'>>;
-
-export class SerializedGraph {
-  private readonly nodes = new Map<string, Node>();
-  private readonly edges = new Map<string, Edge>();
-  private readonly entrypoints = new Map<string, Entrypoint<unknown>[]>();
-  private readonly extras: Extras = {
-    orphanedEnhancers: [],
-    attachedEnhancers: [],
-  };
-  private _status: SerializedGraphStatus = 'complete';
-  private _metadata?: SerializedGraphMetadata;
-
-  private static readonly INTERNAL_PROVIDERS: Array<InjectionToken> = [
-    ApplicationConfig,
-    ModuleRef,
-    HttpAdapterHost,
-    LazyModuleLoader,
-    ExternalContextCreator,
-    ModulesContainer,
-    Reflector,
-    SerializedGraph,
-    HttpAdapterHost.name,
-    Reflector.name,
-    REQUEST,
-    INQUIRER,
-  ];
-
-  set status(status: SerializedGraphStatus) {
-    this._status = status;
-  }
-
-  set metadata(metadata: SerializedGraphMetadata) {
-    this._metadata = metadata;
-  }
-
-  public insertNode(nodeDefinition: Node) {
-    if (
-      nodeDefinition.metadata.type === 'provider' &&
-      SerializedGraph.INTERNAL_PROVIDERS.includes(nodeDefinition.metadata.token)
-    ) {
-      nodeDefinition.metadata = {
-        ...nodeDefinition.metadata,
-        internal: true,
-      };
-    }
-    if (this.nodes.has(nodeDefinition.id)) {
-      return this.nodes.get(nodeDefinition.id);
-    }
-    this.nodes.set(nodeDefinition.id, nodeDefinition);
-    return nodeDefinition;
-  }
-
-  public insertEdge(edgeDefinition: WithOptionalId<Edge>) {
-    if (
-      edgeDefinition.metadata.type === 'class-to-class' &&
-      (SerializedGraph.INTERNAL_PROVIDERS.includes(
-        edgeDefinition.metadata.sourceClassToken,
-      ) ||
-        SerializedGraph.INTERNAL_PROVIDERS.includes(
-          edgeDefinition.metadata.targetClassToken,
-        ))
-    ) {
-      edgeDefinition.metadata = {
-        ...edgeDefinition.metadata,
-        internal: true,
-      };
-    }
-    const id =
-      edgeDefinition.id ?? this.generateUuidByEdgeDefinition(edgeDefinition);
-    const edge = {
-      ...edgeDefinition,
-      id,
-    };
-    this.edges.set(id, edge);
-    return edge;
-  }
-
-  public insertEntrypoint<T>(definition: Entrypoint<T>, parentId: string) {
-    if (this.entrypoints.has(parentId)) {
-      const existingCollection = this.entrypoints.get(parentId);
-      existingCollection.push(definition);
-    } else {
-      this.entrypoints.set(parentId, [definition]);
-    }
-  }
-
-  public insertOrphanedEnhancer(entry: OrphanedEnhancerDefinition) {
-    this.extras.orphanedEnhancers.push(entry);
-  }
-
-  public insertAttachedEnhancer(nodeId: string) {
-    this.extras.attachedEnhancers.push({
-      nodeId,
-    });
-  }
-
-  public getNodeById(id: string) {
-    return this.nodes.get(id);
-  }
-
-  public toJSON(): SerializedGraphJson {
-    const json: SerializedGraphJson = {
-      nodes: Object.fromEntries(this.nodes),
-      edges: Object.fromEntries(this.edges),
-      entrypoints: Object.fromEntries(this.entrypoints),
-      extras: this.extras,
-    };
-
-    if (this._status) {
-      json['status'] = this._status;
-    }
-    if (this._metadata) {
-      json['metadata'] = this._metadata;
-    }
-    return json;
-  }
-
-  public toString() {
-    const replacer = (key: string, value: unknown) => {
-      if (typeof value === 'symbol') {
-        return value.toString();
-      }
-      return typeof value === 'function' ? value.name ?? 'Function' : value;
-    };
-    return JSON.stringify(this.toJSON(), replacer, 2);
-  }
-
-  private generateUuidByEdgeDefinition(
-    edgeDefinition: WithOptionalId<Edge>,
-  ): string {
-    return DeterministicUuidRegistry.get(JSON.stringify(edgeDefinition));
-  }
-}
diff --git a/packages/core/inspector/uuid-factory.ts b/packages/core/inspector/uuid-factory.ts
deleted file mode 100644
index 1f89ad13d..000000000
--- a/packages/core/inspector/uuid-factory.ts
+++ /dev/null
@@ -1,21 +0,0 @@
-import { randomStringGenerator } from '@nestjs/common/utils/random-string-generator.util';
-import { DeterministicUuidRegistry } from './deterministic-uuid-registry';
-
-export enum UuidFactoryMode {
-  Random = 'random',
-  Deterministic = 'deterministic',
-}
-
-export class UuidFactory {
-  private static _mode = UuidFactoryMode.Random;
-
-  static set mode(value: UuidFactoryMode) {
-    this._mode = value;
-  }
-
-  static get(key = '') {
-    return this._mode === UuidFactoryMode.Deterministic
-      ? DeterministicUuidRegistry.get(key)
-      : randomStringGenerator();
-  }
-}
diff --git a/packages/core/interceptors/index.ts b/packages/core/interceptors/index.ts
deleted file mode 100644
index 7835bb29b..000000000
--- a/packages/core/interceptors/index.ts
+++ /dev/null
@@ -1,2 +0,0 @@
-export * from './interceptors-consumer';
-export * from './interceptors-context-creator';
diff --git a/packages/core/interceptors/interceptors-consumer.ts b/packages/core/interceptors/interceptors-consumer.ts
index 22f6d096e..bcf3a5921 100644
--- a/packages/core/interceptors/interceptors-consumer.ts
+++ b/packages/core/interceptors/interceptors-consumer.ts
@@ -24,16 +24,19 @@ export class InterceptorsConsumer {
     const context = this.createContext(args, instance, callback);
     context.setType<TContext>(type);
 
-    const nextFn = async (i = 0) => {
-      if (i >= interceptors.length) {
-        return this.transformDeferred(next);
-      }
-      const handler: CallHandler = {
-        handle: () => fromPromise(nextFn(i + 1)).pipe(mergeAll()),
+    const start$ = defer(() => this.transformDeferred(next));
+    const nextFn =
+      (i = 0) =>
+      async () => {
+        if (i >= interceptors.length) {
+          return start$;
+        }
+        const handler: CallHandler = {
+          handle: () => fromPromise(nextFn(i + 1)()).pipe(mergeAll()),
+        };
+        return interceptors[i].intercept(context, handler);
       };
-      return interceptors[i].intercept(context, handler);
-    };
-    return defer(() => nextFn()).pipe(mergeAll());
+    return nextFn()();
   }
 
   public createContext(
diff --git a/packages/core/interceptors/interceptors-context-creator.ts b/packages/core/interceptors/interceptors-context-creator.ts
index b05dcb445..abc7dc903 100644
--- a/packages/core/interceptors/interceptors-context-creator.ts
+++ b/packages/core/interceptors/interceptors-context-creator.ts
@@ -74,7 +74,7 @@ export class InterceptorsContextCreator extends ContextCreator {
       return null;
     }
     const instanceHost = instanceWrapper.getInstanceByContextId(
-      this.getContextId(contextId, instanceWrapper),
+      contextId,
       inquirerId,
     );
     return instanceHost && instanceHost.instance;
@@ -108,12 +108,7 @@ export class InterceptorsContextCreator extends ContextCreator {
     const scopedInterceptorWrappers =
       this.config.getGlobalRequestInterceptors() as InstanceWrapper[];
     const scopedInterceptors = iterate(scopedInterceptorWrappers)
-      .map(wrapper =>
-        wrapper.getInstanceByContextId(
-          this.getContextId(contextId, wrapper),
-          inquirerId,
-        ),
-      )
+      .map(wrapper => wrapper.getInstanceByContextId(contextId, inquirerId))
       .filter(host => !!host)
       .map(host => host.instance)
       .toArray();
diff --git a/packages/core/metadata-scanner.ts b/packages/core/metadata-scanner.ts
index 400764e00..7365a7038 100644
--- a/packages/core/metadata-scanner.ts
+++ b/packages/core/metadata-scanner.ts
@@ -4,115 +4,36 @@ import {
   isFunction,
   isNil,
 } from '@nestjs/common/utils/shared.utils';
+import { iterate } from 'iterare';
 
 export class MetadataScanner {
-  private readonly cachedScannedPrototypes: Map<object, string[]> = new Map();
-
-  /**
-   * @deprecated 
-   * @see {@link getAllMethodNames}
-   * @see getAllMethodNames
-   */
   public scanFromPrototype<T extends Injectable, R = any>(
     instance: T,
     prototype: object,
     callback: (name: string) => R,
   ): R[] {
-    if (!prototype) {
-      return [];
-    }
-
-    const visitedNames = new Map<string, boolean>();
-    const result: R[] = [];
-
-    do {
-      for (const property of Object.getOwnPropertyNames(prototype)) {
-        if (visitedNames.has(property)) {
-          continue;
-        }
-
-        visitedNames.set(property, true);
-
-        // reason: https://github.com/nestjs/nest/pull/10821#issuecomment-1411916533
-        const descriptor = Object.getOwnPropertyDescriptor(prototype, property);
-
-        if (
-          descriptor.set ||
-          descriptor.get ||
-          isConstructor(property) ||
-          !isFunction(prototype[property])
-        ) {
-          continue;
-        }
-
-        const value = callback(property);
-
-        if (isNil(value)) {
-          continue;
-        }
-
-        result.push(value);
-      }
-    } while (
-      (prototype = Reflect.getPrototypeOf(prototype)) &&
-      prototype !== Object.prototype
-    );
-
-    return result;
-  }
-
-  /**
-   * @deprecated 
-   * @see {@link getAllMethodNames}
-   * @see getAllMethodNames
-   */
-  public *getAllFilteredMethodNames(
-    prototype: object,
-  ): IterableIterator<string> {
-    yield* this.getAllMethodNames(prototype);
+    const methodNames = new Set(this.getAllFilteredMethodNames(prototype));
+    return iterate(methodNames)
+      .map(callback)
+      .filter(metadata => !isNil(metadata))
+      .toArray();
   }
 
-  public getAllMethodNames(prototype: object | null): string[] {
-    if (!prototype) {
-      return [];
-    }
-
-    if (this.cachedScannedPrototypes.has(prototype)) {
-      return this.cachedScannedPrototypes.get(prototype);
-    }
-
-    const visitedNames = new Map<string, boolean>();
-    const result: string[] = [];
-
-    this.cachedScannedPrototypes.set(prototype, result);
-
-    do {
-      for (const property of Object.getOwnPropertyNames(prototype)) {
-        if (visitedNames.has(property)) {
-          continue;
-        }
-
-        visitedNames.set(property, true);
-
-        // reason: https://github.com/nestjs/nest/pull/10821#issuecomment-1411916533
-        const descriptor = Object.getOwnPropertyDescriptor(prototype, property);
-
-        if (
-          descriptor.set ||
-          descriptor.get ||
-          isConstructor(property) ||
-          !isFunction(prototype[property])
-        ) {
-          continue;
-        }
-
-        result.push(property);
+  *getAllFilteredMethodNames(prototype: object): IterableIterator<string> {
+    const isMethod = (prop: string) => {
+      const descriptor = Object.getOwnPropertyDescriptor(prototype, prop);
+      if (descriptor.set || descriptor.get) {
+        return false;
       }
+      return !isConstructor(prop) && isFunction(prototype[prop]);
+    };
+    do {
+      yield* iterate(Object.getOwnPropertyNames(prototype))
+        .filter(isMethod)
+        .toArray();
     } while (
       (prototype = Reflect.getPrototypeOf(prototype)) &&
       prototype !== Object.prototype
     );
-
-    return result;
   }
 }
diff --git a/packages/core/middleware/builder.ts b/packages/core/middleware/builder.ts
index ce347a143..d9d63f20f 100644
--- a/packages/core/middleware/builder.ts
+++ b/packages/core/middleware/builder.ts
@@ -6,11 +6,10 @@ import {
 } from '@nestjs/common/interfaces';
 import {
   MiddlewareConfigProxy,
-  MiddlewareConfiguration,
   RouteInfo,
 } from '@nestjs/common/interfaces/middleware';
+import { MiddlewareConfiguration } from '@nestjs/common/interfaces/middleware/middleware-configuration.interface';
 import { iterate } from 'iterare';
-import { RouteInfoPathExtractor } from './route-info-path-extractor';
 import { RoutesMapper } from './routes-mapper';
 import { filterMiddleware } from './utils';
 
@@ -20,17 +19,12 @@ export class MiddlewareBuilder implements MiddlewareConsumer {
   constructor(
     private readonly routesMapper: RoutesMapper,
     private readonly httpAdapter: HttpServer,
-    private readonly routeInfoPathExtractor: RouteInfoPathExtractor,
   ) {}
 
   public apply(
     ...middleware: Array<Type<any> | Function | any>
   ): MiddlewareConfigProxy {
-    return new MiddlewareBuilder.ConfigProxy(
-      this,
-      flatten(middleware),
-      this.routeInfoPathExtractor,
-    );
+    return new MiddlewareBuilder.ConfigProxy(this, flatten(middleware));
   }
 
   public build(): MiddlewareConfiguration[] {
@@ -47,7 +41,6 @@ export class MiddlewareBuilder implements MiddlewareConsumer {
     constructor(
       private readonly builder: MiddlewareBuilder,
       private readonly middleware: Array<Type<any> | Function | any>,
-      private routeInfoPathExtractor: RouteInfoPathExtractor,
     ) {}
 
     public getExcludedRoutes(): RouteInfo[] {
@@ -57,10 +50,7 @@ export class MiddlewareBuilder implements MiddlewareConsumer {
     public exclude(
       ...routes: Array<string | RouteInfo>
     ): MiddlewareConfigProxy {
-      this.excludedRoutes = this.getRoutesFlatList(routes).map(route => ({
-        ...route,
-        path: this.routeInfoPathExtractor.extractPathFrom(route),
-      }));
+      this.excludedRoutes = this.getRoutesFlatList(routes);
       return this;
     }
 
diff --git a/packages/core/middleware/container.ts b/packages/core/middleware/container.ts
index 5544f6827..326fc9089 100644
--- a/packages/core/middleware/container.ts
+++ b/packages/core/middleware/container.ts
@@ -1,14 +1,14 @@
-import { InjectionToken, Type } from '@nestjs/common';
+import { Scope, Type } from '@nestjs/common';
+import { SCOPE_OPTIONS_METADATA } from '@nestjs/common/constants';
 import { MiddlewareConfiguration } from '@nestjs/common/interfaces/middleware/middleware-configuration.interface';
-import { getClassScope } from '../helpers/get-class-scope';
-import { isDurable } from '../helpers/is-durable';
 import { NestContainer } from '../injector/container';
 import { InstanceWrapper } from '../injector/instance-wrapper';
+import { InstanceToken } from '../injector/module';
 
 export class MiddlewareContainer {
   private readonly middleware = new Map<
     string,
-    Map<InjectionToken, InstanceWrapper>
+    Map<InstanceToken, InstanceWrapper>
   >();
   private readonly configurationSets = new Map<
     string,
@@ -19,7 +19,7 @@ export class MiddlewareContainer {
 
   public getMiddlewareCollection(
     moduleKey: string,
-  ): Map<InjectionToken, InstanceWrapper> {
+  ): Map<InstanceToken, InstanceWrapper> {
     if (!this.middleware.has(moduleKey)) {
       const moduleRef = this.container.getModuleByKey(moduleKey);
       this.middleware.set(moduleKey, moduleRef.middlewares);
@@ -44,9 +44,8 @@ export class MiddlewareContainer {
       middleware.set(
         token,
         new InstanceWrapper({
-          scope: getClassScope(metatype),
-          durable: isDurable(metatype),
-          name: token?.name ?? token,
+          scope: this.getClassScope(metatype),
+          name: token,
           metatype,
           token,
         }),
@@ -67,4 +66,9 @@ export class MiddlewareContainer {
     }
     return this.configurationSets.get(moduleName);
   }
+
+  private getClassScope<T = unknown>(type: Type<T>): Scope {
+    const metadata = Reflect.getMetadata(SCOPE_OPTIONS_METADATA, type);
+    return metadata && metadata.scope;
+  }
 }
diff --git a/packages/core/middleware/middleware-module.ts b/packages/core/middleware/middleware-module.ts
index 627ede62b..748887811 100644
--- a/packages/core/middleware/middleware-module.ts
+++ b/packages/core/middleware/middleware-module.ts
@@ -1,12 +1,15 @@
-import { HttpServer, InjectionToken, Logger } from '@nestjs/common';
+import { HttpServer } from '@nestjs/common';
 import { RequestMethod } from '@nestjs/common/enums/request-method.enum';
 import {
   MiddlewareConfiguration,
-  NestMiddleware,
   RouteInfo,
-} from '@nestjs/common/interfaces/middleware';
-import { NestApplicationContextOptions } from '@nestjs/common/interfaces/nest-application-context-options.interface';
-import { isUndefined } from '@nestjs/common/utils/shared.utils';
+} from '@nestjs/common/interfaces/middleware/middleware-configuration.interface';
+import { NestMiddleware } from '@nestjs/common/interfaces/middleware/nest-middleware.interface';
+import {
+  addLeadingSlash,
+  isUndefined,
+} from '@nestjs/common/utils/shared.utils';
+import { isRouteExcluded, isRequestMethodAll } from '../router/utils';
 import { ApplicationConfig } from '../application-config';
 import { InvalidMiddlewareException } from '../errors/exceptions/invalid-middleware.exception';
 import { RuntimeException } from '../errors/exceptions/runtime.exception';
@@ -15,39 +18,27 @@ import { ExecutionContextHost } from '../helpers/execution-context-host';
 import { STATIC_CONTEXT } from '../injector/constants';
 import { NestContainer } from '../injector/container';
 import { Injector } from '../injector/injector';
-import { ContextId, InstanceWrapper } from '../injector/instance-wrapper';
-import { Module } from '../injector/module';
-import { GraphInspector } from '../inspector/graph-inspector';
-import {
-  Entrypoint,
-  MiddlewareEntrypointMetadata,
-} from '../inspector/interfaces/entrypoint.interface';
+import { InstanceWrapper } from '../injector/instance-wrapper';
+import { InstanceToken, Module } from '../injector/module';
 import { REQUEST_CONTEXT_ID } from '../router/request/request-constants';
 import { RouterExceptionFilters } from '../router/router-exception-filters';
 import { RouterProxy } from '../router/router-proxy';
-import { isRequestMethodAll } from '../router/utils';
 import { MiddlewareBuilder } from './builder';
 import { MiddlewareContainer } from './container';
 import { MiddlewareResolver } from './resolver';
-import { RouteInfoPathExtractor } from './route-info-path-extractor';
 import { RoutesMapper } from './routes-mapper';
 
-export class MiddlewareModule<
-  TAppOptions extends NestApplicationContextOptions = NestApplicationContextOptions,
-> {
+export class MiddlewareModule {
   private readonly routerProxy = new RouterProxy();
   private readonly exceptionFiltersCache = new WeakMap();
-  private readonly logger = new Logger(MiddlewareModule.name);
 
   private injector: Injector;
   private routerExceptionFilter: RouterExceptionFilters;
   private routesMapper: RoutesMapper;
   private resolver: MiddlewareResolver;
+  private config: ApplicationConfig;
   private container: NestContainer;
   private httpAdapter: HttpServer;
-  private graphInspector: GraphInspector;
-  private appOptions: TAppOptions;
-  private routeInfoPathExtractor: RouteInfoPathExtractor;
 
   public async register(
     middlewareContainer: MiddlewareContainer,
@@ -55,11 +46,7 @@ export class MiddlewareModule<
     config: ApplicationConfig,
     injector: Injector,
     httpAdapter: HttpServer,
-    graphInspector: GraphInspector,
-    options: TAppOptions,
   ) {
-    this.appOptions = options;
-
     const appRef = container.getHttpAdapterRef();
     this.routerExceptionFilter = new RouterExceptionFilters(
       container,
@@ -67,12 +54,12 @@ export class MiddlewareModule<
       appRef,
     );
     this.routesMapper = new RoutesMapper(container);
-    this.resolver = new MiddlewareResolver(middlewareContainer, injector);
-    this.routeInfoPathExtractor = new RouteInfoPathExtractor(config);
+    this.resolver = new MiddlewareResolver(middlewareContainer);
+
+    this.config = config;
     this.injector = injector;
     this.container = container;
     this.httpAdapter = httpAdapter;
-    this.graphInspector = graphInspector;
 
     const modules = container.getModules();
     await this.resolveMiddleware(middlewareContainer, modules);
@@ -105,19 +92,8 @@ export class MiddlewareModule<
     const middlewareBuilder = new MiddlewareBuilder(
       this.routesMapper,
       this.httpAdapter,
-      this.routeInfoPathExtractor,
     );
-    try {
-      await instance.configure(middlewareBuilder);
-    } catch (err) {
-      if (!this.appOptions.preview) {
-        throw err;
-      }
-      const warningMessage =
-        `Warning! "${moduleRef.name}" module exposes a "configure" method that throws an exception in the preview mode` +
-        ` (possibly due to missing dependencies). Note: you can ignore this message, just be aware that some of those conditional middlewares will not be reflected in your graph.`;
-      this.logger.warn(warningMessage);
-    }
+    await instance.configure(middlewareBuilder);
 
     if (!(middlewareBuilder instanceof MiddlewareBuilder)) {
       return;
@@ -195,34 +171,11 @@ export class MiddlewareModule<
       if (instanceWrapper.isTransient) {
         return;
       }
-      this.graphInspector.insertClassNode(
-        moduleRef,
-        instanceWrapper,
-        'middleware',
-      );
-      const middlewareDefinition: Entrypoint<MiddlewareEntrypointMetadata> = {
-        type: 'middleware',
-        methodName: 'use',
-        className: instanceWrapper.name,
-        classNodeId: instanceWrapper.id,
-        metadata: {
-          key: routeInfo.path,
-          path: routeInfo.path,
-          requestMethod:
-            (RequestMethod[routeInfo.method] as keyof typeof RequestMethod) ??
-            'ALL',
-          version: routeInfo.version,
-        },
-      };
-      this.graphInspector.insertEntrypointDefinition(
-        middlewareDefinition,
-        instanceWrapper.id,
-      );
-
       await this.bindHandler(
         instanceWrapper,
         applicationRef,
-        routeInfo,
+        routeInfo.method,
+        routeInfo.path,
         moduleRef,
         collection,
       );
@@ -232,9 +185,10 @@ export class MiddlewareModule<
   private async bindHandler(
     wrapper: InstanceWrapper<NestMiddleware>,
     applicationRef: HttpServer,
-    routeInfo: RouteInfo,
+    method: RequestMethod,
+    path: string,
     moduleRef: Module,
-    collection: Map<InjectionToken, InstanceWrapper>,
+    collection: Map<InstanceToken, InstanceWrapper>,
   ) {
     const { instance, metatype } = wrapper;
     if (isUndefined(instance?.use)) {
@@ -243,21 +197,28 @@ export class MiddlewareModule<
     const isStatic = wrapper.isDependencyTreeStatic();
     if (isStatic) {
       const proxy = await this.createProxy(instance);
-      return this.registerHandler(applicationRef, routeInfo, proxy);
+      return this.registerHandler(applicationRef, method, path, proxy);
     }
-
-    const isTreeDurable = wrapper.isDependencyTreeDurable();
-
     await this.registerHandler(
       applicationRef,
-      routeInfo,
+      method,
+      path,
       async <TRequest, TResponse>(
         req: TRequest,
         res: TResponse,
         next: () => void,
       ) => {
         try {
-          const contextId = this.getContextId(req, isTreeDurable);
+          const contextId = ContextIdFactory.getByRequest(req);
+          if (!req[REQUEST_CONTEXT_ID]) {
+            Object.defineProperty(req, REQUEST_CONTEXT_ID, {
+              value: contextId,
+              enumerable: false,
+              writable: false,
+              configurable: false,
+            });
+            this.container.registerRequestProvider(req, contextId);
+          }
           const contextInstance = await this.injector.loadPerContext(
             instance,
             moduleRef,
@@ -302,46 +263,47 @@ export class MiddlewareModule<
 
   private async registerHandler(
     applicationRef: HttpServer,
-    routeInfo: RouteInfo,
+    method: RequestMethod,
+    path: string,
     proxy: <TRequest, TResponse>(
       req: TRequest,
       res: TResponse,
       next: () => void,
     ) => void,
   ) {
-    const { method } = routeInfo;
-    const paths = this.routeInfoPathExtractor.extractPathsFrom(routeInfo);
+    const prefix = this.config.getGlobalPrefix();
+    const excludedRoutes = this.config.getGlobalPrefixOptions().exclude;
+    if (
+      Array.isArray(excludedRoutes) &&
+      isRouteExcluded(excludedRoutes, path, method)
+    ) {
+      path = addLeadingSlash(path);
+    } else {
+      const basePath = addLeadingSlash(prefix);
+      if (basePath?.endsWith('/') && path?.startsWith('/')) {
+        // strip slash when a wildcard is being used
+        // and global prefix has been set
+        path = path?.slice(1);
+      }
+      path = basePath + path;
+    }
     const isMethodAll = isRequestMethodAll(method);
     const requestMethod = RequestMethod[method];
     const router = await applicationRef.createMiddlewareFactory(method);
-    const middlewareFunction = isMethodAll
-      ? proxy
-      : <TRequest, TResponse>(
-          req: TRequest,
-          res: TResponse,
-          next: () => void,
-        ) => {
-          if (applicationRef.getRequestMethod(req) === requestMethod) {
-            return proxy(req, res, next);
-          }
-          return next();
-        };
-    paths.forEach(path => router(path, middlewareFunction));
-  }
-
-  private getContextId(request: unknown, isTreeDurable: boolean): ContextId {
-    const contextId = ContextIdFactory.getByRequest(request);
-    if (!request[REQUEST_CONTEXT_ID]) {
-      Object.defineProperty(request, REQUEST_CONTEXT_ID, {
-        value: contextId,
-        enumerable: false,
-        writable: false,
-        configurable: false,
-      });
-
-      const requestProviderValue = isTreeDurable ? contextId.payload : request;
-      this.container.registerRequestProvider(requestProviderValue, contextId);
-    }
-    return contextId;
+    router(
+      path,
+      isMethodAll
+        ? proxy
+        : <TRequest, TResponse>(
+            req: TRequest,
+            res: TResponse,
+            next: () => void,
+          ) => {
+            if (applicationRef.getRequestMethod(req) === requestMethod) {
+              return proxy(req, res, next);
+            }
+            return next();
+          },
+    );
   }
 }
diff --git a/packages/core/middleware/resolver.ts b/packages/core/middleware/resolver.ts
index 99d02f418..168cd00c0 100644
--- a/packages/core/middleware/resolver.ts
+++ b/packages/core/middleware/resolver.ts
@@ -1,28 +1,26 @@
-import { InjectionToken } from '@nestjs/common';
 import { Injector } from '../injector/injector';
 import { InstanceWrapper } from '../injector/instance-wrapper';
-import { Module } from '../injector/module';
+import { InstanceToken, Module } from '../injector/module';
 import { MiddlewareContainer } from './container';
 
 export class MiddlewareResolver {
-  constructor(
-    private readonly middlewareContainer: MiddlewareContainer,
-    private readonly injector: Injector,
-  ) {}
+  private readonly instanceLoader = new Injector();
+
+  constructor(private readonly middlewareContainer: MiddlewareContainer) {}
 
   public async resolveInstances(moduleRef: Module, moduleName: string) {
-    const middlewareMap =
+    const middleware =
       this.middlewareContainer.getMiddlewareCollection(moduleName);
     const resolveInstance = async (wrapper: InstanceWrapper) =>
-      this.resolveMiddlewareInstance(wrapper, middlewareMap, moduleRef);
-    await Promise.all([...middlewareMap.values()].map(resolveInstance));
+      this.resolveMiddlewareInstance(wrapper, middleware, moduleRef);
+    await Promise.all([...middleware.values()].map(resolveInstance));
   }
 
   private async resolveMiddlewareInstance(
     wrapper: InstanceWrapper,
-    middlewareMap: Map<InjectionToken, InstanceWrapper>,
+    middleware: Map<InstanceToken, InstanceWrapper>,
     moduleRef: Module,
   ) {
-    await this.injector.loadMiddleware(wrapper, middlewareMap, moduleRef);
+    await this.instanceLoader.loadMiddleware(wrapper, middleware, moduleRef);
   }
 }
diff --git a/packages/core/middleware/route-info-path-extractor.ts b/packages/core/middleware/route-info-path-extractor.ts
deleted file mode 100644
index c3d2bf8bf..000000000
--- a/packages/core/middleware/route-info-path-extractor.ts
+++ /dev/null
@@ -1,87 +0,0 @@
-import { VersioningType } from '@nestjs/common';
-import {
-  RouteInfo,
-  VersioningOptions,
-  VersionValue,
-} from '@nestjs/common/interfaces';
-import {
-  addLeadingSlash,
-  stripEndSlash,
-} from '@nestjs/common/utils/shared.utils';
-import { ApplicationConfig } from '../application-config';
-import { ExcludeRouteMetadata } from '../router/interfaces/exclude-route-metadata.interface';
-import { isRouteExcluded } from '../router/utils';
-import { RoutePathFactory } from './../router/route-path-factory';
-
-export class RouteInfoPathExtractor {
-  private routePathFactory: RoutePathFactory;
-  private readonly prefixPath: string;
-  private readonly excludedGlobalPrefixRoutes: ExcludeRouteMetadata[];
-  private readonly versioningConfig?: VersioningOptions;
-
-  constructor(private readonly applicationConfig: ApplicationConfig) {
-    this.routePathFactory = new RoutePathFactory(applicationConfig);
-    this.prefixPath = stripEndSlash(
-      addLeadingSlash(this.applicationConfig.getGlobalPrefix()),
-    );
-    this.excludedGlobalPrefixRoutes =
-      this.applicationConfig.getGlobalPrefixOptions().exclude;
-    this.versioningConfig = this.applicationConfig.getVersioning();
-  }
-
-  public extractPathsFrom({ path, method, version }: RouteInfo): string[] {
-    const versionPath = this.extractVersionPathFrom(version);
-
-    if (this.isAWildcard(path)) {
-      return Array.isArray(this.excludedGlobalPrefixRoutes)
-        ? [
-            this.prefixPath + versionPath + addLeadingSlash(path),
-            ...this.excludedGlobalPrefixRoutes.map(
-              route => versionPath + addLeadingSlash(route.path),
-            ),
-          ]
-        : [this.prefixPath + versionPath + addLeadingSlash(path)];
-    }
-
-    return [this.extractNonWildcardPathFrom({ path, method, version })];
-  }
-
-  public extractPathFrom(route: RouteInfo): string {
-    if (this.isAWildcard(route.path) && !route.version) {
-      return addLeadingSlash(route.path);
-    }
-
-    return this.extractNonWildcardPathFrom(route);
-  }
-
-  private isAWildcard(path: string): boolean {
-    return ['*', '/*', '/*/', '(.*)', '/(.*)'].includes(path);
-  }
-
-  private extractNonWildcardPathFrom({
-    path,
-    method,
-    version,
-  }: RouteInfo): string {
-    const versionPath = this.extractVersionPathFrom(version);
-
-    if (
-      Array.isArray(this.excludedGlobalPrefixRoutes) &&
-      isRouteExcluded(this.excludedGlobalPrefixRoutes, path, method)
-    ) {
-      return versionPath + addLeadingSlash(path);
-    }
-
-    return this.prefixPath + versionPath + addLeadingSlash(path);
-  }
-
-  private extractVersionPathFrom(version?: VersionValue): string {
-    if (!version || this.versioningConfig?.type !== VersioningType.URI)
-      return '';
-
-    const versionPrefix = this.routePathFactory.getVersionPrefix(
-      this.versioningConfig,
-    );
-    return addLeadingSlash(versionPrefix + version.toString());
-  }
-}
diff --git a/packages/core/middleware/routes-mapper.ts b/packages/core/middleware/routes-mapper.ts
index d6f98ec57..bbb8ea36c 100644
--- a/packages/core/middleware/routes-mapper.ts
+++ b/packages/core/middleware/routes-mapper.ts
@@ -8,68 +8,49 @@ import {
 import { NestContainer } from '../injector/container';
 import { Module } from '../injector/module';
 import { MetadataScanner } from '../metadata-scanner';
-import { PathsExplorer } from '../router/paths-explorer';
+import { RouterExplorer } from '../router/router-explorer';
 import { targetModulesByContainer } from '../router/router-module';
 
 export class RoutesMapper {
-  private readonly pathsExplorer: PathsExplorer;
+  private readonly routerExplorer: RouterExplorer;
 
   constructor(private readonly container: NestContainer) {
-    this.pathsExplorer = new PathsExplorer(new MetadataScanner());
+    this.routerExplorer = new RouterExplorer(new MetadataScanner(), container);
   }
 
   public mapRouteToRouteInfo(
     route: Type<any> | RouteInfo | string,
   ): RouteInfo[] {
     if (isString(route)) {
-      return this.getRouteInfoFromPath(route);
+      const defaultRequestMethod = -1;
+      return [
+        {
+          path: addLeadingSlash(route),
+          method: defaultRequestMethod,
+        },
+      ];
     }
     const routePathOrPaths = this.getRoutePath(route);
     if (this.isRouteInfo(routePathOrPaths, route)) {
-      return this.getRouteInfoFromObject(route);
+      return [
+        {
+          path: addLeadingSlash(route.path),
+          method: route.method,
+        },
+      ];
     }
-
-    return this.getRouteInfoFromController(route, routePathOrPaths);
-  }
-
-  private getRouteInfoFromPath(routePath: string): RouteInfo[] {
-    const defaultRequestMethod = -1;
-    return [
-      {
-        path: addLeadingSlash(routePath),
-        method: defaultRequestMethod as any,
-      },
-    ];
-  }
-
-  private getRouteInfoFromObject(routeInfoObject: RouteInfo): RouteInfo[] {
-    const routeInfo: RouteInfo = {
-      path: addLeadingSlash(routeInfoObject.path),
-      method: routeInfoObject.method,
-    };
-
-    if (routeInfoObject.version) {
-      routeInfo.version = routeInfoObject.version;
-    }
-    return [routeInfo];
-  }
-
-  private getRouteInfoFromController(
-    controller: Type<any>,
-    routePath: string,
-  ): RouteInfo[] {
-    const controllerPaths = this.pathsExplorer.scanForPaths(
-      Object.create(controller),
-      controller.prototype,
+    const controllerPaths = this.routerExplorer.scanForPaths(
+      Object.create(route),
+      route.prototype,
     );
-    const moduleRef = this.getHostModuleOfController(controller);
+    const moduleRef = this.getHostModuleOfController(route);
     const modulePath = this.getModulePath(moduleRef?.metatype);
 
     const concatPaths = <T>(acc: T[], currentValue: T[]) =>
       acc.concat(currentValue);
 
     return []
-      .concat(routePath)
+      .concat(routePathOrPaths)
       .map(routePath =>
         controllerPaths
           .map(item =>
@@ -77,16 +58,10 @@ export class RoutesMapper {
               let path = modulePath ?? '';
               path += this.normalizeGlobalPath(routePath) + addLeadingSlash(p);
 
-              const routeInfo: RouteInfo = {
+              return {
                 path,
                 method: item.requestMethod,
               };
-
-              if (item.version) {
-                routeInfo.version = item.version;
-              }
-
-              return routeInfo;
             }),
           )
           .reduce(concatPaths, []),
@@ -125,7 +100,7 @@ export class RoutesMapper {
     const modules = Array.from(modulesContainer.values()).filter(moduleRef =>
       moduleRefsSet.has(moduleRef),
     );
-    return modules.find(({ controllers }) => controllers.has(metatype));
+    return modules.find(({ routes }) => routes.has(metatype));
   }
 
   private getModulePath(
diff --git a/packages/core/middleware/utils.ts b/packages/core/middleware/utils.ts
index 7a23e24d0..f0cdddf99 100644
--- a/packages/core/middleware/utils.ts
+++ b/packages/core/middleware/utils.ts
@@ -1,33 +1,19 @@
 import { RequestMethod } from '@nestjs/common';
 import { HttpServer, RouteInfo, Type } from '@nestjs/common/interfaces';
-import {
-  addLeadingSlash,
-  isFunction,
-  isString,
-} from '@nestjs/common/utils/shared.utils';
+import { isFunction } from '@nestjs/common/utils/shared.utils';
 import { iterate } from 'iterare';
 import * as pathToRegexp from 'path-to-regexp';
-import { uid } from 'uid';
+import { v4 as uuid } from 'uuid';
 import { ExcludeRouteMetadata } from '../router/interfaces/exclude-route-metadata.interface';
 import { isRouteExcluded } from '../router/utils';
 
 export const mapToExcludeRoute = (
-  routes: (string | RouteInfo)[],
+  routes: RouteInfo[],
 ): ExcludeRouteMetadata[] => {
-  return routes.map(route => {
-    if (isString(route)) {
-      return {
-        path: route,
-        requestMethod: RequestMethod.ALL,
-        pathRegex: pathToRegexp(addLeadingSlash(route)),
-      };
-    }
-    return {
-      path: route.path,
-      requestMethod: route.method,
-      pathRegex: pathToRegexp(addLeadingSlash(route.path)),
-    };
-  });
+  return routes.map(({ path, method }) => ({
+    pathRegex: pathToRegexp(path),
+    requestMethod: method,
+  }));
 };
 
 export const filterMiddleware = <T extends Function | Type<any> = any>(
@@ -95,11 +81,11 @@ export function isMiddlewareClass(middleware: any): middleware is Type<any> {
   return (
     middlewareArr[0] === 'function' &&
     /[A-Z]/.test(middlewareArr[1]?.[0]) &&
-    isFunction(middleware.prototype?.use)
+    typeof middleware.prototype?.use === 'function'
   );
 }
 
-export function assignToken(metatype: Type<any>, token = uid(21)): Type<any> {
+export function assignToken(metatype: Type<any>, token = uuid()): Type<any> {
   Object.defineProperty(metatype, 'name', { value: token });
   return metatype;
 }
diff --git a/packages/core/nest-application-context.ts b/packages/core/nest-application-context.ts
index ac4d64957..cfd4e19b6 100644
--- a/packages/core/nest-application-context.ts
+++ b/packages/core/nest-application-context.ts
@@ -5,17 +5,14 @@ import {
   LogLevel,
   ShutdownSignal,
 } from '@nestjs/common';
-import {
-  Abstract,
-  DynamicModule,
-  GetOrResolveOptions,
-  Type,
-} from '@nestjs/common/interfaces';
-import { NestApplicationContextOptions } from '@nestjs/common/interfaces/nest-application-context-options.interface';
+import { Abstract, DynamicModule, Scope } from '@nestjs/common/interfaces';
+import { Type } from '@nestjs/common/interfaces/type.interface';
 import { isEmpty } from '@nestjs/common/utils/shared.utils';
 import { iterate } from 'iterare';
 import { MESSAGES } from './constants';
-import { UnknownModuleException } from './errors/exceptions';
+import { InvalidClassScopeException } from './errors/exceptions/invalid-class-scope.exception';
+import { UnknownElementException } from './errors/exceptions/unknown-element.exception';
+import { UnknownModuleException } from './errors/exceptions/unknown-module.exception';
 import { createContextId } from './helpers/context-id-factory';
 import {
   callAppShutdownHook,
@@ -24,7 +21,6 @@ import {
   callModuleDestroyHook,
   callModuleInitHook,
 } from './hooks';
-import { AbstractInstanceResolver } from './injector/abstract-instance-resolver';
 import { ModuleCompiler } from './injector/compiler';
 import { NestContainer } from './injector/container';
 import { Injector } from './injector/injector';
@@ -35,26 +31,17 @@ import { Module } from './injector/module';
 /**
  * @publicApi
  */
-export class NestApplicationContext<
-    TOptions extends NestApplicationContextOptions = NestApplicationContextOptions,
-  >
-  extends AbstractInstanceResolver
-  implements INestApplicationContext
-{
+export class NestApplicationContext implements INestApplicationContext {
   protected isInitialized = false;
-  protected injector: Injector;
-  protected readonly logger = new Logger(NestApplicationContext.name, {
-    timestamp: true,
-  });
+  protected readonly injector = new Injector();
 
-  private shouldFlushLogsOnOverride = false;
   private readonly activeShutdownSignals = new Array<string>();
   private readonly moduleCompiler = new ModuleCompiler();
   private shutdownCleanupRef?: (...args: unknown[]) => unknown;
   private _instanceLinksHost: InstanceLinksHost;
-  private _moduleRefsForHooksByDistance?: Array<Module>;
+  private _moduleRefsByDistance?: Array<Module>;
 
-  protected get instanceLinksHost() {
+  private get instanceLinksHost() {
     if (!this._instanceLinksHost) {
       this._instanceLinksHost = new InstanceLinksHost(this.container);
     }
@@ -63,27 +50,15 @@ export class NestApplicationContext<
 
   constructor(
     protected readonly container: NestContainer,
-    protected readonly appOptions: TOptions = {} as TOptions,
-    private contextModule: Module = null,
     private readonly scope = new Array<Type<any>>(),
-  ) {
-    super();
-    this.injector = new Injector();
-
-    if (this.appOptions.preview) {
-      this.printInPreviewModeWarning();
-    }
-  }
+    private contextModule: Module = null,
+  ) {}
 
   public selectContextModule() {
     const modules = this.container.getModules().values();
     this.contextModule = modules.next().value;
   }
 
-  /**
-   * Allows navigating through the modules tree, for example, to pull out a specific instance from the selected module.
-   * @returns {INestApplicationContext}
-   */
   public select<T>(
     moduleType: Type<T> | DynamicModule,
   ): INestApplicationContext {
@@ -100,114 +75,24 @@ export class NestApplicationContext<
     if (!selectedModule) {
       throw new UnknownModuleException();
     }
-    return new NestApplicationContext(
-      this.container,
-      this.appOptions,
-      selectedModule,
-      scope,
-    );
+    return new NestApplicationContext(this.container, scope, selectedModule);
   }
 
-  /**
-   * Retrieves an instance of either injectable or controller, otherwise, throws exception.
-   * @returns {TResult}
-   */
-  public get<TInput = any, TResult = TInput>(
-    typeOrToken: Type<TInput> | Function | string | symbol,
-  ): TResult;
-  /**
-   * Retrieves an instance of either injectable or controller, otherwise, throws exception.
-   * @returns {TResult}
-   */
-  public get<TInput = any, TResult = TInput>(
-    typeOrToken: Type<TInput> | Function | string | symbol,
-    options: {
-      strict?: boolean;
-      each?: undefined | false;
-    },
-  ): TResult;
-  /**
-   * Retrieves a list of instances of either injectables or controllers, otherwise, throws exception.
-   * @returns {Array<TResult>}
-   */
-  public get<TInput = any, TResult = TInput>(
-    typeOrToken: Type<TInput> | Function | string | symbol,
-    options: {
-      strict?: boolean;
-      each: true;
-    },
-  ): Array<TResult>;
-  /**
-   * Retrieves an instance (or a list of instances) of either injectable or controller, otherwise, throws exception.
-   * @returns {TResult | Array<TResult>}
-   */
   public get<TInput = any, TResult = TInput>(
     typeOrToken: Type<TInput> | Abstract<TInput> | string | symbol,
-    options: GetOrResolveOptions = { strict: false },
-  ): TResult | Array<TResult> {
+    options: { strict: boolean } = { strict: false },
+  ): TResult {
     return !(options && options.strict)
-      ? this.find<TInput, TResult>(typeOrToken, options)
-      : this.find<TInput, TResult>(typeOrToken, {
-          moduleId: this.contextModule?.id,
-          each: options.each,
-        });
+      ? this.find<TInput, TResult>(typeOrToken)
+      : this.find<TInput, TResult>(typeOrToken, this.contextModule);
   }
 
-  /**
-   * Resolves transient or request-scoped instance of either injectable or controller, otherwise, throws exception.
-   * @returns {Array<TResult>}
-   */
-  public resolve<TInput = any, TResult = TInput>(
-    typeOrToken: Type<TInput> | Function | string | symbol,
-  ): Promise<TResult>;
-  /**
-   * Resolves transient or request-scoped instance of either injectable or controller, otherwise, throws exception.
-   * @returns {Array<TResult>}
-   */
-  public resolve<TInput = any, TResult = TInput>(
-    typeOrToken: Type<TInput> | Function | string | symbol,
-    contextId?: {
-      id: number;
-    },
-  ): Promise<TResult>;
-  /**
-   * Resolves transient or request-scoped instance of either injectable or controller, otherwise, throws exception.
-   * @returns {Array<TResult>}
-   */
-  public resolve<TInput = any, TResult = TInput>(
-    typeOrToken: Type<TInput> | Function | string | symbol,
-    contextId?: {
-      id: number;
-    },
-    options?: {
-      strict?: boolean;
-      each?: undefined | false;
-    },
-  ): Promise<TResult>;
-  /**
-   * Resolves transient or request-scoped instances of either injectables or controllers, otherwise, throws exception.
-   * @returns {Array<TResult>}
-   */
-  public resolve<TInput = any, TResult = TInput>(
-    typeOrToken: Type<TInput> | Function | string | symbol,
-    contextId?: {
-      id: number;
-    },
-    options?: {
-      strict?: boolean;
-      each: true;
-    },
-  ): Promise<Array<TResult>>;
-  /**
-   * Resolves transient or request-scoped instance (or a list of instances) of either injectable or controller, otherwise, throws exception.
-   * @returns {Promise<TResult | Array<TResult>>}
-   */
   public resolve<TInput = any, TResult = TInput>(
     typeOrToken: Type<TInput> | Abstract<TInput> | string | symbol,
     contextId = createContextId(),
-    options: GetOrResolveOptions = { strict: false },
-  ): Promise<TResult | Array<TResult>> {
-    return this.resolvePerContext<TInput, TResult>(
+    options: { strict: boolean } = { strict: false },
+  ): Promise<TResult> {
+    return this.resolvePerContext(
       typeOrToken,
       this.contextModule,
       contextId,
@@ -215,16 +100,12 @@ export class NestApplicationContext<
     );
   }
 
-  /**
-   * Registers the request/context object for a given context ID (DI container sub-tree).
-   * @returns {void}
-   */
   public registerRequestByContextId<T = any>(request: T, contextId: ContextId) {
     this.container.registerRequestProvider(request, contextId);
   }
 
   /**
-   * Initializes the Nest application.
+   * Initalizes the Nest application.
    * Calls the Nest lifecycle events.
    *
    * @returns {Promise<this>} The NestApplicationContext instance as Promise
@@ -240,46 +121,22 @@ export class NestApplicationContext<
     return this;
   }
 
-  /**
-   * Terminates the application
-   * @returns {Promise<void>}
-   */
-  public async close(signal?: string): Promise<void> {
+  public async close(): Promise<void> {
     await this.callDestroyHook();
-    await this.callBeforeShutdownHook(signal);
+    await this.callBeforeShutdownHook();
     await this.dispose();
-    await this.callShutdownHook(signal);
+    await this.callShutdownHook();
     this.unsubscribeFromProcessSignals();
   }
 
-  /**
-   * Sets custom logger service.
-   * Flushes buffered logs if auto flush is on.
-   * @returns {void}
-   */
   public useLogger(logger: LoggerService | LogLevel[] | false) {
     Logger.overrideLogger(logger);
-
-    if (this.shouldFlushLogsOnOverride) {
-      this.flushLogs();
-    }
   }
 
-  /**
-   * Prints buffered logs and detaches buffer.
-   * @returns {void}
-   */
   public flushLogs() {
     Logger.flush();
   }
 
-  /**
-   * Define that it must flush logs right after defining a custom logger.
-   */
-  public flushLogsOnOverride() {
-    this.shouldFlushLogsOnOverride = true;
-  }
-
   /**
    * Enables the usage of shutdown hooks. Will call the
    * `onApplicationShutdown` function of a provider if the
@@ -323,20 +180,13 @@ export class NestApplicationContext<
    * @param {string[]} signals The system signals it should listen to
    */
   protected listenToShutdownSignals(signals: string[]) {
-    let receivedSignal = false;
     const cleanup = async (signal: string) => {
       try {
-        if (receivedSignal) {
-          // If we receive another signal while we're waiting
-          // for the server to stop, just ignore it.
-          return;
-        }
-        receivedSignal = true;
+        signals.forEach(sig => process.removeListener(sig, cleanup));
         await this.callDestroyHook();
         await this.callBeforeShutdownHook(signal);
         await this.dispose();
         await this.callShutdownHook(signal);
-        signals.forEach(sig => process.removeListener(sig, cleanup));
         process.kill(process.pid, signal);
       } catch (err) {
         Logger.error(
@@ -372,7 +222,7 @@ export class NestApplicationContext<
    * modules and its children.
    */
   protected async callInitHook(): Promise<void> {
-    const modulesSortedByDistance = this.getModulesToTriggerHooksOn();
+    const modulesSortedByDistance = this.getModulesSortedByDistance();
     for (const module of modulesSortedByDistance) {
       await callModuleInitHook(module);
     }
@@ -383,7 +233,7 @@ export class NestApplicationContext<
    * modules and its children.
    */
   protected async callDestroyHook(): Promise<void> {
-    const modulesSortedByDistance = this.getModulesToTriggerHooksOn();
+    const modulesSortedByDistance = this.getModulesSortedByDistance();
     for (const module of modulesSortedByDistance) {
       await callModuleDestroyHook(module);
     }
@@ -394,7 +244,7 @@ export class NestApplicationContext<
    * modules and its children.
    */
   protected async callBootstrapHook(): Promise<void> {
-    const modulesSortedByDistance = this.getModulesToTriggerHooksOn();
+    const modulesSortedByDistance = this.getModulesSortedByDistance();
     for (const module of modulesSortedByDistance) {
       await callModuleBootstrapHook(module);
     }
@@ -405,7 +255,7 @@ export class NestApplicationContext<
    * modules and children.
    */
   protected async callShutdownHook(signal?: string): Promise<void> {
-    const modulesSortedByDistance = this.getModulesToTriggerHooksOn();
+    const modulesSortedByDistance = this.getModulesSortedByDistance();
     for (const module of modulesSortedByDistance) {
       await callAppShutdownHook(module, signal);
     }
@@ -416,40 +266,69 @@ export class NestApplicationContext<
    * modules and children.
    */
   protected async callBeforeShutdownHook(signal?: string): Promise<void> {
-    const modulesSortedByDistance = this.getModulesToTriggerHooksOn();
+    const modulesSortedByDistance = this.getModulesSortedByDistance();
     for (const module of modulesSortedByDistance) {
       await callBeforeAppShutdownHook(module, signal);
     }
   }
 
-  protected assertNotInPreviewMode(methodName: string) {
-    if (this.appOptions.preview) {
-      const error = `Calling the "${methodName}" in the preview mode is not supported.`;
-      this.logger.error(error);
-      throw new Error(error);
+  protected find<TInput = any, TResult = TInput>(
+    typeOrToken: Type<TInput> | Abstract<TInput> | string | symbol,
+    contextModule?: Module,
+  ): TResult {
+    const moduleId = contextModule && contextModule.id;
+    const { wrapperRef } = this.instanceLinksHost.get<TResult>(
+      typeOrToken,
+      moduleId,
+    );
+    if (
+      wrapperRef.scope === Scope.REQUEST ||
+      wrapperRef.scope === Scope.TRANSIENT
+    ) {
+      throw new InvalidClassScopeException(typeOrToken);
+    }
+    return wrapperRef.instance;
+  }
+
+  protected async resolvePerContext<TInput = any, TResult = TInput>(
+    typeOrToken: Type<TInput> | Abstract<TInput> | string | symbol,
+    contextModule: Module,
+    contextId: ContextId,
+    options?: { strict: boolean },
+  ): Promise<TResult> {
+    const isStrictModeEnabled = options && options.strict;
+    const instanceLink = isStrictModeEnabled
+      ? this.instanceLinksHost.get(typeOrToken, contextModule.id)
+      : this.instanceLinksHost.get(typeOrToken);
+
+    const { wrapperRef, collection } = instanceLink;
+    if (wrapperRef.isDependencyTreeStatic() && !wrapperRef.isTransient) {
+      return this.get(typeOrToken, options);
+    }
+
+    const ctorHost = wrapperRef.instance || { constructor: typeOrToken };
+    const instance = await this.injector.loadPerContext(
+      ctorHost,
+      wrapperRef.host,
+      collection,
+      contextId,
+    );
+    if (!instance) {
+      throw new UnknownElementException();
     }
+    return instance;
   }
 
-  private getModulesToTriggerHooksOn(): Module[] {
-    if (this._moduleRefsForHooksByDistance) {
-      return this._moduleRefsForHooksByDistance;
+  private getModulesSortedByDistance(): Module[] {
+    if (this._moduleRefsByDistance) {
+      return this._moduleRefsByDistance;
     }
     const modulesContainer = this.container.getModules();
     const compareFn = (a: Module, b: Module) => b.distance - a.distance;
-    const modulesSortedByDistance = Array.from(modulesContainer.values()).sort(
+
+    this._moduleRefsByDistance = Array.from(modulesContainer.values()).sort(
       compareFn,
     );
-
-    this._moduleRefsForHooksByDistance = this.appOptions?.preview
-      ? modulesSortedByDistance.filter(moduleRef => moduleRef.initOnPreview)
-      : modulesSortedByDistance;
-    return this._moduleRefsForHooksByDistance;
-  }
-
-  private printInPreviewModeWarning() {
-    this.logger.warn('------------------------------------------------');
-    this.logger.warn('Application is running in the PREVIEW mode!');
-    this.logger.warn('Providers/controllers will not be instantiated.');
-    this.logger.warn('------------------------------------------------');
+    return this._moduleRefsByDistance;
   }
 }
diff --git a/packages/core/nest-application.ts b/packages/core/nest-application.ts
index 3b25d5877..2fac71560 100644
--- a/packages/core/nest-application.ts
+++ b/packages/core/nest-application.ts
@@ -7,18 +7,18 @@ import {
   NestHybridApplicationOptions,
   NestInterceptor,
   PipeTransform,
+  RequestMethod,
   VersioningOptions,
   VersioningType,
   WebSocketAdapter,
 } from '@nestjs/common';
-import {
-  GlobalPrefixOptions,
-  NestApplicationOptions,
-} from '@nestjs/common/interfaces';
+import { RouteInfo } from '@nestjs/common/interfaces';
 import {
   CorsOptions,
   CorsOptionsDelegate,
 } from '@nestjs/common/interfaces/external/cors-options.interface';
+import { GlobalPrefixOptions } from '@nestjs/common/interfaces/global-prefix-options.interface';
+import { NestApplicationOptions } from '@nestjs/common/interfaces/nest-application-options.interface';
 import { Logger } from '@nestjs/common/services/logger.service';
 import { loadPackage } from '@nestjs/common/utils/load-package.util';
 import {
@@ -29,17 +29,16 @@ import {
 } from '@nestjs/common/utils/shared.utils';
 import { iterate } from 'iterare';
 import { platform } from 'os';
+import * as pathToRegexp from 'path-to-regexp';
 import { AbstractHttpAdapter } from './adapters';
 import { ApplicationConfig } from './application-config';
 import { MESSAGES } from './constants';
 import { optionalRequire } from './helpers/optional-require';
 import { NestContainer } from './injector/container';
-import { Injector } from './injector/injector';
-import { GraphInspector } from './inspector/graph-inspector';
 import { MiddlewareContainer } from './middleware/container';
 import { MiddlewareModule } from './middleware/middleware-module';
-import { mapToExcludeRoute } from './middleware/utils';
 import { NestApplicationContext } from './nest-application-context';
+import { ExcludeRouteMetadata } from './router/interfaces/exclude-route-metadata.interface';
 import { Resolver } from './router/interfaces/resolver.interface';
 import { RoutesResolver } from './router/routes-resolver';
 
@@ -56,13 +55,13 @@ const { MicroservicesModule } = optionalRequire(
  * @publicApi
  */
 export class NestApplication
-  extends NestApplicationContext<NestApplicationOptions>
+  extends NestApplicationContext
   implements INestApplication
 {
-  protected readonly logger = new Logger(NestApplication.name, {
+  private readonly logger = new Logger(NestApplication.name, {
     timestamp: true,
   });
-  private readonly middlewareModule: MiddlewareModule;
+  private readonly middlewareModule = new MiddlewareModule();
   private readonly middlewareContainer = new MiddlewareContainer(
     this.container,
   );
@@ -78,20 +77,17 @@ export class NestApplication
     container: NestContainer,
     private readonly httpAdapter: HttpServer,
     private readonly config: ApplicationConfig,
-    private readonly graphInspector: GraphInspector,
-    appOptions: NestApplicationOptions = {},
+    private readonly appOptions: NestApplicationOptions = {},
   ) {
-    super(container, appOptions);
+    super(container);
 
     this.selectContextModule();
     this.registerHttpServer();
-    this.injector = new Injector({ preview: this.appOptions.preview });
-    this.middlewareModule = new MiddlewareModule();
+
     this.routesResolver = new RoutesResolver(
       this.container,
       this.config,
       this.injector,
-      this.graphInspector,
     );
   }
 
@@ -125,7 +121,8 @@ export class NestApplication
       return undefined;
     }
     const passCustomOptions =
-      isObject(this.appOptions.cors) || isFunction(this.appOptions.cors);
+      isObject(this.appOptions.cors) ||
+      typeof this.appOptions.cors === 'function';
     if (!passCustomOptions) {
       return this.enableCors();
     }
@@ -143,23 +140,15 @@ export class NestApplication
     this.registerWsModule();
 
     if (this.microservicesModule) {
-      this.microservicesModule.register(
-        this.container,
-        this.graphInspector,
-        this.config,
-        this.appOptions,
-      );
+      this.microservicesModule.register(this.container, this.config);
       this.microservicesModule.setupClients(this.container);
     }
-
     await this.middlewareModule.register(
       this.middlewareContainer,
       this.container,
       this.config,
       this.injector,
       this.httpAdapter,
-      this.graphInspector,
-      this.appOptions,
     );
   }
 
@@ -167,13 +156,7 @@ export class NestApplication
     if (!this.socketModule) {
       return;
     }
-    this.socketModule.register(
-      this.container,
-      this.config,
-      this.graphInspector,
-      this.appOptions,
-      this.httpServer,
-    );
+    this.socketModule.register(this.container, this.config, this.httpServer);
   }
 
   public async init(): Promise<this> {
@@ -196,9 +179,7 @@ export class NestApplication
   }
 
   public registerParserMiddleware() {
-    const prefix = this.config.getGlobalPrefix();
-    const rawBody = !!this.appOptions?.rawBody;
-    this.httpAdapter.registerParserMiddleware(prefix, rawBody);
+    this.httpAdapter.registerParserMiddleware();
   }
 
   public async registerRouter() {
@@ -231,7 +212,6 @@ export class NestApplication
     const instance = new NestMicroservice(
       this.container,
       microserviceOptions,
-      this.graphInspector,
       applicationConfig,
     );
     instance.registerListeners();
@@ -251,27 +231,19 @@ export class NestApplication
   }
 
   public async startAllMicroservices(): Promise<this> {
-    this.assertNotInPreviewMode('startAllMicroservices');
     await Promise.all(this.microservices.map(msvc => msvc.listen()));
     return this;
   }
 
-  public use(...args: [any, any?]): this {
-    this.httpAdapter.use(...args);
-    return this;
+  public startAllMicroservicesAsync(): Promise<this> {
+    this.logger.warn(
+      'DEPRECATED! "startAllMicroservicesAsync" method is deprecated and will be removed in the next major release. Please, use "startAllMicroservices" instead.',
+    );
+    return this.startAllMicroservices();
   }
 
-  public useBodyParser(...args: [any, any?]): this {
-    if (!('useBodyParser' in this.httpAdapter)) {
-      this.logger.warn('Your HTTP Adapter does not support `.useBodyParser`.');
-      return this;
-    }
-
-    const [parserType, ...otherArgs] = args;
-    const rawBody = !!this.appOptions.rawBody;
-
-    this.httpAdapter.useBodyParser(...[parserType, rawBody, ...otherArgs]);
-
+  public use(...args: [any, any?]): this {
+    this.httpAdapter.use(...args);
     return this;
   }
 
@@ -289,7 +261,6 @@ export class NestApplication
   public async listen(port: number | string): Promise<any>;
   public async listen(port: number | string, hostname: string): Promise<any>;
   public async listen(port: number | string, ...args: any[]): Promise<any> {
-    this.assertNotInPreviewMode('listen');
     !this.isInitialized && (await this.init());
 
     return new Promise((resolve, reject) => {
@@ -329,12 +300,18 @@ export class NestApplication
     });
   }
 
+  public listenAsync(port: number | string, ...args: any[]): Promise<any> {
+    this.logger.warn(
+      'DEPRECATED! "listenAsync" method is deprecated and will be removed in the next major release. Please, use "listen" instead.',
+    );
+    return this.listen(port, ...(args as [any]));
+  }
+
   public async getUrl(): Promise<string> {
     return new Promise((resolve, reject) => {
       if (!this.isListening) {
         this.logger.error(MESSAGES.CALL_LISTEN_FIRST);
         reject(MESSAGES.CALL_LISTEN_FIRST);
-        return;
       }
       const address = this.httpServer.address();
       resolve(this.formatAddress(address));
@@ -342,14 +319,13 @@ export class NestApplication
   }
 
   private formatAddress(address: any): string {
-    if (isString(address)) {
+    if (typeof address === 'string') {
       if (platform() === 'win32') {
         return address;
       }
       const basePath = encodeURIComponent(address);
       return `${this.getProtocol()}+unix://${basePath}`;
     }
-
     let host = this.host();
     if (address && address.family === 'IPv6') {
       if (host === '::') {
@@ -367,9 +343,20 @@ export class NestApplication
   public setGlobalPrefix(prefix: string, options?: GlobalPrefixOptions): this {
     this.config.setGlobalPrefix(prefix);
     if (options) {
-      const exclude = options?.exclude
-        ? mapToExcludeRoute(options.exclude)
-        : [];
+      const exclude = options?.exclude.map(
+        (route: string | RouteInfo): ExcludeRouteMetadata => {
+          if (isString(route)) {
+            return {
+              requestMethod: RequestMethod.ALL,
+              pathRegex: pathToRegexp(addLeadingSlash(route)),
+            };
+          }
+          return {
+            requestMethod: route.method,
+            pathRegex: pathToRegexp(addLeadingSlash(route.path)),
+          };
+        },
+      );
       this.config.setGlobalPrefixOptions({
         ...options,
         exclude,
@@ -385,45 +372,21 @@ export class NestApplication
 
   public useGlobalFilters(...filters: ExceptionFilter[]): this {
     this.config.useGlobalFilters(...filters);
-    filters.forEach(item =>
-      this.graphInspector.insertOrphanedEnhancer({
-        subtype: 'filter',
-        ref: item,
-      }),
-    );
     return this;
   }
 
   public useGlobalPipes(...pipes: PipeTransform<any>[]): this {
     this.config.useGlobalPipes(...pipes);
-    pipes.forEach(item =>
-      this.graphInspector.insertOrphanedEnhancer({
-        subtype: 'pipe',
-        ref: item,
-      }),
-    );
     return this;
   }
 
   public useGlobalInterceptors(...interceptors: NestInterceptor[]): this {
     this.config.useGlobalInterceptors(...interceptors);
-    interceptors.forEach(item =>
-      this.graphInspector.insertOrphanedEnhancer({
-        subtype: 'interceptor',
-        ref: item,
-      }),
-    );
     return this;
   }
 
   public useGlobalGuards(...guards: CanActivate[]): this {
     this.config.useGlobalGuards(...guards);
-    guards.forEach(item =>
-      this.graphInspector.insertOrphanedEnhancer({
-        subtype: 'guard',
-        ref: item,
-      }),
-    );
     return this;
   }
 
@@ -447,7 +410,7 @@ export class NestApplication
   }
   private host(): string | undefined {
     const address = this.httpServer.address();
-    if (isString(address)) {
+    if (typeof address === 'string') {
       return undefined;
     }
     return address && address.address;
diff --git a/packages/core/nest-factory.ts b/packages/core/nest-factory.ts
index 9d4c2c8f9..702ee9146 100644
--- a/packages/core/nest-factory.ts
+++ b/packages/core/nest-factory.ts
@@ -17,11 +17,7 @@ import { ExceptionsZone } from './errors/exceptions-zone';
 import { loadAdapter } from './helpers/load-adapter';
 import { rethrow } from './helpers/rethrow';
 import { NestContainer } from './injector/container';
-import { Injector } from './injector/injector';
 import { InstanceLoader } from './injector/instance-loader';
-import { GraphInspector } from './inspector/graph-inspector';
-import { NoopGraphInspector } from './inspector/noop-graph-inspector';
-import { UuidFactory, UuidFactoryMode } from './inspector/uuid-factory';
 import { MetadataScanner } from './metadata-scanner';
 import { NestApplication } from './nest-application';
 import { NestApplicationContext } from './nest-application-context';
@@ -67,7 +63,7 @@ export class NestFactoryStatic {
     options?: NestApplicationOptions,
   ): Promise<T>;
   public async create<T extends INestApplication = INestApplication>(
-    moduleCls: any,
+    module: any,
     serverOrOptions?: AbstractHttpAdapter | NestApplicationOptions,
     options?: NestApplicationOptions,
   ): Promise<T> {
@@ -77,25 +73,15 @@ export class NestFactoryStatic {
 
     const applicationConfig = new ApplicationConfig();
     const container = new NestContainer(applicationConfig);
-    const graphInspector = this.createGraphInspector(appOptions, container);
-
     this.setAbortOnError(serverOrOptions, options);
     this.registerLoggerConfiguration(appOptions);
 
-    await this.initialize(
-      moduleCls,
-      container,
-      graphInspector,
-      applicationConfig,
-      appOptions,
-      httpServer,
-    );
+    await this.initialize(module, container, applicationConfig, httpServer);
 
     const instance = new NestApplication(
       container,
       httpServer,
       applicationConfig,
-      graphInspector,
       appOptions,
     );
     const target = this.createNestInstance(instance);
@@ -105,14 +91,14 @@ export class NestFactoryStatic {
   /**
    * Creates an instance of NestMicroservice.
    *
-   * @param moduleCls Entry (root) application module class
+   * @param module Entry (root) application module class
    * @param options Optional microservice configuration
    *
    * @returns A promise that, when resolved,
    * contains a reference to the NestMicroservice instance.
    */
   public async createMicroservice<T extends object>(
-    moduleCls: any,
+    module: any,
     options?: NestMicroserviceOptions & T,
   ): Promise<INestMicroservice> {
     const { NestMicroservice } = loadPackage(
@@ -122,65 +108,40 @@ export class NestFactoryStatic {
     );
     const applicationConfig = new ApplicationConfig();
     const container = new NestContainer(applicationConfig);
-    const graphInspector = this.createGraphInspector(options, container);
-
     this.setAbortOnError(options);
     this.registerLoggerConfiguration(options);
 
-    await this.initialize(
-      moduleCls,
-      container,
-      graphInspector,
-      applicationConfig,
-      options,
-    );
+    await this.initialize(module, container, applicationConfig);
     return this.createNestInstance<INestMicroservice>(
-      new NestMicroservice(
-        container,
-        options,
-        graphInspector,
-        applicationConfig,
-      ),
+      new NestMicroservice(container, options, applicationConfig),
     );
   }
 
   /**
    * Creates an instance of NestApplicationContext.
    *
-   * @param moduleCls Entry (root) application module class
+   * @param module Entry (root) application module class
    * @param options Optional Nest application configuration
    *
    * @returns A promise that, when resolved,
    * contains a reference to the NestApplicationContext instance.
    */
   public async createApplicationContext(
-    moduleCls: any,
+    module: any,
     options?: NestApplicationContextOptions,
   ): Promise<INestApplicationContext> {
     const container = new NestContainer();
-    const graphInspector = this.createGraphInspector(options, container);
-
     this.setAbortOnError(options);
     this.registerLoggerConfiguration(options);
 
-    const applicationConfig = undefined;
-    await this.initialize(
-      moduleCls,
-      container,
-      graphInspector,
-      applicationConfig,
-      options,
-    );
+    await this.initialize(module, container);
 
     const modules = container.getModules().values();
     const root = modules.next().value;
 
     const context = this.createNestInstance<NestApplicationContext>(
-      new NestApplicationContext(container, options, root),
+      new NestApplicationContext(container, [], root),
     );
-    if (this.autoFlushLogs) {
-      context.flushLogsOnOverride();
-    }
     return context.init();
   }
 
@@ -191,26 +152,14 @@ export class NestFactoryStatic {
   private async initialize(
     module: any,
     container: NestContainer,
-    graphInspector: GraphInspector,
     config = new ApplicationConfig(),
-    options: NestApplicationContextOptions = {},
     httpServer: HttpServer = null,
   ) {
-    UuidFactory.mode = options.snapshot
-      ? UuidFactoryMode.Deterministic
-      : UuidFactoryMode.Random;
-
-    const injector = new Injector({ preview: options.preview });
-    const instanceLoader = new InstanceLoader(
-      container,
-      injector,
-      graphInspector,
-    );
+    const instanceLoader = new InstanceLoader(container);
     const metadataScanner = new MetadataScanner();
     const dependenciesScanner = new DependenciesScanner(
       container,
       metadataScanner,
-      graphInspector,
       config,
     );
     container.setHttpAdapter(httpServer);
@@ -347,15 +296,6 @@ export class NestFactoryStatic {
     });
     return proxy as unknown as T;
   }
-
-  private createGraphInspector(
-    appOptions: NestApplicationContextOptions,
-    container: NestContainer,
-  ) {
-    return appOptions?.snapshot
-      ? new GraphInspector(container)
-      : NoopGraphInspector;
-  }
 }
 
 /**
diff --git a/packages/core/package.json b/packages/core/package.json
index 99f801e00..0a82418a8 100644
--- a/packages/core/package.json
+++ b/packages/core/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/core",
-  "version": "9.4.0",
+  "version": "8.2.3",
   "description": "Nest - modern, fast, powerful node.js web framework (@core)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -30,18 +30,19 @@
     "@nuxtjs/opencollective": "0.3.2",
     "fast-safe-stringify": "2.1.1",
     "iterare": "1.2.1",
+    "object-hash": "2.2.0",
     "path-to-regexp": "3.2.0",
-    "tslib": "2.5.0",
-    "uid": "2.0.2"
+    "tslib": "2.3.1",
+    "uuid": "8.3.2"
   },
   "devDependencies": {
-    "@nestjs/common": "9.4.0"
+    "@nestjs/common": "8.2.3"
   },
   "peerDependencies": {
-    "@nestjs/common": "^9.0.0",
-    "@nestjs/microservices": "^9.0.0",
-    "@nestjs/platform-express": "^9.0.0",
-    "@nestjs/websockets": "^9.0.0",
+    "@nestjs/common": "^8.0.0",
+    "@nestjs/microservices": "^8.0.0",
+    "@nestjs/platform-express": "^8.0.0",
+    "@nestjs/websockets": "^8.0.0",
     "reflect-metadata": "^0.1.12",
     "rxjs": "^7.1.0"
   },
diff --git a/packages/core/pipes/index.ts b/packages/core/pipes/index.ts
deleted file mode 100644
index ce7301a1d..000000000
--- a/packages/core/pipes/index.ts
+++ /dev/null
@@ -1,3 +0,0 @@
-export * from './params-token-factory';
-export * from './pipes-consumer';
-export * from './pipes-context-creator';
diff --git a/packages/core/pipes/pipes-context-creator.ts b/packages/core/pipes/pipes-context-creator.ts
index fa8140237..7776f8552 100644
--- a/packages/core/pipes/pipes-context-creator.ts
+++ b/packages/core/pipes/pipes-context-creator.ts
@@ -64,7 +64,7 @@ export class PipesContextCreator extends ContextCreator {
       return null;
     }
     const instanceHost = instanceWrapper.getInstanceByContextId(
-      this.getContextId(contextId, instanceWrapper),
+      contextId,
       inquirerId,
     );
     return instanceHost && instanceHost.instance;
@@ -98,12 +98,7 @@ export class PipesContextCreator extends ContextCreator {
     const scopedPipeWrappers =
       this.config.getGlobalRequestPipes() as InstanceWrapper[];
     const scopedPipes = iterate(scopedPipeWrappers)
-      .map(wrapper =>
-        wrapper.getInstanceByContextId(
-          this.getContextId(contextId, wrapper),
-          inquirerId,
-        ),
-      )
+      .map(wrapper => wrapper.getInstanceByContextId(contextId, inquirerId))
       .filter(host => !!host)
       .map(host => host.instance)
       .toArray();
diff --git a/packages/core/repl/assign-to-object.util.ts b/packages/core/repl/assign-to-object.util.ts
deleted file mode 100644
index 16f937999..000000000
--- a/packages/core/repl/assign-to-object.util.ts
+++ /dev/null
@@ -1,14 +0,0 @@
-/**
- * Similar to `Object.assign` but copying properties descriptors from `source`
- * as well.
- */
-export function assignToObject<T, U>(target: T, source: U): T & U {
-  Object.defineProperties(
-    target,
-    Object.keys(source).reduce((descriptors, key) => {
-      descriptors[key] = Object.getOwnPropertyDescriptor(source, key);
-      return descriptors;
-    }, Object.create(null)),
-  );
-  return target as T & U;
-}
diff --git a/packages/core/repl/constants.ts b/packages/core/repl/constants.ts
deleted file mode 100644
index 870e2ec51..000000000
--- a/packages/core/repl/constants.ts
+++ /dev/null
@@ -1 +0,0 @@
-export const REPL_INITIALIZED_MESSAGE = 'REPL initialized';
diff --git a/packages/core/repl/index.ts b/packages/core/repl/index.ts
deleted file mode 100644
index 8a399bd09..000000000
--- a/packages/core/repl/index.ts
+++ /dev/null
@@ -1 +0,0 @@
-export * from './repl';
diff --git a/packages/core/repl/native-functions/debug-repl-fn.ts b/packages/core/repl/native-functions/debug-repl-fn.ts
deleted file mode 100644
index 2f1d4a97d..000000000
--- a/packages/core/repl/native-functions/debug-repl-fn.ts
+++ /dev/null
@@ -1,62 +0,0 @@
-import type { Type, InjectionToken } from '@nestjs/common';
-import { clc } from '@nestjs/common/utils/cli-colors.util';
-import { ReplFunction } from '../repl-function';
-import type { ModuleDebugEntry } from '../repl-context';
-import type { ReplFnDefinition } from '../repl.interfaces';
-
-export class DebugReplFn extends ReplFunction {
-  public fnDefinition: ReplFnDefinition = {
-    name: 'debug',
-    description:
-      'Print all registered modules as a list together with their controllers and providers.\nIf the argument is passed in, for example, "debug(MyModule)" then it will only print components of this specific module.',
-    signature: '(moduleCls?: ClassRef | string) => void',
-  };
-
-  action(moduleCls?: Type<unknown> | string): void {
-    this.ctx.writeToStdout('\n');
-
-    if (moduleCls) {
-      const token =
-        typeof moduleCls === 'function' ? moduleCls.name : moduleCls;
-      const moduleEntry = this.ctx.debugRegistry[token];
-      if (!moduleEntry) {
-        return this.logger.error(
-          `"${token}" has not been found in the modules registry`,
-        );
-      }
-      this.printCtrlsAndProviders(token, moduleEntry);
-    } else {
-      Object.keys(this.ctx.debugRegistry).forEach(moduleKey => {
-        this.printCtrlsAndProviders(
-          moduleKey,
-          this.ctx.debugRegistry[moduleKey],
-        );
-      });
-    }
-    this.ctx.writeToStdout('\n');
-  }
-
-  private printCtrlsAndProviders(
-    moduleName: string,
-    moduleDebugEntry: ModuleDebugEntry,
-  ) {
-    this.ctx.writeToStdout(`${clc.green(moduleName)}:\n`);
-    this.printCollection('controllers', moduleDebugEntry['controllers']);
-    this.printCollection('providers', moduleDebugEntry['providers']);
-  }
-
-  private printCollection(
-    title: string,
-    collectionValue: Record<string, InjectionToken>,
-  ) {
-    const collectionEntries = Object.keys(collectionValue);
-    if (collectionEntries.length <= 0) {
-      return;
-    }
-
-    this.ctx.writeToStdout(` ${clc.yellow(`- ${title}`)}:\n`);
-    collectionEntries.forEach(provider =>
-      this.ctx.writeToStdout(`  ${clc.green('◻')} ${provider}\n`),
-    );
-  }
-}
diff --git a/packages/core/repl/native-functions/get-relp-fn.ts b/packages/core/repl/native-functions/get-relp-fn.ts
deleted file mode 100644
index 6de276918..000000000
--- a/packages/core/repl/native-functions/get-relp-fn.ts
+++ /dev/null
@@ -1,17 +0,0 @@
-import type { Type } from '@nestjs/common';
-import { ReplFunction } from '../repl-function';
-import type { ReplFnDefinition } from '../repl.interfaces';
-
-export class GetReplFn extends ReplFunction {
-  public fnDefinition: ReplFnDefinition = {
-    name: 'get',
-    signature: '(token: InjectionToken) => any',
-    description:
-      'Retrieves an instance of either injectable or controller, otherwise, throws exception.',
-    aliases: ['$'],
-  };
-
-  action(token: string | symbol | Function | Type<any>): any {
-    return this.ctx.app.get(token);
-  }
-}
diff --git a/packages/core/repl/native-functions/help-repl-fn.ts b/packages/core/repl/native-functions/help-repl-fn.ts
deleted file mode 100644
index 913ced7ee..000000000
--- a/packages/core/repl/native-functions/help-repl-fn.ts
+++ /dev/null
@@ -1,32 +0,0 @@
-import { iterate } from 'iterare';
-import { clc } from '@nestjs/common/utils/cli-colors.util';
-import { ReplFunction } from '../repl-function';
-import type { ReplFnDefinition } from '../repl.interfaces';
-
-export class HelpReplFn extends ReplFunction {
-  public fnDefinition: ReplFnDefinition = {
-    name: 'help',
-    signature: '() => void',
-    description: 'Display all available REPL native functions.',
-  };
-
-  static buildHelpMessage = ({ name, description }: ReplFnDefinition) =>
-    clc.cyanBright(name) +
-    (description ? ` ${clc.bold('-')} ${description}` : '');
-
-  action(): void {
-    const sortedNativeFunctions = iterate(this.ctx.nativeFunctions)
-      .map(([, nativeFunction]) => nativeFunction.fnDefinition)
-      .toArray()
-      .sort((a, b) => (a.name < b.name ? -1 : 1));
-
-    this.ctx.writeToStdout(
-      `You can call ${clc.bold(
-        '.help',
-      )} on any function listed below (e.g.: ${clc.bold('help.help')}):\n\n` +
-        sortedNativeFunctions.map(HelpReplFn.buildHelpMessage).join('\n') +
-        // Without the following LF the last item won't be displayed
-        '\n',
-    );
-  }
-}
diff --git a/packages/core/repl/native-functions/index.ts b/packages/core/repl/native-functions/index.ts
deleted file mode 100644
index 8799e685d..000000000
--- a/packages/core/repl/native-functions/index.ts
+++ /dev/null
@@ -1,6 +0,0 @@
-export * from './help-repl-fn';
-export * from './get-relp-fn';
-export * from './resolve-repl-fn';
-export * from './select-relp-fn';
-export * from './debug-repl-fn';
-export * from './methods-repl-fn';
diff --git a/packages/core/repl/native-functions/methods-repl-fn.ts b/packages/core/repl/native-functions/methods-repl-fn.ts
deleted file mode 100644
index f44e1916e..000000000
--- a/packages/core/repl/native-functions/methods-repl-fn.ts
+++ /dev/null
@@ -1,32 +0,0 @@
-import type { Type } from '@nestjs/common';
-import { clc } from '@nestjs/common/utils/cli-colors.util';
-import { MetadataScanner } from '../../metadata-scanner';
-import { ReplFunction } from '../repl-function';
-import type { ReplFnDefinition } from '../repl.interfaces';
-
-export class MethodsReplFn extends ReplFunction {
-  public fnDefinition: ReplFnDefinition = {
-    name: 'methods',
-    description:
-      'Display all public methods available on a given provider or controller.',
-    signature: '(token: ClassRef | string) => void',
-  };
-
-  private readonly metadataScanner = new MetadataScanner();
-
-  action(token: Type<unknown> | string): void {
-    const proto =
-      typeof token !== 'function'
-        ? Object.getPrototypeOf(this.ctx.app.get(token))
-        : token?.prototype;
-
-    const methods = this.metadataScanner.getAllMethodNames(proto);
-
-    this.ctx.writeToStdout('\n');
-    this.ctx.writeToStdout(`${clc.green('Methods')}:\n`);
-    methods.forEach(methodName =>
-      this.ctx.writeToStdout(` ${clc.yellow('◻')} ${methodName}\n`),
-    );
-    this.ctx.writeToStdout('\n');
-  }
-}
diff --git a/packages/core/repl/native-functions/resolve-repl-fn.ts b/packages/core/repl/native-functions/resolve-repl-fn.ts
deleted file mode 100644
index fe587682d..000000000
--- a/packages/core/repl/native-functions/resolve-repl-fn.ts
+++ /dev/null
@@ -1,19 +0,0 @@
-import type { Type } from '@nestjs/common';
-import { ReplFunction } from '../repl-function';
-import type { ReplFnDefinition } from '../repl.interfaces';
-
-export class ResolveReplFn extends ReplFunction {
-  public fnDefinition: ReplFnDefinition = {
-    name: 'resolve',
-    description:
-      'Resolves transient or request-scoped instance of either injectable or controller, otherwise, throws exception.',
-    signature: '(token: InjectionToken, contextId: any) => Promise<any>',
-  };
-
-  action(
-    token: string | symbol | Function | Type<any>,
-    contextId: any,
-  ): Promise<any> {
-    return this.ctx.app.resolve(token, contextId);
-  }
-}
diff --git a/packages/core/repl/native-functions/select-relp-fn.ts b/packages/core/repl/native-functions/select-relp-fn.ts
deleted file mode 100644
index f35346cd1..000000000
--- a/packages/core/repl/native-functions/select-relp-fn.ts
+++ /dev/null
@@ -1,20 +0,0 @@
-import type {
-  DynamicModule,
-  INestApplicationContext,
-  Type,
-} from '@nestjs/common';
-import { ReplFunction } from '../repl-function';
-import type { ReplFnDefinition } from '../repl.interfaces';
-
-export class SelectReplFn extends ReplFunction {
-  public fnDefinition: ReplFnDefinition = {
-    name: 'select',
-    description:
-      'Allows navigating through the modules tree, for example, to pull out a specific instance from the selected module.',
-    signature: '(token: DynamicModule | ClassRef) => INestApplicationContext',
-  };
-
-  action(token: DynamicModule | Type<unknown>): INestApplicationContext {
-    return this.ctx.app.select(token);
-  }
-}
diff --git a/packages/core/repl/repl-context.ts b/packages/core/repl/repl-context.ts
deleted file mode 100644
index e3f71b44f..000000000
--- a/packages/core/repl/repl-context.ts
+++ /dev/null
@@ -1,186 +0,0 @@
-import {
-  INestApplicationContext,
-  InjectionToken,
-  Logger,
-} from '@nestjs/common';
-import { ApplicationConfig } from '../application-config';
-import { ModuleRef, NestContainer } from '../injector';
-import { InternalCoreModule } from '../injector/internal-core-module/internal-core-module';
-import { Module } from '../injector/module';
-import {
-  DebugReplFn,
-  GetReplFn,
-  HelpReplFn,
-  MethodsReplFn,
-  ResolveReplFn,
-  SelectReplFn,
-} from './native-functions';
-import { ReplFunction } from './repl-function';
-import type { ReplFunctionClass } from './repl.interfaces';
-
-type ModuleKey = string;
-export type ModuleDebugEntry = {
-  controllers: Record<string, InjectionToken>;
-  providers: Record<string, InjectionToken>;
-};
-
-type ReplScope = Record<string, any>;
-
-export class ReplContext {
-  public readonly logger = new Logger(ReplContext.name);
-  public debugRegistry: Record<ModuleKey, ModuleDebugEntry> = {};
-  public readonly globalScope: ReplScope = Object.create(null);
-  public readonly nativeFunctions = new Map<
-    string,
-    InstanceType<ReplFunctionClass>
-  >();
-  private readonly container: NestContainer;
-
-  constructor(
-    public readonly app: INestApplicationContext,
-    nativeFunctionsClassRefs?: ReplFunctionClass[],
-  ) {
-    this.container = (app as any).container; // Using `any` because `app.container` is not public.
-
-    this.initializeContext();
-    this.initializeNativeFunctions(nativeFunctionsClassRefs || []);
-  }
-
-  public writeToStdout(text: string) {
-    process.stdout.write(text);
-  }
-
-  private initializeContext() {
-    const modules = this.container.getModules();
-
-    modules.forEach(moduleRef => {
-      let moduleName = moduleRef.metatype.name;
-      if (moduleName === InternalCoreModule.name) {
-        return;
-      }
-      if (this.globalScope[moduleName]) {
-        moduleName += ` (${moduleRef.token})`;
-      }
-
-      this.introspectCollection(moduleRef, moduleName, 'providers');
-      this.introspectCollection(moduleRef, moduleName, 'controllers');
-
-      // For in REPL auto-complete functionality
-      Object.defineProperty(this.globalScope, moduleName, {
-        value: moduleRef.metatype,
-        configurable: false,
-        enumerable: true,
-      });
-    });
-  }
-
-  private introspectCollection(
-    moduleRef: Module,
-    moduleKey: ModuleKey,
-    collection: keyof ModuleDebugEntry,
-  ) {
-    const moduleDebugEntry = {};
-    moduleRef[collection].forEach(({ token }) => {
-      const stringifiedToken = this.stringifyToken(token);
-      if (
-        stringifiedToken === ApplicationConfig.name ||
-        stringifiedToken === moduleRef.metatype.name
-      ) {
-        return;
-      }
-
-      if (!this.globalScope[stringifiedToken]) {
-        // For in REPL auto-complete functionality
-        Object.defineProperty(this.globalScope, stringifiedToken, {
-          value: token,
-          configurable: false,
-          enumerable: true,
-        });
-      }
-
-      if (stringifiedToken === ModuleRef.name) {
-        return;
-      }
-
-      moduleDebugEntry[stringifiedToken] = token;
-    });
-
-    this.debugRegistry[moduleKey] = {
-      ...this.debugRegistry?.[moduleKey],
-      [collection]: moduleDebugEntry,
-    };
-  }
-
-  private stringifyToken(token: unknown): string {
-    return typeof token !== 'string'
-      ? typeof token === 'function'
-        ? token.name
-        : token?.toString()
-      : `"${token}"`;
-  }
-
-  private addNativeFunction(
-    NativeFunctionRef: ReplFunctionClass,
-  ): InstanceType<ReplFunctionClass>[] {
-    const nativeFunction = new NativeFunctionRef(this);
-    const nativeFunctions = [nativeFunction];
-
-    this.nativeFunctions.set(nativeFunction.fnDefinition.name, nativeFunction);
-
-    nativeFunction.fnDefinition.aliases?.forEach(aliasName => {
-      const aliasNativeFunction: InstanceType<ReplFunctionClass> =
-        Object.create(nativeFunction);
-      aliasNativeFunction.fnDefinition = {
-        name: aliasName,
-        description: aliasNativeFunction.fnDefinition.description,
-        signature: aliasNativeFunction.fnDefinition.signature,
-      };
-      this.nativeFunctions.set(aliasName, aliasNativeFunction);
-      nativeFunctions.push(aliasNativeFunction);
-    });
-
-    return nativeFunctions;
-  }
-
-  private registerFunctionIntoGlobalScope(
-    nativeFunction: InstanceType<ReplFunctionClass>,
-  ) {
-    // Bind the method to REPL's context:
-    this.globalScope[nativeFunction.fnDefinition.name] =
-      nativeFunction.action.bind(nativeFunction);
-
-    // Load the help trigger as a `help` getter on each native function:
-    const functionBoundRef: ReplFunction['action'] =
-      this.globalScope[nativeFunction.fnDefinition.name];
-    Object.defineProperty(functionBoundRef, 'help', {
-      enumerable: false,
-      configurable: false,
-      get: () =>
-        // Dynamically builds the help message as will unlikely to be called
-        // several times.
-        this.writeToStdout(nativeFunction.makeHelpMessage()),
-    });
-  }
-
-  private initializeNativeFunctions(
-    nativeFunctionsClassRefs: ReplFunctionClass[],
-  ): void {
-    const builtInFunctionsClassRefs: ReplFunctionClass[] = [
-      HelpReplFn,
-      GetReplFn,
-      ResolveReplFn,
-      SelectReplFn,
-      DebugReplFn,
-      MethodsReplFn,
-    ];
-
-    builtInFunctionsClassRefs
-      .concat(nativeFunctionsClassRefs)
-      .forEach(NativeFunction => {
-        const nativeFunctions = this.addNativeFunction(NativeFunction);
-        nativeFunctions.forEach(nativeFunction => {
-          this.registerFunctionIntoGlobalScope(nativeFunction);
-        });
-      });
-  }
-}
diff --git a/packages/core/repl/repl-function.ts b/packages/core/repl/repl-function.ts
deleted file mode 100644
index aa90972c8..000000000
--- a/packages/core/repl/repl-function.ts
+++ /dev/null
@@ -1,36 +0,0 @@
-import { Logger } from '@nestjs/common';
-import { clc } from '@nestjs/common/utils/cli-colors.util';
-import { ReplContext } from './repl-context';
-import type { ReplFnDefinition } from './repl.interfaces';
-
-export abstract class ReplFunction<
-  ActionParams extends Array<unknown> = Array<unknown>,
-  ActionReturn = any,
-> {
-  /** Metadata that describes the built-in function itself. */
-  public abstract fnDefinition: ReplFnDefinition;
-
-  protected readonly logger: Logger;
-
-  constructor(protected readonly ctx: ReplContext) {
-    this.logger = ctx.logger;
-  }
-
-  /**
-   * Method called when the function is invoked from the REPL by the user.
-   */
-  abstract action(...args: ActionParams): ActionReturn;
-
-  /**
-   * @returns A message displayed by calling `<fnName>.help`
-   */
-  public makeHelpMessage(): string {
-    const { description, name, signature } = this.fnDefinition;
-
-    const fnSignatureWithName = `${name}${signature}`;
-
-    return `${clc.yellow(description)}\n${clc.magentaBright(
-      'Interface:',
-    )} ${clc.bold(fnSignatureWithName)}\n`;
-  }
-}
diff --git a/packages/core/repl/repl-logger.ts b/packages/core/repl/repl-logger.ts
deleted file mode 100644
index afaa04316..000000000
--- a/packages/core/repl/repl-logger.ts
+++ /dev/null
@@ -1,20 +0,0 @@
-import { ConsoleLogger } from '@nestjs/common';
-import { NestApplication } from '../nest-application';
-import { RouterExplorer } from '../router/router-explorer';
-import { RoutesResolver } from '../router/routes-resolver';
-
-export class ReplLogger extends ConsoleLogger {
-  private static readonly ignoredContexts = [
-    RoutesResolver.name,
-    RouterExplorer.name,
-    NestApplication.name,
-  ];
-
-  log(_message: any, context?: string) {
-    if (ReplLogger.ignoredContexts.includes(context)) {
-      return;
-    }
-    // eslint-disable-next-line
-    return super.log.apply(this, Array.from(arguments) as [any, string?]);
-  }
-}
diff --git a/packages/core/repl/repl-native-commands.ts b/packages/core/repl/repl-native-commands.ts
deleted file mode 100644
index 5cee6d9ff..000000000
--- a/packages/core/repl/repl-native-commands.ts
+++ /dev/null
@@ -1,50 +0,0 @@
-import type { REPLServer } from 'repl';
-
-/**
- * Displays a list of available commands in the REPL alongside with their
- * descriptions.
- * (c) This code was inspired by the 'help' command from Node.js core:
- * {@link https://github.com/nodejs/node/blob/58b60c1393dd65cd228a8b0084a19acd2c1d16aa/lib/repl.js#L1741-L1759}
- */
-function listAllCommands(replServer: REPLServer) {
-  Object.keys(replServer.commands)
-    .sort()
-    .forEach(name => {
-      const cmd = replServer.commands[name];
-      if (cmd) {
-        replServer.output.write(`${name}\t${cmd.help || ''}\n`);
-      }
-    });
-}
-
-export function defineDefaultCommandsOnRepl(replServer: REPLServer): void {
-  replServer.defineCommand('help', {
-    help: 'Show REPL options',
-    action(name?: string) {
-      this.clearBufferedCommand();
-
-      if (name) {
-        // Considering native commands before native nestjs injected functions.
-        const nativeCommandOrFunction =
-          this.commands[name] || this.context[name];
-        // NOTE: If the command was retrieve from the context, it will have a `help`
-        // getter property that outputs the helper message and returns undefined.
-        // But if the command was retrieve from the `commands` object, it will
-        // have a `help` property that returns the helper message.
-        const helpMessage = nativeCommandOrFunction?.help;
-        if (helpMessage) {
-          this.output.write(`${helpMessage}\n`);
-        }
-      } else {
-        listAllCommands(this);
-        this.output.write('\n\n');
-        this.context.help();
-        this.output.write(
-          '\nPress Ctrl+C to abort current expression, Ctrl+D to exit the REPL\n',
-        );
-      }
-
-      this.displayPrompt();
-    },
-  });
-}
diff --git a/packages/core/repl/repl.interfaces.ts b/packages/core/repl/repl.interfaces.ts
deleted file mode 100644
index ad4b8fd64..000000000
--- a/packages/core/repl/repl.interfaces.ts
+++ /dev/null
@@ -1,21 +0,0 @@
-import type { ReplContext } from './repl-context';
-import type { ReplFunction } from './repl-function';
-
-export type ReplFnDefinition = {
-  /** Function's name. Note that this should be a valid JavaScript function name. */
-  name: string;
-
-  /** Alternative names to the function. */
-  aliases?: ReplFnDefinition['name'][];
-
-  /** Function's description to display when `<function>.help` is entered. */
-  description: string;
-
-  /**
-   * Function's signature following TypeScript _function type expression_ syntax.
-   * @example '(token: InjectionToken) => any'
-   */
-  signature: string;
-};
-
-export type ReplFunctionClass = new (replContext: ReplContext) => ReplFunction;
diff --git a/packages/core/repl/repl.ts b/packages/core/repl/repl.ts
deleted file mode 100644
index 2e021a1e4..000000000
--- a/packages/core/repl/repl.ts
+++ /dev/null
@@ -1,30 +0,0 @@
-import { DynamicModule, Logger, Type } from '@nestjs/common';
-import { clc } from '@nestjs/common/utils/cli-colors.util';
-import { NestFactory } from '../nest-factory';
-import { assignToObject } from './assign-to-object.util';
-import { REPL_INITIALIZED_MESSAGE } from './constants';
-import { ReplContext } from './repl-context';
-import { ReplLogger } from './repl-logger';
-import { defineDefaultCommandsOnRepl } from './repl-native-commands';
-
-export async function repl(module: Type | DynamicModule) {
-  const app = await NestFactory.createApplicationContext(module, {
-    abortOnError: false,
-    logger: new ReplLogger(),
-  });
-  await app.init();
-
-  const replContext = new ReplContext(app);
-  Logger.log(REPL_INITIALIZED_MESSAGE);
-
-  const _repl = await import('repl');
-  const replServer = _repl.start({
-    prompt: clc.green('> '),
-    ignoreUndefined: true,
-  });
-  assignToObject(replServer.context, replContext.globalScope);
-
-  defineDefaultCommandsOnRepl(replServer);
-
-  return replServer;
-}
diff --git a/packages/core/router/interfaces/exclude-route-metadata.interface.ts b/packages/core/router/interfaces/exclude-route-metadata.interface.ts
index b7f93b600..1c143512f 100644
--- a/packages/core/router/interfaces/exclude-route-metadata.interface.ts
+++ b/packages/core/router/interfaces/exclude-route-metadata.interface.ts
@@ -1,11 +1,6 @@
 import { RequestMethod } from '@nestjs/common';
 
 export interface ExcludeRouteMetadata {
-  /**
-   * Route path.
-   */
-  path: string;
-
   /**
    * Regular expression representing the route path.
    */
diff --git a/packages/core/router/paths-explorer.ts b/packages/core/router/paths-explorer.ts
deleted file mode 100644
index 34c9972eb..000000000
--- a/packages/core/router/paths-explorer.ts
+++ /dev/null
@@ -1,84 +0,0 @@
-import {
-  METHOD_METADATA,
-  PATH_METADATA,
-  VERSION_METADATA,
-} from '@nestjs/common/constants';
-import { RequestMethod } from '@nestjs/common/enums';
-import { Controller } from '@nestjs/common/interfaces/controllers/controller.interface';
-import { VersionValue } from '@nestjs/common/interfaces/version-options.interface';
-import {
-  addLeadingSlash,
-  isString,
-  isUndefined,
-} from '@nestjs/common/utils/shared.utils';
-import { MetadataScanner } from '../metadata-scanner';
-import { RouterProxyCallback } from './router-proxy';
-
-export interface RouteDefinition {
-  path: string[];
-  requestMethod: RequestMethod;
-  targetCallback: RouterProxyCallback;
-  methodName: string;
-  version?: VersionValue;
-}
-
-export class PathsExplorer {
-  constructor(private readonly metadataScanner: MetadataScanner) {}
-
-  public scanForPaths(
-    instance: Controller,
-    prototype?: object,
-  ): RouteDefinition[] {
-    const instancePrototype = isUndefined(prototype)
-      ? Object.getPrototypeOf(instance)
-      : prototype;
-
-    return this.metadataScanner
-      .getAllMethodNames(instancePrototype)
-      .reduce((acc, method) => {
-        const route = this.exploreMethodMetadata(
-          instance,
-          instancePrototype,
-          method,
-        );
-
-        if (route) {
-          acc.push(route);
-        }
-
-        return acc;
-      }, []);
-  }
-
-  public exploreMethodMetadata(
-    instance: Controller,
-    prototype: object,
-    methodName: string,
-  ): RouteDefinition | null {
-    const instanceCallback = instance[methodName];
-    const prototypeCallback = prototype[methodName];
-    const routePath = Reflect.getMetadata(PATH_METADATA, prototypeCallback);
-    if (isUndefined(routePath)) {
-      return null;
-    }
-    const requestMethod: RequestMethod = Reflect.getMetadata(
-      METHOD_METADATA,
-      prototypeCallback,
-    );
-    const version: VersionValue | undefined = Reflect.getMetadata(
-      VERSION_METADATA,
-      prototypeCallback,
-    );
-    const path = isString(routePath)
-      ? [addLeadingSlash(routePath)]
-      : routePath.map((p: string) => addLeadingSlash(p));
-
-    return {
-      path,
-      requestMethod,
-      targetCallback: instanceCallback,
-      methodName,
-      version,
-    };
-  }
-}
diff --git a/packages/core/router/route-path-factory.ts b/packages/core/router/route-path-factory.ts
index 78b674161..e53a35b95 100644
--- a/packages/core/router/route-path-factory.ts
+++ b/packages/core/router/route-path-factory.ts
@@ -23,30 +23,18 @@ export class RoutePathFactory {
   ): string[] {
     let paths = [''];
 
-    const versionOrVersions = this.getVersion(metadata);
-    if (
-      versionOrVersions &&
-      metadata.versioningOptions?.type === VersioningType.URI
-    ) {
+    const version = this.getVersion(metadata);
+    if (version && metadata.versioningOptions?.type === VersioningType.URI) {
       const versionPrefix = this.getVersionPrefix(metadata.versioningOptions);
 
-      if (Array.isArray(versionOrVersions)) {
-        paths = flatten(
-          paths.map(path =>
-            versionOrVersions.map(version =>
-              // Version Neutral - Do not include version in URL
-              version === VERSION_NEUTRAL
-                ? path
-                : `${path}/${versionPrefix}${version}`,
-            ),
-          ),
-        );
-      } else {
-        // Version Neutral - Do not include version in URL
-        if (versionOrVersions !== VERSION_NEUTRAL) {
-          paths = paths.map(
-            path => `${path}/${versionPrefix}${versionOrVersions}`,
+      // Version Neutral - Do not include version in URL
+      if (version !== VERSION_NEUTRAL) {
+        if (Array.isArray(version)) {
+          paths = flatten(
+            paths.map(path => version.map(v => path + `/${versionPrefix}${v}`)),
           );
+        } else {
+          paths = paths.map(path => path + `/${versionPrefix}${version}`);
         }
       }
     }
diff --git a/packages/core/router/router-execution-context.ts b/packages/core/router/router-execution-context.ts
index 9e4fa897b..f971cf2df 100644
--- a/packages/core/router/router-execution-context.ts
+++ b/packages/core/router/router-execution-context.ts
@@ -7,7 +7,7 @@ import {
   RequestMethod,
 } from '@nestjs/common';
 import {
-  CUSTOM_ROUTE_ARGS_METADATA,
+  CUSTOM_ROUTE_AGRS_METADATA,
   HEADERS_METADATA,
   HTTP_CODE_METADATA,
   REDIRECT_METADATA,
@@ -21,11 +21,9 @@ import { ContextType, Controller } from '@nestjs/common/interfaces';
 import { isEmpty, isString } from '@nestjs/common/utils/shared.utils';
 import { IncomingMessage } from 'http';
 import { Observable } from 'rxjs';
-import {
-  FORBIDDEN_MESSAGE,
-  GuardsConsumer,
-  GuardsContextCreator,
-} from '../guards';
+import { FORBIDDEN_MESSAGE } from '../guards/constants';
+import { GuardsConsumer } from '../guards/guards-consumer';
+import { GuardsContextCreator } from '../guards/guards-context-creator';
 import { ContextUtils } from '../helpers/context-utils';
 import { ExecutionContextHost } from '../helpers/execution-context-host';
 import {
@@ -299,7 +297,7 @@ export class RouterExecutionContext {
       );
       const type = this.contextUtils.mapParamType(key);
 
-      if (key.includes(CUSTOM_ROUTE_ARGS_METADATA)) {
+      if (key.includes(CUSTOM_ROUTE_AGRS_METADATA)) {
         const { factory } = metadata[key];
         const customExtractValue = this.contextUtils.getCustomFactory(
           factory,
@@ -426,14 +424,14 @@ export class RouterExecutionContext {
         );
       };
     }
-    if (redirectResponse && isString(redirectResponse.url)) {
+    if (redirectResponse && typeof redirectResponse.url === 'string') {
       return async <TResult, TResponse>(result: TResult, res: TResponse) => {
         await this.responseController.redirect(result, res, redirectResponse);
       };
     }
     const isSseHandler = !!this.reflectSse(callback);
     if (isSseHandler) {
-      return <
+      return async <
         TResult extends Observable<unknown> = any,
         TResponse extends HeaderStream = any,
         TRequest extends IncomingMessage = any,
@@ -442,11 +440,10 @@ export class RouterExecutionContext {
         res: TResponse,
         req: TRequest,
       ) => {
-        this.responseController.sse(
+        await this.responseController.sse(
           result,
           (res as any).raw || res,
           (req as any).raw || req,
-          { additionalHeaders: res.getHeaders?.() },
         );
       };
     }
@@ -454,7 +451,6 @@ export class RouterExecutionContext {
       result = await this.responseController.transformToResult(result);
       !isResponseHandled &&
         (await this.responseController.apply(result, res, httpStatusCode));
-      return res;
     };
   }
 
diff --git a/packages/core/router/router-explorer.ts b/packages/core/router/router-explorer.ts
index e7bbc6db1..153bf29b4 100644
--- a/packages/core/router/router-explorer.ts
+++ b/packages/core/router/router-explorer.ts
@@ -1,19 +1,29 @@
 import { HttpServer } from '@nestjs/common';
-import { PATH_METADATA } from '@nestjs/common/constants';
-import { RequestMethod, VersioningType } from '@nestjs/common/enums';
+import {
+  METHOD_METADATA,
+  PATH_METADATA,
+  VERSION_METADATA,
+} from '@nestjs/common/constants';
+import { RequestMethod } from '@nestjs/common/enums/request-method.enum';
+import { VersioningType } from '@nestjs/common/enums/version-type.enum';
 import { InternalServerErrorException } from '@nestjs/common/exceptions';
 import { Controller } from '@nestjs/common/interfaces/controllers/controller.interface';
 import { Type } from '@nestjs/common/interfaces/type.interface';
-import { VersionValue } from '@nestjs/common/interfaces/version-options.interface';
+import {
+  VersionValue,
+  VERSION_NEUTRAL,
+} from '@nestjs/common/interfaces/version-options.interface';
 import { Logger } from '@nestjs/common/services/logger.service';
 import {
   addLeadingSlash,
+  isString,
   isUndefined,
 } from '@nestjs/common/utils/shared.utils';
 import * as pathToRegexp from 'path-to-regexp';
 import { ApplicationConfig } from '../application-config';
 import { UnknownRequestMappingException } from '../errors/exceptions/unknown-request-mapping.exception';
-import { GuardsConsumer, GuardsContextCreator } from '../guards';
+import { GuardsConsumer } from '../guards/guards-consumer';
+import { GuardsContextCreator } from '../guards/guards-context-creator';
 import { ContextIdFactory } from '../helpers/context-id-factory';
 import { ExecutionContextHost } from '../helpers/execution-context-host';
 import {
@@ -26,20 +36,13 @@ import { NestContainer } from '../injector/container';
 import { Injector } from '../injector/injector';
 import { ContextId, InstanceWrapper } from '../injector/instance-wrapper';
 import { Module } from '../injector/module';
-import {
-  InterceptorsConsumer,
-  InterceptorsContextCreator,
-} from '../interceptors';
-import { GraphInspector } from '../inspector/graph-inspector';
-import {
-  Entrypoint,
-  HttpEntrypointMetadata,
-} from '../inspector/interfaces/entrypoint.interface';
+import { InterceptorsConsumer } from '../interceptors/interceptors-consumer';
+import { InterceptorsContextCreator } from '../interceptors/interceptors-context-creator';
 import { MetadataScanner } from '../metadata-scanner';
-import { PipesConsumer, PipesContextCreator } from '../pipes';
+import { PipesConsumer } from '../pipes/pipes-consumer';
+import { PipesContextCreator } from '../pipes/pipes-context-creator';
 import { ExceptionsFilter } from './interfaces/exceptions-filter.interface';
 import { RoutePathMetadata } from './interfaces/route-path-metadata.interface';
-import { PathsExplorer } from './paths-explorer';
 import { REQUEST_CONTEXT_ID } from './request/request-constants';
 import { RouteParamsFactory } from './route-params-factory';
 import { RoutePathFactory } from './route-path-factory';
@@ -56,7 +59,6 @@ export interface RouteDefinition {
 
 export class RouterExplorer {
   private readonly executionContextCreator: RouterExecutionContext;
-  private readonly pathsExplorer: PathsExplorer;
   private readonly routerMethodFactory = new RouterMethodFactory();
   private readonly logger = new Logger(RouterExplorer.name, {
     timestamp: true,
@@ -64,17 +66,14 @@ export class RouterExplorer {
   private readonly exceptionFiltersCache = new WeakMap();
 
   constructor(
-    metadataScanner: MetadataScanner,
+    private readonly metadataScanner: MetadataScanner,
     private readonly container: NestContainer,
-    private readonly injector: Injector,
-    private readonly routerProxy: RouterProxy,
-    private readonly exceptionsFilter: ExceptionsFilter,
-    config: ApplicationConfig,
-    private readonly routePathFactory: RoutePathFactory,
-    private readonly graphInspector: GraphInspector,
+    private readonly injector?: Injector,
+    private readonly routerProxy?: RouterProxy,
+    private readonly exceptionsFilter?: ExceptionsFilter,
+    private readonly config?: ApplicationConfig,
+    private readonly routePathFactory?: RoutePathFactory,
   ) {
-    this.pathsExplorer = new PathsExplorer(metadataScanner);
-
     const routeParamsFactory = new RouteParamsFactory();
     const pipesContextCreator = new PipesContextCreator(container, config);
     const pipesConsumer = new PipesConsumer();
@@ -106,7 +105,7 @@ export class RouterExplorer {
     routePathMetadata: RoutePathMetadata,
   ) {
     const { instance } = instanceWrapper;
-    const routerPaths = this.pathsExplorer.scanForPaths(instance);
+    const routerPaths = this.scanForPaths(instance);
     this.applyPathsToRouterProxy(
       applicationRef,
       routerPaths,
@@ -121,7 +120,7 @@ export class RouterExplorer {
     const path = Reflect.getMetadata(PATH_METADATA, metatype);
 
     if (isUndefined(path)) {
-      throw new UnknownRequestMappingException(metatype);
+      throw new UnknownRequestMappingException();
     }
     if (Array.isArray(path)) {
       return path.map(p => addLeadingSlash(p));
@@ -129,6 +128,53 @@ export class RouterExplorer {
     return [addLeadingSlash(path)];
   }
 
+  public scanForPaths(
+    instance: Controller,
+    prototype?: object,
+  ): RouteDefinition[] {
+    const instancePrototype = isUndefined(prototype)
+      ? Object.getPrototypeOf(instance)
+      : prototype;
+
+    return this.metadataScanner.scanFromPrototype<Controller, RouteDefinition>(
+      instance,
+      instancePrototype,
+      method => this.exploreMethodMetadata(instance, instancePrototype, method),
+    );
+  }
+
+  public exploreMethodMetadata(
+    instance: Controller,
+    prototype: object,
+    methodName: string,
+  ): RouteDefinition {
+    const instanceCallback = instance[methodName];
+    const prototypeCallback = prototype[methodName];
+    const routePath = Reflect.getMetadata(PATH_METADATA, prototypeCallback);
+    if (isUndefined(routePath)) {
+      return null;
+    }
+    const requestMethod: RequestMethod = Reflect.getMetadata(
+      METHOD_METADATA,
+      prototypeCallback,
+    );
+    const version: VersionValue | undefined = Reflect.getMetadata(
+      VERSION_METADATA,
+      prototypeCallback,
+    );
+    const path = isString(routePath)
+      ? [addLeadingSlash(routePath)]
+      : routePath.map((p: string) => addLeadingSlash(p));
+
+    return {
+      path,
+      requestMethod,
+      targetCallback: instanceCallback,
+      methodName,
+      version,
+    };
+  }
+
   public applyPathsToRouterProxy<T extends HttpServer>(
     router: T,
     routeDefinitions: RouteDefinition[],
@@ -213,31 +259,7 @@ export class RouterExplorer {
         routePathMetadata,
         requestMethod,
       );
-      pathsToRegister.forEach(path => {
-        const entrypointDefinition: Entrypoint<HttpEntrypointMetadata> = {
-          type: 'http-endpoint',
-          methodName,
-          className: instanceWrapper.name,
-          classNodeId: instanceWrapper.id,
-          metadata: {
-            key: path,
-            path,
-            requestMethod: RequestMethod[
-              requestMethod
-            ] as keyof typeof RequestMethod,
-            methodVersion: routePathMetadata.methodVersion as VersionValue,
-            controllerVersion:
-              routePathMetadata.controllerVersion as VersionValue,
-          },
-        };
-
-        routerMethodRef(path, routeHandler);
-
-        this.graphInspector.insertEntrypointDefinition<HttpEntrypointMetadata>(
-          entrypointDefinition,
-          instanceWrapper.id,
-        );
-      });
+      pathsToRegister.forEach(path => routerMethodRef(path, routeHandler));
 
       const pathsToLog = this.routePathFactory.create(
         {
@@ -292,13 +314,7 @@ export class RouterExplorer {
       for (const exp of hostRegExps) {
         const match = hostname.match(exp.regexp);
         if (match) {
-          if (exp.keys.length > 0) {
-            exp.keys.forEach((key, i) => (req.hosts[key.name] = match[i + 1]));
-          } else if (exp.regexp && match.groups) {
-            for (const groupName in match.groups) {
-              req.hosts[groupName] = match.groups[groupName];
-            }
-          }
+          exp.keys.forEach((key, i) => (req.hosts[key.name] = match[i + 1]));
           return handler(req, res, next);
         }
       }
@@ -316,12 +332,80 @@ export class RouterExplorer {
     routePathMetadata: RoutePathMetadata,
     handler: Function,
   ) {
+    const { versioningOptions } = routePathMetadata;
     const version = this.routePathFactory.getVersion(routePathMetadata);
-    return router.applyVersionFilter(
-      handler,
-      version,
-      routePathMetadata.versioningOptions,
-    );
+    if (router?.applyVersionFilter) {
+      return router.applyVersionFilter(handler, version, versioningOptions);
+    }
+    /**
+     * This can be removed in the next major release.
+     * Left for backward-compatibility.
+     */
+    return <TRequest extends Record<string, any> = any, TResponse = any>(
+      req: TRequest,
+      res: TResponse,
+      next: () => void,
+    ) => {
+      if (version === VERSION_NEUTRAL) {
+        return handler(req, res, next);
+      }
+      // URL Versioning is done via the path, so the filter continues forward
+      if (versioningOptions.type === VersioningType.URI) {
+        return handler(req, res, next);
+      }
+      // Media Type (Accept Header) Versioning Handler
+      if (versioningOptions.type === VersioningType.MEDIA_TYPE) {
+        const MEDIA_TYPE_HEADER = 'Accept';
+        const acceptHeaderValue: string | undefined =
+          req.headers?.[MEDIA_TYPE_HEADER] ||
+          req.headers?.[MEDIA_TYPE_HEADER.toLowerCase()];
+
+        const acceptHeaderVersionParameter = acceptHeaderValue
+          ? acceptHeaderValue.split(';')[1]
+          : '';
+
+        if (acceptHeaderVersionParameter) {
+          const headerVersion = acceptHeaderVersionParameter.split(
+            versioningOptions.key,
+          )[1];
+
+          if (Array.isArray(version)) {
+            if (version.includes(headerVersion)) {
+              return handler(req, res, next);
+            }
+          } else if (isString(version)) {
+            if (version === headerVersion) {
+              return handler(req, res, next);
+            }
+          }
+        }
+      }
+      // Header Versioning Handler
+      else if (versioningOptions.type === VersioningType.HEADER) {
+        const customHeaderVersionParameter: string | undefined =
+          req.headers?.[versioningOptions.header] ||
+          req.headers?.[versioningOptions.header.toLowerCase()];
+
+        if (customHeaderVersionParameter) {
+          if (Array.isArray(version)) {
+            if (version.includes(customHeaderVersionParameter)) {
+              return handler(req, res, next);
+            }
+          } else if (isString(version)) {
+            if (version === customHeaderVersionParameter) {
+              return handler(req, res, next);
+            }
+          }
+        }
+      }
+
+      if (!next) {
+        throw new InternalServerErrorException(
+          'HTTP adapter does not support filtering on version',
+        );
+      }
+      return next();
+    };
   }
 
   private createCallbackProxy(
@@ -361,16 +445,13 @@ export class RouterExplorer {
   ) {
     const { instance } = instanceWrapper;
     const collection = moduleRef.controllers;
-
-    const isTreeDurable = instanceWrapper.isDependencyTreeDurable();
-
     return async <TRequest extends Record<any, any>, TResponse>(
       req: TRequest,
       res: TResponse,
       next: () => void,
     ) => {
       try {
-        const contextId = this.getContextId(req, isTreeDurable);
+        const contextId = this.getContextId(req);
         const contextInstance = await this.injector.loadPerContext(
           instance,
           moduleRef,
@@ -406,7 +487,6 @@ export class RouterExplorer {
 
   private getContextId<T extends Record<any, unknown> = any>(
     request: T,
-    isTreeDurable: boolean,
   ): ContextId {
     const contextId = ContextIdFactory.getByRequest(request);
     if (!request[REQUEST_CONTEXT_ID as any]) {
@@ -416,9 +496,7 @@ export class RouterExplorer {
         writable: false,
         configurable: false,
       });
-
-      const requestProviderValue = isTreeDurable ? contextId.payload : request;
-      this.container.registerRequestProvider(requestProviderValue, contextId);
+      this.container.registerRequestProvider(request, contextId);
     }
     return contextId;
   }
diff --git a/packages/core/router/router-proxy.ts b/packages/core/router/router-proxy.ts
index 30087b0c1..c1384e545 100644
--- a/packages/core/router/router-proxy.ts
+++ b/packages/core/router/router-proxy.ts
@@ -22,7 +22,6 @@ export class RouterProxy {
       } catch (e) {
         const host = new ExecutionContextHost([req, res, next]);
         exceptionsHandler.next(e, host);
-        return res;
       }
     };
   }
@@ -47,7 +46,6 @@ export class RouterProxy {
       } catch (e) {
         const host = new ExecutionContextHost([req, res, next]);
         exceptionsHandler.next(e, host);
-        return res;
       }
     };
   }
diff --git a/packages/core/router/router-response-controller.ts b/packages/core/router/router-response-controller.ts
index 4128e7fca..aab864095 100644
--- a/packages/core/router/router-response-controller.ts
+++ b/packages/core/router/router-response-controller.ts
@@ -1,19 +1,9 @@
-import {
-  HttpServer,
-  HttpStatus,
-  Logger,
-  RequestMethod,
-  MessageEvent,
-} from '@nestjs/common';
-import { isObject } from '@nestjs/common/utils/shared.utils';
+import { HttpServer, HttpStatus, RequestMethod } from '@nestjs/common';
+import { isFunction, isObject } from '@nestjs/common/utils/shared.utils';
 import { IncomingMessage } from 'http';
-import { EMPTY, lastValueFrom, Observable, isObservable } from 'rxjs';
-import { catchError, debounce, map } from 'rxjs/operators';
-import {
-  AdditionalHeaders,
-  WritableHeaderStream,
-  SseStream,
-} from './sse-stream';
+import { lastValueFrom, Observable } from 'rxjs';
+import { debounce } from 'rxjs/operators';
+import { HeaderStream, SseStream } from './sse-stream';
 
 export interface CustomHeader {
   name: string;
@@ -26,8 +16,6 @@ export interface RedirectResponse {
 }
 
 export class RouterResponseController {
-  private readonly logger = new Logger(RouterResponseController.name);
-
   constructor(private readonly applicationRef: HttpServer) {}
 
   public async apply<TInput = any, TResponse = any>(
@@ -64,7 +52,7 @@ export class RouterResponseController {
   }
 
   public async transformToResult(resultOrDeferred: any) {
-    if (isObservable(resultOrDeferred)) {
+    if (resultOrDeferred && isFunction(resultOrDeferred.subscribe)) {
       return lastValueFrom(resultOrDeferred);
     }
     return resultOrDeferred;
@@ -95,16 +83,11 @@ export class RouterResponseController {
     this.applicationRef.status(response, statusCode);
   }
 
-  public sse<
+  public async sse<
     TInput extends Observable<unknown> = any,
-    TResponse extends WritableHeaderStream = any,
+    TResponse extends HeaderStream = any,
     TRequest extends IncomingMessage = any,
-  >(
-    result: TInput,
-    response: TResponse,
-    request: TRequest,
-    options?: { additionalHeaders: AdditionalHeaders },
-  ) {
+  >(result: TInput, response: TResponse, request: TRequest) {
     // It's possible that we sent headers already so don't use a stream
     if (response.writableEnded) {
       return;
@@ -113,33 +96,19 @@ export class RouterResponseController {
     this.assertObservable(result);
 
     const stream = new SseStream(request);
-    stream.pipe(response, options);
+    stream.pipe(response);
 
     const subscription = result
       .pipe(
-        map((message): MessageEvent => {
-          if (isObject(message)) {
-            return message as MessageEvent;
-          }
-
-          return { data: message as object | string };
-        }),
         debounce(
-          message =>
-            new Promise<void>(resolve =>
-              stream.writeMessage(message, () => resolve()),
-            ),
+          (message: any) =>
+            new Promise(resolve => {
+              if (!isObject(message)) {
+                message = { data: message };
+              }
+              stream.writeMessage(message, resolve);
+            }),
         ),
-        catchError(err => {
-          const data = err instanceof Error ? err.message : err;
-          stream.writeMessage({ type: 'error', data }, writeError => {
-            if (writeError) {
-              this.logger.error(writeError);
-            }
-          });
-
-          return EMPTY;
-        }),
       )
       .subscribe({
         complete: () => {
@@ -152,8 +121,8 @@ export class RouterResponseController {
     });
   }
 
-  private assertObservable(value: any) {
-    if (!isObservable(value)) {
+  private assertObservable(result: any) {
+    if (!isFunction(result.subscribe)) {
       throw new ReferenceError(
         'You must return an Observable stream to use Server-Sent Events (SSE).',
       );
diff --git a/packages/core/router/routes-resolver.ts b/packages/core/router/routes-resolver.ts
index e03ade389..f342df916 100644
--- a/packages/core/router/routes-resolver.ts
+++ b/packages/core/router/routes-resolver.ts
@@ -4,12 +4,9 @@ import {
   MODULE_PATH,
   VERSION_METADATA,
 } from '@nestjs/common/constants';
-import {
-  Controller,
-  HttpServer,
-  Type,
-  VersionValue,
-} from '@nestjs/common/interfaces';
+import { HttpServer, Type } from '@nestjs/common/interfaces';
+import { Controller } from '@nestjs/common/interfaces/controllers/controller.interface';
+import { VersionValue } from '@nestjs/common/interfaces/version-options.interface';
 import { Logger } from '@nestjs/common/services/logger.service';
 import { ApplicationConfig } from '../application-config';
 import {
@@ -19,7 +16,6 @@ import {
 import { NestContainer } from '../injector/container';
 import { Injector } from '../injector/injector';
 import { InstanceWrapper } from '../injector/instance-wrapper';
-import { GraphInspector } from '../inspector/graph-inspector';
 import { MetadataScanner } from '../metadata-scanner';
 import { Resolver } from './interfaces/resolver.interface';
 import { RoutePathMetadata } from './interfaces/route-path-metadata.interface';
@@ -41,7 +37,6 @@ export class RoutesResolver implements Resolver {
     private readonly container: NestContainer,
     private readonly applicationConfig: ApplicationConfig,
     private readonly injector: Injector,
-    graphInspector: GraphInspector,
   ) {
     const httpAdapterRef = container.getHttpAdapterRef();
     this.routerExceptionsFilter = new RouterExceptionFilters(
@@ -60,7 +55,6 @@ export class RoutesResolver implements Resolver {
       this.routerExceptionsFilter,
       this.applicationConfig,
       this.routePathFactory,
-      graphInspector,
     );
   }
 
@@ -180,10 +174,7 @@ export class RoutesResolver implements Resolver {
 
   public mapExternalException(err: any) {
     switch (true) {
-      // SyntaxError is thrown by Express body-parser when given invalid JSON (#422, #430)
-      // URIError is thrown by Express when given a path parameter with an invalid percentage
-      // encoding, e.g. '%FF' (#8915)
-      case err instanceof SyntaxError || err instanceof URIError:
+      case err instanceof SyntaxError:
         return new BadRequestException(err.message);
       default:
         return err;
diff --git a/packages/core/router/sse-stream.ts b/packages/core/router/sse-stream.ts
index 3bf666c03..489b7bc67 100644
--- a/packages/core/router/sse-stream.ts
+++ b/packages/core/router/sse-stream.ts
@@ -1,10 +1,9 @@
 import { MessageEvent } from '@nestjs/common/interfaces';
-import { isObject } from '@nestjs/common/utils/shared.utils';
 import { IncomingMessage, OutgoingHttpHeaders } from 'http';
 import { Transform } from 'stream';
 
 function toDataString(data: string | object): string {
-  if (isObject(data)) {
+  if (typeof data === 'object') {
     return toDataString(JSON.stringify(data));
   }
 
@@ -14,15 +13,6 @@ function toDataString(data: string | object): string {
     .join('');
 }
 
-export type AdditionalHeaders = Record<
-  string,
-  string[] | string | number | undefined
->;
-
-interface ReadHeaders {
-  getHeaders?(): AdditionalHeaders;
-}
-
 interface WriteHeaders {
   writableEnded?: boolean;
   writeHead?(
@@ -34,8 +24,7 @@ interface WriteHeaders {
   flushHeaders?(): void;
 }
 
-export type WritableHeaderStream = NodeJS.WritableStream & WriteHeaders;
-export type HeaderStream = WritableHeaderStream & ReadHeaders;
+export type HeaderStream = NodeJS.WritableStream & WriteHeaders;
 
 /**
  * Adapted from https://raw.githubusercontent.com/EventSource/node-ssestream
@@ -62,16 +51,9 @@ export class SseStream extends Transform {
     }
   }
 
-  pipe<T extends WritableHeaderStream>(
-    destination: T,
-    options?: {
-      additionalHeaders?: AdditionalHeaders;
-      end?: boolean;
-    },
-  ): T {
+  pipe<T extends HeaderStream>(destination: T, options?: { end?: boolean }): T {
     if (destination.writeHead) {
       destination.writeHead(200, {
-        ...options?.additionalHeaders,
         // See https://github.com/dunglas/mercure/blob/master/hub/subscribe.go#L124-L130
         'Content-Type': 'text/event-stream',
         Connection: 'keep-alive',
@@ -86,7 +68,7 @@ export class SseStream extends Transform {
       destination.flushHeaders();
     }
 
-    destination.write('\n');
+    destination.write(':\n');
     return super.pipe(destination, options);
   }
 
diff --git a/packages/core/router/utils/exclude-route.util.ts b/packages/core/router/utils/exclude-route.util.ts
index 8670f18f4..798260bf2 100644
--- a/packages/core/router/utils/exclude-route.util.ts
+++ b/packages/core/router/utils/exclude-route.util.ts
@@ -1,5 +1,4 @@
 import { RequestMethod } from '@nestjs/common';
-import { addLeadingSlash } from '@nestjs/common/utils/shared.utils';
 import { ExcludeRouteMetadata } from '../interfaces/exclude-route-metadata.interface';
 
 export const isRequestMethodAll = (method: RequestMethod) => {
@@ -16,7 +15,7 @@ export function isRouteExcluded(
       isRequestMethodAll(route.requestMethod) ||
       route.requestMethod === requestMethod
     ) {
-      return route.pathRegex.exec(addLeadingSlash(path));
+      return route.pathRegex.exec(path);
     }
     return false;
   });
diff --git a/packages/core/router/utils/flatten-route-paths.util.ts b/packages/core/router/utils/flatten-route-paths.util.ts
index cbb411f25..40b843408 100644
--- a/packages/core/router/utils/flatten-route-paths.util.ts
+++ b/packages/core/router/utils/flatten-route-paths.util.ts
@@ -1,4 +1,4 @@
-import { normalizePath, isString } from '@nestjs/common/utils/shared.utils';
+import { normalizePath } from '@nestjs/common/utils/shared.utils';
 import { Routes } from '../interfaces/routes.interface';
 
 export function flattenRoutePaths(routes: Routes) {
@@ -10,7 +10,7 @@ export function flattenRoutePaths(routes: Routes) {
     if (item.children) {
       const childrenRef = item.children as Routes;
       childrenRef.forEach(child => {
-        if (!isString(child) && child.path) {
+        if (typeof child !== 'string' && child.path) {
           child.path = normalizePath(
             normalizePath(item.path) + normalizePath(child.path),
           );
diff --git a/packages/core/scanner.ts b/packages/core/scanner.ts
index f11f4432e..53300858d 100644
--- a/packages/core/scanner.ts
+++ b/packages/core/scanner.ts
@@ -1,12 +1,13 @@
-import { DynamicModule, ForwardReference, Provider } from '@nestjs/common';
 import {
-  CATCH_WATERMARK,
-  CONTROLLER_WATERMARK,
-  EnhancerSubtype,
-  ENHANCER_KEY_TO_SUBTYPE_MAP,
+  Abstract,
+  DynamicModule,
+  flatten,
+  ForwardReference,
+  Provider,
+} from '@nestjs/common';
+import {
   EXCEPTION_FILTERS_METADATA,
   GUARDS_METADATA,
-  INJECTABLE_WATERMARK,
   INTERCEPTORS_METADATA,
   MODULE_METADATA,
   PIPES_METADATA,
@@ -15,18 +16,18 @@ import {
 import {
   CanActivate,
   ClassProvider,
-  Controller,
   ExceptionFilter,
   ExistingProvider,
   FactoryProvider,
-  Injectable,
-  InjectionToken,
   NestInterceptor,
   PipeTransform,
   Scope,
-  Type,
   ValueProvider,
 } from '@nestjs/common/interfaces';
+import { Controller } from '@nestjs/common/interfaces/controllers/controller.interface';
+import { Injectable } from '@nestjs/common/interfaces/injectable.interface';
+import { Type } from '@nestjs/common/interfaces/type.interface';
+import { randomStringGenerator } from '@nestjs/common/utils/random-string-generator.util';
 import {
   isFunction,
   isNil,
@@ -34,33 +35,42 @@ import {
 } from '@nestjs/common/utils/shared.utils';
 import { iterate } from 'iterare';
 import { ApplicationConfig } from './application-config';
-import {
-  APP_FILTER,
-  APP_GUARD,
-  APP_INTERCEPTOR,
-  APP_PIPE,
-  ENHANCER_TOKEN_TO_SUBTYPE_MAP,
-} from './constants';
+import { APP_FILTER, APP_GUARD, APP_INTERCEPTOR, APP_PIPE } from './constants';
 import { CircularDependencyException } from './errors/exceptions/circular-dependency.exception';
-import { InvalidClassModuleException } from './errors/exceptions/invalid-class-module.exception';
 import { InvalidModuleException } from './errors/exceptions/invalid-module.exception';
 import { UndefinedModuleException } from './errors/exceptions/undefined-module.exception';
 import { getClassScope } from './helpers/get-class-scope';
 import { NestContainer } from './injector/container';
 import { InstanceWrapper } from './injector/instance-wrapper';
-import { InternalCoreModuleFactory } from './injector/internal-core-module/internal-core-module-factory';
+import { InternalCoreModuleFactory } from './injector/internal-core-module-factory';
 import { Module } from './injector/module';
-import { GraphInspector } from './inspector/graph-inspector';
-import { UuidFactory } from './inspector/uuid-factory';
 import { MetadataScanner } from './metadata-scanner';
 
 interface ApplicationProviderWrapper {
   moduleKey: string;
   providerKey: string;
-  type: InjectionToken;
+  type: string | symbol | Type<any> | Abstract<any> | Function;
   scope?: Scope;
 }
 
+export type ModuleDefinition =
+  | ForwardReference
+  | Type<unknown>
+  | DynamicModule
+  | Promise<DynamicModule>;
+
+export interface ModuleToOverride {
+  moduleToReplace: ModuleDefinition;
+  newModule: ModuleDefinition;
+}
+
+interface ModulesScanParamaters {
+  moduleDefinition: ModuleDefinition;
+  scope?: Type<unknown>[];
+  ctxRegistry?: (ForwardReference | DynamicModule | Type<unknown>)[];
+  modulesToOverride?: ModuleToOverride[];
+}
+
 export class DependenciesScanner {
   private readonly applicationProvidersApplyMap: ApplicationProviderWrapper[] =
     [];
@@ -68,13 +78,12 @@ export class DependenciesScanner {
   constructor(
     private readonly container: NestContainer,
     private readonly metadataScanner: MetadataScanner,
-    private readonly graphInspector: GraphInspector,
     private readonly applicationConfig = new ApplicationConfig(),
   ) {}
 
-  public async scan(module: Type<any>) {
-    await this.registerCoreModule();
-    await this.scanForModules(module);
+  public async scan(module: Type<any>, modulesToOverride?: ModuleToOverride[]) {
+    await this.registerCoreModule(modulesToOverride);
+    await this.scanForModules({ moduleDefinition: module, modulesToOverride });
     await this.scanModulesForDependencies();
     this.calculateModulesDistance();
 
@@ -82,16 +91,20 @@ export class DependenciesScanner {
     this.container.bindGlobalScope();
   }
 
-  public async scanForModules(
-    moduleDefinition:
-      | ForwardReference
-      | Type<unknown>
-      | DynamicModule
-      | Promise<DynamicModule>,
-    scope: Type<unknown>[] = [],
-    ctxRegistry: (ForwardReference | DynamicModule | Type<unknown>)[] = [],
-  ): Promise<Module[]> {
-    const moduleInstance = await this.insertModule(moduleDefinition, scope);
+  public async scanForModules({
+    moduleDefinition,
+    scope = [],
+    ctxRegistry = [],
+    modulesToOverride = [],
+  }: ModulesScanParamaters): Promise<Module[]> {
+    const moduleInstance = await this.putModule(
+      moduleDefinition,
+      modulesToOverride,
+      scope,
+    );
+    moduleDefinition =
+      this.getOverrideModuleByModule(moduleDefinition, modulesToOverride)
+        ?.newModule ?? moduleDefinition;
     moduleDefinition =
       moduleDefinition instanceof Promise
         ? await moduleDefinition
@@ -105,13 +118,13 @@ export class DependenciesScanner {
       moduleDefinition as Type<any> | DynamicModule,
     )
       ? this.reflectMetadata(
-          MODULE_METADATA.IMPORTS,
           moduleDefinition as Type<any>,
+          MODULE_METADATA.IMPORTS,
         )
       : [
           ...this.reflectMetadata(
-            MODULE_METADATA.IMPORTS,
             (moduleDefinition as DynamicModule).module,
+            MODULE_METADATA.IMPORTS,
           ),
           ...((moduleDefinition as DynamicModule).imports || []),
         ];
@@ -128,11 +141,12 @@ export class DependenciesScanner {
       if (ctxRegistry.includes(innerModule)) {
         continue;
       }
-      const moduleRefs = await this.scanForModules(
-        innerModule,
-        [].concat(scope, moduleDefinition),
+      const moduleRefs = await this.scanForModules({
+        moduleDefinition: innerModule,
+        scope: [].concat(scope, moduleDefinition),
         ctxRegistry,
-      );
+        modulesToOverride,
+      });
       registeredModuleRefs = registeredModuleRefs.concat(moduleRefs);
     }
     if (!moduleInstance) {
@@ -142,22 +156,13 @@ export class DependenciesScanner {
   }
 
   public async insertModule(
-    moduleDefinition: any,
+    module: any,
     scope: Type<unknown>[],
   ): Promise<Module | undefined> {
-    const moduleToAdd = this.isForwardReference(moduleDefinition)
-      ? moduleDefinition.forwardRef()
-      : moduleDefinition;
-
-    if (
-      this.isInjectable(moduleToAdd) ||
-      this.isController(moduleToAdd) ||
-      this.isExceptionFilter(moduleToAdd)
-    ) {
-      throw new InvalidClassModuleException(moduleDefinition, scope);
+    if (module && module.forwardRef) {
+      return this.container.addModule(module.forwardRef(), scope);
     }
-
-    return this.container.addModule(moduleToAdd, scope);
+    return this.container.addModule(module, scope);
   }
 
   public async scanModulesForDependencies(
@@ -177,7 +182,7 @@ export class DependenciesScanner {
     context: string,
   ) {
     const modules = [
-      ...this.reflectMetadata(MODULE_METADATA.IMPORTS, module),
+      ...this.reflectMetadata(module, MODULE_METADATA.IMPORTS),
       ...this.container.getDynamicMetadataByToken(
         token,
         MODULE_METADATA.IMPORTS as 'imports',
@@ -190,7 +195,7 @@ export class DependenciesScanner {
 
   public reflectProviders(module: Type<any>, token: string) {
     const providers = [
-      ...this.reflectMetadata(MODULE_METADATA.PROVIDERS, module),
+      ...this.reflectMetadata(module, MODULE_METADATA.PROVIDERS),
       ...this.container.getDynamicMetadataByToken(
         token,
         MODULE_METADATA.PROVIDERS as 'providers',
@@ -204,7 +209,7 @@ export class DependenciesScanner {
 
   public reflectControllers(module: Type<any>, token: string) {
     const controllers = [
-      ...this.reflectMetadata(MODULE_METADATA.CONTROLLERS, module),
+      ...this.reflectMetadata(module, MODULE_METADATA.CONTROLLERS),
       ...this.container.getDynamicMetadataByToken(
         token,
         MODULE_METADATA.CONTROLLERS as 'controllers',
@@ -216,20 +221,20 @@ export class DependenciesScanner {
     });
   }
 
-  public reflectDynamicMetadata(cls: Type<Injectable>, token: string) {
-    if (!cls || !cls.prototype) {
+  public reflectDynamicMetadata(obj: Type<Injectable>, token: string) {
+    if (!obj || !obj.prototype) {
       return;
     }
-    this.reflectInjectables(cls, token, GUARDS_METADATA);
-    this.reflectInjectables(cls, token, INTERCEPTORS_METADATA);
-    this.reflectInjectables(cls, token, EXCEPTION_FILTERS_METADATA);
-    this.reflectInjectables(cls, token, PIPES_METADATA);
-    this.reflectParamInjectables(cls, token, ROUTE_ARGS_METADATA);
+    this.reflectInjectables(obj, token, GUARDS_METADATA);
+    this.reflectInjectables(obj, token, INTERCEPTORS_METADATA);
+    this.reflectInjectables(obj, token, EXCEPTION_FILTERS_METADATA);
+    this.reflectInjectables(obj, token, PIPES_METADATA);
+    this.reflectParamInjectables(obj, token, ROUTE_ARGS_METADATA);
   }
 
   public reflectExports(module: Type<unknown>, token: string) {
     const exports = [
-      ...this.reflectMetadata(MODULE_METADATA.EXPORTS, module),
+      ...this.reflectMetadata(module, MODULE_METADATA.EXPORTS),
       ...this.container.getDynamicMetadataByToken(
         token,
         MODULE_METADATA.EXPORTS as 'exports',
@@ -245,45 +250,23 @@ export class DependenciesScanner {
     token: string,
     metadataKey: string,
   ) {
-    const controllerInjectables = this.reflectMetadata<Type<Injectable>>(
-      metadataKey,
-      component,
+    const controllerInjectables = this.reflectMetadata(component, metadataKey);
+    const methodsInjectables = this.metadataScanner.scanFromPrototype(
+      null,
+      component.prototype,
+      this.reflectKeyMetadata.bind(this, component, metadataKey),
     );
-    const methodInjectables = this.metadataScanner
-      .getAllMethodNames(component.prototype)
-      .reduce((acc, method) => {
-        const methodInjectable = this.reflectKeyMetadata(
-          component,
-          metadataKey,
-          method,
-        );
-
-        if (methodInjectable) {
-          acc.push(methodInjectable);
-        }
 
-        return acc;
-      }, []);
+    const flattenMethodsInjectables = this.flatten(methodsInjectables);
+    const combinedInjectables = [
+      ...controllerInjectables,
+      ...flattenMethodsInjectables,
+    ].filter(isFunction);
+    const injectables = Array.from(new Set(combinedInjectables));
 
-    controllerInjectables.forEach(injectable =>
-      this.insertInjectable(
-        injectable,
-        token,
-        component,
-        ENHANCER_KEY_TO_SUBTYPE_MAP[metadataKey],
-      ),
+    injectables.forEach(injectable =>
+      this.insertInjectable(injectable, token, component),
     );
-    methodInjectables.forEach(methodInjectable => {
-      methodInjectable.metadata.forEach(injectable =>
-        this.insertInjectable(
-          injectable,
-          token,
-          component,
-          ENHANCER_KEY_TO_SUBTYPE_MAP[metadataKey],
-          methodInjectable.methodKey,
-        ),
-      );
-    });
   }
 
   public reflectParamInjectables(
@@ -291,56 +274,32 @@ export class DependenciesScanner {
     token: string,
     metadataKey: string,
   ) {
-    const paramsMethods = this.metadataScanner.getAllMethodNames(
+    const paramsMetadata = this.metadataScanner.scanFromPrototype(
+      null,
       component.prototype,
+      method => Reflect.getMetadata(metadataKey, component, method),
+    );
+    const paramsInjectables = this.flatten(paramsMetadata).map(
+      (param: Record<string, any>) =>
+        flatten(Object.keys(param).map(k => param[k].pipes)).filter(isFunction),
+    );
+    flatten(paramsInjectables).forEach((injectable: Type<Injectable>) =>
+      this.insertInjectable(injectable, token, component),
     );
-
-    paramsMethods.forEach(methodKey => {
-      const metadata: Record<
-        string,
-        {
-          index: number;
-          data: unknown;
-          pipes: Array<Type<PipeTransform> | PipeTransform>;
-        }
-      > = Reflect.getMetadata(metadataKey, component, methodKey);
-
-      if (!metadata) {
-        return;
-      }
-
-      const params = Object.values(metadata);
-      params
-        .map(item => item.pipes)
-        .flat(1)
-        .forEach(injectable =>
-          this.insertInjectable(
-            injectable,
-            token,
-            component,
-            'pipe',
-            methodKey,
-          ),
-        );
-    });
   }
 
   public reflectKeyMetadata(
     component: Type<Injectable>,
     key: string,
-    methodKey: string,
-  ): { methodKey: string; metadata: any } | undefined {
+    method: string,
+  ) {
     let prototype = component.prototype;
     do {
-      const descriptor = Reflect.getOwnPropertyDescriptor(prototype, methodKey);
+      const descriptor = Reflect.getOwnPropertyDescriptor(prototype, method);
       if (!descriptor) {
         continue;
       }
-      const metadata = Reflect.getMetadata(key, descriptor.value);
-      if (!metadata) {
-        return;
-      }
-      return { methodKey, metadata };
+      return Reflect.getMetadata(key, descriptor.value);
     } while (
       (prototype = Reflect.getPrototypeOf(prototype)) &&
       prototype !== Object.prototype &&
@@ -349,7 +308,7 @@ export class DependenciesScanner {
     return undefined;
   }
 
-  public calculateModulesDistance() {
+  public async calculateModulesDistance() {
     const modulesGenerator = this.container.getModules().values();
 
     // Skip "InternalCoreModule" from calculating distance
@@ -357,7 +316,7 @@ export class DependenciesScanner {
 
     const modulesStack = [];
     const calculateDistance = (moduleRef: Module, distance = 1) => {
-      if (!moduleRef || modulesStack.includes(moduleRef)) {
+      if (modulesStack.includes(moduleRef)) {
         return;
       }
       modulesStack.push(moduleRef);
@@ -379,7 +338,7 @@ export class DependenciesScanner {
     if (isUndefined(related)) {
       throw new CircularDependencyException(context);
     }
-    if (this.isForwardReference(related)) {
+    if (related && related.forwardRef) {
       return this.container.addImport(related.forwardRef(), token);
     }
     await this.container.addImport(related, token);
@@ -413,8 +372,9 @@ export class DependenciesScanner {
     if (!providersKeys.includes(type as string)) {
       return this.container.addProvider(provider as any, token);
     }
-    const uuid = UuidFactory.get(type.toString());
-    const providerToken = `${type as string} (UUID: ${uuid})`;
+    const providerToken = `${
+      type as string
+    } (UUID: ${randomStringGenerator()})`;
 
     let scope = (provider as ClassProvider | FactoryProvider).scope;
     if (isNil(scope) && (provider as ClassProvider).useClass) {
@@ -433,56 +393,21 @@ export class DependenciesScanner {
       scope,
     } as Provider;
 
-    const enhancerSubtype =
-      ENHANCER_TOKEN_TO_SUBTYPE_MAP[
-        type as
-          | typeof APP_GUARD
-          | typeof APP_PIPE
-          | typeof APP_FILTER
-          | typeof APP_INTERCEPTOR
-      ];
     const factoryOrClassProvider = newProvider as
       | FactoryProvider
       | ClassProvider;
     if (this.isRequestOrTransient(factoryOrClassProvider.scope)) {
-      return this.container.addInjectable(newProvider, token, enhancerSubtype);
+      return this.container.addInjectable(newProvider, token);
     }
-    this.container.addProvider(newProvider, token, enhancerSubtype);
+    this.container.addProvider(newProvider, token);
   }
 
   public insertInjectable(
-    injectable: Type<Injectable> | object,
+    injectable: Type<Injectable>,
     token: string,
     host: Type<Injectable>,
-    subtype: EnhancerSubtype,
-    methodKey?: string,
   ) {
-    if (isFunction(injectable)) {
-      const instanceWrapper = this.container.addInjectable(
-        injectable as Type,
-        token,
-        subtype,
-        host,
-      ) as InstanceWrapper;
-
-      this.graphInspector.insertEnhancerMetadataCache({
-        moduleToken: token,
-        classRef: host,
-        enhancerInstanceWrapper: instanceWrapper,
-        targetNodeId: instanceWrapper.id,
-        subtype,
-        methodKey,
-      });
-      return instanceWrapper;
-    } else {
-      this.graphInspector.insertEnhancerMetadataCache({
-        moduleToken: token,
-        classRef: host,
-        enhancerRef: injectable,
-        methodKey,
-        subtype,
-      });
-    }
+    this.container.addInjectable(injectable, token, host);
   }
 
   public insertExportedProvider(
@@ -496,22 +421,22 @@ export class DependenciesScanner {
     this.container.addController(controller, token);
   }
 
-  public reflectMetadata<T = any>(
-    metadataKey: string,
-    metatype: Type<any>,
-  ): T[] {
+  public reflectMetadata(metatype: Type<any>, metadataKey: string) {
     return Reflect.getMetadata(metadataKey, metatype) || [];
   }
 
-  public async registerCoreModule() {
+  public async registerCoreModule(modulesToOverride?: ModuleToOverride[]) {
     const moduleDefinition = InternalCoreModuleFactory.create(
       this.container,
       this,
       this.container.getModuleCompiler(),
       this.container.getHttpAdapterHostRef(),
-      this.graphInspector,
+      modulesToOverride,
     );
-    const [instance] = await this.scanForModules(moduleDefinition);
+    const [instance] = await this.scanForModules({
+      moduleDefinition,
+      modulesToOverride,
+    });
     this.container.registerCoreModuleRef(instance);
   }
 
@@ -527,16 +452,11 @@ export class DependenciesScanner {
         const { injectables } = modulesContainer.get(moduleKey);
         const instanceWrapper = injectables.get(providerKey);
 
-        const iterableIterator = modulesContainer.values();
-        iterate(iterableIterator)
-          .map(moduleRef =>
-            Array.from<InstanceWrapper>(moduleRef.controllers.values()).concat(
-              moduleRef.entryProviders,
-            ),
-          )
+        iterate(modulesContainer.values())
+          .map(module => module.controllers.values())
           .flatten()
-          .forEach(controllerOrEntryProvider =>
-            controllerOrEntryProvider.addEnhancerMetadata(instanceWrapper),
+          .forEach(controller =>
+            controller.addEnhancerMetadata(instanceWrapper),
           );
       });
   }
@@ -565,8 +485,6 @@ export class DependenciesScanner {
             providerKey,
             'injectables',
           );
-
-          this.graphInspector.insertAttachedEnhancer(instanceWrapper);
           return applyRequestProvidersMap[type as string](instanceWrapper);
         }
         instanceWrapper = getInstanceWrapper(
@@ -574,7 +492,6 @@ export class DependenciesScanner {
           providerKey,
           'providers',
         );
-        this.graphInspector.insertAttachedEnhancer(instanceWrapper);
         applyProvidersMap[type as string](instanceWrapper.instance);
       },
     );
@@ -612,37 +529,71 @@ export class DependenciesScanner {
     return module && !!(module as DynamicModule).module;
   }
 
-  /**
-   * @param metatype
-   * @returns `true` if `metatype` is annotated with the `@Injectable()` decorator.
-   */
-  private isInjectable(metatype: Type<any>): boolean {
-    return !!Reflect.getMetadata(INJECTABLE_WATERMARK, metatype);
+  public isForwardReference(
+    module: Type<any> | DynamicModule | ForwardReference,
+  ): module is ForwardReference {
+    return module && !!(module as ForwardReference).forwardRef;
   }
 
-  /**
-   * @param metatype
-   * @returns `true` if `metatype` is annotated with the `@Controller()` decorator.
-   */
-  private isController(metatype: Type<any>): boolean {
-    return !!Reflect.getMetadata(CONTROLLER_WATERMARK, metatype);
+  private flatten<T = any>(arr: T[][]): T[] {
+    return arr.reduce((a: T[], b: T[]) => a.concat(b), []);
   }
 
-  /**
-   * @param metatype
-   * @returns `true` if `metatype` is annotated with the `@Catch()` decorator.
-   */
-  private isExceptionFilter(metatype: Type<any>): boolean {
-    return !!Reflect.getMetadata(CATCH_WATERMARK, metatype);
+  private isRequestOrTransient(scope: Scope): boolean {
+    return scope === Scope.REQUEST || scope === Scope.TRANSIENT;
   }
 
-  private isForwardReference(
-    module: Type<any> | DynamicModule | ForwardReference,
-  ): module is ForwardReference {
-    return module && !!(module as ForwardReference).forwardRef;
+  private putModule(
+    moduleDefinition: ModuleDefinition,
+    modulesToOverride: ModuleToOverride[],
+    scope: Type<unknown>[],
+  ): Promise<Module | undefined> {
+    const overrideModule = this.getOverrideModuleByModule(
+      moduleDefinition,
+      modulesToOverride,
+    );
+    if (overrideModule !== undefined) {
+      return this.overrideModule(
+        moduleDefinition,
+        overrideModule.newModule,
+        scope,
+      );
+    }
+
+    return this.insertModule(moduleDefinition, scope);
   }
 
-  private isRequestOrTransient(scope: Scope): boolean {
-    return scope === Scope.REQUEST || scope === Scope.TRANSIENT;
+  // The 'any' definition and castings is related to forward reference, there is a better way do this?
+  private getOverrideModuleByModule(
+    module: ModuleDefinition | any,
+    modulesToOverride: ModuleToOverride[],
+  ): ModuleToOverride | undefined {
+    if (this.isForwardReference(module)) {
+      return modulesToOverride.find(moduleToOverride => {
+        return (
+          moduleToOverride.moduleToReplace === module.forwardRef() ||
+          (moduleToOverride.moduleToReplace as any).forwardRef?.() ===
+            module.forwardRef()
+        );
+      });
+    }
+
+    return modulesToOverride.find(
+      moduleToOverride => moduleToOverride.moduleToReplace === module,
+    );
+  }
+
+  private async overrideModule(
+    moduleToOverride: any,
+    newModule: any,
+    scope: Type<unknown>[],
+  ): Promise<Module | undefined> {
+    return this.container.replaceModule(
+      this.isForwardReference(moduleToOverride)
+        ? moduleToOverride.forwardRef()
+        : moduleToOverride,
+      this.isForwardReference(newModule) ? newModule.forwardRef() : newModule,
+      scope,
+    );
   }
 }
diff --git a/packages/core/services/reflector.service.ts b/packages/core/services/reflector.service.ts
index 52cd4964d..fd5a2d77a 100644
--- a/packages/core/services/reflector.service.ts
+++ b/packages/core/services/reflector.service.ts
@@ -23,7 +23,7 @@ export class Reflector {
     metadataKey: TKey,
     target: Type<any> | Function,
   ): TResult {
-    return Reflect.getMetadata(metadataKey, target);
+    return Reflect.getMetadata(metadataKey, target) as TResult;
   }
 
   /**
@@ -38,7 +38,7 @@ export class Reflector {
     targets: (Type<any> | Function)[],
   ): TResult {
     return (targets || []).map(target =>
-      this.get(metadataKey, target),
+      Reflect.getMetadata(metadataKey, target),
     ) as TResult;
   }
 
@@ -86,12 +86,9 @@ export class Reflector {
     metadataKey: TKey,
     targets: (Type<any> | Function)[],
   ): TResult {
-    for (const target of targets) {
-      const result = this.get(metadataKey, target);
-      if (result !== undefined) {
-        return result;
-      }
-    }
-    return undefined;
+    const metadataCollection = this.getAll(metadataKey, targets).filter(
+      item => item !== undefined,
+    );
+    return metadataCollection[0];
   }
 }
diff --git a/packages/core/tsconfig.build.json b/packages/core/tsconfig.build.json
deleted file mode 100644
index 99c13372d..000000000
--- a/packages/core/tsconfig.build.json
+++ /dev/null
@@ -1,21 +0,0 @@
-{
-  "extends": "../tsconfig.build.json",
-  "compilerOptions": {
-    "outDir": ".",
-    "rootDir": ".",
-    "paths": {
-      "@nestjs/common": ["../common"],
-      "@nestjs/common/*": ["../common/*"],
-      "@nestjs/microservices": ["../microservices"],
-      "@nestjs/microservices/*": ["../microservices/*"],
-      "@nestjs/websockets": ["../websockets"],
-      "@nestjs/websockets/*": ["../websockets/*"]
-    }
-  },
-  "exclude": ["node_modules", "dist", "test/**/*", "*.spec.ts"],
-  "references": [
-    {
-      "path": "../common/tsconfig.build.json"
-    }
-  ]
-}
diff --git a/packages/core/tsconfig.json b/packages/core/tsconfig.json
index 2ae9e3c90..b238080a4 100644
--- a/packages/core/tsconfig.json
+++ b/packages/core/tsconfig.json
@@ -1,13 +1,7 @@
 {
-  "extends": "../tsconfig.build.json",
+  "extends": "./../tsconfig.base.json",
   "compilerOptions": {
-    "types": ["node"]
+    "baseUrl": "./"
   },
-  "files": [],
-  "include": [],
-  "references": [
-    {
-      "path": "./tsconfig.build.json"
-    }
-  ]
+  "include": ["*.ts", "**/*.ts"]
 }
diff --git a/packages/microservices/CHANGELOG.md b/packages/microservices/CHANGELOG.md
new file mode 100644
index 000000000..f455b343b
--- /dev/null
+++ b/packages/microservices/CHANGELOG.md
@@ -0,0 +1,18 @@
+# Change Log
+
+All notable changes to this project will be documented in this file.
+See [Conventional Commits](https://conventionalcommits.org) for commit guidelines.
+
+<a name="8.2.0"></a>
+# [8.2.0](https://github.com/nestjs/nest/compare/v8.1.2...v8.2.0) (2021-11-08)
+
+
+### Bug Fixes
+
+* **microservices:** npm run format ([fdf11a5](https://github.com/nestjs/nest/commit/fdf11a5))
+
+
+### Features
+
+* **microservices:** adds packageDefinition option to ClientGrpc ([76f2918](https://github.com/nestjs/nest/commit/76f2918)), closes [#8457](https://github.com/nestjs/nest/issues/8457)
+* **microservices:** removes [@grpc](https://github.com/grpc)/grpc-js import ([3b74293](https://github.com/nestjs/nest/commit/3b74293))
diff --git a/packages/microservices/Readme.md b/packages/microservices/Readme.md
index 16f48336d..f288809a9 100644
--- a/packages/microservices/Readme.md
+++ b/packages/microservices/Readme.md
@@ -11,6 +11,7 @@
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/l/@nestjs/core.svg" alt="Package License" /></a>
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/dm/@nestjs/common.svg" alt="NPM Downloads" /></a>
 <a href="https://circleci.com/gh/nestjs/nest" target="_blank"><img src="https://img.shields.io/circleci/build/github/nestjs/nest/master" alt="CircleCI" /></a>
+<a href="https://coveralls.io/github/nestjs/nest?branch=master" target="_blank"><img src="https://coveralls.io/repos/github/nestjs/nest/badge.svg?branch=master#9" alt="Coverage" /></a>
 <a href="https://discord.gg/G7Qnnhy" target="_blank"><img src="https://img.shields.io/badge/discord-online-brightgreen.svg" alt="Discord"/></a>
 <a href="https://opencollective.com/nest#backer" target="_blank"><img src="https://opencollective.com/nest/backers/badge.svg" alt="Backers on Open Collective" /></a>
 <a href="https://opencollective.com/nest#sponsor" target="_blank"><img src="https://opencollective.com/nest/sponsors/badge.svg" alt="Sponsors on Open Collective" /></a>
@@ -36,8 +37,8 @@ Nest is a framework for building efficient, scalable <a href="http://nodejs.org"
 
 * To check out the [guide](https://docs.nestjs.com), visit [docs.nestjs.com](https://docs.nestjs.com). :books:
 * 要查看中文 [指南](readme_zh.md), 请访问 [docs.nestjs.cn](https://docs.nestjs.cn). :books:
-* [가이드](readme_kr.md) 문서는 [docs.nestjs.com](https://docs.nestjs.com)에서 확인하실 수 있습니다. :books:
-* [ガイド](readme_jp.md)は [docs.nestjs.com](https://docs.nestjs.com)でご確認ください。 :books:
+* [가이드](readme_kr.md)를 확인하려면, [docs.nestjs.com](https://docs.nestjs.com)를 방문하세요.:books: 
+* チェックするには [ガイド](readme_jp.md), 詳しくは [docs.nestjs.com](https://docs.nestjs.com). :books: 
 
 ## Questions
 
@@ -53,49 +54,36 @@ With official support, you can get expert help straight from Nest core team. We
 
 ## Support
 
-Nest is an MIT-licensed open source project. It can grow thanks to the sponsors and support from the amazing backers. If you'd like to join them, please [read more here](https://docs.nestjs.com/support).
+Nest is an MIT-licensed open source project. It can grow thanks to the sponsors and support by the amazing backers. If you'd like to join them, please [read more here](https://docs.nestjs.com/support).
 
 #### Principal Sponsors
 <table style="text-align:center;"><tr>
   <td><a href="https://trilon.io" target="_blank"><img src="https://nestjs.com/img/trilon.svg" width="200" valign="middle" /></a></td>
-  <td><a href="https://www.redhat.com" target="_blank"><img src="https://nestjs.com/img/red-hat-logo.svg" width="200" valign="middle" /></a></td>
 <td>
 <a href="https://github.com/Sanofi-IADC" target="_blank"><img src="https://docs.nestjs.com/assets/sponsors/sanofi.png" width="180" valign="middle" /></a></td>
 <td>
 <a href="https://nx.dev" target="_blank"><img src="https://nestjs.com/img/nx-logo.png" height="45" valign="middle" /></a></td>
-    <td>
-<a href="https://valor-software.com/" target="_blank"><img src="https://docs.nestjs.com/assets/sponsors/valor-software.png" width="170" valign="middle" /></a></td><td>
-<a href="https://amplication.com/" target="_blank"><img src="https://nestjs.com/img/amplication-logo.svg" width="190" valign="middle" /></a></td>
 </tr></table>
 
 #### Gold Sponsors
 
 <table style="text-align:center;"><tr><td>
-<a href="https://weld.app/" target="_blank"><img src="https://nestjs.com/img/weld-logo.svg" width="140" valign="middle" /></a></td>
+  <a href="https://careers.labster.com/departments/platform" target="_blank"><img src="https://nestjs.com/img/labster-logo.png" width="170" valign="middle" /></a></td><td>
+<a href="https://weld.app/" target="_blank"><img src="https://nestjs.com/img/weld-logo.svg" width="150" valign="middle" /></a></td>
+  <td>
+<a href="https://valor-software.com/" target="_blank"><img src="https://docs.nestjs.com/assets/sponsors/valor-software.png" width="170" valign="middle" /></a></td>
 <td>
-<a href="https://intrinsic.ventures/" target="_blank"><img src="https://nestjs.com/img/intrinisic-logo.png" width="210" valign="middle" /></a></td>
- <td>
-<a href="https://jetbrains.com/" target="_blank"><img src="https://nestjs.com/img/jetbrains-logo.svg" width="110" valign="middle" /></a></td><td>
-<a href="https://snyk.co/nestjs" target="_blank"><img src="https://nestjs.com/img/snyk-logo-black.png" width="185" valign="middle" /></a></td><td>
-<a href="https://fuseautotech.com/" target="_blank"><img src="https://nestjs.com/img/fuse-logo.svg" width="105" valign="middle" /></a></td>
-<td>
-<a href="https://ridicorp.com/career/" target="_blank"><img src="https://nestjs.com/img/ridi-logo.svg" width="105" valign="middle" /></a></td><td>
-<a href="https://www.movavi.com/imovie-for-windows.html" target="_blank"><img src="https://nestjs.com/img/movavi-logo.svg" width="105" valign="middle" /></a></td></</tr></table>
+<a href="https://intrinsic.ventures/" target="_blank"><img src="https://nestjs.com/img/intrinisic-logo.png" width="210" valign="middle" /></a></td></</tr></table>
 
 #### Silver Sponsors
 
 <table style="text-align:center;"><tr><td>
 <a href="https://neoteric.eu/" target="_blank"><img src="https://nestjs.com/img/neoteric-cut.png" width="120" valign="middle" /></a> </td><td>
   <a href="http://gojob.com" target="_blank"><img src="http://nestjs.com/img/gojob-logo.png" valign="middle" width="100" /></a> </td><td>
-<a href="https://www.myleodsc.com/" target="_blank"><img src="https://nestjs.com/img/myleo-logo.png" width="180" valign="middle" /></td><td>
+<a href="http://www.leogistics.com" target="_blank"><img src="https://nestjs.com/img/leogistics-logo.jpeg" width="150" valign="middle" /></td><td>
 <a href="https://careers.meetdandy.com/?gh_src=063ba61e3us" target="_blank"><img src="https://nestjs.com/img/dandy-roles-logo.svg" width="150" valign="middle" /></td><td>
 <a href="https://www.castlecraft.in" target="_blank"><img src="https://nestjs.com/img/castlecraft-logo.png" width="150" valign="middle" /></td>
-<td><a href="https://www.tinystacks.com" target="_blank"><img src="https://nestjs.com/img/tinystacks-logo.png#1" width="140" valign="middle" /></td>
-<td><a href="https://n.inc" target="_blank"><img src="https://nestjs.com/img/n-inc-logo.svg" width="120" valign="middle" /></td></tr><tr>
-<td><a href="https://bilberrry.com/" target="_blank"><img src="https://nestjs.com/img/bilberrry-logo.svg" width="180" valign="middle" /></td>
-<td><a href="https://ipinfo.ai/" target="_blank"><img src="https://nestjs.com/img/ipinfo-logo.png" width="130" valign="middle" /></td>
-<td><a href="https://chax.at" target="_blank"><img src="https://nestjs.com/img/chaxat-logo.png" width="100" valign="middle" /></td></tr>
-</table>
+<td><a href="https://www.tinystacks.com" target="_blank"><img src="https://nestjs.com/img/tinystacks-logo.png#1" width="140" valign="middle" /></td></tr></table>
 
 #### Sponsors
 
@@ -103,7 +91,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
 <a href="https://www.swingdev.io" target="_blank"><img src="https://nestjs.com/img/swingdev-logo.svg#1" width="110" valign="middle" /> </a></td><td align="center" valign="middle">
 <a href="https://www.novologic.com/" target="_blank"><img src="https://nestjs.com/img/novologic.png" width="110" valign="middle" /></a> </td><td align="center" valign="middle">
 <a href="https://ever.co/" target="_blank"><img src="https://nestjs.com/img/ever-logo.png" width="72" valign="middle" /></a>  </td><td align="center" valign="middle">
-<a href="https://blokt.com" target="_blank"><img src="https://nestjs.com/img/blokt-logo.png" width="120" valign="middle" /></a>  </td><td align="center" valign="middle">
+<a href="https://blokt.com" target="_blank"><img src="https://nestjs.com/img/blokt-logo.png" width="120" valign="middle" /></a>  </td><td align="center" valign="middle"> 
   <a href="http://architectnow.net/" target="_blank"><img src="https://nestjs.com/img/architectnow.png" width="125" valign="middle" /></a> </td><td align="center" valign="middle">
   <a href="https://quander.io/" target="_blank"><img src="https://nestjs.com/img/quander.png" width="100" valign="middle" /></a> </td></tr><tr><td align="center" valign="middle">
   <a href="https://mantro.net/" target="_blank"><img src="https://nestjs.com/img/mantro-logo.svg" width="95" valign="middle" /></a> </td><td align="center" valign="middle">
@@ -129,14 +117,6 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
 <td align="center" valign="middle"><a href="https://www.naologic.com/" target="_blank"><img src="https://nestjs.com/img/naologic-logo.svg" width="125" valign="middle" /></a></td>
   <td align="center" valign="middle"><a href="https://messaged.com/" target="_blank"><img src="https://nestjs.com/img/messaged-logo.png" width="50" valign="middle" /></a></td>
   <td align="center" valign="middle"><a href="https://triplecore.io" target="_blank"><img src="https://nestjs.com/img/triplecore-logo.svg" width="50" valign="middle" /></a></td>
-   <td align="center" valign="middle"><a href="https://klqc.de" target="_blank"><img src="https://nestjs.com/img/klcqcl-logo.png" width="120" valign="middle" /></a></td>
-   <td align="center" valign="middle"><a href="https://thecasinowizard.com/bonuses/no-deposit-bonuses/" target="_blank"><img src="https://nestjs.com/img/casinowizard-logo.png" width="120" valign="middle" /></a></td></tr><tr>
-     <td align="center" valign="middle"><a href="https://polygon-software.ch/" target="_blank"><img src="https://nestjs.com/img/polygon-logo.svg" width="120" valign="middle" /></a></td>
-   <td align="center" valign="middle"><a href="https://mobilereality.pl/" target="_blank"><img src="https://nestjs.com/img/mobile-reality-logo.png" width="45" valign="middle" /></a></td>
-     <td align="center" valign="middle"><a href="https://boringowl.io/" target="_blank"><img src="https://nestjs.com/img/boringowl-logo.svg" width="120" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://www.mobilefactory.jp/" target="_blank"><img src="https://nestjs.com/img/mobilefactory-logo.png" width="100" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://nordbot.app/" target="_blank"><img src="https://nestjs.com/img/nordbot-logo.png" width="120" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://doppio.sh/" target="_blank"><img src="https://nestjs.com/img/dopiosh-logo.png" width="50" valign="middle" /></a></td>
   </tr></table>
 
 ## Backers
diff --git a/packages/microservices/client/client-grpc.ts b/packages/microservices/client/client-grpc.ts
index a03c1e78d..298a9e152 100644
--- a/packages/microservices/client/client-grpc.ts
+++ b/packages/microservices/client/client-grpc.ts
@@ -14,9 +14,6 @@ import { ChannelOptions } from '../external/grpc-options.interface';
 let grpcPackage: any = {};
 let grpcProtoLoaderPackage: any = {};
 
-/**
- * @publicApi
- */
 export class ClientGrpcProxy extends ClientProxy implements ClientGrpc {
   protected readonly logger = new Logger(ClientProxy.name);
   protected readonly clients = new Map<string, any>();
@@ -49,14 +46,15 @@ export class ClientGrpcProxy extends ClientProxy implements ClientGrpc {
     const grpcClient = this.createClientByServiceName(name);
     const clientRef = this.getClient(name);
     if (!clientRef) {
-      throw new InvalidGrpcServiceException(name);
+      throw new InvalidGrpcServiceException();
     }
 
     const protoMethods = Object.keys(clientRef[name].prototype);
     const grpcService = {} as T;
 
     protoMethods.forEach(m => {
-      grpcService[m] = this.createServiceMethod(grpcClient, m);
+      const key = m[0].toLowerCase() + m.slice(1, m.length);
+      grpcService[key] = this.createServiceMethod(grpcClient, m);
     });
     return grpcService;
   }
@@ -68,7 +66,7 @@ export class ClientGrpcProxy extends ClientProxy implements ClientGrpc {
   public createClientByServiceName(name: string) {
     const clientRef = this.getClient(name);
     if (!clientRef) {
-      throw new InvalidGrpcServiceException(name);
+      throw new InvalidGrpcServiceException();
     }
 
     const channelOptions: ChannelOptions =
@@ -177,7 +175,7 @@ export class ClientGrpcProxy extends ClientProxy implements ClientGrpc {
               return;
             }
           }
-          observer.error(this.serializeError(error));
+          observer.error(error);
         });
         call.on('end', () => {
           if (upstreamSubscription) {
@@ -219,7 +217,7 @@ export class ClientGrpcProxy extends ClientProxy implements ClientGrpc {
           const callArgs = [
             (error: unknown, data: unknown) => {
               if (error) {
-                return observer.error(this.serializeError(error));
+                return observer.error(error);
               }
               observer.next(data);
               observer.complete();
@@ -244,19 +242,13 @@ export class ClientGrpcProxy extends ClientProxy implements ClientGrpc {
         });
       }
       return new Observable(observer => {
-        const call = client[methodName](...args, (error: any, data: any) => {
+        client[methodName](...args, (error: any, data: any) => {
           if (error) {
-            return observer.error(this.serializeError(error));
+            return observer.error(error);
           }
           observer.next(data);
           observer.complete();
         });
-
-        return () => {
-          if (!call.finished) {
-            call.cancel();
-          }
-        };
       });
     };
   }
@@ -273,9 +265,7 @@ export class ClientGrpcProxy extends ClientProxy implements ClientGrpc {
       const grpcPkg = this.lookupPackage(grpcContext, packageName);
 
       if (!grpcPkg) {
-        const invalidPackageError = new InvalidGrpcPackageException(
-          packageName,
-        );
+        const invalidPackageError = new InvalidGrpcPackageException();
         this.logger.error(
           invalidPackageError.message,
           invalidPackageError.stack,
@@ -300,7 +290,7 @@ export class ClientGrpcProxy extends ClientProxy implements ClientGrpc {
         grpcPackage.loadPackageDefinition(packageDefinition);
       return packageObject;
     } catch (err) {
-      const invalidProtoError = new InvalidProtoDefinitionException(err.path);
+      const invalidProtoError = new InvalidProtoDefinitionException();
       const message =
         err && err.message ? err.message : invalidProtoError.message;
 
diff --git a/packages/microservices/client/client-kafka.ts b/packages/microservices/client/client-kafka.ts
index 618993d6f..1900336e4 100644
--- a/packages/microservices/client/client-kafka.ts
+++ b/packages/microservices/client/client-kafka.ts
@@ -19,7 +19,6 @@ import {
   KafkaConfig,
   KafkaMessage,
   Producer,
-  TopicPartitionOffsetAndMetadata,
 } from '../external/kafka.interface';
 import {
   KafkaLogger,
@@ -40,42 +39,28 @@ import { ClientProxy } from './client-proxy';
 
 let kafkaPackage: any = {};
 
-/**
- * @publicApi
- */
 export class ClientKafka extends ClientProxy {
   protected logger = new Logger(ClientKafka.name);
-  protected client: Kafka | null = null;
-  protected consumer: Consumer | null = null;
-  protected producer: Producer | null = null;
-  protected parser: KafkaParser | null = null;
-  protected initialized: Promise<void> | null = null;
+  protected client: Kafka = null;
+  protected consumer: Consumer = null;
+  protected producer: Producer = null;
+  protected parser: KafkaParser = null;
   protected responsePatterns: string[] = [];
   protected consumerAssignments: { [key: string]: number } = {};
+
   protected brokers: string[] | BrokersFunction;
   protected clientId: string;
   protected groupId: string;
-  protected producerOnlyMode: boolean;
 
   constructor(protected readonly options: KafkaOptions['options']) {
     super();
 
-    const clientOptions = this.getOptionsProp(
-      this.options,
-      'client',
-      {} as KafkaConfig,
-    );
-    const consumerOptions = this.getOptionsProp(
-      this.options,
-      'consumer',
-      {} as ConsumerConfig,
-    );
-    const postfixId = this.getOptionsProp(this.options, 'postfixId', '-client');
-    this.producerOnlyMode = this.getOptionsProp(
-      this.options,
-      'producerOnlyMode',
-      false,
-    );
+    const clientOptions =
+      this.getOptionsProp(this.options, 'client') || ({} as KafkaConfig);
+    const consumerOptions =
+      this.getOptionsProp(this.options, 'consumer') || ({} as ConsumerConfig);
+    const postfixId =
+      this.getOptionsProp(this.options, 'postfixId') || '-client';
 
     this.brokers = clientOptions.brokers || [KAFKA_DEFAULT_BROKER];
 
@@ -105,63 +90,45 @@ export class ClientKafka extends ClientProxy {
     this.consumer && (await this.consumer.disconnect());
     this.producer = null;
     this.consumer = null;
-    this.initialized = null;
     this.client = null;
   }
 
   public async connect(): Promise<Producer> {
-    if (this.initialized) {
-      return this.initialized.then(() => this.producer);
+    if (this.client) {
+      return this.producer;
     }
-    this.initialized = new Promise(async (resolve, reject) => {
-      try {
-        this.client = this.createClient();
-
-        if (!this.producerOnlyMode) {
-          const partitionAssigners = [
-            (
-              config: ConstructorParameters<
-                typeof KafkaReplyPartitionAssigner
-              >[1],
-            ) => new KafkaReplyPartitionAssigner(this, config),
-          ];
-
-          const consumerOptions = Object.assign(
-            {
-              partitionAssigners,
-            },
-            this.options.consumer || {},
-            {
-              groupId: this.groupId,
-            },
-          );
-
-          this.consumer = this.client.consumer(consumerOptions);
-          // set member assignments on join and rebalance
-          this.consumer.on(
-            this.consumer.events.GROUP_JOIN,
-            this.setConsumerAssignments.bind(this),
-          );
-          await this.consumer.connect();
-          await this.bindTopics();
-        }
-
-        this.producer = this.client.producer(this.options.producer || {});
-        await this.producer.connect();
-
-        resolve();
-      } catch (err) {
-        reject(err);
-      }
-    });
-    return this.initialized.then(() => this.producer);
+    this.client = this.createClient();
+
+    const partitionAssigners = [
+      (config: ConstructorParameters<typeof KafkaReplyPartitionAssigner>[1]) =>
+        new KafkaReplyPartitionAssigner(this, config),
+    ] as any[];
+
+    const consumerOptions = Object.assign(
+      {
+        partitionAssigners,
+      },
+      this.options.consumer || {},
+      {
+        groupId: this.groupId,
+      },
+    );
+    this.producer = this.client.producer(this.options.producer || {});
+    this.consumer = this.client.consumer(consumerOptions);
+
+    // set member assignments on join and rebalance
+    this.consumer.on(
+      this.consumer.events.GROUP_JOIN,
+      this.setConsumerAssignments.bind(this),
+    );
+
+    await this.producer.connect();
+    await this.consumer.connect();
+    await this.bindTopics();
+    return this.producer;
   }
 
   public async bindTopics(): Promise<void> {
-    if (!this.consumer) {
-      throw Error('No consumer initialized');
-    }
-
     const consumerSubscribeOptions = this.options.subscribe || {};
     const subscribeTo = async (responsePattern: string) =>
       this.consumer.subscribe({
@@ -222,11 +189,9 @@ export class ClientKafka extends ClientProxy {
     return this.consumerAssignments;
   }
 
-  protected async dispatchEvent(packet: OutgoingEvent): Promise<any> {
+  protected dispatchEvent(packet: OutgoingEvent): Promise<any> {
     const pattern = this.normalizePattern(packet.pattern);
-    const outgoingEvent = await this.serializer.serialize(packet.data, {
-      pattern,
-    });
+    const outgoingEvent = this.serializer.serialize(packet.data);
     const message = Object.assign(
       {
         topic: pattern,
@@ -234,7 +199,6 @@ export class ClientKafka extends ClientProxy {
       },
       this.options.send || {},
     );
-
     return this.producer.send(message);
   }
 
@@ -252,42 +216,33 @@ export class ClientKafka extends ClientProxy {
     partialPacket: ReadPacket,
     callback: (packet: WritePacket) => any,
   ): () => void {
-    const packet = this.assignPacketId(partialPacket);
-    this.routingMap.set(packet.id, callback);
-
-    const cleanup = () => this.routingMap.delete(packet.id);
-    const errorCallback = (err: unknown) => {
-      cleanup();
-      callback({ err });
-    };
-
     try {
+      const packet = this.assignPacketId(partialPacket);
       const pattern = this.normalizePattern(partialPacket.pattern);
       const replyTopic = this.getResponsePatternName(pattern);
       const replyPartition = this.getReplyTopicPartition(replyTopic);
 
-      Promise.resolve(this.serializer.serialize(packet.data, { pattern }))
-        .then((serializedPacket: KafkaRequest) => {
-          serializedPacket.headers[KafkaHeaders.CORRELATION_ID] = packet.id;
-          serializedPacket.headers[KafkaHeaders.REPLY_TOPIC] = replyTopic;
-          serializedPacket.headers[KafkaHeaders.REPLY_PARTITION] =
-            replyPartition;
-
-          const message = Object.assign(
-            {
-              topic: pattern,
-              messages: [serializedPacket],
-            },
-            this.options.send || {},
-          );
-
-          return this.producer.send(message);
-        })
-        .catch(err => errorCallback(err));
-
-      return cleanup;
+      const serializedPacket: KafkaRequest = this.serializer.serialize(
+        packet.data,
+      );
+      serializedPacket.headers[KafkaHeaders.CORRELATION_ID] = packet.id;
+      serializedPacket.headers[KafkaHeaders.REPLY_TOPIC] = replyTopic;
+      serializedPacket.headers[KafkaHeaders.REPLY_PARTITION] = replyPartition;
+
+      this.routingMap.set(packet.id, callback);
+
+      const message = Object.assign(
+        {
+          topic: pattern,
+          messages: [serializedPacket],
+        },
+        this.options.send || {},
+      );
+      this.producer.send(message).catch(err => callback({ err }));
+
+      return () => this.routingMap.delete(packet.id);
     } catch (err) {
-      errorCallback(err);
+      callback({ err });
     }
   }
 
@@ -319,14 +274,4 @@ export class ClientKafka extends ClientProxy {
     this.deserializer =
       (options && options.deserializer) || new KafkaResponseDeserializer();
   }
-
-  public commitOffsets(
-    topicPartitions: TopicPartitionOffsetAndMetadata[],
-  ): Promise<void> {
-    if (this.consumer) {
-      return this.consumer.commitOffsets(topicPartitions);
-    } else {
-      throw new Error('No consumer initialized');
-    }
-  }
 }
diff --git a/packages/microservices/client/client-mqtt.ts b/packages/microservices/client/client-mqtt.ts
index c2e7c6cf3..8797b56f8 100644
--- a/packages/microservices/client/client-mqtt.ts
+++ b/packages/microservices/client/client-mqtt.ts
@@ -20,9 +20,6 @@ import { ClientProxy } from './client-proxy';
 
 let mqttPackage: any = {};
 
-/**
- * @publicApi
- */
 export class ClientMqtt extends ClientProxy {
   protected readonly logger = new Logger(ClientProxy.name);
   protected readonly subscriptionsCount = new Map<string, number>();
@@ -177,14 +174,11 @@ export class ClientMqtt extends ClientProxy {
     const serializedPacket: ReadPacket & Partial<MqttRecord> =
       this.serializer.serialize(packet);
 
-    const options = serializedPacket.options;
-    delete serializedPacket.options;
-
     return new Promise<void>((resolve, reject) =>
       this.mqttClient.publish(
         pattern,
         JSON.stringify(serializedPacket),
-        this.mergePacketOptions(options),
+        this.mergePacketOptions(serializedPacket.options),
         (err: any) => (err ? reject(err) : resolve()),
       ),
     );
diff --git a/packages/microservices/client/client-nats.ts b/packages/microservices/client/client-nats.ts
index bf541cbbd..c124b6c18 100644
--- a/packages/microservices/client/client-nats.ts
+++ b/packages/microservices/client/client-nats.ts
@@ -1,6 +1,5 @@
 import { Logger } from '@nestjs/common/services/logger.service';
 import { loadPackage } from '@nestjs/common/utils/load-package.util';
-import { isObject } from '@nestjs/common/utils/shared.utils';
 import { NATS_DEFAULT_URL } from '../constants';
 import { NatsResponseJSONDeserializer } from '../deserializers/nats-response-json.deserializer';
 import { EmptyResponseException } from '../errors/empty-response.exception';
@@ -12,9 +11,6 @@ import { ClientProxy } from './client-proxy';
 
 let natsPackage = {} as any;
 
-/**
- * @publicApi
- */
 export class ClientNats extends ClientProxy {
   protected readonly logger = new Logger(ClientNats.name);
   protected natsClient: Client;
@@ -52,31 +48,20 @@ export class ClientNats extends ClientProxy {
   public async handleStatusUpdates(client: Client) {
     for await (const status of client.status()) {
       const data =
-        status.data && isObject(status.data)
+        status.data && typeof status.data === 'object'
           ? JSON.stringify(status.data)
           : status.data;
-
-      switch (status.type) {
-        case 'error':
-        case 'disconnect':
-          this.logger.error(
-            `NatsError: type: "${status.type}", data: "${data}".`,
-          );
-          break;
-
-        case 'pingTimer':
-          if (this.options.debug) {
-            this.logger.debug(
-              `NatsStatus: type: "${status.type}", data: "${data}".`,
-            );
-          }
-          break;
-
-        default:
-          this.logger.log(
-            `NatsStatus: type: "${status.type}", data: "${data}".`,
-          );
-          break;
+      if (status.type === 'disconnect' || status.type === 'error') {
+        this.logger.error(
+          `NatsError: type: "${status.type}", data: "${data}".`,
+        );
+      } else {
+        const message = `NatsStatus: type: "${status.type}", data: "${data}".`;
+        if (status.type === 'pingTimer') {
+          this.logger.debug(message);
+        } else {
+          this.logger.log(message);
+        }
       }
     }
   }
diff --git a/packages/microservices/client/client-proxy-factory.ts b/packages/microservices/client/client-proxy-factory.ts
index a19200990..f6bd89227 100644
--- a/packages/microservices/client/client-proxy-factory.ts
+++ b/packages/microservices/client/client-proxy-factory.ts
@@ -26,9 +26,6 @@ export interface IClientProxyFactory {
   create(clientOptions: ClientOptions): ClientProxy & Closeable;
 }
 
-/**
- * @publicApi
- */
 export class ClientProxyFactory {
   public static create(
     clientOptions: { transport: Transport.GRPC } & ClientOptions,
diff --git a/packages/microservices/client/client-proxy.ts b/packages/microservices/client/client-proxy.ts
index 3950cf3db..bdd3484d7 100644
--- a/packages/microservices/client/client-proxy.ts
+++ b/packages/microservices/client/client-proxy.ts
@@ -130,7 +130,7 @@ export abstract class ClientProxy {
     T extends ClientOptions['options'],
     K extends keyof T,
   >(obj: T, prop: K, defaultValue: T[K] = undefined) {
-    return obj && prop in obj ? obj[prop] : defaultValue;
+    return (obj && obj[prop]) || defaultValue;
   }
 
   protected normalizePattern(pattern: MsPattern): string {
diff --git a/packages/microservices/client/client-redis.ts b/packages/microservices/client/client-redis.ts
index 9148a450f..8b42ce6a0 100644
--- a/packages/microservices/client/client-redis.ts
+++ b/packages/microservices/client/client-redis.ts
@@ -1,34 +1,48 @@
 import { Logger } from '@nestjs/common/services/logger.service';
 import { loadPackage } from '@nestjs/common/utils/load-package.util';
 import {
+  EmptyError,
+  fromEvent,
+  lastValueFrom,
+  merge,
+  Subject,
+  zip,
+} from 'rxjs';
+import { share, take, tap } from 'rxjs/operators';
+import {
+  CONNECT_EVENT,
+  ECONNREFUSED,
   ERROR_EVENT,
   MESSAGE_EVENT,
-  REDIS_DEFAULT_HOST,
-  REDIS_DEFAULT_PORT,
+  REDIS_DEFAULT_URL,
 } from '../constants';
+import {
+  ClientOpts,
+  RedisClient,
+  RetryStrategyOptions,
+} from '../external/redis.interface';
 import { ReadPacket, RedisOptions, WritePacket } from '../interfaces';
 import { ClientProxy } from './client-proxy';
 
-type Redis = any;
-
-let redisPackage = {} as any;
+let redisPackage: any = {};
 
-/**
- * @publicApi
- */
 export class ClientRedis extends ClientProxy {
   protected readonly logger = new Logger(ClientProxy.name);
   protected readonly subscriptionsCount = new Map<string, number>();
-  protected pubClient: Redis;
-  protected subClient: Redis;
+  protected readonly url: string;
+  protected pubClient: RedisClient;
+  protected subClient: RedisClient;
   protected connection: Promise<any>;
   protected isExplicitlyTerminated = false;
 
   constructor(protected readonly options: RedisOptions['options']) {
     super();
+    this.url =
+      this.getOptionsProp(options, 'url') ||
+      (!this.getOptionsProp(options, 'host') && REDIS_DEFAULT_URL);
 
-    redisPackage = loadPackage('ioredis', ClientRedis.name, () =>
-      require('ioredis'),
+    redisPackage = loadPackage('redis', ClientRedis.name, () =>
+      require('redis'),
     );
 
     this.initializeSerializer(options);
@@ -50,57 +64,73 @@ export class ClientRedis extends ClientProxy {
     this.isExplicitlyTerminated = true;
   }
 
-  public async connect(): Promise<any> {
+  public connect(): Promise<any> {
     if (this.pubClient && this.subClient) {
       return this.connection;
     }
-    this.pubClient = this.createClient();
-    this.subClient = this.createClient();
+    const error$ = new Subject<Error>();
+
+    this.pubClient = this.createClient(error$);
+    this.subClient = this.createClient(error$);
     this.handleError(this.pubClient);
     this.handleError(this.subClient);
 
-    this.connection = Promise.all([
-      this.subClient.connect(),
-      this.pubClient.connect(),
-    ]);
-    await this.connection;
+    const pubConnect$ = fromEvent(this.pubClient, CONNECT_EVENT);
+    const subClient$ = fromEvent(this.subClient, CONNECT_EVENT);
 
-    this.subClient.on(MESSAGE_EVENT, this.createResponseCallback());
+    this.connection = lastValueFrom(
+      merge(error$, zip(pubConnect$, subClient$)).pipe(
+        take(1),
+        tap(() =>
+          this.subClient.on(MESSAGE_EVENT, this.createResponseCallback()),
+        ),
+        share(),
+      ),
+    ).catch(err => {
+      if (err instanceof EmptyError) {
+        return;
+      }
+      throw err;
+    });
     return this.connection;
   }
 
-  public createClient(): Redis {
-    return new redisPackage({
-      host: REDIS_DEFAULT_HOST,
-      port: REDIS_DEFAULT_PORT,
-      ...this.getClientOptions(),
-      lazyConnect: true,
+  public createClient(error$: Subject<Error>): RedisClient {
+    return redisPackage.createClient({
+      ...this.getClientOptions(error$),
+      url: this.url,
     });
   }
 
-  public handleError(client: Redis) {
+  public handleError(client: RedisClient) {
     client.addListener(ERROR_EVENT, (err: any) => this.logger.error(err));
   }
 
-  public getClientOptions(): Partial<RedisOptions['options']> {
-    const retryStrategy = (times: number) => this.createRetryStrategy(times);
+  public getClientOptions(error$: Subject<Error>): Partial<ClientOpts> {
+    const retry_strategy = (options: RetryStrategyOptions) =>
+      this.createRetryStrategy(options, error$);
 
     return {
       ...(this.options || {}),
-      retryStrategy,
+      retry_strategy,
     };
   }
 
-  public createRetryStrategy(times: number): undefined | number {
+  public createRetryStrategy(
+    options: RetryStrategyOptions,
+    error$: Subject<Error>,
+  ): undefined | number | Error {
+    if (options.error && (options.error as any).code === ECONNREFUSED) {
+      error$.error(options.error);
+    }
     if (this.isExplicitlyTerminated) {
       return undefined;
     }
     if (
       !this.getOptionsProp(this.options, 'retryAttempts') ||
-      times > this.getOptionsProp(this.options, 'retryAttempts')
+      options.attempt > this.getOptionsProp(this.options, 'retryAttempts')
     ) {
-      this.logger.error('Retry time exhausted');
-      return;
+      return new Error('Retry time exhausted');
     }
     return this.getOptionsProp(this.options, 'retryDelay') || 0;
   }
diff --git a/packages/microservices/client/client-rmq.ts b/packages/microservices/client/client-rmq.ts
index f68ef3bec..04498e18f 100644
--- a/packages/microservices/client/client-rmq.ts
+++ b/packages/microservices/client/client-rmq.ts
@@ -1,26 +1,15 @@
 import { Logger } from '@nestjs/common/services/logger.service';
 import { loadPackage } from '@nestjs/common/utils/load-package.util';
 import { randomStringGenerator } from '@nestjs/common/utils/random-string-generator.util';
-import { isFunction } from '@nestjs/common/utils/shared.utils';
 import { EventEmitter } from 'events';
+import { EmptyError, fromEvent, lastValueFrom, merge, Observable } from 'rxjs';
+import { first, map, share, switchMap } from 'rxjs/operators';
 import {
-  EmptyError,
-  firstValueFrom,
-  fromEvent,
-  merge,
-  Observable,
-  ReplaySubject,
-} from 'rxjs';
-import { first, map, retryWhen, scan, skip, switchMap } from 'rxjs/operators';
-import {
-  CONNECT_EVENT,
-  CONNECT_FAILED_EVENT,
   DISCONNECTED_RMQ_MESSAGE,
   DISCONNECT_EVENT,
   ERROR_EVENT,
   RQM_DEFAULT_IS_GLOBAL_PREFETCH_COUNT,
   RQM_DEFAULT_NOACK,
-  RQM_DEFAULT_NO_ASSERT,
   RQM_DEFAULT_PERSISTENT,
   RQM_DEFAULT_PREFETCH_COUNT,
   RQM_DEFAULT_QUEUE,
@@ -33,37 +22,21 @@ import { RmqRecord } from '../record-builders';
 import { RmqRecordSerializer } from '../serializers/rmq-record.serializer';
 import { ClientProxy } from './client-proxy';
 
-// import type {
-//   AmqpConnectionManager,
-//   ChannelWrapper,
-// } from 'amqp-connection-manager';
-// import type { Channel, ConsumeMessage } from 'amqplib';
-
-type Channel = any;
-type ChannelWrapper = any;
-type ConsumeMessage = any;
-type AmqpConnectionManager = any;
-
 let rqmPackage: any = {};
 
 const REPLY_QUEUE = 'amq.rabbitmq.reply-to';
 
-/**
- * @publicApi
- */
 export class ClientRMQ extends ClientProxy {
   protected readonly logger = new Logger(ClientProxy.name);
-  protected connection$: ReplaySubject<any>;
   protected connection: Promise<any>;
-  protected client: AmqpConnectionManager = null;
-  protected channel: ChannelWrapper = null;
+  protected client: any = null;
+  protected channel: any = null;
   protected urls: string[] | RmqUrl[];
   protected queue: string;
-  protected queueOptions: Record<string, any>;
+  protected queueOptions: any;
   protected responseEmitter: EventEmitter;
   protected replyQueue: string;
   protected persistent: boolean;
-  protected noAssert: boolean;
 
   constructor(protected readonly options: RmqOptions['options']) {
     super();
@@ -77,9 +50,6 @@ export class ClientRMQ extends ClientProxy {
       this.getOptionsProp(this.options, 'replyQueue') || REPLY_QUEUE;
     this.persistent =
       this.getOptionsProp(this.options, 'persistent') || RQM_DEFAULT_PERSISTENT;
-    this.noAssert =
-      this.getOptionsProp(this.options, 'noAssert') || RQM_DEFAULT_NO_ASSERT;
-
     loadPackage('amqplib', ClientRMQ.name, () => require('amqplib'));
     rqmPackage = loadPackage('amqp-connection-manager', ClientRMQ.name, () =>
       require('amqp-connection-manager'),
@@ -98,88 +68,57 @@ export class ClientRMQ extends ClientProxy {
 
   public connect(): Promise<any> {
     if (this.client) {
-      return this.convertConnectionToPromise();
+      return this.connection;
     }
     this.client = this.createClient();
     this.handleError(this.client);
     this.handleDisconnectError(this.client);
 
-    this.responseEmitter = new EventEmitter();
-    this.responseEmitter.setMaxListeners(0);
-
     const connect$ = this.connect$(this.client);
-    const withDisconnect$ = this.mergeDisconnectEvent(
-      this.client,
-      connect$,
-    ).pipe(switchMap(() => this.createChannel()));
-
-    const withReconnect$ = fromEvent(this.client, CONNECT_EVENT).pipe(skip(1));
-    const source$ = merge(withDisconnect$, withReconnect$);
-
-    this.connection$ = new ReplaySubject(1);
-    source$.subscribe(this.connection$);
+    this.connection = lastValueFrom(
+      this.mergeDisconnectEvent(this.client, connect$).pipe(
+        switchMap(() => this.createChannel()),
+        share(),
+      ),
+    ).catch(err => {
+      if (err instanceof EmptyError) {
+        return;
+      }
+      throw err;
+    });
 
-    return this.convertConnectionToPromise();
+    return this.connection;
   }
 
   public createChannel(): Promise<void> {
     return new Promise(resolve => {
       this.channel = this.client.createChannel({
         json: false,
-        setup: (channel: Channel) => this.setupChannel(channel, resolve),
+        setup: (channel: any) => this.setupChannel(channel, resolve),
       });
     });
   }
 
-  public createClient(): AmqpConnectionManager {
+  public createClient<T = any>(): T {
     const socketOptions = this.getOptionsProp(this.options, 'socketOptions');
     return rqmPackage.connect(this.urls, {
       connectionOptions: socketOptions,
-    });
+    }) as T;
   }
 
   public mergeDisconnectEvent<T = any>(
     instance: any,
     source$: Observable<T>,
   ): Observable<T> {
-    const eventToError = (eventType: string) =>
-      fromEvent(instance, eventType).pipe(
-        map((err: unknown) => {
-          throw err;
-        }),
-      );
-    const disconnect$ = eventToError(DISCONNECT_EVENT);
-
-    const urls = this.getOptionsProp(this.options, 'urls', []);
-    const connectFailed$ = eventToError(CONNECT_FAILED_EVENT).pipe(
-      retryWhen(e =>
-        e.pipe(
-          scan((errorCount, error: any) => {
-            if (urls.indexOf(error.url) >= urls.length - 1) {
-              throw error;
-            }
-            return errorCount + 1;
-          }, 0),
-        ),
-      ),
+    const close$ = fromEvent(instance, DISCONNECT_EVENT).pipe(
+      map((err: any) => {
+        throw err;
+      }),
     );
-    // If we ever decide to propagate all disconnect errors & re-emit them through
-    // the "connection" stream then comment out "first()" operator.
-    return merge(source$, disconnect$, connectFailed$).pipe(first());
-  }
-
-  public async convertConnectionToPromise() {
-    try {
-      return await firstValueFrom(this.connection$);
-    } catch (err) {
-      if (err instanceof EmptyError) {
-        return;
-      }
-      throw err;
-    }
+    return merge(source$, close$).pipe(first());
   }
 
-  public async setupChannel(channel: Channel, resolve: Function) {
+  public async setupChannel(channel: any, resolve: Function) {
     const prefetchCount =
       this.getOptionsProp(this.options, 'prefetchCount') ||
       RQM_DEFAULT_PREFETCH_COUNT;
@@ -187,19 +126,20 @@ export class ClientRMQ extends ClientProxy {
       this.getOptionsProp(this.options, 'isGlobalPrefetchCount') ||
       RQM_DEFAULT_IS_GLOBAL_PREFETCH_COUNT;
 
-    if (!this.queueOptions.noAssert) {
-      await channel.assertQueue(this.queue, this.queueOptions);
-    }
+    await channel.assertQueue(this.queue, this.queueOptions);
     await channel.prefetch(prefetchCount, isGlobalPrefetchCount);
+
+    this.responseEmitter = new EventEmitter();
+    this.responseEmitter.setMaxListeners(0);
     await this.consumeChannel(channel);
     resolve();
   }
 
-  public async consumeChannel(channel: Channel) {
+  public async consumeChannel(channel: any) {
     const noAck = this.getOptionsProp(this.options, 'noAck', RQM_DEFAULT_NOACK);
     await channel.consume(
       this.replyQueue,
-      (msg: ConsumeMessage) =>
+      (msg: any) =>
         this.responseEmitter.emit(msg.properties.correlationId, msg),
       {
         noAck,
@@ -207,39 +147,25 @@ export class ClientRMQ extends ClientProxy {
     );
   }
 
-  public handleError(client: AmqpConnectionManager): void {
+  public handleError(client: any): void {
     client.addListener(ERROR_EVENT, (err: any) => this.logger.error(err));
   }
 
-  public handleDisconnectError(client: AmqpConnectionManager): void {
+  public handleDisconnectError(client: any): void {
     client.addListener(DISCONNECT_EVENT, (err: any) => {
       this.logger.error(DISCONNECTED_RMQ_MESSAGE);
       this.logger.error(err);
+
+      this.close();
     });
   }
 
   public async handleMessage(
     packet: unknown,
     callback: (packet: WritePacket) => any,
-  );
-  public async handleMessage(
-    packet: unknown,
-    options: Record<string, unknown>,
-    callback: (packet: WritePacket) => any,
-  );
-  public async handleMessage(
-    packet: unknown,
-    options: Record<string, unknown> | ((packet: WritePacket) => any),
-    callback?: (packet: WritePacket) => any,
   ) {
-    if (isFunction(options)) {
-      callback = options as (packet: WritePacket) => any;
-      options = undefined;
-    }
-
     const { err, response, isDisposed } = await this.deserializer.deserialize(
       packet,
-      options,
     );
     if (isDisposed || err) {
       callback({
@@ -260,14 +186,8 @@ export class ClientRMQ extends ClientProxy {
   ): () => void {
     try {
       const correlationId = randomStringGenerator();
-      const listener = ({
-        content,
-        options,
-      }: {
-        content: Buffer;
-        options: Record<string, unknown>;
-      }) =>
-        this.handleMessage(JSON.parse(content.toString()), options, callback);
+      const listener = ({ content }: { content: any }) =>
+        this.handleMessage(JSON.parse(content.toString()), callback);
 
       Object.assign(message, { id: correlationId });
       const serializedPacket: ReadPacket & Partial<RmqRecord> =
@@ -277,19 +197,17 @@ export class ClientRMQ extends ClientProxy {
       delete serializedPacket.options;
 
       this.responseEmitter.on(correlationId, listener);
-      this.channel
-        .sendToQueue(
-          this.queue,
-          Buffer.from(JSON.stringify(serializedPacket)),
-          {
-            replyTo: this.replyQueue,
-            persistent: this.persistent,
-            ...options,
-            headers: this.mergeHeaders(options?.headers),
-            correlationId,
-          },
-        )
-        .catch(err => callback({ err }));
+      this.channel.sendToQueue(
+        this.queue,
+        Buffer.from(JSON.stringify(serializedPacket)),
+        {
+          replyTo: this.replyQueue,
+          persistent: this.persistent,
+          ...options,
+          headers: this.mergeHeaders(options?.headers),
+          correlationId,
+        },
+      );
       return () => this.responseEmitter.removeListener(correlationId, listener);
     } catch (err) {
       callback({ err });
@@ -300,17 +218,14 @@ export class ClientRMQ extends ClientProxy {
     const serializedPacket: ReadPacket & Partial<RmqRecord> =
       this.serializer.serialize(packet);
 
-    const options = serializedPacket.options;
-    delete serializedPacket.options;
-
     return new Promise<void>((resolve, reject) =>
       this.channel.sendToQueue(
         this.queue,
         Buffer.from(JSON.stringify(serializedPacket)),
         {
           persistent: this.persistent,
-          ...options,
-          headers: this.mergeHeaders(options?.headers),
+          ...serializedPacket.options,
+          headers: this.mergeHeaders(serializedPacket.options?.headers),
         },
         (err: unknown) => (err ? reject(err) : resolve()),
       ),
diff --git a/packages/microservices/client/client-tcp.ts b/packages/microservices/client/client-tcp.ts
index e0b1ddb91..f16c6407c 100644
--- a/packages/microservices/client/client-tcp.ts
+++ b/packages/microservices/client/client-tcp.ts
@@ -1,8 +1,7 @@
-import { Logger, Type } from '@nestjs/common';
+import { Logger } from '@nestjs/common';
 import * as net from 'net';
 import { EmptyError, lastValueFrom } from 'rxjs';
 import { share, tap } from 'rxjs/operators';
-import { ConnectionOptions } from 'tls';
 import {
   CLOSE_EVENT,
   ECONNREFUSED,
@@ -11,39 +10,30 @@ import {
   TCP_DEFAULT_HOST,
   TCP_DEFAULT_PORT,
 } from '../constants';
-import { JsonSocket, TcpSocket } from '../helpers';
-import { connect as tlsConnect, TLSSocket } from 'tls';
+import { JsonSocket } from '../helpers/json-socket';
 import { PacketId, ReadPacket, WritePacket } from '../interfaces';
 import { TcpClientOptions } from '../interfaces/client-metadata.interface';
 import { ClientProxy } from './client-proxy';
 
-/**
- * @publicApi
- */
 export class ClientTCP extends ClientProxy {
   protected connection: Promise<any>;
   private readonly logger = new Logger(ClientTCP.name);
   private readonly port: number;
   private readonly host: string;
-  private readonly socketClass: Type<TcpSocket>;
   private isConnected = false;
-  private socket: TcpSocket;
-  public tlsOptions?: ConnectionOptions;
+  private socket: JsonSocket;
 
   constructor(options: TcpClientOptions['options']) {
     super();
     this.port = this.getOptionsProp(options, 'port') || TCP_DEFAULT_PORT;
     this.host = this.getOptionsProp(options, 'host') || TCP_DEFAULT_HOST;
-    this.socketClass =
-      this.getOptionsProp(options, 'socketClass') || JsonSocket;
-    this.tlsOptions = this.getOptionsProp(options, 'tlsOptions');
 
     this.initializeSerializer(options);
     this.initializeDeserializer(options);
   }
 
   public connect(): Promise<any> {
-    if (this.connection) {
+    if (this.isConnected && this.connection) {
       return this.connection;
     }
     this.socket = this.createSocket();
@@ -59,10 +49,7 @@ export class ClientTCP extends ClientProxy {
       share(),
     );
 
-    // For TLS connections, the connection is initiated when the socket is created
-    if (!this.tlsOptions) {
-      this.socket.connect(this.port, this.host);
-    }
+    this.socket.connect(this.port, this.host);
     this.connection = lastValueFrom(source$).catch(err => {
       if (err instanceof EmptyError) {
         return;
@@ -93,22 +80,8 @@ export class ClientTCP extends ClientProxy {
     });
   }
 
-  public createSocket(): TcpSocket {
-    let socket: net.Socket | TLSSocket;
-    /**
-     * TLS enabled, "upgrade" the TCP Socket to TLS
-     */
-    if (this.tlsOptions) {
-      socket = tlsConnect({
-        ...this.tlsOptions,
-        port: this.port,
-        host: this.host,
-        socket,
-      });
-    } else {
-      socket = new net.Socket();
-    }
-    return new this.socketClass(socket);
+  public createSocket(): JsonSocket {
+    return new JsonSocket(new net.Socket());
   }
 
   public close() {
@@ -116,7 +89,7 @@ export class ClientTCP extends ClientProxy {
     this.handleClose();
   }
 
-  public bindEvents(socket: TcpSocket) {
+  public bindEvents(socket: JsonSocket) {
     socket.on(
       ERROR_EVENT,
       (err: any) => err.code !== ECONNREFUSED && this.handleError(err),
@@ -131,15 +104,6 @@ export class ClientTCP extends ClientProxy {
   public handleClose() {
     this.isConnected = false;
     this.socket = null;
-    this.connection = undefined;
-
-    if (this.routingMap.size > 0) {
-      const err = new Error('Connection closed');
-      for (const callback of this.routingMap.values()) {
-        callback({ err });
-      }
-      this.routingMap.clear();
-    }
   }
 
   protected publish(
diff --git a/packages/microservices/constants.ts b/packages/microservices/constants.ts
index 0d5868f5b..7999319b4 100644
--- a/packages/microservices/constants.ts
+++ b/packages/microservices/constants.ts
@@ -2,10 +2,7 @@ import { ROUTE_ARGS_METADATA } from '@nestjs/common/constants';
 
 export const TCP_DEFAULT_PORT = 3000;
 export const TCP_DEFAULT_HOST = 'localhost';
-
-export const REDIS_DEFAULT_PORT = 6379;
-export const REDIS_DEFAULT_HOST = 'localhost';
-
+export const REDIS_DEFAULT_URL = 'redis://localhost:6379';
 export const NATS_DEFAULT_URL = 'nats://localhost:4222';
 export const MQTT_DEFAULT_URL = 'mqtt://localhost:1883';
 export const GRPC_DEFAULT_URL = 'localhost:5000';
@@ -14,7 +11,6 @@ export const KAFKA_DEFAULT_BROKER = 'localhost:9092';
 
 export const CONNECT_EVENT = 'connect';
 export const DISCONNECT_EVENT = 'disconnect';
-export const CONNECT_FAILED_EVENT = 'connectFailed';
 export const MESSAGE_EVENT = 'message';
 export const DATA_EVENT = 'data';
 export const ERROR_EVENT = 'error';
@@ -23,7 +19,6 @@ export const SUBSCRIBE = 'subscribe';
 export const CANCEL_EVENT = 'cancelled';
 
 export const PATTERN_METADATA = 'microservices:pattern';
-export const PATTERN_EXTRAS_METADATA = 'microservices:pattern_extras';
 export const TRANSPORT_METADATA = 'microservices:transport';
 export const CLIENT_CONFIGURATION_METADATA = 'microservices:client';
 export const PATTERN_HANDLER_METADATA = 'microservices:handler_type';
@@ -39,13 +34,10 @@ export const RQM_DEFAULT_IS_GLOBAL_PREFETCH_COUNT = false;
 export const RQM_DEFAULT_QUEUE_OPTIONS = {};
 export const RQM_DEFAULT_NOACK = true;
 export const RQM_DEFAULT_PERSISTENT = false;
-export const RQM_DEFAULT_NO_ASSERT = false;
 export const GRPC_DEFAULT_PROTO_LOADER = '@grpc/proto-loader';
 
-export const NO_EVENT_HANDLER = (text: TemplateStringsArray, pattern: string) =>
-  `There is no matching event handler defined in the remote service. Event pattern: ${pattern}`;
 export const NO_MESSAGE_HANDLER = `There is no matching message handler defined in the remote service.`;
-
+export const NO_EVENT_HANDLER = `There is no matching event handler defined in the remote service.`;
 export const DISCONNECTED_RMQ_MESSAGE = `Disconnected from RMQ. Trying to reconnect.`;
 
 export const KAFKA_DEFAULT_CLIENT = 'nestjs-consumer';
@@ -58,6 +50,3 @@ export const MQTT_WILDCARD_ALL = '#';
 export const ECONNREFUSED = 'ECONNREFUSED';
 export const CONN_ERR = 'CONN_ERR';
 export const EADDRINUSE = 'EADDRINUSE';
-
-export const CONNECTION_FAILED_MESSAGE =
-  'Connection to transport failed. Trying to reconnect...';
diff --git a/packages/microservices/context/exception-filters-context.ts b/packages/microservices/context/exception-filters-context.ts
index 14d42da91..3f8ab49bd 100644
--- a/packages/microservices/context/exception-filters-context.ts
+++ b/packages/microservices/context/exception-filters-context.ts
@@ -6,13 +6,10 @@ import { BaseExceptionFilterContext } from '@nestjs/core/exceptions/base-excepti
 import { STATIC_CONTEXT } from '@nestjs/core/injector/constants';
 import { NestContainer } from '@nestjs/core/injector/container';
 import { InstanceWrapper } from '@nestjs/core/injector/instance-wrapper';
-import { iterate } from 'iterare';
 import { Observable } from 'rxjs';
 import { RpcExceptionsHandler } from '../exceptions/rpc-exceptions-handler';
+import { iterate } from 'iterare';
 
-/**
- * @publicApi
- */
 export class ExceptionFiltersContext extends BaseExceptionFilterContext {
   constructor(
     container: NestContainer,
@@ -56,12 +53,7 @@ export class ExceptionFiltersContext extends BaseExceptionFilterContext {
     const scopedFilterWrappers =
       this.config.getGlobalRequestFilters() as InstanceWrapper[];
     const scopedFilters = iterate(scopedFilterWrappers)
-      .map(wrapper =>
-        wrapper.getInstanceByContextId(
-          this.getContextId(contextId, wrapper),
-          inquirerId,
-        ),
-      )
+      .map(wrapper => wrapper.getInstanceByContextId(contextId, inquirerId))
       .filter(host => !!host)
       .map(host => host.instance)
       .toArray();
diff --git a/packages/microservices/context/request-context-host.ts b/packages/microservices/context/request-context-host.ts
index f15eb29d8..2d221cca7 100644
--- a/packages/microservices/context/request-context-host.ts
+++ b/packages/microservices/context/request-context-host.ts
@@ -1,9 +1,6 @@
 import { BaseRpcContext } from '../ctx-host/base-rpc.context';
 import { RequestContext } from '../interfaces';
 
-/**
- * @publicApi
- */
 export class RequestContextHost<
   TData = any,
   TContext extends BaseRpcContext = any,
diff --git a/packages/microservices/context/rpc-context-creator.ts b/packages/microservices/context/rpc-context-creator.ts
index a7ee74e02..003cd646c 100644
--- a/packages/microservices/context/rpc-context-creator.ts
+++ b/packages/microservices/context/rpc-context-creator.ts
@@ -1,5 +1,5 @@
 import {
-  CUSTOM_ROUTE_ARGS_METADATA,
+  CUSTOM_ROUTE_AGRS_METADATA,
   PARAMTYPES_METADATA,
 } from '@nestjs/common/constants';
 import {
@@ -225,7 +225,7 @@ export class RpcContextCreator {
         this.pipesContextCreator.createConcreteContext(pipesCollection);
       const type = this.contextUtils.mapParamType(key);
 
-      if (key.includes(CUSTOM_ROUTE_ARGS_METADATA)) {
+      if (key.includes(CUSTOM_ROUTE_AGRS_METADATA)) {
         const { factory } = metadata[key];
         const customExtractValue = this.contextUtils.getCustomFactory(
           factory,
diff --git a/packages/microservices/context/rpc-proxy.ts b/packages/microservices/context/rpc-proxy.ts
index 521d5b7cd..6d30b4591 100644
--- a/packages/microservices/context/rpc-proxy.ts
+++ b/packages/microservices/context/rpc-proxy.ts
@@ -1,5 +1,6 @@
+import { isFunction } from '@nestjs/common/utils/shared.utils';
 import { ExecutionContextHost } from '@nestjs/core/helpers/execution-context-host';
-import { isObservable, Observable } from 'rxjs';
+import { Observable } from 'rxjs';
 import { catchError } from 'rxjs/operators';
 import { RpcExceptionsHandler } from '../exceptions/rpc-exceptions-handler';
 
@@ -11,7 +12,7 @@ export class RpcProxy {
     return async (...args: unknown[]) => {
       try {
         const result = await targetCallback(...args);
-        return !isObservable(result)
+        return !this.isObservable(result)
           ? result
           : result.pipe(
               catchError(error =>
@@ -33,4 +34,8 @@ export class RpcProxy {
     host.setType('rpc');
     return exceptionsHandler.handle(error, host);
   }
+
+  isObservable(result: any): boolean {
+    return result && isFunction(result.subscribe);
+  }
 }
diff --git a/packages/microservices/ctx-host/index.ts b/packages/microservices/ctx-host/index.ts
index 9d871dee2..923346e48 100644
--- a/packages/microservices/ctx-host/index.ts
+++ b/packages/microservices/ctx-host/index.ts
@@ -4,4 +4,3 @@ export * from './nats.context';
 export * from './redis.context';
 export * from './rmq.context';
 export * from './tcp.context';
-export * from './base-rpc.context';
diff --git a/packages/microservices/ctx-host/kafka.context.ts b/packages/microservices/ctx-host/kafka.context.ts
index 4ba1663c8..922ccb9c5 100644
--- a/packages/microservices/ctx-host/kafka.context.ts
+++ b/packages/microservices/ctx-host/kafka.context.ts
@@ -1,14 +1,7 @@
-import { Consumer, KafkaMessage, Producer } from '../external/kafka.interface';
+import { KafkaMessage } from '../external/kafka.interface';
 import { BaseRpcContext } from './base-rpc.context';
 
-type KafkaContextArgs = [
-  message: KafkaMessage,
-  partition: number,
-  topic: string,
-  consumer: Consumer,
-  heartbeat: () => Promise<void>,
-  producer: Producer,
-];
+type KafkaContextArgs = [KafkaMessage, number, string];
 
 export class KafkaContext extends BaseRpcContext<KafkaContextArgs> {
   constructor(args: KafkaContextArgs) {
@@ -35,25 +28,4 @@ export class KafkaContext extends BaseRpcContext<KafkaContextArgs> {
   getTopic() {
     return this.args[2];
   }
-
-  /**
-   * Returns the Kafka consumer reference.
-   */
-  getConsumer() {
-    return this.args[3];
-  }
-
-  /**
-   * Returns the Kafka heartbeat callback.
-   */
-  getHeartbeat() {
-    return this.args[4];
-  }
-
-  /**
-   * Returns the Kafka producer reference,
-   */
-  getProducer() {
-    return this.args[5];
-  }
 }
diff --git a/packages/microservices/ctx-host/mqtt.context.ts b/packages/microservices/ctx-host/mqtt.context.ts
index 3b953516a..0693c35d3 100644
--- a/packages/microservices/ctx-host/mqtt.context.ts
+++ b/packages/microservices/ctx-host/mqtt.context.ts
@@ -15,7 +15,7 @@ export class MqttContext extends BaseRpcContext<MqttContextArgs> {
   }
 
   /**
-   * Returns the reference to the original MQTT packet.
+   * Returns the refernce to the original MQTT packet.
    */
   getPacket() {
     return this.args[1];
diff --git a/packages/microservices/ctx-host/tcp.context.ts b/packages/microservices/ctx-host/tcp.context.ts
index 1f1c6a28d..a858ea442 100644
--- a/packages/microservices/ctx-host/tcp.context.ts
+++ b/packages/microservices/ctx-host/tcp.context.ts
@@ -1,7 +1,7 @@
-import { TcpSocket } from '../helpers';
+import { JsonSocket } from '../helpers/json-socket';
 import { BaseRpcContext } from './base-rpc.context';
 
-type TcpContextArgs = [TcpSocket, string];
+type TcpContextArgs = [JsonSocket, string];
 
 export class TcpContext extends BaseRpcContext<TcpContextArgs> {
   constructor(args: TcpContextArgs) {
diff --git a/packages/microservices/decorators/client.decorator.ts b/packages/microservices/decorators/client.decorator.ts
index 48848b6a4..53d99d4fb 100644
--- a/packages/microservices/decorators/client.decorator.ts
+++ b/packages/microservices/decorators/client.decorator.ts
@@ -5,9 +5,6 @@ import { ClientOptions } from '../interfaces/client-metadata.interface';
  * Attaches the `ClientProxy` instance to the given property
  *
  * @param  {ClientOptions} metadata optional client metadata
- *
- * @publicApi
- *
  */
 export function Client(metadata?: ClientOptions): PropertyDecorator {
   return (target: object, propertyKey: string | symbol): void => {
diff --git a/packages/microservices/decorators/event-pattern.decorator.ts b/packages/microservices/decorators/event-pattern.decorator.ts
index ead1830b9..5fe9561df 100644
--- a/packages/microservices/decorators/event-pattern.decorator.ts
+++ b/packages/microservices/decorators/event-pattern.decorator.ts
@@ -1,74 +1,30 @@
-import {
-  isObject,
-  isNumber,
-  isNil,
-  isSymbol,
-} from '@nestjs/common/utils/shared.utils';
 import {
   PATTERN_HANDLER_METADATA,
   PATTERN_METADATA,
   TRANSPORT_METADATA,
-  PATTERN_EXTRAS_METADATA,
 } from '../constants';
 import { PatternHandler } from '../enums/pattern-handler.enum';
 import { Transport } from '../enums';
 
 /**
  * Subscribes to incoming events which fulfils chosen pattern.
- *
- * @publicApi
  */
-export const EventPattern: {
-  <T = string>(metadata?: T): MethodDecorator;
-  <T = string>(metadata?: T, transport?: Transport | symbol): MethodDecorator;
-  <T = string>(metadata?: T, extras?: Record<string, any>): MethodDecorator;
-  <T = string>(
-    metadata?: T,
-    transport?: Transport | symbol,
-    extras?: Record<string, any>,
-  ): MethodDecorator;
-} = <T = string>(
+export const EventPattern = <T = string>(
   metadata?: T,
-  transportOrExtras?: Transport | symbol | Record<string, any>,
-  maybeExtras?: Record<string, any>,
+  transport?: Transport,
 ): MethodDecorator => {
-  let transport: Transport | symbol;
-  let extras: Record<string, any>;
-  if (
-    (isNumber(transportOrExtras) || isSymbol(transportOrExtras)) &&
-    isNil(maybeExtras)
-  ) {
-    transport = transportOrExtras;
-  } else if (isObject(transportOrExtras) && isNil(maybeExtras)) {
-    extras = transportOrExtras;
-  } else {
-    transport = transportOrExtras as Transport | symbol;
-    extras = maybeExtras;
-  }
   return (
     target: object,
     key: string | symbol,
     descriptor: PropertyDescriptor,
   ) => {
-    Reflect.defineMetadata(
-      PATTERN_METADATA,
-      [].concat(metadata),
-      descriptor.value,
-    );
+    Reflect.defineMetadata(PATTERN_METADATA, metadata, descriptor.value);
     Reflect.defineMetadata(
       PATTERN_HANDLER_METADATA,
       PatternHandler.EVENT,
       descriptor.value,
     );
     Reflect.defineMetadata(TRANSPORT_METADATA, transport, descriptor.value);
-    Reflect.defineMetadata(
-      PATTERN_EXTRAS_METADATA,
-      {
-        ...Reflect.getMetadata(PATTERN_EXTRAS_METADATA, descriptor.value),
-        ...extras,
-      },
-      descriptor.value,
-    );
     return descriptor;
   };
 };
diff --git a/packages/microservices/decorators/message-pattern.decorator.ts b/packages/microservices/decorators/message-pattern.decorator.ts
index 86d460f1f..936d76703 100644
--- a/packages/microservices/decorators/message-pattern.decorator.ts
+++ b/packages/microservices/decorators/message-pattern.decorator.ts
@@ -1,15 +1,8 @@
-import {
-  isObject,
-  isNumber,
-  isNil,
-  isSymbol,
-} from '@nestjs/common/utils/shared.utils';
 /* eslint-disable @typescript-eslint/no-use-before-define */
 import {
   PATTERN_HANDLER_METADATA,
   PATTERN_METADATA,
   TRANSPORT_METADATA,
-  PATTERN_EXTRAS_METADATA,
 } from '../constants';
 import { PatternHandler } from '../enums/pattern-handler.enum';
 import { PatternMetadata } from '../interfaces/pattern-metadata.interface';
@@ -23,66 +16,23 @@ export enum GrpcMethodStreamingType {
 
 /**
  * Subscribes to incoming messages which fulfils chosen pattern.
- *
- * @publicApi
  */
-export const MessagePattern: {
-  <T = PatternMetadata | string>(metadata?: T): MethodDecorator;
-  <T = PatternMetadata | string>(
-    metadata?: T,
-    transport?: Transport | symbol,
-  ): MethodDecorator;
-  <T = PatternMetadata | string>(
-    metadata?: T,
-    extras?: Record<string, any>,
-  ): MethodDecorator;
-  <T = PatternMetadata | string>(
-    metadata?: T,
-    transport?: Transport | symbol,
-    extras?: Record<string, any>,
-  ): MethodDecorator;
-} = <T = PatternMetadata | string>(
+export const MessagePattern = <T = PatternMetadata | string>(
   metadata?: T,
-  transportOrExtras?: Transport | symbol | Record<string, any>,
-  maybeExtras?: Record<string, any>,
+  transport?: Transport,
 ): MethodDecorator => {
-  let transport: Transport | symbol;
-  let extras: Record<string, any>;
-  if (
-    (isNumber(transportOrExtras) || isSymbol(transportOrExtras)) &&
-    isNil(maybeExtras)
-  ) {
-    transport = transportOrExtras;
-  } else if (isObject(transportOrExtras) && isNil(maybeExtras)) {
-    extras = transportOrExtras;
-  } else {
-    transport = transportOrExtras as Transport | symbol;
-    extras = maybeExtras;
-  }
   return (
     target: object,
     key: string | symbol,
     descriptor: PropertyDescriptor,
   ) => {
-    Reflect.defineMetadata(
-      PATTERN_METADATA,
-      [].concat(metadata),
-      descriptor.value,
-    );
+    Reflect.defineMetadata(PATTERN_METADATA, metadata, descriptor.value);
     Reflect.defineMetadata(
       PATTERN_HANDLER_METADATA,
       PatternHandler.MESSAGE,
       descriptor.value,
     );
     Reflect.defineMetadata(TRANSPORT_METADATA, transport, descriptor.value);
-    Reflect.defineMetadata(
-      PATTERN_EXTRAS_METADATA,
-      {
-        ...Reflect.getMetadata(PATTERN_EXTRAS_METADATA, descriptor.value),
-        ...extras,
-      },
-      descriptor.value,
-    );
     return descriptor;
   };
 };
diff --git a/packages/microservices/deserializers/identity.deserializer.ts b/packages/microservices/deserializers/identity.deserializer.ts
index 7a6d1e0d4..9eccb6621 100644
--- a/packages/microservices/deserializers/identity.deserializer.ts
+++ b/packages/microservices/deserializers/identity.deserializer.ts
@@ -1,8 +1,5 @@
 import { Deserializer } from '../interfaces/deserializer.interface';
 
-/**
- * @publicApi
- */
 export class IdentityDeserializer implements Deserializer {
   deserialize(value: any) {
     return value;
diff --git a/packages/microservices/deserializers/incoming-request.deserializer.ts b/packages/microservices/deserializers/incoming-request.deserializer.ts
index 537e9b715..3e3a6f6f0 100644
--- a/packages/microservices/deserializers/incoming-request.deserializer.ts
+++ b/packages/microservices/deserializers/incoming-request.deserializer.ts
@@ -5,9 +5,6 @@ import {
   IncomingRequest,
 } from '../interfaces';
 
-/**
- * @publicApi
- */
 export class IncomingRequestDeserializer implements ConsumerDeserializer {
   deserialize(
     value: any,
diff --git a/packages/microservices/deserializers/incoming-response.deserializer.ts b/packages/microservices/deserializers/incoming-response.deserializer.ts
index 55ecc4684..5ea343b1f 100644
--- a/packages/microservices/deserializers/incoming-response.deserializer.ts
+++ b/packages/microservices/deserializers/incoming-response.deserializer.ts
@@ -1,9 +1,6 @@
 import { isUndefined } from '@nestjs/common/utils/shared.utils';
 import { IncomingResponse, ProducerDeserializer } from '../interfaces';
 
-/**
- * @publicApi
- */
 export class IncomingResponseDeserializer implements ProducerDeserializer {
   deserialize(value: any, options?: Record<string, any>): IncomingResponse {
     return this.isExternal(value) ? this.mapToSchema(value) : value;
diff --git a/packages/microservices/deserializers/index.ts b/packages/microservices/deserializers/index.ts
deleted file mode 100644
index 21fdbeb26..000000000
--- a/packages/microservices/deserializers/index.ts
+++ /dev/null
@@ -1,7 +0,0 @@
-export * from './identity.deserializer';
-export * from './incoming-request.deserializer';
-export * from './incoming-response.deserializer';
-export * from './kafka-request.deserializer';
-export * from './kafka-response.deserializer';
-export * from './nats-request-json.deserializer';
-export * from './nats-response-json.deserializer';
diff --git a/packages/microservices/deserializers/kafka-request.deserializer.ts b/packages/microservices/deserializers/kafka-request.deserializer.ts
deleted file mode 100644
index 359321728..000000000
--- a/packages/microservices/deserializers/kafka-request.deserializer.ts
+++ /dev/null
@@ -1,24 +0,0 @@
-import { IncomingEvent, IncomingRequest } from '../interfaces';
-import { KafkaRequest } from '../serializers/kafka-request.serializer';
-import { IncomingRequestDeserializer } from './incoming-request.deserializer';
-
-/**
- * @publicApi
- */
-export class KafkaRequestDeserializer extends IncomingRequestDeserializer {
-  mapToSchema(
-    data: KafkaRequest,
-    options?: Record<string, any>,
-  ): IncomingRequest | IncomingEvent {
-    if (!options) {
-      return {
-        pattern: undefined,
-        data: undefined,
-      };
-    }
-    return {
-      pattern: options.channel,
-      data: data?.value ?? data,
-    };
-  }
-}
diff --git a/packages/microservices/deserializers/kafka-response.deserializer.ts b/packages/microservices/deserializers/kafka-response.deserializer.ts
index 93d2977b2..2b5385458 100644
--- a/packages/microservices/deserializers/kafka-response.deserializer.ts
+++ b/packages/microservices/deserializers/kafka-response.deserializer.ts
@@ -2,9 +2,6 @@ import { isUndefined } from '@nestjs/common/utils/shared.utils';
 import { KafkaHeaders } from '../enums/kafka-headers.enum';
 import { Deserializer, IncomingResponse } from '../interfaces';
 
-/**
- * @publicApi
- */
 export class KafkaResponseDeserializer
   implements Deserializer<any, IncomingResponse>
 {
diff --git a/packages/microservices/deserializers/nats-request-json.deserializer.ts b/packages/microservices/deserializers/nats-request-json.deserializer.ts
index 68763e17f..e46851751 100644
--- a/packages/microservices/deserializers/nats-request-json.deserializer.ts
+++ b/packages/microservices/deserializers/nats-request-json.deserializer.ts
@@ -5,9 +5,6 @@ import { IncomingRequestDeserializer } from './incoming-request.deserializer';
 
 let natsPackage = {} as any;
 
-/**
- * @publicApi
- */
 export class NatsRequestJSONDeserializer extends IncomingRequestDeserializer {
   private readonly jsonCodec: NatsCodec<unknown>;
 
diff --git a/packages/microservices/deserializers/nats-response-json.deserializer.ts b/packages/microservices/deserializers/nats-response-json.deserializer.ts
index 51a809726..70787afc7 100644
--- a/packages/microservices/deserializers/nats-response-json.deserializer.ts
+++ b/packages/microservices/deserializers/nats-response-json.deserializer.ts
@@ -6,9 +6,6 @@ import { NatsRequestJSONDeserializer } from './nats-request-json.deserializer';
 
 let natsPackage = {} as any;
 
-/**
- * @publicApi
- */
 export class NatsResponseJSONDeserializer extends IncomingResponseDeserializer {
   private readonly jsonCodec: NatsCodec<unknown>;
 
diff --git a/packages/microservices/enums/kafka-headers.enum.ts b/packages/microservices/enums/kafka-headers.enum.ts
index 82d5eead2..c4c622873 100644
--- a/packages/microservices/enums/kafka-headers.enum.ts
+++ b/packages/microservices/enums/kafka-headers.enum.ts
@@ -1,7 +1,5 @@
 /**
  * @see https://docs.spring.io/spring-kafka/api/org/springframework/kafka/support/KafkaHeaders.html
- *
- * @publicApi
  */
 export enum KafkaHeaders {
   ACKNOWLEDGMENT = 'kafka_acknowledgment',
diff --git a/packages/microservices/errors/corrupted-packet-length.exception.ts b/packages/microservices/errors/corrupted-packet-length.exception.ts
index 8dea792c5..c00e20a6e 100644
--- a/packages/microservices/errors/corrupted-packet-length.exception.ts
+++ b/packages/microservices/errors/corrupted-packet-length.exception.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export class CorruptedPacketLengthException extends Error {
   constructor(rawContentLength: string) {
     super(`Corrupted length value "${rawContentLength}" supplied in a packet`);
diff --git a/packages/microservices/errors/empty-response.exception.ts b/packages/microservices/errors/empty-response.exception.ts
index 1151f8dc4..d0b0d7330 100644
--- a/packages/microservices/errors/empty-response.exception.ts
+++ b/packages/microservices/errors/empty-response.exception.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export class EmptyResponseException extends Error {
   constructor(pattern: string) {
     super(
diff --git a/packages/microservices/errors/invalid-grpc-package.exception.ts b/packages/microservices/errors/invalid-grpc-package.exception.ts
index a0599e457..d9f044f33 100644
--- a/packages/microservices/errors/invalid-grpc-package.exception.ts
+++ b/packages/microservices/errors/invalid-grpc-package.exception.ts
@@ -1,10 +1,7 @@
 import { RuntimeException } from '@nestjs/core/errors/exceptions/runtime.exception';
 
-/**
- * @publicApi
- */
 export class InvalidGrpcPackageException extends RuntimeException {
-  constructor(name: string) {
-    super(`The invalid gRPC package (package "${name}" not found)`);
+  constructor() {
+    super('The invalid gRPC package (package not found)');
   }
 }
diff --git a/packages/microservices/errors/invalid-grpc-service.exception.ts b/packages/microservices/errors/invalid-grpc-service.exception.ts
index 1da6a18c8..0a0a1d489 100644
--- a/packages/microservices/errors/invalid-grpc-service.exception.ts
+++ b/packages/microservices/errors/invalid-grpc-service.exception.ts
@@ -1,10 +1,7 @@
 import { RuntimeException } from '@nestjs/core/errors/exceptions/runtime.exception';
 
-/**
- * @publicApi
- */
 export class InvalidGrpcServiceException extends RuntimeException {
-  constructor(name: string) {
-    super(`The invalid gRPC service (service "${name}" not found)`);
+  constructor() {
+    super(`The invalid gRPC service (service not found)`);
   }
 }
diff --git a/packages/microservices/errors/invalid-json-format.exception.ts b/packages/microservices/errors/invalid-json-format.exception.ts
index ac830a49b..ef7f69108 100644
--- a/packages/microservices/errors/invalid-json-format.exception.ts
+++ b/packages/microservices/errors/invalid-json-format.exception.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export class InvalidJSONFormatException extends Error {
   constructor(err: Error, data: string) {
     super(`Could not parse JSON: ${err.message}\nRequest data: ${data}`);
diff --git a/packages/microservices/errors/invalid-kafka-client-topic.exception.ts b/packages/microservices/errors/invalid-kafka-client-topic.exception.ts
index 12871369f..aa0062569 100644
--- a/packages/microservices/errors/invalid-kafka-client-topic.exception.ts
+++ b/packages/microservices/errors/invalid-kafka-client-topic.exception.ts
@@ -1,8 +1,5 @@
 import { RuntimeException } from '@nestjs/core/errors/exceptions/runtime.exception';
 
-/**
- * @publicApi
- */
 export class InvalidKafkaClientTopicException extends RuntimeException {
   constructor(topic?: string) {
     super(
diff --git a/packages/microservices/errors/invalid-message.exception.ts b/packages/microservices/errors/invalid-message.exception.ts
index 6b8c0e9ee..cc1627b87 100644
--- a/packages/microservices/errors/invalid-message.exception.ts
+++ b/packages/microservices/errors/invalid-message.exception.ts
@@ -1,8 +1,5 @@
 import { RuntimeException } from '@nestjs/core/errors/exceptions/runtime.exception';
 
-/**
- * @publicApi
- */
 export class InvalidMessageException extends RuntimeException {
   constructor() {
     super(`The invalid data or message pattern (undefined/null)`);
diff --git a/packages/microservices/errors/invalid-proto-definition.exception.ts b/packages/microservices/errors/invalid-proto-definition.exception.ts
index 28ce445a0..ac2d2c8f8 100644
--- a/packages/microservices/errors/invalid-proto-definition.exception.ts
+++ b/packages/microservices/errors/invalid-proto-definition.exception.ts
@@ -1,10 +1,7 @@
 import { RuntimeException } from '@nestjs/core/errors/exceptions/runtime.exception';
 
-/**
- * @publicApi
- */
 export class InvalidProtoDefinitionException extends RuntimeException {
-  constructor(path: string) {
-    super(`The invalid .proto definition (file at "${path}" not found)`);
+  constructor() {
+    super('The invalid .proto definition (file not found)');
   }
 }
diff --git a/packages/microservices/errors/net-socket-closed.exception.ts b/packages/microservices/errors/net-socket-closed.exception.ts
index 9f20bbd0d..3453aaaa7 100644
--- a/packages/microservices/errors/net-socket-closed.exception.ts
+++ b/packages/microservices/errors/net-socket-closed.exception.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export class NetSocketClosedException extends Error {
   constructor() {
     super(`The net socket is closed.`);
diff --git a/packages/microservices/exceptions/base-rpc-exception-filter.ts b/packages/microservices/exceptions/base-rpc-exception-filter.ts
index 837330fac..d7783d40b 100644
--- a/packages/microservices/exceptions/base-rpc-exception-filter.ts
+++ b/packages/microservices/exceptions/base-rpc-exception-filter.ts
@@ -5,9 +5,6 @@ import { MESSAGES } from '@nestjs/core/constants';
 import { Observable, throwError as _throw } from 'rxjs';
 import { RpcException } from './rpc-exception';
 
-/**
- * @publicApi
- */
 export class BaseRpcExceptionFilter<T = any, R = any>
   implements RpcExceptionFilter<T>
 {
@@ -20,7 +17,7 @@ export class BaseRpcExceptionFilter<T = any, R = any>
     }
     const res = exception.getError();
     const message = isObject(res) ? res : { status, message: res };
-    return _throw(() => message);
+    return _throw(message);
   }
 
   public handleUnknownError(exception: T, status: string) {
@@ -32,7 +29,7 @@ export class BaseRpcExceptionFilter<T = any, R = any>
     const logger = BaseRpcExceptionFilter.logger;
     logger.error.apply(logger, loggerArgs as any);
 
-    return _throw(() => ({ status, message: errorMessage }));
+    return _throw({ status, message: errorMessage });
   }
 
   public isError(exception: any): exception is Error {
diff --git a/packages/microservices/exceptions/index.ts b/packages/microservices/exceptions/index.ts
index 73e4c3176..dd6e4d298 100644
--- a/packages/microservices/exceptions/index.ts
+++ b/packages/microservices/exceptions/index.ts
@@ -1,3 +1,2 @@
 export * from './base-rpc-exception-filter';
-export * from './kafka-retriable-exception';
 export * from './rpc-exception';
diff --git a/packages/microservices/exceptions/kafka-retriable-exception.ts b/packages/microservices/exceptions/kafka-retriable-exception.ts
deleted file mode 100644
index c62194a2e..000000000
--- a/packages/microservices/exceptions/kafka-retriable-exception.ts
+++ /dev/null
@@ -1,17 +0,0 @@
-import { RpcException } from './rpc-exception';
-
-/**
- * Exception that instructs Kafka driver to instead of introspecting
- * error processing flow and sending serialized error message to the consumer,
- * force bubble it up to the "eachMessage" callback of the underlying "kafkajs" package
- * (even if interceptors are applied, or an observable stream is returned from the message handler).
- *
- * A transient exception that if retried may succeed.
- *
- * @publicApi
- */
-export class KafkaRetriableException extends RpcException {
-  public getError(): string | object {
-    return this;
-  }
-}
diff --git a/packages/microservices/exceptions/rpc-exception.ts b/packages/microservices/exceptions/rpc-exception.ts
index 60d77f5c1..1d59c61c7 100644
--- a/packages/microservices/exceptions/rpc-exception.ts
+++ b/packages/microservices/exceptions/rpc-exception.ts
@@ -1,8 +1,5 @@
 import { isObject, isString } from '@nestjs/common/utils/shared.utils';
 
-/**
- * @publicApi
- */
 export class RpcException extends Error {
   constructor(private readonly error: string | object) {
     super();
diff --git a/packages/microservices/exceptions/rpc-exceptions-handler.ts b/packages/microservices/exceptions/rpc-exceptions-handler.ts
index 97ee23270..7815c80d1 100644
--- a/packages/microservices/exceptions/rpc-exceptions-handler.ts
+++ b/packages/microservices/exceptions/rpc-exceptions-handler.ts
@@ -1,15 +1,11 @@
-import { isEmpty } from '@nestjs/common/utils/shared.utils';
-import { Observable } from 'rxjs';
-import { ArgumentsHost } from '@nestjs/common/interfaces/features/arguments-host.interface';
 import { RpcExceptionFilterMetadata } from '@nestjs/common/interfaces/exceptions';
-import { selectExceptionFilterMetadata } from '@nestjs/common/utils/select-exception-filter-metadata.util';
+import { ArgumentsHost } from '@nestjs/common/interfaces/features/arguments-host.interface';
+import { isEmpty } from '@nestjs/common/utils/shared.utils';
 import { InvalidExceptionFilterException } from '@nestjs/core/errors/exceptions/invalid-exception-filter.exception';
-import { RpcException } from './rpc-exception';
+import { Observable } from 'rxjs';
 import { BaseRpcExceptionFilter } from './base-rpc-exception-filter';
+import { RpcException } from './rpc-exception';
 
-/**
- * @publicApi
- */
 export class RpcExceptionsHandler extends BaseRpcExceptionFilter {
   private filters: RpcExceptionFilterMetadata[] = [];
 
@@ -38,8 +34,14 @@ export class RpcExceptionsHandler extends BaseRpcExceptionFilter {
     if (isEmpty(this.filters)) {
       return null;
     }
-
-    const filter = selectExceptionFilterMetadata(this.filters, exception);
+    const filter = this.filters.find(({ exceptionMetatypes }) => {
+      const hasMetatype =
+        !exceptionMetatypes.length ||
+        exceptionMetatypes.some(
+          ExceptionMetatype => exception instanceof ExceptionMetatype,
+        );
+      return hasMetatype;
+    });
     return filter ? filter.func(exception, host) : null;
   }
 }
diff --git a/packages/microservices/external/grpc-options.interface.ts b/packages/microservices/external/grpc-options.interface.ts
index 51ceac477..f00fb4cb7 100644
--- a/packages/microservices/external/grpc-options.interface.ts
+++ b/packages/microservices/external/grpc-options.interface.ts
@@ -1,8 +1,6 @@
 /**
  * An interface that contains options used when initializing a Channel instance.
  * This listing is incomplete. Full reference: https://grpc.github.io/grpc/core/group__grpc__arg__keys.html
- *
- * @publicApi
  */
 export interface ChannelOptions {
   'grpc.max_send_message_length'?: number;
@@ -18,5 +16,5 @@ export interface ChannelOptions {
   'grpc.max_reconnect_backoff_ms'?: number;
   'grpc.use_local_subchannel_pool'?: number;
   'grpc-node.max_session_memory'?: number;
-  [key: string]: any;
+  [key: string]: string | number | undefined;
 }
diff --git a/packages/microservices/external/kafka.interface.ts b/packages/microservices/external/kafka.interface.ts
index ed7a07bef..ea7a29a4c 100644
--- a/packages/microservices/external/kafka.interface.ts
+++ b/packages/microservices/external/kafka.interface.ts
@@ -2,12 +2,10 @@
  * Do NOT add NestJS logic to this interface.  It is meant to ONLY represent the types for the kafkajs package.
  *
  * @see https://github.com/tulios/kafkajs/blob/master/types/index.d.ts
- *
- * @publicApi
- *
  */
 
 /// <reference types="node" />
+
 import * as net from 'net';
 import * as tls from 'tls';
 
@@ -19,44 +17,17 @@ type XOR<T, U> = T | U extends object
 export declare class Kafka {
   constructor(config: KafkaConfig);
   producer(config?: ProducerConfig): Producer;
-  consumer(config: ConsumerConfig): Consumer;
+  consumer(config?: ConsumerConfig): Consumer;
   admin(config?: AdminConfig): Admin;
   logger(): Logger;
 }
 
 export type BrokersFunction = () => string[] | Promise<string[]>;
 
-type SaslAuthenticationRequest = {
-  encode: () => Buffer | Promise<Buffer>;
-};
-type SaslAuthenticationResponse<ParseResult> = {
-  decode: (rawResponse: Buffer) => Buffer | Promise<Buffer>;
-  parse: (data: Buffer) => ParseResult;
-};
-
-type Authenticator = {
-  authenticate: () => Promise<void>;
-};
-
-type AuthenticationProviderArgs = {
-  host: string;
-  port: number;
-  logger: Logger;
-  saslAuthenticate: <ParseResult>(
-    request: SaslAuthenticationRequest,
-    response?: SaslAuthenticationResponse<ParseResult>,
-  ) => Promise<ParseResult | void>;
-};
-
-type Mechanism = {
-  mechanism: string;
-  authenticationProvider: (args: AuthenticationProviderArgs) => Authenticator;
-};
-
 export interface KafkaConfig {
   brokers: string[] | BrokersFunction;
   ssl?: tls.ConnectionOptions | boolean;
-  sasl?: SASLOptions | Mechanism;
+  sasl?: SASLOptions;
   clientId?: string;
   connectionTimeout?: number;
   authenticationTimeout?: number;
@@ -130,18 +101,11 @@ export interface PartitionerArgs {
 
 export type ICustomPartitioner = () => (args: PartitionerArgs) => number;
 export type DefaultPartitioner = ICustomPartitioner;
-export type LegacyPartitioner = ICustomPartitioner;
+export type JavaCompatiblePartitioner = ICustomPartitioner;
 
 export let Partitioners: {
   DefaultPartitioner: DefaultPartitioner;
-  LegacyPartitioner: LegacyPartitioner;
-  /**
-   * @deprecated Use DefaultPartitioner instead
-   *
-   * The JavaCompatiblePartitioner was renamed DefaultPartitioner
-   * and made to be the default in 2.0.0.
-   */
-  JavaCompatiblePartitioner: DefaultPartitioner;
+  JavaCompatiblePartitioner: JavaCompatiblePartitioner;
 };
 
 export type PartitionMetadata = {
@@ -154,7 +118,7 @@ export type PartitionMetadata = {
 };
 
 export interface IHeaders {
-  [key: string]: Buffer | string | (Buffer | string)[] | undefined;
+  [key: string]: Buffer | string | undefined;
 }
 
 export interface ConsumerConfig {
@@ -177,11 +141,7 @@ export interface ConsumerConfig {
   rackId?: string;
 }
 
-export type PartitionAssigner = (config: {
-  cluster: Cluster;
-  groupId: string;
-  logger: Logger;
-}) => Assigner;
+export type PartitionAssigner = (config: { cluster: Cluster }) => Assigner;
 
 export interface CoordinatorMetadata {
   errorCode: number;
@@ -193,10 +153,6 @@ export interface CoordinatorMetadata {
 }
 
 export type Cluster = {
-  getNodeIds(): number[];
-  metadata(): Promise<BrokerMetadata>;
-  removeBroker(options: { host: string; port: number }): void;
-  addMultipleTargetTopics(topics: string[]): Promise<void>;
   isConnected(): boolean;
   connect(): Promise<void>;
   disconnect(): Promise<void>;
@@ -222,7 +178,10 @@ export type Cluster = {
         partitions: Array<{ partition: number }>;
       } & XOR<{ fromBeginning: boolean }, { fromTimestamp: number }>
     >,
-  ): Promise<TopicOffsets[]>;
+  ): Promise<{
+    topic: string;
+    partitions: Array<{ partition: number; offset: string }>;
+  }>;
 };
 
 export type Assignment = { [topic: string]: number[] };
@@ -252,7 +211,6 @@ export interface RetryOptions {
   factor?: number;
   multiplier?: number;
   retries?: number;
-  restartOnFailure?: (e: Error) => Promise<boolean>;
 }
 
 export interface AdminConfig {
@@ -264,7 +222,7 @@ export interface ITopicConfig {
   numPartitions?: number;
   replicationFactor?: number;
   replicaAssignment?: object[];
-  configEntries?: IResourceConfigEntry[];
+  configEntries?: object[];
 }
 
 export interface ITopicPartitionConfig {
@@ -278,6 +236,20 @@ export interface ITopicMetadata {
   partitions: PartitionMetadata[];
 }
 
+/**
+ * @deprecated
+ * Use ConfigResourceTypes or AclResourceTypes
+ */
+export enum ResourceTypes {
+  UNKNOWN = 0,
+  ANY = 1,
+  TOPIC = 2,
+  GROUP = 3,
+  CLUSTER = 4,
+  TRANSACTIONAL_ID = 5,
+  DELEGATION_TOKEN = 6,
+}
+
 export enum AclResourceTypes {
   UNKNOWN = 0,
   ANY = 1,
@@ -295,16 +267,6 @@ export enum ConfigResourceTypes {
   BROKER_LOGGER = 8,
 }
 
-export enum ConfigSource {
-  UNKNOWN = 0,
-  TOPIC_CONFIG = 1,
-  DYNAMIC_BROKER_CONFIG = 2,
-  DYNAMIC_DEFAULT_BROKER_CONFIG = 3,
-  STATIC_BROKER_CONFIG = 4,
-  DEFAULT_CONFIG = 5,
-  DYNAMIC_BROKER_LOGGER_CONFIG = 6,
-}
-
 export enum AclPermissionTypes {
   UNKNOWN = 0,
   ANY = 1,
@@ -337,7 +299,7 @@ export enum ResourcePatternTypes {
 }
 
 export interface ResourceConfigQuery {
-  type: ConfigResourceTypes;
+  type: ResourceTypes | ConfigResourceTypes;
   name: string;
   configNames?: string[];
 }
@@ -346,7 +308,6 @@ export interface ConfigEntries {
   configName: string;
   configValue: string;
   isDefault: boolean;
-  configSource: ConfigSource;
   isSensitive: boolean;
   readOnly: boolean;
   configSynonyms: ConfigSynonyms[];
@@ -355,7 +316,7 @@ export interface ConfigEntries {
 export interface ConfigSynonyms {
   configName: string;
   configValue: string;
-  configSource: ConfigSource;
+  configSource: number;
 }
 
 export interface DescribeConfigResponse {
@@ -364,20 +325,15 @@ export interface DescribeConfigResponse {
     errorCode: number;
     errorMessage: string;
     resourceName: string;
-    resourceType: ConfigResourceTypes;
+    resourceType: ResourceTypes | ConfigResourceTypes;
   }[];
   throttleTime: number;
 }
 
-export interface IResourceConfigEntry {
-  name: string;
-  value: string;
-}
-
 export interface IResourceConfig {
-  type: ConfigResourceTypes;
+  type: ResourceTypes | ConfigResourceTypes;
   name: string;
-  configEntries: IResourceConfigEntry[];
+  configEntries: { name: string; value: string }[];
 }
 
 type ValueOf<T> = T[keyof T];
@@ -431,11 +387,11 @@ export type RequestQueueSizeEvent = InstrumentationEvent<{
   queueSize: number;
 }>;
 
-export type SeekEntry = PartitionOffset;
+export interface SeekEntry {
+  partition: number;
+  offset: string;
+}
 
-export type FetchOffsetsPartition = PartitionOffset & {
-  metadata: string | null;
-};
 export interface Acl {
   principal: string;
   host: string;
@@ -452,7 +408,7 @@ export interface AclResource {
 export type AclEntry = Acl & AclResource;
 
 export type DescribeAclResource = AclResource & {
-  acls: Acl[];
+  acl: Acl[];
 };
 
 export interface DescribeAclResponse {
@@ -516,9 +472,9 @@ export type Admin = {
   }): Promise<{ topics: Array<ITopicMetadata> }>;
   fetchOffsets(options: {
     groupId: string;
-    topics?: string[];
+    topic: string;
     resolveOffsets?: boolean;
-  }): Promise<Array<{ topic: string; partitions: FetchOffsetsPartition[] }>>;
+  }): Promise<Array<SeekEntry & { metadata: string | null }>>;
   fetchTopicOffsets(
     topic: string,
   ): Promise<Array<SeekEntry & { high: string; low: string }>>;
@@ -560,31 +516,11 @@ export type Admin = {
     partitions: SeekEntry[];
   }): Promise<void>;
   logger(): Logger;
-  on(
-    eventName: AdminEvents['CONNECT'],
-    listener: (event: ConnectEvent) => void,
-  ): RemoveInstrumentationEventListener<typeof eventName>;
-  on(
-    eventName: AdminEvents['DISCONNECT'],
-    listener: (event: DisconnectEvent) => void,
-  ): RemoveInstrumentationEventListener<typeof eventName>;
-  on(
-    eventName: AdminEvents['REQUEST'],
-    listener: (event: RequestEvent) => void,
-  ): RemoveInstrumentationEventListener<typeof eventName>;
-  on(
-    eventName: AdminEvents['REQUEST_QUEUE_SIZE'],
-    listener: (event: RequestQueueSizeEvent) => void,
-  ): RemoveInstrumentationEventListener<typeof eventName>;
-  on(
-    eventName: AdminEvents['REQUEST_TIMEOUT'],
-    listener: (event: RequestTimeoutEvent) => void,
-  ): RemoveInstrumentationEventListener<typeof eventName>;
   on(
     eventName: ValueOf<AdminEvents>,
-    listener: (event: InstrumentationEvent<any>) => void,
+    listener: (...args: any[]) => void,
   ): RemoveInstrumentationEventListener<typeof eventName>;
-  readonly events: AdminEvents;
+  events: AdminEvents;
 };
 
 export let PartitionAssigners: { roundRobin: PartitionAssigner };
@@ -627,7 +563,7 @@ export interface LogEntry {
 }
 
 export interface LoggerEntryContent {
-  readonly timestamp: string;
+  readonly timestamp: Date;
   readonly message: string;
   [key: string]: any;
 }
@@ -639,44 +575,38 @@ export type Logger = {
   error: (message: string, extra?: object) => void;
   warn: (message: string, extra?: object) => void;
   debug: (message: string, extra?: object) => void;
-
-  namespace: (namespace: string, logLevel?: logLevel) => Logger;
-  setLogLevel: (logLevel: logLevel) => void;
 };
 
-export interface BrokerMetadata {
-  brokers: Array<{ nodeId: number; host: string; port: number; rack?: string }>;
-  topicMetadata: Array<{
-    topicErrorCode: number;
-    topic: string;
-    partitionMetadata: PartitionMetadata[];
-  }>;
-}
-
-export interface ApiVersions {
-  [apiKey: number]: {
-    minVersion: number;
-    maxVersion: number;
-  };
-}
-
 export type Broker = {
   isConnected(): boolean;
   connect(): Promise<void>;
   disconnect(): Promise<void>;
-  apiVersions(): Promise<ApiVersions>;
-  metadata(topics: string[]): Promise<BrokerMetadata>;
-  describeGroups: (options: { groupIds: string[] }) => Promise<any>;
+  apiVersions(): Promise<{
+    [apiKey: number]: { minVersion: number; maxVersion: number };
+  }>;
+  metadata(topics: string[]): Promise<{
+    brokers: Array<{
+      nodeId: number;
+      host: string;
+      port: number;
+      rack?: string;
+    }>;
+    topicMetadata: Array<{
+      topicErrorCode: number;
+      topic: number;
+      partitionMetadata: PartitionMetadata[];
+    }>;
+  }>;
   offsetCommit(request: {
     groupId: string;
     groupGenerationId: number;
     memberId: string;
     retentionTime?: number;
-    topics: TopicOffsets[];
+    topics: Array<{
+      topic: string;
+      partitions: Array<{ partition: number; offset: string }>;
+    }>;
   }): Promise<any>;
-  offsetFetch(request: { groupId: string; topics: TopicOffsets[] }): Promise<{
-    responses: TopicOffsets[];
-  }>;
   fetch(request: {
     replicaId?: number;
     isolationLevel?: number;
@@ -693,45 +623,17 @@ export type Broker = {
     }>;
     rackId?: string;
   }): Promise<any>;
-  produce(request: {
-    topicData: Array<{
-      topic: string;
-      partitions: Array<{
-        partition: number;
-        firstSequence?: number;
-        messages: Message[];
-      }>;
-    }>;
-    transactionalId?: string;
-    producerId?: number;
-    producerEpoch?: number;
-    acks?: number;
-    timeout?: number;
-    compression?: CompressionTypes;
-  }): Promise<any>;
 };
 
-interface MessageSetEntry {
-  key: Buffer | null;
+export type KafkaMessage = {
+  key: Buffer;
   value: Buffer | null;
   timestamp: string;
-  attributes: number;
-  offset: string;
   size: number;
-  headers?: never;
-}
-
-interface RecordBatchEntry {
-  key: Buffer | null;
-  value: Buffer | null;
-  timestamp: string;
   attributes: number;
   offset: string;
-  headers: IHeaders;
-  size?: never;
-}
-
-export type KafkaMessage = MessageSetEntry | RecordBatchEntry;
+  headers?: IHeaders;
+};
 
 export interface ProducerRecord {
   topic: string;
@@ -795,30 +697,10 @@ export type Producer = Sender & {
   connect(): Promise<void>;
   disconnect(): Promise<void>;
   isIdempotent(): boolean;
-  readonly events: ProducerEvents;
-  on(
-    eventName: ProducerEvents['CONNECT'],
-    listener: (event: ConnectEvent) => void,
-  ): RemoveInstrumentationEventListener<typeof eventName>;
-  on(
-    eventName: ProducerEvents['DISCONNECT'],
-    listener: (event: DisconnectEvent) => void,
-  ): RemoveInstrumentationEventListener<typeof eventName>;
-  on(
-    eventName: ProducerEvents['REQUEST'],
-    listener: (event: RequestEvent) => void,
-  ): RemoveInstrumentationEventListener<typeof eventName>;
-  on(
-    eventName: ProducerEvents['REQUEST_QUEUE_SIZE'],
-    listener: (event: RequestQueueSizeEvent) => void,
-  ): RemoveInstrumentationEventListener<typeof eventName>;
-  on(
-    eventName: ProducerEvents['REQUEST_TIMEOUT'],
-    listener: (event: RequestTimeoutEvent) => void,
-  ): RemoveInstrumentationEventListener<typeof eventName>;
+  events: ProducerEvents;
   on(
     eventName: ValueOf<ProducerEvents>,
-    listener: (event: InstrumentationEvent<any>) => void,
+    listener: (...args: any[]) => void,
   ): RemoveInstrumentationEventListener<typeof eventName>;
   transaction(): Promise<Transaction>;
   logger(): Logger;
@@ -868,18 +750,16 @@ export type GroupDescriptions = {
 };
 
 export type TopicPartitions = { topic: string; partitions: number[] };
-
-export type TopicPartition = {
+export type TopicPartitionOffsetAndMetadata = {
   topic: string;
   partition: number;
-};
-export type TopicPartitionOffset = TopicPartition & {
   offset: string;
-};
-export type TopicPartitionOffsetAndMetadata = TopicPartitionOffset & {
   metadata?: string | null;
 };
 
+// TODO: Remove with 2.x
+export type TopicPartitionOffsetAndMedata = TopicPartitionOffsetAndMetadata;
+
 export type Batch = {
   topic: string;
   partition: number;
@@ -915,7 +795,6 @@ export type ConsumerEvents = {
   DISCONNECT: 'consumer.disconnect';
   STOP: 'consumer.stop';
   CRASH: 'consumer.crash';
-  REBALANCING: 'consumer.rebalancing';
   RECEIVED_UNSUBSCRIBED_TOPICS: 'consumer.received_unsubscribed_topics';
   REQUEST: 'consumer.network.request';
   REQUEST_TIMEOUT: 'consumer.network.request_timeout';
@@ -930,7 +809,13 @@ export type ConsumerCommitOffsetsEvent = InstrumentationEvent<{
   groupId: string;
   memberId: string;
   groupGenerationId: number;
-  topics: TopicOffsets[];
+  topics: {
+    topic: string;
+    partitions: {
+      offset: string;
+      partition: string;
+    }[];
+  }[];
 }>;
 export interface IMemberAssignment {
   [key: string]: number[];
@@ -944,11 +829,9 @@ export type ConsumerGroupJoinEvent = InstrumentationEvent<{
   memberId: string;
   memberAssignment: IMemberAssignment;
 }>;
-export type ConsumerFetchStartEvent = InstrumentationEvent<{ nodeId: number }>;
 export type ConsumerFetchEvent = InstrumentationEvent<{
   numberOfBatches: number;
   duration: number;
-  nodeId: number;
 }>;
 interface IBatchProcessEvent {
   topic: string;
@@ -970,11 +853,7 @@ export type ConsumerCrashEvent = InstrumentationEvent<{
   groupId: string;
   restart: boolean;
 }>;
-export type ConsumerRebalancingEvent = InstrumentationEvent<{
-  groupId: string;
-  memberId: string;
-}>;
-export type ConsumerReceivedUnsubscribedTopicsEvent = InstrumentationEvent<{
+export type ConsumerReceivedUnsubcribedTopicsEvent = InstrumentationEvent<{
   groupId: string;
   generationId: number;
   memberId: string;
@@ -991,15 +870,12 @@ export interface EachMessagePayload {
   topic: string;
   partition: number;
   message: KafkaMessage;
-  heartbeat(): Promise<void>;
-  pause(): () => void;
 }
 
 export interface EachBatchPayload {
   batch: Batch;
   resolveOffset(offset: string): void;
   heartbeat(): Promise<void>;
-  pause(): () => void;
   commitOffsetsIfNecessary(offsets?: Offsets): Promise<void>;
   uncommittedOffsets(): OffsetsByTopicPartition;
   isRunning(): boolean;
@@ -1018,117 +894,45 @@ export type ConsumerEachMessagePayload = EachMessagePayload;
  */
 export type ConsumerEachBatchPayload = EachBatchPayload;
 
-export type EachBatchHandler = (payload: EachBatchPayload) => Promise<void>;
-export type EachMessageHandler = (payload: EachMessagePayload) => Promise<void>;
-
 export type ConsumerRunConfig = {
   autoCommit?: boolean;
   autoCommitInterval?: number | null;
   autoCommitThreshold?: number | null;
   eachBatchAutoResolve?: boolean;
   partitionsConsumedConcurrently?: number;
-  eachBatch?: EachBatchHandler;
-  eachMessage?: EachMessageHandler;
+  eachBatch?: (payload: EachBatchPayload) => Promise<void>;
+  eachMessage?: (payload: EachMessagePayload) => Promise<void>;
 };
 
-/**
- * @deprecated Replaced by ConsumerSubscribeTopics
- */
 export type ConsumerSubscribeTopic = {
   topic: string | RegExp;
   fromBeginning?: boolean;
 };
-export type ConsumerSubscribeTopics = {
-  topics: (string | RegExp)[];
-  fromBeginning?: boolean;
-};
 
 export type Consumer = {
   connect(): Promise<void>;
   disconnect(): Promise<void>;
-  subscribe(
-    subscription: ConsumerSubscribeTopics | ConsumerSubscribeTopic,
-  ): Promise<void>;
+  subscribe(topic: ConsumerSubscribeTopic): Promise<void>;
   stop(): Promise<void>;
   run(config?: ConsumerRunConfig): Promise<void>;
   commitOffsets(
     topicPartitions: Array<TopicPartitionOffsetAndMetadata>,
   ): Promise<void>;
-  seek(topicPartitionOffset: TopicPartitionOffset): void;
+  seek(topicPartition: {
+    topic: string;
+    partition: number;
+    offset: string;
+  }): void;
   describeGroup(): Promise<GroupDescription>;
   pause(topics: Array<{ topic: string; partitions?: number[] }>): void;
   paused(): TopicPartitions[];
   resume(topics: Array<{ topic: string; partitions?: number[] }>): void;
-  on(
-    eventName: ConsumerEvents['HEARTBEAT'],
-    listener: (event: ConsumerHeartbeatEvent) => void,
-  ): RemoveInstrumentationEventListener<typeof eventName>;
-  on(
-    eventName: ConsumerEvents['COMMIT_OFFSETS'],
-    listener: (event: ConsumerCommitOffsetsEvent) => void,
-  ): RemoveInstrumentationEventListener<typeof eventName>;
-  on(
-    eventName: ConsumerEvents['GROUP_JOIN'],
-    listener: (event: ConsumerGroupJoinEvent) => void,
-  ): RemoveInstrumentationEventListener<typeof eventName>;
-  on(
-    eventName: ConsumerEvents['FETCH_START'],
-    listener: (event: ConsumerFetchStartEvent) => void,
-  ): RemoveInstrumentationEventListener<typeof eventName>;
-  on(
-    eventName: ConsumerEvents['FETCH'],
-    listener: (event: ConsumerFetchEvent) => void,
-  ): RemoveInstrumentationEventListener<typeof eventName>;
-  on(
-    eventName: ConsumerEvents['START_BATCH_PROCESS'],
-    listener: (event: ConsumerStartBatchProcessEvent) => void,
-  ): RemoveInstrumentationEventListener<typeof eventName>;
-  on(
-    eventName: ConsumerEvents['END_BATCH_PROCESS'],
-    listener: (event: ConsumerEndBatchProcessEvent) => void,
-  ): RemoveInstrumentationEventListener<typeof eventName>;
-  on(
-    eventName: ConsumerEvents['CONNECT'],
-    listener: (event: ConnectEvent) => void,
-  ): RemoveInstrumentationEventListener<typeof eventName>;
-  on(
-    eventName: ConsumerEvents['DISCONNECT'],
-    listener: (event: DisconnectEvent) => void,
-  ): RemoveInstrumentationEventListener<typeof eventName>;
-  on(
-    eventName: ConsumerEvents['STOP'],
-    listener: (event: InstrumentationEvent<null>) => void,
-  ): RemoveInstrumentationEventListener<typeof eventName>;
-  on(
-    eventName: ConsumerEvents['CRASH'],
-    listener: (event: ConsumerCrashEvent) => void,
-  ): RemoveInstrumentationEventListener<typeof eventName>;
-  on(
-    eventName: ConsumerEvents['REBALANCING'],
-    listener: (event: ConsumerRebalancingEvent) => void,
-  ): RemoveInstrumentationEventListener<typeof eventName>;
-  on(
-    eventName: ConsumerEvents['RECEIVED_UNSUBSCRIBED_TOPICS'],
-    listener: (event: ConsumerReceivedUnsubscribedTopicsEvent) => void,
-  ): RemoveInstrumentationEventListener<typeof eventName>;
-  on(
-    eventName: ConsumerEvents['REQUEST'],
-    listener: (event: RequestEvent) => void,
-  ): RemoveInstrumentationEventListener<typeof eventName>;
-  on(
-    eventName: ConsumerEvents['REQUEST_TIMEOUT'],
-    listener: (event: RequestTimeoutEvent) => void,
-  ): RemoveInstrumentationEventListener<typeof eventName>;
-  on(
-    eventName: ConsumerEvents['REQUEST_QUEUE_SIZE'],
-    listener: (event: RequestQueueSizeEvent) => void,
-  ): RemoveInstrumentationEventListener<typeof eventName>;
   on(
     eventName: ValueOf<ConsumerEvents>,
-    listener: (event: InstrumentationEvent<any>) => void,
+    listener: (...args: any[]) => void,
   ): RemoveInstrumentationEventListener<typeof eventName>;
   logger(): Logger;
-  readonly events: ConsumerEvents;
+  events: ConsumerEvents;
 };
 
 export enum CompressionTypes {
@@ -1151,7 +955,6 @@ export declare class KafkaJSError extends Error {
   readonly name: string;
   readonly retriable: boolean;
   readonly helpUrl?: string;
-  readonly cause?: Error;
 
   constructor(e: Error | string, metadata?: KafkaJSErrorMetadata);
 }
@@ -1174,6 +977,7 @@ export declare class KafkaJSOffsetOutOfRange extends KafkaJSProtocolError {
 
 export declare class KafkaJSNumberOfRetriesExceeded extends KafkaJSNonRetriableError {
   readonly stack: string;
+  readonly originalError: Error;
   readonly retryCount: number;
   readonly retryTime: number;
   constructor(
diff --git a/packages/microservices/external/mqtt-client.interface.ts b/packages/microservices/external/mqtt-client.interface.ts
index 0429c850d..506081338 100644
--- a/packages/microservices/external/mqtt-client.interface.ts
+++ b/packages/microservices/external/mqtt-client.interface.ts
@@ -2,9 +2,6 @@ import { EventEmitter } from 'events';
 
 /**
  * @see https://github.com/mqttjs/MQTT.js/
- *
- * @publicApi
- *
  */
 export declare class MqttClient extends EventEmitter {
   public connected: boolean;
@@ -78,7 +75,7 @@ export declare class MqttClient extends EventEmitter {
   /**
    * unsubscribe - unsubscribe from topic(s)
    *
-   * @param {string|Array} topic - topics to unsubscribe from
+   * @param {String, Array} topic - topics to unsubscribe from
    * @param {Function} [callback] - callback fired on unsuback
    * @returns {MqttClient} this - for chaining
    * @api public
diff --git a/packages/microservices/external/mqtt-options.interface.ts b/packages/microservices/external/mqtt-options.interface.ts
index 3eba9f18d..47c0d12b8 100644
--- a/packages/microservices/external/mqtt-options.interface.ts
+++ b/packages/microservices/external/mqtt-options.interface.ts
@@ -1,7 +1,5 @@
 /**
  * @see https://github.com/mqttjs/MQTT.js/
- *
- * @publicApi
  */
 export declare type QoS = 0 | 1 | 2;
 
diff --git a/packages/microservices/external/nats-client.interface.ts b/packages/microservices/external/nats-client.interface.ts
index 637883a42..b40cd679e 100644
--- a/packages/microservices/external/nats-client.interface.ts
+++ b/packages/microservices/external/nats-client.interface.ts
@@ -1,7 +1,5 @@
 /**
  * @see https://github.com/nats-io/nats.js
- *
- * @publicApi
  */
 export interface NatsCodec<T> {
   encode(d: T): Uint8Array;
diff --git a/packages/microservices/external/redis.interface.ts b/packages/microservices/external/redis.interface.ts
index 506d3669c..00ae1bba7 100644
--- a/packages/microservices/external/redis.interface.ts
+++ b/packages/microservices/external/redis.interface.ts
@@ -1,215 +1,383 @@
-import { ConnectionOptions } from 'tls';
+/* eslint-disable @typescript-eslint/adjacent-overload-signatures */
 
-/**
- * @see https://github.dev/luin/ioredis/blob/df04dd8d87a44d3b64b385c86581915248554508/lib/redis/RedisOptions.ts#L184
- *
- * @publicApi
- */
-export interface IORedisOptions {
-  Connector?: any;
-  retryStrategy?: (times: number) => number | void | null;
-
-  /**
-   * If a command does not return a reply within a set number of milliseconds,
-   * a "Command timed out" error will be thrown.
-   */
-  commandTimeout?: number;
-  /**
-   * Enable/disable keep-alive functionality.
-   * @link https://nodejs.org/api/net.html#socketsetkeepaliveenable-initialdelay
-   * @default 0
-   */
-  keepAlive?: number;
-
-  /**
-   * Enable/disable the use of Nagle's algorithm.
-   * @link https://nodejs.org/api/net.html#socketsetnodelaynodelay
-   * @default true
-   */
-  noDelay?: boolean;
-
-  /**
-   * Set the name of the connection to make it easier to identity the connection
-   * in client list.
-   * @link https://redis.io/commands/client-setname
-   */
-  connectionName?: string;
-
-  /**
-   * If set, client will send AUTH command with the value of this option as the first argument when connected.
-   * This is supported since Redis 6.
-   */
-  username?: string;
+export interface RetryStrategyOptions {
+  error: Error;
+  total_retry_time: number;
+  times_connected: number;
+  attempt: number;
+}
 
-  /**
-   * If set, client will send AUTH command with the value of this option when connected.
-   */
+export interface ClientOpts {
+  auth_pass?: string;
+  command_queue_high_water?: number;
+  command_queue_low_water?: number;
+  connect_timeout?: number;
+  db?: string;
+  detect_buffers?: boolean;
+  disable_resubscribing?: boolean;
+  enable_offline_queue?: boolean;
+  family?: string;
+  host?: string;
+  max_attempts?: number;
+  no_ready_check?: boolean;
+  parser?: string;
   password?: string;
+  path?: string;
+  port?: number;
+  prefix?: string;
+  rename_commands?: any;
+  retry_max_delay?: number;
+  retry_strategy?: any;
+  retry_unfulfilled_commands?: boolean;
+  return_buffers?: boolean;
+  socket_keepalive?: boolean;
+  socket_nodelay?: boolean;
+  string_numbers?: boolean;
+  tls?: any;
+  url?: string;
+}
 
-  /**
-   * Database index to use.
-   *
-   * @default 0
-   */
-  db?: number;
+export interface RedisClient {
+  // event: connect
+  // event: error
+  // event: message
+  // event: pmessage
+  // event: subscribe
+  // event: psubscribe
+  // event: unsubscribe
+  // event: punsubscribe
 
-  /**
-   * When the client reconnects, channels subscribed in the previous connection will be
-   * resubscribed automatically if `autoResubscribe` is `true`.
-   * @default true
-   */
-  autoResubscribe?: boolean;
+  connected: boolean;
+  retry_delay: number;
+  retry_backoff: number;
+  command_queue: any[];
+  offline_queue: any[];
+  server_info: any;
 
   /**
-   * Whether or not to resend unfulfilled commands on reconnect.
-   * Unfulfilled commands are most likely to be blocking commands such as `brpop` or `blpop`.
-   * @default true
-   */
-  autoResendUnfulfilledCommands?: boolean;
-  /**
-   * Whether or not to reconnect on certain Redis errors.
-   * This options by default is `null`, which means it should never reconnect on Redis errors.
-   * You can pass a function that accepts an Redis error, and returns:
-   * - `true` or `1` to trigger a reconnection.
-   * - `false` or `0` to not reconnect.
-   * - `2` to reconnect and resend the failed command (who triggered the error) after reconnection.
-   * @example
-   * ```js
-   * const redis = new Redis({
-   *   reconnectOnError(err) {
-   *     const targetError = "READONLY";
-   *     if (err.message.includes(targetError)) {
-   *       // Only reconnect when the error contains "READONLY"
-   *       return true; // or `return 1;`
-   *     }
-   *   },
-   * });
-   * ```
-   * @default null
-   */
-  reconnectOnError?: ((err: Error) => boolean | 1 | 2) | null;
-
-  /**
-   * @default false
-   */
-  readOnly?: boolean;
-  /**
-   * When enabled, numbers returned by Redis will be converted to JavaScript strings instead of numbers.
-   * This is necessary if you want to handle big numbers (above `Number.MAX_SAFE_INTEGER` === 2^53).
-   * @default false
-   */
-  stringNumbers?: boolean;
-
-  /**
-   * How long the client will wait before killing a socket due to inactivity during initial connection.
-   * @default 10000
-   */
-  connectTimeout?: number;
-
-  /**
-   * This option is used internally when you call `redis.monitor()` to tell Redis
-   * to enter the monitor mode when the connection is established.
+   * Forcibly close the connection to the Redis server. Note that this does not wait until all replies have been parsed. If you want to exit cleanly, call client.quit()
    *
-   * @default false
+   * @param {boolean} flush You should set flush to true, if you are not absolutely sure you do not care about any other commands. If you set flush to false all still running commands will silently fail.
    */
-  monitor?: boolean;
+  end(flush: boolean): void;
+  unref(): void;
 
   /**
-   * The commands that don't get a reply due to the connection to the server is lost are
-   * put into a queue and will be resent on reconnect (if allowed by the `retryStrategy` option).
-   * This option is used to configure how many reconnection attempts should be allowed before
-   * the queue is flushed with a `MaxRetriesPerRequestError` error.
-   * Set this options to `null` instead of a number to let commands wait forever
-   * until the connection is alive again.
-   *
-   * @default 20
+   * Stop sending commands and queue the commands.
    */
-  maxRetriesPerRequest?: number | null;
+  cork(): void;
 
   /**
-   * @default 10000
+   * Resume and send the queued commands at once.
    */
-  maxLoadingRetryTime?: number;
-  /**
-   * @default false
-   */
-  enableAutoPipelining?: boolean;
-  /**
-   * @default []
-   */
-  autoPipeliningIgnoredCommands?: string[];
-  offlineQueue?: boolean;
-  commandQueue?: boolean;
+  uncork(): void;
 
-  /**
-   *
-   * By default, if the connection to Redis server has not been established, commands are added to a queue
-   * and are executed once the connection is "ready" (when `enableReadyCheck` is true, "ready" means
-   * the Redis server has loaded the database from disk, otherwise means the connection to the Redis
-   * server has been established). If this option is false, when execute the command when the connection
-   * isn't ready, an error will be returned.
-   *
-   * @default true
-   */
-  enableOfflineQueue?: boolean;
+  // Low level command execution
+  send_command(command: string, ...args: any[]): boolean;
 
-  /**
-   * The client will sent an INFO command to check whether the server is still loading data from the disk (
-   * which happens when the server is just launched) when the connection is established, and only wait until
-   * the loading process is finished before emitting the `ready` event.
-   *
-   * @default true
-   */
-  enableReadyCheck?: boolean;
+  // Connection (http://redis.io/commands#connection)
+  auth(password: string, callback?: any): boolean;
+  ping(callback?: any): boolean;
 
-  /**
-   * When a Redis instance is initialized, a connection to the server is immediately established. Set this to
-   * true will delay the connection to the server until the first command is sent or `redis.connect()` is called
-   * explicitly.
-   *
-   * @default false
-   */
+  // Strings (http://redis.io/commands#strings)
+  append(key: string, value: string, callback?: any): boolean;
+  bitcount(key: string, callback?: any): boolean;
+  bitcount(key: string, start: number, end: number, callback?: any): boolean;
+  set(key: string, value: string, callback?: any): boolean;
+  get(key: string, callback?: any): boolean;
+  exists(key: string, value: string, callback?: any): boolean;
 
-  lazyConnect?: boolean;
+  publish(channel: string, value: any): boolean;
+  subscribe(channel: string): boolean;
+  on(event: string, callback: Function): any;
+  off(event: string, callback: Function): any;
+  addListener(event: string, callback: Function): any;
 
-  /**
-   * @default undefined
+  /*
+   commands = set_union([
+   "get", "set", "setnx", "setex", "append", "strlen", "del", "exists", "setbit", "getbit", "setrange", "getrange", "substr",
+   "incr", "decr", "mget", "rpush", "lpush", "rpushx", "lpushx", "linsert", "rpop", "lpop", "brpop", "brpoplpush", "blpop", "llen", "lindex",
+   "lset", "lrange", "ltrim", "lrem", "rpoplpush", "sadd", "srem", "smove", "sismember", "scard", "spop", "srandmember", "sinter", "sinterstore",
+   "sunion", "sunionstore", "sdiff", "sdiffstore", "smembers", "zadd", "zincrby", "zrem", "zremrangebyscore", "zremrangebyrank", "zunionstore",
+   "zinterstore", "zrange", "zrangebyscore", "zrevrangebyscore", "zcount", "zrevrange", "zcard", "zscore", "zrank", "zrevrank", "hset", "hsetnx",
+   "hget", "hmset", "hmget", "hincrby", "hincrbyfloat", "hdel", "hlen", "hkeys", "hvals", "hgetall", "hexists", "incrby", "decrby", "getset", "mset", "msetnx",
+   "randomkey", "select", "move", "rename", "renamenx", "expire", "expireat", "keys", "dbsize", "auth", "ping", "echo", "save", "bgsave",
+   "bgrewriteaof", "shutdown", "lastsave", "type", "any", "exec", "discard", "sync", "flushdb", "flushall", "sort", "info", "monitor", "ttl",
+   "persist", "slaveof", "debug", "config", "subscribe", "unsubscribe", "psubscribe", "punsubscribe", "publish", "watch", "unwatch", "cluster",
+   "restore", "migrate", "dump", "object", "client", "eval", "evalsha"], require("./lib/commands"));
    */
-  scripts?: Record<
-    string,
-    { lua: string; numberOfKeys?: number; readOnly?: boolean }
-  >;
 
-  keyPrefix?: string;
-  showFriendlyErrorStack?: boolean;
+  get(args: any[], callback?: any): boolean;
+  get(...args: any[]): boolean;
+  set(args: any[], callback?: any): boolean;
+  set(...args: any[]): boolean;
+  setnx(args: any[], callback?: any): boolean;
+  setnx(...args: any[]): boolean;
+  setex(args: any[], callback?: any): boolean;
+  setex(...args: any[]): boolean;
+  append(args: any[], callback?: any): boolean;
+  append(...args: any[]): boolean;
+  strlen(args: any[], callback?: any): boolean;
+  strlen(...args: any[]): boolean;
+  del(args: any[], callback?: any): boolean;
+  del(...args: any[]): boolean;
+  exists(args: any[], callback?: any): boolean;
+  exists(...args: any[]): boolean;
+  setbit(args: any[], callback?: any): boolean;
+  setbit(...args: any[]): boolean;
+  getbit(args: any[], callback?: any): boolean;
+  getbit(...args: any[]): boolean;
+  setrange(args: any[], callback?: any): boolean;
+  setrange(...args: any[]): boolean;
+  getrange(args: any[], callback?: any): boolean;
+  getrange(...args: any[]): boolean;
+  substr(args: any[], callback?: any): boolean;
+  substr(...args: any[]): boolean;
+  incr(args: any[], callback?: any): boolean;
+  incr(...args: any[]): boolean;
+  decr(args: any[], callback?: any): boolean;
+  decr(...args: any[]): boolean;
+  mget(args: any[], callback?: any): boolean;
+  mget(...args: any[]): boolean;
+  rpush(...args: any[]): boolean;
+  lpush(args: any[], callback?: any): boolean;
+  lpush(...args: any[]): boolean;
+  rpushx(args: any[], callback?: any): boolean;
+  rpushx(...args: any[]): boolean;
+  lpushx(args: any[], callback?: any): boolean;
+  lpushx(...args: any[]): boolean;
+  linsert(args: any[], callback?: any): boolean;
+  linsert(...args: any[]): boolean;
+  rpop(args: any[], callback?: any): boolean;
+  rpop(...args: any[]): boolean;
+  lpop(args: any[], callback?: any): boolean;
+  lpop(...args: any[]): boolean;
+  brpop(args: any[], callback?: any): boolean;
+  brpop(...args: any[]): boolean;
+  brpoplpush(args: any[], callback?: any): boolean;
+  brpoplpush(...args: any[]): boolean;
+  blpop(args: any[], callback?: any): boolean;
+  blpop(...args: any[]): boolean;
+  llen(args: any[], callback?: any): boolean;
+  llen(...args: any[]): boolean;
+  lindex(args: any[], callback?: any): boolean;
+  lindex(...args: any[]): boolean;
+  lset(args: any[], callback?: any): boolean;
+  lset(...args: any[]): boolean;
+  lrange(args: any[], callback?: any): boolean;
+  lrange(...args: any[]): boolean;
+  ltrim(args: any[], callback?: any): boolean;
+  ltrim(...args: any[]): boolean;
+  lrem(args: any[], callback?: any): boolean;
+  lrem(...args: any[]): boolean;
+  rpoplpush(args: any[], callback?: any): boolean;
+  rpoplpush(...args: any[]): boolean;
+  sadd(args: any[], callback?: any): boolean;
+  sadd(...args: any[]): boolean;
+  srem(args: any[], callback?: any): boolean;
+  srem(...args: any[]): boolean;
+  smove(args: any[], callback?: any): boolean;
+  smove(...args: any[]): boolean;
+  sismember(args: any[], callback?: any): boolean;
+  sismember(...args: any[]): boolean;
+  scard(args: any[], callback?: any): boolean;
+  scard(...args: any[]): boolean;
+  spop(args: any[], callback?: any): boolean;
+  spop(...args: any[]): boolean;
+  srandmember(args: any[], callback?: any): boolean;
+  srandmember(...args: any[]): boolean;
+  sinter(args: any[], callback?: any): boolean;
+  sinter(...args: any[]): boolean;
+  sinterstore(args: any[], callback?: any): boolean;
+  sinterstore(...args: any[]): boolean;
+  sunion(args: any[], callback?: any): boolean;
+  sunion(...args: any[]): boolean;
+  sunionstore(args: any[], callback?: any): boolean;
+  sunionstore(...args: any[]): boolean;
+  sdiff(args: any[], callback?: any): boolean;
+  sdiff(...args: any[]): boolean;
+  sdiffstore(args: any[], callback?: any): boolean;
+  sdiffstore(...args: any[]): boolean;
+  smembers(args: any[], callback?: any): boolean;
+  smembers(...args: any[]): boolean;
+  zadd(args: any[], callback?: any): boolean;
+  zadd(...args: any[]): boolean;
+  zincrby(args: any[], callback?: any): boolean;
+  zincrby(...args: any[]): boolean;
+  zrem(args: any[], callback?: any): boolean;
+  zrem(...args: any[]): boolean;
+  zremrangebyscore(args: any[], callback?: any): boolean;
+  zremrangebyscore(...args: any[]): boolean;
+  zremrangebyrank(args: any[], callback?: any): boolean;
+  zremrangebyrank(...args: any[]): boolean;
+  zunionstore(args: any[], callback?: any): boolean;
+  zunionstore(...args: any[]): boolean;
+  zinterstore(args: any[], callback?: any): boolean;
+  zinterstore(...args: any[]): boolean;
+  zrange(args: any[], callback?: any): boolean;
+  zrange(...args: any[]): boolean;
+  zrangebyscore(args: any[], callback?: any): boolean;
+  zrangebyscore(...args: any[]): boolean;
+  zrevrangebyscore(args: any[], callback?: any): boolean;
+  zrevrangebyscore(...args: any[]): boolean;
+  zcount(args: any[], callback?: any): boolean;
+  zcount(...args: any[]): boolean;
+  zrevrange(args: any[], callback?: any): boolean;
+  zrevrange(...args: any[]): boolean;
+  zcard(args: any[], callback?: any): boolean;
+  zcard(...args: any[]): boolean;
+  zscore(args: any[], callback?: any): boolean;
+  zscore(...args: any[]): boolean;
+  zrank(args: any[], callback?: any): boolean;
+  zrank(...args: any[]): boolean;
+  zrevrank(args: any[], callback?: any): boolean;
+  zrevrank(...args: any[]): boolean;
+  hset(args: any[], callback?: any): boolean;
+  hset(...args: any[]): boolean;
+  hsetnx(args: any[], callback?: any): boolean;
+  hsetnx(...args: any[]): boolean;
+  hget(args: any[], callback?: any): boolean;
+  hget(...args: any[]): boolean;
+  hmset(args: any[], callback?: any): boolean;
+  hmset(key: string, hash: any, callback?: any): boolean;
+  hmset(...args: any[]): boolean;
+  hmget(args: any[], callback?: any): boolean;
+  hmget(...args: any[]): boolean;
+  hincrby(args: any[], callback?: any): boolean;
+  hincrby(...args: any[]): boolean;
+  hincrbyfloat(args: any[], callback?: any): boolean;
+  hincrbyfloat(...args: any[]): boolean;
+  hdel(args: any[], callback?: any): boolean;
+  hdel(...args: any[]): boolean;
+  hlen(args: any[], callback?: any): boolean;
+  hlen(...args: any[]): boolean;
+  hkeys(args: any[], callback?: any): boolean;
+  hkeys(...args: any[]): boolean;
+  hvals(args: any[], callback?: any): boolean;
+  hvals(...args: any[]): boolean;
+  hgetall(args: any[], callback?: any): boolean;
+  hgetall(...args: any[]): boolean;
+  hgetall(key: string, callback?: any): boolean;
+  hexists(args: any[], callback?: any): boolean;
+  hexists(...args: any[]): boolean;
+  incrby(args: any[], callback?: any): boolean;
+  incrby(...args: any[]): boolean;
+  decrby(args: any[], callback?: any): boolean;
+  decrby(...args: any[]): boolean;
+  getset(args: any[], callback?: any): boolean;
+  getset(...args: any[]): boolean;
+  mset(args: any[], callback?: any): boolean;
+  mset(...args: any[]): boolean;
+  msetnx(args: any[], callback?: any): boolean;
+  msetnx(...args: any[]): boolean;
+  randomkey(args: any[], callback?: any): boolean;
+  randomkey(...args: any[]): boolean;
+  select(args: any[], callback?: any): void;
+  select(...args: any[]): void;
+  move(args: any[], callback?: any): boolean;
+  move(...args: any[]): boolean;
+  rename(args: any[], callback?: any): boolean;
+  rename(...args: any[]): boolean;
+  renamenx(args: any[], callback?: any): boolean;
+  renamenx(...args: any[]): boolean;
+  expire(args: any[], callback?: any): boolean;
+  expire(...args: any[]): boolean;
+  expireat(args: any[], callback?: any): boolean;
+  expireat(...args: any[]): boolean;
+  keys(args: any[], callback?: any): boolean;
+  keys(...args: any[]): boolean;
+  dbsize(args: any[], callback?: any): boolean;
+  dbsize(...args: any[]): boolean;
+  auth(args: any[], callback?: any): void;
+  auth(...args: any[]): void;
+  ping(args: any[], callback?: any): boolean;
+  ping(...args: any[]): boolean;
+  echo(args: any[], callback?: any): boolean;
+  echo(...args: any[]): boolean;
+  save(args: any[], callback?: any): boolean;
+  save(...args: any[]): boolean;
+  bgsave(args: any[], callback?: any): boolean;
+  bgsave(...args: any[]): boolean;
+  bgrewriteaof(args: any[], callback?: any): boolean;
+  bgrewriteaof(...args: any[]): boolean;
+  shutdown(args: any[], callback?: any): boolean;
+  shutdown(...args: any[]): boolean;
+  lastsave(args: any[], callback?: any): boolean;
+  lastsave(...args: any[]): boolean;
+  type(args: any[], callback?: any): boolean;
+  type(...args: any[]): boolean;
+  any(args: any[], callback?: any): any;
+  any(...args: any[]): any;
+  exec(args: any[], callback?: any): boolean;
+  exec(...args: any[]): boolean;
+  discard(args: any[], callback?: any): boolean;
+  discard(...args: any[]): boolean;
+  sync(args: any[], callback?: any): boolean;
+  sync(...args: any[]): boolean;
+  flushdb(args: any[], callback?: any): boolean;
+  flushdb(...args: any[]): boolean;
+  flushall(args: any[], callback?: any): boolean;
+  flushall(...args: any[]): boolean;
+  sort(args: any[], callback?: any): boolean;
+  sort(...args: any[]): boolean;
+  info(args: any[], callback?: any): boolean;
+  info(...args: any[]): boolean;
+  monitor(args: any[], callback?: any): boolean;
+  monitor(...args: any[]): boolean;
+  ttl(args: any[], callback?: any): boolean;
+  ttl(...args: any[]): boolean;
+  persist(args: any[], callback?: any): boolean;
+  persist(...args: any[]): boolean;
+  slaveof(args: any[], callback?: any): boolean;
+  slaveof(...args: any[]): boolean;
+  debug(args: any[], callback?: any): boolean;
+  debug(...args: any[]): boolean;
+  config(args: any[], callback?: any): boolean;
+  config(...args: any[]): boolean;
+  subscribe(args: any[], callback?: any): boolean;
+  subscribe(...args: any[]): boolean;
+  unsubscribe(args: any[], callback?: any): boolean;
+  unsubscribe(...args: any[]): boolean;
+  psubscribe(args: any[], callback?: any): boolean;
+  psubscribe(...args: any[]): boolean;
+  punsubscribe(args: any[], callback?: any): boolean;
+  punsubscribe(...args: any[]): boolean;
+  publish(args: any[], callback?: any): boolean;
+  publish(...args: any[]): boolean;
+  watch(args: any[], callback?: any): boolean;
+  watch(...args: any[]): boolean;
+  unwatch(args: any[], callback?: any): boolean;
+  unwatch(...args: any[]): boolean;
+  cluster(args: any[], callback?: any): boolean;
+  cluster(...args: any[]): boolean;
+  restore(args: any[], callback?: any): boolean;
+  restore(...args: any[]): boolean;
+  migrate(args: any[], callback?: any): boolean;
+  migrate(...args: any[]): boolean;
+  dump(args: any[], callback?: any): boolean;
+  dump(...args: any[]): boolean;
+  object(args: any[], callback?: any): boolean;
+  object(...args: any[]): boolean;
+  client(args: any[], callback?: any): boolean;
+  client(...args: any[]): boolean;
+  eval(args: any[], callback?: any): boolean;
+  eval(...args: any[]): boolean;
+  evalsha(args: any[], callback?: any): boolean;
+  evalsha(...args: any[]): boolean;
+  script(args: any[], callback?: any): boolean;
+  script(...args: any[]): boolean;
+  script(key: string, callback?: any): boolean;
+  quit(args: any[], callback?: any): boolean;
+  quit(...args: any[]): boolean;
+  sscan(...args: any[]): boolean;
+  sscan(args: any[], callback?: any): boolean;
+  scan(...args: any[]): boolean;
+  scan(args: any[], callback?: any): boolean;
+  hscan(...args: any[]): boolean;
+  hscan(args: any[], callback?: any): boolean;
+  zscan(...args: any[]): boolean;
+  zscan(args: any[], callback?: any): boolean;
 
-  // StandaloneConnectionOptions
-  disconnectTimeout?: number;
-  tls?: ConnectionOptions;
-
-  // SentinelConnectionOptions
-  /**
-   * Master group name of the Sentinel
-   */
-  name?: string;
-  /**
-   * @default "master"
-   */
-  role?: 'master' | 'slave';
-  sentinelUsername?: string;
-  sentinelPassword?: string;
-  sentinels?: Array<Partial<any>>;
-  sentinelRetryStrategy?: (retryAttempts: number) => number | void | null;
-  sentinelReconnectStrategy?: (retryAttempts: number) => number | void | null;
-  preferredSlaves?: any;
-  sentinelCommandTimeout?: number;
-  enableTLSForSentinelMode?: boolean;
-  sentinelTLS?: ConnectionOptions;
-  natMap?: any;
-  updateSentinels?: boolean;
-  /**
-   * @default 10
-   */
-  sentinelMaxConnections?: number;
-  failoverDetector?: boolean;
+  // Extras
+  duplicate(options?: any[], callback?: any): RedisClient;
 }
diff --git a/packages/microservices/external/rmq-url.interface.ts b/packages/microservices/external/rmq-url.interface.ts
index 9899d2a93..c19501e59 100644
--- a/packages/microservices/external/rmq-url.interface.ts
+++ b/packages/microservices/external/rmq-url.interface.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export interface RmqUrl {
   protocol?: string;
   hostname?: string;
@@ -13,9 +10,6 @@ export interface RmqUrl {
   vhost?: string;
 }
 
-/**
- * @publicApi
- */
 export interface AmqpConnectionManagerSocketOptions {
   reconnectTimeInSeconds?: number;
   heartbeatIntervalInSeconds?: number;
@@ -23,9 +17,6 @@ export interface AmqpConnectionManagerSocketOptions {
   connectionOptions?: any;
 }
 
-/**
- * @publicApi
- */
 export interface AmqplibQueueOptions {
   durable?: boolean;
   autoDelete?: boolean;
diff --git a/packages/microservices/helpers/index.ts b/packages/microservices/helpers/index.ts
index ff6118b51..a02fe778e 100644
--- a/packages/microservices/helpers/index.ts
+++ b/packages/microservices/helpers/index.ts
@@ -2,4 +2,3 @@ export * from './json-socket';
 export * from './kafka-logger';
 export * from './kafka-parser';
 export * from './kafka-reply-partition-assigner';
-export * from './tcp-socket';
diff --git a/packages/microservices/helpers/json-socket.ts b/packages/microservices/helpers/json-socket.ts
index 5d017f9b5..0320e0dbc 100644
--- a/packages/microservices/helpers/json-socket.ts
+++ b/packages/microservices/helpers/json-socket.ts
@@ -1,29 +1,83 @@
-import { Buffer } from 'buffer';
+import { Socket } from 'net';
 import { StringDecoder } from 'string_decoder';
+import {
+  CLOSE_EVENT,
+  CONNECT_EVENT,
+  DATA_EVENT,
+  ERROR_EVENT,
+  MESSAGE_EVENT,
+} from '../constants';
 import { CorruptedPacketLengthException } from '../errors/corrupted-packet-length.exception';
-import { TcpSocket } from './tcp-socket';
+import { InvalidJSONFormatException } from '../errors/invalid-json-format.exception';
+import { NetSocketClosedException } from '../errors/net-socket-closed.exception';
 
-export class JsonSocket extends TcpSocket {
+export class JsonSocket {
   private contentLength: number | null = null;
+  private isClosed = false;
   private buffer = '';
 
   private readonly stringDecoder = new StringDecoder();
-  private readonly delimiter = '#';
+  private readonly delimeter = '#';
 
-  protected handleSend(message: any, callback?: (err?: any) => void) {
+  public get netSocket() {
+    return this.socket;
+  }
+
+  constructor(public readonly socket: Socket) {
+    this.socket.on(DATA_EVENT, this.onData.bind(this));
+    this.socket.on(CONNECT_EVENT, () => (this.isClosed = false));
+    this.socket.on(CLOSE_EVENT, () => (this.isClosed = true));
+    this.socket.on(ERROR_EVENT, () => (this.isClosed = true));
+  }
+
+  public connect(port: number, host: string) {
+    this.socket.connect(port, host);
+    return this;
+  }
+
+  public on(event: string, callback: (err?: any) => void) {
+    this.socket.on(event, callback);
+    return this;
+  }
+
+  public once(event: string, callback: (err?: any) => void) {
+    this.socket.once(event, callback);
+    return this;
+  }
+
+  public end() {
+    this.socket.end();
+    return this;
+  }
+
+  public sendMessage(message: any, callback?: (err?: any) => void) {
+    if (this.isClosed) {
+      callback && callback(new NetSocketClosedException());
+      return;
+    }
     this.socket.write(this.formatMessageData(message), 'utf-8', callback);
   }
 
-  protected handleData(dataRaw: Buffer | string) {
+  private onData(dataRaw: Buffer | string) {
     const data = Buffer.isBuffer(dataRaw)
       ? this.stringDecoder.write(dataRaw)
       : dataRaw;
+
+    try {
+      this.handleData(data);
+    } catch (e) {
+      this.socket.emit(ERROR_EVENT, e.message);
+      this.socket.end();
+    }
+  }
+
+  private handleData(data: string) {
     this.buffer += data;
 
     if (this.contentLength == null) {
-      const i = this.buffer.indexOf(this.delimiter);
+      const i = this.buffer.indexOf(this.delimeter);
       /**
-       * Check if the buffer has the delimiter (#),
+       * Check if the buffer has the delimeter (#),
        * if not, the end of the buffer string might be in the middle of a content length string
        */
       if (i !== -1) {
@@ -41,27 +95,36 @@ export class JsonSocket extends TcpSocket {
 
     if (this.contentLength !== null) {
       const length = this.buffer.length;
+
       if (length === this.contentLength) {
         this.handleMessage(this.buffer);
       } else if (length > this.contentLength) {
         const message = this.buffer.substring(0, this.contentLength);
         const rest = this.buffer.substring(this.contentLength);
         this.handleMessage(message);
-        this.handleData(rest);
+        this.onData(rest);
       }
     }
   }
 
-  private handleMessage(message: any) {
+  private handleMessage(data: string) {
     this.contentLength = null;
     this.buffer = '';
-    this.emitMessage(message);
+
+    let message: Record<string, unknown>;
+    try {
+      message = JSON.parse(data);
+    } catch (e) {
+      throw new InvalidJSONFormatException(e, data);
+    }
+    message = message || {};
+    this.socket.emit(MESSAGE_EVENT, message);
   }
 
   private formatMessageData(message: any) {
     const messageData = JSON.stringify(message);
     const length = messageData.length;
-    const data = length + this.delimiter + messageData;
+    const data = length + this.delimeter + messageData;
     return data;
   }
 }
diff --git a/packages/microservices/helpers/kafka-parser.ts b/packages/microservices/helpers/kafka-parser.ts
index 61056e7c1..781217ff8 100644
--- a/packages/microservices/helpers/kafka-parser.ts
+++ b/packages/microservices/helpers/kafka-parser.ts
@@ -9,28 +9,22 @@ export class KafkaParser {
   }
 
   public parse<T = any>(data: any): T {
-    // Clone object to as modifying the original one would break KafkaJS retries
-    const result = {
-      ...data,
-      headers: { ...data.headers },
-    };
-
     if (!this.keepBinary) {
-      result.value = this.decode(data.value);
+      data.value = this.decode(data.value);
     }
 
     if (!isNil(data.key)) {
-      result.key = this.decode(data.key);
+      data.key = this.decode(data.key);
     }
     if (!isNil(data.headers)) {
       const decodeHeaderByKey = (key: string) => {
-        result.headers[key] = this.decode(data.headers[key]);
+        data.headers[key] = this.decode(data.headers[key]);
       };
       Object.keys(data.headers).forEach(decodeHeaderByKey);
     } else {
-      result.headers = {};
+      data.headers = {};
     }
-    return result;
+    return data;
   }
 
   public decode(value: Buffer): object | string | null | Buffer {
diff --git a/packages/microservices/helpers/tcp-socket.ts b/packages/microservices/helpers/tcp-socket.ts
deleted file mode 100644
index cca8fe94d..000000000
--- a/packages/microservices/helpers/tcp-socket.ts
+++ /dev/null
@@ -1,78 +0,0 @@
-import { Buffer } from 'buffer';
-import { Socket } from 'net';
-import {
-  CLOSE_EVENT,
-  CONNECT_EVENT,
-  DATA_EVENT,
-  ERROR_EVENT,
-  MESSAGE_EVENT,
-} from '../constants';
-import { NetSocketClosedException } from '../errors/net-socket-closed.exception';
-import { InvalidJSONFormatException } from '../errors/invalid-json-format.exception';
-
-export abstract class TcpSocket {
-  private isClosed = false;
-
-  public get netSocket() {
-    return this.socket;
-  }
-
-  constructor(public readonly socket: Socket) {
-    this.socket.on(DATA_EVENT, this.onData.bind(this));
-    this.socket.on(CONNECT_EVENT, () => (this.isClosed = false));
-    this.socket.on(CLOSE_EVENT, () => (this.isClosed = true));
-    this.socket.on(ERROR_EVENT, () => (this.isClosed = true));
-  }
-
-  public connect(port: number, host: string) {
-    this.socket.connect(port, host);
-    return this;
-  }
-
-  public on(event: string, callback: (err?: any) => void) {
-    this.socket.on(event, callback);
-    return this;
-  }
-
-  public once(event: string, callback: (err?: any) => void) {
-    this.socket.once(event, callback);
-    return this;
-  }
-
-  public end() {
-    this.socket.end();
-    return this;
-  }
-
-  public sendMessage(message: any, callback?: (err?: any) => void) {
-    if (this.isClosed) {
-      callback && callback(new NetSocketClosedException());
-      return;
-    }
-    this.handleSend(message, callback);
-  }
-
-  protected abstract handleSend(message: any, callback?: (err?: any) => void);
-
-  private onData(data: Buffer) {
-    try {
-      this.handleData(data);
-    } catch (e) {
-      this.socket.emit(ERROR_EVENT, e.message);
-      this.socket.end();
-    }
-  }
-
-  protected abstract handleData(data: Buffer | string);
-
-  protected emitMessage(data: string) {
-    let message: Record<string, unknown>;
-    try {
-      message = JSON.parse(data);
-    } catch (e) {
-      throw new InvalidJSONFormatException(e, data);
-    }
-    message = message || {};
-    this.socket.emit(MESSAGE_EVENT, message);
-  }
-}
diff --git a/packages/microservices/index.ts b/packages/microservices/index.ts
index bf44f34f7..81f4992ef 100644
--- a/packages/microservices/index.ts
+++ b/packages/microservices/index.ts
@@ -1,6 +1,6 @@
 /*
  * Nest @microservices
- * Copyright(c) 2017 - 2023 Kamil Mysliwiec
+ * Copyright(c) 2017 - 2021 Kamil Mysliwiec
  * https://nestjs.com
  * MIT Licensed
  */
diff --git a/packages/microservices/interfaces/client-grpc.interface.ts b/packages/microservices/interfaces/client-grpc.interface.ts
index 95815ef0f..ebb73f466 100644
--- a/packages/microservices/interfaces/client-grpc.interface.ts
+++ b/packages/microservices/interfaces/client-grpc.interface.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export interface ClientGrpc {
   getService<T extends {}>(name: string): T;
   getClientByServiceName<T = any>(name: string): T;
diff --git a/packages/microservices/interfaces/client-metadata.interface.ts b/packages/microservices/interfaces/client-metadata.interface.ts
index 53bb8b556..4962eecc1 100644
--- a/packages/microservices/interfaces/client-metadata.interface.ts
+++ b/packages/microservices/interfaces/client-metadata.interface.ts
@@ -1,6 +1,5 @@
 import { Type } from '@nestjs/common';
 import { ClientProxy } from '../client';
-import { TcpSocket } from '../helpers';
 import { Transport } from '../enums/transport.enum';
 import { Deserializer } from './deserializer.interface';
 import {
@@ -12,7 +11,6 @@ import {
   RmqOptions,
 } from './microservice-configuration.interface';
 import { Serializer } from './serializer.interface';
-import { ConnectionOptions } from 'tls';
 
 export type ClientOptions =
   | RedisOptions
@@ -23,17 +21,11 @@ export type ClientOptions =
   | TcpClientOptions
   | RmqOptions;
 
-/**
- * @publicApi
- */
 export interface CustomClientOptions {
   customClass: Type<ClientProxy>;
   options?: Record<string, any>;
 }
 
-/**
- * @publicApi
- */
 export interface TcpClientOptions {
   transport: Transport.TCP;
   options?: {
@@ -41,7 +33,5 @@ export interface TcpClientOptions {
     port?: number;
     serializer?: Serializer;
     deserializer?: Deserializer;
-    tlsOptions?: ConnectionOptions;
-    socketClass?: Type<TcpSocket>;
   };
 }
diff --git a/packages/microservices/interfaces/custom-transport-strategy.interface.ts b/packages/microservices/interfaces/custom-transport-strategy.interface.ts
index c7b4e9e44..b5d5b2760 100644
--- a/packages/microservices/interfaces/custom-transport-strategy.interface.ts
+++ b/packages/microservices/interfaces/custom-transport-strategy.interface.ts
@@ -1,10 +1,7 @@
 import { Transport } from '../enums';
 
-/**
- * @publicApi
- */
 export interface CustomTransportStrategy {
-  readonly transportId?: Transport | symbol;
+  readonly transportId?: Transport;
   listen(callback: (...optionalParams: unknown[]) => any): any;
   close(): any;
 }
diff --git a/packages/microservices/interfaces/deserializer.interface.ts b/packages/microservices/interfaces/deserializer.interface.ts
index d5529b697..69d3af4ad 100644
--- a/packages/microservices/interfaces/deserializer.interface.ts
+++ b/packages/microservices/interfaces/deserializer.interface.ts
@@ -4,9 +4,6 @@ import {
   IncomingResponse,
 } from './packet.interface';
 
-/**
- * @publicApi
- */
 export interface Deserializer<TInput = any, TOutput = any> {
   deserialize(
     value: TInput,
diff --git a/packages/microservices/interfaces/message-handler.interface.ts b/packages/microservices/interfaces/message-handler.interface.ts
index 8568262d2..f93896d78 100644
--- a/packages/microservices/interfaces/message-handler.interface.ts
+++ b/packages/microservices/interfaces/message-handler.interface.ts
@@ -1,16 +1,7 @@
 import { Observable } from 'rxjs';
 
-/**
- * @publicApi
- */
 export interface MessageHandler<TInput = any, TContext = any, TResult = any> {
-  (data: TInput, ctx?: TContext):
-    | Promise<Observable<TResult>>
-    | Promise<TResult>;
-  next?: (
-    data: TInput,
-    ctx?: TContext,
-  ) => Promise<Observable<TResult>> | Promise<TResult>;
+  (data: TInput, ctx?: TContext): Promise<Observable<TResult>>;
+  next?: (data: TInput, ctx?: TContext) => Promise<Observable<TResult>>;
   isEventHandler?: boolean;
-  extras?: Record<string, any>;
 }
diff --git a/packages/microservices/interfaces/microservice-configuration.interface.ts b/packages/microservices/interfaces/microservice-configuration.interface.ts
index 0f2da17d5..9942b8b55 100644
--- a/packages/microservices/interfaces/microservice-configuration.interface.ts
+++ b/packages/microservices/interfaces/microservice-configuration.interface.ts
@@ -1,19 +1,16 @@
-import { Type } from '@nestjs/common';
-import { ConnectionOptions } from 'tls';
 import { Transport } from '../enums/transport.enum';
 import { ChannelOptions } from '../external/grpc-options.interface';
 import {
   ConsumerConfig,
   ConsumerRunConfig,
-  ConsumerSubscribeTopics,
+  ConsumerSubscribeTopic,
   KafkaConfig,
   ProducerConfig,
   ProducerRecord,
 } from '../external/kafka.interface';
 import { MqttClientOptions, QoS } from '../external/mqtt-options.interface';
-import { IORedisOptions } from '../external/redis.interface';
+import { ClientOpts } from '../external/redis.interface';
 import { RmqUrl } from '../external/rmq-url.interface';
-import { TcpSocket } from '../helpers';
 import { CustomTransportStrategy } from './custom-transport-strategy.interface';
 import { Deserializer } from './deserializer.interface';
 import { Serializer } from './serializer.interface';
@@ -28,20 +25,17 @@ export type MicroserviceOptions =
   | KafkaOptions
   | CustomStrategy;
 
-/**
- * @publicApi
- */
 export interface CustomStrategy {
   strategy: CustomTransportStrategy;
   options?: {};
 }
 
-/**
- * @publicApi
- */
 export interface GrpcOptions {
   transport?: Transport.GRPC;
   options: {
+    interceptors?: Array<
+      (options: any, nextCall: (options: any) => any) => any
+    >;
     url?: string;
     maxSendMessageLength?: number;
     maxReceiveMessageLength?: number;
@@ -77,9 +71,6 @@ export interface GrpcOptions {
   };
 }
 
-/**
- * @publicApi
- */
 export interface TcpOptions {
   transport?: Transport.TCP;
   options?: {
@@ -88,34 +79,21 @@ export interface TcpOptions {
     retryAttempts?: number;
     retryDelay?: number;
     serializer?: Serializer;
-    tlsOptions?: ConnectionOptions;
     deserializer?: Deserializer;
-    socketClass?: Type<TcpSocket>;
   };
 }
 
-/**
- * @publicApi
- */
 export interface RedisOptions {
   transport?: Transport.REDIS;
   options?: {
-    host?: string;
-    port?: number;
+    url?: string;
     retryAttempts?: number;
     retryDelay?: number;
-    /**
-     * Use `psubscribe`/`pmessage` to enable wildcards in the patterns
-     */
-    wildcards?: boolean;
     serializer?: Serializer;
     deserializer?: Deserializer;
-  } & IORedisOptions;
+  } & ClientOpts;
 }
 
-/**
- * @publicApi
- */
 export interface MqttOptions {
   transport?: Transport.MQTT;
   options?: MqttClientOptions & {
@@ -144,9 +122,6 @@ export interface MqttOptions {
   };
 }
 
-/**
- * @publicApi
- */
 export interface NatsOptions {
   transport?: Transport.NATS;
   options?: {
@@ -191,9 +166,6 @@ export interface NatsOptions {
   };
 }
 
-/**
- * @publicApi
- */
 export interface RmqOptions {
   transport?: Transport.RMQ;
   options?: {
@@ -209,43 +181,25 @@ export interface RmqOptions {
     replyQueue?: string;
     persistent?: boolean;
     headers?: Record<string, string>;
-    noAssert?: boolean;
-    /**
-     * Maximum number of connection attempts.
-     * Applies only to the consumer configuration.
-     * -1 === infinite
-     * @default -1
-     */
-    maxConnectionAttempts?: number;
   };
 }
 
-/**
- * @publicApi
- */
 export interface KafkaParserConfig {
   keepBinary?: boolean;
 }
 
-/**
- * @publicApi
- */
 export interface KafkaOptions {
   transport?: Transport.KAFKA;
   options?: {
-    /**
-     * Defaults to `"-server"` on server side and `"-client"` on client side.
-     */
     postfixId?: string;
     client?: KafkaConfig;
     consumer?: ConsumerConfig;
     run?: Omit<ConsumerRunConfig, 'eachBatch' | 'eachMessage'>;
-    subscribe?: Omit<ConsumerSubscribeTopics, 'topic'>;
+    subscribe?: Omit<ConsumerSubscribeTopic, 'topic'>;
     producer?: ProducerConfig;
     send?: Omit<ProducerRecord, 'topic' | 'messages'>;
     serializer?: Serializer;
     deserializer?: Deserializer;
     parser?: KafkaParserConfig;
-    producerOnlyMode?: boolean;
   };
 }
diff --git a/packages/microservices/interfaces/microservice-entrypoint-metadata.interface.ts b/packages/microservices/interfaces/microservice-entrypoint-metadata.interface.ts
deleted file mode 100644
index 9993c7d77..000000000
--- a/packages/microservices/interfaces/microservice-entrypoint-metadata.interface.ts
+++ /dev/null
@@ -1,9 +0,0 @@
-import { Transport } from '../enums';
-import { PatternMetadata } from './pattern-metadata.interface';
-
-export type MicroserviceEntrypointMetadata = {
-  transportId: keyof typeof Transport | symbol;
-  patterns: PatternMetadata[];
-  isEventHandler: boolean;
-  extras?: Record<string, any>;
-};
diff --git a/packages/microservices/interfaces/serializer.interface.ts b/packages/microservices/interfaces/serializer.interface.ts
index 4c090467c..6674cd6b1 100644
--- a/packages/microservices/interfaces/serializer.interface.ts
+++ b/packages/microservices/interfaces/serializer.interface.ts
@@ -4,11 +4,8 @@ import {
   OutgoingResponse,
 } from './packet.interface';
 
-/**
- * @publicApi
- */
 export interface Serializer<TInput = any, TOutput = any> {
-  serialize(value: TInput, options?: Record<string, any>): TOutput;
+  serialize(value: TInput): TOutput;
 }
 
 export type ProducerSerializer = Serializer<
diff --git a/packages/microservices/listener-metadata-explorer.ts b/packages/microservices/listener-metadata-explorer.ts
index faa98b71b..322780ad5 100644
--- a/packages/microservices/listener-metadata-explorer.ts
+++ b/packages/microservices/listener-metadata-explorer.ts
@@ -4,14 +4,14 @@ import { MetadataScanner } from '@nestjs/core/metadata-scanner';
 import {
   CLIENT_CONFIGURATION_METADATA,
   CLIENT_METADATA,
-  PATTERN_EXTRAS_METADATA,
   PATTERN_HANDLER_METADATA,
   PATTERN_METADATA,
   TRANSPORT_METADATA,
 } from './constants';
 import { Transport } from './enums';
 import { PatternHandler } from './enums/pattern-handler.enum';
-import { ClientOptions, PatternMetadata } from './interfaces';
+import { ClientOptions } from './interfaces/client-metadata.interface';
+import { PatternMetadata } from './interfaces/pattern-metadata.interface';
 
 export interface ClientProperties {
   property: string;
@@ -19,12 +19,11 @@ export interface ClientProperties {
 }
 
 export interface EventOrMessageListenerDefinition {
-  patterns: PatternMetadata[];
+  pattern: PatternMetadata;
   methodKey: string;
   isEventHandler: boolean;
   targetCallback: (...args: any[]) => any;
   transport?: Transport;
-  extras?: Record<string, any>;
 }
 
 export interface MessageRequestProperties {
@@ -37,10 +36,12 @@ export class ListenerMetadataExplorer {
 
   public explore(instance: Controller): EventOrMessageListenerDefinition[] {
     const instancePrototype = Object.getPrototypeOf(instance);
-    return this.metadataScanner
-      .getAllMethodNames(instancePrototype)
-      .map(method => this.exploreMethodMetadata(instancePrototype, method))
-      .filter(metadata => metadata);
+    return this.metadataScanner.scanFromPrototype<
+      Controller,
+      EventOrMessageListenerDefinition
+    >(instance, instancePrototype, method =>
+      this.exploreMethodMetadata(instancePrototype, method),
+    );
   }
 
   public exploreMethodMetadata(
@@ -55,15 +56,13 @@ export class ListenerMetadataExplorer {
     if (isUndefined(handlerType)) {
       return;
     }
-    const patterns = Reflect.getMetadata(PATTERN_METADATA, targetCallback);
+    const pattern = Reflect.getMetadata(PATTERN_METADATA, targetCallback);
     const transport = Reflect.getMetadata(TRANSPORT_METADATA, targetCallback);
-    const extras = Reflect.getMetadata(PATTERN_EXTRAS_METADATA, targetCallback);
     return {
       methodKey,
       targetCallback,
-      patterns,
+      pattern,
       transport,
-      extras,
       isEventHandler: handlerType === PatternHandler.EVENT,
     };
   }
diff --git a/packages/microservices/listeners-controller.ts b/packages/microservices/listeners-controller.ts
index cba398269..1f3c307a8 100644
--- a/packages/microservices/listeners-controller.ts
+++ b/packages/microservices/listeners-controller.ts
@@ -11,18 +11,9 @@ import {
   InstanceWrapper,
 } from '@nestjs/core/injector/instance-wrapper';
 import { Module } from '@nestjs/core/injector/module';
-import { GraphInspector } from '@nestjs/core/inspector/graph-inspector';
 import { MetadataScanner } from '@nestjs/core/metadata-scanner';
 import { REQUEST_CONTEXT_ID } from '@nestjs/core/router/request/request-constants';
-import {
-  forkJoin,
-  from as fromPromise,
-  isObservable,
-  mergeMap,
-  Observable,
-  ObservedValueOf,
-  of,
-} from 'rxjs';
+import { connectable, Observable, Subject } from 'rxjs';
 import { IClientProxyFactory } from './client/client-proxy-factory';
 import { ClientsContainer } from './container';
 import { ExceptionFiltersContext } from './context/exception-filters-context';
@@ -33,18 +24,13 @@ import {
   DEFAULT_GRPC_CALLBACK_METADATA,
 } from './context/rpc-metadata-constants';
 import { BaseRpcContext } from './ctx-host/base-rpc.context';
-import { Transport } from './enums';
 import {
   CustomTransportStrategy,
   MessageHandler,
   PatternMetadata,
   RequestContext,
 } from './interfaces';
-import { MicroserviceEntrypointMetadata } from './interfaces/microservice-entrypoint-metadata.interface';
-import {
-  EventOrMessageListenerDefinition,
-  ListenerMetadataExplorer,
-} from './listener-metadata-explorer';
+import { ListenerMetadataExplorer } from './listener-metadata-explorer';
 import { ServerGrpc } from './server';
 import { Server } from './server/server';
 
@@ -61,7 +47,6 @@ export class ListenersController {
     private readonly injector: Injector,
     private readonly clientFactory: IClientProxyFactory,
     private readonly exceptionFiltersContext: ExceptionFiltersContext,
-    private readonly graphInspector: GraphInspector,
   ) {}
 
   public registerPatternHandlers(
@@ -86,27 +71,7 @@ export class ListenersController {
           isUndefined(server.transportId) ||
           transport === server.transportId,
       )
-      .reduce((acc, handler) => {
-        handler.patterns.forEach(pattern =>
-          acc.push({ ...handler, patterns: [pattern] }),
-        );
-        return acc;
-      }, [])
-      .forEach((definition: EventOrMessageListenerDefinition) => {
-        const {
-          patterns: [pattern],
-          targetCallback,
-          methodKey,
-          extras,
-          isEventHandler,
-        } = definition;
-
-        this.insertEntrypointDefinition(
-          instanceWrapper,
-          definition,
-          server.transportId,
-        );
-
+      .forEach(({ pattern, targetCallback, methodKey, isEventHandler }) => {
         if (isStatic) {
           const proxy = this.contextCreator.create(
             instance as object,
@@ -118,27 +83,24 @@ export class ListenersController {
             defaultCallMetadata,
           );
           if (isEventHandler) {
-            const eventHandler: MessageHandler = async (...args: unknown[]) => {
+            const eventHandler: MessageHandler = (...args: unknown[]) => {
               const originalArgs = args;
               const [dataOrContextHost] = originalArgs;
               if (dataOrContextHost instanceof RequestContextHost) {
                 args = args.slice(1, args.length);
               }
-              const returnValue = proxy(...args);
-              return this.forkJoinHandlersIfAttached(
-                returnValue,
-                originalArgs,
-                eventHandler,
+              const originalReturnValue = proxy(...args);
+              const returnedValueWrapper = eventHandler.next?.(
+                ...(originalArgs as Parameters<MessageHandler>),
+              );
+              returnedValueWrapper?.then(returnedValue =>
+                this.connectIfStream(returnedValue as Observable<unknown>),
               );
+              return originalReturnValue;
             };
-            return server.addHandler(
-              pattern,
-              eventHandler,
-              isEventHandler,
-              extras,
-            );
+            return server.addHandler(pattern, eventHandler, isEventHandler);
           } else {
-            return server.addHandler(pattern, proxy, isEventHandler, extras);
+            return server.addHandler(pattern, proxy, isEventHandler);
           }
         }
         const asyncHandler = this.createRequestScopedHandler(
@@ -148,53 +110,9 @@ export class ListenersController {
           moduleKey,
           methodKey,
           defaultCallMetadata,
-          isEventHandler,
         );
-        server.addHandler(pattern, asyncHandler, isEventHandler, extras);
-      });
-  }
-
-  public insertEntrypointDefinition(
-    instanceWrapper: InstanceWrapper,
-    definition: EventOrMessageListenerDefinition,
-    transportId: Transport | symbol,
-  ) {
-    this.graphInspector.insertEntrypointDefinition<MicroserviceEntrypointMetadata>(
-      {
-        type: 'microservice',
-        methodName: definition.methodKey,
-        className: instanceWrapper.metatype?.name,
-        classNodeId: instanceWrapper.id,
-        metadata: {
-          key: definition.patterns.toString(),
-          transportId:
-            typeof transportId === 'number'
-              ? (Transport[transportId] as keyof typeof Transport)
-              : transportId,
-          patterns: definition.patterns,
-          isEventHandler: definition.isEventHandler,
-          extras: definition.extras,
-        },
-      },
-      instanceWrapper.id,
-    );
-  }
-
-  public forkJoinHandlersIfAttached(
-    currentReturnValue: Promise<unknown> | Observable<unknown>,
-    originalArgs: unknown[],
-    handlerRef: MessageHandler,
-  ) {
-    if (handlerRef.next) {
-      const returnedValueWrapper = handlerRef.next(
-        ...(originalArgs as Parameters<MessageHandler>),
-      );
-      return forkJoin({
-        current: this.transformToObservable(currentReturnValue),
-        next: this.transformToObservable(returnedValueWrapper),
+        server.addHandler(pattern, asyncHandler, isEventHandler);
       });
-    }
-    return currentReturnValue;
   }
 
   public assignClientsToProperties(instance: Controller | Injectable) {
@@ -224,20 +142,17 @@ export class ListenersController {
     moduleKey: string,
     methodKey: string,
     defaultCallMetadata: Record<string, any> = DEFAULT_CALLBACK_METADATA,
-    isEventHandler = false,
   ) {
     const collection = moduleRef.controllers;
     const { instance } = wrapper;
 
-    const isTreeDurable = wrapper.isDependencyTreeDurable();
-
     const requestScopedHandler: MessageHandler = async (...args: unknown[]) => {
       try {
         let contextId: ContextId;
 
         let [dataOrContextHost] = args;
         if (dataOrContextHost instanceof RequestContextHost) {
-          contextId = this.getContextId(dataOrContextHost, isTreeDurable);
+          contextId = this.getContextId(dataOrContextHost);
           args.shift();
         } else {
           const [data, reqCtx] = args;
@@ -246,10 +161,10 @@ export class ListenersController {
             data,
             reqCtx as BaseRpcContext,
           );
-          contextId = this.getContextId(request, isTreeDurable);
+          contextId = this.getContextId(request);
+          this.container.registerRequestProvider(request, contextId);
           dataOrContextHost = request;
         }
-
         const contextInstance = await this.injector.loadPerContext(
           instance,
           moduleRef,
@@ -265,16 +180,8 @@ export class ListenersController {
           wrapper.id,
           defaultCallMetadata,
         );
-
-        const returnValue = proxy(...args);
-        if (isEventHandler) {
-          return this.forkJoinHandlersIfAttached(
-            returnValue,
-            [dataOrContextHost, ...args],
-            requestScopedHandler,
-          );
-        }
-        return returnValue;
+        requestScopedHandler.next?.(dataOrContextHost, ...args);
+        return proxy(...args);
       } catch (err) {
         let exceptionFilter = this.exceptionFiltersCache.get(
           instance[methodKey],
@@ -295,10 +202,7 @@ export class ListenersController {
     return requestScopedHandler;
   }
 
-  private getContextId<T extends RequestContext = any>(
-    request: T,
-    isTreeDurable: boolean,
-  ): ContextId {
+  private getContextId<T extends RequestContext = any>(request: T): ContextId {
     const contextId = ContextIdFactory.getByRequest(request);
     if (!request[REQUEST_CONTEXT_ID as any]) {
       Object.defineProperty(request, REQUEST_CONTEXT_ID, {
@@ -307,32 +211,19 @@ export class ListenersController {
         writable: false,
         configurable: false,
       });
-
-      const requestProviderValue = isTreeDurable ? contextId.payload : request;
-      this.container.registerRequestProvider(requestProviderValue, contextId);
+      this.container.registerRequestProvider(request, contextId);
     }
     return contextId;
   }
 
-  public transformToObservable<T>(
-    resultOrDeferred: Observable<T> | Promise<T>,
-  ): Observable<T>;
-  public transformToObservable<T>(
-    resultOrDeferred: T,
-  ): never extends Observable<ObservedValueOf<T>>
-    ? Observable<T>
-    : Observable<ObservedValueOf<T>>;
-  public transformToObservable(resultOrDeferred: any) {
-    if (resultOrDeferred instanceof Promise) {
-      return fromPromise(resultOrDeferred).pipe(
-        mergeMap(val => (isObservable(val) ? val : of(val))),
-      );
+  private connectIfStream(source: Observable<unknown>) {
+    if (!source) {
+      return;
     }
-
-    if (isObservable(resultOrDeferred)) {
-      return resultOrDeferred;
-    }
-
-    return of(resultOrDeferred);
+    const connectableSource = connectable(source, {
+      connector: () => new Subject(),
+      resetOnDisconnect: false,
+    });
+    connectableSource.connect();
   }
 }
diff --git a/packages/microservices/microservices-module.ts b/packages/microservices/microservices-module.ts
index 3dbda4464..735fda9fe 100644
--- a/packages/microservices/microservices-module.ts
+++ b/packages/microservices/microservices-module.ts
@@ -1,17 +1,15 @@
 import { Controller } from '@nestjs/common/interfaces/controllers/controller.interface';
-import { NestApplicationContextOptions } from '@nestjs/common/interfaces/nest-application-context-options.interface';
 import { ApplicationConfig } from '@nestjs/core/application-config';
 import { RuntimeException } from '@nestjs/core/errors/exceptions/runtime.exception';
-import { GuardsConsumer, GuardsContextCreator } from '@nestjs/core/guards';
+import { GuardsConsumer } from '@nestjs/core/guards/guards-consumer';
+import { GuardsContextCreator } from '@nestjs/core/guards/guards-context-creator';
 import { NestContainer } from '@nestjs/core/injector/container';
 import { Injector } from '@nestjs/core/injector/injector';
 import { InstanceWrapper } from '@nestjs/core/injector/instance-wrapper';
-import { GraphInspector } from '@nestjs/core/inspector/graph-inspector';
-import {
-  InterceptorsConsumer,
-  InterceptorsContextCreator,
-} from '@nestjs/core/interceptors';
-import { PipesConsumer, PipesContextCreator } from '@nestjs/core/pipes';
+import { InterceptorsConsumer } from '@nestjs/core/interceptors/interceptors-consumer';
+import { InterceptorsContextCreator } from '@nestjs/core/interceptors/interceptors-context-creator';
+import { PipesConsumer } from '@nestjs/core/pipes/pipes-consumer';
+import { PipesContextCreator } from '@nestjs/core/pipes/pipes-context-creator';
 import { ClientProxyFactory } from './client';
 import { ClientsContainer } from './container';
 import { ExceptionFiltersContext } from './context/exception-filters-context';
@@ -21,26 +19,18 @@ import { CustomTransportStrategy } from './interfaces';
 import { ListenersController } from './listeners-controller';
 import { Server } from './server/server';
 
-export class MicroservicesModule<
-  TAppOptions extends NestApplicationContextOptions = NestApplicationContextOptions,
-> {
+export class MicroservicesModule {
   private readonly clientsContainer = new ClientsContainer();
   private listenersController: ListenersController;
-  private appOptions: TAppOptions;
 
-  public register(
-    container: NestContainer,
-    graphInspector: GraphInspector,
-    config: ApplicationConfig,
-    options: TAppOptions,
-  ) {
-    this.appOptions = options;
+  public register(container: NestContainer, config: ApplicationConfig) {
+    const rpcProxy = new RpcProxy();
     const exceptionFiltersContext = new ExceptionFiltersContext(
       container,
       config,
     );
     const contextCreator = new RpcContextCreator(
-      new RpcProxy(),
+      rpcProxy,
       exceptionFiltersContext,
       new PipesContextCreator(container, config),
       new PipesConsumer(),
@@ -58,7 +48,6 @@ export class MicroservicesModule<
       injector,
       ClientProxyFactory,
       exceptionFiltersContext,
-      graphInspector,
     );
   }
 
@@ -79,9 +68,6 @@ export class MicroservicesModule<
     if (!this.listenersController) {
       throw new RuntimeException();
     }
-    if (this.appOptions?.preview) {
-      return;
-    }
     const modules = container.getModules();
     modules.forEach(({ controllers, providers }) => {
       this.bindClients(controllers);
diff --git a/packages/microservices/nest-microservice.ts b/packages/microservices/nest-microservice.ts
index 7b0930e69..be5a79c5f 100644
--- a/packages/microservices/nest-microservice.ts
+++ b/packages/microservices/nest-microservice.ts
@@ -12,8 +12,6 @@ import { ApplicationConfig } from '@nestjs/core/application-config';
 import { MESSAGES } from '@nestjs/core/constants';
 import { optionalRequire } from '@nestjs/core/helpers/optional-require';
 import { NestContainer } from '@nestjs/core/injector/container';
-import { Injector } from '@nestjs/core/injector/injector';
-import { GraphInspector } from '@nestjs/core/inspector/graph-inspector';
 import { NestApplicationContext } from '@nestjs/core/nest-application-context';
 import { Transport } from './enums/transport.enum';
 import { CustomTransportStrategy } from './interfaces/custom-transport-strategy.interface';
@@ -28,10 +26,10 @@ const { SocketModule } = optionalRequire(
 );
 
 export class NestMicroservice
-  extends NestApplicationContext<NestMicroserviceOptions>
+  extends NestApplicationContext
   implements INestMicroservice
 {
-  protected readonly logger = new Logger(NestMicroservice.name, {
+  private readonly logger = new Logger(NestMicroservice.name, {
     timestamp: true,
   });
   private readonly microservicesModule = new MicroservicesModule();
@@ -44,18 +42,11 @@ export class NestMicroservice
   constructor(
     container: NestContainer,
     config: NestMicroserviceOptions & MicroserviceOptions = {},
-    private readonly graphInspector: GraphInspector,
     private readonly applicationConfig: ApplicationConfig,
   ) {
-    super(container, config);
-
-    this.injector = new Injector({ preview: config.preview });
-    this.microservicesModule.register(
-      container,
-      this.graphInspector,
-      this.applicationConfig,
-      this.appOptions,
-    );
+    super(container);
+
+    this.microservicesModule.register(container, this.applicationConfig);
     this.createServer(config);
     this.selectContextModule();
   }
@@ -78,18 +69,10 @@ export class NestMicroservice
 
   public async registerModules(): Promise<any> {
     this.socketModule &&
-      this.socketModule.register(
-        this.container,
-        this.applicationConfig,
-        this.graphInspector,
-        this.appOptions,
-      );
-
-    if (!this.appOptions.preview) {
-      this.microservicesModule.setupClients(this.container);
-      this.registerListeners();
-    }
+      this.socketModule.register(this.container, this.applicationConfig);
+    this.microservicesModule.setupClients(this.container);
 
+    this.registerListeners();
     this.setIsInitialized(true);
 
     if (!this.isInitHookCalled) {
@@ -109,45 +92,21 @@ export class NestMicroservice
 
   public useGlobalFilters(...filters: ExceptionFilter[]): this {
     this.applicationConfig.useGlobalFilters(...filters);
-    filters.forEach(item =>
-      this.graphInspector.insertOrphanedEnhancer({
-        subtype: 'filter',
-        ref: item,
-      }),
-    );
     return this;
   }
 
   public useGlobalPipes(...pipes: PipeTransform<any>[]): this {
     this.applicationConfig.useGlobalPipes(...pipes);
-    pipes.forEach(item =>
-      this.graphInspector.insertOrphanedEnhancer({
-        subtype: 'pipe',
-        ref: item,
-      }),
-    );
     return this;
   }
 
   public useGlobalInterceptors(...interceptors: NestInterceptor[]): this {
     this.applicationConfig.useGlobalInterceptors(...interceptors);
-    interceptors.forEach(item =>
-      this.graphInspector.insertOrphanedEnhancer({
-        subtype: 'interceptor',
-        ref: item,
-      }),
-    );
     return this;
   }
 
   public useGlobalGuards(...guards: CanActivate[]): this {
     this.applicationConfig.useGlobalGuards(...guards);
-    guards.forEach(item =>
-      this.graphInspector.insertOrphanedEnhancer({
-        subtype: 'guard',
-        ref: item,
-      }),
-    );
     return this;
   }
 
@@ -161,7 +120,6 @@ export class NestMicroservice
   }
 
   public async listen() {
-    this.assertNotInPreviewMode('listen');
     !this.isInitialized && (await this.registerModules());
 
     return new Promise<any>((resolve, reject) => {
@@ -178,6 +136,13 @@ export class NestMicroservice
     });
   }
 
+  public async listenAsync(): Promise<any> {
+    this.logger.warn(
+      'DEPRECATED! "listenAsync" method is deprecated and will be removed in the next major release. Please, use "listen" instead.',
+    );
+    return this.listen();
+  }
+
   public async close(): Promise<any> {
     await this.server.close();
     if (this.isTerminated) {
@@ -208,10 +173,10 @@ export class NestMicroservice
   }
 
   protected async dispose(): Promise<void> {
+    await this.server.close();
     if (this.isTerminated) {
       return;
     }
-    await this.server.close();
     this.socketModule && (await this.socketModule.close());
     this.microservicesModule && (await this.microservicesModule.close());
   }
diff --git a/packages/microservices/package.json b/packages/microservices/package.json
index 994bf9dc0..3f3a31c82 100644
--- a/packages/microservices/package.json
+++ b/packages/microservices/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/microservices",
-  "version": "9.4.0",
+  "version": "8.2.3",
   "description": "Nest - modern, fast, powerful node.js web framework (@microservices)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -18,24 +18,25 @@
   },
   "dependencies": {
     "iterare": "1.2.1",
-    "tslib": "2.5.0"
+    "json-socket": "0.3.0",
+    "tslib": "2.3.1"
   },
   "devDependencies": {
-    "@nestjs/common": "9.4.0",
-    "@nestjs/core": "9.4.0"
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3"
   },
   "peerDependencies": {
     "@grpc/grpc-js": "*",
-    "@nestjs/common": "^9.0.0",
-    "@nestjs/core": "^9.0.0",
-    "@nestjs/websockets": "^9.0.0",
+    "@nestjs/common": "^8.0.0",
+    "@nestjs/core": "^8.0.0",
+    "@nestjs/websockets": "^8.0.0",
     "amqp-connection-manager": "*",
     "amqplib": "*",
     "cache-manager": "*",
-    "ioredis": "*",
     "kafkajs": "*",
     "mqtt": "*",
     "nats": "*",
+    "redis": "*",
     "reflect-metadata": "^0.1.12",
     "rxjs": "^7.1.0"
   },
@@ -58,7 +59,7 @@
     "nats": {
       "optional": true
     },
-    "ioredis": {
+    "redis": {
       "optional": true
     },
     "amqplib": {
diff --git a/packages/microservices/serializers/index.ts b/packages/microservices/serializers/index.ts
deleted file mode 100644
index b58734cf1..000000000
--- a/packages/microservices/serializers/index.ts
+++ /dev/null
@@ -1,5 +0,0 @@
-export * from './identity.serializer';
-export * from './kafka-request.serializer';
-export * from './mqtt-record.serializer';
-export * from './nats-record.serializer';
-export * from './rmq-record.serializer';
diff --git a/packages/microservices/serializers/kafka-request.serializer.ts b/packages/microservices/serializers/kafka-request.serializer.ts
index 7c519c458..cfe73b2ab 100644
--- a/packages/microservices/serializers/kafka-request.serializer.ts
+++ b/packages/microservices/serializers/kafka-request.serializer.ts
@@ -13,13 +13,8 @@ export interface KafkaRequest<T = any> {
   headers: Record<string, any>;
 }
 
-/**
- * @publicApi
- */
-export class KafkaRequestSerializer
-  implements Serializer<any, KafkaRequest | Promise<KafkaRequest>>
-{
-  serialize(value: any) {
+export class KafkaRequestSerializer implements Serializer<any, KafkaRequest> {
+  serialize(value: any): KafkaRequest {
     const isNotKafkaMessage =
       isNil(value) ||
       !isObject(value) ||
diff --git a/packages/microservices/serializers/mqtt-record.serializer.ts b/packages/microservices/serializers/mqtt-record.serializer.ts
index be482b68e..18c0bb161 100644
--- a/packages/microservices/serializers/mqtt-record.serializer.ts
+++ b/packages/microservices/serializers/mqtt-record.serializer.ts
@@ -1,5 +1,5 @@
-import { isObject } from '@nestjs/common/utils/shared.utils';
-import { ReadPacket, Serializer } from '../interfaces';
+import { ReadPacket } from '../interfaces';
+import { Serializer } from '../interfaces/serializer.interface';
 import { MqttRecord } from '../record-builders';
 
 export class MqttRecordSerializer
@@ -8,7 +8,7 @@ export class MqttRecordSerializer
   serialize(packet: ReadPacket | any): ReadPacket & Partial<MqttRecord> {
     if (
       packet?.data &&
-      isObject(packet.data) &&
+      typeof packet.data === 'object' &&
       packet.data instanceof MqttRecord
     ) {
       const record = packet.data as MqttRecord;
diff --git a/packages/microservices/serializers/nats-record.serializer.ts b/packages/microservices/serializers/nats-record.serializer.ts
index 77f9a4bab..f1dc9a8df 100644
--- a/packages/microservices/serializers/nats-record.serializer.ts
+++ b/packages/microservices/serializers/nats-record.serializer.ts
@@ -1,5 +1,4 @@
 import { loadPackage } from '@nestjs/common/utils/load-package.util';
-import { isObject } from '@nestjs/common/utils/shared.utils';
 import { NatsCodec } from '../external/nats-client.interface';
 import { ReadPacket } from '../interfaces';
 import { Serializer } from '../interfaces/serializer.interface';
@@ -21,7 +20,9 @@ export class NatsRecordSerializer
 
   serialize(packet: ReadPacket | any): NatsRecord {
     const natsMessage =
-      packet?.data && isObject(packet.data) && packet.data instanceof NatsRecord
+      packet?.data &&
+      typeof packet.data === 'object' &&
+      packet.data instanceof NatsRecord
         ? (packet.data as NatsRecord)
         : new NatsRecordBuilder(packet?.data).build();
 
diff --git a/packages/microservices/serializers/rmq-record.serializer.ts b/packages/microservices/serializers/rmq-record.serializer.ts
index 8039c2f1c..0d85426bb 100644
--- a/packages/microservices/serializers/rmq-record.serializer.ts
+++ b/packages/microservices/serializers/rmq-record.serializer.ts
@@ -1,4 +1,3 @@
-import { isObject } from '@nestjs/common/utils/shared.utils';
 import { ReadPacket } from '../interfaces';
 import { Serializer } from '../interfaces/serializer.interface';
 import { RmqRecord } from '../record-builders';
@@ -9,7 +8,7 @@ export class RmqRecordSerializer
   serialize(packet: ReadPacket | any): ReadPacket & Partial<RmqRecord> {
     if (
       packet?.data &&
-      isObject(packet.data) &&
+      typeof packet.data === 'object' &&
       packet.data instanceof RmqRecord
     ) {
       const record = packet.data as RmqRecord;
diff --git a/packages/microservices/server/server-grpc.ts b/packages/microservices/server/server-grpc.ts
index e001907a0..9606765ad 100644
--- a/packages/microservices/server/server-grpc.ts
+++ b/packages/microservices/server/server-grpc.ts
@@ -14,10 +14,10 @@ import { GrpcMethodStreamingType } from '../decorators';
 import { Transport } from '../enums';
 import { InvalidGrpcPackageException } from '../errors/invalid-grpc-package.exception';
 import { InvalidProtoDefinitionException } from '../errors/invalid-proto-definition.exception';
-import { ChannelOptions } from '../external/grpc-options.interface';
 import { CustomTransportStrategy, MessageHandler } from '../interfaces';
 import { GrpcOptions } from '../interfaces/microservice-configuration.interface';
 import { Server } from './server';
+import { ChannelOptions } from '../external/grpc-options.interface';
 
 let grpcPackage: any = {};
 let grpcProtoLoaderPackage: any = {};
@@ -84,7 +84,7 @@ export class ServerGrpc extends Server implements CustomTransportStrategy {
 
     for (const packageName of packageNames) {
       const grpcPkg = this.lookupPackage(grpcContext, packageName);
-      await this.createServices(grpcPkg, packageName);
+      await this.createServices(grpcPkg);
     }
   }
 
@@ -220,10 +220,10 @@ export class ServerGrpc extends Server implements CustomTransportStrategy {
   public createUnaryServiceMethod(methodHandler: Function): Function {
     return async (call: GrpcCall, callback: Function) => {
       const handler = methodHandler(call.request, call.metadata, call);
-      this.transformToObservable(await handler).subscribe({
-        next: data => callback(null, data),
-        error: (err: any) => callback(err),
-      });
+      this.transformToObservable(await handler).subscribe(
+        data => callback(null, data),
+        (err: any) => callback(err),
+      );
     };
   }
 
@@ -292,7 +292,7 @@ export class ServerGrpc extends Server implements CustomTransportStrategy {
           ),
         );
 
-        if (!isUndefined(response)) {
+        if (typeof response !== 'undefined') {
           callback(null, response);
         }
       }
@@ -388,7 +388,7 @@ export class ServerGrpc extends Server implements CustomTransportStrategy {
         grpcPackage.loadPackageDefinition(packageDefinition);
       return packageObject;
     } catch (err) {
-      const invalidProtoError = new InvalidProtoDefinitionException(err.path);
+      const invalidProtoError = new InvalidProtoDefinitionException();
       const message =
         err && err.message ? err.message : invalidProtoError.message;
 
@@ -452,9 +452,9 @@ export class ServerGrpc extends Server implements CustomTransportStrategy {
     return name + '.' + key;
   }
 
-  private async createServices(grpcPkg: any, packageName: string) {
+  private async createServices(grpcPkg: any) {
     if (!grpcPkg) {
-      const invalidPackageError = new InvalidGrpcPackageException(packageName);
+      const invalidPackageError = new InvalidGrpcPackageException();
       this.logger.error(invalidPackageError.message, invalidPackageError.stack);
       throw invalidPackageError;
     }
diff --git a/packages/microservices/server/server-kafka.ts b/packages/microservices/server/server-kafka.ts
index 292cbb384..4715ed57a 100644
--- a/packages/microservices/server/server-kafka.ts
+++ b/packages/microservices/server/server-kafka.ts
@@ -1,17 +1,14 @@
 import { Logger } from '@nestjs/common/services/logger.service';
 import { isNil } from '@nestjs/common/utils/shared.utils';
-import { isObservable, lastValueFrom, Observable, ReplaySubject } from 'rxjs';
+import { Observable } from 'rxjs';
 import {
   KAFKA_DEFAULT_BROKER,
   KAFKA_DEFAULT_CLIENT,
   KAFKA_DEFAULT_GROUP,
-  NO_EVENT_HANDLER,
   NO_MESSAGE_HANDLER,
 } from '../constants';
 import { KafkaContext } from '../ctx-host';
-import { KafkaRequestDeserializer } from '../deserializers/kafka-request.deserializer';
 import { KafkaHeaders, Transport } from '../enums';
-import { KafkaRetriableException } from '../exceptions';
 import {
   BrokersFunction,
   Consumer,
@@ -29,7 +26,6 @@ import {
   CustomTransportStrategy,
   KafkaOptions,
   OutgoingResponse,
-  ReadPacket,
 } from '../interfaces';
 import { KafkaRequestSerializer } from '../serializers/kafka-request.serializer';
 import { Server } from './server';
@@ -57,7 +53,7 @@ export class ServerKafka extends Server implements CustomTransportStrategy {
     const consumerOptions =
       this.getOptionsProp(this.options, 'consumer') || ({} as ConsumerConfig);
     const postfixId =
-      this.getOptionsProp(this.options, 'postfixId') ?? '-server';
+      this.getOptionsProp(this.options, 'postfixId') || '-server';
 
     this.brokers = clientOptions.brokers || [KAFKA_DEFAULT_BROKER];
 
@@ -166,14 +162,10 @@ export class ServerKafka extends Server implements CustomTransportStrategy {
       rawMessage,
       payload.partition,
       payload.topic,
-      this.consumer,
-      payload.heartbeat,
-      this.producer,
     ]);
-    const handler = this.getHandlerByPattern(packet.pattern);
     // if the correlation id or reply topic is not set
     // then this is an event (events could still have correlation id)
-    if (handler?.isEventHandler || !correlationId || !replyTopic) {
+    if (!correlationId || !replyTopic) {
       return this.handleEvent(packet.pattern, packet, kafkaContext);
     }
 
@@ -182,7 +174,7 @@ export class ServerKafka extends Server implements CustomTransportStrategy {
       replyPartition,
       correlationId,
     );
-
+    const handler = this.getHandlerByPattern(packet.pattern);
     if (!handler) {
       return publish({
         id: correlationId,
@@ -191,50 +183,18 @@ export class ServerKafka extends Server implements CustomTransportStrategy {
     }
 
     const response$ = this.transformToObservable(
-      handler(packet.data, kafkaContext),
-    );
-
-    const replayStream$ = new ReplaySubject();
-    await this.combineStreamsAndThrowIfRetriable(response$, replayStream$);
-
-    this.send(replayStream$, publish);
+      await handler(packet.data, kafkaContext),
+    ) as Observable<any>;
+    response$ && this.send(response$, publish);
   }
 
-  private combineStreamsAndThrowIfRetriable(
-    response$: Observable<any>,
-    replayStream$: ReplaySubject<unknown>,
-  ) {
-    return new Promise<void>((resolve, reject) => {
-      let isPromiseResolved = false;
-      response$.subscribe({
-        next: val => {
-          replayStream$.next(val);
-          if (!isPromiseResolved) {
-            isPromiseResolved = true;
-            resolve();
-          }
-        },
-        error: err => {
-          if (err instanceof KafkaRetriableException && !isPromiseResolved) {
-            isPromiseResolved = true;
-            reject(err);
-          } else {
-            resolve();
-          }
-          replayStream$.error(err);
-        },
-        complete: () => replayStream$.complete(),
-      });
-    });
-  }
-
-  public async sendMessage(
+  public sendMessage(
     message: OutgoingResponse,
     replyTopic: string,
     replyPartition: string,
     correlationId: string,
   ): Promise<RecordMetadata[]> {
-    const outgoingMessage = await this.serializer.serialize(message.response);
+    const outgoingMessage = this.serializer.serialize(message.response);
     this.assignReplyPartition(replyPartition, outgoingMessage);
     this.assignCorrelationIdHeader(correlationId, outgoingMessage);
     this.assignErrorHeader(message, outgoingMessage);
@@ -267,12 +227,9 @@ export class ServerKafka extends Server implements CustomTransportStrategy {
     if (!outgoingResponse.err) {
       return;
     }
-    const stringifiedError =
-      typeof outgoingResponse.err === 'object'
-        ? JSON.stringify(outgoingResponse.err)
-        : outgoingResponse.err;
-    outgoingMessage.headers[KafkaHeaders.NEST_ERR] =
-      Buffer.from(stringifiedError);
+    outgoingMessage.headers[KafkaHeaders.NEST_ERR] = Buffer.from(
+      outgoingResponse.err,
+    );
   }
 
   public assignCorrelationIdHeader(
@@ -293,27 +250,8 @@ export class ServerKafka extends Server implements CustomTransportStrategy {
     outgoingMessage.partition = parseFloat(replyPartition);
   }
 
-  public async handleEvent(
-    pattern: string,
-    packet: ReadPacket,
-    context: KafkaContext,
-  ): Promise<any> {
-    const handler = this.getHandlerByPattern(pattern);
-    if (!handler) {
-      return this.logger.error(NO_EVENT_HANDLER`${pattern}`);
-    }
-    const resultOrStream = await handler(packet.data, context);
-    if (isObservable(resultOrStream)) {
-      await lastValueFrom(resultOrStream);
-    }
-  }
-
   protected initializeSerializer(options: KafkaOptions['options']) {
     this.serializer =
       (options && options.serializer) || new KafkaRequestSerializer();
   }
-
-  protected initializeDeserializer(options: KafkaOptions['options']) {
-    this.deserializer = options?.deserializer ?? new KafkaRequestDeserializer();
-  }
 }
diff --git a/packages/microservices/server/server-mqtt.ts b/packages/microservices/server/server-mqtt.ts
index 7568e7f06..b57c6c519 100644
--- a/packages/microservices/server/server-mqtt.ts
+++ b/packages/microservices/server/server-mqtt.ts
@@ -1,4 +1,5 @@
 import { isUndefined } from '@nestjs/common/utils/shared.utils';
+import { Observable } from 'rxjs';
 import {
   CONNECT_EVENT,
   ERROR_EVENT,
@@ -29,9 +30,8 @@ let mqttPackage: any = {};
 export class ServerMqtt extends Server implements CustomTransportStrategy {
   public readonly transportId = Transport.MQTT;
 
-  protected mqttClient: MqttClient;
-
   private readonly url: string;
+  private mqttClient: MqttClient;
 
   constructor(private readonly options: MqttOptions['options']) {
     super();
@@ -123,7 +123,7 @@ export class ServerMqtt extends Server implements CustomTransportStrategy {
     }
     const response$ = this.transformToObservable(
       await handler(packet.data, mqttContext),
-    );
+    ) as Observable<any>;
     response$ && this.send(response$, publish);
   }
 
@@ -191,25 +191,18 @@ export class ServerMqtt extends Server implements CustomTransportStrategy {
 
     for (const [key, value] of this.messageHandlers) {
       if (
-        !key.includes(MQTT_WILDCARD_SINGLE) &&
-        !key.includes(MQTT_WILDCARD_ALL)
+        key.indexOf(MQTT_WILDCARD_SINGLE) === -1 &&
+        key.indexOf(MQTT_WILDCARD_ALL) === -1
       ) {
         continue;
       }
-      const keyWithoutSharedPrefix = this.removeHandlerKeySharedPrefix(key);
-      if (this.matchMqttPattern(keyWithoutSharedPrefix, route)) {
+      if (this.matchMqttPattern(key, route)) {
         return value;
       }
     }
     return null;
   }
 
-  public removeHandlerKeySharedPrefix(handlerKey: string) {
-    return handlerKey && handlerKey.startsWith('$share')
-      ? handlerKey.split('/').slice(2).join('/')
-      : handlerKey;
-  }
-
   public getRequestPattern(pattern: string): string {
     return pattern;
   }
diff --git a/packages/microservices/server/server-nats.ts b/packages/microservices/server/server-nats.ts
index 73206ee77..266b96a14 100644
--- a/packages/microservices/server/server-nats.ts
+++ b/packages/microservices/server/server-nats.ts
@@ -1,4 +1,5 @@
-import { isUndefined, isObject } from '@nestjs/common/utils/shared.utils';
+import { isUndefined } from '@nestjs/common/utils/shared.utils';
+import { Observable } from 'rxjs';
 import { NATS_DEFAULT_URL, NO_MESSAGE_HANDLER } from '../constants';
 import { NatsContext } from '../ctx-host/nats.context';
 import { NatsRequestJSONDeserializer } from '../deserializers/nats-request-json.deserializer';
@@ -108,7 +109,7 @@ export class ServerNats extends Server implements CustomTransportStrategy {
     }
     const response$ = this.transformToObservable(
       await handler(message.data, natsCtx),
-    );
+    ) as Observable<any>;
     response$ && this.send(response$, publish);
   }
 
@@ -133,31 +134,20 @@ export class ServerNats extends Server implements CustomTransportStrategy {
   public async handleStatusUpdates(client: Client) {
     for await (const status of client.status()) {
       const data =
-        status.data && isObject(status.data)
+        status.data && typeof status.data === 'object'
           ? JSON.stringify(status.data)
           : status.data;
-
-      switch (status.type) {
-        case 'error':
-        case 'disconnect':
-          this.logger.error(
-            `NatsError: type: "${status.type}", data: "${data}".`,
-          );
-          break;
-
-        case 'pingTimer':
-          if (this.options.debug) {
-            this.logger.debug(
-              `NatsStatus: type: "${status.type}", data: "${data}".`,
-            );
-          }
-          break;
-
-        default:
-          this.logger.log(
-            `NatsStatus: type: "${status.type}", data: "${data}".`,
-          );
-          break;
+      if (status.type === 'disconnect' || status.type === 'error') {
+        this.logger.error(
+          `NatsError: type: "${status.type}", data: "${data}".`,
+        );
+      } else {
+        const message = `NatsStatus: type: "${status.type}", data: "${data}".`;
+        if (status.type === 'pingTimer') {
+          this.logger.debug(message);
+        } else {
+          this.logger.log(message);
+        }
       }
     }
   }
diff --git a/packages/microservices/server/server-redis.ts b/packages/microservices/server/server-redis.ts
index 09c619f13..085849d09 100644
--- a/packages/microservices/server/server-redis.ts
+++ b/packages/microservices/server/server-redis.ts
@@ -1,36 +1,41 @@
 import { isUndefined } from '@nestjs/common/utils/shared.utils';
+import { Observable } from 'rxjs';
 import {
+  CONNECT_EVENT,
   ERROR_EVENT,
   MESSAGE_EVENT,
   NO_MESSAGE_HANDLER,
-  REDIS_DEFAULT_HOST,
-  REDIS_DEFAULT_PORT,
+  REDIS_DEFAULT_URL,
 } from '../constants';
 import { RedisContext } from '../ctx-host';
 import { Transport } from '../enums';
 import {
-  CustomTransportStrategy,
-  IncomingRequest,
-  RedisOptions,
-} from '../interfaces';
+  ClientOpts,
+  RedisClient,
+  RetryStrategyOptions,
+} from '../external/redis.interface';
+import { CustomTransportStrategy, IncomingRequest } from '../interfaces';
+import { RedisOptions } from '../interfaces/microservice-configuration.interface';
 import { Server } from './server';
 
-type Redis = any;
-
-let redisPackage = {} as any;
+let redisPackage: any = {};
 
 export class ServerRedis extends Server implements CustomTransportStrategy {
   public readonly transportId = Transport.REDIS;
 
-  private subClient: Redis;
-  private pubClient: Redis;
+  private readonly url: string;
+  private subClient: RedisClient;
+  private pubClient: RedisClient;
   private isExplicitlyTerminated = false;
 
   constructor(private readonly options: RedisOptions['options']) {
     super();
+    this.url =
+      this.getOptionsProp(options, 'url') ||
+      (!this.getOptionsProp(options, 'host') && REDIS_DEFAULT_URL);
 
-    redisPackage = this.loadPackage('ioredis', ServerRedis.name, () =>
-      require('ioredis'),
+    redisPackage = this.loadPackage('redis', ServerRedis.name, () =>
+      require('redis'),
     );
 
     this.initializeSerializer(options);
@@ -46,7 +51,6 @@ export class ServerRedis extends Server implements CustomTransportStrategy {
 
       this.handleError(this.pubClient);
       this.handleError(this.subClient);
-
       this.start(callback);
     } catch (err) {
       callback(err);
@@ -54,32 +58,18 @@ export class ServerRedis extends Server implements CustomTransportStrategy {
   }
 
   public start(callback?: () => void) {
-    Promise.all([this.subClient.connect(), this.pubClient.connect()])
-      .then(() => {
-        this.bindEvents(this.subClient, this.pubClient);
-        callback();
-      })
-      .catch(callback);
+    this.bindEvents(this.subClient, this.pubClient);
+    this.subClient.on(CONNECT_EVENT, callback);
   }
 
-  public bindEvents(subClient: Redis, pubClient: Redis) {
-    subClient.on(
-      this.options.wildcards ? 'pmessage' : MESSAGE_EVENT,
-      this.getMessageHandler(pubClient).bind(this),
-    );
+  public bindEvents(subClient: RedisClient, pubClient: RedisClient) {
+    subClient.on(MESSAGE_EVENT, this.getMessageHandler(pubClient).bind(this));
     const subscribePatterns = [...this.messageHandlers.keys()];
     subscribePatterns.forEach(pattern => {
       const { isEventHandler } = this.messageHandlers.get(pattern);
-
-      const channel = isEventHandler
-        ? pattern
-        : this.getRequestPattern(pattern);
-
-      if (this.options.wildcards) {
-        subClient.psubscribe(channel);
-      } else {
-        subClient.subscribe(channel);
-      }
+      subClient.subscribe(
+        isEventHandler ? pattern : this.getRequestPattern(pattern),
+      );
     });
   }
 
@@ -89,32 +79,26 @@ export class ServerRedis extends Server implements CustomTransportStrategy {
     this.subClient && this.subClient.quit();
   }
 
-  public createRedisClient(): Redis {
-    return new redisPackage({
-      port: REDIS_DEFAULT_PORT,
-      host: REDIS_DEFAULT_HOST,
+  public createRedisClient(): RedisClient {
+    return redisPackage.createClient({
       ...this.getClientOptions(),
-      lazyConnect: true,
+      url: this.url,
     });
   }
 
-  public getMessageHandler(pub: Redis) {
-    return this.options.wildcards
-      ? (channel: string, pattern: string, buffer: string | any) =>
-          this.handleMessage(channel, buffer, pub, pattern)
-      : (channel: string, buffer: string | any) =>
-          this.handleMessage(channel, buffer, pub, channel);
+  public getMessageHandler(pub: RedisClient) {
+    return async (channel: string, buffer: string | any) =>
+      this.handleMessage(channel, buffer, pub);
   }
 
   public async handleMessage(
     channel: string,
     buffer: string | any,
-    pub: Redis,
-    pattern: string,
+    pub: RedisClient,
   ) {
     const rawMessage = this.parseMessage(buffer);
     const packet = await this.deserializer.deserialize(rawMessage, { channel });
-    const redisCtx = new RedisContext([pattern]);
+    const redisCtx = new RedisContext([channel]);
 
     if (isUndefined((packet as IncomingRequest).id)) {
       return this.handleEvent(channel, packet, redisCtx);
@@ -137,11 +121,11 @@ export class ServerRedis extends Server implements CustomTransportStrategy {
     }
     const response$ = this.transformToObservable(
       await handler(packet.data, redisCtx),
-    );
+    ) as Observable<any>;
     response$ && this.send(response$, publish);
   }
 
-  public getPublisher(pub: Redis, pattern: any, id: string) {
+  public getPublisher(pub: RedisClient, pattern: any, id: string) {
     return (response: any) => {
       Object.assign(response, { id });
       const outgoingResponse = this.serializer.serialize(response);
@@ -173,25 +157,31 @@ export class ServerRedis extends Server implements CustomTransportStrategy {
     stream.on(ERROR_EVENT, (err: any) => this.logger.error(err));
   }
 
-  public getClientOptions(): Partial<RedisOptions['options']> {
-    const retryStrategy = (times: number) => this.createRetryStrategy(times);
+  public getClientOptions(): Partial<ClientOpts> {
+    const retry_strategy = (options: RetryStrategyOptions) =>
+      this.createRetryStrategy(options);
 
     return {
       ...(this.options || {}),
-      retryStrategy,
+      retry_strategy,
     };
   }
 
-  public createRetryStrategy(times: number): undefined | number | void {
+  public createRetryStrategy(
+    options: RetryStrategyOptions,
+  ): undefined | number | void {
+    if (options.error && (options.error as any).code === 'ECONNREFUSED') {
+      this.logger.error(`Error ECONNREFUSED: ${this.url}`);
+    }
     if (this.isExplicitlyTerminated) {
       return undefined;
     }
     if (
       !this.getOptionsProp(this.options, 'retryAttempts') ||
-      times > this.getOptionsProp(this.options, 'retryAttempts')
+      options.attempt > this.getOptionsProp(this.options, 'retryAttempts')
     ) {
-      this.logger.error(`Retry time exhausted`);
-      return;
+      this.logger.error(`Retry time exhausted: ${this.url}`);
+      throw new Error('Retry time exhausted');
     }
     return this.getOptionsProp(this.options, 'retryDelay') || 0;
   }
diff --git a/packages/microservices/server/server-rmq.ts b/packages/microservices/server/server-rmq.ts
index 7827c8c7a..d6645ba73 100644
--- a/packages/microservices/server/server-rmq.ts
+++ b/packages/microservices/server/server-rmq.ts
@@ -3,16 +3,14 @@ import {
   isString,
   isUndefined,
 } from '@nestjs/common/utils/shared.utils';
+import { Observable } from 'rxjs';
 import {
-  CONNECTION_FAILED_MESSAGE,
   CONNECT_EVENT,
-  CONNECT_FAILED_EVENT,
   DISCONNECTED_RMQ_MESSAGE,
   DISCONNECT_EVENT,
   NO_MESSAGE_HANDLER,
   RQM_DEFAULT_IS_GLOBAL_PREFETCH_COUNT,
   RQM_DEFAULT_NOACK,
-  RQM_DEFAULT_NO_ASSERT,
   RQM_DEFAULT_PREFETCH_COUNT,
   RQM_DEFAULT_QUEUE,
   RQM_DEFAULT_QUEUE_OPTIONS,
@@ -31,20 +29,16 @@ import { Server } from './server';
 
 let rqmPackage: any = {};
 
-const INFINITE_CONNECTION_ATTEMPTS = -1;
-
 export class ServerRMQ extends Server implements CustomTransportStrategy {
   public readonly transportId = Transport.RMQ;
 
   protected server: any = null;
   protected channel: any = null;
-  protected connectionAttempts = 0;
   protected readonly urls: string[] | RmqUrl[];
   protected readonly queue: string;
   protected readonly prefetchCount: number;
   protected readonly queueOptions: any;
   protected readonly isGlobalPrefetchCount: boolean;
-  protected readonly noAssert: boolean;
 
   constructor(protected readonly options: RmqOptions['options']) {
     super();
@@ -60,8 +54,6 @@ export class ServerRMQ extends Server implements CustomTransportStrategy {
     this.queueOptions =
       this.getOptionsProp(this.options, 'queueOptions') ||
       RQM_DEFAULT_QUEUE_OPTIONS;
-    this.noAssert =
-      this.getOptionsProp(this.options, 'noAssert') || RQM_DEFAULT_NO_ASSERT;
 
     this.loadPackage('amqplib', ServerRMQ.name, () => require('amqplib'));
     rqmPackage = this.loadPackage(
@@ -89,9 +81,7 @@ export class ServerRMQ extends Server implements CustomTransportStrategy {
     this.server && this.server.close();
   }
 
-  public async start(
-    callback?: (err?: unknown, ...optionalParams: unknown[]) => void,
-  ) {
+  public async start(callback?: () => void) {
     this.server = this.createClient();
     this.server.on(CONNECT_EVENT, () => {
       if (this.channel) {
@@ -102,33 +92,10 @@ export class ServerRMQ extends Server implements CustomTransportStrategy {
         setup: (channel: any) => this.setupChannel(channel, callback),
       });
     });
-
-    const maxConnectionAttempts = this.getOptionsProp(
-      this.options,
-      'maxConnectionAttempts',
-      INFINITE_CONNECTION_ATTEMPTS,
-    );
     this.server.on(DISCONNECT_EVENT, (err: any) => {
       this.logger.error(DISCONNECTED_RMQ_MESSAGE);
       this.logger.error(err);
     });
-    this.server.on(CONNECT_FAILED_EVENT, (error: Record<string, unknown>) => {
-      this.logger.error(CONNECTION_FAILED_MESSAGE);
-      if (error?.err) {
-        this.logger.error(error.err);
-      }
-      const isReconnecting = !!this.channel;
-      if (
-        maxConnectionAttempts === INFINITE_CONNECTION_ATTEMPTS ||
-        isReconnecting
-      ) {
-        return;
-      }
-      if (++this.connectionAttempts === maxConnectionAttempts) {
-        this.close();
-        callback?.(error.err ?? new Error(CONNECTION_FAILED_MESSAGE));
-      }
-    });
   }
 
   public createClient<T = any>(): T {
@@ -143,9 +110,7 @@ export class ServerRMQ extends Server implements CustomTransportStrategy {
   public async setupChannel(channel: any, callback: Function) {
     const noAck = this.getOptionsProp(this.options, 'noAck', RQM_DEFAULT_NOACK);
 
-    if (!this.queueOptions.noAssert) {
-      await channel.assertQueue(this.queue, this.queueOptions);
-    }
+    await channel.assertQueue(this.queue, this.queueOptions);
     await channel.prefetch(this.prefetchCount, this.isGlobalPrefetchCount);
     channel.consume(
       this.queue,
@@ -165,8 +130,8 @@ export class ServerRMQ extends Server implements CustomTransportStrategy {
       return;
     }
     const { content, properties } = message;
-    const rawMessage = this.parseMessageContent(content);
-    const packet = await this.deserializer.deserialize(rawMessage, properties);
+    const rawMessage = JSON.parse(content.toString());
+    const packet = await this.deserializer.deserialize(rawMessage);
     const pattern = isString(packet.pattern)
       ? packet.pattern
       : JSON.stringify(packet.pattern);
@@ -192,7 +157,7 @@ export class ServerRMQ extends Server implements CustomTransportStrategy {
     }
     const response$ = this.transformToObservable(
       await handler(packet.data, rmqContext),
-    );
+    ) as Observable<any>;
 
     const publish = <T>(data: T) =>
       this.sendMessage(data, properties.replyTo, properties.correlationId);
@@ -218,12 +183,4 @@ export class ServerRMQ extends Server implements CustomTransportStrategy {
   protected initializeSerializer(options: RmqOptions['options']) {
     this.serializer = options?.serializer ?? new RmqRecordSerializer();
   }
-
-  private parseMessageContent(content: Buffer) {
-    try {
-      return JSON.parse(content.toString());
-    } catch {
-      return content.toString();
-    }
-  }
 }
diff --git a/packages/microservices/server/server-tcp.ts b/packages/microservices/server/server-tcp.ts
index 655fcd003..0e57c73d5 100644
--- a/packages/microservices/server/server-tcp.ts
+++ b/packages/microservices/server/server-tcp.ts
@@ -1,7 +1,7 @@
-import { Type } from '@nestjs/common';
 import { isString, isUndefined } from '@nestjs/common/utils/shared.utils';
 import * as net from 'net';
 import { Server as NetSocket, Socket } from 'net';
+import { Observable } from 'rxjs';
 import {
   CLOSE_EVENT,
   EADDRINUSE,
@@ -14,8 +14,7 @@ import {
 } from '../constants';
 import { TcpContext } from '../ctx-host/tcp.context';
 import { Transport } from '../enums';
-import { JsonSocket, TcpSocket } from '../helpers';
-import { createServer as tlsCreateServer } from 'tls';
+import { JsonSocket } from '../helpers/json-socket';
 import {
   CustomTransportStrategy,
   IncomingRequest,
@@ -29,22 +28,16 @@ import { Server } from './server';
 export class ServerTCP extends Server implements CustomTransportStrategy {
   public readonly transportId = Transport.TCP;
 
-  protected server: NetSocket;
-
   private readonly port: number;
   private readonly host: string;
-  private readonly socketClass: Type<TcpSocket>;
+  private server: NetSocket;
   private isExplicitlyTerminated = false;
   private retryAttemptsCount = 0;
-  private tlsOptions?;
 
   constructor(private readonly options: TcpOptions['options']) {
     super();
     this.port = this.getOptionsProp(options, 'port') || TCP_DEFAULT_PORT;
     this.host = this.getOptionsProp(options, 'host') || TCP_DEFAULT_HOST;
-    this.socketClass =
-      this.getOptionsProp(options, 'socketClass') || JsonSocket;
-    this.tlsOptions = this.getOptionsProp(options, 'tlsOptions');
 
     this.init();
     this.initializeSerializer(options);
@@ -64,7 +57,6 @@ export class ServerTCP extends Server implements CustomTransportStrategy {
 
   public close() {
     this.isExplicitlyTerminated = true;
-
     this.server.close();
   }
 
@@ -76,7 +68,7 @@ export class ServerTCP extends Server implements CustomTransportStrategy {
     readSocket.on(ERROR_EVENT, this.handleError.bind(this));
   }
 
-  public async handleMessage(socket: TcpSocket, rawMessage: unknown) {
+  public async handleMessage(socket: JsonSocket, rawMessage: unknown) {
     const packet = await this.deserializer.deserialize(rawMessage);
     const pattern = !isString(packet.pattern)
       ? JSON.stringify(packet.pattern)
@@ -98,7 +90,7 @@ export class ServerTCP extends Server implements CustomTransportStrategy {
     }
     const response$ = this.transformToObservable(
       await handler(packet.data, tcpContext),
-    );
+    ) as Observable<any>;
 
     response$ &&
       this.send(response$, data => {
@@ -121,27 +113,18 @@ export class ServerTCP extends Server implements CustomTransportStrategy {
     }
     ++this.retryAttemptsCount;
     return setTimeout(
-      () => this.server.listen(this.port, this.host),
+      () => this.server.listen(this.port),
       this.getOptionsProp(this.options, 'retryDelay') || 0,
     );
   }
 
   private init() {
-    if (this.tlsOptions) {
-      // TLS enabled, use tls server
-      this.server = tlsCreateServer(
-        this.tlsOptions,
-        this.bindHandler.bind(this),
-      );
-    } else {
-      // TLS disabled, use net server
-      this.server = net.createServer(this.bindHandler.bind(this));
-    }
+    this.server = net.createServer(this.bindHandler.bind(this));
     this.server.on(ERROR_EVENT, this.handleError.bind(this));
     this.server.on(CLOSE_EVENT, this.handleClose.bind(this));
   }
 
-  private getSocketInstance(socket: Socket): TcpSocket {
-    return new this.socketClass(socket);
+  private getSocketInstance(socket: Socket): JsonSocket {
+    return new JsonSocket(socket);
   }
 }
diff --git a/packages/microservices/server/server.ts b/packages/microservices/server/server.ts
index 8a88a1296..99025a9dd 100644
--- a/packages/microservices/server/server.ts
+++ b/packages/microservices/server/server.ts
@@ -1,17 +1,16 @@
 import { Logger, LoggerService } from '@nestjs/common/services/logger.service';
 import { loadPackage } from '@nestjs/common/utils/load-package.util';
+import { isFunction } from '@nestjs/common/utils/shared.utils';
 import {
   connectable,
-  EMPTY,
+  EMPTY as empty,
   from as fromPromise,
-  isObservable,
   Observable,
-  ObservedValueOf,
   of,
   Subject,
   Subscription,
 } from 'rxjs';
-import { catchError, finalize, mergeMap } from 'rxjs/operators';
+import { catchError, finalize } from 'rxjs/operators';
 import { NO_EVENT_HANDLER } from '../constants';
 import { BaseRpcContext } from '../ctx-host/base-rpc.context';
 import { IncomingRequestDeserializer } from '../deserializers/incoming-request.deserializer';
@@ -44,11 +43,9 @@ export abstract class Server {
     pattern: any,
     callback: MessageHandler,
     isEventHandler = false,
-    extras: Record<string, any> = {},
   ) {
     const normalizedPattern = this.normalizePattern(pattern);
     callback.isEventHandler = isEventHandler;
-    callback.extras = extras;
 
     if (this.messageHandlers.has(normalizedPattern) && isEventHandler) {
       const headRef = this.messageHandlers.get(normalizedPattern);
@@ -97,7 +94,7 @@ export abstract class Server {
       .pipe(
         catchError((err: any) => {
           scheduleOnNextTick({ err });
-          return EMPTY;
+          return empty;
         }),
         finalize(() => scheduleOnNextTick({ isDisposed: true })),
       )
@@ -111,10 +108,12 @@ export abstract class Server {
   ): Promise<any> {
     const handler = this.getHandlerByPattern(pattern);
     if (!handler) {
-      return this.logger.error(NO_EVENT_HANDLER`${pattern}`);
+      return this.logger.error(
+        `${NO_EVENT_HANDLER} Event pattern: ${JSON.stringify(pattern)}.`,
+      );
     }
     const resultOrStream = await handler(packet.data, context);
-    if (isObservable(resultOrStream)) {
+    if (this.isObservable(resultOrStream)) {
       const connectableSource = connectable(resultOrStream, {
         connector: () => new Subject(),
         resetOnDisconnect: false,
@@ -123,26 +122,13 @@ export abstract class Server {
     }
   }
 
-  public transformToObservable<T>(
-    resultOrDeferred: Observable<T> | Promise<T>,
-  ): Observable<T>;
-  public transformToObservable<T>(
-    resultOrDeferred: T,
-  ): never extends Observable<ObservedValueOf<T>>
-    ? Observable<T>
-    : Observable<ObservedValueOf<T>>;
-  public transformToObservable(resultOrDeferred: any) {
+  public transformToObservable<T = any>(resultOrDeferred: any): Observable<T> {
     if (resultOrDeferred instanceof Promise) {
-      return fromPromise(resultOrDeferred).pipe(
-        mergeMap(val => (isObservable(val) ? val : of(val))),
-      );
-    }
-
-    if (isObservable(resultOrDeferred)) {
-      return resultOrDeferred;
+      return fromPromise(resultOrDeferred);
+    } else if (!this.isObservable(resultOrDeferred)) {
+      return of(resultOrDeferred);
     }
-
-    return of(resultOrDeferred);
+    return resultOrDeferred;
   }
 
   public getOptionsProp<
@@ -194,6 +180,10 @@ export abstract class Server {
       new IncomingRequestDeserializer();
   }
 
+  private isObservable(input: unknown): input is Observable<any> {
+    return input && isFunction((input as Observable<any>).subscribe);
+  }
+
   /**
    * Transforms the server Pattern to valid type and returns a route for him.
    *
diff --git a/packages/microservices/tsconfig.build.json b/packages/microservices/tsconfig.build.json
deleted file mode 100644
index e8b71a07a..000000000
--- a/packages/microservices/tsconfig.build.json
+++ /dev/null
@@ -1,27 +0,0 @@
-{
-  "extends": "../tsconfig.build.json",
-  "compilerOptions": {
-    "outDir": ".",
-    "rootDir": ".",
-    "paths": {
-      "@nestjs/common": ["../common"],
-      "@nestjs/common/*": ["../common/*"],
-      "@nestjs/core": ["../core"],
-      "@nestjs/core/*": ["../core/*"],
-      "@nestjs/websockets": ["../websockets"],
-      "@nestjs/websockets/*": ["../websockets/*"]
-    }
-  },
-  "exclude": ["node_modules", "dist", "test/**/*", "*.spec.ts"],
-  "references": [
-    {
-      "path": "../common/tsconfig.build.json"
-    },
-    {
-      "path": "../core/tsconfig.build.json"
-    },
-    {
-      "path": "../websockets/tsconfig.build.json"
-    }
-  ]
-}
diff --git a/packages/microservices/tsconfig.json b/packages/microservices/tsconfig.json
index 2ae9e3c90..b238080a4 100644
--- a/packages/microservices/tsconfig.json
+++ b/packages/microservices/tsconfig.json
@@ -1,13 +1,7 @@
 {
-  "extends": "../tsconfig.build.json",
+  "extends": "./../tsconfig.base.json",
   "compilerOptions": {
-    "types": ["node"]
+    "baseUrl": "./"
   },
-  "files": [],
-  "include": [],
-  "references": [
-    {
-      "path": "./tsconfig.build.json"
-    }
-  ]
+  "include": ["*.ts", "**/*.ts"]
 }
diff --git a/packages/microservices/utils/transform-pattern.utils.ts b/packages/microservices/utils/transform-pattern.utils.ts
index 4bcb299ed..0074ef409 100644
--- a/packages/microservices/utils/transform-pattern.utils.ts
+++ b/packages/microservices/utils/transform-pattern.utils.ts
@@ -1,8 +1,4 @@
-import {
-  isObject,
-  isString,
-  isNumber,
-} from '@nestjs/common/utils/shared.utils';
+import { isObject, isString } from '@nestjs/common/utils/shared.utils';
 import { MsPattern } from '../interfaces';
 
 /**
@@ -18,7 +14,7 @@ import { MsPattern } from '../interfaces';
  * @returns string
  */
 export function transformPatternToRoute(pattern: MsPattern): string {
-  if (isString(pattern) || isNumber(pattern)) {
+  if (isString(pattern) || typeof pattern === 'number') {
     return `${pattern}`;
   }
   if (!isObject(pattern)) {
diff --git a/packages/platform-express/CHANGELOG.md b/packages/platform-express/CHANGELOG.md
new file mode 100644
index 000000000..9fbcf7681
--- /dev/null
+++ b/packages/platform-express/CHANGELOG.md
@@ -0,0 +1,12 @@
+# Change Log
+
+All notable changes to this project will be documented in this file.
+See [Conventional Commits](https://conventionalcommits.org) for commit guidelines.
+
+<a name="8.2.0"></a>
+# [8.2.0](https://github.com/nestjs/nest/compare/v8.1.2...v8.2.0) (2021-11-08)
+
+
+### Features
+
+* **common:** add the ability to set some extra metadata about returned files ([5100573](https://github.com/nestjs/nest/commit/5100573))
diff --git a/packages/platform-express/Readme.md b/packages/platform-express/Readme.md
index 16f48336d..f288809a9 100644
--- a/packages/platform-express/Readme.md
+++ b/packages/platform-express/Readme.md
@@ -11,6 +11,7 @@
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/l/@nestjs/core.svg" alt="Package License" /></a>
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/dm/@nestjs/common.svg" alt="NPM Downloads" /></a>
 <a href="https://circleci.com/gh/nestjs/nest" target="_blank"><img src="https://img.shields.io/circleci/build/github/nestjs/nest/master" alt="CircleCI" /></a>
+<a href="https://coveralls.io/github/nestjs/nest?branch=master" target="_blank"><img src="https://coveralls.io/repos/github/nestjs/nest/badge.svg?branch=master#9" alt="Coverage" /></a>
 <a href="https://discord.gg/G7Qnnhy" target="_blank"><img src="https://img.shields.io/badge/discord-online-brightgreen.svg" alt="Discord"/></a>
 <a href="https://opencollective.com/nest#backer" target="_blank"><img src="https://opencollective.com/nest/backers/badge.svg" alt="Backers on Open Collective" /></a>
 <a href="https://opencollective.com/nest#sponsor" target="_blank"><img src="https://opencollective.com/nest/sponsors/badge.svg" alt="Sponsors on Open Collective" /></a>
@@ -36,8 +37,8 @@ Nest is a framework for building efficient, scalable <a href="http://nodejs.org"
 
 * To check out the [guide](https://docs.nestjs.com), visit [docs.nestjs.com](https://docs.nestjs.com). :books:
 * 要查看中文 [指南](readme_zh.md), 请访问 [docs.nestjs.cn](https://docs.nestjs.cn). :books:
-* [가이드](readme_kr.md) 문서는 [docs.nestjs.com](https://docs.nestjs.com)에서 확인하실 수 있습니다. :books:
-* [ガイド](readme_jp.md)は [docs.nestjs.com](https://docs.nestjs.com)でご確認ください。 :books:
+* [가이드](readme_kr.md)를 확인하려면, [docs.nestjs.com](https://docs.nestjs.com)를 방문하세요.:books: 
+* チェックするには [ガイド](readme_jp.md), 詳しくは [docs.nestjs.com](https://docs.nestjs.com). :books: 
 
 ## Questions
 
@@ -53,49 +54,36 @@ With official support, you can get expert help straight from Nest core team. We
 
 ## Support
 
-Nest is an MIT-licensed open source project. It can grow thanks to the sponsors and support from the amazing backers. If you'd like to join them, please [read more here](https://docs.nestjs.com/support).
+Nest is an MIT-licensed open source project. It can grow thanks to the sponsors and support by the amazing backers. If you'd like to join them, please [read more here](https://docs.nestjs.com/support).
 
 #### Principal Sponsors
 <table style="text-align:center;"><tr>
   <td><a href="https://trilon.io" target="_blank"><img src="https://nestjs.com/img/trilon.svg" width="200" valign="middle" /></a></td>
-  <td><a href="https://www.redhat.com" target="_blank"><img src="https://nestjs.com/img/red-hat-logo.svg" width="200" valign="middle" /></a></td>
 <td>
 <a href="https://github.com/Sanofi-IADC" target="_blank"><img src="https://docs.nestjs.com/assets/sponsors/sanofi.png" width="180" valign="middle" /></a></td>
 <td>
 <a href="https://nx.dev" target="_blank"><img src="https://nestjs.com/img/nx-logo.png" height="45" valign="middle" /></a></td>
-    <td>
-<a href="https://valor-software.com/" target="_blank"><img src="https://docs.nestjs.com/assets/sponsors/valor-software.png" width="170" valign="middle" /></a></td><td>
-<a href="https://amplication.com/" target="_blank"><img src="https://nestjs.com/img/amplication-logo.svg" width="190" valign="middle" /></a></td>
 </tr></table>
 
 #### Gold Sponsors
 
 <table style="text-align:center;"><tr><td>
-<a href="https://weld.app/" target="_blank"><img src="https://nestjs.com/img/weld-logo.svg" width="140" valign="middle" /></a></td>
+  <a href="https://careers.labster.com/departments/platform" target="_blank"><img src="https://nestjs.com/img/labster-logo.png" width="170" valign="middle" /></a></td><td>
+<a href="https://weld.app/" target="_blank"><img src="https://nestjs.com/img/weld-logo.svg" width="150" valign="middle" /></a></td>
+  <td>
+<a href="https://valor-software.com/" target="_blank"><img src="https://docs.nestjs.com/assets/sponsors/valor-software.png" width="170" valign="middle" /></a></td>
 <td>
-<a href="https://intrinsic.ventures/" target="_blank"><img src="https://nestjs.com/img/intrinisic-logo.png" width="210" valign="middle" /></a></td>
- <td>
-<a href="https://jetbrains.com/" target="_blank"><img src="https://nestjs.com/img/jetbrains-logo.svg" width="110" valign="middle" /></a></td><td>
-<a href="https://snyk.co/nestjs" target="_blank"><img src="https://nestjs.com/img/snyk-logo-black.png" width="185" valign="middle" /></a></td><td>
-<a href="https://fuseautotech.com/" target="_blank"><img src="https://nestjs.com/img/fuse-logo.svg" width="105" valign="middle" /></a></td>
-<td>
-<a href="https://ridicorp.com/career/" target="_blank"><img src="https://nestjs.com/img/ridi-logo.svg" width="105" valign="middle" /></a></td><td>
-<a href="https://www.movavi.com/imovie-for-windows.html" target="_blank"><img src="https://nestjs.com/img/movavi-logo.svg" width="105" valign="middle" /></a></td></</tr></table>
+<a href="https://intrinsic.ventures/" target="_blank"><img src="https://nestjs.com/img/intrinisic-logo.png" width="210" valign="middle" /></a></td></</tr></table>
 
 #### Silver Sponsors
 
 <table style="text-align:center;"><tr><td>
 <a href="https://neoteric.eu/" target="_blank"><img src="https://nestjs.com/img/neoteric-cut.png" width="120" valign="middle" /></a> </td><td>
   <a href="http://gojob.com" target="_blank"><img src="http://nestjs.com/img/gojob-logo.png" valign="middle" width="100" /></a> </td><td>
-<a href="https://www.myleodsc.com/" target="_blank"><img src="https://nestjs.com/img/myleo-logo.png" width="180" valign="middle" /></td><td>
+<a href="http://www.leogistics.com" target="_blank"><img src="https://nestjs.com/img/leogistics-logo.jpeg" width="150" valign="middle" /></td><td>
 <a href="https://careers.meetdandy.com/?gh_src=063ba61e3us" target="_blank"><img src="https://nestjs.com/img/dandy-roles-logo.svg" width="150" valign="middle" /></td><td>
 <a href="https://www.castlecraft.in" target="_blank"><img src="https://nestjs.com/img/castlecraft-logo.png" width="150" valign="middle" /></td>
-<td><a href="https://www.tinystacks.com" target="_blank"><img src="https://nestjs.com/img/tinystacks-logo.png#1" width="140" valign="middle" /></td>
-<td><a href="https://n.inc" target="_blank"><img src="https://nestjs.com/img/n-inc-logo.svg" width="120" valign="middle" /></td></tr><tr>
-<td><a href="https://bilberrry.com/" target="_blank"><img src="https://nestjs.com/img/bilberrry-logo.svg" width="180" valign="middle" /></td>
-<td><a href="https://ipinfo.ai/" target="_blank"><img src="https://nestjs.com/img/ipinfo-logo.png" width="130" valign="middle" /></td>
-<td><a href="https://chax.at" target="_blank"><img src="https://nestjs.com/img/chaxat-logo.png" width="100" valign="middle" /></td></tr>
-</table>
+<td><a href="https://www.tinystacks.com" target="_blank"><img src="https://nestjs.com/img/tinystacks-logo.png#1" width="140" valign="middle" /></td></tr></table>
 
 #### Sponsors
 
@@ -103,7 +91,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
 <a href="https://www.swingdev.io" target="_blank"><img src="https://nestjs.com/img/swingdev-logo.svg#1" width="110" valign="middle" /> </a></td><td align="center" valign="middle">
 <a href="https://www.novologic.com/" target="_blank"><img src="https://nestjs.com/img/novologic.png" width="110" valign="middle" /></a> </td><td align="center" valign="middle">
 <a href="https://ever.co/" target="_blank"><img src="https://nestjs.com/img/ever-logo.png" width="72" valign="middle" /></a>  </td><td align="center" valign="middle">
-<a href="https://blokt.com" target="_blank"><img src="https://nestjs.com/img/blokt-logo.png" width="120" valign="middle" /></a>  </td><td align="center" valign="middle">
+<a href="https://blokt.com" target="_blank"><img src="https://nestjs.com/img/blokt-logo.png" width="120" valign="middle" /></a>  </td><td align="center" valign="middle"> 
   <a href="http://architectnow.net/" target="_blank"><img src="https://nestjs.com/img/architectnow.png" width="125" valign="middle" /></a> </td><td align="center" valign="middle">
   <a href="https://quander.io/" target="_blank"><img src="https://nestjs.com/img/quander.png" width="100" valign="middle" /></a> </td></tr><tr><td align="center" valign="middle">
   <a href="https://mantro.net/" target="_blank"><img src="https://nestjs.com/img/mantro-logo.svg" width="95" valign="middle" /></a> </td><td align="center" valign="middle">
@@ -129,14 +117,6 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
 <td align="center" valign="middle"><a href="https://www.naologic.com/" target="_blank"><img src="https://nestjs.com/img/naologic-logo.svg" width="125" valign="middle" /></a></td>
   <td align="center" valign="middle"><a href="https://messaged.com/" target="_blank"><img src="https://nestjs.com/img/messaged-logo.png" width="50" valign="middle" /></a></td>
   <td align="center" valign="middle"><a href="https://triplecore.io" target="_blank"><img src="https://nestjs.com/img/triplecore-logo.svg" width="50" valign="middle" /></a></td>
-   <td align="center" valign="middle"><a href="https://klqc.de" target="_blank"><img src="https://nestjs.com/img/klcqcl-logo.png" width="120" valign="middle" /></a></td>
-   <td align="center" valign="middle"><a href="https://thecasinowizard.com/bonuses/no-deposit-bonuses/" target="_blank"><img src="https://nestjs.com/img/casinowizard-logo.png" width="120" valign="middle" /></a></td></tr><tr>
-     <td align="center" valign="middle"><a href="https://polygon-software.ch/" target="_blank"><img src="https://nestjs.com/img/polygon-logo.svg" width="120" valign="middle" /></a></td>
-   <td align="center" valign="middle"><a href="https://mobilereality.pl/" target="_blank"><img src="https://nestjs.com/img/mobile-reality-logo.png" width="45" valign="middle" /></a></td>
-     <td align="center" valign="middle"><a href="https://boringowl.io/" target="_blank"><img src="https://nestjs.com/img/boringowl-logo.svg" width="120" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://www.mobilefactory.jp/" target="_blank"><img src="https://nestjs.com/img/mobilefactory-logo.png" width="100" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://nordbot.app/" target="_blank"><img src="https://nestjs.com/img/nordbot-logo.png" width="120" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://doppio.sh/" target="_blank"><img src="https://nestjs.com/img/dopiosh-logo.png" width="50" valign="middle" /></a></td>
   </tr></table>
 
 ## Backers
diff --git a/packages/platform-express/adapters/express-adapter.ts b/packages/platform-express/adapters/express-adapter.ts
index 7a0597778..bb2ae7337 100644
--- a/packages/platform-express/adapters/express-adapter.ts
+++ b/packages/platform-express/adapters/express-adapter.ts
@@ -1,15 +1,14 @@
-import type { Server } from 'http';
 import {
-  HttpStatus,
   InternalServerErrorException,
-  Logger,
   RequestMethod,
   StreamableFile,
-  VersioningOptions,
   VersioningType,
-  VERSION_NEUTRAL,
 } from '@nestjs/common';
-import { VersionValue } from '@nestjs/common/interfaces';
+import {
+  VersioningOptions,
+  VersionValue,
+  VERSION_NEUTRAL,
+} from '@nestjs/common/interfaces';
 import {
   CorsOptions,
   CorsOptionsDelegate,
@@ -20,43 +19,18 @@ import {
   isNil,
   isObject,
   isString,
-  isUndefined,
 } from '@nestjs/common/utils/shared.utils';
 import { AbstractHttpAdapter } from '@nestjs/core/adapters/http-adapter';
 import { RouterMethodFactory } from '@nestjs/core/helpers/router-method-factory';
-import {
-  json as bodyParserJson,
-  urlencoded as bodyParserUrlencoded,
-} from 'body-parser';
-import * as bodyparser from 'body-parser';
+import * as bodyParser from 'body-parser';
 import * as cors from 'cors';
 import * as express from 'express';
 import * as http from 'http';
 import * as https from 'https';
-import { Duplex, pipeline } from 'stream';
-import { NestExpressBodyParserOptions } from '../interfaces/nest-express-body-parser-options.interface';
-import { NestExpressBodyParserType } from '../interfaces/nest-express-body-parser.interface';
 import { ServeStaticOptions } from '../interfaces/serve-static-options.interface';
-import { getBodyParserOptions } from './utils/get-body-parser-options.util';
-
-type VersionedRoute = <
-  TRequest extends Record<string, any> = any,
-  TResponse = any,
->(
-  req: TRequest,
-  res: TResponse,
-  next: () => void,
-) => any;
-
-/**
- * @publicApi
- */
-export class ExpressAdapter extends AbstractHttpAdapter<
-  http.Server | https.Server
-> {
+
+export class ExpressAdapter extends AbstractHttpAdapter {
   private readonly routerMethodFactory = new RouterMethodFactory();
-  private readonly logger = new Logger(ExpressAdapter.name);
-  private readonly openConnections = new Set<Duplex>();
 
   constructor(instance?: any) {
     super(instance || express());
@@ -71,45 +45,13 @@ export class ExpressAdapter extends AbstractHttpAdapter<
     }
     if (body instanceof StreamableFile) {
       const streamHeaders = body.getHeaders();
-      if (
-        response.getHeader('Content-Type') === undefined &&
-        streamHeaders.type !== undefined
-      ) {
+      if (response.getHeader('Content-Type') === undefined) {
         response.setHeader('Content-Type', streamHeaders.type);
       }
-      if (
-        response.getHeader('Content-Disposition') === undefined &&
-        streamHeaders.disposition !== undefined
-      ) {
+      if (response.getHeader('Content-Disposition') === undefined) {
         response.setHeader('Content-Disposition', streamHeaders.disposition);
       }
-      if (
-        response.getHeader('Content-Length') === undefined &&
-        streamHeaders.length !== undefined
-      ) {
-        response.setHeader('Content-Length', streamHeaders.length);
-      }
-      return pipeline(
-        body.getStream().once('error', (err: Error) => {
-          body.errorHandler(err, response);
-        }),
-        response,
-        (err: Error) => {
-          if (err) {
-            this.logger.error(err.message, err.stack);
-          }
-        },
-      );
-    }
-    if (
-      response.getHeader('Content-Type') !== undefined &&
-      response.getHeader('Content-Type') !== 'application/json' &&
-      body?.statusCode >= HttpStatus.BAD_REQUEST
-    ) {
-      this.logger.warn(
-        "Content-Type doesn't match Reply body, you might need a custom ExceptionFilter for non-JSON responses",
-      );
-      response.setHeader('Content-Type', 'application/json');
+      return body.getStream().pipe(response);
     }
     return isObject(body) ? response.json(body) : response.send(String(body));
   }
@@ -118,10 +60,6 @@ export class ExpressAdapter extends AbstractHttpAdapter<
     return response.status(statusCode);
   }
 
-  public end(response: any, message?: string) {
-    return response.end(message);
-  }
-
   public render(response: any, view: string, options: any) {
     return response.render(view, options);
   }
@@ -138,27 +76,17 @@ export class ExpressAdapter extends AbstractHttpAdapter<
     return this.use(handler);
   }
 
-  public isHeadersSent(response: any): boolean {
-    return response.headersSent;
-  }
-
   public setHeader(response: any, name: string, value: string) {
     return response.set(name, value);
   }
 
-  public listen(port: string | number, callback?: () => void): Server;
-  public listen(
-    port: string | number,
-    hostname: string,
-    callback?: () => void,
-  ): Server;
-  public listen(port: any, ...args: any[]): Server {
+  public listen(port: string | number, callback?: () => void);
+  public listen(port: string | number, hostname: string, callback?: () => void);
+  public listen(port: any, ...args: any[]) {
     return this.httpServer.listen(port, ...args);
   }
 
   public close() {
-    this.closeOpenConnections();
-
     if (!this.httpServer) {
       return undefined;
     }
@@ -227,43 +155,21 @@ export class ExpressAdapter extends AbstractHttpAdapter<
         options.httpsOptions,
         this.getInstance(),
       );
-    } else {
-      this.httpServer = http.createServer(this.getInstance());
-    }
-
-    if (options?.forceCloseConnections) {
-      this.trackOpenConnections();
+      return;
     }
+    this.httpServer = http.createServer(this.getInstance());
   }
 
-  public registerParserMiddleware(prefix?: string, rawBody?: boolean) {
-    const bodyParserJsonOptions = getBodyParserOptions(rawBody);
-    const bodyParserUrlencodedOptions = getBodyParserOptions(rawBody, {
-      extended: true,
-    });
-
+  public registerParserMiddleware() {
     const parserMiddleware = {
-      jsonParser: bodyParserJson(bodyParserJsonOptions),
-      urlencodedParser: bodyParserUrlencoded(bodyParserUrlencodedOptions),
+      jsonParser: bodyParser.json(),
+      urlencodedParser: bodyParser.urlencoded({ extended: true }),
     };
     Object.keys(parserMiddleware)
       .filter(parser => !this.isMiddlewareApplied(parser))
       .forEach(parserKey => this.use(parserMiddleware[parserKey]));
   }
 
-  public useBodyParser<Options = NestExpressBodyParserOptions>(
-    type: NestExpressBodyParserType,
-    rawBody: boolean,
-    options?: Omit<Options, 'verify'>,
-  ): this {
-    const parserOptions = getBodyParserOptions<Options>(rawBody, options);
-    const parser = bodyparser[type](parserOptions);
-
-    this.use(parser);
-
-    return this;
-  }
-
   public setLocal(key: string, value: any) {
     this.instance.locals[key] = value;
     return this;
@@ -277,76 +183,21 @@ export class ExpressAdapter extends AbstractHttpAdapter<
     handler: Function,
     version: VersionValue,
     versioningOptions: VersioningOptions,
-  ): VersionedRoute {
-    const callNextHandler: VersionedRoute = (req, res, next) => {
-      if (!next) {
-        throw new InternalServerErrorException(
-          'HTTP adapter does not support filtering on version',
-        );
+  ) {
+    return <TRequest extends Record<string, any> = any, TResponse = any>(
+      req: TRequest,
+      res: TResponse,
+      next: () => void,
+    ) => {
+      if (version === VERSION_NEUTRAL) {
+        return handler(req, res, next);
       }
-      return next();
-    };
-
-    if (
-      version === VERSION_NEUTRAL ||
       // URL Versioning is done via the path, so the filter continues forward
-      versioningOptions.type === VersioningType.URI
-    ) {
-      const handlerForNoVersioning: VersionedRoute = (req, res, next) =>
-        handler(req, res, next);
-
-      return handlerForNoVersioning;
-    }
-
-    // Custom Extractor Versioning Handler
-    if (versioningOptions.type === VersioningType.CUSTOM) {
-      const handlerForCustomVersioning: VersionedRoute = (req, res, next) => {
-        const extractedVersion = versioningOptions.extractor(req);
-
-        if (Array.isArray(version)) {
-          if (
-            Array.isArray(extractedVersion) &&
-            version.filter(v => extractedVersion.includes(v as string)).length
-          ) {
-            return handler(req, res, next);
-          }
-
-          if (
-            isString(extractedVersion) &&
-            version.includes(extractedVersion)
-          ) {
-            return handler(req, res, next);
-          }
-        } else if (isString(version)) {
-          // Known bug here - if there are multiple versions supported across separate
-          // handlers/controllers, we can't select the highest matching handler.
-          // Since this code is evaluated per-handler, then we can't see if the highest
-          // specified version exists in a different handler.
-          if (
-            Array.isArray(extractedVersion) &&
-            extractedVersion.includes(version)
-          ) {
-            return handler(req, res, next);
-          }
-
-          if (isString(extractedVersion) && version === extractedVersion) {
-            return handler(req, res, next);
-          }
-        }
-
-        return callNextHandler(req, res, next);
-      };
-
-      return handlerForCustomVersioning;
-    }
-
-    // Media Type (Accept Header) Versioning Handler
-    if (versioningOptions.type === VersioningType.MEDIA_TYPE) {
-      const handlerForMediaTypeVersioning: VersionedRoute = (
-        req,
-        res,
-        next,
-      ) => {
+      if (versioningOptions.type === VersioningType.URI) {
+        return handler(req, res, next);
+      }
+      // Media Type (Accept Header) Versioning Handler
+      if (versioningOptions.type === VersioningType.MEDIA_TYPE) {
         const MEDIA_TYPE_HEADER = 'Accept';
         const acceptHeaderValue: string | undefined =
           req.headers?.[MEDIA_TYPE_HEADER] ||
@@ -354,16 +205,9 @@ export class ExpressAdapter extends AbstractHttpAdapter<
 
         const acceptHeaderVersionParameter = acceptHeaderValue
           ? acceptHeaderValue.split(';')[1]
-          : undefined;
+          : '';
 
-        // No version was supplied
-        if (isUndefined(acceptHeaderVersionParameter)) {
-          if (Array.isArray(version)) {
-            if (version.includes(VERSION_NEUTRAL)) {
-              return handler(req, res, next);
-            }
-          }
-        } else {
+        if (acceptHeaderVersionParameter) {
           const headerVersion = acceptHeaderVersionParameter.split(
             versioningOptions.key,
           )[1];
@@ -378,28 +222,14 @@ export class ExpressAdapter extends AbstractHttpAdapter<
             }
           }
         }
-
-        return callNextHandler(req, res, next);
-      };
-
-      return handlerForMediaTypeVersioning;
-    }
-
-    // Header Versioning Handler
-    if (versioningOptions.type === VersioningType.HEADER) {
-      const handlerForHeaderVersioning: VersionedRoute = (req, res, next) => {
+      }
+      // Header Versioning Handler
+      else if (versioningOptions.type === VersioningType.HEADER) {
         const customHeaderVersionParameter: string | undefined =
           req.headers?.[versioningOptions.header] ||
           req.headers?.[versioningOptions.header.toLowerCase()];
 
-        // No version was supplied
-        if (isUndefined(customHeaderVersionParameter)) {
-          if (Array.isArray(version)) {
-            if (version.includes(VERSION_NEUTRAL)) {
-              return handler(req, res, next);
-            }
-          }
-        } else {
+        if (customHeaderVersionParameter) {
           if (Array.isArray(version)) {
             if (version.includes(customHeaderVersionParameter)) {
               return handler(req, res, next);
@@ -410,27 +240,15 @@ export class ExpressAdapter extends AbstractHttpAdapter<
             }
           }
         }
+      }
 
-        return callNextHandler(req, res, next);
-      };
-
-      return handlerForHeaderVersioning;
-    }
-  }
-
-  private trackOpenConnections() {
-    this.httpServer.on('connection', (socket: Duplex) => {
-      this.openConnections.add(socket);
-
-      socket.on('close', () => this.openConnections.delete(socket));
-    });
-  }
-
-  private closeOpenConnections() {
-    for (const socket of this.openConnections) {
-      socket.destroy();
-      this.openConnections.delete(socket);
-    }
+      if (!next) {
+        throw new InternalServerErrorException(
+          'HTTP adapter does not support filtering on version',
+        );
+      }
+      return next();
+    };
   }
 
   private isMiddlewareApplied(name: string): boolean {
diff --git a/packages/platform-express/adapters/utils/get-body-parser-options.util.ts b/packages/platform-express/adapters/utils/get-body-parser-options.util.ts
deleted file mode 100644
index c89ed92ab..000000000
--- a/packages/platform-express/adapters/utils/get-body-parser-options.util.ts
+++ /dev/null
@@ -1,30 +0,0 @@
-import type { RawBodyRequest } from '@nestjs/common';
-import type { IncomingMessage, ServerResponse } from 'http';
-import type { NestExpressBodyParserOptions } from '../../interfaces';
-
-const rawBodyParser = (
-  req: RawBodyRequest<IncomingMessage>,
-  _res: ServerResponse,
-  buffer: Buffer,
-) => {
-  if (Buffer.isBuffer(buffer)) {
-    req.rawBody = buffer;
-  }
-  return true;
-};
-
-export function getBodyParserOptions<Options = NestExpressBodyParserOptions>(
-  rawBody: boolean,
-  options?: Omit<Options, 'verify'> | undefined,
-): Options {
-  let parserOptions: Options = (options || {}) as Options;
-
-  if (rawBody === true) {
-    parserOptions = {
-      ...parserOptions,
-      verify: rawBodyParser,
-    };
-  }
-
-  return parserOptions;
-}
diff --git a/packages/platform-express/index.ts b/packages/platform-express/index.ts
index ce3dbc432..df03ac629 100644
--- a/packages/platform-express/index.ts
+++ b/packages/platform-express/index.ts
@@ -1,6 +1,6 @@
 /*
  * Nest @platform-express
- * Copyright(c) 2017 - 2023 Kamil Mysliwiec
+ * Copyright(c) 2017 - 2021 Kamil Mysliwiec
  * https://nestjs.com
  * MIT Licensed
  */
diff --git a/packages/platform-express/interfaces/index.ts b/packages/platform-express/interfaces/index.ts
index ac057435a..3238b1c16 100644
--- a/packages/platform-express/interfaces/index.ts
+++ b/packages/platform-express/interfaces/index.ts
@@ -1,3 +1 @@
 export * from './nest-express-application.interface';
-export { NestExpressBodyParserOptions } from './nest-express-body-parser-options.interface';
-export * from './nest-express-body-parser.interface';
diff --git a/packages/platform-express/interfaces/nest-express-application.interface.ts b/packages/platform-express/interfaces/nest-express-application.interface.ts
index 62e31ebb8..0b93c1dbf 100644
--- a/packages/platform-express/interfaces/nest-express-application.interface.ts
+++ b/packages/platform-express/interfaces/nest-express-application.interface.ts
@@ -1,10 +1,4 @@
-import { INestApplication, HttpServer } from '@nestjs/common';
-import type { Server as CoreHttpServer } from 'http';
-import type { Server as CoreHttpsServer } from 'https';
-import type { Server } from 'net';
-import type { Express } from 'express';
-import { NestExpressBodyParserOptions } from './nest-express-body-parser-options.interface';
-import { NestExpressBodyParserType } from './nest-express-body-parser.interface';
+import { INestApplication } from '@nestjs/common';
 import { ServeStaticOptions } from './serve-static-options.interface';
 
 /**
@@ -14,31 +8,7 @@ import { ServeStaticOptions } from './serve-static-options.interface';
  *
  * @publicApi
  */
-export interface NestExpressApplication<
-  TServer extends CoreHttpServer | CoreHttpsServer = CoreHttpServer,
-> extends INestApplication<TServer> {
-  /**
-   * Returns the underlying HTTP adapter bounded to the Express.js app.
-   *
-   * @returns {HttpServer}
-   */
-  getHttpAdapter(): HttpServer<Express.Request, Express.Response, Express>;
-
-  /**
-   * Starts the application.
-   *
-   * @param {number|string} port
-   * @param {string} [hostname]
-   * @param {Function} [callback] Optional callback
-   * @returns {Promise} A Promise that, when resolved, is a reference to the underlying HttpServer.
-   */
-  listen(port: number | string, callback?: () => void): Promise<Server>;
-  listen(
-    port: number | string,
-    hostname: string,
-    callback?: () => void,
-  ): Promise<Server>;
-
+export interface NestExpressApplication extends INestApplication {
   /**
    * A wrapper function around native `express.set()` method.
    *
@@ -87,24 +57,6 @@ export interface NestExpressApplication<
    */
   useStaticAssets(path: string, options?: ServeStaticOptions): this;
 
-  /**
-   * Register Express body parsers on the fly. Will respect
-   * the application's `rawBody` option.
-   *
-   * @example
-   * const app = await NestFactory.create<NestExpressApplication>(
-   *   AppModule,
-   *   { rawBody: true }
-   * );
-   * app.useBodyParser('json', { limit: '50mb' });
-   *
-   * @returns {this}
-   */
-  useBodyParser<Options = NestExpressBodyParserOptions>(
-    parser: NestExpressBodyParserType,
-    options?: Omit<Options, 'verify'>,
-  ): this;
-
   /**
    * Sets one or multiple base directories for templates (views).
    *
diff --git a/packages/platform-express/interfaces/nest-express-body-parser-options.interface.ts b/packages/platform-express/interfaces/nest-express-body-parser-options.interface.ts
deleted file mode 100644
index 93df3c5f6..000000000
--- a/packages/platform-express/interfaces/nest-express-body-parser-options.interface.ts
+++ /dev/null
@@ -1,26 +0,0 @@
-import type { IncomingMessage } from 'http';
-
-/**
- * Type alias to keep compatibility with @types/body-parser
- * @see https://github.com/DefinitelyTyped/DefinitelyTyped/blob/dcd1673c4fa18a15ea8cd8ff8af7d563bb6dc8e6/types/body-parser/index.d.ts#L48-L66#L48-L66
- * @publicApi
- */
-export interface NestExpressBodyParserOptions {
-  /** When set to true, then deflated (compressed) bodies will be inflated; when false, deflated bodies are rejected. Defaults to true. */
-  inflate?: boolean | undefined;
-
-  /**
-   * Controls the maximum request body size. If this is a number,
-   * then the value specifies the number of bytes; if it is a string,
-   * the value is passed to the bytes library for parsing. Defaults to '100kb'.
-   */
-  limit?: number | string | undefined;
-
-  /**
-   * The type option is used to determine what media type the middleware will parse
-   */
-  type?: string | string[] | ((req: IncomingMessage) => any) | undefined;
-
-  // Catch-all for body-parser type specific options
-  [key: string]: unknown;
-}
diff --git a/packages/platform-express/interfaces/nest-express-body-parser.interface.ts b/packages/platform-express/interfaces/nest-express-body-parser.interface.ts
deleted file mode 100644
index 9cb003054..000000000
--- a/packages/platform-express/interfaces/nest-express-body-parser.interface.ts
+++ /dev/null
@@ -1,4 +0,0 @@
-/**
- * Interface defining possible body parser types, to be used with `NestExpressApplication.useBodyParser()`.
- */
-export type NestExpressBodyParserType = 'json' | 'urlencoded' | 'text' | 'raw';
diff --git a/packages/platform-express/multer/interfaces/files-upload-module.interface.ts b/packages/platform-express/multer/interfaces/files-upload-module.interface.ts
index 50ef58802..d467e476e 100644
--- a/packages/platform-express/multer/interfaces/files-upload-module.interface.ts
+++ b/packages/platform-express/multer/interfaces/files-upload-module.interface.ts
@@ -1,4 +1,5 @@
-import { ModuleMetadata, Type } from '@nestjs/common/interfaces';
+import { Type } from '@nestjs/common';
+import { ModuleMetadata } from '@nestjs/common/interfaces';
 import { MulterOptions } from './multer-options.interface';
 
 export type MulterModuleOptions = MulterOptions;
diff --git a/packages/platform-express/multer/multer/multer.constants.ts b/packages/platform-express/multer/multer/multer.constants.ts
index 5a6f6aaa4..e3c7b4557 100644
--- a/packages/platform-express/multer/multer/multer.constants.ts
+++ b/packages/platform-express/multer/multer/multer.constants.ts
@@ -1,5 +1,4 @@
 export const multerExceptions = {
-  // from https://github.com/expressjs/multer/blob/master/lib/multer-error.js
   LIMIT_PART_COUNT: 'Too many parts',
   LIMIT_FILE_SIZE: 'File too large',
   LIMIT_FILE_COUNT: 'Too many files',
@@ -7,13 +6,4 @@ export const multerExceptions = {
   LIMIT_FIELD_VALUE: 'Field value too long',
   LIMIT_FIELD_COUNT: 'Too many fields',
   LIMIT_UNEXPECTED_FILE: 'Unexpected field',
-  MISSING_FIELD_NAME: 'Field name missing',
-};
-
-export const busboyExceptions = {
-  // from https://github.com/mscdex/busboy/blob/master/lib/types/multipart.js
-  MULTIPART_BOUNDARY_NOT_FOUND: 'Multipart: Boundary not found',
-  MULTIPART_MALFORMED_PART_HEADER: 'Malformed part header',
-  MULTIPART_UNEXPECTED_END_OF_FORM: 'Unexpected end of form',
-  MULTIPART_UNEXPECTED_END_OF_FILE: 'Unexpected end of file',
 };
diff --git a/packages/platform-express/multer/multer/multer.utils.ts b/packages/platform-express/multer/multer/multer.utils.ts
index 9df215832..81e19739c 100644
--- a/packages/platform-express/multer/multer/multer.utils.ts
+++ b/packages/platform-express/multer/multer/multer.utils.ts
@@ -3,7 +3,7 @@ import {
   HttpException,
   PayloadTooLargeException,
 } from '@nestjs/common';
-import { multerExceptions, busboyExceptions } from './multer.constants';
+import { multerExceptions } from './multer.constants';
 
 export function transformException(error: Error | undefined) {
   if (!error || error instanceof HttpException) {
@@ -18,14 +18,7 @@ export function transformException(error: Error | undefined) {
     case multerExceptions.LIMIT_FIELD_COUNT:
     case multerExceptions.LIMIT_UNEXPECTED_FILE:
     case multerExceptions.LIMIT_PART_COUNT:
-    case multerExceptions.MISSING_FIELD_NAME:
       return new BadRequestException(error.message);
-    case busboyExceptions.MULTIPART_BOUNDARY_NOT_FOUND:
-      return new BadRequestException(error.message);
-    case busboyExceptions.MULTIPART_MALFORMED_PART_HEADER:
-    case busboyExceptions.MULTIPART_UNEXPECTED_END_OF_FORM:
-    case busboyExceptions.MULTIPART_UNEXPECTED_END_OF_FILE:
-      return new BadRequestException(`Multipart: ${error.message}`);
   }
   return error;
 }
diff --git a/packages/platform-express/package.json b/packages/platform-express/package.json
index e113761f2..d2843a9cf 100644
--- a/packages/platform-express/package.json
+++ b/packages/platform-express/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/platform-express",
-  "version": "9.4.0",
+  "version": "8.2.3",
   "description": "Nest - modern, fast, powerful node.js web framework (@platform-express)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -17,18 +17,18 @@
     "access": "public"
   },
   "dependencies": {
-    "body-parser": "1.20.2",
+    "body-parser": "1.19.0",
     "cors": "2.8.5",
-    "express": "4.18.2",
-    "multer": "1.4.4-lts.1",
-    "tslib": "2.5.0"
+    "express": "4.17.1",
+    "multer": "1.4.3",
+    "tslib": "2.3.1"
   },
   "devDependencies": {
-    "@nestjs/common": "9.4.0",
-    "@nestjs/core": "9.4.0"
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3"
   },
   "peerDependencies": {
-    "@nestjs/common": "^9.0.0",
-    "@nestjs/core": "^9.0.0"
+    "@nestjs/common": "^8.0.0",
+    "@nestjs/core": "^8.0.0"
   }
 }
diff --git a/packages/platform-express/tsconfig.build.json b/packages/platform-express/tsconfig.build.json
deleted file mode 100644
index 732ca00cb..000000000
--- a/packages/platform-express/tsconfig.build.json
+++ /dev/null
@@ -1,22 +0,0 @@
-{
-  "extends": "../tsconfig.build.json",
-  "compilerOptions": {
-    "outDir": ".",
-    "rootDir": ".",
-    "paths": {
-      "@nestjs/common": ["../common"],
-      "@nestjs/common/*": ["../common/*"],
-      "@nestjs/core": ["../core"],
-      "@nestjs/core/*": ["../core/*"]
-    }
-  },
-  "exclude": ["node_modules", "dist", "test/**/*", "*.spec.ts"],
-  "references": [
-    {
-      "path": "../common/tsconfig.build.json"
-    },
-    {
-      "path": "../core/tsconfig.build.json"
-    }
-  ]
-}
diff --git a/packages/platform-express/tsconfig.json b/packages/platform-express/tsconfig.json
index 2ae9e3c90..b238080a4 100644
--- a/packages/platform-express/tsconfig.json
+++ b/packages/platform-express/tsconfig.json
@@ -1,13 +1,7 @@
 {
-  "extends": "../tsconfig.build.json",
+  "extends": "./../tsconfig.base.json",
   "compilerOptions": {
-    "types": ["node"]
+    "baseUrl": "./"
   },
-  "files": [],
-  "include": [],
-  "references": [
-    {
-      "path": "./tsconfig.build.json"
-    }
-  ]
+  "include": ["*.ts", "**/*.ts"]
 }
diff --git a/packages/platform-fastify/CHANGELOG.md b/packages/platform-fastify/CHANGELOG.md
new file mode 100644
index 000000000..8c9c6cd94
--- /dev/null
+++ b/packages/platform-fastify/CHANGELOG.md
@@ -0,0 +1,18 @@
+# Change Log
+
+All notable changes to this project will be documented in this file.
+See [Conventional Commits](https://conventionalcommits.org) for commit guidelines.
+
+<a name="8.2.0"></a>
+# [8.2.0](https://github.com/nestjs/nest/compare/v8.1.2...v8.2.0) (2021-11-08)
+
+
+### Bug Fixes
+
+* **deps:** update dependency fastify to v3.23.1 ([63113d8](https://github.com/nestjs/nest/commit/63113d8))
+* **platform-fastify:** fix streamable file processing ([365c40b](https://github.com/nestjs/nest/commit/365c40b))
+
+
+### Features
+
+* **common:** add the ability to set some extra metadata about returned files ([5100573](https://github.com/nestjs/nest/commit/5100573))
diff --git a/packages/platform-fastify/Readme.md b/packages/platform-fastify/Readme.md
index 16f48336d..f288809a9 100644
--- a/packages/platform-fastify/Readme.md
+++ b/packages/platform-fastify/Readme.md
@@ -11,6 +11,7 @@
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/l/@nestjs/core.svg" alt="Package License" /></a>
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/dm/@nestjs/common.svg" alt="NPM Downloads" /></a>
 <a href="https://circleci.com/gh/nestjs/nest" target="_blank"><img src="https://img.shields.io/circleci/build/github/nestjs/nest/master" alt="CircleCI" /></a>
+<a href="https://coveralls.io/github/nestjs/nest?branch=master" target="_blank"><img src="https://coveralls.io/repos/github/nestjs/nest/badge.svg?branch=master#9" alt="Coverage" /></a>
 <a href="https://discord.gg/G7Qnnhy" target="_blank"><img src="https://img.shields.io/badge/discord-online-brightgreen.svg" alt="Discord"/></a>
 <a href="https://opencollective.com/nest#backer" target="_blank"><img src="https://opencollective.com/nest/backers/badge.svg" alt="Backers on Open Collective" /></a>
 <a href="https://opencollective.com/nest#sponsor" target="_blank"><img src="https://opencollective.com/nest/sponsors/badge.svg" alt="Sponsors on Open Collective" /></a>
@@ -36,8 +37,8 @@ Nest is a framework for building efficient, scalable <a href="http://nodejs.org"
 
 * To check out the [guide](https://docs.nestjs.com), visit [docs.nestjs.com](https://docs.nestjs.com). :books:
 * 要查看中文 [指南](readme_zh.md), 请访问 [docs.nestjs.cn](https://docs.nestjs.cn). :books:
-* [가이드](readme_kr.md) 문서는 [docs.nestjs.com](https://docs.nestjs.com)에서 확인하실 수 있습니다. :books:
-* [ガイド](readme_jp.md)は [docs.nestjs.com](https://docs.nestjs.com)でご確認ください。 :books:
+* [가이드](readme_kr.md)를 확인하려면, [docs.nestjs.com](https://docs.nestjs.com)를 방문하세요.:books: 
+* チェックするには [ガイド](readme_jp.md), 詳しくは [docs.nestjs.com](https://docs.nestjs.com). :books: 
 
 ## Questions
 
@@ -53,49 +54,36 @@ With official support, you can get expert help straight from Nest core team. We
 
 ## Support
 
-Nest is an MIT-licensed open source project. It can grow thanks to the sponsors and support from the amazing backers. If you'd like to join them, please [read more here](https://docs.nestjs.com/support).
+Nest is an MIT-licensed open source project. It can grow thanks to the sponsors and support by the amazing backers. If you'd like to join them, please [read more here](https://docs.nestjs.com/support).
 
 #### Principal Sponsors
 <table style="text-align:center;"><tr>
   <td><a href="https://trilon.io" target="_blank"><img src="https://nestjs.com/img/trilon.svg" width="200" valign="middle" /></a></td>
-  <td><a href="https://www.redhat.com" target="_blank"><img src="https://nestjs.com/img/red-hat-logo.svg" width="200" valign="middle" /></a></td>
 <td>
 <a href="https://github.com/Sanofi-IADC" target="_blank"><img src="https://docs.nestjs.com/assets/sponsors/sanofi.png" width="180" valign="middle" /></a></td>
 <td>
 <a href="https://nx.dev" target="_blank"><img src="https://nestjs.com/img/nx-logo.png" height="45" valign="middle" /></a></td>
-    <td>
-<a href="https://valor-software.com/" target="_blank"><img src="https://docs.nestjs.com/assets/sponsors/valor-software.png" width="170" valign="middle" /></a></td><td>
-<a href="https://amplication.com/" target="_blank"><img src="https://nestjs.com/img/amplication-logo.svg" width="190" valign="middle" /></a></td>
 </tr></table>
 
 #### Gold Sponsors
 
 <table style="text-align:center;"><tr><td>
-<a href="https://weld.app/" target="_blank"><img src="https://nestjs.com/img/weld-logo.svg" width="140" valign="middle" /></a></td>
+  <a href="https://careers.labster.com/departments/platform" target="_blank"><img src="https://nestjs.com/img/labster-logo.png" width="170" valign="middle" /></a></td><td>
+<a href="https://weld.app/" target="_blank"><img src="https://nestjs.com/img/weld-logo.svg" width="150" valign="middle" /></a></td>
+  <td>
+<a href="https://valor-software.com/" target="_blank"><img src="https://docs.nestjs.com/assets/sponsors/valor-software.png" width="170" valign="middle" /></a></td>
 <td>
-<a href="https://intrinsic.ventures/" target="_blank"><img src="https://nestjs.com/img/intrinisic-logo.png" width="210" valign="middle" /></a></td>
- <td>
-<a href="https://jetbrains.com/" target="_blank"><img src="https://nestjs.com/img/jetbrains-logo.svg" width="110" valign="middle" /></a></td><td>
-<a href="https://snyk.co/nestjs" target="_blank"><img src="https://nestjs.com/img/snyk-logo-black.png" width="185" valign="middle" /></a></td><td>
-<a href="https://fuseautotech.com/" target="_blank"><img src="https://nestjs.com/img/fuse-logo.svg" width="105" valign="middle" /></a></td>
-<td>
-<a href="https://ridicorp.com/career/" target="_blank"><img src="https://nestjs.com/img/ridi-logo.svg" width="105" valign="middle" /></a></td><td>
-<a href="https://www.movavi.com/imovie-for-windows.html" target="_blank"><img src="https://nestjs.com/img/movavi-logo.svg" width="105" valign="middle" /></a></td></</tr></table>
+<a href="https://intrinsic.ventures/" target="_blank"><img src="https://nestjs.com/img/intrinisic-logo.png" width="210" valign="middle" /></a></td></</tr></table>
 
 #### Silver Sponsors
 
 <table style="text-align:center;"><tr><td>
 <a href="https://neoteric.eu/" target="_blank"><img src="https://nestjs.com/img/neoteric-cut.png" width="120" valign="middle" /></a> </td><td>
   <a href="http://gojob.com" target="_blank"><img src="http://nestjs.com/img/gojob-logo.png" valign="middle" width="100" /></a> </td><td>
-<a href="https://www.myleodsc.com/" target="_blank"><img src="https://nestjs.com/img/myleo-logo.png" width="180" valign="middle" /></td><td>
+<a href="http://www.leogistics.com" target="_blank"><img src="https://nestjs.com/img/leogistics-logo.jpeg" width="150" valign="middle" /></td><td>
 <a href="https://careers.meetdandy.com/?gh_src=063ba61e3us" target="_blank"><img src="https://nestjs.com/img/dandy-roles-logo.svg" width="150" valign="middle" /></td><td>
 <a href="https://www.castlecraft.in" target="_blank"><img src="https://nestjs.com/img/castlecraft-logo.png" width="150" valign="middle" /></td>
-<td><a href="https://www.tinystacks.com" target="_blank"><img src="https://nestjs.com/img/tinystacks-logo.png#1" width="140" valign="middle" /></td>
-<td><a href="https://n.inc" target="_blank"><img src="https://nestjs.com/img/n-inc-logo.svg" width="120" valign="middle" /></td></tr><tr>
-<td><a href="https://bilberrry.com/" target="_blank"><img src="https://nestjs.com/img/bilberrry-logo.svg" width="180" valign="middle" /></td>
-<td><a href="https://ipinfo.ai/" target="_blank"><img src="https://nestjs.com/img/ipinfo-logo.png" width="130" valign="middle" /></td>
-<td><a href="https://chax.at" target="_blank"><img src="https://nestjs.com/img/chaxat-logo.png" width="100" valign="middle" /></td></tr>
-</table>
+<td><a href="https://www.tinystacks.com" target="_blank"><img src="https://nestjs.com/img/tinystacks-logo.png#1" width="140" valign="middle" /></td></tr></table>
 
 #### Sponsors
 
@@ -103,7 +91,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
 <a href="https://www.swingdev.io" target="_blank"><img src="https://nestjs.com/img/swingdev-logo.svg#1" width="110" valign="middle" /> </a></td><td align="center" valign="middle">
 <a href="https://www.novologic.com/" target="_blank"><img src="https://nestjs.com/img/novologic.png" width="110" valign="middle" /></a> </td><td align="center" valign="middle">
 <a href="https://ever.co/" target="_blank"><img src="https://nestjs.com/img/ever-logo.png" width="72" valign="middle" /></a>  </td><td align="center" valign="middle">
-<a href="https://blokt.com" target="_blank"><img src="https://nestjs.com/img/blokt-logo.png" width="120" valign="middle" /></a>  </td><td align="center" valign="middle">
+<a href="https://blokt.com" target="_blank"><img src="https://nestjs.com/img/blokt-logo.png" width="120" valign="middle" /></a>  </td><td align="center" valign="middle"> 
   <a href="http://architectnow.net/" target="_blank"><img src="https://nestjs.com/img/architectnow.png" width="125" valign="middle" /></a> </td><td align="center" valign="middle">
   <a href="https://quander.io/" target="_blank"><img src="https://nestjs.com/img/quander.png" width="100" valign="middle" /></a> </td></tr><tr><td align="center" valign="middle">
   <a href="https://mantro.net/" target="_blank"><img src="https://nestjs.com/img/mantro-logo.svg" width="95" valign="middle" /></a> </td><td align="center" valign="middle">
@@ -129,14 +117,6 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
 <td align="center" valign="middle"><a href="https://www.naologic.com/" target="_blank"><img src="https://nestjs.com/img/naologic-logo.svg" width="125" valign="middle" /></a></td>
   <td align="center" valign="middle"><a href="https://messaged.com/" target="_blank"><img src="https://nestjs.com/img/messaged-logo.png" width="50" valign="middle" /></a></td>
   <td align="center" valign="middle"><a href="https://triplecore.io" target="_blank"><img src="https://nestjs.com/img/triplecore-logo.svg" width="50" valign="middle" /></a></td>
-   <td align="center" valign="middle"><a href="https://klqc.de" target="_blank"><img src="https://nestjs.com/img/klcqcl-logo.png" width="120" valign="middle" /></a></td>
-   <td align="center" valign="middle"><a href="https://thecasinowizard.com/bonuses/no-deposit-bonuses/" target="_blank"><img src="https://nestjs.com/img/casinowizard-logo.png" width="120" valign="middle" /></a></td></tr><tr>
-     <td align="center" valign="middle"><a href="https://polygon-software.ch/" target="_blank"><img src="https://nestjs.com/img/polygon-logo.svg" width="120" valign="middle" /></a></td>
-   <td align="center" valign="middle"><a href="https://mobilereality.pl/" target="_blank"><img src="https://nestjs.com/img/mobile-reality-logo.png" width="45" valign="middle" /></a></td>
-     <td align="center" valign="middle"><a href="https://boringowl.io/" target="_blank"><img src="https://nestjs.com/img/boringowl-logo.svg" width="120" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://www.mobilefactory.jp/" target="_blank"><img src="https://nestjs.com/img/mobilefactory-logo.png" width="100" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://nordbot.app/" target="_blank"><img src="https://nestjs.com/img/nordbot-logo.png" width="120" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://doppio.sh/" target="_blank"><img src="https://nestjs.com/img/dopiosh-logo.png" width="50" valign="middle" /></a></td>
   </tr></table>
 
 ## Backers
diff --git a/packages/platform-fastify/adapters/fastify-adapter.ts b/packages/platform-fastify/adapters/fastify-adapter.ts
index 06aa48d7e..77ac6ae16 100644
--- a/packages/platform-fastify/adapters/fastify-adapter.ts
+++ b/packages/platform-fastify/adapters/fastify-adapter.ts
@@ -1,30 +1,24 @@
 import {
   HttpStatus,
   Logger,
-  RawBodyRequest,
   RequestMethod,
   StreamableFile,
   VersioningOptions,
   VersioningType,
-  VERSION_NEUTRAL,
 } from '@nestjs/common';
-import { VersionValue } from '@nestjs/common/interfaces';
+import { VersionValue, VERSION_NEUTRAL } from '@nestjs/common/interfaces';
 import {
   CorsOptions,
   CorsOptionsDelegate,
 } from '@nestjs/common/interfaces/external/cors-options.interface';
 import { loadPackage } from '@nestjs/common/utils/load-package.util';
-import { isString, isUndefined } from '@nestjs/common/utils/shared.utils';
 import { AbstractHttpAdapter } from '@nestjs/core/adapters/http-adapter';
 import {
   fastify,
-  FastifyBaseLogger,
-  FastifyBodyParser,
   FastifyInstance,
-  FastifyListenOptions,
+  FastifyLoggerInstance,
   FastifyPluginAsync,
   FastifyPluginCallback,
-  FastifyRegister,
   FastifyReply,
   FastifyRequest,
   FastifyServerOptions,
@@ -35,7 +29,6 @@ import {
   RequestGenericInterface,
 } from 'fastify';
 import * as Reply from 'fastify/lib/reply';
-import { kRouteContext } from 'fastify/lib/symbols';
 import { RouteShorthandMethod } from 'fastify/types/route';
 import * as http2 from 'http2';
 import * as https from 'https';
@@ -44,17 +37,14 @@ import {
   InjectOptions,
   Response as LightMyRequestResponse,
 } from 'light-my-request';
-// `querystring` is used internally in fastify for registering urlencoded body parser.
-import { parse as querystringParse } from 'querystring';
-import { NestFastifyBodyParserOptions } from '../interfaces';
 import {
   FastifyStaticOptions,
-  FastifyViewOptions,
+  PointOfViewOptions,
 } from '../interfaces/external';
 
 type FastifyHttp2SecureOptions<
   Server extends http2.Http2SecureServer,
-  Logger extends FastifyBaseLogger = FastifyBaseLogger,
+  Logger extends FastifyLoggerInstance = FastifyLoggerInstance,
 > = FastifyServerOptions<Server, Logger> & {
   http2: true;
   https: http2.SecureServerOptions;
@@ -62,7 +52,7 @@ type FastifyHttp2SecureOptions<
 
 type FastifyHttp2Options<
   Server extends http2.Http2Server,
-  Logger extends FastifyBaseLogger = FastifyBaseLogger,
+  Logger extends FastifyLoggerInstance = FastifyLoggerInstance,
 > = FastifyServerOptions<Server, Logger> & {
   http2: true;
   http2SessionTimeout?: number;
@@ -70,16 +60,12 @@ type FastifyHttp2Options<
 
 type FastifyHttpsOptions<
   Server extends https.Server,
-  Logger extends FastifyBaseLogger = FastifyBaseLogger,
+  Logger extends FastifyLoggerInstance = FastifyLoggerInstance,
 > = FastifyServerOptions<Server, Logger> & {
   https: https.ServerOptions;
 };
 
-type VersionedRoute<TRequest, TResponse> = ((
-  req: TRequest,
-  res: TResponse,
-  next: Function,
-) => Function) & {
+type VersionedRoute = Function & {
   version: VersionValue;
   versioningOptions: VersioningOptions;
 };
@@ -93,9 +79,6 @@ type VersionedRoute<TRequest, TResponse> = ((
 type FastifyRawRequest<TServer extends RawServerBase> =
   RawRequestDefaultExpression<TServer> & { originalUrl?: string };
 
-/**
- * @publicApi
- */
 export class FastifyAdapter<
   TServer extends RawServerBase = RawServerDefault,
   TRawRequest extends FastifyRawRequest<TServer> = FastifyRawRequest<TServer>,
@@ -124,34 +107,30 @@ export class FastifyAdapter<
   private readonly versionConstraint = {
     name: 'version',
     validate(value: unknown) {
-      if (!isString(value) && !Array.isArray(value)) {
+      if (typeof value !== 'string' && !Array.isArray(value)) {
         throw new Error(
           'Version constraint should be a string or an array of strings.',
         );
       }
     },
     storage() {
-      const versions = new Map<string, unknown>();
+      const versions = new Map();
       return {
         get(version: string | Array<string>) {
-          if (Array.isArray(version)) {
-            return versions.get(version.find(v => versions.has(v))) || null;
-          }
           return versions.get(version) || null;
         },
-        set(versionOrVersions: string | Array<string>, store: unknown) {
-          const storeVersionConstraint = (version: string) =>
+        set(
+          versionOrVersions: string | Array<string>,
+          store: Map<string, any>,
+        ) {
+          const storeVersionConstraint = version =>
             versions.set(version, store);
           if (Array.isArray(versionOrVersions))
             versionOrVersions.forEach(storeVersionConstraint);
           else storeVersionConstraint(versionOrVersions);
         },
         del(version: string | Array<string>) {
-          if (Array.isArray(version)) {
-            version.forEach(v => versions.delete(v));
-          } else {
-            versions.delete(version);
-          }
+          versions.delete(version);
         },
         empty() {
           versions.clear();
@@ -170,9 +149,12 @@ export class FastifyAdapter<
           ? acceptHeaderValue.split(';')[1]
           : '';
 
-        return isUndefined(acceptHeaderVersionParameter)
-          ? VERSION_NEUTRAL // No version was supplied
-          : acceptHeaderVersionParameter.split(this.versioningOptions.key)[1];
+        if (acceptHeaderVersionParameter) {
+          const headerVersion = acceptHeaderVersionParameter.split(
+            this.versioningOptions.key,
+          )[1];
+          return headerVersion;
+        }
       }
       // Header Versioning Handler
       else if (this.versioningOptions.type === VersioningType.HEADER) {
@@ -180,13 +162,9 @@ export class FastifyAdapter<
           req.headers?.[this.versioningOptions.header] ||
           req.headers?.[this.versioningOptions.header.toLowerCase()];
 
-        return isUndefined(customHeaderVersionParameter)
-          ? VERSION_NEUTRAL // No version was supplied
-          : customHeaderVersionParameter;
-      }
-      // Custom Versioning Handler
-      else if (this.versioningOptions.type === VersioningType.CUSTOM) {
-        return this.versioningOptions.extractor(req);
+        if (customHeaderVersionParameter) {
+          return customHeaderVersionParameter;
+        }
       }
       return undefined;
     },
@@ -232,31 +210,8 @@ export class FastifyAdapter<
     hostname: string,
     callback?: () => void,
   ): void;
-  public listen(
-    listenOptions: string | number | FastifyListenOptions,
-    ...args: any[]
-  ): void {
-    const isFirstArgTypeofFunction = typeof args[0] === 'function';
-    const callback = isFirstArgTypeofFunction ? args[0] : args[1];
-
-    let options: Record<string, any>;
-    if (
-      typeof listenOptions === 'object' &&
-      (listenOptions.host !== undefined ||
-        listenOptions.port !== undefined ||
-        listenOptions.path !== undefined)
-    ) {
-      // First parameter is an object with a path, port and/or host attributes
-      options = listenOptions;
-    } else {
-      options = {
-        port: +listenOptions,
-      };
-    }
-    if (!isFirstArgTypeofFunction) {
-      options.host = args[0];
-    }
-    return this.instance.listen(options, callback);
+  public listen(port: string | number, ...args: any[]): Promise<string> {
+    return this.instance.listen(port, ...args);
   }
 
   public get(...args: any[]) {
@@ -291,11 +246,11 @@ export class FastifyAdapter<
     handler: Function,
     version: VersionValue,
     versioningOptions: VersioningOptions,
-  ): VersionedRoute<TRequest, TReply> {
+  ) {
     if (!this.versioningOptions) {
       this.versioningOptions = versioningOptions;
     }
-    const versionedRoute = handler as VersionedRoute<TRequest, TReply>;
+    const versionedRoute = handler as VersionedRoute;
     versionedRoute.version = version;
     return versionedRoute;
   }
@@ -309,7 +264,7 @@ export class FastifyAdapter<
       ? new Reply(
           response,
           {
-            [kRouteContext]: {
+            context: {
               preSerialization: null,
               preValidation: [],
               preHandler: [],
@@ -326,37 +281,14 @@ export class FastifyAdapter<
     }
     if (body instanceof StreamableFile) {
       const streamHeaders = body.getHeaders();
-      if (
-        fastifyReply.getHeader('Content-Type') === undefined &&
-        streamHeaders.type !== undefined
-      ) {
+      if (fastifyReply.getHeader('Content-Type') === undefined) {
         fastifyReply.header('Content-Type', streamHeaders.type);
       }
-      if (
-        fastifyReply.getHeader('Content-Disposition') === undefined &&
-        streamHeaders.disposition !== undefined
-      ) {
+      if (fastifyReply.getHeader('Content-Disposition') === undefined) {
         fastifyReply.header('Content-Disposition', streamHeaders.disposition);
       }
-      if (
-        fastifyReply.getHeader('Content-Length') === undefined &&
-        streamHeaders.length !== undefined
-      ) {
-        fastifyReply.header('Content-Length', streamHeaders.length);
-      }
       body = body.getStream();
     }
-    if (
-      fastifyReply.getHeader('Content-Type') !== undefined &&
-      fastifyReply.getHeader('Content-Type') !== 'application/json' &&
-      body?.statusCode >= HttpStatus.BAD_REQUEST
-    ) {
-      Logger.warn(
-        "Content-Type doesn't match Reply body, you might need a custom ExceptionFilter for non-JSON responses",
-        FastifyAdapter.name,
-      );
-      fastifyReply.header('Content-Type', 'application/json');
-    }
     return fastifyReply.send(body);
   }
 
@@ -368,10 +300,6 @@ export class FastifyAdapter<
     return (response as TReply).code(statusCode);
   }
 
-  public end(response: TReply, message?: string) {
-    response.raw.end(message);
-  }
-
   public render(
     response: TReply & { view: Function },
     view: string,
@@ -401,7 +329,7 @@ export class FastifyAdapter<
     return this.instance as unknown as T;
   }
 
-  public register<TRegister extends Parameters<FastifyRegister<TInstance>>>(
+  public register<TRegister extends Parameters<TInstance['register']>>(
     plugin: TRegister['0'],
     opts?: TRegister['1'],
   ) {
@@ -434,32 +362,28 @@ export class FastifyAdapter<
 
   public useStaticAssets(options: FastifyStaticOptions) {
     return this.register(
-      loadPackage('@fastify/static', 'FastifyAdapter.useStaticAssets()', () =>
-        require('@fastify/static'),
+      loadPackage('fastify-static', 'FastifyAdapter.useStaticAssets()', () =>
+        require('fastify-static'),
       ),
       options,
     );
   }
 
-  public setViewEngine(options: FastifyViewOptions | string) {
-    if (isString(options)) {
+  public setViewEngine(options: PointOfViewOptions | string) {
+    if (typeof options === 'string') {
       new Logger('FastifyAdapter').error(
         "setViewEngine() doesn't support a string argument.",
       );
       process.exit(1);
     }
     return this.register(
-      loadPackage('@fastify/view', 'FastifyAdapter.setViewEngine()', () =>
-        require('@fastify/view'),
+      loadPackage('point-of-view', 'FastifyAdapter.setViewEngine()', () =>
+        require('point-of-view'),
       ),
       options,
     );
   }
 
-  public isHeadersSent(response: TReply): boolean {
-    return response.sent;
-  }
-
   public setHeader(response: TReply, name: string, value: string) {
     return response.header(name, value);
   }
@@ -479,57 +403,14 @@ export class FastifyAdapter<
   }
 
   public enableCors(options: CorsOptions | CorsOptionsDelegate<TRequest>) {
-    this.register(
-      import('@fastify/cors') as Parameters<TInstance['register']>[0],
-      options,
-    );
+    this.register(import('fastify-cors'), options);
   }
 
-  public registerParserMiddleware(prefix?: string, rawBody?: boolean) {
+  public registerParserMiddleware() {
     if (this._isParserRegistered) {
       return;
     }
-
-    this.registerUrlencodedContentParser(rawBody);
-    this.registerJsonContentParser(rawBody);
-
-    this._isParserRegistered = true;
-  }
-
-  public useBodyParser(
-    type: string | string[] | RegExp,
-    rawBody: boolean,
-    options?: NestFastifyBodyParserOptions,
-    parser?: FastifyBodyParser<Buffer, TServer>,
-  ) {
-    const parserOptions = {
-      ...(options || {}),
-      parseAs: 'buffer' as const,
-    };
-
-    this.getInstance().addContentTypeParser<Buffer>(
-      type,
-      parserOptions,
-      (
-        req: RawBodyRequest<FastifyRequest<unknown, TServer, TRawRequest>>,
-        body: Buffer,
-        done,
-      ) => {
-        if (rawBody === true && Buffer.isBuffer(body)) {
-          req.rawBody = body;
-        }
-
-        if (parser) {
-          parser(req, body, done);
-          return;
-        }
-
-        done(null, body);
-      },
-    );
-
-    // To avoid the Nest application init to override our custom
-    // body parser, we mark the parsers as registered.
+    this.register(import('fastify-formbody'));
     this._isParserRegistered = true;
   }
 
@@ -540,14 +421,11 @@ export class FastifyAdapter<
       await this.registerMiddie();
     }
     return (path: string, callback: Function) => {
-      let normalizedPath = path.endsWith('/*')
+      const normalizedPath = path.endsWith('/*')
         ? `${path.slice(0, -1)}(.*)`
         : path;
 
-      // Fallback to "(.*)" to support plugins like GraphQL
-      normalizedPath = normalizedPath === '/(.*)' ? '(.*)' : normalizedPath;
-
-      // The following type assertion is valid as we use import('@fastify/middie') rather than require('@fastify/middie')
+      // The following type assertion is valid as we use import('middie') rather than require('middie')
       // ref https://github.com/fastify/middie/pull/55
       this.instance.use(
         normalizedPath,
@@ -577,47 +455,9 @@ export class FastifyAdapter<
     return !('status' in response);
   }
 
-  private registerJsonContentParser(rawBody?: boolean) {
-    const contentType = 'application/json';
-    const withRawBody = !!rawBody;
-    const { bodyLimit } = this.getInstance().initialConfig;
-
-    this.useBodyParser(
-      contentType,
-      withRawBody,
-      { bodyLimit },
-      (req, body, done) => {
-        const { onProtoPoisoning, onConstructorPoisoning } =
-          this.instance.initialConfig;
-        const defaultJsonParser = this.instance.getDefaultJsonParser(
-          onProtoPoisoning || 'error',
-          onConstructorPoisoning || 'error',
-        ) as FastifyBodyParser<string | Buffer, TServer>;
-        defaultJsonParser(req, body, done);
-      },
-    );
-  }
-
-  private registerUrlencodedContentParser(rawBody?: boolean) {
-    const contentType = 'application/x-www-form-urlencoded';
-    const withRawBody = !!rawBody;
-    const { bodyLimit } = this.getInstance().initialConfig;
-
-    this.useBodyParser(
-      contentType,
-      withRawBody,
-      { bodyLimit },
-      (_req, body, done) => {
-        done(null, querystringParse(body.toString()));
-      },
-    );
-  }
-
   private async registerMiddie() {
     this.isMiddieRegistered = true;
-    await this.register(
-      import('@fastify/middie') as Parameters<TInstance['register']>[0],
-    );
+    await this.register(import('middie'));
   }
 
   private getRequestOriginalUrl(rawRequest: TRawRequest) {
@@ -637,7 +477,7 @@ export class FastifyAdapter<
   ) {
     const handlerRef = args[args.length - 1];
     const isVersioned =
-      !isUndefined(handlerRef.version) &&
+      typeof handlerRef.version !== 'undefined' &&
       handlerRef.version !== VERSION_NEUTRAL;
 
     if (isVersioned) {
diff --git a/packages/platform-fastify/index.ts b/packages/platform-fastify/index.ts
index 6d28e2ccd..6ee0f8cf9 100644
--- a/packages/platform-fastify/index.ts
+++ b/packages/platform-fastify/index.ts
@@ -1,6 +1,6 @@
 /*
- * Nest @platform-fastify
- * Copyright(c) 2017 - 2023 Kamil Mysliwiec
+ * Nest @platform-express
+ * Copyright(c) 2017 - 2021 Kamil Mysliwiec
  * https://nestjs.com
  * MIT Licensed
  */
diff --git a/packages/platform-fastify/interfaces/external/fastify-static-options.interface.ts b/packages/platform-fastify/interfaces/external/fastify-static-options.interface.ts
index 8bd294c0f..9f591764a 100644
--- a/packages/platform-fastify/interfaces/external/fastify-static-options.interface.ts
+++ b/packages/platform-fastify/interfaces/external/fastify-static-options.interface.ts
@@ -1,30 +1,16 @@
 /**
  * "fastify-static" interfaces
- * @see https://github.com/fastify/fastify-static/blob/master/types/index.d.ts
- * @publicApi
+ * @see https://github.com/fastify/fastify-static/blob/master/index.d.ts
  */
-import { Stats } from 'fs';
-
-interface ExtendedInformation {
-  fileCount: number;
-  totalFileCount: number;
-  folderCount: number;
-  totalFolderCount: number;
-  totalSize: number;
-  lastModified: number;
-}
 
 interface ListDir {
   href: string;
   name: string;
-  stats: Stats;
-  extendedInfo?: ExtendedInformation;
 }
 
 interface ListFile {
   href: string;
   name: string;
-  stats: Stats;
 }
 
 interface ListRender {
@@ -35,8 +21,6 @@ interface ListOptions {
   format: 'json' | 'html';
   names: string[];
   render: ListRender;
-  extendedFolderInfo?: boolean;
-  jsonFormat?: 'names' | 'extended';
 }
 
 // Passed on to `send`
@@ -50,7 +34,6 @@ interface SendOptions {
   index?: string[] | false;
   lastModified?: boolean;
   maxAge?: string | number;
-  serveDotFiles?: boolean;
 }
 
 export interface FastifyStaticOptions extends SendOptions {
@@ -65,11 +48,6 @@ export interface FastifyStaticOptions extends SendOptions {
   wildcard?: boolean;
   list?: boolean | ListOptions;
   allowedPath?: (pathName: string, root?: string) => boolean;
-  /**
-   * @description
-   * Opt-in to looking for pre-compressed files
-   */
-  preCompressed?: boolean;
 
   // Passed on to `send`
   acceptRanges?: boolean;
diff --git a/packages/platform-fastify/interfaces/external/index.ts b/packages/platform-fastify/interfaces/external/index.ts
index a80eb8a36..df4df129f 100644
--- a/packages/platform-fastify/interfaces/external/index.ts
+++ b/packages/platform-fastify/interfaces/external/index.ts
@@ -1,2 +1,2 @@
 export * from './fastify-static-options.interface';
-export * from './fastify-view-options.interface';
+export * from './point-of-view-options.interface';
diff --git a/packages/platform-fastify/interfaces/external/point-of-view-options.interface.ts b/packages/platform-fastify/interfaces/external/point-of-view-options.interface.ts
new file mode 100644
index 000000000..4d5f918c6
--- /dev/null
+++ b/packages/platform-fastify/interfaces/external/point-of-view-options.interface.ts
@@ -0,0 +1,30 @@
+/**
+ * @see https://github.com/fastify/point-of-view/blob/master/index.d.ts
+ */
+
+export interface PointOfViewOptions {
+  engine: {
+    ejs?: any;
+    eta?: any;
+    nunjucks?: any;
+    pug?: any;
+    handlebars?: any;
+    marko?: any;
+    mustache?: any;
+    'art-template'?: any;
+    twig?: any;
+    liquid?: any;
+    dot?: any;
+  };
+  templates?: string;
+  includeViewExtension?: boolean;
+  options?: object;
+  charset?: string;
+  maxCache?: number;
+  production?: boolean;
+  defaultContext?: object;
+  layout?: string;
+  root?: string;
+  viewExt?: string;
+  propertyName?: string;
+}
diff --git a/packages/platform-fastify/interfaces/index.ts b/packages/platform-fastify/interfaces/index.ts
index ae18b9a3c..ee1841f2f 100644
--- a/packages/platform-fastify/interfaces/index.ts
+++ b/packages/platform-fastify/interfaces/index.ts
@@ -1,2 +1 @@
 export * from './nest-fastify-application.interface';
-export * from './nest-fastify-body-parser-options.interface';
diff --git a/packages/platform-fastify/interfaces/nest-fastify-application.interface.ts b/packages/platform-fastify/interfaces/nest-fastify-application.interface.ts
index e77c715fd..f275385ba 100644
--- a/packages/platform-fastify/interfaces/nest-fastify-application.interface.ts
+++ b/packages/platform-fastify/interfaces/nest-fastify-application.interface.ts
@@ -1,40 +1,22 @@
-import { INestApplication, HttpServer } from '@nestjs/common';
+import { INestApplication } from '@nestjs/common';
 import {
-  FastifyBodyParser,
   FastifyInstance,
   FastifyPluginAsync,
   FastifyPluginCallback,
   FastifyPluginOptions,
   FastifyRegisterOptions,
-  FastifyRequest,
-  FastifyReply,
-  RawServerBase,
-  RawServerDefault,
 } from 'fastify';
 import {
   Chain as LightMyRequestChain,
   InjectOptions,
   Response as LightMyRequestResponse,
 } from 'light-my-request';
-import { FastifyStaticOptions, FastifyViewOptions } from './external';
-import { NestFastifyBodyParserOptions } from './nest-fastify-body-parser-options.interface';
-
-/**
- * @publicApi
- */
-export interface NestFastifyApplication<
-  TServer extends RawServerBase = RawServerDefault,
-> extends INestApplication<TServer> {
-  /**
-   * Returns the underlying HTTP adapter bounded to a Fastify app.
-   *
-   * @returns {HttpServer}
-   */
-  getHttpAdapter(): HttpServer<FastifyRequest, FastifyReply, FastifyInstance>;
+import { FastifyStaticOptions, PointOfViewOptions } from './external';
 
+export interface NestFastifyApplication extends INestApplication {
   /**
    * A wrapper function around native `fastify.register()` method.
-   * Example `app.register(require('@fastify/formbody'))
+   * Example `app.register(require('fastify-formbody'))
    * @returns {Promise<FastifyInstance>}
    */
   register<Options extends FastifyPluginOptions = any>(
@@ -46,27 +28,6 @@ export interface NestFastifyApplication<
     opts?: FastifyRegisterOptions<Options>,
   ): Promise<FastifyInstance>;
 
-  /**
-   * Register Fastify body parsers on the fly. Will respect
-   * the application's `rawBody` option.
-   *
-   * @example
-   * const app = await NestFactory.create<NestFastifyApplication>(
-   *   AppModule,
-   *   new FastifyAdapter(),
-   *   { rawBody: true }
-   * );
-   * // enable the json parser with a parser limit of 50mb
-   * app.useBodyParser('application/json', { bodyLimit: 50 * 1000 * 1024 });
-   *
-   * @returns {this}
-   */
-  useBodyParser<TServer extends RawServerBase = RawServerBase>(
-    type: string | string[] | RegExp,
-    options?: NestFastifyBodyParserOptions,
-    parser?: FastifyBodyParser<Buffer, TServer>,
-  ): this;
-
   /**
    * Sets a base directory for public assets.
    * Example `app.useStaticAssets({ root: 'public' })`
@@ -77,10 +38,10 @@ export interface NestFastifyApplication<
   /**
    * Sets a view engine for templates (views), for example: `pug`, `handlebars`, or `ejs`.
    *
-   * Don't pass in a string. The string type in the argument is for compatibility reason and will cause an exception.
+   * Don't pass in a string. The string type in the argument is for compatibilility reason and will cause an exception.
    * @returns {this}
    */
-  setViewEngine(options: FastifyViewOptions | string): this;
+  setViewEngine(options: PointOfViewOptions | string): this;
 
   /**
    * A wrapper function around native `fastify.inject()` method.
diff --git a/packages/platform-fastify/interfaces/nest-fastify-body-parser-options.interface.ts b/packages/platform-fastify/interfaces/nest-fastify-body-parser-options.interface.ts
deleted file mode 100644
index 9f7ecc054..000000000
--- a/packages/platform-fastify/interfaces/nest-fastify-body-parser-options.interface.ts
+++ /dev/null
@@ -1,6 +0,0 @@
-import type { AddContentTypeParser } from 'fastify';
-
-export type NestFastifyBodyParserOptions = Omit<
-  Parameters<AddContentTypeParser>[1],
-  'parseAs'
->;
diff --git a/packages/platform-fastify/package.json b/packages/platform-fastify/package.json
index 8a2b0a470..edb5e03b9 100644
--- a/packages/platform-fastify/package.json
+++ b/packages/platform-fastify/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/platform-fastify",
-  "version": "9.4.0",
+  "version": "8.2.3",
   "description": "Nest - modern, fast, powerful node.js web framework (@platform-fastify)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -17,26 +17,16 @@
     "access": "public"
   },
   "dependencies": {
-    "@fastify/cors": "8.2.1",
-    "@fastify/formbody": "7.4.0",
-    "@fastify/middie": "8.1.0",
-    "fastify": "4.15.0",
-    "light-my-request": "5.9.1",
+    "fastify": "3.24.1",
+    "fastify-cors": "6.0.2",
+    "fastify-formbody": "5.2.0",
+    "light-my-request": "4.7.0",
+    "middie": "5.3.0",
     "path-to-regexp": "3.2.0",
-    "tslib": "2.5.0"
+    "tslib": "2.3.1"
   },
   "peerDependencies": {
-    "@fastify/static": "^6.0.0",
-    "@fastify/view": "^7.0.0",
-    "@nestjs/common": "^9.0.0",
-    "@nestjs/core": "^9.0.0"
-  },
-  "peerDependenciesMeta": {
-    "@fastify/static": {
-      "optional": true
-    },
-    "@fastify/view": {
-      "optional": true
-    }
+    "@nestjs/common": "^8.0.0",
+    "@nestjs/core": "^8.0.0"
   }
 }
diff --git a/packages/platform-fastify/tsconfig.build.json b/packages/platform-fastify/tsconfig.build.json
deleted file mode 100644
index 732ca00cb..000000000
--- a/packages/platform-fastify/tsconfig.build.json
+++ /dev/null
@@ -1,22 +0,0 @@
-{
-  "extends": "../tsconfig.build.json",
-  "compilerOptions": {
-    "outDir": ".",
-    "rootDir": ".",
-    "paths": {
-      "@nestjs/common": ["../common"],
-      "@nestjs/common/*": ["../common/*"],
-      "@nestjs/core": ["../core"],
-      "@nestjs/core/*": ["../core/*"]
-    }
-  },
-  "exclude": ["node_modules", "dist", "test/**/*", "*.spec.ts"],
-  "references": [
-    {
-      "path": "../common/tsconfig.build.json"
-    },
-    {
-      "path": "../core/tsconfig.build.json"
-    }
-  ]
-}
diff --git a/packages/platform-fastify/tsconfig.json b/packages/platform-fastify/tsconfig.json
index 2ae9e3c90..b238080a4 100644
--- a/packages/platform-fastify/tsconfig.json
+++ b/packages/platform-fastify/tsconfig.json
@@ -1,13 +1,7 @@
 {
-  "extends": "../tsconfig.build.json",
+  "extends": "./../tsconfig.base.json",
   "compilerOptions": {
-    "types": ["node"]
+    "baseUrl": "./"
   },
-  "files": [],
-  "include": [],
-  "references": [
-    {
-      "path": "./tsconfig.build.json"
-    }
-  ]
+  "include": ["*.ts", "**/*.ts"]
 }
diff --git a/packages/platform-socket.io/CHANGELOG.md b/packages/platform-socket.io/CHANGELOG.md
new file mode 100644
index 000000000..2074a9b0d
--- /dev/null
+++ b/packages/platform-socket.io/CHANGELOG.md
@@ -0,0 +1,12 @@
+# Change Log
+
+All notable changes to this project will be documented in this file.
+See [Conventional Commits](https://conventionalcommits.org) for commit guidelines.
+
+<a name="8.2.0"></a>
+# [8.2.0](https://github.com/nestjs/nest/compare/v8.1.2...v8.2.0) (2021-11-08)
+
+
+
+
+**Note:** Version bump only for package @nestjs/platform-socket.io
diff --git a/packages/platform-socket.io/Readme.md b/packages/platform-socket.io/Readme.md
index 16f48336d..f288809a9 100644
--- a/packages/platform-socket.io/Readme.md
+++ b/packages/platform-socket.io/Readme.md
@@ -11,6 +11,7 @@
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/l/@nestjs/core.svg" alt="Package License" /></a>
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/dm/@nestjs/common.svg" alt="NPM Downloads" /></a>
 <a href="https://circleci.com/gh/nestjs/nest" target="_blank"><img src="https://img.shields.io/circleci/build/github/nestjs/nest/master" alt="CircleCI" /></a>
+<a href="https://coveralls.io/github/nestjs/nest?branch=master" target="_blank"><img src="https://coveralls.io/repos/github/nestjs/nest/badge.svg?branch=master#9" alt="Coverage" /></a>
 <a href="https://discord.gg/G7Qnnhy" target="_blank"><img src="https://img.shields.io/badge/discord-online-brightgreen.svg" alt="Discord"/></a>
 <a href="https://opencollective.com/nest#backer" target="_blank"><img src="https://opencollective.com/nest/backers/badge.svg" alt="Backers on Open Collective" /></a>
 <a href="https://opencollective.com/nest#sponsor" target="_blank"><img src="https://opencollective.com/nest/sponsors/badge.svg" alt="Sponsors on Open Collective" /></a>
@@ -36,8 +37,8 @@ Nest is a framework for building efficient, scalable <a href="http://nodejs.org"
 
 * To check out the [guide](https://docs.nestjs.com), visit [docs.nestjs.com](https://docs.nestjs.com). :books:
 * 要查看中文 [指南](readme_zh.md), 请访问 [docs.nestjs.cn](https://docs.nestjs.cn). :books:
-* [가이드](readme_kr.md) 문서는 [docs.nestjs.com](https://docs.nestjs.com)에서 확인하실 수 있습니다. :books:
-* [ガイド](readme_jp.md)は [docs.nestjs.com](https://docs.nestjs.com)でご確認ください。 :books:
+* [가이드](readme_kr.md)를 확인하려면, [docs.nestjs.com](https://docs.nestjs.com)를 방문하세요.:books: 
+* チェックするには [ガイド](readme_jp.md), 詳しくは [docs.nestjs.com](https://docs.nestjs.com). :books: 
 
 ## Questions
 
@@ -53,49 +54,36 @@ With official support, you can get expert help straight from Nest core team. We
 
 ## Support
 
-Nest is an MIT-licensed open source project. It can grow thanks to the sponsors and support from the amazing backers. If you'd like to join them, please [read more here](https://docs.nestjs.com/support).
+Nest is an MIT-licensed open source project. It can grow thanks to the sponsors and support by the amazing backers. If you'd like to join them, please [read more here](https://docs.nestjs.com/support).
 
 #### Principal Sponsors
 <table style="text-align:center;"><tr>
   <td><a href="https://trilon.io" target="_blank"><img src="https://nestjs.com/img/trilon.svg" width="200" valign="middle" /></a></td>
-  <td><a href="https://www.redhat.com" target="_blank"><img src="https://nestjs.com/img/red-hat-logo.svg" width="200" valign="middle" /></a></td>
 <td>
 <a href="https://github.com/Sanofi-IADC" target="_blank"><img src="https://docs.nestjs.com/assets/sponsors/sanofi.png" width="180" valign="middle" /></a></td>
 <td>
 <a href="https://nx.dev" target="_blank"><img src="https://nestjs.com/img/nx-logo.png" height="45" valign="middle" /></a></td>
-    <td>
-<a href="https://valor-software.com/" target="_blank"><img src="https://docs.nestjs.com/assets/sponsors/valor-software.png" width="170" valign="middle" /></a></td><td>
-<a href="https://amplication.com/" target="_blank"><img src="https://nestjs.com/img/amplication-logo.svg" width="190" valign="middle" /></a></td>
 </tr></table>
 
 #### Gold Sponsors
 
 <table style="text-align:center;"><tr><td>
-<a href="https://weld.app/" target="_blank"><img src="https://nestjs.com/img/weld-logo.svg" width="140" valign="middle" /></a></td>
+  <a href="https://careers.labster.com/departments/platform" target="_blank"><img src="https://nestjs.com/img/labster-logo.png" width="170" valign="middle" /></a></td><td>
+<a href="https://weld.app/" target="_blank"><img src="https://nestjs.com/img/weld-logo.svg" width="150" valign="middle" /></a></td>
+  <td>
+<a href="https://valor-software.com/" target="_blank"><img src="https://docs.nestjs.com/assets/sponsors/valor-software.png" width="170" valign="middle" /></a></td>
 <td>
-<a href="https://intrinsic.ventures/" target="_blank"><img src="https://nestjs.com/img/intrinisic-logo.png" width="210" valign="middle" /></a></td>
- <td>
-<a href="https://jetbrains.com/" target="_blank"><img src="https://nestjs.com/img/jetbrains-logo.svg" width="110" valign="middle" /></a></td><td>
-<a href="https://snyk.co/nestjs" target="_blank"><img src="https://nestjs.com/img/snyk-logo-black.png" width="185" valign="middle" /></a></td><td>
-<a href="https://fuseautotech.com/" target="_blank"><img src="https://nestjs.com/img/fuse-logo.svg" width="105" valign="middle" /></a></td>
-<td>
-<a href="https://ridicorp.com/career/" target="_blank"><img src="https://nestjs.com/img/ridi-logo.svg" width="105" valign="middle" /></a></td><td>
-<a href="https://www.movavi.com/imovie-for-windows.html" target="_blank"><img src="https://nestjs.com/img/movavi-logo.svg" width="105" valign="middle" /></a></td></</tr></table>
+<a href="https://intrinsic.ventures/" target="_blank"><img src="https://nestjs.com/img/intrinisic-logo.png" width="210" valign="middle" /></a></td></</tr></table>
 
 #### Silver Sponsors
 
 <table style="text-align:center;"><tr><td>
 <a href="https://neoteric.eu/" target="_blank"><img src="https://nestjs.com/img/neoteric-cut.png" width="120" valign="middle" /></a> </td><td>
   <a href="http://gojob.com" target="_blank"><img src="http://nestjs.com/img/gojob-logo.png" valign="middle" width="100" /></a> </td><td>
-<a href="https://www.myleodsc.com/" target="_blank"><img src="https://nestjs.com/img/myleo-logo.png" width="180" valign="middle" /></td><td>
+<a href="http://www.leogistics.com" target="_blank"><img src="https://nestjs.com/img/leogistics-logo.jpeg" width="150" valign="middle" /></td><td>
 <a href="https://careers.meetdandy.com/?gh_src=063ba61e3us" target="_blank"><img src="https://nestjs.com/img/dandy-roles-logo.svg" width="150" valign="middle" /></td><td>
 <a href="https://www.castlecraft.in" target="_blank"><img src="https://nestjs.com/img/castlecraft-logo.png" width="150" valign="middle" /></td>
-<td><a href="https://www.tinystacks.com" target="_blank"><img src="https://nestjs.com/img/tinystacks-logo.png#1" width="140" valign="middle" /></td>
-<td><a href="https://n.inc" target="_blank"><img src="https://nestjs.com/img/n-inc-logo.svg" width="120" valign="middle" /></td></tr><tr>
-<td><a href="https://bilberrry.com/" target="_blank"><img src="https://nestjs.com/img/bilberrry-logo.svg" width="180" valign="middle" /></td>
-<td><a href="https://ipinfo.ai/" target="_blank"><img src="https://nestjs.com/img/ipinfo-logo.png" width="130" valign="middle" /></td>
-<td><a href="https://chax.at" target="_blank"><img src="https://nestjs.com/img/chaxat-logo.png" width="100" valign="middle" /></td></tr>
-</table>
+<td><a href="https://www.tinystacks.com" target="_blank"><img src="https://nestjs.com/img/tinystacks-logo.png#1" width="140" valign="middle" /></td></tr></table>
 
 #### Sponsors
 
@@ -103,7 +91,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
 <a href="https://www.swingdev.io" target="_blank"><img src="https://nestjs.com/img/swingdev-logo.svg#1" width="110" valign="middle" /> </a></td><td align="center" valign="middle">
 <a href="https://www.novologic.com/" target="_blank"><img src="https://nestjs.com/img/novologic.png" width="110" valign="middle" /></a> </td><td align="center" valign="middle">
 <a href="https://ever.co/" target="_blank"><img src="https://nestjs.com/img/ever-logo.png" width="72" valign="middle" /></a>  </td><td align="center" valign="middle">
-<a href="https://blokt.com" target="_blank"><img src="https://nestjs.com/img/blokt-logo.png" width="120" valign="middle" /></a>  </td><td align="center" valign="middle">
+<a href="https://blokt.com" target="_blank"><img src="https://nestjs.com/img/blokt-logo.png" width="120" valign="middle" /></a>  </td><td align="center" valign="middle"> 
   <a href="http://architectnow.net/" target="_blank"><img src="https://nestjs.com/img/architectnow.png" width="125" valign="middle" /></a> </td><td align="center" valign="middle">
   <a href="https://quander.io/" target="_blank"><img src="https://nestjs.com/img/quander.png" width="100" valign="middle" /></a> </td></tr><tr><td align="center" valign="middle">
   <a href="https://mantro.net/" target="_blank"><img src="https://nestjs.com/img/mantro-logo.svg" width="95" valign="middle" /></a> </td><td align="center" valign="middle">
@@ -129,14 +117,6 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
 <td align="center" valign="middle"><a href="https://www.naologic.com/" target="_blank"><img src="https://nestjs.com/img/naologic-logo.svg" width="125" valign="middle" /></a></td>
   <td align="center" valign="middle"><a href="https://messaged.com/" target="_blank"><img src="https://nestjs.com/img/messaged-logo.png" width="50" valign="middle" /></a></td>
   <td align="center" valign="middle"><a href="https://triplecore.io" target="_blank"><img src="https://nestjs.com/img/triplecore-logo.svg" width="50" valign="middle" /></a></td>
-   <td align="center" valign="middle"><a href="https://klqc.de" target="_blank"><img src="https://nestjs.com/img/klcqcl-logo.png" width="120" valign="middle" /></a></td>
-   <td align="center" valign="middle"><a href="https://thecasinowizard.com/bonuses/no-deposit-bonuses/" target="_blank"><img src="https://nestjs.com/img/casinowizard-logo.png" width="120" valign="middle" /></a></td></tr><tr>
-     <td align="center" valign="middle"><a href="https://polygon-software.ch/" target="_blank"><img src="https://nestjs.com/img/polygon-logo.svg" width="120" valign="middle" /></a></td>
-   <td align="center" valign="middle"><a href="https://mobilereality.pl/" target="_blank"><img src="https://nestjs.com/img/mobile-reality-logo.png" width="45" valign="middle" /></a></td>
-     <td align="center" valign="middle"><a href="https://boringowl.io/" target="_blank"><img src="https://nestjs.com/img/boringowl-logo.svg" width="120" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://www.mobilefactory.jp/" target="_blank"><img src="https://nestjs.com/img/mobilefactory-logo.png" width="100" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://nordbot.app/" target="_blank"><img src="https://nestjs.com/img/nordbot-logo.png" width="120" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://doppio.sh/" target="_blank"><img src="https://nestjs.com/img/dopiosh-logo.png" width="50" valign="middle" /></a></td>
   </tr></table>
 
 ## Backers
diff --git a/packages/platform-socket.io/adapters/io-adapter.ts b/packages/platform-socket.io/adapters/io-adapter.ts
index d3c8d161d..22eb9155c 100644
--- a/packages/platform-socket.io/adapters/io-adapter.ts
+++ b/packages/platform-socket.io/adapters/io-adapter.ts
@@ -8,9 +8,6 @@ import { fromEvent, Observable } from 'rxjs';
 import { filter, first, map, mergeMap, share, takeUntil } from 'rxjs/operators';
 import { Server, ServerOptions, Socket } from 'socket.io';
 
-/**
- * @publicApi
- */
 export class IoAdapter extends AbstractWsAdapter {
   public create(
     port: number,
diff --git a/packages/platform-socket.io/index.ts b/packages/platform-socket.io/index.ts
index 434d79eb4..175a4e0d6 100644
--- a/packages/platform-socket.io/index.ts
+++ b/packages/platform-socket.io/index.ts
@@ -1,6 +1,6 @@
 /*
  * Nest @platform-socket.io
- * Copyright(c) 2017 - 2023 Kamil Mysliwiec
+ * Copyright(c) 2017 - 2021 Kamil Mysliwiec
  * https://nestjs.com
  * MIT Licensed
  */
diff --git a/packages/platform-socket.io/package.json b/packages/platform-socket.io/package.json
index 8a1eda801..38fde3ee1 100644
--- a/packages/platform-socket.io/package.json
+++ b/packages/platform-socket.io/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/platform-socket.io",
-  "version": "9.4.0",
+  "version": "8.2.3",
   "description": "Nest - modern, fast, powerful node.js web framework (@platform-socket.io)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -17,12 +17,12 @@
     "access": "public"
   },
   "dependencies": {
-    "socket.io": "4.6.1",
-    "tslib": "2.5.0"
+    "socket.io": "4.4.0",
+    "tslib": "2.3.1"
   },
   "peerDependencies": {
-    "@nestjs/common": "^9.0.0",
-    "@nestjs/websockets": "^9.0.0",
+    "@nestjs/common": "^8.0.0",
+    "@nestjs/websockets": "^8.0.0",
     "rxjs": "^7.1.0"
   }
 }
diff --git a/packages/platform-socket.io/tsconfig.build.json b/packages/platform-socket.io/tsconfig.build.json
deleted file mode 100644
index b9ccddc22..000000000
--- a/packages/platform-socket.io/tsconfig.build.json
+++ /dev/null
@@ -1,22 +0,0 @@
-{
-  "extends": "../tsconfig.build.json",
-  "compilerOptions": {
-    "outDir": ".",
-    "rootDir": ".",
-    "paths": {
-      "@nestjs/common": ["../common"],
-      "@nestjs/common/*": ["../common/*"],
-      "@nestjs/websockets": ["../websockets"],
-      "@nestjs/websockets/*": ["../websockets/*"]
-    }
-  },
-  "exclude": ["node_modules", "dist", "test/**/*", "*.spec.ts"],
-  "references": [
-    {
-      "path": "../common/tsconfig.build.json"
-    },
-    {
-      "path": "../websockets/tsconfig.build.json"
-    }
-  ]
-}
diff --git a/packages/platform-socket.io/tsconfig.json b/packages/platform-socket.io/tsconfig.json
index 2ae9e3c90..b238080a4 100644
--- a/packages/platform-socket.io/tsconfig.json
+++ b/packages/platform-socket.io/tsconfig.json
@@ -1,13 +1,7 @@
 {
-  "extends": "../tsconfig.build.json",
+  "extends": "./../tsconfig.base.json",
   "compilerOptions": {
-    "types": ["node"]
+    "baseUrl": "./"
   },
-  "files": [],
-  "include": [],
-  "references": [
-    {
-      "path": "./tsconfig.build.json"
-    }
-  ]
+  "include": ["*.ts", "**/*.ts"]
 }
diff --git a/packages/platform-ws/CHANGELOG.md b/packages/platform-ws/CHANGELOG.md
new file mode 100644
index 000000000..38ce8ea49
--- /dev/null
+++ b/packages/platform-ws/CHANGELOG.md
@@ -0,0 +1,12 @@
+# Change Log
+
+All notable changes to this project will be documented in this file.
+See [Conventional Commits](https://conventionalcommits.org) for commit guidelines.
+
+<a name="8.2.0"></a>
+# [8.2.0](https://github.com/nestjs/nest/compare/v8.1.2...v8.2.0) (2021-11-08)
+
+
+
+
+**Note:** Version bump only for package @nestjs/platform-ws
diff --git a/packages/platform-ws/Readme.md b/packages/platform-ws/Readme.md
index 16f48336d..f288809a9 100644
--- a/packages/platform-ws/Readme.md
+++ b/packages/platform-ws/Readme.md
@@ -11,6 +11,7 @@
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/l/@nestjs/core.svg" alt="Package License" /></a>
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/dm/@nestjs/common.svg" alt="NPM Downloads" /></a>
 <a href="https://circleci.com/gh/nestjs/nest" target="_blank"><img src="https://img.shields.io/circleci/build/github/nestjs/nest/master" alt="CircleCI" /></a>
+<a href="https://coveralls.io/github/nestjs/nest?branch=master" target="_blank"><img src="https://coveralls.io/repos/github/nestjs/nest/badge.svg?branch=master#9" alt="Coverage" /></a>
 <a href="https://discord.gg/G7Qnnhy" target="_blank"><img src="https://img.shields.io/badge/discord-online-brightgreen.svg" alt="Discord"/></a>
 <a href="https://opencollective.com/nest#backer" target="_blank"><img src="https://opencollective.com/nest/backers/badge.svg" alt="Backers on Open Collective" /></a>
 <a href="https://opencollective.com/nest#sponsor" target="_blank"><img src="https://opencollective.com/nest/sponsors/badge.svg" alt="Sponsors on Open Collective" /></a>
@@ -36,8 +37,8 @@ Nest is a framework for building efficient, scalable <a href="http://nodejs.org"
 
 * To check out the [guide](https://docs.nestjs.com), visit [docs.nestjs.com](https://docs.nestjs.com). :books:
 * 要查看中文 [指南](readme_zh.md), 请访问 [docs.nestjs.cn](https://docs.nestjs.cn). :books:
-* [가이드](readme_kr.md) 문서는 [docs.nestjs.com](https://docs.nestjs.com)에서 확인하실 수 있습니다. :books:
-* [ガイド](readme_jp.md)は [docs.nestjs.com](https://docs.nestjs.com)でご確認ください。 :books:
+* [가이드](readme_kr.md)를 확인하려면, [docs.nestjs.com](https://docs.nestjs.com)를 방문하세요.:books: 
+* チェックするには [ガイド](readme_jp.md), 詳しくは [docs.nestjs.com](https://docs.nestjs.com). :books: 
 
 ## Questions
 
@@ -53,49 +54,36 @@ With official support, you can get expert help straight from Nest core team. We
 
 ## Support
 
-Nest is an MIT-licensed open source project. It can grow thanks to the sponsors and support from the amazing backers. If you'd like to join them, please [read more here](https://docs.nestjs.com/support).
+Nest is an MIT-licensed open source project. It can grow thanks to the sponsors and support by the amazing backers. If you'd like to join them, please [read more here](https://docs.nestjs.com/support).
 
 #### Principal Sponsors
 <table style="text-align:center;"><tr>
   <td><a href="https://trilon.io" target="_blank"><img src="https://nestjs.com/img/trilon.svg" width="200" valign="middle" /></a></td>
-  <td><a href="https://www.redhat.com" target="_blank"><img src="https://nestjs.com/img/red-hat-logo.svg" width="200" valign="middle" /></a></td>
 <td>
 <a href="https://github.com/Sanofi-IADC" target="_blank"><img src="https://docs.nestjs.com/assets/sponsors/sanofi.png" width="180" valign="middle" /></a></td>
 <td>
 <a href="https://nx.dev" target="_blank"><img src="https://nestjs.com/img/nx-logo.png" height="45" valign="middle" /></a></td>
-    <td>
-<a href="https://valor-software.com/" target="_blank"><img src="https://docs.nestjs.com/assets/sponsors/valor-software.png" width="170" valign="middle" /></a></td><td>
-<a href="https://amplication.com/" target="_blank"><img src="https://nestjs.com/img/amplication-logo.svg" width="190" valign="middle" /></a></td>
 </tr></table>
 
 #### Gold Sponsors
 
 <table style="text-align:center;"><tr><td>
-<a href="https://weld.app/" target="_blank"><img src="https://nestjs.com/img/weld-logo.svg" width="140" valign="middle" /></a></td>
+  <a href="https://careers.labster.com/departments/platform" target="_blank"><img src="https://nestjs.com/img/labster-logo.png" width="170" valign="middle" /></a></td><td>
+<a href="https://weld.app/" target="_blank"><img src="https://nestjs.com/img/weld-logo.svg" width="150" valign="middle" /></a></td>
+  <td>
+<a href="https://valor-software.com/" target="_blank"><img src="https://docs.nestjs.com/assets/sponsors/valor-software.png" width="170" valign="middle" /></a></td>
 <td>
-<a href="https://intrinsic.ventures/" target="_blank"><img src="https://nestjs.com/img/intrinisic-logo.png" width="210" valign="middle" /></a></td>
- <td>
-<a href="https://jetbrains.com/" target="_blank"><img src="https://nestjs.com/img/jetbrains-logo.svg" width="110" valign="middle" /></a></td><td>
-<a href="https://snyk.co/nestjs" target="_blank"><img src="https://nestjs.com/img/snyk-logo-black.png" width="185" valign="middle" /></a></td><td>
-<a href="https://fuseautotech.com/" target="_blank"><img src="https://nestjs.com/img/fuse-logo.svg" width="105" valign="middle" /></a></td>
-<td>
-<a href="https://ridicorp.com/career/" target="_blank"><img src="https://nestjs.com/img/ridi-logo.svg" width="105" valign="middle" /></a></td><td>
-<a href="https://www.movavi.com/imovie-for-windows.html" target="_blank"><img src="https://nestjs.com/img/movavi-logo.svg" width="105" valign="middle" /></a></td></</tr></table>
+<a href="https://intrinsic.ventures/" target="_blank"><img src="https://nestjs.com/img/intrinisic-logo.png" width="210" valign="middle" /></a></td></</tr></table>
 
 #### Silver Sponsors
 
 <table style="text-align:center;"><tr><td>
 <a href="https://neoteric.eu/" target="_blank"><img src="https://nestjs.com/img/neoteric-cut.png" width="120" valign="middle" /></a> </td><td>
   <a href="http://gojob.com" target="_blank"><img src="http://nestjs.com/img/gojob-logo.png" valign="middle" width="100" /></a> </td><td>
-<a href="https://www.myleodsc.com/" target="_blank"><img src="https://nestjs.com/img/myleo-logo.png" width="180" valign="middle" /></td><td>
+<a href="http://www.leogistics.com" target="_blank"><img src="https://nestjs.com/img/leogistics-logo.jpeg" width="150" valign="middle" /></td><td>
 <a href="https://careers.meetdandy.com/?gh_src=063ba61e3us" target="_blank"><img src="https://nestjs.com/img/dandy-roles-logo.svg" width="150" valign="middle" /></td><td>
 <a href="https://www.castlecraft.in" target="_blank"><img src="https://nestjs.com/img/castlecraft-logo.png" width="150" valign="middle" /></td>
-<td><a href="https://www.tinystacks.com" target="_blank"><img src="https://nestjs.com/img/tinystacks-logo.png#1" width="140" valign="middle" /></td>
-<td><a href="https://n.inc" target="_blank"><img src="https://nestjs.com/img/n-inc-logo.svg" width="120" valign="middle" /></td></tr><tr>
-<td><a href="https://bilberrry.com/" target="_blank"><img src="https://nestjs.com/img/bilberrry-logo.svg" width="180" valign="middle" /></td>
-<td><a href="https://ipinfo.ai/" target="_blank"><img src="https://nestjs.com/img/ipinfo-logo.png" width="130" valign="middle" /></td>
-<td><a href="https://chax.at" target="_blank"><img src="https://nestjs.com/img/chaxat-logo.png" width="100" valign="middle" /></td></tr>
-</table>
+<td><a href="https://www.tinystacks.com" target="_blank"><img src="https://nestjs.com/img/tinystacks-logo.png#1" width="140" valign="middle" /></td></tr></table>
 
 #### Sponsors
 
@@ -103,7 +91,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
 <a href="https://www.swingdev.io" target="_blank"><img src="https://nestjs.com/img/swingdev-logo.svg#1" width="110" valign="middle" /> </a></td><td align="center" valign="middle">
 <a href="https://www.novologic.com/" target="_blank"><img src="https://nestjs.com/img/novologic.png" width="110" valign="middle" /></a> </td><td align="center" valign="middle">
 <a href="https://ever.co/" target="_blank"><img src="https://nestjs.com/img/ever-logo.png" width="72" valign="middle" /></a>  </td><td align="center" valign="middle">
-<a href="https://blokt.com" target="_blank"><img src="https://nestjs.com/img/blokt-logo.png" width="120" valign="middle" /></a>  </td><td align="center" valign="middle">
+<a href="https://blokt.com" target="_blank"><img src="https://nestjs.com/img/blokt-logo.png" width="120" valign="middle" /></a>  </td><td align="center" valign="middle"> 
   <a href="http://architectnow.net/" target="_blank"><img src="https://nestjs.com/img/architectnow.png" width="125" valign="middle" /></a> </td><td align="center" valign="middle">
   <a href="https://quander.io/" target="_blank"><img src="https://nestjs.com/img/quander.png" width="100" valign="middle" /></a> </td></tr><tr><td align="center" valign="middle">
   <a href="https://mantro.net/" target="_blank"><img src="https://nestjs.com/img/mantro-logo.svg" width="95" valign="middle" /></a> </td><td align="center" valign="middle">
@@ -129,14 +117,6 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
 <td align="center" valign="middle"><a href="https://www.naologic.com/" target="_blank"><img src="https://nestjs.com/img/naologic-logo.svg" width="125" valign="middle" /></a></td>
   <td align="center" valign="middle"><a href="https://messaged.com/" target="_blank"><img src="https://nestjs.com/img/messaged-logo.png" width="50" valign="middle" /></a></td>
   <td align="center" valign="middle"><a href="https://triplecore.io" target="_blank"><img src="https://nestjs.com/img/triplecore-logo.svg" width="50" valign="middle" /></a></td>
-   <td align="center" valign="middle"><a href="https://klqc.de" target="_blank"><img src="https://nestjs.com/img/klcqcl-logo.png" width="120" valign="middle" /></a></td>
-   <td align="center" valign="middle"><a href="https://thecasinowizard.com/bonuses/no-deposit-bonuses/" target="_blank"><img src="https://nestjs.com/img/casinowizard-logo.png" width="120" valign="middle" /></a></td></tr><tr>
-     <td align="center" valign="middle"><a href="https://polygon-software.ch/" target="_blank"><img src="https://nestjs.com/img/polygon-logo.svg" width="120" valign="middle" /></a></td>
-   <td align="center" valign="middle"><a href="https://mobilereality.pl/" target="_blank"><img src="https://nestjs.com/img/mobile-reality-logo.png" width="45" valign="middle" /></a></td>
-     <td align="center" valign="middle"><a href="https://boringowl.io/" target="_blank"><img src="https://nestjs.com/img/boringowl-logo.svg" width="120" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://www.mobilefactory.jp/" target="_blank"><img src="https://nestjs.com/img/mobilefactory-logo.png" width="100" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://nordbot.app/" target="_blank"><img src="https://nestjs.com/img/nordbot-logo.png" width="120" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://doppio.sh/" target="_blank"><img src="https://nestjs.com/img/dopiosh-logo.png" width="50" valign="middle" /></a></td>
   </tr></table>
 
 ## Backers
diff --git a/packages/platform-ws/adapters/ws-adapter.ts b/packages/platform-ws/adapters/ws-adapter.ts
index d0791be91..cca1f81a6 100644
--- a/packages/platform-ws/adapters/ws-adapter.ts
+++ b/packages/platform-ws/adapters/ws-adapter.ts
@@ -1,6 +1,5 @@
 import { INestApplicationContext, Logger } from '@nestjs/common';
 import { loadPackage } from '@nestjs/common/utils/load-package.util';
-import { normalizePath, isNil } from '@nestjs/common/utils/shared.utils';
 import { AbstractWsAdapter } from '@nestjs/websockets';
 import {
   CLOSE_EVENT,
@@ -9,7 +8,7 @@ import {
 } from '@nestjs/websockets/constants';
 import { MessageMappingProperties } from '@nestjs/websockets/gateway-metadata-explorer';
 import * as http from 'http';
-import { EMPTY, fromEvent, Observable } from 'rxjs';
+import { EMPTY as empty, fromEvent, Observable } from 'rxjs';
 import { filter, first, mergeMap, share, takeUntil } from 'rxjs/operators';
 
 let wsPackage: any = {};
@@ -28,9 +27,6 @@ type WsServerRegistryEntry = any[];
 
 const UNDERLYING_HTTP_SERVER_PORT = 0;
 
-/**
- * @publicApi
- */
 export class WsAdapter extends AbstractWsAdapter {
   protected readonly logger = new Logger(WsAdapter.name);
   protected readonly httpServersRegistry = new Map<
@@ -49,13 +45,9 @@ export class WsAdapter extends AbstractWsAdapter {
 
   public create(
     port: number,
-    options?: Record<string, any> & {
-      namespace?: string;
-      server?: any;
-      path?: string;
-    },
+    options?: Record<string, any> & { namespace?: string; server?: any },
   ) {
-    const { server, path, ...wsOptions } = options;
+    const { server, ...wsOptions } = options;
     if (wsOptions?.namespace) {
       const error = new Error(
         '"WsAdapter" does not support namespaces. If you need namespaces in your project, consider using the "@nestjs/platform-socket.io" package instead.',
@@ -73,14 +65,14 @@ export class WsAdapter extends AbstractWsAdapter {
         }),
       );
 
-      this.addWsServerToRegistry(wsServer, port, path);
+      this.addWsServerToRegistry(wsServer, port, options.path || '/');
       return wsServer;
     }
 
     if (server) {
       return server;
     }
-    if (path && port !== UNDERLYING_HTTP_SERVER_PORT) {
+    if (options.path && port !== UNDERLYING_HTTP_SERVER_PORT) {
       // Multiple servers with different paths
       // sharing a single HTTP/S server running on different port
       // than a regular HTTP application
@@ -93,13 +85,12 @@ export class WsAdapter extends AbstractWsAdapter {
           ...wsOptions,
         }),
       );
-      this.addWsServerToRegistry(wsServer, port, path);
+      this.addWsServerToRegistry(wsServer, port, options.path);
       return wsServer;
     }
     const wsServer = this.bindErrorHandler(
       new wsPackage.Server({
         port,
-        path,
         ...wsOptions,
       }),
     );
@@ -115,7 +106,7 @@ export class WsAdapter extends AbstractWsAdapter {
     const source$ = fromEvent(client, 'message').pipe(
       mergeMap(data =>
         this.bindMessageHandler(data, handlers, transform).pipe(
-          filter(result => !isNil(result)),
+          filter(result => result),
         ),
       ),
       takeUntil(close$),
@@ -142,7 +133,7 @@ export class WsAdapter extends AbstractWsAdapter {
       const { callback } = messageHandler;
       return transform(callback(message.data));
     } catch {
-      return EMPTY;
+      return empty;
     }
   }
 
@@ -207,7 +198,7 @@ export class WsAdapter extends AbstractWsAdapter {
     const entries = this.wsServersRegistry.get(port) ?? [];
     entries.push(wsServer);
 
-    wsServer.path = normalizePath(path);
+    wsServer.path = path;
     this.wsServersRegistry.set(port, entries);
   }
 }
diff --git a/packages/platform-ws/index.ts b/packages/platform-ws/index.ts
index e83223e11..e1b9386e4 100644
--- a/packages/platform-ws/index.ts
+++ b/packages/platform-ws/index.ts
@@ -1,6 +1,6 @@
 /*
  * Nest @platform-ws
- * Copyright(c) 2017 - 2023 Kamil Mysliwiec
+ * Copyright(c) 2017 - 2021 Kamil Mysliwiec
  * https://nestjs.com
  * MIT Licensed
  */
diff --git a/packages/platform-ws/package.json b/packages/platform-ws/package.json
index 9410fb4b2..ac6c0e077 100644
--- a/packages/platform-ws/package.json
+++ b/packages/platform-ws/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/platform-ws",
-  "version": "9.4.0",
+  "version": "8.2.3",
   "description": "Nest - modern, fast, powerful node.js web framework (@platform-ws)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -17,12 +17,12 @@
     "access": "public"
   },
   "dependencies": {
-    "tslib": "2.5.0",
-    "ws": "8.13.0"
+    "tslib": "2.3.1",
+    "ws": "7.5.6"
   },
   "peerDependencies": {
-    "@nestjs/common": "^9.0.0",
-    "@nestjs/websockets": "^9.0.0",
+    "@nestjs/common": "^8.0.0",
+    "@nestjs/websockets": "^8.0.0",
     "rxjs": "^7.1.0"
   }
 }
diff --git a/packages/platform-ws/tsconfig.build.json b/packages/platform-ws/tsconfig.build.json
deleted file mode 100644
index b9ccddc22..000000000
--- a/packages/platform-ws/tsconfig.build.json
+++ /dev/null
@@ -1,22 +0,0 @@
-{
-  "extends": "../tsconfig.build.json",
-  "compilerOptions": {
-    "outDir": ".",
-    "rootDir": ".",
-    "paths": {
-      "@nestjs/common": ["../common"],
-      "@nestjs/common/*": ["../common/*"],
-      "@nestjs/websockets": ["../websockets"],
-      "@nestjs/websockets/*": ["../websockets/*"]
-    }
-  },
-  "exclude": ["node_modules", "dist", "test/**/*", "*.spec.ts"],
-  "references": [
-    {
-      "path": "../common/tsconfig.build.json"
-    },
-    {
-      "path": "../websockets/tsconfig.build.json"
-    }
-  ]
-}
diff --git a/packages/platform-ws/tsconfig.json b/packages/platform-ws/tsconfig.json
index 2ae9e3c90..b238080a4 100644
--- a/packages/platform-ws/tsconfig.json
+++ b/packages/platform-ws/tsconfig.json
@@ -1,13 +1,7 @@
 {
-  "extends": "../tsconfig.build.json",
+  "extends": "./../tsconfig.base.json",
   "compilerOptions": {
-    "types": ["node"]
+    "baseUrl": "./"
   },
-  "files": [],
-  "include": [],
-  "references": [
-    {
-      "path": "./tsconfig.build.json"
-    }
-  ]
+  "include": ["*.ts", "**/*.ts"]
 }
diff --git a/packages/testing/CHANGELOG.md b/packages/testing/CHANGELOG.md
new file mode 100644
index 000000000..fca1fb6df
--- /dev/null
+++ b/packages/testing/CHANGELOG.md
@@ -0,0 +1,12 @@
+# Change Log
+
+All notable changes to this project will be documented in this file.
+See [Conventional Commits](https://conventionalcommits.org) for commit guidelines.
+
+<a name="8.2.0"></a>
+# [8.2.0](https://github.com/nestjs/nest/compare/v8.1.2...v8.2.0) (2021-11-08)
+
+
+
+
+**Note:** Version bump only for package @nestjs/testing
diff --git a/packages/testing/Readme.md b/packages/testing/Readme.md
index 16f48336d..f288809a9 100644
--- a/packages/testing/Readme.md
+++ b/packages/testing/Readme.md
@@ -11,6 +11,7 @@
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/l/@nestjs/core.svg" alt="Package License" /></a>
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/dm/@nestjs/common.svg" alt="NPM Downloads" /></a>
 <a href="https://circleci.com/gh/nestjs/nest" target="_blank"><img src="https://img.shields.io/circleci/build/github/nestjs/nest/master" alt="CircleCI" /></a>
+<a href="https://coveralls.io/github/nestjs/nest?branch=master" target="_blank"><img src="https://coveralls.io/repos/github/nestjs/nest/badge.svg?branch=master#9" alt="Coverage" /></a>
 <a href="https://discord.gg/G7Qnnhy" target="_blank"><img src="https://img.shields.io/badge/discord-online-brightgreen.svg" alt="Discord"/></a>
 <a href="https://opencollective.com/nest#backer" target="_blank"><img src="https://opencollective.com/nest/backers/badge.svg" alt="Backers on Open Collective" /></a>
 <a href="https://opencollective.com/nest#sponsor" target="_blank"><img src="https://opencollective.com/nest/sponsors/badge.svg" alt="Sponsors on Open Collective" /></a>
@@ -36,8 +37,8 @@ Nest is a framework for building efficient, scalable <a href="http://nodejs.org"
 
 * To check out the [guide](https://docs.nestjs.com), visit [docs.nestjs.com](https://docs.nestjs.com). :books:
 * 要查看中文 [指南](readme_zh.md), 请访问 [docs.nestjs.cn](https://docs.nestjs.cn). :books:
-* [가이드](readme_kr.md) 문서는 [docs.nestjs.com](https://docs.nestjs.com)에서 확인하실 수 있습니다. :books:
-* [ガイド](readme_jp.md)は [docs.nestjs.com](https://docs.nestjs.com)でご確認ください。 :books:
+* [가이드](readme_kr.md)를 확인하려면, [docs.nestjs.com](https://docs.nestjs.com)를 방문하세요.:books: 
+* チェックするには [ガイド](readme_jp.md), 詳しくは [docs.nestjs.com](https://docs.nestjs.com). :books: 
 
 ## Questions
 
@@ -53,49 +54,36 @@ With official support, you can get expert help straight from Nest core team. We
 
 ## Support
 
-Nest is an MIT-licensed open source project. It can grow thanks to the sponsors and support from the amazing backers. If you'd like to join them, please [read more here](https://docs.nestjs.com/support).
+Nest is an MIT-licensed open source project. It can grow thanks to the sponsors and support by the amazing backers. If you'd like to join them, please [read more here](https://docs.nestjs.com/support).
 
 #### Principal Sponsors
 <table style="text-align:center;"><tr>
   <td><a href="https://trilon.io" target="_blank"><img src="https://nestjs.com/img/trilon.svg" width="200" valign="middle" /></a></td>
-  <td><a href="https://www.redhat.com" target="_blank"><img src="https://nestjs.com/img/red-hat-logo.svg" width="200" valign="middle" /></a></td>
 <td>
 <a href="https://github.com/Sanofi-IADC" target="_blank"><img src="https://docs.nestjs.com/assets/sponsors/sanofi.png" width="180" valign="middle" /></a></td>
 <td>
 <a href="https://nx.dev" target="_blank"><img src="https://nestjs.com/img/nx-logo.png" height="45" valign="middle" /></a></td>
-    <td>
-<a href="https://valor-software.com/" target="_blank"><img src="https://docs.nestjs.com/assets/sponsors/valor-software.png" width="170" valign="middle" /></a></td><td>
-<a href="https://amplication.com/" target="_blank"><img src="https://nestjs.com/img/amplication-logo.svg" width="190" valign="middle" /></a></td>
 </tr></table>
 
 #### Gold Sponsors
 
 <table style="text-align:center;"><tr><td>
-<a href="https://weld.app/" target="_blank"><img src="https://nestjs.com/img/weld-logo.svg" width="140" valign="middle" /></a></td>
+  <a href="https://careers.labster.com/departments/platform" target="_blank"><img src="https://nestjs.com/img/labster-logo.png" width="170" valign="middle" /></a></td><td>
+<a href="https://weld.app/" target="_blank"><img src="https://nestjs.com/img/weld-logo.svg" width="150" valign="middle" /></a></td>
+  <td>
+<a href="https://valor-software.com/" target="_blank"><img src="https://docs.nestjs.com/assets/sponsors/valor-software.png" width="170" valign="middle" /></a></td>
 <td>
-<a href="https://intrinsic.ventures/" target="_blank"><img src="https://nestjs.com/img/intrinisic-logo.png" width="210" valign="middle" /></a></td>
- <td>
-<a href="https://jetbrains.com/" target="_blank"><img src="https://nestjs.com/img/jetbrains-logo.svg" width="110" valign="middle" /></a></td><td>
-<a href="https://snyk.co/nestjs" target="_blank"><img src="https://nestjs.com/img/snyk-logo-black.png" width="185" valign="middle" /></a></td><td>
-<a href="https://fuseautotech.com/" target="_blank"><img src="https://nestjs.com/img/fuse-logo.svg" width="105" valign="middle" /></a></td>
-<td>
-<a href="https://ridicorp.com/career/" target="_blank"><img src="https://nestjs.com/img/ridi-logo.svg" width="105" valign="middle" /></a></td><td>
-<a href="https://www.movavi.com/imovie-for-windows.html" target="_blank"><img src="https://nestjs.com/img/movavi-logo.svg" width="105" valign="middle" /></a></td></</tr></table>
+<a href="https://intrinsic.ventures/" target="_blank"><img src="https://nestjs.com/img/intrinisic-logo.png" width="210" valign="middle" /></a></td></</tr></table>
 
 #### Silver Sponsors
 
 <table style="text-align:center;"><tr><td>
 <a href="https://neoteric.eu/" target="_blank"><img src="https://nestjs.com/img/neoteric-cut.png" width="120" valign="middle" /></a> </td><td>
   <a href="http://gojob.com" target="_blank"><img src="http://nestjs.com/img/gojob-logo.png" valign="middle" width="100" /></a> </td><td>
-<a href="https://www.myleodsc.com/" target="_blank"><img src="https://nestjs.com/img/myleo-logo.png" width="180" valign="middle" /></td><td>
+<a href="http://www.leogistics.com" target="_blank"><img src="https://nestjs.com/img/leogistics-logo.jpeg" width="150" valign="middle" /></td><td>
 <a href="https://careers.meetdandy.com/?gh_src=063ba61e3us" target="_blank"><img src="https://nestjs.com/img/dandy-roles-logo.svg" width="150" valign="middle" /></td><td>
 <a href="https://www.castlecraft.in" target="_blank"><img src="https://nestjs.com/img/castlecraft-logo.png" width="150" valign="middle" /></td>
-<td><a href="https://www.tinystacks.com" target="_blank"><img src="https://nestjs.com/img/tinystacks-logo.png#1" width="140" valign="middle" /></td>
-<td><a href="https://n.inc" target="_blank"><img src="https://nestjs.com/img/n-inc-logo.svg" width="120" valign="middle" /></td></tr><tr>
-<td><a href="https://bilberrry.com/" target="_blank"><img src="https://nestjs.com/img/bilberrry-logo.svg" width="180" valign="middle" /></td>
-<td><a href="https://ipinfo.ai/" target="_blank"><img src="https://nestjs.com/img/ipinfo-logo.png" width="130" valign="middle" /></td>
-<td><a href="https://chax.at" target="_blank"><img src="https://nestjs.com/img/chaxat-logo.png" width="100" valign="middle" /></td></tr>
-</table>
+<td><a href="https://www.tinystacks.com" target="_blank"><img src="https://nestjs.com/img/tinystacks-logo.png#1" width="140" valign="middle" /></td></tr></table>
 
 #### Sponsors
 
@@ -103,7 +91,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
 <a href="https://www.swingdev.io" target="_blank"><img src="https://nestjs.com/img/swingdev-logo.svg#1" width="110" valign="middle" /> </a></td><td align="center" valign="middle">
 <a href="https://www.novologic.com/" target="_blank"><img src="https://nestjs.com/img/novologic.png" width="110" valign="middle" /></a> </td><td align="center" valign="middle">
 <a href="https://ever.co/" target="_blank"><img src="https://nestjs.com/img/ever-logo.png" width="72" valign="middle" /></a>  </td><td align="center" valign="middle">
-<a href="https://blokt.com" target="_blank"><img src="https://nestjs.com/img/blokt-logo.png" width="120" valign="middle" /></a>  </td><td align="center" valign="middle">
+<a href="https://blokt.com" target="_blank"><img src="https://nestjs.com/img/blokt-logo.png" width="120" valign="middle" /></a>  </td><td align="center" valign="middle"> 
   <a href="http://architectnow.net/" target="_blank"><img src="https://nestjs.com/img/architectnow.png" width="125" valign="middle" /></a> </td><td align="center" valign="middle">
   <a href="https://quander.io/" target="_blank"><img src="https://nestjs.com/img/quander.png" width="100" valign="middle" /></a> </td></tr><tr><td align="center" valign="middle">
   <a href="https://mantro.net/" target="_blank"><img src="https://nestjs.com/img/mantro-logo.svg" width="95" valign="middle" /></a> </td><td align="center" valign="middle">
@@ -129,14 +117,6 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
 <td align="center" valign="middle"><a href="https://www.naologic.com/" target="_blank"><img src="https://nestjs.com/img/naologic-logo.svg" width="125" valign="middle" /></a></td>
   <td align="center" valign="middle"><a href="https://messaged.com/" target="_blank"><img src="https://nestjs.com/img/messaged-logo.png" width="50" valign="middle" /></a></td>
   <td align="center" valign="middle"><a href="https://triplecore.io" target="_blank"><img src="https://nestjs.com/img/triplecore-logo.svg" width="50" valign="middle" /></a></td>
-   <td align="center" valign="middle"><a href="https://klqc.de" target="_blank"><img src="https://nestjs.com/img/klcqcl-logo.png" width="120" valign="middle" /></a></td>
-   <td align="center" valign="middle"><a href="https://thecasinowizard.com/bonuses/no-deposit-bonuses/" target="_blank"><img src="https://nestjs.com/img/casinowizard-logo.png" width="120" valign="middle" /></a></td></tr><tr>
-     <td align="center" valign="middle"><a href="https://polygon-software.ch/" target="_blank"><img src="https://nestjs.com/img/polygon-logo.svg" width="120" valign="middle" /></a></td>
-   <td align="center" valign="middle"><a href="https://mobilereality.pl/" target="_blank"><img src="https://nestjs.com/img/mobile-reality-logo.png" width="45" valign="middle" /></a></td>
-     <td align="center" valign="middle"><a href="https://boringowl.io/" target="_blank"><img src="https://nestjs.com/img/boringowl-logo.svg" width="120" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://www.mobilefactory.jp/" target="_blank"><img src="https://nestjs.com/img/mobilefactory-logo.png" width="100" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://nordbot.app/" target="_blank"><img src="https://nestjs.com/img/nordbot-logo.png" width="120" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://doppio.sh/" target="_blank"><img src="https://nestjs.com/img/dopiosh-logo.png" width="50" valign="middle" /></a></td>
   </tr></table>
 
 ## Backers
diff --git a/packages/testing/index.ts b/packages/testing/index.ts
index d760d09f7..c68ed76f1 100644
--- a/packages/testing/index.ts
+++ b/packages/testing/index.ts
@@ -1,6 +1,6 @@
 /*
  * Nest @testing
- * Copyright(c) 2017 - 2023 Kamil Mysliwiec
+ * Copyright(c) 2017 - 2021 Kamil Mysliwiec
  * https://nestjs.com
  * MIT Licensed
  */
diff --git a/packages/testing/interfaces/mock-factory.ts b/packages/testing/interfaces/mock-factory.ts
index 0b67435ea..6dc400fb1 100644
--- a/packages/testing/interfaces/mock-factory.ts
+++ b/packages/testing/interfaces/mock-factory.ts
@@ -1,3 +1,3 @@
-import { InjectionToken } from '@nestjs/common';
+import { InstanceToken } from '@nestjs/core/injector/module';
 
-export type MockFactory = (token?: InjectionToken) => any;
+export type MockFactory = (token?: InstanceToken) => any;
diff --git a/packages/testing/interfaces/override-by-factory-options.interface.ts b/packages/testing/interfaces/override-by-factory-options.interface.ts
index a2d58ec91..59a78d657 100644
--- a/packages/testing/interfaces/override-by-factory-options.interface.ts
+++ b/packages/testing/interfaces/override-by-factory-options.interface.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export interface OverrideByFactoryOptions {
   factory: (...args: any[]) => any;
   inject?: any[];
diff --git a/packages/testing/interfaces/override-by.interface.ts b/packages/testing/interfaces/override-by.interface.ts
index fafc82e46..25fc60a95 100644
--- a/packages/testing/interfaces/override-by.interface.ts
+++ b/packages/testing/interfaces/override-by.interface.ts
@@ -1,9 +1,6 @@
 import { TestingModuleBuilder } from '../testing-module.builder';
 import { OverrideByFactoryOptions } from './override-by-factory-options.interface';
 
-/**
- * @publicApi
- */
 export interface OverrideBy {
   useValue: (value: any) => TestingModuleBuilder;
   useFactory: (options: OverrideByFactoryOptions) => TestingModuleBuilder;
diff --git a/packages/testing/package.json b/packages/testing/package.json
index 81c012bb0..bf07363c2 100644
--- a/packages/testing/package.json
+++ b/packages/testing/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/testing",
-  "version": "9.4.0",
+  "version": "8.2.3",
   "description": "Nest - modern, fast, powerful node.js web framework (@testing)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -17,13 +17,14 @@
     "access": "public"
   },
   "dependencies": {
-    "tslib": "2.5.0"
+    "optional": "0.1.4",
+    "tslib": "2.3.1"
   },
   "peerDependencies": {
-    "@nestjs/common": "^9.0.0",
-    "@nestjs/core": "^9.0.0",
-    "@nestjs/microservices": "^9.0.0",
-    "@nestjs/platform-express": "^9.0.0"
+    "@nestjs/common": "^8.0.0",
+    "@nestjs/core": "^8.0.0",
+    "@nestjs/microservices": "^8.0.0",
+    "@nestjs/platform-express": "^8.0.0"
   },
   "peerDependenciesMeta": {
     "@nestjs/microservices": {
diff --git a/packages/testing/services/testing-logger.service.ts b/packages/testing/services/testing-logger.service.ts
index 3e4b89bf8..1e7b44b2a 100644
--- a/packages/testing/services/testing-logger.service.ts
+++ b/packages/testing/services/testing-logger.service.ts
@@ -2,9 +2,6 @@
 /* eslint-disable @typescript-eslint/no-unused-vars */
 import { ConsoleLogger } from '@nestjs/common';
 
-/**
- * @publicApi
- */
 export class TestingLogger extends ConsoleLogger {
   constructor() {
     super('Testing');
diff --git a/packages/testing/testing-injector.ts b/packages/testing/testing-injector.ts
index 4847e4122..417ef295c 100644
--- a/packages/testing/testing-injector.ts
+++ b/packages/testing/testing-injector.ts
@@ -8,9 +8,6 @@ import { InstanceWrapper } from '@nestjs/core/injector/instance-wrapper';
 import { Module } from '@nestjs/core/injector/module';
 import { MockFactory } from './interfaces';
 
-/**
- * @publicApi
- */
 export class TestingInjector extends Injector {
   protected mocker?: MockFactory;
   protected container: NestContainer;
diff --git a/packages/testing/testing-instance-loader.ts b/packages/testing/testing-instance-loader.ts
index 6c4aead48..e11062210 100644
--- a/packages/testing/testing-instance-loader.ts
+++ b/packages/testing/testing-instance-loader.ts
@@ -3,7 +3,9 @@ import { Module } from '@nestjs/core/injector/module';
 import { MockFactory } from './interfaces';
 import { TestingInjector } from './testing-injector';
 
-export class TestingInstanceLoader extends InstanceLoader<TestingInjector> {
+export class TestingInstanceLoader extends InstanceLoader {
+  protected injector = new TestingInjector();
+
   public async createInstancesOfDependencies(
     modules: Map<string, Module> = this.container.getModules(),
     mocker?: MockFactory,
diff --git a/packages/testing/testing-module.builder.ts b/packages/testing/testing-module.builder.ts
index 673d7455d..3389a9361 100644
--- a/packages/testing/testing-module.builder.ts
+++ b/packages/testing/testing-module.builder.ts
@@ -1,40 +1,42 @@
-import { Logger, LoggerService, Module, ModuleMetadata } from '@nestjs/common';
-import { NestApplicationContextOptions } from '@nestjs/common/interfaces/nest-application-context-options.interface';
+import { Logger, LoggerService, Module } from '@nestjs/common';
+import { ModuleMetadata } from '@nestjs/common/interfaces';
 import { ApplicationConfig } from '@nestjs/core/application-config';
 import { NestContainer } from '@nestjs/core/injector/container';
-import { GraphInspector } from '@nestjs/core/inspector/graph-inspector';
-import { NoopGraphInspector } from '@nestjs/core/inspector/noop-graph-inspector';
-import {
-  UuidFactory,
-  UuidFactoryMode,
-} from '@nestjs/core/inspector/uuid-factory';
 import { MetadataScanner } from '@nestjs/core/metadata-scanner';
-import { DependenciesScanner } from '@nestjs/core/scanner';
+import {
+  DependenciesScanner,
+  ModuleToOverride,
+  ModuleDefinition,
+} from '@nestjs/core/scanner';
 import {
   MockFactory,
   OverrideBy,
   OverrideByFactoryOptions,
 } from './interfaces';
 import { TestingLogger } from './services/testing-logger.service';
-import { TestingInjector } from './testing-injector';
 import { TestingInstanceLoader } from './testing-instance-loader';
 import { TestingModule } from './testing-module';
 
-/**
- * @publicApi
- */
 export class TestingModuleBuilder {
   private readonly applicationConfig = new ApplicationConfig();
   private readonly container = new NestContainer(this.applicationConfig);
   private readonly overloadsMap = new Map();
+  private readonly overloadsModuleMap = new Map<
+    ModuleDefinition,
+    ModuleDefinition
+  >();
+  private readonly scanner: DependenciesScanner;
+  private readonly instanceLoader = new TestingInstanceLoader(this.container);
   private readonly module: any;
   private testingLogger: LoggerService;
   private mocker?: MockFactory;
 
-  constructor(
-    private readonly metadataScanner: MetadataScanner,
-    metadata: ModuleMetadata,
-  ) {
+  constructor(metadataScanner: MetadataScanner, metadata: ModuleMetadata) {
+    this.scanner = new DependenciesScanner(
+      this.container,
+      metadataScanner,
+      this.applicationConfig,
+    );
     this.module = this.createModule(metadata);
   }
 
@@ -68,39 +70,30 @@ export class TestingModuleBuilder {
     return this.override(typeOrToken, true);
   }
 
-  public async compile(
-    options: Pick<NestApplicationContextOptions, 'snapshot' | 'preview'> = {},
-  ): Promise<TestingModule> {
-    this.applyLogger();
-
-    let graphInspector: GraphInspector;
-    if (options?.snapshot) {
-      graphInspector = new GraphInspector(this.container);
-      UuidFactory.mode = UuidFactoryMode.Deterministic;
-    } else {
-      graphInspector = NoopGraphInspector;
-      UuidFactory.mode = UuidFactoryMode.Random;
-    }
+  public overrideModule(moduleToOverride: ModuleDefinition): {
+    useModule: (newModule: ModuleDefinition) => TestingModuleBuilder;
+  } {
+    return {
+      useModule: newModule => {
+        this.overloadsModuleMap.set(moduleToOverride, newModule);
+        return this;
+      },
+    };
+  }
 
-    const scanner = new DependenciesScanner(
-      this.container,
-      this.metadataScanner,
-      graphInspector,
-      this.applicationConfig,
-    );
-    await scanner.scan(this.module);
+  public async compile(): Promise<TestingModule> {
+    this.applyLogger();
+    await this.scanner.scan(this.module, this.getModuleOverloads());
 
     this.applyOverloadsMap();
-    await this.createInstancesOfDependencies(graphInspector, options);
-    scanner.applyApplicationProviders();
+    await this.instanceLoader.createInstancesOfDependencies(
+      this.container.getModules(),
+      this.mocker,
+    );
+    this.scanner.applyApplicationProviders();
 
     const root = this.getRootModule();
-    return new TestingModule(
-      this.container,
-      graphInspector,
-      root,
-      this.applicationConfig,
-    );
+    return new TestingModule(this.container, [], root, this.applicationConfig);
   }
 
   private override<T = any>(typeOrToken: T, isProvider: boolean): OverrideBy {
@@ -131,29 +124,20 @@ export class TestingModuleBuilder {
     });
   }
 
+  private getModuleOverloads(): ModuleToOverride[] {
+    return [...this.overloadsModuleMap.entries()].map(
+      ([moduleToReplace, newModule]) => ({
+        moduleToReplace,
+        newModule,
+      }),
+    );
+  }
+
   private getRootModule() {
     const modules = this.container.getModules().values();
     return modules.next().value;
   }
 
-  private async createInstancesOfDependencies(
-    graphInspector: GraphInspector,
-    options: { preview?: boolean },
-  ) {
-    const injector = new TestingInjector({
-      preview: options?.preview ?? false,
-    });
-    const instanceLoader = new TestingInstanceLoader(
-      this.container,
-      injector,
-      graphInspector,
-    );
-    await instanceLoader.createInstancesOfDependencies(
-      this.container.getModules(),
-      this.mocker,
-    );
-  }
-
   private createModule(metadata: ModuleMetadata) {
     class RootTestModule {}
     Module(metadata)(RootTestModule);
diff --git a/packages/testing/testing-module.ts b/packages/testing/testing-module.ts
index 79d2e86c3..d1e15acd6 100644
--- a/packages/testing/testing-module.ts
+++ b/packages/testing/testing-module.ts
@@ -9,7 +9,6 @@ import {
 import { NestMicroserviceOptions } from '@nestjs/common/interfaces/microservices/nest-microservice-options.interface';
 import { NestApplicationContextOptions } from '@nestjs/common/interfaces/nest-application-context-options.interface';
 import { loadPackage } from '@nestjs/common/utils/load-package.util';
-import { isUndefined } from '@nestjs/common/utils/shared.utils';
 import {
   AbstractHttpAdapter,
   NestApplication,
@@ -18,65 +17,31 @@ import {
 import { ApplicationConfig } from '@nestjs/core/application-config';
 import { NestContainer } from '@nestjs/core/injector/container';
 import { Module } from '@nestjs/core/injector/module';
-import { GraphInspector } from '@nestjs/core/inspector/graph-inspector';
 
-/**
- * @publicApi
- */
 export class TestingModule extends NestApplicationContext {
-  protected readonly graphInspector: GraphInspector;
-
   constructor(
     container: NestContainer,
-    graphInspector: GraphInspector,
+    scope: Type<any>[],
     contextModule: Module,
     private readonly applicationConfig: ApplicationConfig,
-    scope: Type<any>[] = [],
   ) {
-    const options = {};
-    super(container, options, contextModule, scope);
-
-    this.graphInspector = graphInspector;
+    super(container, scope, contextModule);
   }
 
-  private isHttpServer(
-    serverOrOptions:
-      | HttpServer
-      | AbstractHttpAdapter
-      | NestApplicationOptions
-      | undefined,
-  ): serverOrOptions is HttpServer | AbstractHttpAdapter {
-    return !!(serverOrOptions && (serverOrOptions as HttpServer).patch);
-  }
-
-  public createNestApplication<T extends INestApplication = INestApplication>(
-    httpAdapter: HttpServer | AbstractHttpAdapter,
-    options?: NestApplicationOptions,
-  ): T;
-  public createNestApplication<T extends INestApplication = INestApplication>(
-    options?: NestApplicationOptions,
-  ): T;
   public createNestApplication<T extends INestApplication = INestApplication>(
-    serverOrOptions:
-      | HttpServer
-      | AbstractHttpAdapter
-      | NestApplicationOptions
-      | undefined,
+    httpAdapter?: HttpServer | AbstractHttpAdapter,
     options?: NestApplicationOptions,
   ): T {
-    const [httpAdapter, appOptions] = this.isHttpServer(serverOrOptions)
-      ? [serverOrOptions, options]
-      : [this.createHttpAdapter(), serverOrOptions];
+    httpAdapter = httpAdapter || this.createHttpAdapter();
 
-    this.applyLogger(appOptions);
+    this.applyLogger(options);
     this.container.setHttpAdapter(httpAdapter);
 
     const instance = new NestApplication(
       this.container,
       httpAdapter,
       this.applicationConfig,
-      this.graphInspector,
-      appOptions,
+      options,
     );
     return this.createAdapterProxy<T>(instance, httpAdapter);
   }
@@ -93,7 +58,6 @@ export class TestingModule extends NestApplicationContext {
     return new NestMicroservice(
       this.container,
       options,
-      this.graphInspector,
       this.applicationConfig,
     );
   }
@@ -108,7 +72,7 @@ export class TestingModule extends NestApplicationContext {
   }
 
   private applyLogger(options: NestApplicationContextOptions | undefined) {
-    if (!options || isUndefined(options.logger)) {
+    if (!options || !options.logger) {
       return;
     }
     Logger.overrideLogger(options.logger);
diff --git a/packages/testing/tsconfig.build.json b/packages/testing/tsconfig.build.json
deleted file mode 100644
index a5a3a6305..000000000
--- a/packages/testing/tsconfig.build.json
+++ /dev/null
@@ -1,32 +0,0 @@
-{
-  "extends": "../tsconfig.build.json",
-  "compilerOptions": {
-    "outDir": ".",
-    "rootDir": ".",
-    "paths": {
-      "@nestjs/common": ["../common"],
-      "@nestjs/common/*": ["../common/*"],
-      "@nestjs/core": ["../core"],
-      "@nestjs/core/*": ["../core/*"],
-      "@nestjs/microservices": ["../microservices"],
-      "@nestjs/microservices/*": ["../microservices/*"],
-      "@nestjs/platform-express": ["../platform-express"],
-      "@nestjs/platform-express/*": ["../platform-express/*"]
-    }
-  },
-  "exclude": ["node_modules", "dist", "test/**/*", "*.spec.ts"],
-  "references": [
-    {
-      "path": "../common/tsconfig.build.json"
-    },
-    {
-      "path": "../core/tsconfig.build.json"
-    },
-    {
-      "path": "../microservices/tsconfig.build.json"
-    },
-    {
-      "path": "../platform-express/tsconfig.build.json"
-    }
-  ]
-}
diff --git a/packages/testing/tsconfig.json b/packages/testing/tsconfig.json
index 2ae9e3c90..b238080a4 100644
--- a/packages/testing/tsconfig.json
+++ b/packages/testing/tsconfig.json
@@ -1,13 +1,7 @@
 {
-  "extends": "../tsconfig.build.json",
+  "extends": "./../tsconfig.base.json",
   "compilerOptions": {
-    "types": ["node"]
+    "baseUrl": "./"
   },
-  "files": [],
-  "include": [],
-  "references": [
-    {
-      "path": "./tsconfig.build.json"
-    }
-  ]
+  "include": ["*.ts", "**/*.ts"]
 }
diff --git a/packages/tsconfig.base.json b/packages/tsconfig.base.json
new file mode 100644
index 000000000..ff837eb4f
--- /dev/null
+++ b/packages/tsconfig.base.json
@@ -0,0 +1,22 @@
+{
+  "compilerOptions": {
+    "module": "commonjs",
+    "declaration": true,
+    "noImplicitAny": false,
+    "skipLibCheck": true,
+    "suppressImplicitAnyIndexErrors": true,
+    "noUnusedLocals": false,
+    "importHelpers": true,
+    "removeComments": false,
+    "noLib": false,
+    "emitDecoratorMetadata": true,
+    "experimentalDecorators": true,
+    "target": "es2017",
+    "sourceMap": false,
+    "allowJs": false,
+    "strict": true,
+    "strictNullChecks": false,
+    "types": ["node"]
+  },
+  "exclude": ["../node_modules", "./**/*.spec.ts"]
+}
diff --git a/packages/tsconfig.json b/packages/tsconfig.json
deleted file mode 100644
index b980bbe84..000000000
--- a/packages/tsconfig.json
+++ /dev/null
@@ -1,32 +0,0 @@
-{
-  "files": [],
-  "references": [
-    {
-      "path": "./common/tsconfig.build.json"
-    },
-    {
-      "path": "./core/tsconfig.build.json"
-    },
-    {
-      "path": "./microservices/tsconfig.build.json"
-    },
-    {
-      "path": "./platform-express/tsconfig.build.json"
-    },
-    {
-      "path": "./platform-fastify/tsconfig.build.json"
-    },
-    {
-      "path": "./platform-socket.io/tsconfig.build.json"
-    },
-    {
-      "path": "./platform-ws/tsconfig.build.json"
-    },
-    {
-      "path": "./testing/tsconfig.build.json"
-    },
-    {
-      "path": "./websockets/tsconfig.build.json"
-    }
-  ]
-}
diff --git a/packages/websockets/CHANGELOG.md b/packages/websockets/CHANGELOG.md
new file mode 100644
index 000000000..125af3005
--- /dev/null
+++ b/packages/websockets/CHANGELOG.md
@@ -0,0 +1,12 @@
+# Change Log
+
+All notable changes to this project will be documented in this file.
+See [Conventional Commits](https://conventionalcommits.org) for commit guidelines.
+
+<a name="8.2.0"></a>
+# [8.2.0](https://github.com/nestjs/nest/compare/v8.1.2...v8.2.0) (2021-11-08)
+
+
+
+
+**Note:** Version bump only for package @nestjs/websockets
diff --git a/packages/websockets/Readme.md b/packages/websockets/Readme.md
index 16f48336d..f288809a9 100644
--- a/packages/websockets/Readme.md
+++ b/packages/websockets/Readme.md
@@ -11,6 +11,7 @@
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/l/@nestjs/core.svg" alt="Package License" /></a>
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/dm/@nestjs/common.svg" alt="NPM Downloads" /></a>
 <a href="https://circleci.com/gh/nestjs/nest" target="_blank"><img src="https://img.shields.io/circleci/build/github/nestjs/nest/master" alt="CircleCI" /></a>
+<a href="https://coveralls.io/github/nestjs/nest?branch=master" target="_blank"><img src="https://coveralls.io/repos/github/nestjs/nest/badge.svg?branch=master#9" alt="Coverage" /></a>
 <a href="https://discord.gg/G7Qnnhy" target="_blank"><img src="https://img.shields.io/badge/discord-online-brightgreen.svg" alt="Discord"/></a>
 <a href="https://opencollective.com/nest#backer" target="_blank"><img src="https://opencollective.com/nest/backers/badge.svg" alt="Backers on Open Collective" /></a>
 <a href="https://opencollective.com/nest#sponsor" target="_blank"><img src="https://opencollective.com/nest/sponsors/badge.svg" alt="Sponsors on Open Collective" /></a>
@@ -36,8 +37,8 @@ Nest is a framework for building efficient, scalable <a href="http://nodejs.org"
 
 * To check out the [guide](https://docs.nestjs.com), visit [docs.nestjs.com](https://docs.nestjs.com). :books:
 * 要查看中文 [指南](readme_zh.md), 请访问 [docs.nestjs.cn](https://docs.nestjs.cn). :books:
-* [가이드](readme_kr.md) 문서는 [docs.nestjs.com](https://docs.nestjs.com)에서 확인하실 수 있습니다. :books:
-* [ガイド](readme_jp.md)は [docs.nestjs.com](https://docs.nestjs.com)でご確認ください。 :books:
+* [가이드](readme_kr.md)를 확인하려면, [docs.nestjs.com](https://docs.nestjs.com)를 방문하세요.:books: 
+* チェックするには [ガイド](readme_jp.md), 詳しくは [docs.nestjs.com](https://docs.nestjs.com). :books: 
 
 ## Questions
 
@@ -53,49 +54,36 @@ With official support, you can get expert help straight from Nest core team. We
 
 ## Support
 
-Nest is an MIT-licensed open source project. It can grow thanks to the sponsors and support from the amazing backers. If you'd like to join them, please [read more here](https://docs.nestjs.com/support).
+Nest is an MIT-licensed open source project. It can grow thanks to the sponsors and support by the amazing backers. If you'd like to join them, please [read more here](https://docs.nestjs.com/support).
 
 #### Principal Sponsors
 <table style="text-align:center;"><tr>
   <td><a href="https://trilon.io" target="_blank"><img src="https://nestjs.com/img/trilon.svg" width="200" valign="middle" /></a></td>
-  <td><a href="https://www.redhat.com" target="_blank"><img src="https://nestjs.com/img/red-hat-logo.svg" width="200" valign="middle" /></a></td>
 <td>
 <a href="https://github.com/Sanofi-IADC" target="_blank"><img src="https://docs.nestjs.com/assets/sponsors/sanofi.png" width="180" valign="middle" /></a></td>
 <td>
 <a href="https://nx.dev" target="_blank"><img src="https://nestjs.com/img/nx-logo.png" height="45" valign="middle" /></a></td>
-    <td>
-<a href="https://valor-software.com/" target="_blank"><img src="https://docs.nestjs.com/assets/sponsors/valor-software.png" width="170" valign="middle" /></a></td><td>
-<a href="https://amplication.com/" target="_blank"><img src="https://nestjs.com/img/amplication-logo.svg" width="190" valign="middle" /></a></td>
 </tr></table>
 
 #### Gold Sponsors
 
 <table style="text-align:center;"><tr><td>
-<a href="https://weld.app/" target="_blank"><img src="https://nestjs.com/img/weld-logo.svg" width="140" valign="middle" /></a></td>
+  <a href="https://careers.labster.com/departments/platform" target="_blank"><img src="https://nestjs.com/img/labster-logo.png" width="170" valign="middle" /></a></td><td>
+<a href="https://weld.app/" target="_blank"><img src="https://nestjs.com/img/weld-logo.svg" width="150" valign="middle" /></a></td>
+  <td>
+<a href="https://valor-software.com/" target="_blank"><img src="https://docs.nestjs.com/assets/sponsors/valor-software.png" width="170" valign="middle" /></a></td>
 <td>
-<a href="https://intrinsic.ventures/" target="_blank"><img src="https://nestjs.com/img/intrinisic-logo.png" width="210" valign="middle" /></a></td>
- <td>
-<a href="https://jetbrains.com/" target="_blank"><img src="https://nestjs.com/img/jetbrains-logo.svg" width="110" valign="middle" /></a></td><td>
-<a href="https://snyk.co/nestjs" target="_blank"><img src="https://nestjs.com/img/snyk-logo-black.png" width="185" valign="middle" /></a></td><td>
-<a href="https://fuseautotech.com/" target="_blank"><img src="https://nestjs.com/img/fuse-logo.svg" width="105" valign="middle" /></a></td>
-<td>
-<a href="https://ridicorp.com/career/" target="_blank"><img src="https://nestjs.com/img/ridi-logo.svg" width="105" valign="middle" /></a></td><td>
-<a href="https://www.movavi.com/imovie-for-windows.html" target="_blank"><img src="https://nestjs.com/img/movavi-logo.svg" width="105" valign="middle" /></a></td></</tr></table>
+<a href="https://intrinsic.ventures/" target="_blank"><img src="https://nestjs.com/img/intrinisic-logo.png" width="210" valign="middle" /></a></td></</tr></table>
 
 #### Silver Sponsors
 
 <table style="text-align:center;"><tr><td>
 <a href="https://neoteric.eu/" target="_blank"><img src="https://nestjs.com/img/neoteric-cut.png" width="120" valign="middle" /></a> </td><td>
   <a href="http://gojob.com" target="_blank"><img src="http://nestjs.com/img/gojob-logo.png" valign="middle" width="100" /></a> </td><td>
-<a href="https://www.myleodsc.com/" target="_blank"><img src="https://nestjs.com/img/myleo-logo.png" width="180" valign="middle" /></td><td>
+<a href="http://www.leogistics.com" target="_blank"><img src="https://nestjs.com/img/leogistics-logo.jpeg" width="150" valign="middle" /></td><td>
 <a href="https://careers.meetdandy.com/?gh_src=063ba61e3us" target="_blank"><img src="https://nestjs.com/img/dandy-roles-logo.svg" width="150" valign="middle" /></td><td>
 <a href="https://www.castlecraft.in" target="_blank"><img src="https://nestjs.com/img/castlecraft-logo.png" width="150" valign="middle" /></td>
-<td><a href="https://www.tinystacks.com" target="_blank"><img src="https://nestjs.com/img/tinystacks-logo.png#1" width="140" valign="middle" /></td>
-<td><a href="https://n.inc" target="_blank"><img src="https://nestjs.com/img/n-inc-logo.svg" width="120" valign="middle" /></td></tr><tr>
-<td><a href="https://bilberrry.com/" target="_blank"><img src="https://nestjs.com/img/bilberrry-logo.svg" width="180" valign="middle" /></td>
-<td><a href="https://ipinfo.ai/" target="_blank"><img src="https://nestjs.com/img/ipinfo-logo.png" width="130" valign="middle" /></td>
-<td><a href="https://chax.at" target="_blank"><img src="https://nestjs.com/img/chaxat-logo.png" width="100" valign="middle" /></td></tr>
-</table>
+<td><a href="https://www.tinystacks.com" target="_blank"><img src="https://nestjs.com/img/tinystacks-logo.png#1" width="140" valign="middle" /></td></tr></table>
 
 #### Sponsors
 
@@ -103,7 +91,7 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
 <a href="https://www.swingdev.io" target="_blank"><img src="https://nestjs.com/img/swingdev-logo.svg#1" width="110" valign="middle" /> </a></td><td align="center" valign="middle">
 <a href="https://www.novologic.com/" target="_blank"><img src="https://nestjs.com/img/novologic.png" width="110" valign="middle" /></a> </td><td align="center" valign="middle">
 <a href="https://ever.co/" target="_blank"><img src="https://nestjs.com/img/ever-logo.png" width="72" valign="middle" /></a>  </td><td align="center" valign="middle">
-<a href="https://blokt.com" target="_blank"><img src="https://nestjs.com/img/blokt-logo.png" width="120" valign="middle" /></a>  </td><td align="center" valign="middle">
+<a href="https://blokt.com" target="_blank"><img src="https://nestjs.com/img/blokt-logo.png" width="120" valign="middle" /></a>  </td><td align="center" valign="middle"> 
   <a href="http://architectnow.net/" target="_blank"><img src="https://nestjs.com/img/architectnow.png" width="125" valign="middle" /></a> </td><td align="center" valign="middle">
   <a href="https://quander.io/" target="_blank"><img src="https://nestjs.com/img/quander.png" width="100" valign="middle" /></a> </td></tr><tr><td align="center" valign="middle">
   <a href="https://mantro.net/" target="_blank"><img src="https://nestjs.com/img/mantro-logo.svg" width="95" valign="middle" /></a> </td><td align="center" valign="middle">
@@ -129,14 +117,6 @@ Nest is an MIT-licensed open source project. It can grow thanks to the sponsors
 <td align="center" valign="middle"><a href="https://www.naologic.com/" target="_blank"><img src="https://nestjs.com/img/naologic-logo.svg" width="125" valign="middle" /></a></td>
   <td align="center" valign="middle"><a href="https://messaged.com/" target="_blank"><img src="https://nestjs.com/img/messaged-logo.png" width="50" valign="middle" /></a></td>
   <td align="center" valign="middle"><a href="https://triplecore.io" target="_blank"><img src="https://nestjs.com/img/triplecore-logo.svg" width="50" valign="middle" /></a></td>
-   <td align="center" valign="middle"><a href="https://klqc.de" target="_blank"><img src="https://nestjs.com/img/klcqcl-logo.png" width="120" valign="middle" /></a></td>
-   <td align="center" valign="middle"><a href="https://thecasinowizard.com/bonuses/no-deposit-bonuses/" target="_blank"><img src="https://nestjs.com/img/casinowizard-logo.png" width="120" valign="middle" /></a></td></tr><tr>
-     <td align="center" valign="middle"><a href="https://polygon-software.ch/" target="_blank"><img src="https://nestjs.com/img/polygon-logo.svg" width="120" valign="middle" /></a></td>
-   <td align="center" valign="middle"><a href="https://mobilereality.pl/" target="_blank"><img src="https://nestjs.com/img/mobile-reality-logo.png" width="45" valign="middle" /></a></td>
-     <td align="center" valign="middle"><a href="https://boringowl.io/" target="_blank"><img src="https://nestjs.com/img/boringowl-logo.svg" width="120" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://www.mobilefactory.jp/" target="_blank"><img src="https://nestjs.com/img/mobilefactory-logo.png" width="100" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://nordbot.app/" target="_blank"><img src="https://nestjs.com/img/nordbot-logo.png" width="120" valign="middle" /></a></td>
- <td align="center" valign="middle"><a href="https://doppio.sh/" target="_blank"><img src="https://nestjs.com/img/dopiosh-logo.png" width="50" valign="middle" /></a></td>
   </tr></table>
 
 ## Backers
diff --git a/packages/websockets/context/exception-filters-context.ts b/packages/websockets/context/exception-filters-context.ts
index 6ec95a1f9..319aedc54 100644
--- a/packages/websockets/context/exception-filters-context.ts
+++ b/packages/websockets/context/exception-filters-context.ts
@@ -4,9 +4,6 @@ import { BaseExceptionFilterContext } from '@nestjs/core/exceptions/base-excepti
 import { NestContainer } from '@nestjs/core/injector/container';
 import { WsExceptionsHandler } from '../exceptions/ws-exceptions-handler';
 
-/**
- * @publicApi
- */
 export class ExceptionFiltersContext extends BaseExceptionFilterContext {
   constructor(container: NestContainer) {
     super(container);
diff --git a/packages/websockets/context/ws-context-creator.ts b/packages/websockets/context/ws-context-creator.ts
index 3dca71f95..ed0819bf8 100644
--- a/packages/websockets/context/ws-context-creator.ts
+++ b/packages/websockets/context/ws-context-creator.ts
@@ -1,5 +1,5 @@
 import {
-  CUSTOM_ROUTE_ARGS_METADATA,
+  CUSTOM_ROUTE_AGRS_METADATA,
   PARAMTYPES_METADATA,
 } from '@nestjs/common/constants';
 import {
@@ -18,11 +18,10 @@ import {
 import { ExecutionContextHost } from '@nestjs/core/helpers/execution-context-host';
 import { HandlerMetadataStorage } from '@nestjs/core/helpers/handler-metadata-storage';
 import { ParamsMetadata } from '@nestjs/core/helpers/interfaces';
-import {
-  InterceptorsConsumer,
-  InterceptorsContextCreator,
-} from '@nestjs/core/interceptors';
-import { PipesConsumer, PipesContextCreator } from '@nestjs/core/pipes';
+import { InterceptorsConsumer } from '@nestjs/core/interceptors/interceptors-consumer';
+import { InterceptorsContextCreator } from '@nestjs/core/interceptors/interceptors-context-creator';
+import { PipesConsumer } from '@nestjs/core/pipes/pipes-consumer';
+import { PipesContextCreator } from '@nestjs/core/pipes/pipes-context-creator';
 import { PARAM_ARGS_METADATA } from '../constants';
 import { WsException } from '../errors/ws-exception';
 import { WsParamsFactory } from '../factories/ws-params-factory';
@@ -211,7 +210,7 @@ export class WsContextCreator {
         this.pipesContextCreator.createConcreteContext(pipesCollection);
       const type = this.contextUtils.mapParamType(key);
 
-      if (key.includes(CUSTOM_ROUTE_ARGS_METADATA)) {
+      if (key.includes(CUSTOM_ROUTE_AGRS_METADATA)) {
         const { factory } = metadata[key];
         const customExtractValue = this.contextUtils.getCustomFactory(
           factory,
diff --git a/packages/websockets/context/ws-proxy.ts b/packages/websockets/context/ws-proxy.ts
index dee999afc..ca1ce3b95 100644
--- a/packages/websockets/context/ws-proxy.ts
+++ b/packages/websockets/context/ws-proxy.ts
@@ -1,5 +1,6 @@
+import { isFunction } from '@nestjs/common/utils/shared.utils';
 import { ExecutionContextHost } from '@nestjs/core/helpers/execution-context-host';
-import { EMPTY, isObservable } from 'rxjs';
+import { empty } from 'rxjs';
 import { catchError } from 'rxjs/operators';
 import { WsExceptionsHandler } from '../exceptions/ws-exceptions-handler';
 
@@ -11,12 +12,12 @@ export class WsProxy {
     return async (...args: unknown[]) => {
       try {
         const result = await targetCallback(...args);
-        return !isObservable(result)
+        return !this.isObservable(result)
           ? result
           : result.pipe(
               catchError(error => {
                 this.handleError(exceptionsHandler, args, error);
-                return EMPTY;
+                return empty();
               }),
             );
       } catch (error) {
@@ -34,4 +35,8 @@ export class WsProxy {
     host.setType('ws');
     exceptionsHandler.handle(error, host);
   }
+
+  isObservable(result: any): boolean {
+    return result && isFunction(result.subscribe);
+  }
 }
diff --git a/packages/websockets/decorators/connected-socket.decorator.ts b/packages/websockets/decorators/connected-socket.decorator.ts
index c21e4f8a1..32bd663c7 100644
--- a/packages/websockets/decorators/connected-socket.decorator.ts
+++ b/packages/websockets/decorators/connected-socket.decorator.ts
@@ -1,9 +1,6 @@
 import { WsParamtype } from '../enums/ws-paramtype.enum';
 import { createWsParamDecorator } from '../utils/param.utils';
 
-/**
- * @publicApi
- */
 export const ConnectedSocket: () => ParameterDecorator = createWsParamDecorator(
   WsParamtype.SOCKET,
 );
diff --git a/packages/websockets/decorators/gateway-server.decorator.ts b/packages/websockets/decorators/gateway-server.decorator.ts
index 3a0832639..a3a21b634 100644
--- a/packages/websockets/decorators/gateway-server.decorator.ts
+++ b/packages/websockets/decorators/gateway-server.decorator.ts
@@ -2,8 +2,6 @@ import { GATEWAY_SERVER_METADATA } from '../constants';
 
 /**
  * Attaches native Web Socket Server to a given property.
- *
- * @publicApi
  */
 export const WebSocketServer = (): PropertyDecorator => {
   return (target: object, propertyKey: string | symbol) => {
diff --git a/packages/websockets/decorators/socket-gateway.decorator.ts b/packages/websockets/decorators/socket-gateway.decorator.ts
index 8fc1c9bae..4361b121d 100644
--- a/packages/websockets/decorators/socket-gateway.decorator.ts
+++ b/packages/websockets/decorators/socket-gateway.decorator.ts
@@ -4,8 +4,6 @@ import { GatewayMetadata } from '../interfaces';
 /**
  * Decorator that marks a class as a Nest gateway that enables real-time, bidirectional
  * and event-based communication between the browser and the server.
- *
- * @publicApi
  */
 export function WebSocketGateway(port?: number): ClassDecorator;
 export function WebSocketGateway<
diff --git a/packages/websockets/decorators/subscribe-message.decorator.ts b/packages/websockets/decorators/subscribe-message.decorator.ts
index 4e3329900..2b22c9376 100644
--- a/packages/websockets/decorators/subscribe-message.decorator.ts
+++ b/packages/websockets/decorators/subscribe-message.decorator.ts
@@ -2,8 +2,6 @@ import { MESSAGE_MAPPING_METADATA, MESSAGE_METADATA } from '../constants';
 
 /**
  * Subscribes to messages that fulfils chosen pattern.
- *
- * @publicApi
  */
 export const SubscribeMessage = <T = string>(message: T): MethodDecorator => {
   return (
diff --git a/packages/websockets/exceptions/base-ws-exception-filter.ts b/packages/websockets/exceptions/base-ws-exception-filter.ts
index bcc48b0a6..5c29d5a03 100644
--- a/packages/websockets/exceptions/base-ws-exception-filter.ts
+++ b/packages/websockets/exceptions/base-ws-exception-filter.ts
@@ -3,9 +3,6 @@ import { isObject } from '@nestjs/common/utils/shared.utils';
 import { MESSAGES } from '@nestjs/core/constants';
 import { WsException } from '../errors/ws-exception';
 
-/**
- * @publicApi
- */
 export class BaseWsExceptionFilter<TError = any>
   implements WsExceptionFilter<TError>
 {
diff --git a/packages/websockets/exceptions/ws-exceptions-handler.ts b/packages/websockets/exceptions/ws-exceptions-handler.ts
index feed7d397..e1b09589d 100644
--- a/packages/websockets/exceptions/ws-exceptions-handler.ts
+++ b/packages/websockets/exceptions/ws-exceptions-handler.ts
@@ -1,14 +1,10 @@
-import { isEmpty } from '@nestjs/common/utils/shared.utils';
 import { ArgumentsHost } from '@nestjs/common';
 import { ExceptionFilterMetadata } from '@nestjs/common/interfaces/exceptions/exception-filter-metadata.interface';
-import { selectExceptionFilterMetadata } from '@nestjs/common/utils/select-exception-filter-metadata.util';
+import { isEmpty } from '@nestjs/common/utils/shared.utils';
 import { InvalidExceptionFilterException } from '@nestjs/core/errors/exceptions/invalid-exception-filter.exception';
 import { WsException } from '../errors/ws-exception';
 import { BaseWsExceptionFilter } from './base-ws-exception-filter';
 
-/**
- * @publicApi
- */
 export class WsExceptionsHandler extends BaseWsExceptionFilter {
   private filters: ExceptionFilterMetadata[] = [];
 
@@ -33,7 +29,14 @@ export class WsExceptionsHandler extends BaseWsExceptionFilter {
   ): boolean {
     if (isEmpty(this.filters)) return false;
 
-    const filter = selectExceptionFilterMetadata(this.filters, exception);
+    const filter = this.filters.find(({ exceptionMetatypes }) => {
+      const hasMetatype =
+        !exceptionMetatypes.length ||
+        exceptionMetatypes.some(
+          ExceptionMetatype => exception instanceof ExceptionMetatype,
+        );
+      return hasMetatype;
+    });
     filter && filter.func(exception, args);
     return !!filter;
   }
diff --git a/packages/websockets/gateway-metadata-explorer.ts b/packages/websockets/gateway-metadata-explorer.ts
index 65a0c4077..dc20cfbe3 100644
--- a/packages/websockets/gateway-metadata-explorer.ts
+++ b/packages/websockets/gateway-metadata-explorer.ts
@@ -19,10 +19,12 @@ export class GatewayMetadataExplorer {
 
   public explore(instance: NestGateway): MessageMappingProperties[] {
     const instancePrototype = Object.getPrototypeOf(instance);
-    return this.metadataScanner
-      .getAllMethodNames(instancePrototype)
-      .map(method => this.exploreMethodMetadata(instancePrototype, method))
-      .filter(metadata => metadata);
+    return this.metadataScanner.scanFromPrototype<
+      NestGateway,
+      MessageMappingProperties
+    >(instance, instancePrototype, method =>
+      this.exploreMethodMetadata(instancePrototype, method),
+    );
   }
 
   public exploreMethodMetadata(
diff --git a/packages/websockets/index.ts b/packages/websockets/index.ts
index bccb398b5..76db23065 100644
--- a/packages/websockets/index.ts
+++ b/packages/websockets/index.ts
@@ -1,6 +1,6 @@
 /*
  * Nest @websockets
- * Copyright(c) 2017 - 2023 Kamil Mysliwiec
+ * Copyright(c) 2017 - 2021 Kamil Mysliwiec
  * https://nestjs.com
  * MIT Licensed
  */
diff --git a/packages/websockets/interfaces/gateway-metadata.interface.ts b/packages/websockets/interfaces/gateway-metadata.interface.ts
index 383287682..1666b321f 100644
--- a/packages/websockets/interfaces/gateway-metadata.interface.ts
+++ b/packages/websockets/interfaces/gateway-metadata.interface.ts
@@ -1,10 +1,9 @@
-import { CorsOptions } from '@nestjs/common/interfaces/external/cors-options.interface';
-
 /**
- * External interface
- * @see https://github.com/socketio/socket.io/blob/master/lib/index.ts 
- * @publicApi
+ * @external https://github.com/socketio/socket.io/blob/master/lib/index.ts
  */
+
+import { CorsOptions } from '@nestjs/common/interfaces/external/cors-options.interface';
+
 export interface GatewayMetadata {
   /**
    * The name of a namespace
@@ -32,27 +31,27 @@ export interface GatewayMetadata {
   parser?: any;
   /**
    * How many ms before a client without namespace is closed
-   * @default 45_000
+   * @default 45000
    */
   connectTimeout?: number;
   /**
    * How many ms without a pong packet to consider the connection closed
-   * @default 20_000
+   * @default 5000
    */
   pingTimeout?: number;
   /**
    * How many ms before sending a new ping packet
-   * @default 25_000
+   * @default 25000
    */
   pingInterval?: number;
   /**
    * How many ms before an uncompleted transport upgrade is cancelled
-   * @default 10_000
+   * @default 10000
    */
   upgradeTimeout?: number;
   /**
    * How many bytes or characters a message can be, before closing the session (to avoid DoS).
-   * @default 1e6 (1 MB)
+   * @default 1e5 (100 KB)
    */
   maxHttpBufferSize?: number;
   /**
@@ -117,7 +116,7 @@ export interface GatewayMetadata {
   destroyUpgrade?: boolean;
   /**
    * Milliseconds after which unhandled requests are ended
-   * @default 1_000
+   * @default 1000
    */
   destroyUpgradeTimeout?: number;
 }
diff --git a/packages/websockets/interfaces/hooks/on-gateway-connection.interface.ts b/packages/websockets/interfaces/hooks/on-gateway-connection.interface.ts
index 7f39dbdcf..b3ca0f51c 100644
--- a/packages/websockets/interfaces/hooks/on-gateway-connection.interface.ts
+++ b/packages/websockets/interfaces/hooks/on-gateway-connection.interface.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export interface OnGatewayConnection<T = any> {
   handleConnection(client: T, ...args: any[]): any;
 }
diff --git a/packages/websockets/interfaces/hooks/on-gateway-disconnect.interface.ts b/packages/websockets/interfaces/hooks/on-gateway-disconnect.interface.ts
index e86e27d8f..f038c2162 100644
--- a/packages/websockets/interfaces/hooks/on-gateway-disconnect.interface.ts
+++ b/packages/websockets/interfaces/hooks/on-gateway-disconnect.interface.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export interface OnGatewayDisconnect<T = any> {
   handleDisconnect(client: T): any;
 }
diff --git a/packages/websockets/interfaces/hooks/on-gateway-init.interface.ts b/packages/websockets/interfaces/hooks/on-gateway-init.interface.ts
index c90f5d8c6..81096e55c 100644
--- a/packages/websockets/interfaces/hooks/on-gateway-init.interface.ts
+++ b/packages/websockets/interfaces/hooks/on-gateway-init.interface.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export interface OnGatewayInit<T = any> {
   afterInit(server: T): any;
 }
diff --git a/packages/websockets/interfaces/nest-gateway.interface.ts b/packages/websockets/interfaces/nest-gateway.interface.ts
index 89472d362..1011bb053 100644
--- a/packages/websockets/interfaces/nest-gateway.interface.ts
+++ b/packages/websockets/interfaces/nest-gateway.interface.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export interface NestGateway {
   afterInit?: (server: any) => void;
   handleConnection?: (...args: any[]) => void;
diff --git a/packages/websockets/interfaces/server-and-event-streams-host.interface.ts b/packages/websockets/interfaces/server-and-event-streams-host.interface.ts
index 5049dc959..4b04a81e5 100644
--- a/packages/websockets/interfaces/server-and-event-streams-host.interface.ts
+++ b/packages/websockets/interfaces/server-and-event-streams-host.interface.ts
@@ -1,8 +1,5 @@
 import { ReplaySubject, Subject } from 'rxjs';
 
-/**
- * @publicApi
- */
 export interface ServerAndEventStreamsHost<T = any> {
   server: T;
   init: ReplaySubject<T>;
diff --git a/packages/websockets/interfaces/web-socket-server.interface.ts b/packages/websockets/interfaces/web-socket-server.interface.ts
index d573038c1..0c0387acf 100644
--- a/packages/websockets/interfaces/web-socket-server.interface.ts
+++ b/packages/websockets/interfaces/web-socket-server.interface.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export interface WebSocketServerOptions {
   port: number;
   namespace: string;
diff --git a/packages/websockets/interfaces/websockets-entrypoint-metadata.interface.ts b/packages/websockets/interfaces/websockets-entrypoint-metadata.interface.ts
deleted file mode 100644
index bd80cd5d2..000000000
--- a/packages/websockets/interfaces/websockets-entrypoint-metadata.interface.ts
+++ /dev/null
@@ -1,4 +0,0 @@
-export type WebsocketEntrypointMetadata = {
-  port: number;
-  message: unknown;
-};
diff --git a/packages/websockets/interfaces/ws-response.interface.ts b/packages/websockets/interfaces/ws-response.interface.ts
index bf04aa48a..04e815cbf 100644
--- a/packages/websockets/interfaces/ws-response.interface.ts
+++ b/packages/websockets/interfaces/ws-response.interface.ts
@@ -1,6 +1,3 @@
-/**
- * @publicApi
- */
 export interface WsResponse<T = any> {
   event: string;
   data: T;
diff --git a/packages/websockets/package.json b/packages/websockets/package.json
index faf4ff219..c1bbcacae 100644
--- a/packages/websockets/package.json
+++ b/packages/websockets/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/websockets",
-  "version": "9.4.0",
+  "version": "8.2.3",
   "description": "Nest - modern, fast, powerful node.js web framework (@websockets)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -13,17 +13,17 @@
   },
   "dependencies": {
     "iterare": "1.2.1",
-    "object-hash": "3.0.0",
-    "tslib": "2.5.0"
+    "object-hash": "2.2.0",
+    "tslib": "2.3.1"
   },
   "devDependencies": {
-    "@nestjs/common": "9.4.0",
-    "@nestjs/core": "9.4.0"
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3"
   },
   "peerDependencies": {
-    "@nestjs/common": "^9.0.0",
-    "@nestjs/core": "^9.0.0",
-    "@nestjs/platform-socket.io": "^9.0.0",
+    "@nestjs/common": "^8.0.0",
+    "@nestjs/core": "^8.0.0",
+    "@nestjs/platform-socket.io": "^8.0.0",
     "reflect-metadata": "^0.1.12",
     "rxjs": "^7.1.0"
   },
diff --git a/packages/websockets/socket-module.ts b/packages/websockets/socket-module.ts
index d22e45067..681cb0a08 100644
--- a/packages/websockets/socket-module.ts
+++ b/packages/websockets/socket-module.ts
@@ -1,13 +1,11 @@
-import { InjectionToken } from '@nestjs/common/interfaces';
 import { Injectable } from '@nestjs/common/interfaces/injectable.interface';
-import { NestApplicationContextOptions } from '@nestjs/common/interfaces/nest-application-context-options.interface';
 import { ApplicationConfig } from '@nestjs/core/application-config';
 import { GuardsConsumer } from '@nestjs/core/guards/guards-consumer';
 import { GuardsContextCreator } from '@nestjs/core/guards/guards-context-creator';
 import { loadAdapter } from '@nestjs/core/helpers/load-adapter';
 import { NestContainer } from '@nestjs/core/injector/container';
 import { InstanceWrapper } from '@nestjs/core/injector/instance-wrapper';
-import { GraphInspector } from '@nestjs/core/inspector/graph-inspector';
+import { InstanceToken } from '@nestjs/core/injector/module';
 import { InterceptorsConsumer } from '@nestjs/core/interceptors/interceptors-consumer';
 import { InterceptorsContextCreator } from '@nestjs/core/interceptors/interceptors-context-creator';
 import { PipesConsumer } from '@nestjs/core/pipes/pipes-consumer';
@@ -23,39 +21,30 @@ import { SocketServerProvider } from './socket-server-provider';
 import { SocketsContainer } from './sockets-container';
 import { WebSocketsController } from './web-sockets-controller';
 
-export class SocketModule<
-  THttpServer = any,
-  TAppOptions extends NestApplicationContextOptions = NestApplicationContextOptions,
-> {
+export class SocketModule<HttpServer = any> {
   private readonly socketsContainer = new SocketsContainer();
   private applicationConfig: ApplicationConfig;
   private webSocketsController: WebSocketsController;
   private isAdapterInitialized: boolean;
-  private httpServer: THttpServer | undefined;
-  private appOptions: TAppOptions;
+  private httpServer: HttpServer | undefined;
 
   public register(
     container: NestContainer,
-    applicationConfig: ApplicationConfig,
-    graphInspector: GraphInspector,
-    appOptions: TAppOptions,
-    httpServer?: THttpServer,
+    config: ApplicationConfig,
+    httpServer?: HttpServer,
   ) {
-    this.applicationConfig = applicationConfig;
-    this.appOptions = appOptions;
+    this.applicationConfig = config;
     this.httpServer = httpServer;
 
     const contextCreator = this.getContextCreator(container);
     const serverProvider = new SocketServerProvider(
       this.socketsContainer,
-      applicationConfig,
+      config,
     );
     this.webSocketsController = new WebSocketsController(
       serverProvider,
-      applicationConfig,
+      config,
       contextCreator,
-      graphInspector,
-      this.appOptions,
     );
     const modules = container.getModules();
     modules.forEach(({ providers }, moduleName: string) =>
@@ -64,7 +53,7 @@ export class SocketModule<
   }
 
   public connectAllGateways(
-    providers: Map<InjectionToken, InstanceWrapper<Injectable>>,
+    providers: Map<InstanceToken, InstanceWrapper<Injectable>>,
     moduleName: string,
   ) {
     iterate(providers.values())
@@ -88,7 +77,6 @@ export class SocketModule<
       instance as NestGateway,
       metatype,
       moduleName,
-      wrapper.id,
     );
   }
 
diff --git a/packages/websockets/tsconfig.build.json b/packages/websockets/tsconfig.build.json
deleted file mode 100644
index 732ca00cb..000000000
--- a/packages/websockets/tsconfig.build.json
+++ /dev/null
@@ -1,22 +0,0 @@
-{
-  "extends": "../tsconfig.build.json",
-  "compilerOptions": {
-    "outDir": ".",
-    "rootDir": ".",
-    "paths": {
-      "@nestjs/common": ["../common"],
-      "@nestjs/common/*": ["../common/*"],
-      "@nestjs/core": ["../core"],
-      "@nestjs/core/*": ["../core/*"]
-    }
-  },
-  "exclude": ["node_modules", "dist", "test/**/*", "*.spec.ts"],
-  "references": [
-    {
-      "path": "../common/tsconfig.build.json"
-    },
-    {
-      "path": "../core/tsconfig.build.json"
-    }
-  ]
-}
diff --git a/packages/websockets/tsconfig.json b/packages/websockets/tsconfig.json
index 2ae9e3c90..b238080a4 100644
--- a/packages/websockets/tsconfig.json
+++ b/packages/websockets/tsconfig.json
@@ -1,13 +1,7 @@
 {
-  "extends": "../tsconfig.build.json",
+  "extends": "./../tsconfig.base.json",
   "compilerOptions": {
-    "types": ["node"]
+    "baseUrl": "./"
   },
-  "files": [],
-  "include": [],
-  "references": [
-    {
-      "path": "./tsconfig.build.json"
-    }
-  ]
+  "include": ["*.ts", "**/*.ts"]
 }
diff --git a/packages/websockets/web-sockets-controller.ts b/packages/websockets/web-sockets-controller.ts
index bb29f373f..75e790c82 100644
--- a/packages/websockets/web-sockets-controller.ts
+++ b/packages/websockets/web-sockets-controller.ts
@@ -1,16 +1,9 @@
-import { NestApplicationContextOptions } from '@nestjs/common/interfaces/nest-application-context-options.interface';
 import { Type } from '@nestjs/common/interfaces/type.interface';
 import { Logger } from '@nestjs/common/services/logger.service';
+import { isFunction } from '@nestjs/common/utils/shared.utils';
 import { ApplicationConfig } from '@nestjs/core/application-config';
-import { GraphInspector } from '@nestjs/core/inspector/graph-inspector';
 import { MetadataScanner } from '@nestjs/core/metadata-scanner';
-import {
-  from as fromPromise,
-  isObservable,
-  Observable,
-  of,
-  Subject,
-} from 'rxjs';
+import { from as fromPromise, Observable, of, Subject } from 'rxjs';
 import { distinctUntilChanged, mergeAll } from 'rxjs/operators';
 import { GATEWAY_OPTIONS, PORT_METADATA } from './constants';
 import { WsContextCreator } from './context/ws-context-creator';
@@ -22,7 +15,6 @@ import {
 import { GatewayMetadata } from './interfaces/gateway-metadata.interface';
 import { NestGateway } from './interfaces/nest-gateway.interface';
 import { ServerAndEventStreamsHost } from './interfaces/server-and-event-streams-host.interface';
-import { WebsocketEntrypointMetadata } from './interfaces/websockets-entrypoint-metadata.interface';
 import { SocketServerProvider } from './socket-server-provider';
 import { compareElementAt } from './utils/compare-element.util';
 
@@ -38,15 +30,12 @@ export class WebSocketsController {
     private readonly socketServerProvider: SocketServerProvider,
     private readonly config: ApplicationConfig,
     private readonly contextCreator: WsContextCreator,
-    private readonly graphInspector: GraphInspector,
-    private readonly appOptions: NestApplicationContextOptions = {},
   ) {}
 
   public connectGatewayToServer(
     instance: NestGateway,
     metatype: Type<unknown> | Function,
     moduleKey: string,
-    instanceWrapperId: string,
   ) {
     const options = Reflect.getMetadata(GATEWAY_OPTIONS, metatype) || {};
     const port = Reflect.getMetadata(PORT_METADATA, metatype) || 0;
@@ -54,13 +43,7 @@ export class WebSocketsController {
     if (!Number.isInteger(port)) {
       throw new InvalidSocketPortException(port, metatype);
     }
-    this.subscribeToServerEvents(
-      instance,
-      options,
-      port,
-      moduleKey,
-      instanceWrapperId,
-    );
+    this.subscribeToServerEvents(instance, options, port, moduleKey);
   }
 
   public subscribeToServerEvents<T extends GatewayMetadata>(
@@ -68,7 +51,6 @@ export class WebSocketsController {
     options: T,
     port: number,
     moduleKey: string,
-    instanceWrapperId: string,
   ) {
     const nativeMessageHandlers = this.metadataExplorer.explore(instance);
     const messageHandlers = nativeMessageHandlers.map(
@@ -83,17 +65,6 @@ export class WebSocketsController {
         ),
       }),
     );
-
-    this.inspectEntrypointDefinitions(
-      instance,
-      port,
-      messageHandlers,
-      instanceWrapperId,
-    );
-
-    if (this.appOptions.preview) {
-      return;
-    }
     const observableServer = this.socketServerProvider.scanForSocketServer<T>(
       options,
       port,
@@ -187,7 +158,7 @@ export class WebSocketsController {
     deferredResult: Promise<any>,
   ): Promise<Observable<any>> {
     const result = await deferredResult;
-    if (isObservable(result)) {
+    if (result && isFunction(result.subscribe)) {
       return result;
     }
     if (result instanceof Promise) {
@@ -196,30 +167,6 @@ export class WebSocketsController {
     return of(result);
   }
 
-  public inspectEntrypointDefinitions(
-    instance: NestGateway,
-    port: number,
-    messageHandlers: MessageMappingProperties[],
-    instanceWrapperId: string,
-  ) {
-    messageHandlers.forEach(handler => {
-      this.graphInspector.insertEntrypointDefinition<WebsocketEntrypointMetadata>(
-        {
-          type: 'websocket',
-          methodName: handler.methodName,
-          className: instance.constructor?.name,
-          classNodeId: instanceWrapperId,
-          metadata: {
-            port,
-            key: handler.message,
-            message: handler.message,
-          },
-        },
-        instanceWrapperId,
-      );
-    });
-  }
-
   private assignServerToProperties<T = any>(
     instance: NestGateway,
     server: object,
diff --git a/readme_jp.md b/readme_jp.md
index ae40a6537..53991a69b 100644
--- a/readme_jp.md
+++ b/readme_jp.md
@@ -37,20 +37,20 @@
 
 <p>Nestは、実用的なアーキテクチャをすぐに構築できることを目的としています。具体的には、テストフレンドリーで、スケーラブルで、疎結合で、運用にやさしいアプリケーションを構築できるようになっています。また、アーキテクチャはAngularにインスパイアされています。</p>
 
-## はじめに
+## 入門
 
 * To check out the [guide](https://docs.nestjs.com), visit [docs.nestjs.com](https://docs.nestjs.com). :books:
 * 要查看中文 [指南](readme_zh.md), 请访问 [docs.nestjs.cn](https://docs.nestjs.cn). :books:
-* [가이드](readme_kr.md) 문서는 [docs.nestjs.com](https://docs.nestjs.com)에서 확인하실 수 있습니다. :books:
-* [ガイド](readme_jp.md)は [docs.nestjs.com](https://docs.nestjs.com)でご確認ください。 :books:
+* [가이드](readme_kr.md)를 확인하려면, [docs.nestjs.com](https://docs.nestjs.com)를 방문하세요.:books: 
+* チェックするには [ガイド](readme_jp.md), 詳しくは [docs.nestjs.com](https://docs.nestjs.com).:books:
 
 ## 質問
 
 質問やサポートについては、公式の[Discordチャンネル](https://discord.gg/G7Qnnhy)を使用してください。また、このリポジトリのissueリストは、バグレポートと機能リクエスト **専用** です。
 
-## イシュー(Issues)
+## 問題(Issues)
 
-issueを作成する前に、必ず[Issue Reporting Checklist](https://github.com/nestjs/nest/blob/master/CONTRIBUTING.md#-submitting-an-issue)をお読みください。ガイドラインに準拠していないissueは、クローズされる場合があります。
+issueを開く前に、必ず[Issue Reporting Checklist](https://github.com/nestjs/nest/blob/master/CONTRIBUTING.md#-submitting-an-issue)をお読みください。ガイドラインに準拠していないissueは、クローズされる場合があります。
 
 ## コンサルティング
 
@@ -60,7 +60,7 @@ issueを作成する前に、必ず[Issue Reporting Checklist](https://github.co
 
 Nestは、MITライセンスのオープンソースプロジェクトです。スポンサーと支援者による素晴らしいサポートによって、その発展を支えられています。参加したい場合は[こちら](https://docs.nestjs.com/support)をご覧ください。
 
-## 連絡先
+## 連絡する
 
 * Author - [Kamil Myśliwiec](https://twitter.com/kammysliwiec)
 * Website - [https://nestjs.com](https://nestjs.com/)
diff --git a/readme_kr.md b/readme_kr.md
index 613880df6..f00e9429e 100644
--- a/readme_kr.md
+++ b/readme_kr.md
@@ -5,7 +5,7 @@
 [circleci-image]: https://img.shields.io/circleci/build/github/nestjs/nest/master?token=abc123def456
 [circleci-url]: https://circleci.com/gh/nestjs/nest
 
-  <p align="center">효율적이고 확장 가능한 서버 사이드 애플리케이션을 위한 혁신적 <a href="http://nodejs.org" target="_blank">Node.js</a> 프레임워크.</p>
+  <p align="center">효율적이고 확장 가능한 서버-사이드 애플리케이션을 위한 혁신적인 <a href="http://nodejs.org" target="_blank">Node.js</a> 프레임워크.</p>
     <p align="center">
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/v/@nestjs/core.svg" alt="NPM Version" /></a>
 <a href="https://www.npmjs.com/~nestjscore" target="_blank"><img src="https://img.shields.io/npm/l/@nestjs/core.svg" alt="Package License" /></a>
@@ -24,40 +24,43 @@
 
 ## 개요
 
-Nest는 효율적이고 확장 가능한 <a href="http://nodejs.org" target="_blank">Node.js</a> 서버 사이드 애플리케이션을 빌드하기 위한 프레임워크입니다. Nest는 모던 Javascript를 사용하고 <a href="http://www.typescriptlang.org" target="_blank">TypeScript</a>로 빌드되었으며(순수 자바스크립트와 호환), OOP(객체 지향 프로그래밍), FP(함수형 프로그래밍), FRP(함수 반응형 프로그래밍)의 요소들이 결합되어 있습니다.
+Nest는 효과적이고, 확장 가능한 <a href="http://nodejs.org" target="_blank">Node.js</a> 서버 사이드 애플리케이션을 빌드하기 위한 프레임워크입니다. Nest는 모던 Javascript를 사용하고, <a href="http://www.typescriptlang.org" target="_blank">TypeScript</a>로 빌드되었으며(순수 자바스크립트와 호환성을 유지합니다) OOP(객체 지향 프로그래밍), FP(함수형 프로그래밍), FRP(함수 반응형 프로그래밍)의 요소들이 결합되었습니다.
 
-<p>Nest는 내부적으로 <a href="https://expressjs.com/" target="_blank">Express</a>를 사용하지만, <a href="https://github.com/fastify/fastify" target="_blank">Fastify</a>와 같은 타 라이브러리들과의 호환성을 광범위하게 제공하며 많은 서드파티 플러그인들을 손쉽게 사용할 수 있게 해줍니다.</p>
+<p>내부적으로 Nest는 <a href="https://expressjs.com/" target="_blank">Express</a>를 사용하지만, 많은 서드파티 플러그인들을 쉽게 사용하게 하는 다양한 라이브러리들과의 호환성을 제공합니다. 예시-<a href="https://github.com/fastify/fastify" target="_blank">Fastify</a></p>
 
 ## 철학
 
-<p>최근 몇 년간 Javascript는 Node.js의 발전에 따라 웹의 프론트엔드와 백엔드에 있어서 "공용어"가 되었습니다. 그리고 프론트엔드에서는 <a href="https://angular.io/" target="_blank">Angular</a>와 <a href="https://github.com/facebook/react" target="_blank">React</a>, <a href="https://github.com/vuejs/vue" target="_blank">Vue</a>와 같이 멋진 프로젝트들이 등장하여 개발자의 생산성을 향상시켰으며, 빠르고 테스트와 확장이 가능한 프론트엔드 애플리케이션을 만들 수 있게 해주었습니다. 하지만 서버 사이드에서는 Node.js를 위한 우수한 라이브러리와 툴이 많은 가운데, 주요 문제를 효과적으로 해결하는 것은 없었습니다. 그 주요 문제란 바로 아키텍처(architecture)입니다.</p>
-<p>Nest는 테스트 친화적이면서 확장이 가능하고 결합이 느슨하며, 유지 관리가 용이한 애플리케이션을 손쉽게 만들 수 있는 애플리케이션 아키텍처 제공을 목표로 합니다. 이 아키텍처는 Angular에서 많은 영감을 받았습니다.</p>
+<p>최근 몇 년간, Node.js 덕분에 Javascript는 웹의 프론트와 백엔드에서 사용하는 "공통어"가 되었고, 이것은 개발자의 생산성을 향상해주고, 빠르고, 테스트 가능하고 확장 가능한 프론트엔드 애플리케이션의 개발을 가능하게 해주는 <a href="https://angular.io/" target="_blank">Angular</a>와 <a href="https://github.com/facebook/react" target="_blank">React</a>, <a href="https://github.com/vuejs/vue" target="_blank">Vue</a> 등의 멋진 프로젝트들이 등장했지만. 이와 반해 서버 사이드 분야에서는 사용자를 도와주는 훌륭한 라이브러리가 다양하게 존재하지만, 이 중 어느 것도 가장 중요한 문제를 효과적으로 해결하지 못했습니다. - 구조(architecture)의 문제.</p>
+<p>Nest는 간편하게 고수준으로 테스트 가능하고, 확장 가능하면서, 내부 의존성이 낮으며(loosely coupled), 애플리케이션을 쉽게 유지할 수 있는 혁신적인 애플리케이션 구조(architecture)를 제공하는 것을 목표로 합니다. Nest 애플리케이션의 구조(architecture)는 Angular로부터 많은 영감을 받았습니다. </p>
 
-## 시작하기
+## 시작하려면
 
 * To check out the [guide](https://docs.nestjs.com), visit [docs.nestjs.com](https://docs.nestjs.com). :books:
 * 要查看中文 [指南](readme_zh.md), 请访问 [docs.nestjs.cn](https://docs.nestjs.cn). :books:
-* [가이드](readme_kr.md) 문서는 [docs.nestjs.com](https://docs.nestjs.com)에서 확인하실 수 있습니다. :books:
-* [ガイド](readme_jp.md)は [docs.nestjs.com](https://docs.nestjs.com)でご確認ください。 :books:
+* [가이드](readme_kr.md)를 확인하려면, [docs.nestjs.com](https://docs.nestjs.com)를 방문하세요.:books: 
+* チェックするには [ガイド](readme_jp.md), 詳しくは [docs.nestjs.com](https://docs.nestjs.com).:books:
 
 ## 질문
 
-질문이 있거나 지원을 받고 싶으실 경우 공식 [디스코드 채널](https://discord.gg/G7Qnnhy)을 이용해주세요.
-이 저장소의 이슈 목록은 버그 리포트와 기능 요청 **전용**으로 사용되고 있습니다.
+질문 사항이 있거나 지원을 받으려면 공식 [디스코드 채널](https://discord.gg/G7Qnnhy)을 이용해주세요.
+이 저장소(repo)의 이슈 목록은 **오직** 버그 리포트와 기능 요청만 가능합니다. 
 
-## 이슈
 
-이슈를 올리기 전에 반드시 [이슈 보고 체크리스트](https://github.com/nestjs/nest/blob/master/CONTRIBUTING.md#-submitting-an-issue)를 확인해주세요. 가이드라인에 맞지 않는 이슈는 바로 클로즈될 수 있습니다.
+## 이슈(Issues)
+
+
+ Issue를 제보하기 전에 [Issue 제보 전 체크리스트](https://github.com/nestjs/nest/blob/master/CONTRIBUTING.md#-submitting-an-issue)를 확인해주세요. 가이드라인에 맞지 않는 이슈들은 즉시 삭제될 수 있습니다.
+
 
 ## 자문
 
-공식 지원을 통해 Nest core 팀의 전문적인 도움을 받을 수 있습니다. 우리는 전담 기술 지원, 마이그레이션 전략, 모범 사례 및 설계에 대한 조언, PR 리뷰, 팀 보강에 대한 도움을 제공합니다. 더 자세한 내용은 [공식 지원 페이지](https://enterprise.nestjs.com)에서 확인해주세요.
+공식적인 지원을 통해, Nest core 팀의 전문적인 도움을 받을 수 있습니다. 우리는 전념적 기술 지원, 이주(migration) 전략, 모범사례에 대한 조언(및 설계 결정), PR 리뷰, 팀 증대(team augment)등을 제공합니다. 더 많은 내용을 보시려면 [지원](https://enterprise.nestjs.com)을 방문해주세요.
 
-## 서포트
+## 지원
 
-Nest는 MIT License 오픈 소스 프로젝트이며, 감사하게도 후원자들과 굉장한 기여자들의 서포트를 통해서 더욱 성장할 수 있습니다. 참여하고 싶으시다면 [서포트 문서](https://docs.nestjs.com/support)를 확인해주세요.
+Nest는 MIT-licensed 오픈 소스 프로젝트입니다. Nest는 후원자와 놀라운 기여자들의 지원으로 성장할 수 있습니다. 참여하고 싶으시다면 [여기](https://docs.nestjs.com/support)를 방문해주세요.
 
-## 연락처
+## Stay in touch
 
 * Author - [Kamil Myśliwiec](https://twitter.com/kammysliwiec)
 * Website - [https://nestjs.com](https://nestjs.com/)
diff --git a/renovate.json b/renovate.json
index 26c1d72d6..a75e902ef 100644
--- a/renovate.json
+++ b/renovate.json
@@ -1,5 +1,7 @@
 {
-  "extends": ["config:base", ":dependencyDashboard"],
+  "extends": [
+    "config:base"
+  ],
   "labels": ["dependencies"],
   "packageRules": [
     {
diff --git a/sample/01-cats-app/package-lock.json b/sample/01-cats-app/package-lock.json
index 641754f8f..704f22905 100644
Binary files a/sample/01-cats-app/package-lock.json and b/sample/01-cats-app/package-lock.json differ
diff --git a/sample/01-cats-app/package.json b/sample/01-cats-app/package.json
index ee1ed2a48..96a42c105 100644
--- a/sample/01-cats-app/package.json
+++ b/sample/01-cats-app/package.json
@@ -19,36 +19,36 @@
     "test:e2e": "jest --config ./e2e/jest-e2e.json"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
-    "class-transformer": "0.5.1",
-    "class-validator": "0.14.0",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/platform-express": "8.2.3",
+    "class-transformer": "0.4.0",
+    "class-validator": "0.13.2",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.5.5"
+    "rimraf": "3.0.2",
+    "rxjs": "7.4.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
     "@types/express": "4.17.13",
-    "@types/jest": "28.1.4",
-    "@types/node": "18.0.3",
-    "@types/supertest": "2.0.12",
-    "jest": "28.1.2",
-    "prettier": "2.7.1",
-    "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
-    "ts-loader": "9.3.1",
-    "ts-node": "10.8.2",
-    "tsconfig-paths": "4.0.0",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.26.0",
-    "typescript": "4.9.5"
+    "@types/jest": "27.0.3",
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-import": "2.25.3",
+    "typescript": "4.3.5"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/01-cats-app/tsconfig.json b/sample/01-cats-app/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/01-cats-app/tsconfig.json
+++ b/sample/01-cats-app/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/02-gateways/e2e/events-gateway/gateway.e2e-spec.ts b/sample/02-gateways/e2e/events-gateway/gateway.e2e-spec.ts
deleted file mode 100644
index 26b9f42ed..000000000
--- a/sample/02-gateways/e2e/events-gateway/gateway.e2e-spec.ts
+++ /dev/null
@@ -1,53 +0,0 @@
-import { INestApplication } from '@nestjs/common';
-import { Test } from '@nestjs/testing';
-import { AppModule } from '../../src/app.module';
-import { io, Socket } from 'socket.io-client';
-
-describe('EventsGateway', () => {
-  let app: INestApplication;
-  let socket: Socket;
-
-  beforeAll(async () => {
-    const moduleRef = await Test.createTestingModule({
-      imports: [AppModule],
-    }).compile();
-
-    app = moduleRef.createNestApplication();
-    await app.listen(3000);
-  });
-
-  beforeEach(() => {
-    socket = io('http://localhost:3000');
-    socket.connect();
-  });
-
-  describe('findAll', () => {
-    it('should receive 3 numbers', done => {
-      let eventCount = 1;
-      socket.emit('events', { test: 'test' });
-      socket.on('events', data => {
-        expect(data).toBe(eventCount);
-        if (++eventCount > 3) {
-          done();
-        }
-      });
-    });
-  });
-
-  describe('identity', () => {
-    it('should return the same number has what was sent', done => {
-      socket.emit('identity', 0, response => {
-        expect(response).toBe(0);
-        done();
-      });
-    });
-  });
-
-  afterEach(() => {
-    socket.disconnect();
-  });
-
-  afterAll(async () => {
-    await app.close();
-  });
-});
diff --git a/sample/02-gateways/e2e/jest-e2e.json b/sample/02-gateways/e2e/jest-e2e.json
deleted file mode 100644
index 72eb5c3c0..000000000
--- a/sample/02-gateways/e2e/jest-e2e.json
+++ /dev/null
@@ -1,14 +0,0 @@
-{
-    "moduleFileExtensions": [
-        "ts",
-        "tsx",
-        "js",
-        "json"
-    ],
-    "transform": {
-        "^.+\\.tsx?$": "ts-jest"
-    },
-    "testRegex": "/e2e/.*\\.(e2e-test|e2e-spec).(ts|tsx|js)$",
-    "collectCoverageFrom" : ["src/**/*.{js,jsx,tsx,ts}", "!**/node_modules/**", "!**/vendor/**"],
-    "coverageReporters": ["json", "lcov"]
-}
\ No newline at end of file
diff --git a/sample/02-gateways/jest.json b/sample/02-gateways/jest.json
deleted file mode 100644
index 591de12b6..000000000
--- a/sample/02-gateways/jest.json
+++ /dev/null
@@ -1,14 +0,0 @@
-{
-  "moduleFileExtensions": [
-        "ts",
-        "tsx",
-        "js",
-        "json"
-    ],
-    "transform": {
-        "^.+\\.tsx?$": "ts-jest"
-    },
-    "testRegex": "/src/.*\\.(test|spec).(ts|tsx|js)$",
-    "collectCoverageFrom" : ["src/**/*.{js,jsx,tsx,ts}", "!**/node_modules/**", "!**/vendor/**"],
-    "coverageReporters": ["json", "lcov"]
-}
\ No newline at end of file
diff --git a/sample/02-gateways/package-lock.json b/sample/02-gateways/package-lock.json
index 365bf5d6a..34a4e35df 100644
Binary files a/sample/02-gateways/package-lock.json and b/sample/02-gateways/package-lock.json differ
diff --git a/sample/02-gateways/package.json b/sample/02-gateways/package.json
index 4e8c9c557..56c2540e5 100644
--- a/sample/02-gateways/package.json
+++ b/sample/02-gateways/package.json
@@ -16,61 +16,44 @@
     "test:watch": "jest --watch",
     "test:cov": "jest --coverage",
     "test:debug": "node --inspect-brk -r tsconfig-paths/register -r ts-node/register node_modules/.bin/jest --runInBand",
-    "test:e2e": "jest --config ./e2e/jest-e2e.json"
+    "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
-    "@nestjs/platform-socket.io": "9.3.12",
-    "@nestjs/websockets": "9.3.12",
-    "@socket.io/redis-adapter": "7.2.0",
-    "class-transformer": "0.5.1",
-    "class-validator": "0.14.0",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/platform-express": "8.2.3",
+    "@nestjs/platform-socket.io": "8.2.3",
+    "@nestjs/websockets": "8.2.3",
+    "class-transformer": "0.4.0",
+    "class-validator": "0.13.2",
+    "redis": "3.1.2",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.5.5",
-    "socket.io": "4.6.1"
+    "rimraf": "3.0.2",
+    "rxjs": "7.4.0",
+    "socket.io-redis": "6.1.1"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@types/socket.io": "3.0.1",
+    "@types/socket.io-redis": "1.0.27",
+    "@types/ws": "7.4.7",
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
     "@types/express": "4.17.13",
-    "@types/jest": "28.1.4",
-    "@types/node": "18.0.3",
-    "@types/supertest": "2.0.12",
-    "@types/ws": "8.5.3",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.26.0",
-    "jest": "28.1.2",
-    "prettier": "2.7.1",
-    "redis": "4.6.5",
-    "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
-    "ts-loader": "9.3.1",
-    "ts-node": "10.8.2",
-    "tsconfig-paths": "4.0.0",
-    "typescript": "4.9.5"
-  },
-  "jest": {
-    "moduleFileExtensions": [
-      "js",
-      "json",
-      "ts"
-    ],
-    "rootDir": "src",
-    "testRegex": ".*\\.spec\\.ts$",
-    "transform": {
-      "^.+\\.(t|j)s$": "ts-jest"
-    },
-    "collectCoverageFrom": [
-      "**/*.(t|j)s"
-    ],
-    "coverageDirectory": "../coverage",
-    "testEnvironment": "node"
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-import": "2.25.3",
+    "typescript": "4.3.5"
   }
 }
diff --git a/sample/02-gateways/src/adapters/redis-io.adapter.ts b/sample/02-gateways/src/adapters/redis-io.adapter.ts
index e8c4467d0..a0f83932a 100644
--- a/sample/02-gateways/src/adapters/redis-io.adapter.ts
+++ b/sample/02-gateways/src/adapters/redis-io.adapter.ts
@@ -1,23 +1,16 @@
 import { IoAdapter } from '@nestjs/platform-socket.io';
+import { RedisClient } from 'redis';
 import { ServerOptions } from 'socket.io';
-import { createAdapter } from '@socket.io/redis-adapter';
-import { createClient } from 'redis';
+import { createAdapter } from 'socket.io-redis';
 
-export class RedisIoAdapter extends IoAdapter {
-  private adapterConstructor: ReturnType<typeof createAdapter>;
-
-  async connectToRedis(): Promise<void> {
-    const pubClient = createClient({ url: `redis://localhost:6379` });
-    const subClient = pubClient.duplicate();
-
-    await Promise.all([pubClient.connect(), subClient.connect()]);
-
-    this.adapterConstructor = createAdapter(pubClient, subClient);
-  }
+const pubClient = new RedisClient({ host: 'localhost', port: 6379 });
+const subClient = pubClient.duplicate();
+const redisAdapter = createAdapter({ pubClient, subClient });
 
+export class RedisIoAdapter extends IoAdapter {
   createIOServer(port: number, options?: ServerOptions): any {
     const server = super.createIOServer(port, options);
-    server.adapter(this.adapterConstructor);
+    server.adapter(redisAdapter);
     return server;
   }
 }
diff --git a/sample/02-gateways/src/main.ts b/sample/02-gateways/src/main.ts
index 02ced27bc..e1e10d969 100644
--- a/sample/02-gateways/src/main.ts
+++ b/sample/02-gateways/src/main.ts
@@ -3,12 +3,6 @@ import { AppModule } from './app.module';
 
 async function bootstrap() {
   const app = await NestFactory.create(AppModule);
-
-  // Uncomment these lines to use the Redis adapter:
-  // const redisIoAdapter = new RedisIoAdapter(app);
-  // await redisIoAdapter.connectToRedis();
-  // app.useWebSocketAdapter(redisIoAdapter);
-
   await app.listen(3000);
   console.log(`Application is running on: ${await app.getUrl()}`);
 }
diff --git a/sample/02-gateways/tsconfig.json b/sample/02-gateways/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/02-gateways/tsconfig.json
+++ b/sample/02-gateways/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/03-microservices/package-lock.json b/sample/03-microservices/package-lock.json
index 5f916f6cd..ed12395cd 100644
Binary files a/sample/03-microservices/package-lock.json and b/sample/03-microservices/package-lock.json differ
diff --git a/sample/03-microservices/package.json b/sample/03-microservices/package.json
index 873bf9a5d..6a3bfe918 100644
--- a/sample/03-microservices/package.json
+++ b/sample/03-microservices/package.json
@@ -19,36 +19,36 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/microservices": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
-    "class-transformer": "0.5.1",
-    "class-validator": "0.14.0",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/microservices": "8.2.3",
+    "@nestjs/platform-express": "8.2.3",
+    "class-transformer": "0.4.0",
+    "class-validator": "0.13.2",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.5.5"
+    "rimraf": "3.0.2",
+    "rxjs": "7.4.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
-    "@types/amqplib": "0.10.1",
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
+    "@types/amqplib": "0.8.2",
     "@types/express": "4.17.13",
-    "@types/node": "18.0.3",
-    "@types/supertest": "2.0.12",
-    "jest": "28.1.2",
-    "prettier": "2.7.1",
-    "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
-    "ts-loader": "9.3.1",
-    "ts-node": "10.8.2",
-    "tsconfig-paths": "4.0.0",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.26.0",
-    "typescript": "4.9.5"
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-import": "2.25.3",
+    "typescript": "4.3.5"
   }
 }
diff --git a/sample/03-microservices/tsconfig.json b/sample/03-microservices/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/03-microservices/tsconfig.json
+++ b/sample/03-microservices/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/04-grpc/package-lock.json b/sample/04-grpc/package-lock.json
index 6cbfff115..45b964a5c 100644
Binary files a/sample/04-grpc/package-lock.json and b/sample/04-grpc/package-lock.json differ
diff --git a/sample/04-grpc/package.json b/sample/04-grpc/package.json
index 8cfe27426..f972d8880 100644
--- a/sample/04-grpc/package.json
+++ b/sample/04-grpc/package.json
@@ -19,36 +19,37 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@grpc/grpc-js": "1.6.7",
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/microservices": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
-    "class-transformer": "0.5.1",
-    "class-validator": "0.14.0",
+    "@grpc/grpc-js": "1.4.4",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/microservices": "8.2.3",
+    "@nestjs/platform-express": "8.2.3",
+    "class-transformer": "0.4.0",
+    "class-validator": "0.13.2",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.5.5"
+    "rimraf": "3.0.2",
+    "rxjs": "7.4.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
     "@types/express": "4.17.13",
-    "@types/node": "18.0.3",
-    "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.26.0",
-    "jest": "28.1.2",
-    "prettier": "2.7.1",
-    "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
-    "ts-loader": "9.3.1",
-    "ts-node": "10.8.2",
-    "tsconfig-paths": "4.0.0",
-    "typescript": "4.9.5"
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "@types/ws": "7.4.7",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-import": "2.25.3",
+    "typescript": "4.3.5"
   }
 }
diff --git a/sample/04-grpc/tsconfig.json b/sample/04-grpc/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/04-grpc/tsconfig.json
+++ b/sample/04-grpc/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/05-sql-typeorm/.gitignore b/sample/05-sql-typeorm/.gitignore
index 44c92371f..b5e5f9755 100644
--- a/sample/05-sql-typeorm/.gitignore
+++ b/sample/05-sql-typeorm/.gitignore
@@ -13,6 +13,7 @@ npm-debug.log
 /quick-start
 
 # tests
+/test
 /coverage
 /.nyc_output
 
diff --git a/sample/05-sql-typeorm/docker-compose.yml b/sample/05-sql-typeorm/docker-compose.yml
index a8b6aadb8..eee25f209 100644
--- a/sample/05-sql-typeorm/docker-compose.yml
+++ b/sample/05-sql-typeorm/docker-compose.yml
@@ -9,11 +9,3 @@ services:
       MYSQL_DATABASE: test
     ports:
       - "3306:3306"
-  db-test:
-    image: mysql:8
-    restart: always
-    environment:
-      MYSQL_ROOT_PASSWORD: root
-      MYSQL_DATABASE: test
-    ports:
-      - "3307:3306"
\ No newline at end of file
diff --git a/sample/05-sql-typeorm/package-lock.json b/sample/05-sql-typeorm/package-lock.json
index 9f90795a7..bd4ed3fad 100644
Binary files a/sample/05-sql-typeorm/package-lock.json and b/sample/05-sql-typeorm/package-lock.json differ
diff --git a/sample/05-sql-typeorm/package.json b/sample/05-sql-typeorm/package.json
index 885ab90e0..f57d0e322 100644
--- a/sample/05-sql-typeorm/package.json
+++ b/sample/05-sql-typeorm/package.json
@@ -19,37 +19,38 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
-    "@nestjs/typeorm": "9.0.1",
-    "mysql2": "3.2.0",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/platform-express": "8.2.3",
+    "@nestjs/typeorm": "8.0.2",
+    "mysql": "2.18.1",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.5.5",
-    "typeorm": "0.3.12"
+    "rimraf": "3.0.2",
+    "rxjs": "7.4.0",
+    "typeorm": "0.2.41"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
     "@types/express": "4.17.13",
-    "@types/jest": "28.1.4",
-    "@types/node": "18.0.3",
-    "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.26.0",
-    "jest": "28.1.2",
-    "prettier": "2.7.1",
-    "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
-    "ts-loader": "9.3.1",
-    "ts-node": "10.8.2",
-    "tsconfig-paths": "4.0.0",
-    "typescript": "4.9.5"
+    "@types/jest": "27.0.3",
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "@types/ws": "7.4.7",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-import": "2.25.3",
+    "typescript": "4.3.5"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/05-sql-typeorm/src/users/users.controller.ts b/sample/05-sql-typeorm/src/users/users.controller.ts
index 4f88099cd..f710be650 100644
--- a/sample/05-sql-typeorm/src/users/users.controller.ts
+++ b/sample/05-sql-typeorm/src/users/users.controller.ts
@@ -1,12 +1,4 @@
-import {
-  Body,
-  Controller,
-  Delete,
-  Get,
-  Param,
-  Post,
-  ParseIntPipe,
-} from '@nestjs/common';
+import { Body, Controller, Delete, Get, Param, Post } from '@nestjs/common';
 import { CreateUserDto } from './dto/create-user.dto';
 import { User } from './user.entity';
 import { UsersService } from './users.service';
@@ -26,7 +18,7 @@ export class UsersController {
   }
 
   @Get(':id')
-  findOne(@Param('id', ParseIntPipe) id: number): Promise<User> {
+  findOne(@Param('id') id: string): Promise<User> {
     return this.usersService.findOne(id);
   }
 
diff --git a/sample/05-sql-typeorm/src/users/users.service.ts b/sample/05-sql-typeorm/src/users/users.service.ts
index ac82eb7e1..12ca83286 100644
--- a/sample/05-sql-typeorm/src/users/users.service.ts
+++ b/sample/05-sql-typeorm/src/users/users.service.ts
@@ -23,8 +23,8 @@ export class UsersService {
     return this.usersRepository.find();
   }
 
-  findOne(id: number): Promise<User> {
-    return this.usersRepository.findOneBy({ id: id });
+  findOne(id: string): Promise<User> {
+    return this.usersRepository.findOne(id);
   }
 
   async remove(id: string): Promise<void> {
diff --git a/sample/05-sql-typeorm/tsconfig.json b/sample/05-sql-typeorm/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/05-sql-typeorm/tsconfig.json
+++ b/sample/05-sql-typeorm/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/06-mongoose/package-lock.json b/sample/06-mongoose/package-lock.json
index 984b5c1fa..760cfb54d 100644
Binary files a/sample/06-mongoose/package-lock.json and b/sample/06-mongoose/package-lock.json differ
diff --git a/sample/06-mongoose/package.json b/sample/06-mongoose/package.json
index 361b025cb..3cc383e9d 100644
--- a/sample/06-mongoose/package.json
+++ b/sample/06-mongoose/package.json
@@ -19,36 +19,39 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/mongoose": "9.2.2",
-    "@nestjs/platform-express": "9.3.12",
-    "mongoose": "6.4.6",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/mongoose": "9.0.1",
+    "@nestjs/platform-express": "8.2.3",
+    "mongoose": "6.0.14",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.5.5"
+    "rimraf": "3.0.2",
+    "rxjs": "7.4.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/cli": "8.1.5",
+    "@types/mongoose": "5.11.96",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
     "@types/express": "4.17.13",
-    "@types/jest": "28.1.4",
-    "@types/node": "18.0.3",
-    "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.26.0",
-    "jest": "28.1.2",
-    "prettier": "2.7.1",
-    "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
-    "ts-loader": "9.3.1",
-    "ts-node": "10.8.2",
-    "tsconfig-paths": "4.0.0",
-    "typescript": "4.9.5"
+    "@types/jest": "27.0.3",
+    "@types/mongoose": "5.11.96",
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "@types/ws": "7.4.7",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-import": "2.25.3",
+    "typescript": "4.3.5"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/06-mongoose/src/cats/cats.controller.ts b/sample/06-mongoose/src/cats/cats.controller.ts
index c9aa1f645..84306fe38 100644
--- a/sample/06-mongoose/src/cats/cats.controller.ts
+++ b/sample/06-mongoose/src/cats/cats.controller.ts
@@ -1,4 +1,4 @@
-import { Body, Controller, Delete, Get, Param, Post } from '@nestjs/common';
+import { Body, Controller, Get, Post } from '@nestjs/common';
 import { CatsService } from './cats.service';
 import { CreateCatDto } from './dto/create-cat.dto';
 import { Cat } from './schemas/cat.schema';
@@ -16,14 +16,4 @@ export class CatsController {
   async findAll(): Promise<Cat[]> {
     return this.catsService.findAll();
   }
-
-  @Get(':id')
-  async findOne(@Param('id') id: string): Promise<Cat> {
-    return this.catsService.findOne(id);
-  }
-
-  @Delete(':id')
-  async delete(@Param('id') id: string) {
-    return this.catsService.delete(id);
-  }
 }
diff --git a/sample/06-mongoose/src/cats/cats.service.ts b/sample/06-mongoose/src/cats/cats.service.ts
index 27020406f..73d44320a 100644
--- a/sample/06-mongoose/src/cats/cats.service.ts
+++ b/sample/06-mongoose/src/cats/cats.service.ts
@@ -2,11 +2,13 @@ import { Injectable } from '@nestjs/common';
 import { InjectModel } from '@nestjs/mongoose';
 import { Model } from 'mongoose';
 import { CreateCatDto } from './dto/create-cat.dto';
-import { Cat } from './schemas/cat.schema';
+import { Cat, CatDocument } from './schemas/cat.schema';
 
 @Injectable()
 export class CatsService {
-  constructor(@InjectModel(Cat.name) private readonly catModel: Model<Cat>) {}
+  constructor(
+    @InjectModel(Cat.name) private readonly catModel: Model<CatDocument>,
+  ) {}
 
   async create(createCatDto: CreateCatDto): Promise<Cat> {
     const createdCat = await this.catModel.create(createCatDto);
@@ -16,15 +18,4 @@ export class CatsService {
   async findAll(): Promise<Cat[]> {
     return this.catModel.find().exec();
   }
-
-  async findOne(id: string): Promise<Cat> {
-    return this.catModel.findOne({ _id: id }).exec();
-  }
-
-  async delete(id: string) {
-    const deletedCat = await this.catModel
-      .findByIdAndRemove({ _id: id })
-      .exec();
-    return deletedCat;
-  }
 }
diff --git a/sample/06-mongoose/src/cats/schemas/cat.schema.ts b/sample/06-mongoose/src/cats/schemas/cat.schema.ts
index ff3500720..2cd7b90af 100644
--- a/sample/06-mongoose/src/cats/schemas/cat.schema.ts
+++ b/sample/06-mongoose/src/cats/schemas/cat.schema.ts
@@ -1,7 +1,7 @@
 import { Prop, Schema, SchemaFactory } from '@nestjs/mongoose';
-import { HydratedDocument } from 'mongoose';
+import { Document } from 'mongoose';
 
-export type CatDocument = HydratedDocument<Cat>;
+export type CatDocument = Cat & Document;
 
 @Schema()
 export class Cat {
diff --git a/sample/06-mongoose/tsconfig.json b/sample/06-mongoose/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/06-mongoose/tsconfig.json
+++ b/sample/06-mongoose/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/07-sequelize/package-lock.json b/sample/07-sequelize/package-lock.json
index 9d3e6f502..0963e940a 100644
Binary files a/sample/07-sequelize/package-lock.json and b/sample/07-sequelize/package-lock.json differ
diff --git a/sample/07-sequelize/package.json b/sample/07-sequelize/package.json
index 138ed58f6..6340d91a5 100644
--- a/sample/07-sequelize/package.json
+++ b/sample/07-sequelize/package.json
@@ -19,39 +19,41 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
-    "@nestjs/sequelize": "9.0.0",
-    "mysql2": "3.2.0",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/platform-express": "8.2.3",
+    "@nestjs/sequelize": "8.0.0",
+    "mysql2": "2.3.3",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.5.5",
-    "sequelize": "6.29.0",
-    "sequelize-typescript": "2.1.5",
-    "typescript": "4.9.5"
+    "rimraf": "3.0.2",
+    "rxjs": "7.4.0",
+    "sequelize": "6.9.0",
+    "sequelize-typescript": "2.1.1",
+    "typescript": "4.3.5"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/cli": "8.1.5",
+    "@types/sequelize": "4.28.10",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
     "@types/express": "4.17.13",
-    "@types/jest": "28.1.4",
-    "@types/node": "18.0.3",
-    "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.26.0",
-    "jest": "28.1.2",
-    "prettier": "2.7.1",
-    "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
-    "ts-loader": "9.3.1",
-    "ts-node": "10.8.2",
-    "tsconfig-paths": "4.0.0",
-    "typescript": "4.9.5"
+    "@types/jest": "27.0.3",
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "@types/ws": "7.4.7",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-import": "2.25.3",
+    "typescript": "4.3.5"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/07-sequelize/src/users/users.service.ts b/sample/07-sequelize/src/users/users.service.ts
index 615252598..ebdb2282e 100644
--- a/sample/07-sequelize/src/users/users.service.ts
+++ b/sample/07-sequelize/src/users/users.service.ts
@@ -11,10 +11,7 @@ export class UsersService {
   ) {}
 
   create(createUserDto: CreateUserDto): Promise<User> {
-    return this.userModel.create({
-      firstName: createUserDto.firstName,
-      lastName: createUserDto.lastName,
-    });
+    return this.userModel.create(createUserDto);
   }
 
   async findAll(): Promise<User[]> {
diff --git a/sample/07-sequelize/tsconfig.json b/sample/07-sequelize/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/07-sequelize/tsconfig.json
+++ b/sample/07-sequelize/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/08-webpack/package-lock.json b/sample/08-webpack/package-lock.json
index a840162e4..b9cbdcf38 100644
Binary files a/sample/08-webpack/package-lock.json and b/sample/08-webpack/package-lock.json differ
diff --git a/sample/08-webpack/package.json b/sample/08-webpack/package.json
index ea33f0a0d..1e376eaa5 100644
--- a/sample/08-webpack/package.json
+++ b/sample/08-webpack/package.json
@@ -8,31 +8,30 @@
     "build:dev": "nest build --watch --webpack --webpackPath webpack-hmr.config.js",
     "start": "node dist/main",
     "lint": "eslint '{src,apps,libs,test}/**/*.ts' --fix",
-    "test": "echo 'No tests implemented yet.'",
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/platform-express": "8.2.3",
     "reflect-metadata": "0.1.13",
-    "rxjs": "7.5.5",
-    "typescript": "4.9.5"
+    "rxjs": "7.4.0",
+    "typescript": "4.3.5"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@types/node": "18.0.3",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.26.0",
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@types/node": "16.11.11",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-import": "2.25.3",
     "start-server-webpack-plugin": "2.2.5",
-    "ts-loader": "9.3.1",
-    "ts-node": "10.8.2",
-    "webpack": "5.76.3",
-    "webpack-cli": "4.10.0",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "webpack": "5.64.4",
+    "webpack-cli": "4.9.1",
     "webpack-node-externals": "3.0.0"
   }
 }
diff --git a/sample/08-webpack/tsconfig.json b/sample/08-webpack/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/08-webpack/tsconfig.json
+++ b/sample/08-webpack/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/09-babel-example/package-lock.json b/sample/09-babel-example/package-lock.json
index 040b41422..5842c0aeb 100644
Binary files a/sample/09-babel-example/package-lock.json and b/sample/09-babel-example/package-lock.json differ
diff --git a/sample/09-babel-example/package.json b/sample/09-babel-example/package.json
index 9ecb4f240..b55012b38 100644
--- a/sample/09-babel-example/package.json
+++ b/sample/09-babel-example/package.json
@@ -13,28 +13,28 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
-    "@nestjs/microservices": "9.3.12",
-    "@nestjs/websockets": "9.3.12",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/platform-express": "8.2.3",
+    "@nestjs/microservices": "8.2.3",
+    "@nestjs/websockets": "8.2.3",
     "reflect-metadata": "0.1.13",
-    "rxjs": "7.5.5"
+    "rxjs": "7.4.0"
   },
   "devDependencies": {
-    "@babel/cli": "7.21.0",
-    "@babel/core": "7.21.3",
-    "@babel/node": "7.20.7",
-    "@babel/plugin-proposal-decorators": "7.21.0",
-    "@babel/plugin-transform-runtime": "7.21.0",
-    "@babel/preset-env": "7.20.2",
-    "@babel/register": "7.21.0",
-    "@babel/runtime": "7.21.0",
-    "@nestjs/testing": "9.3.12",
-    "jest": "28.1.2",
-    "nodemon": "2.0.22",
-    "prettier": "2.7.1",
-    "supertest": "6.2.4"
+    "@babel/cli": "7.16.0",
+    "@babel/core": "7.16.0",
+    "@babel/node": "7.16.0",
+    "@babel/plugin-proposal-decorators": "7.16.4",
+    "@babel/plugin-transform-runtime": "7.16.4",
+    "@babel/preset-env": "7.16.4",
+    "@babel/register": "7.16.0",
+    "@babel/runtime": "7.16.3",
+    "@nestjs/testing": "8.2.3",
+    "jest": "27.3.1",
+    "nodemon": "2.0.15",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/10-fastify/package-lock.json b/sample/10-fastify/package-lock.json
index b8804b6a9..6b7815f34 100644
Binary files a/sample/10-fastify/package-lock.json and b/sample/10-fastify/package-lock.json differ
diff --git a/sample/10-fastify/package.json b/sample/10-fastify/package.json
index 0746b1379..e4f20415b 100644
--- a/sample/10-fastify/package.json
+++ b/sample/10-fastify/package.json
@@ -19,34 +19,35 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-fastify": "9.3.12",
-    "class-transformer": "0.5.1",
-    "class-validator": "0.14.0",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/platform-fastify": "8.2.3",
+    "class-transformer": "0.4.0",
+    "class-validator": "0.13.2",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.5.5"
+    "rimraf": "3.0.2",
+    "rxjs": "7.4.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
     "@types/express": "4.17.13",
-    "@types/node": "18.0.3",
-    "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.26.0",
-    "jest": "28.1.2",
-    "prettier": "2.7.1",
-    "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
-    "ts-loader": "9.3.1",
-    "ts-node": "10.8.2",
-    "tsconfig-paths": "4.0.0",
-    "typescript": "4.9.5"
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "@types/ws": "7.4.7",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-import": "2.25.3",
+    "typescript": "4.3.5"
   }
 }
diff --git a/sample/10-fastify/tsconfig.json b/sample/10-fastify/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/10-fastify/tsconfig.json
+++ b/sample/10-fastify/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/11-swagger/package-lock.json b/sample/11-swagger/package-lock.json
index ac7915151..d888e637c 100644
Binary files a/sample/11-swagger/package-lock.json and b/sample/11-swagger/package-lock.json differ
diff --git a/sample/11-swagger/package.json b/sample/11-swagger/package.json
index e3aaba9a4..e120a4b04 100644
--- a/sample/11-swagger/package.json
+++ b/sample/11-swagger/package.json
@@ -19,35 +19,36 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
-    "@nestjs/swagger": "6.0.1",
-    "class-transformer": "0.5.1",
-    "class-validator": "0.14.0",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/platform-express": "8.2.3",
+    "@nestjs/swagger": "5.1.5",
+    "class-transformer": "0.4.0",
+    "class-validator": "0.13.2",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.5.5"
+    "rimraf": "3.0.2",
+    "rxjs": "7.4.0",
+    "swagger-ui-express": "4.1.6"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
     "@types/express": "4.17.13",
-    "@types/node": "18.0.3",
-    "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.26.0",
-    "jest": "28.1.2",
-    "prettier": "2.7.1",
-    "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
-    "ts-loader": "9.3.1",
-    "ts-node": "10.8.2",
-    "tsconfig-paths": "4.0.0",
-    "typescript": "4.9.5"
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-import": "2.25.3",
+    "typescript": "4.3.5"
   }
 }
diff --git a/sample/11-swagger/tsconfig.json b/sample/11-swagger/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/11-swagger/tsconfig.json
+++ b/sample/11-swagger/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/12-graphql-schema-first/package-lock.json b/sample/12-graphql-schema-first/package-lock.json
index eed73df26..1821ccea4 100644
Binary files a/sample/12-graphql-schema-first/package-lock.json and b/sample/12-graphql-schema-first/package-lock.json differ
diff --git a/sample/12-graphql-schema-first/package.json b/sample/12-graphql-schema-first/package.json
index 03db9cc2d..35776fc46 100644
--- a/sample/12-graphql-schema-first/package.json
+++ b/sample/12-graphql-schema-first/package.json
@@ -19,41 +19,40 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@apollo/server": "4.5.0",
-    "@graphql-tools/utils": "9.2.1",
-    "@nestjs/apollo": "11.0.4",
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/graphql": "11.0.0",
-    "@nestjs/platform-express": "9.3.12",
-    "class-transformer": "0.5.1",
-    "class-validator": "0.14.0",
-    "graphql": "16.6.0",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/graphql": "9.1.2",
+    "@nestjs/platform-express": "8.2.3",
+    "apollo-server": "3.5.0",
+    "apollo-server-express": "3.5.0",
+    "class-transformer": "0.4.0",
+    "class-validator": "0.13.2",
+    "graphql": "15.7.2",
     "graphql-subscriptions": "2.0.0",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.8.0"
+    "rimraf": "3.0.2",
+    "rxjs": "7.4.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.2.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
-    "@types/express": "4.17.17",
-    "@types/node": "18.15.0",
-    "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.35.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.27.5",
-    "jest": "29.5.0",
-    "prettier": "2.8.4",
-    "supertest": "6.3.3",
-    "ts-jest": "29.0.5",
-    "ts-loader": "9.4.2",
-    "ts-morph": "17.0.1",
-    "ts-node": "10.9.1",
-    "tsconfig-paths": "4.1.2",
-    "typescript": "4.9.5"
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
+    "@types/express": "4.17.13",
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-import": "2.25.3",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-morph": "12.2.0",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "typescript": "4.4.2"
   }
 }
diff --git a/sample/12-graphql-schema-first/src/app.module.ts b/sample/12-graphql-schema-first/src/app.module.ts
index c6833d0f6..c3b0f1f25 100644
--- a/sample/12-graphql-schema-first/src/app.module.ts
+++ b/sample/12-graphql-schema-first/src/app.module.ts
@@ -1,16 +1,12 @@
-import { ApolloDriver, ApolloDriverConfig } from '@nestjs/apollo';
 import { Module } from '@nestjs/common';
 import { GraphQLModule } from '@nestjs/graphql';
 import { CatsModule } from './cats/cats.module';
-import { upperDirectiveTransformer } from './common/directives/upper-case.directive';
 
 @Module({
   imports: [
     CatsModule,
-    GraphQLModule.forRoot<ApolloDriverConfig>({
-      driver: ApolloDriver,
+    GraphQLModule.forRoot({
       typePaths: ['./**/*.graphql'],
-      transformSchema: schema => upperDirectiveTransformer(schema, 'upper'),
       installSubscriptionHandlers: true,
     }),
   ],
diff --git a/sample/12-graphql-schema-first/src/common/directives/upper-case.directive.ts b/sample/12-graphql-schema-first/src/common/directives/upper-case.directive.ts
index 52cabe0ef..49341fe8e 100644
--- a/sample/12-graphql-schema-first/src/common/directives/upper-case.directive.ts
+++ b/sample/12-graphql-schema-first/src/common/directives/upper-case.directive.ts
@@ -1,32 +1,15 @@
-import { getDirective, MapperKind, mapSchema } from '@graphql-tools/utils';
-import { defaultFieldResolver, GraphQLSchema } from 'graphql';
+import { SchemaDirectiveVisitor } from '@graphql-tools/utils';
+import { defaultFieldResolver, GraphQLField } from 'graphql';
 
-export function upperDirectiveTransformer(
-  schema: GraphQLSchema,
-  directiveName: string,
-) {
-  return mapSchema(schema, {
-    [MapperKind.OBJECT_FIELD]: fieldConfig => {
-      const upperDirective = getDirective(
-        schema,
-        fieldConfig,
-        directiveName,
-      )?.[0];
-
-      if (upperDirective) {
-        const { resolve = defaultFieldResolver } = fieldConfig;
-
-        // Replace the original resolver with a function that *first* calls
-        // the original resolver, then converts its result to upper case
-        fieldConfig.resolve = async function (source, args, context, info) {
-          const result = await resolve(source, args, context, info);
-          if (typeof result === 'string') {
-            return result.toUpperCase();
-          }
-          return result;
-        };
-        return fieldConfig;
+export class UpperCaseDirective extends SchemaDirectiveVisitor {
+  visitFieldDefinition(field: GraphQLField<any, any>) {
+    const { resolve = defaultFieldResolver } = field;
+    field.resolve = async function (...args) {
+      const result = await resolve.apply(this, args);
+      if (typeof result === 'string') {
+        return result.toUpperCase();
       }
-    },
-  });
+      return result;
+    };
+  }
 }
diff --git a/sample/12-graphql-schema-first/src/common/plugins/logging.plugin.ts b/sample/12-graphql-schema-first/src/common/plugins/logging.plugin.ts
index 77c23a96c..8e48e29cb 100644
--- a/sample/12-graphql-schema-first/src/common/plugins/logging.plugin.ts
+++ b/sample/12-graphql-schema-first/src/common/plugins/logging.plugin.ts
@@ -1,9 +1,12 @@
-import { ApolloServerPlugin, GraphQLRequestListener } from '@apollo/server';
-import { Plugin } from '@nestjs/apollo';
+import { Plugin } from '@nestjs/graphql';
+import {
+  ApolloServerPlugin,
+  GraphQLRequestListener,
+} from 'apollo-server-plugin-base';
 
 @Plugin()
 export class LoggingPlugin implements ApolloServerPlugin {
-  async requestDidStart(): Promise<GraphQLRequestListener<any>> {
+  async requestDidStart(): Promise<GraphQLRequestListener> {
     console.log('Request started');
     return {
       async willSendResponse() {
diff --git a/sample/12-graphql-schema-first/src/graphql.schema.ts b/sample/12-graphql-schema-first/src/graphql.schema.ts
index 47a938f40..d93925312 100644
--- a/sample/12-graphql-schema-first/src/graphql.schema.ts
+++ b/sample/12-graphql-schema-first/src/graphql.schema.ts
@@ -1,3 +1,4 @@
+
 /*
  * -------------------------------------------------------
  * THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
@@ -7,40 +8,36 @@
 /* tslint:disable */
 /* eslint-disable */
 export class CreateCatInput {
-  name?: Nullable<string>;
-  age?: Nullable<number>;
+    name?: Nullable<string>;
+    age?: Nullable<number>;
 }
 
 export abstract class IQuery {
-  abstract cats():
-    | Nullable<Nullable<Cat>[]>
-    | Promise<Nullable<Nullable<Cat>[]>>;
+    abstract cats(): Nullable<Nullable<Cat>[]> | Promise<Nullable<Nullable<Cat>[]>>;
 
-  abstract cat(id: string): Nullable<Cat> | Promise<Nullable<Cat>>;
+    abstract cat(id: string): Nullable<Cat> | Promise<Nullable<Cat>>;
 }
 
 export abstract class IMutation {
-  abstract createCat(
-    createCatInput?: Nullable<CreateCatInput>,
-  ): Nullable<Cat> | Promise<Nullable<Cat>>;
+    abstract createCat(createCatInput?: Nullable<CreateCatInput>): Nullable<Cat> | Promise<Nullable<Cat>>;
 }
 
 export abstract class ISubscription {
-  abstract catCreated(): Nullable<Cat> | Promise<Nullable<Cat>>;
+    abstract catCreated(): Nullable<Cat> | Promise<Nullable<Cat>>;
 }
 
 export class Owner {
-  id: number;
-  name: string;
-  age?: Nullable<number>;
-  cats?: Nullable<Cat[]>;
+    id: number;
+    name: string;
+    age?: Nullable<number>;
+    cats?: Nullable<Cat[]>;
 }
 
 export class Cat {
-  id?: Nullable<number>;
-  name?: Nullable<string>;
-  age?: Nullable<number>;
-  owner?: Nullable<Owner>;
+    id?: Nullable<number>;
+    name?: Nullable<string>;
+    age?: Nullable<number>;
+    owner?: Nullable<Owner>;
 }
 
 type Nullable<T> = T | null;
diff --git a/sample/12-graphql-schema-first/tsconfig.json b/sample/12-graphql-schema-first/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/12-graphql-schema-first/tsconfig.json
+++ b/sample/12-graphql-schema-first/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/13-mongo-typeorm/docker-compose.yml b/sample/13-mongo-typeorm/docker-compose.yml
index e4adc7194..834d04a17 100644
--- a/sample/13-mongo-typeorm/docker-compose.yml
+++ b/sample/13-mongo-typeorm/docker-compose.yml
@@ -2,7 +2,7 @@ version: "3"
 
 services:
   mongodb:
-    image: mongo:6.0
+    image: mongo:5.0
     environment:
       - MONGODB_DATABASE="test"
     ports:
diff --git a/sample/13-mongo-typeorm/package-lock.json b/sample/13-mongo-typeorm/package-lock.json
index 28b93e391..b20c41a43 100644
Binary files a/sample/13-mongo-typeorm/package-lock.json and b/sample/13-mongo-typeorm/package-lock.json differ
diff --git a/sample/13-mongo-typeorm/package.json b/sample/13-mongo-typeorm/package.json
index a5714a958..06dcee60c 100644
--- a/sample/13-mongo-typeorm/package.json
+++ b/sample/13-mongo-typeorm/package.json
@@ -19,37 +19,37 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
-    "@nestjs/typeorm": "9.0.1",
-    "mongodb": "3.6.0",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/platform-express": "8.2.3",
+    "@nestjs/typeorm": "8.0.2",
+    "mongodb": "3.7.3",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.5.5",
-    "typeorm": "0.3.12"
+    "rimraf": "3.0.2",
+    "rxjs": "7.4.0",
+    "typeorm": "0.2.41"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
     "@types/express": "4.17.13",
-    "@types/jest": "28.1.4",
-    "@types/node": "18.0.3",
-    "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.26.0",
-    "jest": "28.1.2",
-    "prettier": "2.7.1",
-    "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
-    "ts-loader": "9.3.1",
-    "ts-node": "10.8.2",
-    "tsconfig-paths": "4.0.0",
-    "typescript": "4.9.5"
+    "@types/jest": "27.0.3",
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-import": "2.25.3",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "typescript": "4.3.5"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/13-mongo-typeorm/src/photo/photo.service.ts b/sample/13-mongo-typeorm/src/photo/photo.service.ts
index 0bca3ddee..31c751b35 100644
--- a/sample/13-mongo-typeorm/src/photo/photo.service.ts
+++ b/sample/13-mongo-typeorm/src/photo/photo.service.ts
@@ -1,13 +1,13 @@
 import { Injectable } from '@nestjs/common';
 import { InjectRepository } from '@nestjs/typeorm';
-import { MongoRepository } from 'typeorm';
+import { Repository } from 'typeorm';
 import { Photo } from './photo.entity';
 
 @Injectable()
 export class PhotoService {
   constructor(
     @InjectRepository(Photo)
-    private readonly photoRepository: MongoRepository<Photo>,
+    private readonly photoRepository: Repository<Photo>,
   ) {}
 
   async findAll(): Promise<Photo[]> {
diff --git a/sample/13-mongo-typeorm/tsconfig.json b/sample/13-mongo-typeorm/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/13-mongo-typeorm/tsconfig.json
+++ b/sample/13-mongo-typeorm/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/14-mongoose-base/package-lock.json b/sample/14-mongoose-base/package-lock.json
index 0f621b706..44e37b5d5 100644
Binary files a/sample/14-mongoose-base/package-lock.json and b/sample/14-mongoose-base/package-lock.json differ
diff --git a/sample/14-mongoose-base/package.json b/sample/14-mongoose-base/package.json
index 8e395ef6b..b11f5637c 100644
--- a/sample/14-mongoose-base/package.json
+++ b/sample/14-mongoose-base/package.json
@@ -19,35 +19,35 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
-    "mongoose": "6.4.6",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/platform-express": "8.2.3",
+    "mongoose": "6.0.14",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.5.5"
+    "rimraf": "3.0.2",
+    "rxjs": "7.4.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
     "@types/express": "4.17.13",
-    "@types/jest": "28.1.4",
-    "@types/node": "18.0.3",
-    "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.26.0",
-    "jest": "28.1.2",
-    "prettier": "2.7.1",
-    "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
-    "ts-loader": "9.3.1",
-    "ts-node": "10.8.2",
-    "tsconfig-paths": "4.0.0",
-    "typescript": "4.9.5"
+    "@types/jest": "27.0.3",
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-import": "2.25.3",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "typescript": "4.3.5"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/14-mongoose-base/tsconfig.json b/sample/14-mongoose-base/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/14-mongoose-base/tsconfig.json
+++ b/sample/14-mongoose-base/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/15-mvc/package-lock.json b/sample/15-mvc/package-lock.json
index e03fca618..a6133ce03 100644
Binary files a/sample/15-mvc/package-lock.json and b/sample/15-mvc/package-lock.json differ
diff --git a/sample/15-mvc/package.json b/sample/15-mvc/package.json
index 92be8e8a3..af5859d7e 100644
--- a/sample/15-mvc/package.json
+++ b/sample/15-mvc/package.json
@@ -19,33 +19,34 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/platform-express": "8.2.3",
     "hbs": "4.2.0",
+    "pug": "3.0.2",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.5.5"
+    "rimraf": "3.0.2",
+    "rxjs": "7.4.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
     "@types/express": "4.17.13",
-    "@types/node": "18.0.3",
-    "@types/supertest": "2.0.12",
-    "jest": "28.1.2",
-    "prettier": "2.7.1",
-    "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
-    "ts-loader": "9.3.1",
-    "ts-node": "10.8.2",
-    "tsconfig-paths": "4.0.0",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.26.0",
-    "typescript": "4.9.5"
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-import": "2.25.3",
+    "typescript": "4.3.5"
   }
 }
diff --git a/sample/15-mvc/tsconfig.json b/sample/15-mvc/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/15-mvc/tsconfig.json
+++ b/sample/15-mvc/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/16-gateways-ws/package-lock.json b/sample/16-gateways-ws/package-lock.json
index bbd22ca3c..95ec101bb 100644
Binary files a/sample/16-gateways-ws/package-lock.json and b/sample/16-gateways-ws/package-lock.json differ
diff --git a/sample/16-gateways-ws/package.json b/sample/16-gateways-ws/package.json
index 5089aed07..0e4a7c0b2 100644
--- a/sample/16-gateways-ws/package.json
+++ b/sample/16-gateways-ws/package.json
@@ -19,38 +19,38 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
-    "@nestjs/platform-ws": "9.3.12",
-    "@nestjs/websockets": "9.3.12",
-    "class-transformer": "0.5.1",
-    "class-validator": "0.14.0",
-    "rimraf": "4.4.1",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/platform-express": "8.2.3",
+    "@nestjs/platform-ws": "8.2.3",
+    "@nestjs/websockets": "8.2.3",
+    "class-transformer": "0.4.0",
+    "class-validator": "0.13.2",
+    "rimraf": "3.0.2",
     "reflect-metadata": "0.1.13",
-    "rxjs": "7.5.5",
-    "ws": "8.8.0"
+    "rxjs": "7.4.0",
+    "ws": "7.5.6"
   },
   "devDependencies": {
-    "@types/ws": "8.5.3",
-    "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@types/ws": "7.4.7",
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
     "@types/express": "4.17.13",
-    "@types/node": "18.0.3",
-    "@types/supertest": "2.0.12",
-    "jest": "28.1.2",
-    "prettier": "2.7.1",
-    "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
-    "ts-loader": "9.3.1",
-    "ts-node": "10.8.2",
-    "tsconfig-paths": "4.0.0",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.26.0",
-    "typescript": "4.9.5"
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-import": "2.25.3",
+    "typescript": "4.3.5"
   }
 }
diff --git a/sample/16-gateways-ws/tsconfig.json b/sample/16-gateways-ws/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/16-gateways-ws/tsconfig.json
+++ b/sample/16-gateways-ws/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/17-mvc-fastify/package-lock.json b/sample/17-mvc-fastify/package-lock.json
index 0ce71c566..ad8b53384 100644
Binary files a/sample/17-mvc-fastify/package-lock.json and b/sample/17-mvc-fastify/package-lock.json differ
diff --git a/sample/17-mvc-fastify/package.json b/sample/17-mvc-fastify/package.json
index bc007d7aa..483c30cf1 100644
--- a/sample/17-mvc-fastify/package.json
+++ b/sample/17-mvc-fastify/package.json
@@ -1,53 +1,56 @@
 {
-    "name": "nest-typescript-starter",
-    "version": "1.0.0",
-    "description": "Nest TypeScript starter repository",
-    "license": "MIT",
-    "scripts": {
-        "prebuild": "rimraf dist",
-        "build": "nest build",
-        "format": "prettier --write \"src/**/*.ts\" \"test/**/*.ts\"",
-        "start": "nest start",
-        "start:dev": "nest start --watch",
-        "start:debug": "nest start --debug --watch",
-        "start:prod": "node dist/main",
-        "lint": "eslint '{src,apps,libs,test}/**/*.ts' --fix",
-        "test": "jest",
-        "test:watch": "jest --watch",
-        "test:cov": "jest --coverage",
-        "test:debug": "node --inspect-brk -r tsconfig-paths/register -r ts-node/register node_modules/.bin/jest --runInBand",
-        "test:e2e": "echo 'No e2e tests implemented yet.'"
-    },
-    "dependencies": {
-        "@nestjs/common": "9.3.12",
-        "@nestjs/core": "9.3.12",
-        "@nestjs/platform-fastify": "9.3.12",
-        "@fastify/static": "6.4.0",
-        "handlebars": "4.7.7",
-        "@fastify/view": "7.4.1",
-        "reflect-metadata": "0.1.13",
-        "rimraf": "4.4.1",
-        "rxjs": "7.5.5"
-    },
-    "devDependencies": {
-        "@nestjs/cli": "9.0.0",
-        "@nestjs/schematics": "9.0.4",
-        "@nestjs/testing": "9.3.12",
-        "@types/express": "4.17.13",
-        "@types/node": "18.0.3",
-        "@types/supertest": "2.0.12",
-        "@typescript-eslint/eslint-plugin": "5.56.0",
-        "@typescript-eslint/parser": "5.56.0",
-        "eslint": "8.19.0",
-        "eslint-config-prettier": "8.8.0",
-        "eslint-plugin-import": "2.26.0",
-        "jest": "28.1.2",
-        "prettier": "2.7.1",
-        "supertest": "6.2.4",
-        "ts-jest": "28.0.8",
-        "ts-loader": "9.3.1",
-        "ts-node": "10.8.2",
-        "tsconfig-paths": "4.0.0",
-        "typescript": "4.9.5"
-    }
+  "name": "nest-typescript-starter",
+  "version": "1.0.0",
+  "description": "Nest TypeScript starter repository",
+  "license": "MIT",
+  "scripts": {
+    "prebuild": "rimraf dist",
+    "build": "nest build",
+    "format": "prettier --write \"src/**/*.ts\" \"test/**/*.ts\"",
+    "start": "nest start",
+    "start:dev": "nest start --watch",
+    "start:debug": "nest start --debug --watch",
+    "start:prod": "node dist/main",
+    "lint": "eslint '{src,apps,libs,test}/**/*.ts' --fix",
+    "test": "jest",
+    "test:watch": "jest --watch",
+    "test:cov": "jest --coverage",
+    "test:debug": "node --inspect-brk -r tsconfig-paths/register -r ts-node/register node_modules/.bin/jest --runInBand",
+    "test:e2e": "echo 'No e2e tests implemented yet.'"
+  },
+  "dependencies": {
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/platform-fastify": "8.2.3",
+    "fastify-static": "4.5.0",
+    "handlebars": "4.7.7",
+    "point-of-view": "4.15.3",
+    "reflect-metadata": "0.1.13",
+    "rimraf": "3.0.2",
+    "rxjs": "7.4.0"
+  },
+  "devDependencies": {
+    "@types/socket.io": "3.0.1",
+    "@types/socket.io-redis": "1.0.27",
+    "@types/ws": "7.4.7",
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
+    "@types/express": "4.17.13",
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-import": "2.25.3",
+    "typescript": "4.3.5"
+  }
 }
diff --git a/sample/17-mvc-fastify/tsconfig.json b/sample/17-mvc-fastify/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/17-mvc-fastify/tsconfig.json
+++ b/sample/17-mvc-fastify/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/18-context/package-lock.json b/sample/18-context/package-lock.json
index 9bd55509f..c6ccd13c7 100644
Binary files a/sample/18-context/package-lock.json and b/sample/18-context/package-lock.json differ
diff --git a/sample/18-context/package.json b/sample/18-context/package.json
index 489a53079..c2f9c168c 100644
--- a/sample/18-context/package.json
+++ b/sample/18-context/package.json
@@ -19,29 +19,29 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.5.5"
+    "rimraf": "3.0.2",
+    "rxjs": "7.4.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@types/node": "18.0.3",
-    "@types/supertest": "2.0.12",
-    "jest": "28.1.2",
-    "prettier": "2.7.1",
-    "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
-    "ts-loader": "9.3.1",
-    "ts-node": "10.8.2",
-    "tsconfig-paths": "4.0.0",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.26.0",
-    "typescript": "4.9.5"
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-import": "2.25.3",
+    "typescript": "4.3.5"
   }
 }
diff --git a/sample/18-context/tsconfig.json b/sample/18-context/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/18-context/tsconfig.json
+++ b/sample/18-context/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/19-auth-jwt/e2e/app/app.e2e-spec.ts b/sample/19-auth-jwt/e2e/app/app.e2e-spec.ts
index 066c288ff..7c07c91cc 100644
--- a/sample/19-auth-jwt/e2e/app/app.e2e-spec.ts
+++ b/sample/19-auth-jwt/e2e/app/app.e2e-spec.ts
@@ -1,6 +1,5 @@
 import { INestApplication } from '@nestjs/common';
 import { Test } from '@nestjs/testing';
-import { expect } from 'chai';
 import * as request from 'supertest';
 import { AppModule } from '../../src/app.module';
 
@@ -20,17 +19,14 @@ describe('E2E JWT Sample', () => {
     const loginReq = await request(app.getHttpServer())
       .post('/auth/login')
       .send({ username: 'john', password: 'changeme' })
-      .expect(200);
+      .expect(201);
 
     const token = loginReq.body.access_token;
     return request(app.getHttpServer())
-      .get('/auth/profile')
+      .get('/profile')
       .set('Authorization', 'Bearer ' + token)
       .expect(200)
-      .expect(({ body }) => {
-        expect(body.sub).to.equal(1);
-        expect(body.username).to.equal('john');
-      });
+      .expect({ userId: 1, username: 'john' });
   });
 
   afterAll(async () => {
diff --git a/sample/19-auth-jwt/package-lock.json b/sample/19-auth-jwt/package-lock.json
index 9850e515b..25b5d0d0d 100644
Binary files a/sample/19-auth-jwt/package-lock.json and b/sample/19-auth-jwt/package-lock.json differ
diff --git a/sample/19-auth-jwt/package.json b/sample/19-auth-jwt/package.json
index 0dfa5a90c..1fd68d6b2 100644
--- a/sample/19-auth-jwt/package.json
+++ b/sample/19-auth-jwt/package.json
@@ -20,36 +20,39 @@
     "test:e2e": "jest --config ./e2e/jest-e2e.json"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/jwt": "10.0.3",
-    "@nestjs/passport": "9.0.3",
-    "@nestjs/platform-express": "9.3.12",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/jwt": "8.0.0",
+    "@nestjs/passport": "8.0.1",
+    "@nestjs/platform-express": "8.2.3",
+    "passport": "0.5.0",
+    "passport-jwt": "4.0.0",
+    "passport-local": "1.0.0",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.5.5"
+    "rimraf": "3.0.2",
+    "rxjs": "7.4.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
     "@types/express": "4.17.13",
-    "@types/jest": "28.1.4",
-    "@types/node": "18.0.3",
-    "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.19.0",
-    "eslint-config-prettier": "8.5.0",
-    "eslint-plugin-import": "2.26.0",
-    "jest": "28.1.2",
-    "prettier": "2.7.1",
-    "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
-    "ts-loader": "9.3.1",
-    "ts-node": "10.8.2",
-    "tsconfig-paths": "4.0.0",
-    "typescript": "4.9.5"
+    "@types/jest": "27.0.3",
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-import": "2.25.3",
+    "typescript": "4.3.5"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/19-auth-jwt/src/app.controller.ts b/sample/19-auth-jwt/src/app.controller.ts
index 24fa19368..4c6b68ca9 100644
--- a/sample/19-auth-jwt/src/app.controller.ts
+++ b/sample/19-auth-jwt/src/app.controller.ts
@@ -1,4 +1,21 @@
-import { Controller } from '@nestjs/common';
+import { Controller, Get, Post, Request, UseGuards } from '@nestjs/common';
+import { AuthService } from './auth/auth.service';
+import { JwtAuthGuard } from './auth/guards/jwt-auth.guard';
+import { LocalAuthGuard } from './auth/guards/local-auth.guard';
 
 @Controller()
-export class AppController {}
+export class AppController {
+  constructor(private readonly authService: AuthService) {}
+
+  @UseGuards(LocalAuthGuard)
+  @Post('auth/login')
+  async login(@Request() req) {
+    return this.authService.login(req.user);
+  }
+
+  @UseGuards(JwtAuthGuard)
+  @Get('profile')
+  getProfile(@Request() req) {
+    return req.user;
+  }
+}
diff --git a/sample/19-auth-jwt/src/auth/auth.controller.ts b/sample/19-auth-jwt/src/auth/auth.controller.ts
deleted file mode 100644
index 8e7b51642..000000000
--- a/sample/19-auth-jwt/src/auth/auth.controller.ts
+++ /dev/null
@@ -1,28 +0,0 @@
-import {
-  Body,
-  Controller,
-  Get,
-  HttpCode,
-  HttpStatus,
-  Post,
-  Request,
-} from '@nestjs/common';
-import { AuthService } from './auth.service';
-import { Public } from './decorators/public.decorator';
-
-@Controller('auth')
-export class AuthController {
-  constructor(private authService: AuthService) {}
-
-  @Public()
-  @HttpCode(HttpStatus.OK)
-  @Post('login')
-  signIn(@Body() signInDto: Record<string, any>) {
-    return this.authService.signIn(signInDto.username, signInDto.password);
-  }
-
-  @Get('profile')
-  getProfile(@Request() req) {
-    return req.user;
-  }
-}
diff --git a/sample/19-auth-jwt/src/auth/auth.guard.ts b/sample/19-auth-jwt/src/auth/auth.guard.ts
deleted file mode 100644
index 2fd63a07a..000000000
--- a/sample/19-auth-jwt/src/auth/auth.guard.ts
+++ /dev/null
@@ -1,49 +0,0 @@
-import {
-  CanActivate,
-  ExecutionContext,
-  Injectable,
-  UnauthorizedException,
-} from '@nestjs/common';
-import { Reflector } from '@nestjs/core';
-import { JwtService } from '@nestjs/jwt';
-import { Request } from 'express';
-import { jwtConstants } from './constants';
-import { IS_PUBLIC_KEY } from './decorators/public.decorator';
-
-@Injectable()
-export class AuthGuard implements CanActivate {
-  constructor(private jwtService: JwtService, private reflector: Reflector) {}
-
-  async canActivate(context: ExecutionContext): Promise<boolean> {
-    const isPublic = this.reflector.getAllAndOverride<boolean>(IS_PUBLIC_KEY, [
-      context.getHandler(),
-      context.getClass(),
-    ]);
-    if (isPublic) {
-      // 💡 See this condition
-      return true;
-    }
-
-    const request = context.switchToHttp().getRequest();
-    const token = this.extractTokenFromHeader(request);
-    if (!token) {
-      throw new UnauthorizedException();
-    }
-    try {
-      const payload = await this.jwtService.verifyAsync(token, {
-        secret: jwtConstants.secret,
-      });
-      // 💡 We're assigning the payload to the request object here
-      // so that we can access it in our route handlers
-      request['user'] = payload;
-    } catch {
-      throw new UnauthorizedException();
-    }
-    return true;
-  }
-
-  private extractTokenFromHeader(request: Request): string | undefined {
-    const [type, token] = request.headers.authorization?.split(' ') ?? [];
-    return type === 'Bearer' ? token : undefined;
-  }
-}
diff --git a/sample/19-auth-jwt/src/auth/auth.module.ts b/sample/19-auth-jwt/src/auth/auth.module.ts
index 9361229eb..7e853d5b7 100644
--- a/sample/19-auth-jwt/src/auth/auth.module.ts
+++ b/sample/19-auth-jwt/src/auth/auth.module.ts
@@ -1,29 +1,22 @@
 import { Module } from '@nestjs/common';
-import { APP_GUARD } from '@nestjs/core';
 import { JwtModule } from '@nestjs/jwt';
+import { PassportModule } from '@nestjs/passport';
 import { UsersModule } from '../users/users.module';
-import { AuthController } from './auth.controller';
-import { AuthGuard } from './auth.guard';
 import { AuthService } from './auth.service';
 import { jwtConstants } from './constants';
+import { JwtStrategy } from './strategies/jwt.strategy';
+import { LocalStrategy } from './strategies/local.strategy';
 
 @Module({
   imports: [
     UsersModule,
+    PassportModule,
     JwtModule.register({
-      global: true,
       secret: jwtConstants.secret,
       signOptions: { expiresIn: '60s' },
     }),
   ],
-  providers: [
-    AuthService,
-    {
-      provide: APP_GUARD,
-      useClass: AuthGuard,
-    },
-  ],
-  controllers: [AuthController],
+  providers: [AuthService, LocalStrategy, JwtStrategy],
   exports: [AuthService],
 })
 export class AuthModule {}
diff --git a/sample/19-auth-jwt/src/auth/auth.service.ts b/sample/19-auth-jwt/src/auth/auth.service.ts
index 6321d1c3e..c477d52b2 100644
--- a/sample/19-auth-jwt/src/auth/auth.service.ts
+++ b/sample/19-auth-jwt/src/auth/auth.service.ts
@@ -1,22 +1,27 @@
-import { Injectable, UnauthorizedException } from '@nestjs/common';
-import { JwtService } from '@nestjs/jwt';
+import { Injectable } from '@nestjs/common';
 import { UsersService } from '../users/users.service';
+import { JwtService } from '@nestjs/jwt';
 
 @Injectable()
 export class AuthService {
   constructor(
-    private usersService: UsersService,
-    private jwtService: JwtService,
+    private readonly usersService: UsersService,
+    private readonly jwtService: JwtService,
   ) {}
 
-  async signIn(username, pass) {
+  async validateUser(username: string, pass: string): Promise<any> {
     const user = await this.usersService.findOne(username);
-    if (user?.password !== pass) {
-      throw new UnauthorizedException();
+    if (user && user.password === pass) {
+      const { password, ...result } = user;
+      return result;
     }
+    return null;
+  }
+
+  async login(user: any) {
     const payload = { username: user.username, sub: user.userId };
     return {
-      access_token: await this.jwtService.signAsync(payload),
+      access_token: this.jwtService.sign(payload),
     };
   }
 }
diff --git a/sample/19-auth-jwt/src/auth/constants.ts b/sample/19-auth-jwt/src/auth/constants.ts
index 9e8c4061f..8b22f8b64 100644
--- a/sample/19-auth-jwt/src/auth/constants.ts
+++ b/sample/19-auth-jwt/src/auth/constants.ts
@@ -1,4 +1,3 @@
 export const jwtConstants = {
-  secret:
-    'DO NOT USE THIS VALUE. INSTEAD, CREATE A COMPLEX SECRET AND KEEP IT SAFE OUTSIDE OF THE SOURCE CODE.',
+  secret: 'secretKey',
 };
diff --git a/sample/19-auth-jwt/src/auth/decorators/public.decorator.ts b/sample/19-auth-jwt/src/auth/decorators/public.decorator.ts
deleted file mode 100644
index b3845e122..000000000
--- a/sample/19-auth-jwt/src/auth/decorators/public.decorator.ts
+++ /dev/null
@@ -1,4 +0,0 @@
-import { SetMetadata } from '@nestjs/common';
-
-export const IS_PUBLIC_KEY = 'isPublic';
-export const Public = () => SetMetadata(IS_PUBLIC_KEY, true);
diff --git a/sample/19-auth-jwt/src/auth/guards/jwt-auth.guard.ts b/sample/19-auth-jwt/src/auth/guards/jwt-auth.guard.ts
new file mode 100644
index 000000000..2155290ed
--- /dev/null
+++ b/sample/19-auth-jwt/src/auth/guards/jwt-auth.guard.ts
@@ -0,0 +1,5 @@
+import { Injectable } from '@nestjs/common';
+import { AuthGuard } from '@nestjs/passport';
+
+@Injectable()
+export class JwtAuthGuard extends AuthGuard('jwt') {}
diff --git a/sample/19-auth-jwt/src/auth/guards/local-auth.guard.ts b/sample/19-auth-jwt/src/auth/guards/local-auth.guard.ts
new file mode 100644
index 000000000..ccf962b67
--- /dev/null
+++ b/sample/19-auth-jwt/src/auth/guards/local-auth.guard.ts
@@ -0,0 +1,5 @@
+import { Injectable } from '@nestjs/common';
+import { AuthGuard } from '@nestjs/passport';
+
+@Injectable()
+export class LocalAuthGuard extends AuthGuard('local') {}
diff --git a/sample/19-auth-jwt/src/auth/strategies/jwt.strategy.ts b/sample/19-auth-jwt/src/auth/strategies/jwt.strategy.ts
new file mode 100644
index 000000000..08524da5a
--- /dev/null
+++ b/sample/19-auth-jwt/src/auth/strategies/jwt.strategy.ts
@@ -0,0 +1,19 @@
+import { Injectable } from '@nestjs/common';
+import { PassportStrategy } from '@nestjs/passport';
+import { ExtractJwt, Strategy } from 'passport-jwt';
+import { jwtConstants } from '../constants';
+
+@Injectable()
+export class JwtStrategy extends PassportStrategy(Strategy) {
+  constructor() {
+    super({
+      jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),
+      ignoreExpiration: false,
+      secretOrKey: jwtConstants.secret,
+    });
+  }
+
+  async validate(payload: any) {
+    return { userId: payload.sub, username: payload.username };
+  }
+}
diff --git a/sample/19-auth-jwt/src/auth/strategies/local.strategy.ts b/sample/19-auth-jwt/src/auth/strategies/local.strategy.ts
new file mode 100644
index 000000000..79f85280f
--- /dev/null
+++ b/sample/19-auth-jwt/src/auth/strategies/local.strategy.ts
@@ -0,0 +1,19 @@
+import { Injectable, UnauthorizedException } from '@nestjs/common';
+import { PassportStrategy } from '@nestjs/passport';
+import { Strategy } from 'passport-local';
+import { AuthService } from '../auth.service';
+
+@Injectable()
+export class LocalStrategy extends PassportStrategy(Strategy) {
+  constructor(private readonly authService: AuthService) {
+    super();
+  }
+
+  async validate(username: string, password: string): Promise<any> {
+    const user = await this.authService.validateUser(username, password);
+    if (!user) {
+      throw new UnauthorizedException();
+    }
+    return user;
+  }
+}
diff --git a/sample/19-auth-jwt/src/users/users.service.ts b/sample/19-auth-jwt/src/users/users.service.ts
index 47e5cde7b..f24f26b30 100644
--- a/sample/19-auth-jwt/src/users/users.service.ts
+++ b/sample/19-auth-jwt/src/users/users.service.ts
@@ -1,22 +1,30 @@
 import { Injectable } from '@nestjs/common';
 
-// This should be a real class/interface representing a user entity
 export type User = any;
 
 @Injectable()
 export class UsersService {
-  private readonly users = [
-    {
-      userId: 1,
-      username: 'john',
-      password: 'changeme',
-    },
-    {
-      userId: 2,
-      username: 'maria',
-      password: 'guess',
-    },
-  ];
+  private readonly users: User[];
+
+  constructor() {
+    this.users = [
+      {
+        userId: 1,
+        username: 'john',
+        password: 'changeme',
+      },
+      {
+        userId: 2,
+        username: 'chris',
+        password: 'secret',
+      },
+      {
+        userId: 3,
+        username: 'maria',
+        password: 'guess',
+      },
+    ];
+  }
 
   async findOne(username: string): Promise<User | undefined> {
     return this.users.find(user => user.username === username);
diff --git a/sample/19-auth-jwt/tsconfig.json b/sample/19-auth-jwt/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/19-auth-jwt/tsconfig.json
+++ b/sample/19-auth-jwt/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/20-cache/package-lock.json b/sample/20-cache/package-lock.json
index 1d13a94a7..b272da17c 100644
Binary files a/sample/20-cache/package-lock.json and b/sample/20-cache/package-lock.json differ
diff --git a/sample/20-cache/package.json b/sample/20-cache/package.json
index 392d9c6f8..b5d3fd84d 100644
--- a/sample/20-cache/package.json
+++ b/sample/20-cache/package.json
@@ -19,36 +19,34 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/cache-manager": "1.0.0",
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
-    "cache-manager": "^4.1.0",
-    "class-transformer": "0.5.1",
-    "class-validator": "0.14.0",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/platform-express": "8.2.3",
+    "cache-manager-redis-store": "2.0.0",
+    "class-transformer": "0.4.0",
+    "class-validator": "0.13.2",
     "reflect-metadata": "0.1.13",
-    "rxjs": "7.5.5"
+    "rxjs": "7.4.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
-    "@types/cache-manager": "^4.0.1",
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
     "@types/express": "4.17.13",
-    "@types/node": "18.0.3",
-    "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.26.0",
-    "jest": "28.1.2",
-    "prettier": "2.7.1",
-    "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
-    "ts-loader": "9.3.1",
-    "ts-node": "10.8.2",
-    "tsconfig-paths": "4.0.0",
-    "typescript": "4.9.5"
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-import": "2.25.3",
+    "typescript": "4.3.5"
   }
 }
diff --git a/sample/20-cache/src/app.controller.ts b/sample/20-cache/src/app.controller.ts
index 19a3b181f..d2ba94e99 100644
--- a/sample/20-cache/src/app.controller.ts
+++ b/sample/20-cache/src/app.controller.ts
@@ -1,5 +1,9 @@
-import { CacheInterceptor } from '@nestjs/cache-manager';
-import { Controller, Get, UseInterceptors } from '@nestjs/common';
+import {
+  CacheInterceptor,
+  Controller,
+  Get,
+  UseInterceptors,
+} from '@nestjs/common';
 
 @Controller()
 @UseInterceptors(CacheInterceptor)
diff --git a/sample/20-cache/src/app.module.ts b/sample/20-cache/src/app.module.ts
index 310d05226..a85f2b5fb 100644
--- a/sample/20-cache/src/app.module.ts
+++ b/sample/20-cache/src/app.module.ts
@@ -1,5 +1,4 @@
-import { CacheModule } from '@nestjs/cache-manager';
-import { Module } from '@nestjs/common';
+import { CacheModule, Module } from '@nestjs/common';
 import { AppController } from './app.controller';
 
 @Module({
diff --git a/sample/20-cache/src/common/http-cache.interceptor.ts b/sample/20-cache/src/common/http-cache.interceptor.ts
index f2bc578ef..c0d3638c7 100644
--- a/sample/20-cache/src/common/http-cache.interceptor.ts
+++ b/sample/20-cache/src/common/http-cache.interceptor.ts
@@ -1,5 +1,4 @@
-import { CacheInterceptor } from '@nestjs/cache-manager';
-import { ExecutionContext, Injectable } from '@nestjs/common';
+import { CacheInterceptor, ExecutionContext, Injectable } from '@nestjs/common';
 
 @Injectable()
 export class HttpCacheInterceptor extends CacheInterceptor {
diff --git a/sample/20-cache/tsconfig.json b/sample/20-cache/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/20-cache/tsconfig.json
+++ b/sample/20-cache/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/21-serializer/package-lock.json b/sample/21-serializer/package-lock.json
index 7f568dfb1..fcbc30dca 100644
Binary files a/sample/21-serializer/package-lock.json and b/sample/21-serializer/package-lock.json differ
diff --git a/sample/21-serializer/package.json b/sample/21-serializer/package.json
index a06427aee..c5fc7bb2c 100644
--- a/sample/21-serializer/package.json
+++ b/sample/21-serializer/package.json
@@ -19,33 +19,33 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
-    "class-transformer": "0.5.1",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/platform-express": "8.2.3",
+    "class-transformer": "0.4.0",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.5.5"
+    "rimraf": "3.0.2",
+    "rxjs": "7.4.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
     "@types/express": "4.17.13",
-    "@types/node": "18.0.3",
-    "@types/supertest": "2.0.12",
-    "jest": "28.1.2",
-    "prettier": "2.7.1",
-    "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
-    "ts-loader": "9.3.1",
-    "ts-node": "10.8.2",
-    "tsconfig-paths": "4.0.0",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.26.0",
-    "typescript": "4.9.5"
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-import": "2.25.3",
+    "typescript": "4.3.5"
   }
 }
diff --git a/sample/21-serializer/tsconfig.json b/sample/21-serializer/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/21-serializer/tsconfig.json
+++ b/sample/21-serializer/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/22-graphql-prisma/.eslintrc.js b/sample/22-graphql-prisma/.eslintrc.js
old mode 100755
new mode 100644
diff --git a/sample/22-graphql-prisma/.gitignore b/sample/22-graphql-prisma/.gitignore
old mode 100755
new mode 100644
index d64fba583..d5c8a57e7
--- a/sample/22-graphql-prisma/.gitignore
+++ b/sample/22-graphql-prisma/.gitignore
@@ -1,27 +1,104 @@
-# dependencies
-/node_modules
 
-# IDE
-/.idea
-/.awcache
-/.vscode
+# Created by https://www.gitignore.io/api/node,macos,visualstudiocode
 
-# misc
-npm-debug.log
+### macOS ###
+*.DS_Store
+.AppleDouble
+.LSOverride
 
-# example
-/quick-start
+# Icon must end with two \r
+Icon
 
-# tests
-/test
-/coverage
-/.nyc_output
+# Thumbnails
+._*
 
-# dist
-/dist
+# Files that might appear in the root of a volume
+.DocumentRevisions-V100
+.fseventsd
+.Spotlight-V100
+.TemporaryItems
+.Trashes
+.VolumeIcon.icns
+.com.apple.timemachine.donotpresent
 
-# database
-prisma/dev.db
+# Directories potentially created on remote AFP share
+.AppleDB
+.AppleDesktop
+Network Trash Folder
+Temporary Items
+.apdisk
 
-# secrets
-.env
\ No newline at end of file
+### Node ###
+# Logs
+logs
+*.log
+npm-debug.log*
+yarn-debug.log*
+yarn-error.log*
+
+# Runtime data
+pids
+*.pid
+*.seed
+*.pid.lock
+
+# Directory for instrumented libs generated by jscoverage/JSCover
+lib-cov
+
+# Coverage directory used by tools like istanbul
+coverage
+
+# nyc test coverage
+.nyc_output
+
+# Grunt intermediate storage (http://gruntjs.com/creating-plugins#storing-task-files)
+.grunt
+
+# Bower dependency directory (https://bower.io/)
+bower_components
+
+# node-waf configuration
+.lock-wscript
+
+# Compiled binary addons (http://nodejs.org/api/addons.html)
+build/Release
+
+# Dependency directories
+node_modules/
+jspm_packages/
+
+# Typescript v1 declaration files
+typings/
+
+# Optional npm cache directory
+.npm
+
+# Optional eslint cache
+.eslintcache
+
+# Optional REPL history
+.node_repl_history
+
+# Output of 'npm pack'
+*.tgz
+
+# Yarn Integrity file
+.yarn-integrity
+
+# dotenv environment variables file
+.env
+
+### VisualStudioCode ###
+.vscode/*
+!.vscode/settings.json
+!.vscode/tasks.json
+!.vscode/launch.json
+!.vscode/extensions.json
+.history
+
+
+# Target Folder
+dist/
+*.deb
+
+# End of https://www.gitignore.io/api/node,macos,visualstudiocode
diff --git a/sample/22-graphql-prisma/.graphqlconfig.yml b/sample/22-graphql-prisma/.graphqlconfig.yml
new file mode 100644
index 000000000..0ef04dedd
--- /dev/null
+++ b/sample/22-graphql-prisma/.graphqlconfig.yml
@@ -0,0 +1,11 @@
+projects:
+  database:
+    schemaPath: src/prisma/prisma-types.graphql
+    extensions:
+      endpoints:
+        default: https://eu1.prisma.sh/public-agatepuma-476/my-app/dev
+      codegen:
+        - generator: prisma-binding
+          language: typescript
+          output:
+            binding: src/prisma/prisma.binding.ts
diff --git a/sample/22-graphql-prisma/README.md b/sample/22-graphql-prisma/README.md
deleted file mode 100755
index 75c5b827a..000000000
--- a/sample/22-graphql-prisma/README.md
+++ /dev/null
@@ -1,14 +0,0 @@
-### Prisma GraphQL schema first sample
-
-This sample project uses sqlite as the relational database. To use a different database, check the [Prisma docs](https://www.prisma.io/docs/getting-started).
-
-### Installation
-
-1. Install dependencies: `npm install`
-2. Generate TypeScript type definitions for the GraphQL schema: `npm run generate:typings`
-3. Create sqlite database and create tables: `npx prisma db push`
-4. Start server: `npm run start:dev`
-
-### Graphql Playground
-
-When the application is running, you can go to [http://localhost:3000/graphql](http://localhost:3000/graphql) to access the GraphQL Playground.  See [here](https://docs.nestjs.com/graphql/quick-start#playground) for more.
\ No newline at end of file
diff --git a/sample/22-graphql-prisma/database/datamodel.graphql b/sample/22-graphql-prisma/database/datamodel.graphql
new file mode 100644
index 000000000..d94e42feb
--- /dev/null
+++ b/sample/22-graphql-prisma/database/datamodel.graphql
@@ -0,0 +1,6 @@
+type Post {
+  id: ID! @unique @id
+  isPublished: Boolean! @default(value: false)
+  title: String!
+  text: String!
+}
diff --git a/sample/22-graphql-prisma/database/prisma.yml b/sample/22-graphql-prisma/database/prisma.yml
new file mode 100644
index 000000000..33bd8b9e7
--- /dev/null
+++ b/sample/22-graphql-prisma/database/prisma.yml
@@ -0,0 +1,20 @@
+# The endpoint of your Prisma API (deployed to a Prisma Sandbox).
+endpoint: https://eu1.prisma.sh/public-agatepuma-476/my-app/dev
+
+# The file containing the definition of your data model.
+datamodel: datamodel.graphql
+
+# Seed your service with initial data based on `seed.graphql`.
+seed:
+  import: seed.graphql
+
+# Download the GraphQL schema of the Prisma API into
+# `src/generated/prisma.graphql` (as specfied in `.graphqlconfig.yml`).
+hooks:
+  post-deploy:
+    - graphql get-schema --project database
+
+# If specified, the `secret` must be used to generate a JWT which is attached
+# to the `Authorization` header of HTTP requests made against the Prisma API.
+# Info: https://www.prisma.io/docs/reference/prisma-api/concepts-utee3eiquo#authentication
+# secret: mysecret123
diff --git a/sample/22-graphql-prisma/database/seed.graphql b/sample/22-graphql-prisma/database/seed.graphql
new file mode 100644
index 000000000..c5c21972f
--- /dev/null
+++ b/sample/22-graphql-prisma/database/seed.graphql
@@ -0,0 +1,31 @@
+mutation {
+  first: createPost(
+    data: {
+      title: "Hello World 👋"
+      text: "I like turtles."
+      isPublished: true
+    }
+  ) {
+    id
+  }
+
+  second: createPost(
+    data: {
+      title: "Join us at GraphQL Europe 🇪🇺 "
+      text: "Get a 10%-discount with this promo code on graphql-europe.org: gql-boilerplates"
+      isPublished: true
+    }
+  ) {
+    id
+  }
+
+  third: createPost(
+    data: {
+      title: "Solving world hunger"
+      text: "This is a draft..."
+      isPublished: false
+    }
+  ) {
+    id
+  }
+}
diff --git a/sample/22-graphql-prisma/generate-typings.ts b/sample/22-graphql-prisma/generate-typings.ts
deleted file mode 100755
index 91f00bd20..000000000
--- a/sample/22-graphql-prisma/generate-typings.ts
+++ /dev/null
@@ -1,9 +0,0 @@
-import { GraphQLDefinitionsFactory } from '@nestjs/graphql';
-import { join } from 'path';
-
-const definitionsFactory = new GraphQLDefinitionsFactory();
-definitionsFactory.generate({
-  typePaths: ['./src/**/*.graphql'],
-  path: join(process.cwd(), 'src/graphql.schema.ts'),
-  outputAs: 'class',
-});
diff --git a/sample/22-graphql-prisma/nest-cli.json b/sample/22-graphql-prisma/nest-cli.json
deleted file mode 100755
index 89bc59ae9..000000000
--- a/sample/22-graphql-prisma/nest-cli.json
+++ /dev/null
@@ -1,5 +0,0 @@
-{
-  "compilerOptions": {
-    "assets": ["**/*.graphql"]
-  }
-}
diff --git a/sample/22-graphql-prisma/nodemon.json b/sample/22-graphql-prisma/nodemon.json
new file mode 100644
index 000000000..cef103d86
--- /dev/null
+++ b/sample/22-graphql-prisma/nodemon.json
@@ -0,0 +1,6 @@
+{
+  "watch": ["src"],
+  "ext": "ts",
+  "ignore": ["src/**/*.spec.ts", "src/graphql.schema.d.ts"],
+  "exec": "ts-node -r tsconfig-paths/register src/main.ts"
+}
diff --git a/sample/22-graphql-prisma/package-lock.json b/sample/22-graphql-prisma/package-lock.json
index 8cc786aba..b5d52f6df 100644
Binary files a/sample/22-graphql-prisma/package-lock.json and b/sample/22-graphql-prisma/package-lock.json differ
diff --git a/sample/22-graphql-prisma/package.json b/sample/22-graphql-prisma/package.json
index 839c0a723..19f093dc9 100644
--- a/sample/22-graphql-prisma/package.json
+++ b/sample/22-graphql-prisma/package.json
@@ -6,7 +6,6 @@
   "scripts": {
     "prebuild": "rimraf dist",
     "build": "nest build",
-    "generate:typings": "ts-node generate-typings.ts",
     "format": "prettier --write \"src/**/*.ts\" \"test/**/*.ts\"",
     "start": "nest start",
     "start:dev": "nest start --watch",
@@ -20,42 +19,37 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@apollo/server": "4.5.0",
-    "@nestjs/apollo": "11.0.4",
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/graphql": "11.0.0",
-    "@nestjs/platform-express": "9.3.12",
-    "@prisma/client": "4.11.0",
-    "class-transformer": "0.5.1",
-    "class-validator": "0.14.0",
-    "graphql": "16.6.0",
-    "graphql-subscriptions": "2.0.0",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/graphql": "9.1.2",
+    "@nestjs/platform-express": "8.2.3",
+    "apollo-server-express": "3.5.0",
+    "graphql": "15.7.2",
+    "graphql-tools": "7.0.5",
+    "prisma-binding": "2.3.16",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.8.0"
+    "rimraf": "3.0.2",
+    "rxjs": "7.4.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.2.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
-    "@types/express": "4.17.17",
-    "@types/node": "18.15.0",
-    "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.35.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.27.5",
-    "jest": "29.5.0",
-    "prettier": "2.8.4",
-    "prisma": "^4.11.0",
-    "supertest": "6.3.3",
-    "ts-jest": "29.0.5",
-    "ts-loader": "9.4.2",
-    "ts-morph": "17.0.1",
-    "ts-node": "10.9.1",
-    "tsconfig-paths": "4.1.2",
-    "typescript": "4.9.5"
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
+    "@types/express": "4.17.13",
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-import": "2.25.3",
+    "typescript": "4.3.5"
   }
 }
diff --git a/sample/22-graphql-prisma/prisma/schema.prisma b/sample/22-graphql-prisma/prisma/schema.prisma
deleted file mode 100755
index c085f0aee..000000000
--- a/sample/22-graphql-prisma/prisma/schema.prisma
+++ /dev/null
@@ -1,18 +0,0 @@
-// This is your Prisma schema file,
-// learn more about it in the docs: https://pris.ly/d/prisma-schema
-
-datasource db {
-  provider = "sqlite"
-  url      = "file:./dev.db"
-}
-
-generator client {
-  provider = "prisma-client-js"
-}
-
-model Post {
-  id          String  @id @default(uuid())
-  title       String
-  text        String
-  isPublished Boolean @default(false)
-}
diff --git a/sample/22-graphql-prisma/src/app.module.ts b/sample/22-graphql-prisma/src/app.module.ts
old mode 100755
new mode 100644
index b8ea4ccb2..616ec9848
--- a/sample/22-graphql-prisma/src/app.module.ts
+++ b/sample/22-graphql-prisma/src/app.module.ts
@@ -1,16 +1,16 @@
 import { Module } from '@nestjs/common';
 import { GraphQLModule } from '@nestjs/graphql';
+import { GraphqlOptions } from './graphql.options';
 import { PostsModule } from './posts/posts.module';
-import { ApolloDriver, ApolloDriverConfig } from '@nestjs/apollo';
+import { PrismaModule } from './prisma/prisma.module';
 
 @Module({
   imports: [
-    PostsModule,
-    GraphQLModule.forRoot<ApolloDriverConfig>({
-      driver: ApolloDriver,
-      typePaths: ['./**/*.graphql'],
-      installSubscriptionHandlers: true,
+    GraphQLModule.forRootAsync({
+      useClass: GraphqlOptions,
     }),
+    PrismaModule,
+    PostsModule,
   ],
 })
 export class AppModule {}
diff --git a/sample/22-graphql-prisma/src/graphql.options.ts b/sample/22-graphql-prisma/src/graphql.options.ts
new file mode 100644
index 000000000..5de5f64ae
--- /dev/null
+++ b/sample/22-graphql-prisma/src/graphql.options.ts
@@ -0,0 +1,21 @@
+import { Injectable } from '@nestjs/common';
+import { GqlModuleOptions, GqlOptionsFactory } from '@nestjs/graphql';
+import { join } from 'path';
+
+@Injectable()
+export class GraphqlOptions implements GqlOptionsFactory {
+  createGqlOptions(): Promise<GqlModuleOptions> | GqlModuleOptions {
+    return {
+      typePaths: ['./src/**/*.graphql'],
+      path: '/',
+      installSubscriptionHandlers: true,
+      resolverValidationOptions: {
+        requireResolversForResolveType: 'ignore',
+      },
+      definitions: {
+        path: join(process.cwd(), 'src/graphql.schema.d.ts'),
+        outputAs: 'class',
+      },
+    };
+  }
+}
diff --git a/sample/22-graphql-prisma/src/graphql.schema.d.ts b/sample/22-graphql-prisma/src/graphql.schema.d.ts
new file mode 100644
index 000000000..d818b240e
--- /dev/null
+++ b/sample/22-graphql-prisma/src/graphql.schema.d.ts
@@ -0,0 +1,209 @@
+/** ------------------------------------------------------
+ * THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
+ * -------------------------------------------------------
+ */
+
+/* tslint:disable */
+export enum MutationType {
+  CREATED = 'CREATED',
+  UPDATED = 'UPDATED',
+  DELETED = 'DELETED',
+}
+
+export enum PostOrderByInput {
+  id_ASC = 'id_ASC',
+  id_DESC = 'id_DESC',
+  isPublished_ASC = 'isPublished_ASC',
+  isPublished_DESC = 'isPublished_DESC',
+  title_ASC = 'title_ASC',
+  title_DESC = 'title_DESC',
+  text_ASC = 'text_ASC',
+  text_DESC = 'text_DESC',
+}
+
+export class PostCreateInput {
+  id?: string;
+  isPublished?: boolean;
+  title: string;
+  text: string;
+}
+
+export class PostSubscriptionWhereInput {
+  AND?: PostSubscriptionWhereInput[];
+  OR?: PostSubscriptionWhereInput[];
+  NOT?: PostSubscriptionWhereInput[];
+  mutation_in?: MutationType[];
+  updatedFields_contains?: string;
+  updatedFields_contains_every?: string[];
+  updatedFields_contains_some?: string[];
+  node?: PostWhereInput;
+}
+
+export class PostUpdateInput {
+  isPublished?: boolean;
+  title?: string;
+  text?: string;
+}
+
+export class PostUpdateManyMutationInput {
+  isPublished?: boolean;
+  title?: string;
+  text?: string;
+}
+
+export class PostWhereInput {
+  AND?: PostWhereInput[];
+  OR?: PostWhereInput[];
+  NOT?: PostWhereInput[];
+  id?: string;
+  id_not?: string;
+  id_in?: string[];
+  id_not_in?: string[];
+  id_lt?: string;
+  id_lte?: string;
+  id_gt?: string;
+  id_gte?: string;
+  id_contains?: string;
+  id_not_contains?: string;
+  id_starts_with?: string;
+  id_not_starts_with?: string;
+  id_ends_with?: string;
+  id_not_ends_with?: string;
+  isPublished?: boolean;
+  isPublished_not?: boolean;
+  title?: string;
+  title_not?: string;
+  title_in?: string[];
+  title_not_in?: string[];
+  title_lt?: string;
+  title_lte?: string;
+  title_gt?: string;
+  title_gte?: string;
+  title_contains?: string;
+  title_not_contains?: string;
+  title_starts_with?: string;
+  title_not_starts_with?: string;
+  title_ends_with?: string;
+  title_not_ends_with?: string;
+  text?: string;
+  text_not?: string;
+  text_in?: string[];
+  text_not_in?: string[];
+  text_lt?: string;
+  text_lte?: string;
+  text_gt?: string;
+  text_gte?: string;
+  text_contains?: string;
+  text_not_contains?: string;
+  text_starts_with?: string;
+  text_not_starts_with?: string;
+  text_ends_with?: string;
+  text_not_ends_with?: string;
+}
+
+export class PostWhereUniqueInput {
+  id?: string;
+}
+
+export interface Node {
+  id: string;
+}
+
+export class AggregatePost {
+  count: number;
+}
+
+export class BatchPayload {
+  count: Long;
+}
+
+export abstract class IMutation {
+  abstract createPost(data: PostCreateInput): Post | Promise<Post>;
+  abstract updatePost(
+    data: PostUpdateInput,
+    where: PostWhereUniqueInput,
+  ): Post | Promise<Post>;
+  abstract deletePost(where: PostWhereUniqueInput): Post | Promise<Post>;
+  abstract upsertPost(
+    where: PostWhereUniqueInput,
+    create: PostCreateInput,
+    update: PostUpdateInput,
+  ): Post | Promise<Post>;
+  abstract updateManyPosts(
+    data: PostUpdateManyMutationInput,
+    where?: PostWhereInput,
+  ): BatchPayload | Promise<BatchPayload>;
+  abstract deleteManyPosts(
+    where?: PostWhereInput,
+  ): BatchPayload | Promise<BatchPayload>;
+}
+
+export class PageInfo {
+  hasNextPage: boolean;
+  hasPreviousPage: boolean;
+  startCursor?: string;
+  endCursor?: string;
+}
+
+export class Post implements Node {
+  id: string;
+  isPublished: boolean;
+  title: string;
+  text: string;
+}
+
+export class PostConnection {
+  pageInfo: PageInfo;
+  edges: PostEdge[];
+  aggregate: AggregatePost;
+}
+
+export class PostEdge {
+  node: Post;
+  cursor: string;
+}
+
+export class PostPreviousValues {
+  id: string;
+  isPublished: boolean;
+  title: string;
+  text: string;
+}
+
+export class PostSubscriptionPayload {
+  mutation: MutationType;
+  node?: Post;
+  updatedFields?: string[];
+  previousValues?: PostPreviousValues;
+}
+
+export abstract class IQuery {
+  abstract posts(
+    where?: PostWhereInput,
+    orderBy?: PostOrderByInput,
+    skip?: number,
+    after?: string,
+    before?: string,
+    first?: number,
+    last?: number,
+  ): Post[] | Promise<Post[]>;
+  abstract post(where: PostWhereUniqueInput): Post | Promise<Post>;
+  abstract postsConnection(
+    where?: PostWhereInput,
+    orderBy?: PostOrderByInput,
+    skip?: number,
+    after?: string,
+    before?: string,
+    first?: number,
+    last?: number,
+  ): PostConnection | Promise<PostConnection>;
+  abstract node(id: string): Node | Promise<Node>;
+}
+
+export abstract class ISubscription {
+  abstract post(
+    where?: PostSubscriptionWhereInput,
+  ): PostSubscriptionPayload | Promise<PostSubscriptionPayload>;
+}
+
+export type Long = any;
diff --git a/sample/22-graphql-prisma/src/graphql.schema.ts b/sample/22-graphql-prisma/src/graphql.schema.ts
deleted file mode 100755
index 38a134f7f..000000000
--- a/sample/22-graphql-prisma/src/graphql.schema.ts
+++ /dev/null
@@ -1,48 +0,0 @@
-/*
- * -------------------------------------------------------
- * THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
- * -------------------------------------------------------
- */
-
-/* tslint:disable */
-/* eslint-disable */
-export class NewPost {
-  title: string;
-  text: string;
-}
-
-export class UpdatePost {
-  id: string;
-  title?: Nullable<string>;
-  text?: Nullable<string>;
-  isPublished?: Nullable<boolean>;
-}
-
-export class Post {
-  id: string;
-  title: string;
-  text: string;
-  isPublished: boolean;
-}
-
-export abstract class IQuery {
-  abstract posts(): Post[] | Promise<Post[]>;
-
-  abstract post(id: string): Nullable<Post> | Promise<Nullable<Post>>;
-}
-
-export abstract class IMutation {
-  abstract createPost(input: NewPost): Post | Promise<Post>;
-
-  abstract updatePost(
-    input: UpdatePost,
-  ): Nullable<Post> | Promise<Nullable<Post>>;
-
-  abstract deletePost(id: string): Nullable<Post> | Promise<Nullable<Post>>;
-}
-
-export abstract class ISubscription {
-  abstract postCreated(): Nullable<Post> | Promise<Nullable<Post>>;
-}
-
-type Nullable<T> = T | null;
diff --git a/sample/22-graphql-prisma/src/main.ts b/sample/22-graphql-prisma/src/main.ts
old mode 100755
new mode 100644
index c442b692c..e1e10d969
--- a/sample/22-graphql-prisma/src/main.ts
+++ b/sample/22-graphql-prisma/src/main.ts
@@ -1,13 +1,9 @@
-import { ValidationPipe } from '@nestjs/common';
 import { NestFactory } from '@nestjs/core';
 import { AppModule } from './app.module';
 
 async function bootstrap() {
   const app = await NestFactory.create(AppModule);
-  app.useGlobalPipes(new ValidationPipe());
-
   await app.listen(3000);
   console.log(`Application is running on: ${await app.getUrl()}`);
-  console.log(`GraphQL Playground: ${await app.getUrl()}/graphql`);
 }
 bootstrap();
diff --git a/sample/22-graphql-prisma/src/posts/posts.module.ts b/sample/22-graphql-prisma/src/posts/posts.module.ts
old mode 100755
new mode 100644
index a70df6058..a1f53f854
--- a/sample/22-graphql-prisma/src/posts/posts.module.ts
+++ b/sample/22-graphql-prisma/src/posts/posts.module.ts
@@ -1,10 +1,9 @@
 import { Module } from '@nestjs/common';
-import { PostsResolvers } from './posts.resolvers';
-import { PostsService } from './posts.service';
-import { PrismaModule } from '../prisma/prisma.module';
+import { PrismaModule } from './../prisma/prisma.module';
+import { PostsResolver } from './posts.resolver';
 
 @Module({
-  providers: [PostsResolvers, PostsService],
+  providers: [PostsResolver],
   imports: [PrismaModule],
 })
 export class PostsModule {}
diff --git a/sample/22-graphql-prisma/src/posts/posts.resolver.ts b/sample/22-graphql-prisma/src/posts/posts.resolver.ts
new file mode 100644
index 000000000..303b65dae
--- /dev/null
+++ b/sample/22-graphql-prisma/src/posts/posts.resolver.ts
@@ -0,0 +1,56 @@
+import {
+  Args,
+  Info,
+  Mutation,
+  Query,
+  Resolver,
+  Subscription,
+} from '@nestjs/graphql';
+import { Post } from '../graphql.schema';
+import { BatchPayload } from '../prisma/prisma.binding';
+import { PrismaService } from '../prisma/prisma.service';
+
+@Resolver()
+export class PostsResolver {
+  constructor(private readonly prisma: PrismaService) {}
+
+  @Query('posts')
+  async getPosts(@Args() args, @Info() info): Promise<Post[]> {
+    return this.prisma.query.posts(args, info);
+  }
+
+  @Query('post')
+  async getPost(@Args() args, @Info() info): Promise<Post> {
+    return this.prisma.query.post(args, info);
+  }
+
+  @Mutation('createPost')
+  async createPost(@Args() args, @Info() info): Promise<Post> {
+    return this.prisma.mutation.createPost(args, info);
+  }
+
+  @Mutation('updatePost')
+  async updatePost(@Args() args, @Info() info): Promise<Post> {
+    return this.prisma.mutation.updatePost(args, info);
+  }
+
+  @Mutation('updateManyPosts')
+  async updateManyPosts(@Args() args, @Info() info): Promise<BatchPayload> {
+    return this.prisma.mutation.updateManyPosts(args, info);
+  }
+
+  @Mutation('deletePost')
+  async deletePost(@Args() args, @Info() info): Promise<Post> {
+    return this.prisma.mutation.deletePost(args, info);
+  }
+
+  @Mutation('deleteManyPosts')
+  async deleteManyPosts(@Args() args, @Info() info): Promise<BatchPayload> {
+    return this.prisma.mutation.deleteManyPosts(args, info);
+  }
+
+  @Subscription('post')
+  onPostMutation(@Args() args, @Info() info) {
+    return this.prisma.subscription.post(args, info);
+  }
+}
diff --git a/sample/22-graphql-prisma/src/posts/posts.resolvers.ts b/sample/22-graphql-prisma/src/posts/posts.resolvers.ts
deleted file mode 100755
index 5ecb8c28f..000000000
--- a/sample/22-graphql-prisma/src/posts/posts.resolvers.ts
+++ /dev/null
@@ -1,43 +0,0 @@
-import { Resolver, Query, Mutation, Args, Subscription } from '@nestjs/graphql';
-import { PostsService } from './posts.service';
-import { Post, NewPost, UpdatePost } from 'src/graphql.schema';
-import { PubSub } from 'graphql-subscriptions';
-
-const pubSub = new PubSub();
-
-@Resolver('Post')
-export class PostsResolvers {
-  constructor(private readonly postService: PostsService) {}
-
-  @Query('posts')
-  async posts(): Promise<Post[]> {
-    return this.postService.findAll();
-  }
-
-  @Query('post')
-  async post(@Args('id') args: string): Promise<Post> {
-    return this.postService.findOne(args);
-  }
-
-  @Mutation('createPost')
-  async create(@Args('input') args: NewPost): Promise<Post> {
-    const createdPost = await this.postService.create(args);
-    pubSub.publish('postCreated', { postCreated: createdPost });
-    return createdPost;
-  }
-
-  @Mutation('updatePost')
-  async update(@Args('input') args: UpdatePost): Promise<Post> {
-    return this.postService.update(args);
-  }
-
-  @Mutation('deletePost')
-  async delete(@Args('id') args: string): Promise<Post> {
-    return this.postService.delete(args);
-  }
-
-  @Subscription('postCreated')
-  postCreated() {
-    return pubSub.asyncIterator('postCreated');
-  }
-}
diff --git a/sample/22-graphql-prisma/src/posts/posts.service.ts b/sample/22-graphql-prisma/src/posts/posts.service.ts
deleted file mode 100755
index 633065a28..000000000
--- a/sample/22-graphql-prisma/src/posts/posts.service.ts
+++ /dev/null
@@ -1,48 +0,0 @@
-import { Injectable } from '@nestjs/common';
-import { Post } from '@prisma/client';
-import { NewPost, UpdatePost } from 'src/graphql.schema';
-import { PrismaService } from '../prisma/prisma.service';
-
-@Injectable()
-export class PostsService {
-  constructor(private prisma: PrismaService) {}
-
-  async findOne(id: string): Promise<Post | null> {
-    return this.prisma.post.findUnique({
-      where: {
-        id,
-      },
-    });
-  }
-
-  async findAll(): Promise<Post[]> {
-    return this.prisma.post.findMany({});
-  }
-
-  async create(input: NewPost): Promise<Post> {
-    return this.prisma.post.create({
-      data: input,
-    });
-  }
-
-  async update(params: UpdatePost): Promise<Post> {
-    const { id, ...params_without_id } = params;
-
-    return this.prisma.post.update({
-      where: {
-        id,
-      },
-      data: {
-        ...params_without_id,
-      },
-    });
-  }
-
-  async delete(id: string): Promise<Post> {
-    return this.prisma.post.delete({
-      where: {
-        id,
-      },
-    });
-  }
-}
diff --git a/sample/22-graphql-prisma/src/posts/schema.graphql b/sample/22-graphql-prisma/src/posts/schema.graphql
deleted file mode 100755
index ac00d18f0..000000000
--- a/sample/22-graphql-prisma/src/posts/schema.graphql
+++ /dev/null
@@ -1,33 +0,0 @@
-type Post {
-  id: ID!
-  title: String!
-  text: String!
-  isPublished: Boolean!
-}
-
-input NewPost {
-  title: String!
-  text: String!
-}
-
-input UpdatePost {
-  id: ID!
-  title: String
-  text: String
-  isPublished: Boolean
-}
-
-type Query {
-  posts: [Post!]!
-  post(id: ID!): Post
-}
-
-type Mutation {
-  createPost(input: NewPost!): Post!
-  updatePost(input: UpdatePost!): Post
-  deletePost(id: ID!): Post
-}
-
-type Subscription {
-  postCreated: Post
-}
diff --git a/sample/22-graphql-prisma/src/prisma/prisma-types.graphql b/sample/22-graphql-prisma/src/prisma/prisma-types.graphql
new file mode 100644
index 000000000..36380cf51
--- /dev/null
+++ b/sample/22-graphql-prisma/src/prisma/prisma-types.graphql
@@ -0,0 +1,308 @@
+# source: https://eu1.prisma.sh/adam-gajzlerowicz-1dadb3/demo/dev
+# timestamp: Sun Jan 26 2020 09:49:46 GMT+0100 (Central European Standard Time)
+
+type AggregatePost {
+  count: Int!
+}
+
+type BatchPayload {
+  """The number of nodes that have been affected by the Batch operation."""
+  count: Long!
+}
+
+"""
+The `Long` scalar type represents non-fractional signed whole numeric values.
+Long can represent values between -(2^63) and 2^63 - 1.
+"""
+scalar Long
+
+type Mutation {
+  createPost(data: PostCreateInput!): Post!
+  updatePost(data: PostUpdateInput!, where: PostWhereUniqueInput!): Post
+  deletePost(where: PostWhereUniqueInput!): Post
+  upsertPost(where: PostWhereUniqueInput!, create: PostCreateInput!, update: PostUpdateInput!): Post!
+  updateManyPosts(data: PostUpdateManyMutationInput!, where: PostWhereInput): BatchPayload!
+  deleteManyPosts(where: PostWhereInput): BatchPayload!
+}
+
+enum MutationType {
+  CREATED
+  UPDATED
+  DELETED
+}
+
+"""An object with an ID"""
+interface Node {
+  """The id of the object."""
+  id: ID!
+}
+
+"""Information about pagination in a connection."""
+type PageInfo {
+  """When paginating forwards, are there more items?"""
+  hasNextPage: Boolean!
+
+  """When paginating backwards, are there more items?"""
+  hasPreviousPage: Boolean!
+
+  """When paginating backwards, the cursor to continue."""
+  startCursor: String
+
+  """When paginating forwards, the cursor to continue."""
+  endCursor: String
+}
+
+type Post implements Node {
+  id: ID!
+  isPublished: Boolean!
+  title: String!
+  text: String!
+}
+
+"""A connection to a list of items."""
+type PostConnection {
+  """Information to aid in pagination."""
+  pageInfo: PageInfo!
+
+  """A list of edges."""
+  edges: [PostEdge]!
+  aggregate: AggregatePost!
+}
+
+input PostCreateInput {
+  id: ID
+  isPublished: Boolean
+  title: String!
+  text: String!
+}
+
+"""An edge in a connection."""
+type PostEdge {
+  """The item at the end of the edge."""
+  node: Post!
+
+  """A cursor for use in pagination."""
+  cursor: String!
+}
+
+enum PostOrderByInput {
+  id_ASC
+  id_DESC
+  isPublished_ASC
+  isPublished_DESC
+  title_ASC
+  title_DESC
+  text_ASC
+  text_DESC
+}
+
+type PostPreviousValues {
+  id: ID!
+  isPublished: Boolean!
+  title: String!
+  text: String!
+}
+
+type PostSubscriptionPayload {
+  mutation: MutationType!
+  node: Post
+  updatedFields: [String!]
+  previousValues: PostPreviousValues
+}
+
+input PostSubscriptionWhereInput {
+  """Logical AND on all given filters."""
+  AND: [PostSubscriptionWhereInput!]
+
+  """Logical OR on all given filters."""
+  OR: [PostSubscriptionWhereInput!]
+
+  """Logical NOT on all given filters combined by AND."""
+  NOT: [PostSubscriptionWhereInput!]
+
+  """The subscription event gets dispatched when it's listed in mutation_in"""
+  mutation_in: [MutationType!]
+
+  """
+  The subscription event gets only dispatched when one of the updated fields names is included in this list
+  """
+  updatedFields_contains: String
+
+  """
+  The subscription event gets only dispatched when all of the field names included in this list have been updated
+  """
+  updatedFields_contains_every: [String!]
+
+  """
+  The subscription event gets only dispatched when some of the field names included in this list have been updated
+  """
+  updatedFields_contains_some: [String!]
+  node: PostWhereInput
+}
+
+input PostUpdateInput {
+  isPublished: Boolean
+  title: String
+  text: String
+}
+
+input PostUpdateManyMutationInput {
+  isPublished: Boolean
+  title: String
+  text: String
+}
+
+input PostWhereInput {
+  """Logical AND on all given filters."""
+  AND: [PostWhereInput!]
+
+  """Logical OR on all given filters."""
+  OR: [PostWhereInput!]
+
+  """Logical NOT on all given filters combined by AND."""
+  NOT: [PostWhereInput!]
+  id: ID
+
+  """All values that are not equal to given value."""
+  id_not: ID
+
+  """All values that are contained in given list."""
+  id_in: [ID!]
+
+  """All values that are not contained in given list."""
+  id_not_in: [ID!]
+
+  """All values less than the given value."""
+  id_lt: ID
+
+  """All values less than or equal the given value."""
+  id_lte: ID
+
+  """All values greater than the given value."""
+  id_gt: ID
+
+  """All values greater than or equal the given value."""
+  id_gte: ID
+
+  """All values containing the given string."""
+  id_contains: ID
+
+  """All values not containing the given string."""
+  id_not_contains: ID
+
+  """All values starting with the given string."""
+  id_starts_with: ID
+
+  """All values not starting with the given string."""
+  id_not_starts_with: ID
+
+  """All values ending with the given string."""
+  id_ends_with: ID
+
+  """All values not ending with the given string."""
+  id_not_ends_with: ID
+  isPublished: Boolean
+
+  """All values that are not equal to given value."""
+  isPublished_not: Boolean
+  title: String
+
+  """All values that are not equal to given value."""
+  title_not: String
+
+  """All values that are contained in given list."""
+  title_in: [String!]
+
+  """All values that are not contained in given list."""
+  title_not_in: [String!]
+
+  """All values less than the given value."""
+  title_lt: String
+
+  """All values less than or equal the given value."""
+  title_lte: String
+
+  """All values greater than the given value."""
+  title_gt: String
+
+  """All values greater than or equal the given value."""
+  title_gte: String
+
+  """All values containing the given string."""
+  title_contains: String
+
+  """All values not containing the given string."""
+  title_not_contains: String
+
+  """All values starting with the given string."""
+  title_starts_with: String
+
+  """All values not starting with the given string."""
+  title_not_starts_with: String
+
+  """All values ending with the given string."""
+  title_ends_with: String
+
+  """All values not ending with the given string."""
+  title_not_ends_with: String
+  text: String
+
+  """All values that are not equal to given value."""
+  text_not: String
+
+  """All values that are contained in given list."""
+  text_in: [String!]
+
+  """All values that are not contained in given list."""
+  text_not_in: [String!]
+
+  """All values less than the given value."""
+  text_lt: String
+
+  """All values less than or equal the given value."""
+  text_lte: String
+
+  """All values greater than the given value."""
+  text_gt: String
+
+  """All values greater than or equal the given value."""
+  text_gte: String
+
+  """All values containing the given string."""
+  text_contains: String
+
+  """All values not containing the given string."""
+  text_not_contains: String
+
+  """All values starting with the given string."""
+  text_starts_with: String
+
+  """All values not starting with the given string."""
+  text_not_starts_with: String
+
+  """All values ending with the given string."""
+  text_ends_with: String
+
+  """All values not ending with the given string."""
+  text_not_ends_with: String
+}
+
+input PostWhereUniqueInput {
+  id: ID
+}
+
+type Query {
+  posts(where: PostWhereInput, orderBy: PostOrderByInput, skip: Int, after: String, before: String, first: Int, last: Int): [Post]!
+  post(where: PostWhereUniqueInput!): Post
+  postsConnection(where: PostWhereInput, orderBy: PostOrderByInput, skip: Int, after: String, before: String, first: Int, last: Int): PostConnection!
+
+  """Fetches an object given its ID"""
+  node(
+    """The ID of an object"""
+    id: ID!
+  ): Node
+}
+
+type Subscription {
+  post(where: PostSubscriptionWhereInput): PostSubscriptionPayload
+}
diff --git a/sample/22-graphql-prisma/src/prisma/prisma.binding.ts b/sample/22-graphql-prisma/src/prisma/prisma.binding.ts
new file mode 100644
index 000000000..a9dbf053a
--- /dev/null
+++ b/sample/22-graphql-prisma/src/prisma/prisma.binding.ts
@@ -0,0 +1,629 @@
+import { GraphQLResolveInfo, GraphQLSchema } from 'graphql';
+import { Options } from 'graphql-binding';
+import { IResolvers } from 'graphql-tools';
+import { BasePrismaOptions, makePrismaBindingClass } from 'prisma-binding';
+
+export interface Query {
+  posts: <T = Post[]>(
+    args: {
+      where?: PostWhereInput;
+      orderBy?: PostOrderByInput;
+      skip?: Int;
+      after?: String;
+      before?: String;
+      first?: Int;
+      last?: Int;
+    },
+    info?: GraphQLResolveInfo | string,
+    options?: Options,
+  ) => Promise<T>;
+  post: <T = Post | null>(
+    args: { where: PostWhereUniqueInput },
+    info?: GraphQLResolveInfo | string,
+    options?: Options,
+  ) => Promise<T>;
+  postsConnection: <T = PostConnection>(
+    args: {
+      where?: PostWhereInput;
+      orderBy?: PostOrderByInput;
+      skip?: Int;
+      after?: String;
+      before?: String;
+      first?: Int;
+      last?: Int;
+    },
+    info?: GraphQLResolveInfo | string,
+    options?: Options,
+  ) => Promise<T>;
+  node: <T = Node | null>(
+    args: { id: ID_Output },
+    info?: GraphQLResolveInfo | string,
+    options?: Options,
+  ) => Promise<T>;
+}
+
+export interface Mutation {
+  createPost: <T = Post>(
+    args: { data: PostCreateInput },
+    info?: GraphQLResolveInfo | string,
+    options?: Options,
+  ) => Promise<T>;
+  updatePost: <T = Post | null>(
+    args: { data: PostUpdateInput; where: PostWhereUniqueInput },
+    info?: GraphQLResolveInfo | string,
+    options?: Options,
+  ) => Promise<T>;
+  deletePost: <T = Post | null>(
+    args: { where: PostWhereUniqueInput },
+    info?: GraphQLResolveInfo | string,
+    options?: Options,
+  ) => Promise<T>;
+  upsertPost: <T = Post>(
+    args: {
+      where: PostWhereUniqueInput;
+      create: PostCreateInput;
+      update: PostUpdateInput;
+    },
+    info?: GraphQLResolveInfo | string,
+    options?: Options,
+  ) => Promise<T>;
+  updateManyPosts: <T = BatchPayload>(
+    args: { data: PostUpdateInput; where?: PostWhereInput },
+    info?: GraphQLResolveInfo | string,
+    options?: Options,
+  ) => Promise<T>;
+  deleteManyPosts: <T = BatchPayload>(
+    args: { where?: PostWhereInput },
+    info?: GraphQLResolveInfo | string,
+    options?: Options,
+  ) => Promise<T>;
+}
+
+export interface Subscription {
+  post: <T = PostSubscriptionPayload | null>(
+    args: { where?: PostSubscriptionWhereInput },
+    info?: GraphQLResolveInfo | string,
+    options?: Options,
+  ) => Promise<AsyncIterator<T>>;
+}
+
+export interface Exists {
+  Post: (where?: PostWhereInput) => Promise<boolean>;
+}
+
+export interface Prisma {
+  query: Query;
+  mutation: Mutation;
+  subscription: Subscription;
+  exists: Exists;
+  request: <T = any>(
+    query: string,
+    variables?: { [key: string]: any },
+  ) => Promise<T>;
+  delegate(
+    operation: 'query' | 'mutation',
+    fieldName: string,
+    args: {
+      [key: string]: any;
+    },
+    infoOrQuery?: GraphQLResolveInfo | string,
+    options?: Options,
+  ): Promise<any>;
+  delegateSubscription(
+    fieldName: string,
+    args?: {
+      [key: string]: any;
+    },
+    infoOrQuery?: GraphQLResolveInfo | string,
+    options?: Options,
+  ): Promise<AsyncIterator<any>>;
+  getAbstractResolvers(filterSchema?: GraphQLSchema | string): IResolvers;
+}
+
+export interface BindingConstructor<T> {
+  new (options: BasePrismaOptions): T;
+}
+/**
+ * Type Defs
+ */
+
+const typeDefs = `type AggregatePost {
+  count: Int!
+}
+
+type BatchPayload {
+  """The number of nodes that have been affected by the Batch operation."""
+  count: Long!
+}
+
+"""
+The \`Long\` scalar type represents non-fractional signed whole numeric values.
+Long can represent values between -(2^63) and 2^63 - 1.
+"""
+scalar Long
+
+type Mutation {
+  createPost(data: PostCreateInput!): Post!
+  updatePost(data: PostUpdateInput!, where: PostWhereUniqueInput!): Post
+  deletePost(where: PostWhereUniqueInput!): Post
+  upsertPost(where: PostWhereUniqueInput!, create: PostCreateInput!, update: PostUpdateInput!): Post!
+  updateManyPosts(data: PostUpdateInput!, where: PostWhereInput): BatchPayload!
+  deleteManyPosts(where: PostWhereInput): BatchPayload!
+}
+
+enum MutationType {
+  CREATED
+  UPDATED
+  DELETED
+}
+
+"""An object with an ID"""
+interface Node {
+  """The id of the object."""
+  id: ID!
+}
+
+"""Information about pagination in a connection."""
+type PageInfo {
+  """When paginating forwards, are there more items?"""
+  hasNextPage: Boolean!
+
+  """When paginating backwards, are there more items?"""
+  hasPreviousPage: Boolean!
+
+  """When paginating backwards, the cursor to continue."""
+  startCursor: String
+
+  """When paginating forwards, the cursor to continue."""
+  endCursor: String
+}
+
+type Post implements Node {
+  id: ID!
+  isPublished: Boolean!
+  title: String!
+  text: String!
+}
+
+"""A connection to a list of items."""
+type PostConnection {
+  """Information to aid in pagination."""
+  pageInfo: PageInfo!
+
+  """A list of edges."""
+  edges: [PostEdge]!
+  aggregate: AggregatePost!
+}
+
+input PostCreateInput {
+  isPublished: Boolean
+  title: String!
+  text: String!
+}
+
+"""An edge in a connection."""
+type PostEdge {
+  """The item at the end of the edge."""
+  node: Post!
+
+  """A cursor for use in pagination."""
+  cursor: String!
+}
+
+enum PostOrderByInput {
+  id_ASC
+  id_DESC
+  isPublished_ASC
+  isPublished_DESC
+  title_ASC
+  title_DESC
+  text_ASC
+  text_DESC
+  updatedAt_ASC
+  updatedAt_DESC
+  createdAt_ASC
+  createdAt_DESC
+}
+
+type PostPreviousValues {
+  id: ID!
+  isPublished: Boolean!
+  title: String!
+  text: String!
+}
+
+type PostSubscriptionPayload {
+  mutation: MutationType!
+  node: Post
+  updatedFields: [String!]
+  previousValues: PostPreviousValues
+}
+
+input PostSubscriptionWhereInput {
+  """Logical AND on all given filters."""
+  AND: [PostSubscriptionWhereInput!]
+
+  """Logical OR on all given filters."""
+  OR: [PostSubscriptionWhereInput!]
+
+  """Logical NOT on all given filters combined by AND."""
+  NOT: [PostSubscriptionWhereInput!]
+
+  """
+  The subscription event gets dispatched when it's listed in mutation_in
+  """
+  mutation_in: [MutationType!]
+
+  """
+  The subscription event gets only dispatched when one of the updated fields names is included in this list
+  """
+  updatedFields_contains: String
+
+  """
+  The subscription event gets only dispatched when all of the field names included in this list have been updated
+  """
+  updatedFields_contains_every: [String!]
+
+  """
+  The subscription event gets only dispatched when some of the field names included in this list have been updated
+  """
+  updatedFields_contains_some: [String!]
+  node: PostWhereInput
+}
+
+input PostUpdateInput {
+  isPublished: Boolean
+  title: String
+  text: String
+}
+
+input PostWhereInput {
+  """Logical AND on all given filters."""
+  AND: [PostWhereInput!]
+
+  """Logical OR on all given filters."""
+  OR: [PostWhereInput!]
+
+  """Logical NOT on all given filters combined by AND."""
+  NOT: [PostWhereInput!]
+  id: ID
+
+  """All values that are not equal to given value."""
+  id_not: ID
+
+  """All values that are contained in given list."""
+  id_in: [ID!]
+
+  """All values that are not contained in given list."""
+  id_not_in: [ID!]
+
+  """All values less than the given value."""
+  id_lt: ID
+
+  """All values less than or equal the given value."""
+  id_lte: ID
+
+  """All values greater than the given value."""
+  id_gt: ID
+
+  """All values greater than or equal the given value."""
+  id_gte: ID
+
+  """All values containing the given string."""
+  id_contains: ID
+
+  """All values not containing the given string."""
+  id_not_contains: ID
+
+  """All values starting with the given string."""
+  id_starts_with: ID
+
+  """All values not starting with the given string."""
+  id_not_starts_with: ID
+
+  """All values ending with the given string."""
+  id_ends_with: ID
+
+  """All values not ending with the given string."""
+  id_not_ends_with: ID
+  isPublished: Boolean
+
+  """All values that are not equal to given value."""
+  isPublished_not: Boolean
+  title: String
+
+  """All values that are not equal to given value."""
+  title_not: String
+
+  """All values that are contained in given list."""
+  title_in: [String!]
+
+  """All values that are not contained in given list."""
+  title_not_in: [String!]
+
+  """All values less than the given value."""
+  title_lt: String
+
+  """All values less than or equal the given value."""
+  title_lte: String
+
+  """All values greater than the given value."""
+  title_gt: String
+
+  """All values greater than or equal the given value."""
+  title_gte: String
+
+  """All values containing the given string."""
+  title_contains: String
+
+  """All values not containing the given string."""
+  title_not_contains: String
+
+  """All values starting with the given string."""
+  title_starts_with: String
+
+  """All values not starting with the given string."""
+  title_not_starts_with: String
+
+  """All values ending with the given string."""
+  title_ends_with: String
+
+  """All values not ending with the given string."""
+  title_not_ends_with: String
+  text: String
+
+  """All values that are not equal to given value."""
+  text_not: String
+
+  """All values that are contained in given list."""
+  text_in: [String!]
+
+  """All values that are not contained in given list."""
+  text_not_in: [String!]
+
+  """All values less than the given value."""
+  text_lt: String
+
+  """All values less than or equal the given value."""
+  text_lte: String
+
+  """All values greater than the given value."""
+  text_gt: String
+
+  """All values greater than or equal the given value."""
+  text_gte: String
+
+  """All values containing the given string."""
+  text_contains: String
+
+  """All values not containing the given string."""
+  text_not_contains: String
+
+  """All values starting with the given string."""
+  text_starts_with: String
+
+  """All values not starting with the given string."""
+  text_not_starts_with: String
+
+  """All values ending with the given string."""
+  text_ends_with: String
+
+  """All values not ending with the given string."""
+  text_not_ends_with: String
+}
+
+input PostWhereUniqueInput {
+  id: ID
+}
+
+type Query {
+  posts(where: PostWhereInput, orderBy: PostOrderByInput, skip: Int, after: String, before: String, first: Int, last: Int): [Post]!
+  post(where: PostWhereUniqueInput!): Post
+  postsConnection(where: PostWhereInput, orderBy: PostOrderByInput, skip: Int, after: String, before: String, first: Int, last: Int): PostConnection!
+
+  """Fetches an object given its ID"""
+  node(
+    """The ID of an object"""
+    id: ID!
+  ): Node
+}
+
+type Subscription {
+  post(where: PostSubscriptionWhereInput): PostSubscriptionPayload
+}
+`;
+
+export const Prisma = makePrismaBindingClass<BindingConstructor<Prisma>>({
+  typeDefs,
+});
+
+/**
+ * Types
+ */
+
+export type PostOrderByInput =
+  | 'id_ASC'
+  | 'id_DESC'
+  | 'isPublished_ASC'
+  | 'isPublished_DESC'
+  | 'title_ASC'
+  | 'title_DESC'
+  | 'text_ASC'
+  | 'text_DESC'
+  | 'updatedAt_ASC'
+  | 'updatedAt_DESC'
+  | 'createdAt_ASC'
+  | 'createdAt_DESC';
+
+export type MutationType = 'CREATED' | 'UPDATED' | 'DELETED';
+
+export interface PostWhereUniqueInput {
+  id?: ID_Input;
+}
+
+export interface PostCreateInput {
+  isPublished?: Boolean;
+  title: String;
+  text: String;
+}
+
+export interface PostUpdateInput {
+  isPublished?: Boolean;
+  title?: String;
+  text?: String;
+}
+
+export interface PostSubscriptionWhereInput {
+  AND?: PostSubscriptionWhereInput[] | PostSubscriptionWhereInput;
+  OR?: PostSubscriptionWhereInput[] | PostSubscriptionWhereInput;
+  NOT?: PostSubscriptionWhereInput[] | PostSubscriptionWhereInput;
+  mutation_in?: MutationType[] | MutationType;
+  updatedFields_contains?: String;
+  updatedFields_contains_every?: String[] | String;
+  updatedFields_contains_some?: String[] | String;
+  node?: PostWhereInput;
+}
+
+export interface PostWhereInput {
+  AND?: PostWhereInput[] | PostWhereInput;
+  OR?: PostWhereInput[] | PostWhereInput;
+  NOT?: PostWhereInput[] | PostWhereInput;
+  id?: ID_Input;
+  id_not?: ID_Input;
+  id_in?: ID_Input[] | ID_Input;
+  id_not_in?: ID_Input[] | ID_Input;
+  id_lt?: ID_Input;
+  id_lte?: ID_Input;
+  id_gt?: ID_Input;
+  id_gte?: ID_Input;
+  id_contains?: ID_Input;
+  id_not_contains?: ID_Input;
+  id_starts_with?: ID_Input;
+  id_not_starts_with?: ID_Input;
+  id_ends_with?: ID_Input;
+  id_not_ends_with?: ID_Input;
+  isPublished?: Boolean;
+  isPublished_not?: Boolean;
+  title?: String;
+  title_not?: String;
+  title_in?: String[] | String;
+  title_not_in?: String[] | String;
+  title_lt?: String;
+  title_lte?: String;
+  title_gt?: String;
+  title_gte?: String;
+  title_contains?: String;
+  title_not_contains?: String;
+  title_starts_with?: String;
+  title_not_starts_with?: String;
+  title_ends_with?: String;
+  title_not_ends_with?: String;
+  text?: String;
+  text_not?: String;
+  text_in?: String[] | String;
+  text_not_in?: String[] | String;
+  text_lt?: String;
+  text_lte?: String;
+  text_gt?: String;
+  text_gte?: String;
+  text_contains?: String;
+  text_not_contains?: String;
+  text_starts_with?: String;
+  text_not_starts_with?: String;
+  text_ends_with?: String;
+  text_not_ends_with?: String;
+}
+
+/*
+ * An object with an ID
+
+ */
+export interface Node {
+  id: ID_Output;
+}
+
+/*
+ * Information about pagination in a connection.
+
+ */
+export interface PageInfo {
+  hasNextPage: Boolean;
+  hasPreviousPage: Boolean;
+  startCursor?: String;
+  endCursor?: String;
+}
+
+export interface BatchPayload {
+  count: Long;
+}
+
+export interface PostPreviousValues {
+  id: ID_Output;
+  isPublished: Boolean;
+  title: String;
+  text: String;
+}
+
+/*
+ * A connection to a list of items.
+
+ */
+export interface PostConnection {
+  pageInfo: PageInfo;
+  edges: PostEdge[];
+  aggregate: AggregatePost;
+}
+
+export interface PostSubscriptionPayload {
+  mutation: MutationType;
+  node?: Post;
+  updatedFields?: String[];
+  previousValues?: PostPreviousValues;
+}
+
+export interface Post extends Node {
+  id: ID_Output;
+  isPublished: Boolean;
+  title: String;
+  text: String;
+}
+
+export interface AggregatePost {
+  count: Int;
+}
+
+/*
+ * An edge in a connection.
+
+ */
+export interface PostEdge {
+  node: Post;
+  cursor: String;
+}
+
+/*
+The `Boolean` scalar type represents `true` or `false`.
+*/
+export type Boolean = boolean;
+
+/*
+The `String` scalar type represents textual data, represented as UTF-8 character sequences. The String type is most often used by GraphQL to represent free-form human-readable text.
+*/
+export type String = string;
+
+/*
+The `Long` scalar type represents non-fractional signed whole numeric values.
+Long can represent values between -(2^63) and 2^63 - 1.
+*/
+export type Long = string;
+
+/*
+The `ID` scalar type represents a unique identifier, often used to refetch an object or as key for a cache. The ID type appears in a JSON response as a String; however, it is not intended to be human-readable. When expected as an input type, any string (such as `"4"`) or integer (such as `4`) input value will be accepted as an ID.
+*/
+export type ID_Input = string | number;
+export type ID_Output = string;
+
+/*
+The `Int` scalar type represents non-fractional signed whole numeric values. Int can represent values between -(2^31) and 2^31 - 1. 
+*/
+export type Int = number;
diff --git a/sample/22-graphql-prisma/src/prisma/prisma.module.ts b/sample/22-graphql-prisma/src/prisma/prisma.module.ts
old mode 100755
new mode 100644
diff --git a/sample/22-graphql-prisma/src/prisma/prisma.service.ts b/sample/22-graphql-prisma/src/prisma/prisma.service.ts
old mode 100755
new mode 100644
index edf653202..dc2e22529
--- a/sample/22-graphql-prisma/src/prisma/prisma.service.ts
+++ b/sample/22-graphql-prisma/src/prisma/prisma.service.ts
@@ -1,15 +1,12 @@
-import { INestApplication, Injectable, OnModuleInit } from '@nestjs/common';
-import { PrismaClient } from '@prisma/client';
+import { Injectable } from '@nestjs/common';
+import { Prisma } from './prisma.binding';
 
 @Injectable()
-export class PrismaService extends PrismaClient implements OnModuleInit {
-  async onModuleInit() {
-    await this.$connect();
-  }
-
-  async enableShutdownHooks(app: INestApplication) {
-    this.$on('beforeExit', async () => {
-      await app.close();
+export class PrismaService extends Prisma {
+  constructor() {
+    super({
+      endpoint: 'https://eu1.prisma.sh/public-agatepuma-476/my-app/dev',
+      debug: false,
     });
   }
 }
diff --git a/sample/22-graphql-prisma/tsconfig.build.json b/sample/22-graphql-prisma/tsconfig.build.json
old mode 100755
new mode 100644
diff --git a/sample/22-graphql-prisma/tsconfig.json b/sample/22-graphql-prisma/tsconfig.json
old mode 100755
new mode 100644
index d9c82ca97..e268e37aa
--- a/sample/22-graphql-prisma/tsconfig.json
+++ b/sample/22-graphql-prisma/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/23-graphql-code-first/package-lock.json b/sample/23-graphql-code-first/package-lock.json
index f40dee72a..950f277dc 100644
Binary files a/sample/23-graphql-code-first/package-lock.json and b/sample/23-graphql-code-first/package-lock.json differ
diff --git a/sample/23-graphql-code-first/package.json b/sample/23-graphql-code-first/package.json
index febc762b8..f4f81c6d0 100644
--- a/sample/23-graphql-code-first/package.json
+++ b/sample/23-graphql-code-first/package.json
@@ -19,39 +19,39 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@apollo/server": "4.5.0",
-    "@nestjs/apollo": "11.0.4",
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/graphql": "11.0.0",
-    "@nestjs/platform-express": "9.3.12",
-    "class-transformer": "0.5.1",
-    "class-validator": "0.14.0",
-    "graphql": "16.6.0",
-    "graphql-query-complexity": "0.12.0",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/graphql": "9.1.2",
+    "@nestjs/platform-express": "8.2.3",
+    "apollo-server": "3.5.0",
+    "apollo-server-express": "3.5.0",
+    "class-transformer": "0.4.0",
+    "class-validator": "0.13.2",
+    "graphql": "15.7.2",
+    "graphql-query-complexity": "0.11.0",
     "graphql-subscriptions": "2.0.0",
     "reflect-metadata": "0.1.13",
-    "rxjs": "7.8.0"
+    "rxjs": "7.4.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.2.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
-    "@types/express": "4.17.17",
-    "@types/node": "18.15.0",
-    "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.35.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.27.5",
-    "jest": "29.5.0",
-    "prettier": "2.8.4",
-    "supertest": "6.3.3",
-    "ts-jest": "29.0.5",
-    "ts-loader": "9.4.2",
-    "ts-node": "10.9.1",
-    "tsconfig-paths": "4.1.2",
-    "typescript": "4.9.5"
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
+    "@types/express": "4.17.13",
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-import": "2.25.3",
+    "typescript": "4.4.2"
   }
 }
diff --git a/sample/23-graphql-code-first/schema.gql b/sample/23-graphql-code-first/schema.gql
index 7a46060d1..9c1d511de 100644
--- a/sample/23-graphql-code-first/schema.gql
+++ b/sample/23-graphql-code-first/schema.gql
@@ -2,15 +2,13 @@
 # THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
 # ------------------------------------------------------
 
-directive @upper on FIELD_DEFINITION
-
 """recipe """
 type Recipe {
   id: ID!
+  title: String!
   description: String
   creationDate: Date!
   ingredients: [String!]!
-  title: String!
 }
 
 """Date custom scalar type"""
@@ -18,7 +16,7 @@ scalar Date
 
 type Query {
   recipe(id: String!): Recipe!
-  recipes(skip: Int! = 0, take: Int! = 25): [Recipe!]!
+  recipes(skip: Int = 0, take: Int = 25): [Recipe!]!
 }
 
 type Mutation {
@@ -34,4 +32,4 @@ input NewRecipeInput {
 
 type Subscription {
   recipeAdded: Recipe!
-}
\ No newline at end of file
+}
diff --git a/sample/23-graphql-code-first/src/app.module.ts b/sample/23-graphql-code-first/src/app.module.ts
index 2b32aa272..c418f9f79 100644
--- a/sample/23-graphql-code-first/src/app.module.ts
+++ b/sample/23-graphql-code-first/src/app.module.ts
@@ -1,26 +1,13 @@
-import { ApolloDriver, ApolloDriverConfig } from '@nestjs/apollo';
 import { Module } from '@nestjs/common';
 import { GraphQLModule } from '@nestjs/graphql';
-import { DirectiveLocation, GraphQLDirective } from 'graphql';
-import { upperDirectiveTransformer } from './common/directives/upper-case.directive';
 import { RecipesModule } from './recipes/recipes.module';
 
 @Module({
   imports: [
     RecipesModule,
-    GraphQLModule.forRoot<ApolloDriverConfig>({
-      driver: ApolloDriver,
-      autoSchemaFile: 'schema.gql',
-      transformSchema: schema => upperDirectiveTransformer(schema, 'upper'),
+    GraphQLModule.forRoot({
       installSubscriptionHandlers: true,
-      buildSchemaOptions: {
-        directives: [
-          new GraphQLDirective({
-            name: 'upper',
-            locations: [DirectiveLocation.FIELD_DEFINITION],
-          }),
-        ],
-      },
+      autoSchemaFile: 'schema.gql',
     }),
   ],
 })
diff --git a/sample/23-graphql-code-first/src/common/directives/upper-case.directive.ts b/sample/23-graphql-code-first/src/common/directives/upper-case.directive.ts
index 52cabe0ef..49341fe8e 100644
--- a/sample/23-graphql-code-first/src/common/directives/upper-case.directive.ts
+++ b/sample/23-graphql-code-first/src/common/directives/upper-case.directive.ts
@@ -1,32 +1,15 @@
-import { getDirective, MapperKind, mapSchema } from '@graphql-tools/utils';
-import { defaultFieldResolver, GraphQLSchema } from 'graphql';
+import { SchemaDirectiveVisitor } from '@graphql-tools/utils';
+import { defaultFieldResolver, GraphQLField } from 'graphql';
 
-export function upperDirectiveTransformer(
-  schema: GraphQLSchema,
-  directiveName: string,
-) {
-  return mapSchema(schema, {
-    [MapperKind.OBJECT_FIELD]: fieldConfig => {
-      const upperDirective = getDirective(
-        schema,
-        fieldConfig,
-        directiveName,
-      )?.[0];
-
-      if (upperDirective) {
-        const { resolve = defaultFieldResolver } = fieldConfig;
-
-        // Replace the original resolver with a function that *first* calls
-        // the original resolver, then converts its result to upper case
-        fieldConfig.resolve = async function (source, args, context, info) {
-          const result = await resolve(source, args, context, info);
-          if (typeof result === 'string') {
-            return result.toUpperCase();
-          }
-          return result;
-        };
-        return fieldConfig;
+export class UpperCaseDirective extends SchemaDirectiveVisitor {
+  visitFieldDefinition(field: GraphQLField<any, any>) {
+    const { resolve = defaultFieldResolver } = field;
+    field.resolve = async function (...args) {
+      const result = await resolve.apply(this, args);
+      if (typeof result === 'string') {
+        return result.toUpperCase();
       }
-    },
-  });
+      return result;
+    };
+  }
 }
diff --git a/sample/23-graphql-code-first/src/common/plugins/complexity.plugin.ts b/sample/23-graphql-code-first/src/common/plugins/complexity.plugin.ts
index d7e3699e9..86883940e 100644
--- a/sample/23-graphql-code-first/src/common/plugins/complexity.plugin.ts
+++ b/sample/23-graphql-code-first/src/common/plugins/complexity.plugin.ts
@@ -1,6 +1,8 @@
-import { ApolloServerPlugin, GraphQLRequestListener } from '@apollo/server';
-import { Plugin } from '@nestjs/apollo';
-import { GraphQLSchemaHost } from '@nestjs/graphql';
+import { GraphQLSchemaHost, Plugin } from '@nestjs/graphql';
+import {
+  ApolloServerPlugin,
+  GraphQLRequestListener,
+} from 'apollo-server-plugin-base';
 import { GraphQLError } from 'graphql';
 import {
   fieldExtensionsEstimator,
@@ -12,7 +14,7 @@ import {
 export class ComplexityPlugin implements ApolloServerPlugin {
   constructor(private gqlSchemaHost: GraphQLSchemaHost) {}
 
-  async requestDidStart(): Promise<GraphQLRequestListener<any>> {
+  async requestDidStart(): Promise<GraphQLRequestListener> {
     const { schema } = this.gqlSchemaHost;
 
     return {
diff --git a/sample/23-graphql-code-first/src/common/plugins/logging.plugin.ts b/sample/23-graphql-code-first/src/common/plugins/logging.plugin.ts
index 77c23a96c..8e48e29cb 100644
--- a/sample/23-graphql-code-first/src/common/plugins/logging.plugin.ts
+++ b/sample/23-graphql-code-first/src/common/plugins/logging.plugin.ts
@@ -1,9 +1,12 @@
-import { ApolloServerPlugin, GraphQLRequestListener } from '@apollo/server';
-import { Plugin } from '@nestjs/apollo';
+import { Plugin } from '@nestjs/graphql';
+import {
+  ApolloServerPlugin,
+  GraphQLRequestListener,
+} from 'apollo-server-plugin-base';
 
 @Plugin()
 export class LoggingPlugin implements ApolloServerPlugin {
-  async requestDidStart(): Promise<GraphQLRequestListener<any>> {
+  async requestDidStart(): Promise<GraphQLRequestListener> {
     console.log('Request started');
     return {
       async willSendResponse() {
diff --git a/sample/23-graphql-code-first/src/recipes/models/recipe.model.ts b/sample/23-graphql-code-first/src/recipes/models/recipe.model.ts
index ef0a772bc..2193b2310 100644
--- a/sample/23-graphql-code-first/src/recipes/models/recipe.model.ts
+++ b/sample/23-graphql-code-first/src/recipes/models/recipe.model.ts
@@ -1,11 +1,11 @@
-import { Directive, Field, ID, ObjectType } from '@nestjs/graphql';
+import { Field, ID, ObjectType } from '@nestjs/graphql';
 
 @ObjectType({ description: 'recipe ' })
 export class Recipe {
   @Field(type => ID)
   id: string;
 
-  @Directive('@upper')
+  @Field()
   title: string;
 
   @Field({ nullable: true })
diff --git a/sample/23-graphql-code-first/tsconfig.json b/sample/23-graphql-code-first/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/23-graphql-code-first/tsconfig.json
+++ b/sample/23-graphql-code-first/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/24-serve-static/package-lock.json b/sample/24-serve-static/package-lock.json
index 01d8f21ad..42b8085b2 100644
Binary files a/sample/24-serve-static/package-lock.json and b/sample/24-serve-static/package-lock.json differ
diff --git a/sample/24-serve-static/package.json b/sample/24-serve-static/package.json
index e7f0ec201..606e4d648 100644
--- a/sample/24-serve-static/package.json
+++ b/sample/24-serve-static/package.json
@@ -19,35 +19,35 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/serve-static": "3.0.1",
-    "@nestjs/platform-express": "9.3.12",
-    "class-transformer": "0.5.1",
-    "class-validator": "0.14.0",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/serve-static": "2.2.2",
+    "@nestjs/platform-express": "8.2.3",
+    "class-transformer": "0.4.0",
+    "class-validator": "0.13.2",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.5.5"
+    "rimraf": "3.0.2",
+    "rxjs": "7.4.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
     "@types/express": "4.17.13",
-    "@types/node": "18.0.3",
-    "@types/supertest": "2.0.12",
-    "jest": "28.1.2",
-    "prettier": "2.7.1",
-    "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
-    "ts-loader": "9.3.1",
-    "ts-node": "10.8.2",
-    "tsconfig-paths": "4.0.0",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.26.0",
-    "typescript": "4.9.5"
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-import": "2.25.3",
+    "typescript": "4.3.5"
   }
 }
diff --git a/sample/24-serve-static/src/app.module.ts b/sample/24-serve-static/src/app.module.ts
index 4fbea3cf2..3f4864ce5 100644
--- a/sample/24-serve-static/src/app.module.ts
+++ b/sample/24-serve-static/src/app.module.ts
@@ -7,7 +7,7 @@ import { AppController } from './app.controller';
   imports: [
     ServeStaticModule.forRoot({
       rootPath: join(__dirname, '..', 'client'),
-      exclude: ['/api/(.*)'],
+      exclude: ['/api*'],
     }),
   ],
   controllers: [AppController],
diff --git a/sample/24-serve-static/tsconfig.json b/sample/24-serve-static/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/24-serve-static/tsconfig.json
+++ b/sample/24-serve-static/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/25-dynamic-modules/README.md b/sample/25-dynamic-modules/README.md
index 9343fcc8a..a59ef9241 100644
--- a/sample/25-dynamic-modules/README.md
+++ b/sample/25-dynamic-modules/README.md
@@ -1,5 +1,5 @@
 <p align="center">
-  <a href="http://nestjs.com/" target="blank"><img src="https://nestjs.com/img/logo-small.svg" width="120" alt="Nest Logo" /></a>
+  <a href="http://nestjs.com/" target="blank"><img src="https://nestjs.com/img/logo_text.svg" width="320" alt="Nest Logo" /></a>
 </p>
 
 [travis-image]: https://api.travis-ci.org/nestjs/nest.svg?branch=master
diff --git a/sample/25-dynamic-modules/package-lock.json b/sample/25-dynamic-modules/package-lock.json
index 9bb761fd3..249909939 100644
Binary files a/sample/25-dynamic-modules/package-lock.json and b/sample/25-dynamic-modules/package-lock.json differ
diff --git a/sample/25-dynamic-modules/package.json b/sample/25-dynamic-modules/package.json
index 337372628..3636a758a 100644
--- a/sample/25-dynamic-modules/package.json
+++ b/sample/25-dynamic-modules/package.json
@@ -19,36 +19,36 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
-    "dotenv": "16.0.1",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/platform-express": "8.2.3",
+    "dotenv": "10.0.0",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.5.5"
+    "rimraf": "3.0.2",
+    "rxjs": "7.4.0"
   },
   "devDependencies": {
     "@types/dotenv": "8.2.0",
-    "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
     "@types/express": "4.17.13",
-    "@types/jest": "28.1.4",
-    "@types/node": "18.0.3",
-    "@types/supertest": "2.0.12",
-    "jest": "28.1.2",
-    "prettier": "2.7.1",
-    "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
-    "ts-loader": "9.3.1",
-    "ts-node": "10.8.2",
-    "tsconfig-paths": "4.0.0",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.26.0",
-    "typescript": "4.9.5"
+    "@types/jest": "27.0.3",
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-import": "2.25.3",
+    "typescript": "4.3.5"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/25-dynamic-modules/tsconfig.json b/sample/25-dynamic-modules/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/25-dynamic-modules/tsconfig.json
+++ b/sample/25-dynamic-modules/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/26-queues/README.md b/sample/26-queues/README.md
index 9343fcc8a..a59ef9241 100644
--- a/sample/26-queues/README.md
+++ b/sample/26-queues/README.md
@@ -1,5 +1,5 @@
 <p align="center">
-  <a href="http://nestjs.com/" target="blank"><img src="https://nestjs.com/img/logo-small.svg" width="120" alt="Nest Logo" /></a>
+  <a href="http://nestjs.com/" target="blank"><img src="https://nestjs.com/img/logo_text.svg" width="320" alt="Nest Logo" /></a>
 </p>
 
 [travis-image]: https://api.travis-ci.org/nestjs/nest.svg?branch=master
diff --git a/sample/26-queues/package-lock.json b/sample/26-queues/package-lock.json
index d432abc4c..91f18d919 100644
Binary files a/sample/26-queues/package-lock.json and b/sample/26-queues/package-lock.json differ
diff --git a/sample/26-queues/package.json b/sample/26-queues/package.json
index 5b1c44d02..adcfafe09 100644
--- a/sample/26-queues/package.json
+++ b/sample/26-queues/package.json
@@ -19,39 +19,39 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/bull": "0.6.3",
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
-    "bull": "4.8.4",
-    "dotenv": "16.0.1",
+    "@nestjs/bull": "0.4.2",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/platform-express": "8.2.3",
+    "bull": "3.29.3",
+    "dotenv": "10.0.0",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.5.5"
+    "rimraf": "3.0.2",
+    "rxjs": "7.4.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
-    "@types/bull": "3.15.9",
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
+    "@types/bull": "3.15.6",
     "@types/dotenv": "8.2.0",
     "@types/express": "4.17.13",
-    "@types/jest": "28.1.4",
-    "@types/node": "18.0.3",
-    "@types/supertest": "2.0.12",
-    "jest": "28.1.2",
-    "prettier": "2.7.1",
-    "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
-    "ts-loader": "9.3.1",
-    "ts-node": "10.8.2",
-    "tsconfig-paths": "4.0.0",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.26.0",
-    "typescript": "4.9.5"
+    "@types/jest": "27.0.3",
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-import": "2.25.3",
+    "typescript": "4.3.5"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/26-queues/tsconfig.json b/sample/26-queues/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/26-queues/tsconfig.json
+++ b/sample/26-queues/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/27-scheduling/README.md b/sample/27-scheduling/README.md
index 9343fcc8a..a59ef9241 100644
--- a/sample/27-scheduling/README.md
+++ b/sample/27-scheduling/README.md
@@ -1,5 +1,5 @@
 <p align="center">
-  <a href="http://nestjs.com/" target="blank"><img src="https://nestjs.com/img/logo-small.svg" width="120" alt="Nest Logo" /></a>
+  <a href="http://nestjs.com/" target="blank"><img src="https://nestjs.com/img/logo_text.svg" width="320" alt="Nest Logo" /></a>
 </p>
 
 [travis-image]: https://api.travis-ci.org/nestjs/nest.svg?branch=master
diff --git a/sample/27-scheduling/package-lock.json b/sample/27-scheduling/package-lock.json
index 19e418ab2..704437eb2 100644
Binary files a/sample/27-scheduling/package-lock.json and b/sample/27-scheduling/package-lock.json differ
diff --git a/sample/27-scheduling/package.json b/sample/27-scheduling/package.json
index 4eda6d526..ef7764c37 100644
--- a/sample/27-scheduling/package.json
+++ b/sample/27-scheduling/package.json
@@ -19,38 +19,38 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
-    "@nestjs/schedule": "2.1.0",
-    "dotenv": "16.0.1",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/platform-express": "8.2.3",
+    "@nestjs/schedule": "1.0.2",
+    "dotenv": "10.0.0",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.5.5"
+    "rimraf": "3.0.2",
+    "rxjs": "7.4.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
-    "@types/bull": "3.15.9",
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
+    "@types/bull": "3.15.6",
     "@types/dotenv": "8.2.0",
     "@types/express": "4.17.13",
-    "@types/jest": "28.1.4",
-    "@types/node": "18.0.3",
-    "@types/supertest": "2.0.12",
-    "jest": "28.1.2",
-    "prettier": "2.7.1",
-    "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
-    "ts-loader": "9.3.1",
-    "ts-node": "10.8.2",
-    "tsconfig-paths": "4.0.0",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.26.0",
-    "typescript": "4.9.5"
+    "@types/jest": "27.0.3",
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-import": "2.25.3",
+    "typescript": "4.3.5"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/27-scheduling/tsconfig.json b/sample/27-scheduling/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/27-scheduling/tsconfig.json
+++ b/sample/27-scheduling/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/28-sse/README.md b/sample/28-sse/README.md
index 9343fcc8a..a59ef9241 100644
--- a/sample/28-sse/README.md
+++ b/sample/28-sse/README.md
@@ -1,5 +1,5 @@
 <p align="center">
-  <a href="http://nestjs.com/" target="blank"><img src="https://nestjs.com/img/logo-small.svg" width="120" alt="Nest Logo" /></a>
+  <a href="http://nestjs.com/" target="blank"><img src="https://nestjs.com/img/logo_text.svg" width="320" alt="Nest Logo" /></a>
 </p>
 
 [travis-image]: https://api.travis-ci.org/nestjs/nest.svg?branch=master
diff --git a/sample/28-sse/package-lock.json b/sample/28-sse/package-lock.json
index ca85e404e..98d639b81 100644
Binary files a/sample/28-sse/package-lock.json and b/sample/28-sse/package-lock.json differ
diff --git a/sample/28-sse/package.json b/sample/28-sse/package.json
index 5e46008b2..62575d555 100644
--- a/sample/28-sse/package.json
+++ b/sample/28-sse/package.json
@@ -19,35 +19,35 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/platform-express": "8.2.3",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.5.5"
+    "rimraf": "3.0.2",
+    "rxjs": "7.4.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
     "@types/dotenv": "8.2.0",
     "@types/express": "4.17.13",
-    "@types/jest": "28.1.4",
-    "@types/node": "18.0.3",
-    "@types/supertest": "2.0.12",
-    "jest": "28.1.2",
-    "prettier": "2.7.1",
-    "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
-    "ts-loader": "9.3.1",
-    "ts-node": "10.8.2",
-    "tsconfig-paths": "4.0.0",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.26.0",
-    "typescript": "4.9.5"
+    "@types/jest": "27.0.3",
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-import": "2.25.3",
+    "typescript": "4.3.5"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/28-sse/src/main.ts b/sample/28-sse/src/main.ts
index 4d8008da5..e1e10d969 100644
--- a/sample/28-sse/src/main.ts
+++ b/sample/28-sse/src/main.ts
@@ -2,10 +2,7 @@ import { NestFactory } from '@nestjs/core';
 import { AppModule } from './app.module';
 
 async function bootstrap() {
-  const app = await NestFactory.create(AppModule, {
-    forceCloseConnections: true,
-  });
-  app.enableShutdownHooks();
+  const app = await NestFactory.create(AppModule);
   await app.listen(3000);
   console.log(`Application is running on: ${await app.getUrl()}`);
 }
diff --git a/sample/28-sse/tsconfig.json b/sample/28-sse/tsconfig.json
index 1bbdea209..4e6e210f1 100644
--- a/sample/28-sse/tsconfig.json
+++ b/sample/28-sse/tsconfig.json
@@ -5,7 +5,7 @@
     "removeComments": true,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/29-file-upload/e2e/app/app.e2e-spec.ts b/sample/29-file-upload/e2e/app/app.e2e-spec.ts
index 6f8bc9034..826b5ba8d 100644
--- a/sample/29-file-upload/e2e/app/app.e2e-spec.ts
+++ b/sample/29-file-upload/e2e/app/app.e2e-spec.ts
@@ -1,6 +1,7 @@
 import { INestApplication } from '@nestjs/common';
 import { Test } from '@nestjs/testing';
 import { readFileSync } from 'fs';
+import { join } from 'path';
 import * as request from 'supertest';
 import { AppModule } from '../../src/app.module';
 
@@ -29,40 +30,6 @@ describe('E2E FileTest', () => {
       });
   });
 
-  it('should allow for file uploads that pass validation', async () => {
-    return request(app.getHttpServer())
-      .post('/file/pass-validation')
-      .attach('file', './package.json')
-      .field('name', 'test')
-      .expect(201)
-      .expect({
-        body: {
-          name: 'test',
-        },
-        file: readFileSync('./package.json').toString(),
-      });
-  });
-
-  it('should throw for file uploads that do not pass validation', async () => {
-    return request(app.getHttpServer())
-      .post('/file/fail-validation')
-      .attach('file', './package.json')
-      .field('name', 'test')
-      .expect(400);
-  });
-
-  it('should throw when file is required but no file is uploaded', async () => {
-    return request(app.getHttpServer())
-      .post('/file/fail-validation')
-      .expect(400);
-  });
-
-  it('should allow for optional file uploads with validation enabled (fixes #10017)', () => {
-    return request(app.getHttpServer())
-      .post('/file/pass-validation')
-      .expect(201);
-  });
-
   afterAll(async () => {
     await app.close();
   });
diff --git a/sample/29-file-upload/package-lock.json b/sample/29-file-upload/package-lock.json
index 2b858006d..477f91040 100644
Binary files a/sample/29-file-upload/package-lock.json and b/sample/29-file-upload/package-lock.json differ
diff --git a/sample/29-file-upload/package.json b/sample/29-file-upload/package.json
index 88a0effb5..eb8681b02 100644
--- a/sample/29-file-upload/package.json
+++ b/sample/29-file-upload/package.json
@@ -19,37 +19,37 @@
     "test:e2e": "jest --config ./e2e/jest-e2e.json"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/platform-express": "9.3.12",
-    "class-transformer": "0.5.1",
-    "class-validator": "0.14.0",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/platform-express": "8.2.3",
+    "class-transformer": "0.4.0",
+    "class-validator": "0.13.2",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.5.5"
+    "rimraf": "3.0.2",
+    "rxjs": "7.4.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
     "@types/express": "4.17.13",
-    "@types/jest": "28.1.4",
+    "@types/jest": "27.0.3",
     "@types/multer": "1.4.7",
-    "@types/node": "18.0.3",
-    "@types/supertest": "2.0.12",
-    "jest": "28.1.2",
-    "prettier": "2.7.1",
-    "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
-    "ts-loader": "9.3.1",
-    "ts-node": "10.8.2",
-    "tsconfig-paths": "4.0.0",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.26.0",
-    "typescript": "4.9.5"
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-import": "2.25.3",
+    "typescript": "4.3.5"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/29-file-upload/src/app.controller.ts b/sample/29-file-upload/src/app.controller.ts
index 371a1fd69..dc59cd260 100644
--- a/sample/29-file-upload/src/app.controller.ts
+++ b/sample/29-file-upload/src/app.controller.ts
@@ -2,7 +2,6 @@ import {
   Body,
   Controller,
   Get,
-  ParseFilePipeBuilder,
   Post,
   UploadedFile,
   UseInterceptors,
@@ -32,44 +31,4 @@ export class AppController {
       file: file.buffer.toString(),
     };
   }
-
-  @UseInterceptors(FileInterceptor('file'))
-  @Post('file/pass-validation')
-  uploadFileAndPassValidation(
-    @Body() body: SampleDto,
-    @UploadedFile(
-      new ParseFilePipeBuilder()
-        .addFileTypeValidator({
-          fileType: 'json',
-        })
-        .build({
-          fileIsRequired: false,
-        }),
-    )
-    file?: Express.Multer.File,
-  ) {
-    return {
-      body,
-      file: file?.buffer.toString(),
-    };
-  }
-
-  @UseInterceptors(FileInterceptor('file'))
-  @Post('file/fail-validation')
-  uploadFileAndFailValidation(
-    @Body() body: SampleDto,
-    @UploadedFile(
-      new ParseFilePipeBuilder()
-        .addFileTypeValidator({
-          fileType: 'jpg',
-        })
-        .build(),
-    )
-    file: Express.Multer.File,
-  ) {
-    return {
-      body,
-      file: file.buffer.toString(),
-    };
-  }
 }
diff --git a/sample/29-file-upload/tsconfig.json b/sample/29-file-upload/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/29-file-upload/tsconfig.json
+++ b/sample/29-file-upload/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/30-event-emitter/package-lock.json b/sample/30-event-emitter/package-lock.json
index 6808ed49d..2bbbec935 100644
Binary files a/sample/30-event-emitter/package-lock.json and b/sample/30-event-emitter/package-lock.json differ
diff --git a/sample/30-event-emitter/package.json b/sample/30-event-emitter/package.json
index ae503c037..3378b3e56 100644
--- a/sample/30-event-emitter/package.json
+++ b/sample/30-event-emitter/package.json
@@ -19,35 +19,35 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/event-emitter": "1.2.0",
-    "@nestjs/platform-express": "9.3.12",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/event-emitter": "1.0.0",
+    "@nestjs/platform-express": "8.2.3",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.5.5"
+    "rimraf": "3.0.2",
+    "rxjs": "7.4.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
     "@types/express": "4.17.13",
-    "@types/jest": "28.1.4",
-    "@types/node": "18.0.3",
-    "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.26.0",
-    "jest": "28.1.2",
-    "prettier": "2.7.1",
-    "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
-    "ts-loader": "9.3.1",
-    "ts-node": "10.8.2",
-    "tsconfig-paths": "4.0.0",
-    "typescript": "4.9.5"
+    "@types/jest": "27.0.3",
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-import": "2.25.3",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "typescript": "4.3.5"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/30-event-emitter/tsconfig.json b/sample/30-event-emitter/tsconfig.json
index d670b01d5..a0e283732 100644
--- a/sample/30-event-emitter/tsconfig.json
+++ b/sample/30-event-emitter/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/31-graphql-federation-code-first/README.md b/sample/31-graphql-federation-code-first/README.md
index bbe0acfd8..e7b90c765 100644
--- a/sample/31-graphql-federation-code-first/README.md
+++ b/sample/31-graphql-federation-code-first/README.md
@@ -4,7 +4,7 @@ A simple example of GraphQL Federation using Code First approach.
 
 ## Execution
 
-Make sure to start the two sub-graph applications first, then the gateway. Otherwise the gateway won't be able to fetch schemas from the sub-graphs.
+Make sure to start the two sub-graph applications first, then the gatway. Otherwise the gateway won't be able to fetch schemas from the sub-graphs.
 
 ```sh
 cd users-application && npm run start
diff --git a/sample/31-graphql-federation-code-first/gateway/README.md b/sample/31-graphql-federation-code-first/gateway/README.md
index 262b3aaa1..9fe8812ff 100644
--- a/sample/31-graphql-federation-code-first/gateway/README.md
+++ b/sample/31-graphql-federation-code-first/gateway/README.md
@@ -1,5 +1,5 @@
 <p align="center">
-  <a href="http://nestjs.com/" target="blank"><img src="https://nestjs.com/img/logo-small.svg" width="120" alt="Nest Logo" /></a>
+  <a href="http://nestjs.com/" target="blank"><img src="https://nestjs.com/img/logo_text.svg" width="320" alt="Nest Logo" /></a>
 </p>
 
 [circleci-image]: https://img.shields.io/circleci/build/github/nestjs/nest/master?token=abc123def456
diff --git a/sample/31-graphql-federation-code-first/gateway/package-lock.json b/sample/31-graphql-federation-code-first/gateway/package-lock.json
index 9f8bf7aae..5e620eaac 100644
Binary files a/sample/31-graphql-federation-code-first/gateway/package-lock.json and b/sample/31-graphql-federation-code-first/gateway/package-lock.json differ
diff --git a/sample/31-graphql-federation-code-first/gateway/package.json b/sample/31-graphql-federation-code-first/gateway/package.json
index cf98ac931..9c1f5e6d8 100644
--- a/sample/31-graphql-federation-code-first/gateway/package.json
+++ b/sample/31-graphql-federation-code-first/gateway/package.json
@@ -21,41 +21,40 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@apollo/gateway": "2.4.0",
-    "@apollo/server": "4.5.0",
-    "@nestjs/apollo": "11.0.4",
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/graphql": "11.0.0",
-    "@nestjs/platform-express": "9.3.12",
-    "graphql": "16.6.0",
-    "graphql-tools": "8.3.19",
+    "@apollo/gateway": "0.44.1",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/graphql": "9.1.2",
+    "@nestjs/platform-express": "8.2.3",
+    "apollo-server-express": "3.5.0",
+    "graphql": "15.7.2",
+    "graphql-tools": "7.0.5",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.8.0",
-    "ts-morph": "17.0.1"
+    "rimraf": "3.0.2",
+    "rxjs": "7.4.0",
+    "ts-morph": "12.2.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.2.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
-    "@types/express": "4.17.17",
-    "@types/jest": "29.4.0",
-    "@types/node": "18.15.0",
-    "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.35.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-prettier": "4.2.1",
-    "jest": "29.5.0",
-    "prettier": "2.8.4",
-    "supertest": "6.3.3",
-    "ts-jest": "29.0.5",
-    "ts-loader": "9.4.2",
-    "ts-node": "10.9.1",
-    "tsconfig-paths": "4.1.2",
-    "typescript": "4.9.5"
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
+    "@types/express": "4.17.13",
+    "@types/jest": "27.0.3",
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-prettier": "4.0.0",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "typescript": "4.3.5"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/31-graphql-federation-code-first/gateway/src/app.module.ts b/sample/31-graphql-federation-code-first/gateway/src/app.module.ts
index 8c6c39d1e..c07abd63e 100644
--- a/sample/31-graphql-federation-code-first/gateway/src/app.module.ts
+++ b/sample/31-graphql-federation-code-first/gateway/src/app.module.ts
@@ -1,21 +1,19 @@
-import { IntrospectAndCompose } from '@apollo/gateway';
-import { ApolloGatewayDriver, ApolloGatewayDriverConfig } from '@nestjs/apollo';
 import { Module } from '@nestjs/common';
-import { GraphQLModule } from '@nestjs/graphql';
 import { AppController } from './app.controller';
 import { AppService } from './app.service';
+import { GraphQLGatewayModule } from '@nestjs/graphql';
 
 @Module({
   imports: [
-    GraphQLModule.forRoot<ApolloGatewayDriverConfig>({
-      driver: ApolloGatewayDriver,
+    GraphQLGatewayModule.forRoot({
+      server: {
+        cors: true,
+      },
       gateway: {
-        supergraphSdl: new IntrospectAndCompose({
-          subgraphs: [
-            { name: 'users', url: 'http://localhost:3000/graphql' },
-            { name: 'posts', url: 'http://localhost:3001/graphql' },
-          ],
-        }),
+        serviceList: [
+          { name: 'users', url: 'http://localhost:3000/graphql' },
+          { name: 'posts', url: 'http://localhost:3001/graphql' },
+        ],
       },
     }),
   ],
diff --git a/sample/31-graphql-federation-code-first/gateway/tsconfig.json b/sample/31-graphql-federation-code-first/gateway/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/31-graphql-federation-code-first/gateway/tsconfig.json
+++ b/sample/31-graphql-federation-code-first/gateway/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/31-graphql-federation-code-first/posts-application/README.md b/sample/31-graphql-federation-code-first/posts-application/README.md
index 262b3aaa1..9fe8812ff 100644
--- a/sample/31-graphql-federation-code-first/posts-application/README.md
+++ b/sample/31-graphql-federation-code-first/posts-application/README.md
@@ -1,5 +1,5 @@
 <p align="center">
-  <a href="http://nestjs.com/" target="blank"><img src="https://nestjs.com/img/logo-small.svg" width="120" alt="Nest Logo" /></a>
+  <a href="http://nestjs.com/" target="blank"><img src="https://nestjs.com/img/logo_text.svg" width="320" alt="Nest Logo" /></a>
 </p>
 
 [circleci-image]: https://img.shields.io/circleci/build/github/nestjs/nest/master?token=abc123def456
diff --git a/sample/31-graphql-federation-code-first/posts-application/package-lock.json b/sample/31-graphql-federation-code-first/posts-application/package-lock.json
index b0c7e5696..2acac2e3e 100644
Binary files a/sample/31-graphql-federation-code-first/posts-application/package-lock.json and b/sample/31-graphql-federation-code-first/posts-application/package-lock.json differ
diff --git a/sample/31-graphql-federation-code-first/posts-application/package.json b/sample/31-graphql-federation-code-first/posts-application/package.json
index 6bcdf34d4..97d5c10d1 100644
--- a/sample/31-graphql-federation-code-first/posts-application/package.json
+++ b/sample/31-graphql-federation-code-first/posts-application/package.json
@@ -21,42 +21,42 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@apollo/gateway": "2.4.0",
-    "@apollo/server": "4.5.0",
-    "@apollo/subgraph": "2.4.0",
-    "@nestjs/apollo": "11.0.4",
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/graphql": "11.0.0",
-    "@nestjs/platform-express": "9.3.12",
-    "graphql": "16.6.0",
-    "graphql-tools": "8.3.19",
+    "@apollo/federation": "0.33.8",
+    "@apollo/gateway": "0.44.1",
+    "@apollo/subgraph": "0.1.5",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/graphql": "9.1.2",
+    "@nestjs/platform-express": "8.2.3",
+    "apollo-server-express": "3.5.0",
+    "graphql": "15.7.2",
+    "graphql-tools": "7.0.5",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.8.0",
-    "ts-morph": "17.0.1"
+    "rimraf": "3.0.2",
+    "rxjs": "7.4.0",
+    "ts-morph": "12.2.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.2.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
-    "@types/express": "4.17.17",
-    "@types/jest": "29.4.0",
-    "@types/node": "18.15.0",
-    "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.35.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-prettier": "4.2.1",
-    "jest": "29.5.0",
-    "prettier": "2.8.4",
-    "supertest": "6.3.3",
-    "ts-jest": "29.0.5",
-    "ts-loader": "9.4.2",
-    "ts-node": "10.9.1",
-    "tsconfig-paths": "4.1.2",
-    "typescript": "4.9.5"
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
+    "@types/express": "4.17.13",
+    "@types/jest": "27.0.3",
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-prettier": "4.0.0",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "typescript": "4.3.5"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/31-graphql-federation-code-first/posts-application/src/posts/posts.module.ts b/sample/31-graphql-federation-code-first/posts-application/src/posts/posts.module.ts
index e2cf306d9..4ebf3c92f 100644
--- a/sample/31-graphql-federation-code-first/posts-application/src/posts/posts.module.ts
+++ b/sample/31-graphql-federation-code-first/posts-application/src/posts/posts.module.ts
@@ -1,9 +1,5 @@
-import {
-  ApolloFederationDriver,
-  ApolloFederationDriverConfig,
-} from '@nestjs/apollo';
 import { Module } from '@nestjs/common';
-import { GraphQLModule } from '@nestjs/graphql';
+import { GraphQLFederationModule } from '@nestjs/graphql';
 import { User } from './models/user.model';
 import { PostsResolver } from './posts.resolver';
 import { PostsService } from './posts.service';
@@ -11,8 +7,7 @@ import { UsersResolver } from './users.resolver';
 
 @Module({
   imports: [
-    GraphQLModule.forRoot<ApolloFederationDriverConfig>({
-      driver: ApolloFederationDriver,
+    GraphQLFederationModule.forRoot({
       autoSchemaFile: true,
       buildSchemaOptions: {
         orphanedTypes: [User],
diff --git a/sample/31-graphql-federation-code-first/posts-application/src/posts/posts.resolver.ts b/sample/31-graphql-federation-code-first/posts-application/src/posts/posts.resolver.ts
index c66f8dc38..891f1398a 100644
--- a/sample/31-graphql-federation-code-first/posts-application/src/posts/posts.resolver.ts
+++ b/sample/31-graphql-federation-code-first/posts-application/src/posts/posts.resolver.ts
@@ -9,14 +9,13 @@ import {
 import { Post } from './models/post.model';
 import { User } from './models/user.model';
 import { PostsService } from './posts.service';
-import { ParseIntPipe } from '@nestjs/common';
 
 @Resolver((of) => Post)
 export class PostsResolver {
   constructor(private readonly postsService: PostsService) {}
 
   @Query((returns) => Post)
-  post(@Args({ name: 'id', type: () => ID }, ParseIntPipe) id: number): Post {
+  post(@Args({ name: 'id', type: () => ID }) id: number): Post {
     return this.postsService.findOne(id);
   }
 
diff --git a/sample/31-graphql-federation-code-first/posts-application/tsconfig.json b/sample/31-graphql-federation-code-first/posts-application/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/31-graphql-federation-code-first/posts-application/tsconfig.json
+++ b/sample/31-graphql-federation-code-first/posts-application/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/31-graphql-federation-code-first/users-application/README.md b/sample/31-graphql-federation-code-first/users-application/README.md
index 262b3aaa1..9fe8812ff 100644
--- a/sample/31-graphql-federation-code-first/users-application/README.md
+++ b/sample/31-graphql-federation-code-first/users-application/README.md
@@ -1,5 +1,5 @@
 <p align="center">
-  <a href="http://nestjs.com/" target="blank"><img src="https://nestjs.com/img/logo-small.svg" width="120" alt="Nest Logo" /></a>
+  <a href="http://nestjs.com/" target="blank"><img src="https://nestjs.com/img/logo_text.svg" width="320" alt="Nest Logo" /></a>
 </p>
 
 [circleci-image]: https://img.shields.io/circleci/build/github/nestjs/nest/master?token=abc123def456
diff --git a/sample/31-graphql-federation-code-first/users-application/package-lock.json b/sample/31-graphql-federation-code-first/users-application/package-lock.json
index 0af9f34e7..a3c0b6520 100644
Binary files a/sample/31-graphql-federation-code-first/users-application/package-lock.json and b/sample/31-graphql-federation-code-first/users-application/package-lock.json differ
diff --git a/sample/31-graphql-federation-code-first/users-application/package.json b/sample/31-graphql-federation-code-first/users-application/package.json
index 87bfa1797..ac1b7973e 100644
--- a/sample/31-graphql-federation-code-first/users-application/package.json
+++ b/sample/31-graphql-federation-code-first/users-application/package.json
@@ -20,42 +20,42 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@apollo/gateway": "2.4.0",
-    "@apollo/server": "4.5.0",
-    "@apollo/subgraph": "2.4.0",
-    "@nestjs/apollo": "11.0.4",
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/graphql": "11.0.0",
-    "@nestjs/platform-express": "9.3.12",
-    "graphql": "16.6.0",
-    "graphql-tools": "8.3.19",
+    "@apollo/federation": "0.33.8",
+    "@apollo/gateway": "0.44.1",
+    "@apollo/subgraph": "0.1.5",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/graphql": "9.1.2",
+    "@nestjs/platform-express": "8.2.3",
+    "apollo-server-express": "3.5.0",
+    "graphql": "15.7.2",
+    "graphql-tools": "7.0.5",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.8.0",
-    "ts-morph": "17.0.1"
+    "rimraf": "3.0.2",
+    "rxjs": "7.4.0",
+    "ts-morph": "12.2.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.2.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
-    "@types/express": "4.17.17",
-    "@types/jest": "29.4.0",
-    "@types/node": "18.15.0",
-    "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.35.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-prettier": "4.2.1",
-    "jest": "29.5.0",
-    "prettier": "2.8.4",
-    "supertest": "6.3.3",
-    "ts-jest": "29.0.5",
-    "ts-loader": "9.4.2",
-    "ts-node": "10.9.1",
-    "tsconfig-paths": "4.1.2",
-    "typescript": "4.9.5"
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
+    "@types/express": "4.17.13",
+    "@types/jest": "27.0.3",
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-prettier": "4.0.0",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "typescript": "4.3.5"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/31-graphql-federation-code-first/users-application/src/users/users.module.ts b/sample/31-graphql-federation-code-first/users-application/src/users/users.module.ts
index fea78661e..f70c88091 100644
--- a/sample/31-graphql-federation-code-first/users-application/src/users/users.module.ts
+++ b/sample/31-graphql-federation-code-first/users-application/src/users/users.module.ts
@@ -1,17 +1,12 @@
-import {
-  ApolloFederationDriver,
-  ApolloFederationDriverConfig,
-} from '@nestjs/apollo';
 import { Module } from '@nestjs/common';
-import { GraphQLModule } from '@nestjs/graphql';
+import { GraphQLFederationModule } from '@nestjs/graphql';
 import { UsersResolver } from './users.resolver';
 import { UsersService } from './users.service';
 
 @Module({
   providers: [UsersResolver, UsersService],
   imports: [
-    GraphQLModule.forRoot<ApolloFederationDriverConfig>({
-      driver: ApolloFederationDriver,
+    GraphQLFederationModule.forRoot({
       autoSchemaFile: true,
     }),
   ],
diff --git a/sample/31-graphql-federation-code-first/users-application/tsconfig.json b/sample/31-graphql-federation-code-first/users-application/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/31-graphql-federation-code-first/users-application/tsconfig.json
+++ b/sample/31-graphql-federation-code-first/users-application/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/32-graphql-federation-schema-first/README.md b/sample/32-graphql-federation-schema-first/README.md
index 7a0f47a9d..1f3fd3dc1 100644
--- a/sample/32-graphql-federation-schema-first/README.md
+++ b/sample/32-graphql-federation-schema-first/README.md
@@ -4,7 +4,7 @@ A simple example of GraphQL Federation using Schema First approach.
 
 ## Execution
 
-Make sure to start the two sub-graph applications first, then the gateway. Otherwise the gateway won't be able to fetch schemas from the sub-graphs.
+Make sure to start the two sub-graph applications first, then the gatway. Otherwise the gateway won't be able to fetch schemas from the sub-graphs.
 
 ```sh
 cd users-application && npm run start
diff --git a/sample/32-graphql-federation-schema-first/gateway/README.md b/sample/32-graphql-federation-schema-first/gateway/README.md
index 262b3aaa1..9fe8812ff 100644
--- a/sample/32-graphql-federation-schema-first/gateway/README.md
+++ b/sample/32-graphql-federation-schema-first/gateway/README.md
@@ -1,5 +1,5 @@
 <p align="center">
-  <a href="http://nestjs.com/" target="blank"><img src="https://nestjs.com/img/logo-small.svg" width="120" alt="Nest Logo" /></a>
+  <a href="http://nestjs.com/" target="blank"><img src="https://nestjs.com/img/logo_text.svg" width="320" alt="Nest Logo" /></a>
 </p>
 
 [circleci-image]: https://img.shields.io/circleci/build/github/nestjs/nest/master?token=abc123def456
diff --git a/sample/32-graphql-federation-schema-first/gateway/package-lock.json b/sample/32-graphql-federation-schema-first/gateway/package-lock.json
index 9b0805d5d..5e620eaac 100644
Binary files a/sample/32-graphql-federation-schema-first/gateway/package-lock.json and b/sample/32-graphql-federation-schema-first/gateway/package-lock.json differ
diff --git a/sample/32-graphql-federation-schema-first/gateway/package.json b/sample/32-graphql-federation-schema-first/gateway/package.json
index ff3ff8bf0..9c1f5e6d8 100644
--- a/sample/32-graphql-federation-schema-first/gateway/package.json
+++ b/sample/32-graphql-federation-schema-first/gateway/package.json
@@ -21,41 +21,40 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@apollo/gateway": "2.4.0",
-    "@apollo/server": "^4.4.1",
-    "@nestjs/apollo": "11.0.4",
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/graphql": "11.0.0",
-    "@nestjs/platform-express": "9.3.12",
-    "graphql": "16.6.0",
-    "graphql-tools": "8.3.19",
+    "@apollo/gateway": "0.44.1",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/graphql": "9.1.2",
+    "@nestjs/platform-express": "8.2.3",
+    "apollo-server-express": "3.5.0",
+    "graphql": "15.7.2",
+    "graphql-tools": "7.0.5",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.8.0",
-    "ts-morph": "17.0.1"
+    "rimraf": "3.0.2",
+    "rxjs": "7.4.0",
+    "ts-morph": "12.2.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.2.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
-    "@types/express": "4.17.17",
-    "@types/jest": "29.4.0",
-    "@types/node": "18.15.0",
-    "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.35.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-prettier": "4.2.1",
-    "jest": "29.5.0",
-    "prettier": "2.8.4",
-    "supertest": "6.3.3",
-    "ts-jest": "29.0.5",
-    "ts-loader": "9.4.2",
-    "ts-node": "10.9.1",
-    "tsconfig-paths": "4.1.2",
-    "typescript": "4.9.5"
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
+    "@types/express": "4.17.13",
+    "@types/jest": "27.0.3",
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-prettier": "4.0.0",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "typescript": "4.3.5"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/32-graphql-federation-schema-first/gateway/src/app.module.ts b/sample/32-graphql-federation-schema-first/gateway/src/app.module.ts
index 8c6c39d1e..c07abd63e 100644
--- a/sample/32-graphql-federation-schema-first/gateway/src/app.module.ts
+++ b/sample/32-graphql-federation-schema-first/gateway/src/app.module.ts
@@ -1,21 +1,19 @@
-import { IntrospectAndCompose } from '@apollo/gateway';
-import { ApolloGatewayDriver, ApolloGatewayDriverConfig } from '@nestjs/apollo';
 import { Module } from '@nestjs/common';
-import { GraphQLModule } from '@nestjs/graphql';
 import { AppController } from './app.controller';
 import { AppService } from './app.service';
+import { GraphQLGatewayModule } from '@nestjs/graphql';
 
 @Module({
   imports: [
-    GraphQLModule.forRoot<ApolloGatewayDriverConfig>({
-      driver: ApolloGatewayDriver,
+    GraphQLGatewayModule.forRoot({
+      server: {
+        cors: true,
+      },
       gateway: {
-        supergraphSdl: new IntrospectAndCompose({
-          subgraphs: [
-            { name: 'users', url: 'http://localhost:3000/graphql' },
-            { name: 'posts', url: 'http://localhost:3001/graphql' },
-          ],
-        }),
+        serviceList: [
+          { name: 'users', url: 'http://localhost:3000/graphql' },
+          { name: 'posts', url: 'http://localhost:3001/graphql' },
+        ],
       },
     }),
   ],
diff --git a/sample/32-graphql-federation-schema-first/gateway/tsconfig.json b/sample/32-graphql-federation-schema-first/gateway/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/32-graphql-federation-schema-first/gateway/tsconfig.json
+++ b/sample/32-graphql-federation-schema-first/gateway/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/32-graphql-federation-schema-first/posts-application/README.md b/sample/32-graphql-federation-schema-first/posts-application/README.md
index 262b3aaa1..9fe8812ff 100644
--- a/sample/32-graphql-federation-schema-first/posts-application/README.md
+++ b/sample/32-graphql-federation-schema-first/posts-application/README.md
@@ -1,5 +1,5 @@
 <p align="center">
-  <a href="http://nestjs.com/" target="blank"><img src="https://nestjs.com/img/logo-small.svg" width="120" alt="Nest Logo" /></a>
+  <a href="http://nestjs.com/" target="blank"><img src="https://nestjs.com/img/logo_text.svg" width="320" alt="Nest Logo" /></a>
 </p>
 
 [circleci-image]: https://img.shields.io/circleci/build/github/nestjs/nest/master?token=abc123def456
diff --git a/sample/32-graphql-federation-schema-first/posts-application/package-lock.json b/sample/32-graphql-federation-schema-first/posts-application/package-lock.json
index 2eefbed12..2acac2e3e 100644
Binary files a/sample/32-graphql-federation-schema-first/posts-application/package-lock.json and b/sample/32-graphql-federation-schema-first/posts-application/package-lock.json differ
diff --git a/sample/32-graphql-federation-schema-first/posts-application/package.json b/sample/32-graphql-federation-schema-first/posts-application/package.json
index 2f071dace..97d5c10d1 100644
--- a/sample/32-graphql-federation-schema-first/posts-application/package.json
+++ b/sample/32-graphql-federation-schema-first/posts-application/package.json
@@ -21,42 +21,42 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@apollo/gateway": "2.4.0",
-    "@apollo/server": "^4.4.1",
-    "@apollo/subgraph": "2.4.0",
-    "@nestjs/apollo": "11.0.4",
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/graphql": "11.0.0",
-    "@nestjs/platform-express": "9.3.12",
-    "graphql": "16.6.0",
-    "graphql-tools": "8.3.19",
+    "@apollo/federation": "0.33.8",
+    "@apollo/gateway": "0.44.1",
+    "@apollo/subgraph": "0.1.5",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/graphql": "9.1.2",
+    "@nestjs/platform-express": "8.2.3",
+    "apollo-server-express": "3.5.0",
+    "graphql": "15.7.2",
+    "graphql-tools": "7.0.5",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.8.0",
-    "ts-morph": "17.0.1"
+    "rimraf": "3.0.2",
+    "rxjs": "7.4.0",
+    "ts-morph": "12.2.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.2.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
-    "@types/express": "4.17.17",
-    "@types/jest": "29.4.0",
-    "@types/node": "18.15.0",
-    "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.35.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-prettier": "4.2.1",
-    "jest": "29.5.0",
-    "prettier": "2.8.4",
-    "supertest": "6.3.3",
-    "ts-jest": "29.0.5",
-    "ts-loader": "9.4.2",
-    "ts-node": "10.9.1",
-    "tsconfig-paths": "4.1.2",
-    "typescript": "4.9.5"
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
+    "@types/express": "4.17.13",
+    "@types/jest": "27.0.3",
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-prettier": "4.0.0",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "typescript": "4.3.5"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/32-graphql-federation-schema-first/posts-application/src/posts/posts.module.ts b/sample/32-graphql-federation-schema-first/posts-application/src/posts/posts.module.ts
index 2254d715d..8c34378d7 100644
--- a/sample/32-graphql-federation-schema-first/posts-application/src/posts/posts.module.ts
+++ b/sample/32-graphql-federation-schema-first/posts-application/src/posts/posts.module.ts
@@ -1,17 +1,12 @@
-import {
-  ApolloFederationDriver,
-  ApolloFederationDriverConfig,
-} from '@nestjs/apollo';
 import { Module } from '@nestjs/common';
-import { GraphQLModule } from '@nestjs/graphql';
+import { GraphQLFederationModule } from '@nestjs/graphql';
 import { PostsResolver } from './posts.resolver';
 import { PostsService } from './posts.service';
 import { UsersResolver } from './users.resolver';
 
 @Module({
   imports: [
-    GraphQLModule.forRoot<ApolloFederationDriverConfig>({
-      driver: ApolloFederationDriver,
+    GraphQLFederationModule.forRoot({
       typePaths: ['**/*.graphql'],
     }),
   ],
diff --git a/sample/32-graphql-federation-schema-first/posts-application/tsconfig.json b/sample/32-graphql-federation-schema-first/posts-application/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/32-graphql-federation-schema-first/posts-application/tsconfig.json
+++ b/sample/32-graphql-federation-schema-first/posts-application/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/32-graphql-federation-schema-first/users-application/README.md b/sample/32-graphql-federation-schema-first/users-application/README.md
index 262b3aaa1..9fe8812ff 100644
--- a/sample/32-graphql-federation-schema-first/users-application/README.md
+++ b/sample/32-graphql-federation-schema-first/users-application/README.md
@@ -1,5 +1,5 @@
 <p align="center">
-  <a href="http://nestjs.com/" target="blank"><img src="https://nestjs.com/img/logo-small.svg" width="120" alt="Nest Logo" /></a>
+  <a href="http://nestjs.com/" target="blank"><img src="https://nestjs.com/img/logo_text.svg" width="320" alt="Nest Logo" /></a>
 </p>
 
 [circleci-image]: https://img.shields.io/circleci/build/github/nestjs/nest/master?token=abc123def456
diff --git a/sample/32-graphql-federation-schema-first/users-application/package-lock.json b/sample/32-graphql-federation-schema-first/users-application/package-lock.json
index 4f6f15d4c..a3c0b6520 100644
Binary files a/sample/32-graphql-federation-schema-first/users-application/package-lock.json and b/sample/32-graphql-federation-schema-first/users-application/package-lock.json differ
diff --git a/sample/32-graphql-federation-schema-first/users-application/package.json b/sample/32-graphql-federation-schema-first/users-application/package.json
index 0c016b1b6..ac1b7973e 100644
--- a/sample/32-graphql-federation-schema-first/users-application/package.json
+++ b/sample/32-graphql-federation-schema-first/users-application/package.json
@@ -20,42 +20,42 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@apollo/gateway": "2.4.0",
-    "@apollo/server": "^4.4.1",
-    "@apollo/subgraph": "2.4.0",
-    "@nestjs/apollo": "11.0.4",
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/graphql": "11.0.0",
-    "@nestjs/platform-express": "9.3.12",
-    "graphql": "16.6.0",
-    "graphql-tools": "8.3.19",
+    "@apollo/federation": "0.33.8",
+    "@apollo/gateway": "0.44.1",
+    "@apollo/subgraph": "0.1.5",
+    "@nestjs/common": "8.2.3",
+    "@nestjs/core": "8.2.3",
+    "@nestjs/graphql": "9.1.2",
+    "@nestjs/platform-express": "8.2.3",
+    "apollo-server-express": "3.5.0",
+    "graphql": "15.7.2",
+    "graphql-tools": "7.0.5",
     "reflect-metadata": "0.1.13",
-    "rimraf": "4.4.1",
-    "rxjs": "7.8.0",
-    "ts-morph": "17.0.1"
+    "rimraf": "3.0.2",
+    "rxjs": "7.4.0",
+    "ts-morph": "12.2.0"
   },
   "devDependencies": {
-    "@nestjs/cli": "9.2.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
-    "@types/express": "4.17.17",
-    "@types/jest": "29.4.0",
-    "@types/node": "18.15.0",
-    "@types/supertest": "2.0.12",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.35.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-prettier": "4.2.1",
-    "jest": "29.5.0",
-    "prettier": "2.8.4",
-    "supertest": "6.3.3",
-    "ts-jest": "29.0.5",
-    "ts-loader": "9.4.2",
-    "ts-node": "10.9.1",
-    "tsconfig-paths": "4.1.2",
-    "typescript": "4.9.5"
+    "@nestjs/cli": "8.1.5",
+    "@nestjs/schematics": "8.0.5",
+    "@nestjs/testing": "8.2.3",
+    "@types/express": "4.17.13",
+    "@types/jest": "27.0.3",
+    "@types/node": "16.11.11",
+    "@types/supertest": "2.0.11",
+    "@typescript-eslint/eslint-plugin": "4.33.0",
+    "@typescript-eslint/parser": "4.33.0",
+    "eslint": "7.32.0",
+    "eslint-config-prettier": "8.3.0",
+    "eslint-plugin-prettier": "4.0.0",
+    "jest": "27.3.1",
+    "prettier": "2.5.0",
+    "supertest": "6.1.6",
+    "ts-jest": "27.0.7",
+    "ts-loader": "9.2.6",
+    "ts-node": "10.4.0",
+    "tsconfig-paths": "3.11.0",
+    "typescript": "4.3.5"
   },
   "jest": {
     "moduleFileExtensions": [
diff --git a/sample/32-graphql-federation-schema-first/users-application/src/users/users.module.ts b/sample/32-graphql-federation-schema-first/users-application/src/users/users.module.ts
index d98abacac..e4a70b139 100644
--- a/sample/32-graphql-federation-schema-first/users-application/src/users/users.module.ts
+++ b/sample/32-graphql-federation-schema-first/users-application/src/users/users.module.ts
@@ -1,17 +1,12 @@
-import {
-  ApolloFederationDriver,
-  ApolloFederationDriverConfig,
-} from '@nestjs/apollo';
 import { Module } from '@nestjs/common';
-import { GraphQLModule } from '@nestjs/graphql';
+import { GraphQLFederationModule } from '@nestjs/graphql';
 import { UsersResolver } from './users.resolver';
 import { UsersService } from './users.service';
 
 @Module({
   providers: [UsersResolver, UsersService],
   imports: [
-    GraphQLModule.forRoot<ApolloFederationDriverConfig>({
-      driver: ApolloFederationDriver,
+    GraphQLFederationModule.forRoot({
       typePaths: ['**/*.graphql'],
     }),
   ],
diff --git a/sample/32-graphql-federation-schema-first/users-application/tsconfig.json b/sample/32-graphql-federation-schema-first/users-application/tsconfig.json
index d9c82ca97..e268e37aa 100644
--- a/sample/32-graphql-federation-schema-first/users-application/tsconfig.json
+++ b/sample/32-graphql-federation-schema-first/users-application/tsconfig.json
@@ -6,7 +6,7 @@
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
     "allowSyntheticDefaultImports": true,
-    "target": "ES2021",
+    "target": "es2017",
     "sourceMap": true,
     "outDir": "./dist",
     "baseUrl": "./",
diff --git a/sample/33-graphql-mercurius/.eslintrc.js b/sample/33-graphql-mercurius/.eslintrc.js
deleted file mode 100644
index 284719548..000000000
--- a/sample/33-graphql-mercurius/.eslintrc.js
+++ /dev/null
@@ -1,23 +0,0 @@
-module.exports = {
-  parser: '@typescript-eslint/parser',
-  parserOptions: {
-    project: 'tsconfig.json',
-    sourceType: 'module',
-  },
-  plugins: ['@typescript-eslint/eslint-plugin'],
-  extends: [
-    'plugin:@typescript-eslint/eslint-recommended',
-    'plugin:@typescript-eslint/recommended',
-    'prettier',
-  ],
-  root: true,
-  env: {
-    node: true,
-    jest: true,
-  },
-  rules: {
-    '@typescript-eslint/interface-name-prefix': 'off',
-    '@typescript-eslint/explicit-function-return-type': 'off',
-    '@typescript-eslint/no-explicit-any': 'off',
-  },
-};
diff --git a/sample/33-graphql-mercurius/.gitignore b/sample/33-graphql-mercurius/.gitignore
deleted file mode 100644
index b5e5f9755..000000000
--- a/sample/33-graphql-mercurius/.gitignore
+++ /dev/null
@@ -1,21 +0,0 @@
-# dependencies
-/node_modules
-
-# IDE
-/.idea
-/.awcache
-/.vscode
-
-# misc
-npm-debug.log
-
-# example
-/quick-start
-
-# tests
-/test
-/coverage
-/.nyc_output
-
-# dist
-/dist
\ No newline at end of file
diff --git a/sample/33-graphql-mercurius/nest-cli.json b/sample/33-graphql-mercurius/nest-cli.json
deleted file mode 100644
index 095fdb25b..000000000
--- a/sample/33-graphql-mercurius/nest-cli.json
+++ /dev/null
@@ -1,12 +0,0 @@
-{
-  "compilerOptions": {
-    "plugins": [
-      {
-        "name": "@nestjs/graphql",
-        "options": {
-          "introspectComments": true
-        }
-      }
-    ]
-  }
-}
diff --git a/sample/33-graphql-mercurius/package-lock.json b/sample/33-graphql-mercurius/package-lock.json
deleted file mode 100644
index c0711430a..000000000
Binary files a/sample/33-graphql-mercurius/package-lock.json and /dev/null differ
diff --git a/sample/33-graphql-mercurius/package.json b/sample/33-graphql-mercurius/package.json
deleted file mode 100644
index b05ea311d..000000000
--- a/sample/33-graphql-mercurius/package.json
+++ /dev/null
@@ -1,55 +0,0 @@
-{
-  "name": "nest-typescript-starter",
-  "version": "1.0.0",
-  "description": "Nest TypeScript starter repository",
-  "license": "MIT",
-  "scripts": {
-    "prebuild": "rimraf dist",
-    "build": "nest build",
-    "format": "prettier --write \"src/**/*.ts\" \"test/**/*.ts\"",
-    "start": "nest start",
-    "start:dev": "nest start --watch",
-    "start:debug": "nest start --debug --watch",
-    "start:prod": "node dist/main",
-    "lint": "eslint '{src,apps,libs,test}/**/*.ts' --fix",
-    "test": "jest",
-    "test:watch": "jest --watch",
-    "test:cov": "jest --coverage",
-    "test:debug": "node --inspect-brk -r tsconfig-paths/register -r ts-node/register node_modules/.bin/jest --runInBand",
-    "test:e2e": "echo 'No e2e tests implemented yet.'"
-  },
-  "dependencies": {
-    "@nestjs/common": "9.3.12",
-    "@nestjs/core": "9.3.12",
-    "@nestjs/graphql": "10.0.18",
-    "@nestjs/mercurius": "10.0.17",
-    "@nestjs/platform-fastify": "9.3.12",
-    "class-transformer": "0.5.1",
-    "class-validator": "0.14.0",
-    "graphql": "16.5.0",
-    "mercurius": "12.2.0",
-    "reflect-metadata": "0.1.13",
-    "rxjs": "7.5.5"
-  },
-  "devDependencies": {
-    "@nestjs/cli": "9.0.0",
-    "@nestjs/schematics": "9.0.4",
-    "@nestjs/testing": "9.3.12",
-    "@types/express": "4.17.13",
-    "@types/node": "18.0.3",
-    "@types/supertest": "2.0.12",
-    "jest": "28.1.2",
-    "prettier": "2.7.1",
-    "supertest": "6.2.4",
-    "ts-jest": "28.0.8",
-    "ts-loader": "9.3.1",
-    "ts-node": "10.8.2",
-    "tsconfig-paths": "4.0.0",
-    "@typescript-eslint/eslint-plugin": "5.56.0",
-    "@typescript-eslint/parser": "5.56.0",
-    "eslint": "8.19.0",
-    "eslint-config-prettier": "8.8.0",
-    "eslint-plugin-import": "2.26.0",
-    "typescript": "4.9.5"
-  }
-}
diff --git a/sample/33-graphql-mercurius/schema.gql b/sample/33-graphql-mercurius/schema.gql
deleted file mode 100644
index e11c56434..000000000
--- a/sample/33-graphql-mercurius/schema.gql
+++ /dev/null
@@ -1,35 +0,0 @@
-# ------------------------------------------------------
-# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
-# ------------------------------------------------------
-
-"""recipe """
-type Recipe {
-  id: ID!
-  title: String!
-  description: String
-  creationDate: Date!
-  ingredients: [String!]!
-}
-
-"""Date custom scalar type"""
-scalar Date
-
-type Query {
-  recipe(id: String!): Recipe!
-  recipes(skip: Int = 0, take: Int = 25): [Recipe!]!
-}
-
-type Mutation {
-  addRecipe(newRecipeData: NewRecipeInput!): Recipe!
-  removeRecipe(id: String!): Boolean!
-}
-
-input NewRecipeInput {
-  title: String!
-  description: String
-  ingredients: [String!]!
-}
-
-type Subscription {
-  recipeAdded: Recipe!
-}
\ No newline at end of file
diff --git a/sample/33-graphql-mercurius/src/app.module.ts b/sample/33-graphql-mercurius/src/app.module.ts
deleted file mode 100644
index 53cc6458e..000000000
--- a/sample/33-graphql-mercurius/src/app.module.ts
+++ /dev/null
@@ -1,17 +0,0 @@
-import { Module } from '@nestjs/common';
-import { GraphQLModule } from '@nestjs/graphql';
-import { MercuriusDriver, MercuriusDriverConfig } from '@nestjs/mercurius';
-import { RecipesModule } from './recipes/recipes.module';
-
-@Module({
-  imports: [
-    RecipesModule,
-    GraphQLModule.forRoot<MercuriusDriverConfig>({
-      driver: MercuriusDriver,
-      autoSchemaFile: 'schema.gql',
-      subscription: true,
-      graphiql: true,
-    }),
-  ],
-})
-export class AppModule {}
diff --git a/sample/33-graphql-mercurius/src/common/scalars/date.scalar.ts b/sample/33-graphql-mercurius/src/common/scalars/date.scalar.ts
deleted file mode 100644
index 38290dcc8..000000000
--- a/sample/33-graphql-mercurius/src/common/scalars/date.scalar.ts
+++ /dev/null
@@ -1,22 +0,0 @@
-import { CustomScalar, Scalar } from '@nestjs/graphql';
-import { Kind, ValueNode } from 'graphql';
-
-@Scalar('Date', type => Date)
-export class DateScalar implements CustomScalar<number, Date> {
-  description = 'Date custom scalar type';
-
-  parseValue(value: number): Date {
-    return new Date(value); // value from the client
-  }
-
-  serialize(value: Date): number {
-    return value.getTime(); // value sent to the client
-  }
-
-  parseLiteral(ast: ValueNode): Date {
-    if (ast.kind === Kind.INT) {
-      return new Date(ast.value);
-    }
-    return null;
-  }
-}
diff --git a/sample/33-graphql-mercurius/src/main.ts b/sample/33-graphql-mercurius/src/main.ts
deleted file mode 100644
index 8e7886667..000000000
--- a/sample/33-graphql-mercurius/src/main.ts
+++ /dev/null
@@ -1,13 +0,0 @@
-import { ValidationPipe } from '@nestjs/common';
-import { NestFactory } from '@nestjs/core';
-import { FastifyAdapter } from '@nestjs/platform-fastify';
-import { AppModule } from './app.module';
-
-async function bootstrap() {
-  const app = await NestFactory.create(AppModule, new FastifyAdapter());
-  app.useGlobalPipes(new ValidationPipe());
-
-  await app.listen(3000);
-  console.log(`Application is running on: ${await app.getUrl()}`);
-}
-bootstrap();
diff --git a/sample/33-graphql-mercurius/src/recipes/dto/new-recipe.input.ts b/sample/33-graphql-mercurius/src/recipes/dto/new-recipe.input.ts
deleted file mode 100644
index 79645888c..000000000
--- a/sample/33-graphql-mercurius/src/recipes/dto/new-recipe.input.ts
+++ /dev/null
@@ -1,17 +0,0 @@
-import { Field, InputType } from '@nestjs/graphql';
-import { IsOptional, Length, MaxLength } from 'class-validator';
-
-@InputType()
-export class NewRecipeInput {
-  @Field()
-  @MaxLength(30)
-  title: string;
-
-  @Field({ nullable: true })
-  @IsOptional()
-  @Length(30, 255)
-  description?: string;
-
-  @Field(type => [String])
-  ingredients: string[];
-}
diff --git a/sample/33-graphql-mercurius/src/recipes/dto/recipes.args.ts b/sample/33-graphql-mercurius/src/recipes/dto/recipes.args.ts
deleted file mode 100644
index 9bce0582f..000000000
--- a/sample/33-graphql-mercurius/src/recipes/dto/recipes.args.ts
+++ /dev/null
@@ -1,14 +0,0 @@
-import { ArgsType, Field, Int } from '@nestjs/graphql';
-import { Max, Min } from 'class-validator';
-
-@ArgsType()
-export class RecipesArgs {
-  @Field(type => Int)
-  @Min(0)
-  skip = 0;
-
-  @Field(type => Int)
-  @Min(1)
-  @Max(50)
-  take = 25;
-}
diff --git a/sample/33-graphql-mercurius/src/recipes/models/recipe.model.ts b/sample/33-graphql-mercurius/src/recipes/models/recipe.model.ts
deleted file mode 100644
index 2193b2310..000000000
--- a/sample/33-graphql-mercurius/src/recipes/models/recipe.model.ts
+++ /dev/null
@@ -1,19 +0,0 @@
-import { Field, ID, ObjectType } from '@nestjs/graphql';
-
-@ObjectType({ description: 'recipe ' })
-export class Recipe {
-  @Field(type => ID)
-  id: string;
-
-  @Field()
-  title: string;
-
-  @Field({ nullable: true })
-  description?: string;
-
-  @Field()
-  creationDate: Date;
-
-  @Field(type => [String])
-  ingredients: string[];
-}
diff --git a/sample/33-graphql-mercurius/src/recipes/recipes.module.ts b/sample/33-graphql-mercurius/src/recipes/recipes.module.ts
deleted file mode 100644
index fd2d2cc95..000000000
--- a/sample/33-graphql-mercurius/src/recipes/recipes.module.ts
+++ /dev/null
@@ -1,9 +0,0 @@
-import { Module } from '@nestjs/common';
-import { DateScalar } from '../common/scalars/date.scalar';
-import { RecipesResolver } from './recipes.resolver';
-import { RecipesService } from './recipes.service';
-
-@Module({
-  providers: [RecipesResolver, RecipesService, DateScalar],
-})
-export class RecipesModule {}
diff --git a/sample/33-graphql-mercurius/src/recipes/recipes.resolver.ts b/sample/33-graphql-mercurius/src/recipes/recipes.resolver.ts
deleted file mode 100644
index 5b42038fc..000000000
--- a/sample/33-graphql-mercurius/src/recipes/recipes.resolver.ts
+++ /dev/null
@@ -1,53 +0,0 @@
-import { NotFoundException } from '@nestjs/common';
-import {
-  Args,
-  Context,
-  Mutation,
-  Query,
-  Resolver,
-  Subscription,
-} from '@nestjs/graphql';
-import { PubSub } from 'mercurius';
-import { NewRecipeInput } from './dto/new-recipe.input';
-import { RecipesArgs } from './dto/recipes.args';
-import { Recipe } from './models/recipe.model';
-import { RecipesService } from './recipes.service';
-
-@Resolver(of => Recipe)
-export class RecipesResolver {
-  constructor(private readonly recipesService: RecipesService) {}
-
-  @Query(returns => Recipe)
-  async recipe(@Args('id') id: string): Promise<Recipe> {
-    const recipe = await this.recipesService.findOneById(id);
-    if (!recipe) {
-      throw new NotFoundException(id);
-    }
-    return recipe;
-  }
-
-  @Query(returns => [Recipe])
-  recipes(@Args() recipesArgs: RecipesArgs): Promise<Recipe[]> {
-    return this.recipesService.findAll(recipesArgs);
-  }
-
-  @Mutation(returns => Recipe)
-  async addRecipe(
-    @Args('newRecipeData') newRecipeData: NewRecipeInput,
-    @Context('pubsub') pubSub: PubSub,
-  ): Promise<Recipe> {
-    const recipe = await this.recipesService.create(newRecipeData);
-    pubSub.publish({ topic: 'recipeAdded', payload: { recipeAdded: recipe } });
-    return recipe;
-  }
-
-  @Mutation(returns => Boolean)
-  async removeRecipe(@Args('id') id: string) {
-    return this.recipesService.remove(id);
-  }
-
-  @Subscription(returns => Recipe)
-  recipeAdded(@Context('pubsub') pubSub: PubSub) {
-    return pubSub.subscribe('recipeAdded');
-  }
-}
diff --git a/sample/33-graphql-mercurius/src/recipes/recipes.service.ts b/sample/33-graphql-mercurius/src/recipes/recipes.service.ts
deleted file mode 100644
index a4d6428eb..000000000
--- a/sample/33-graphql-mercurius/src/recipes/recipes.service.ts
+++ /dev/null
@@ -1,29 +0,0 @@
-import { Injectable } from '@nestjs/common';
-import { NewRecipeInput } from './dto/new-recipe.input';
-import { RecipesArgs } from './dto/recipes.args';
-import { Recipe } from './models/recipe.model';
-
-@Injectable()
-export class RecipesService {
-  /**
-   * MOCK
-   * Put some real business logic here
-   * Left for demonstration purposes
-   */
-
-  async create(data: NewRecipeInput): Promise<Recipe> {
-    return {} as any;
-  }
-
-  async findOneById(id: string): Promise<Recipe> {
-    return {} as any;
-  }
-
-  async findAll(recipesArgs: RecipesArgs): Promise<Recipe[]> {
-    return [] as Recipe[];
-  }
-
-  async remove(id: string): Promise<boolean> {
-    return true;
-  }
-}
diff --git a/sample/33-graphql-mercurius/tsconfig.build.json b/sample/33-graphql-mercurius/tsconfig.build.json
deleted file mode 100644
index 2fe1df273..000000000
--- a/sample/33-graphql-mercurius/tsconfig.build.json
+++ /dev/null
@@ -1,4 +0,0 @@
-{
-  "extends": "./tsconfig.json",
-  "exclude": ["node_modules", "dist", "test", "**/*spec.ts"]
-}
diff --git a/tools/benchmarks/get-benchmarks.ts b/tools/benchmarks/get-benchmarks.ts
index a4fc51668..eaf9a320b 100644
--- a/tools/benchmarks/get-benchmarks.ts
+++ b/tools/benchmarks/get-benchmarks.ts
@@ -23,13 +23,7 @@ async function runBenchmarkOfLib(lib: string): Promise<WrkResults> {
   const libPath = join(BENCHMARK_PATH, `${lib}.js`);
   const process = spawn('node', [libPath], {
     detached: true,
-  });
-
-  process.stdout!.on('data', data => {
-    console.log(`stdout: ${data}`);
-  });
-  process.stderr!.on('data', data => {
-    console.log(`stderr: ${data}`);
+    stdio: 'ignore',
   });
 
   process.unref();
@@ -38,7 +32,7 @@ async function runBenchmarkOfLib(lib: string): Promise<WrkResults> {
 
   const result = await wrk({
     threads: 8,
-    duration: '10s',
+    duraton: '10s',
     connections: 1024,
     url: 'http://localhost:3000',
   });
diff --git a/tools/gulp/gulpfile.ts b/tools/gulp/gulpfile.ts
index 1e6200761..de25610c2 100644
--- a/tools/gulp/gulpfile.ts
+++ b/tools/gulp/gulpfile.ts
@@ -1,4 +1,5 @@
-import './tasks/clean';
 import './tasks/copy-misc';
+import './tasks/clean';
+import './tasks/packages';
 import './tasks/move';
 import './tasks/samples';
diff --git a/tools/gulp/tasks/move.ts b/tools/gulp/tasks/move.ts
index 0991e1e6f..d01a29d59 100644
--- a/tools/gulp/tasks/move.ts
+++ b/tools/gulp/tasks/move.ts
@@ -3,24 +3,12 @@ import { join } from 'path';
 import { samplePath } from '../config';
 import { containsPackageJson, getDirs } from '../util/task-helpers';
 
-const distFiles = src([
-  'packages/**/*',
-  '!packages/**/*.ts',
-  'packages/**/*.d.ts',
-]);
-
-/**
- * Moves the compiled nest files into "node_module" folder.
- */
-function moveToNodeModules() {
-  return distFiles.pipe(dest('node_modules/@nestjs'));
-}
-
 /**
  * Moves the compiled nest files into the `samples/*` dirs.
  */
-function moveToSamples() {
+function move() {
   const samplesDirs = getDirs(samplePath);
+  const distFiles = src(['node_modules/@nestjs/**/*']);
 
   /**
    * Flatten the sampleDirs
@@ -43,5 +31,4 @@ function moveToSamples() {
   );
 }
 
-task('move:node_modules', moveToNodeModules);
-task('move:samples', moveToSamples);
+task('move', move);
diff --git a/tools/gulp/tasks/packages.ts b/tools/gulp/tasks/packages.ts
new file mode 100644
index 000000000..d71d76e90
--- /dev/null
+++ b/tools/gulp/tasks/packages.ts
@@ -0,0 +1,78 @@
+import { source, packagePaths } from '../config';
+import { task, watch, series, dest } from 'gulp';
+import { createProject } from 'gulp-typescript';
+import * as sourcemaps from 'gulp-sourcemaps';
+import * as log from 'fancy-log';
+
+// Has to be a hardcoded object due to build order
+const packages = {
+  common: createProject('packages/common/tsconfig.json'),
+  core: createProject('packages/core/tsconfig.json'),
+  microservices: createProject('packages/microservices/tsconfig.json'),
+  websockets: createProject('packages/websockets/tsconfig.json'),
+  testing: createProject('packages/testing/tsconfig.json'),
+  'platform-express': createProject('packages/platform-express/tsconfig.json'),
+  'platform-fastify': createProject('packages/platform-fastify/tsconfig.json'),
+  'platform-socket.io': createProject(
+    'packages/platform-socket.io/tsconfig.json',
+  ),
+  'platform-ws': createProject('packages/platform-ws/tsconfig.json'),
+};
+
+const modules = Object.keys(packages);
+
+const distId = process.argv.indexOf('--dist');
+const dist = distId < 0 ? source : process.argv[distId + 1];
+
+/**
+ * Watches the packages/* folder and
+ * builds the package on file change
+ */
+function defaultTask() {
+  log.info('Watching files..');
+  modules.forEach(packageName => {
+    watch(
+      [`${source}/${packageName}/**/*.ts`, `${source}/${packageName}/*.ts`],
+      series(packageName),
+    );
+  });
+}
+
+/**
+ * Builds the given package
+ * @param packageName The name of the package
+ */
+function buildPackage(packageName: string) {
+  return packages[packageName]
+    .src()
+    .pipe(packages[packageName]())
+    .pipe(dest(`${dist}/${packageName}`));
+}
+
+/**
+ * Builds the given package and adds sourcemaps
+ * @param packageName The name of the package
+ */
+function buildPackageDev(packageName: string) {
+  return packages[packageName]
+    .src()
+    .pipe(sourcemaps.init())
+    .pipe(packages[packageName]())
+    .pipe(
+      sourcemaps.mapSources(
+        (sourcePath: string) => './' + sourcePath.split('/').pop(),
+      ),
+    )
+    .pipe(sourcemaps.write('.', {}))
+    .pipe(dest(`${dist}/${packageName}`));
+}
+
+modules.forEach(packageName => {
+  task(packageName, () => buildPackage(packageName));
+  task(`${packageName}:dev`, () => buildPackageDev(packageName));
+});
+
+task('common:dev', series(modules.map(packageName => `${packageName}:dev`)));
+task('build', series(modules));
+task('build:dev', series('common:dev'));
+task('default', defaultTask);
diff --git a/tools/gulp/tsconfig.json b/tools/gulp/tsconfig.json
index 043217830..6438b3c5a 100644
--- a/tools/gulp/tsconfig.json
+++ b/tools/gulp/tsconfig.json
@@ -3,6 +3,7 @@
     "experimentalDecorators": true,
     "noUnusedParameters": false,
     "noUnusedLocals": false,
+    "lib": ["es2015", "dom", "es2016.array.include"],
     "module": "commonjs",
     "moduleResolution": "node",
     "outDir": "../../dist/tools/gulp",
@@ -11,7 +12,7 @@
     "noImplicitThis": true,
     "noEmitOnError": true,
     "noImplicitAny": false,
-    "target": "ES2021",
+    "target": "es5",
     "types": [
       "node"
     ],
diff --git a/tools/gulp/util/task-helpers.ts b/tools/gulp/util/task-helpers.ts
index 9e9e65e3c..736a1087c 100644
--- a/tools/gulp/util/task-helpers.ts
+++ b/tools/gulp/util/task-helpers.ts
@@ -15,7 +15,7 @@ export function getDirs(base: string) {
 
 /**
  * Checks if the directory contains a package.json file
- * @param dir Path to the directory
+ * @param dir Path to the dircetory
  * @returns True if the directory contains a package.json
  */
 export function containsPackageJson(dir: string) {
diff --git a/tsconfig.json b/tsconfig.json
index 89fc99832..036b1a814 100644
--- a/tsconfig.json
+++ b/tsconfig.json
@@ -1,18 +1,18 @@
 {
   "compilerOptions": {
     "module": "commonjs",
+    "declaration": false,
     "noImplicitAny": false,
     "noUnusedLocals": false,
     "removeComments": true,
     "noLib": false,
     "emitDecoratorMetadata": true,
     "experimentalDecorators": true,
-    "useUnknownInCatchVariables": false,
-    "target": "ES2021",
+    "target": "es6",
     "sourceMap": true,
-    "allowJs": false,
+    "allowJs": true,
     "outDir": "dist",
-    "baseUrl": ".",
+    "lib": ["es7"],
     "paths": {
       "@nestjs/common": ["./packages/common"],
       "@nestjs/common/*": ["./packages/common/*"],
@@ -30,7 +30,7 @@
       "@nestjs/platform-ws/*": ["./packages/platform-ws/*"],
       "@nestjs/platform-fastify": ["./packages/platform-fastify"],
       "@nestjs/platform-fastify/*": ["./packages/platform-fastify/*"],
-      "@nestjs/platform-socket.io": ["./packages/platform-socket.io"],
+      "@nestjs/platform-socket.io": ["./packages/platform-ws"],
       "@nestjs/platform-socket.io/*": ["./packages/platform-socket.io/*"],
     }
   },
diff --git a/tsconfig.spec.json b/tsconfig.spec.json
index 95af08508..60e239b85 100644
--- a/tsconfig.spec.json
+++ b/tsconfig.spec.json
@@ -2,4 +2,4 @@
   "extends": "./tsconfig.json",
   "include": ["integration/**/*", "**/*.spec.ts"],
   "exclude": ["node_modules", "dist"]
-}
\ No newline at end of file
+}
