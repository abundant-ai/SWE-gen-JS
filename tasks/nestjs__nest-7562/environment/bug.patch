diff --git a/integration/graphql-code-first/e2e/pipes.spec.ts b/integration/graphql-code-first/e2e/pipes.spec.ts
index 01b13d218..bdd928fd9 100644
--- a/integration/graphql-code-first/e2e/pipes.spec.ts
+++ b/integration/graphql-code-first/e2e/pipes.spec.ts
@@ -30,28 +30,16 @@ describe('GraphQL Pipes', () => {
         errors: [
           {
             extensions: {
-              code: 'INTERNAL_SERVER_ERROR',
-              exception: {
-                message: 'Bad Request Exception',
-                name: 'BadRequestException',
-                response: {
-                  message: [
-                    'description must be longer than or equal to 30 characters',
-                  ],
-                  error: 'Bad Request',
-                  statusCode: 400,
-                },
-                status: 400,
+              code: 'BAD_USER_INPUT',
+              response: {
+                error: 'Bad Request',
+                message: [
+                  'description must be longer than or equal to 30 characters',
+                ],
+                statusCode: 400,
               },
             },
-            locations: [
-              {
-                column: 3,
-                line: 2,
-              },
-            ],
             message: 'Bad Request Exception',
-            path: ['addRecipe'],
           },
         ],
       });
diff --git a/integration/hello-world/e2e/exclude-middleware-fastify.spec.ts b/integration/hello-world/e2e/exclude-middleware-fastify.spec.ts
index 8d5ecd394..09a324dd7 100644
--- a/integration/hello-world/e2e/exclude-middleware-fastify.spec.ts
+++ b/integration/hello-world/e2e/exclude-middleware-fastify.spec.ts
@@ -25,11 +25,6 @@ class TestController {
     return RETURN_VALUE;
   }
 
-  @Get('test/test')
-  testTest() {
-    return RETURN_VALUE;
-  }
-
   @Get('test2')
   test2() {
     return RETURN_VALUE;
@@ -90,10 +85,6 @@ describe('Exclude middleware (fastify)', () => {
     return request(app.getHttpServer()).get('/test').expect(200, RETURN_VALUE);
   });
 
-  it(`should not exclude "/test/test" endpoint`, () => {
-    return request(app.getHttpServer()).get('/test/test').expect(200, MIDDLEWARE_VALUE);
-  });
-
   it(`should not exclude "/test2" endpoint`, () => {
     return request(app.getHttpServer())
       .get('/test2')
diff --git a/integration/hello-world/e2e/middleware-class.spec.ts b/integration/hello-world/e2e/middleware-class.spec.ts
index 134222611..8a5739901 100644
--- a/integration/hello-world/e2e/middleware-class.spec.ts
+++ b/integration/hello-world/e2e/middleware-class.spec.ts
@@ -5,21 +5,17 @@ import {
   Injectable,
   MiddlewareConsumer,
   Module,
-  RequestMethod,
 } from '@nestjs/common';
 import { Test } from '@nestjs/testing';
 import * as request from 'supertest';
 import { ApplicationModule } from '../src/app.module';
-import { Response } from 'express';
 
-const INCLUDED_VALUE = 'test_included';
 const RETURN_VALUE = 'test';
-const WILDCARD_VALUE = 'test_wildcard';
 
 @Injectable()
 class Middleware {
   use(req, res, next) {
-    res.send(WILDCARD_VALUE);
+    res.send(RETURN_VALUE);
   }
 }
 
@@ -27,7 +23,7 @@ class Middleware {
 class TestController {
   @Get('test')
   test() {
-    return RETURN_VALUE;
+    return 'test';
   }
 }
 
@@ -37,11 +33,7 @@ class TestController {
 })
 class TestModule {
   configure(consumer: MiddlewareConsumer) {
-    consumer
-      .apply((req, res: Response, next) => res.status(201).end(INCLUDED_VALUE))
-      .forRoutes({ path: 'tests/included', method: RequestMethod.POST })
-      .apply(Middleware)
-      .forRoutes('*');
+    consumer.apply(Middleware).forRoutes('*');
   }
 }
 
@@ -59,27 +51,7 @@ describe('Middleware (class)', () => {
   });
 
   it(`forRoutes(*)`, () => {
-    return request(app.getHttpServer())
-      .get('/hello')
-      .expect(200, WILDCARD_VALUE);
-  });
-
-  it(`/test forRoutes(*)`, () => {
-    return request(app.getHttpServer())
-      .get('/test')
-      .expect(200, WILDCARD_VALUE);
-  });
-
-  it(`GET forRoutes(POST tests/included)`, () => {
-    return request(app.getHttpServer())
-      .get('/tests/included')
-      .expect(200, WILDCARD_VALUE);
-  });
-
-  it(`POST forRoutes(POST tests/included)`, () => {
-    return request(app.getHttpServer())
-      .post('/tests/included')
-      .expect(201, INCLUDED_VALUE);
+    return request(app.getHttpServer()).get('/hello').expect(200, RETURN_VALUE);
   });
 
   afterEach(async () => {
diff --git a/integration/hello-world/e2e/middleware-fastify.spec.ts b/integration/hello-world/e2e/middleware-fastify.spec.ts
index 4fe34a0b3..6d2c10c41 100644
--- a/integration/hello-world/e2e/middleware-fastify.spec.ts
+++ b/integration/hello-world/e2e/middleware-fastify.spec.ts
@@ -1,11 +1,4 @@
-import {
-  Controller,
-  Get,
-  MiddlewareConsumer,
-  Module,
-  Query,
-  RequestMethod,
-} from '@nestjs/common';
+import { Controller, Get, MiddlewareConsumer, Module } from '@nestjs/common';
 import {
   FastifyAdapter,
   NestFastifyApplication,
@@ -14,70 +7,35 @@ import { Test } from '@nestjs/testing';
 import { expect } from 'chai';
 import { ApplicationModule } from '../src/app.module';
 
-const INCLUDED_VALUE = 'test_included';
-const QUERY_VALUE = 'test_query';
-const REQ_URL_VALUE = 'test_req_url';
 const RETURN_VALUE = 'test';
 const SCOPED_VALUE = 'test_scoped';
 const WILDCARD_VALUE = 'test_wildcard';
 
 @Controller()
 class TestController {
-  @Get('express_style_wildcard/wildcard_nested')
-  express_style_wildcard() {
-    return RETURN_VALUE;
-  }
-
   @Get('test')
   test() {
     return RETURN_VALUE;
   }
 
-  @Get('query')
-  query() {
-    return RETURN_VALUE;
-  }
-
   @Get('tests/wildcard_nested')
   wildcard_nested() {
     return RETURN_VALUE;
   }
-
-  @Get('tests/included')
-  included() {
-    return RETURN_VALUE;
-  }
-}
-
-@Controller(QUERY_VALUE)
-class TestQueryController {
-  @Get()
-  [QUERY_VALUE](@Query('test') test: string) {
-    return test;
-  }
 }
 
 @Module({
   imports: [ApplicationModule],
-  controllers: [TestController, TestQueryController],
+  controllers: [TestController],
 })
 class TestModule {
   configure(consumer: MiddlewareConsumer) {
     consumer
-      .apply((req, res, next) => res.end(INCLUDED_VALUE))
-      .forRoutes({ path: 'tests/included', method: RequestMethod.POST })
-      .apply((req, res, next) => res.end(`${REQ_URL_VALUE}${req.url}`))
-      .forRoutes('req/url/')
       .apply((req, res, next) => res.end(WILDCARD_VALUE))
-      .forRoutes('express_style_wildcard/*', 'tests/(.*)')
-      .apply((req, res, next) => res.end(QUERY_VALUE))
-      .forRoutes('query')
-      .apply((req, res, next) => next())
-      .forRoutes(TestQueryController)
+      .forRoutes('tests/(.*)')
       .apply((req, res, next) => res.end(SCOPED_VALUE))
       .forRoutes(TestController)
       .apply((req, res, next) => res.end(RETURN_VALUE))
-      .exclude({ path: QUERY_VALUE, method: -1 })
       .forRoutes('(.*)');
   }
 }
@@ -95,7 +53,7 @@ describe('Middleware (FastifyAdapter)', () => {
     await app.init();
   });
 
-  it(`forRoutes((.*))`, () => {
+  it(`forRoutes(*)`, () => {
     return app
       .inject({
         method: 'GET',
@@ -113,78 +71,15 @@ describe('Middleware (FastifyAdapter)', () => {
       .then(({ payload }) => expect(payload).to.be.eql(SCOPED_VALUE));
   });
 
-  it(`query?test=${QUERY_VALUE} forRoutes(query)`, () => {
-    return app
-      .inject({
-        method: 'GET',
-        url: '/query',
-        query: {
-          test: QUERY_VALUE,
-        },
-      })
-      .then(({ payload }) => expect(payload).to.be.eql(QUERY_VALUE));
-  });
-
-  it(`${QUERY_VALUE}?test=${QUERY_VALUE} forRoutes(${QUERY_VALUE})`, () => {
-    return app
-      .inject({
-        method: 'GET',
-        url: QUERY_VALUE,
-        query: {
-          test: QUERY_VALUE,
-        },
-      })
-      .then(({ payload }) => expect(payload).to.be.eql(QUERY_VALUE));
-  });
-
-  it(`forRoutes(tests/(.*))`, () => {
+  it(`forRoutes(tests/*)`, () => {
     return app
       .inject({
         method: 'GET',
-        url: '/tests/wildcard_nested',
+        url: '/tests/wildcard',
       })
       .then(({ payload }) => expect(payload).to.be.eql(WILDCARD_VALUE));
   });
 
-  it(`forRoutes(express_style_wildcard/*)`, () => {
-    return app
-      .inject({
-        method: 'GET',
-        url: '/express_style_wildcard/wildcard_nested',
-      })
-      .then(({ payload }) => expect(payload).to.be.eql(WILDCARD_VALUE));
-  });
-
-  it(`forRoutes(req/url/)`, () => {
-    const reqUrl = '/test';
-    return app
-      .inject({
-        method: 'GET',
-        url: `/req/url${reqUrl}`,
-      })
-      .then(({ payload }) =>
-        expect(payload).to.be.eql(`${REQ_URL_VALUE}${reqUrl}`),
-      );
-  });
-
-  it(`GET forRoutes(POST tests/included)`, () => {
-    return app
-      .inject({
-        method: 'GET',
-        url: '/tests/included',
-      })
-      .then(({ payload }) => expect(payload).to.be.eql(WILDCARD_VALUE));
-  });
-
-  it(`POST forRoutes(POST tests/included)`, () => {
-    return app
-      .inject({
-        method: 'POST',
-        url: '/tests/included',
-      })
-      .then(({ payload }) => expect(payload).to.be.eql(INCLUDED_VALUE));
-  });
-
   afterEach(async () => {
     await app.close();
   });
diff --git a/lerna.json b/lerna.json
index b0fd3211d..e2a14e5aa 100644
--- a/lerna.json
+++ b/lerna.json
@@ -3,5 +3,5 @@
   "packages": [
     "packages/*"
   ],
-  "version": "8.0.2"
+  "version": "8.0.4"
 }
diff --git a/package-lock.json b/package-lock.json
index 1a8a66b2d..726215cdd 100644
Binary files a/package-lock.json and b/package-lock.json differ
diff --git a/package.json b/package.json
index adc9a73dc..b781c3d60 100644
--- a/package.json
+++ b/package.json
@@ -71,12 +71,12 @@
     "uuid": "8.3.2"
   },
   "devDependencies": {
-    "@codechecks/client": "0.1.10",
+    "@codechecks/client": "0.1.11",
     "@commitlint/cli": "12.1.4",
     "@commitlint/config-angular": "12.1.4",
-    "@grpc/grpc-js": "1.3.4",
+    "@grpc/grpc-js": "1.3.5",
     "@grpc/proto-loader": "0.6.4",
-    "@nestjs/graphql": "7.11.0",
+    "@nestjs/graphql": "8.0.2",
     "@nestjs/mongoose": "8.0.0",
     "@nestjs/typeorm": "8.0.1",
     "@types/amqplib": "0.8.1",
@@ -96,8 +96,8 @@
     "@types/sinon": "10.0.2",
     "@types/socket.io": "3.0.2",
     "@types/ws": "7.4.6",
-    "@typescript-eslint/eslint-plugin": "4.28.2",
-    "@typescript-eslint/parser": "4.28.2",
+    "@typescript-eslint/eslint-plugin": "4.28.3",
+    "@typescript-eslint/parser": "4.28.3",
     "amqp-connection-manager": "3.2.2",
     "amqplib": "0.8.0",
     "apollo-server-express": "2.25.2",
@@ -122,8 +122,8 @@
     "eslint-plugin-import": "2.23.4",
     "eventsource": "1.1.0",
     "fancy-log": "1.3.3",
-    "fastify": "3.19.0",
-    "fastify-cors": "6.0.1",
+    "fastify": "3.19.1",
+    "fastify-cors": "6.0.2",
     "fastify-formbody": "5.0.0",
     "fastify-multipart": "4.0.7",
     "fastify-static": "4.2.2",
@@ -142,7 +142,7 @@
     "kafkajs": "1.15.0",
     "lerna": "2.11.0",
     "light-my-request": "4.4.1",
-    "lint-staged": "11.0.0",
+    "lint-staged": "11.0.1",
     "markdown-table": "2.0.0",
     "merge-graphql-schemas": "1.7.8",
     "middie": "5.3.0",
diff --git a/packages/common/interfaces/http/http-server.interface.ts b/packages/common/interfaces/http/http-server.interface.ts
index 268cc9949..20abed8d9 100644
--- a/packages/common/interfaces/http/http-server.interface.ts
+++ b/packages/common/interfaces/http/http-server.interface.ts
@@ -57,7 +57,9 @@ export interface HttpServer<TRequest = any, TResponse = any> {
   useStaticAssets?(...args: any[]): this;
   setBaseViewsDir?(path: string | string[]): this;
   setViewEngine?(engineOrOptions: any): this;
-  createMiddlewareFactory():
+  createMiddlewareFactory(
+    method: RequestMethod,
+  ):
     | ((path: string, callback: Function) => any)
     | Promise<(path: string, callback: Function) => any>;
   getRequestHostname?(request: TRequest): string;
diff --git a/packages/common/package.json b/packages/common/package.json
index 08b253fb5..c2e416164 100644
--- a/packages/common/package.json
+++ b/packages/common/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/common",
-  "version": "8.0.2",
+  "version": "8.0.4",
   "description": "Nest - modern, fast, powerful node.js web framework (@common)",
   "author": "Kamil Mysliwiec",
   "homepage": "https://nestjs.com",
diff --git a/packages/core/adapters/http-adapter.ts b/packages/core/adapters/http-adapter.ts
index 201bed9ac..d27578920 100644
--- a/packages/core/adapters/http-adapter.ts
+++ b/packages/core/adapters/http-adapter.ts
@@ -110,7 +110,9 @@ export abstract class AbstractHttpAdapter<
     options: CorsOptions | CorsOptionsDelegate<TRequest>,
     prefix?: string,
   );
-  abstract createMiddlewareFactory():
+  abstract createMiddlewareFactory(
+    requestMethod: RequestMethod,
+  ):
     | ((path: string, callback: Function) => any)
     | Promise<(path: string, callback: Function) => any>;
   abstract getType(): string;
diff --git a/packages/core/injector/module.ts b/packages/core/injector/module.ts
index 7b05cc5bc..ed3102a01 100644
--- a/packages/core/injector/module.ts
+++ b/packages/core/injector/module.ts
@@ -248,11 +248,13 @@ export class Module {
     | ValueProvider
     | ExistingProvider {
     return !isNil(
-      (provider as
-        | ClassProvider
-        | FactoryProvider
-        | ValueProvider
-        | ExistingProvider).provide,
+      (
+        provider as
+          | ClassProvider
+          | FactoryProvider
+          | ValueProvider
+          | ExistingProvider
+      ).provide,
     );
   }
 
@@ -396,8 +398,8 @@ export class Module {
     } else if (isString(provider) || isSymbol(provider)) {
       return addExportedUnit(provider);
     } else if (this.isDynamicModule(provider)) {
-      const { module } = provider;
-      return addExportedUnit(module.name);
+      const { module: moduleClassRef } = provider;
+      return addExportedUnit(moduleClassRef);
     }
     addExportedUnit(provider as Type<any>);
   }
diff --git a/packages/core/middleware/middleware-module.ts b/packages/core/middleware/middleware-module.ts
index 14adb6958..b02d081f7 100644
--- a/packages/core/middleware/middleware-module.ts
+++ b/packages/core/middleware/middleware-module.ts
@@ -26,7 +26,6 @@ import { MiddlewareBuilder } from './builder';
 import { MiddlewareContainer } from './container';
 import { MiddlewareResolver } from './resolver';
 import { RoutesMapper } from './routes-mapper';
-import { isRequestMethodAll } from './utils';
 
 export class MiddlewareModule {
   private readonly routerProxy = new RouterProxy();
@@ -194,14 +193,14 @@ export class MiddlewareModule {
     if (isUndefined(instance?.use)) {
       throw new InvalidMiddlewareException(metatype.name);
     }
+    const router = await applicationRef.createMiddlewareFactory(method);
     const isStatic = wrapper.isDependencyTreeStatic();
     if (isStatic) {
       const proxy = await this.createProxy(instance);
-      return await this.registerHandler(applicationRef, method, path, proxy);
+      return this.registerHandler(router, path, proxy);
     }
-    await this.registerHandler(
-      applicationRef,
-      method,
+    this.registerHandler(
+      router,
       path,
       async <TRequest, TResponse>(
         req: TRequest,
@@ -261,9 +260,8 @@ export class MiddlewareModule {
     return this.routerProxy.createProxy(middleware, exceptionsHandler);
   }
 
-  private async registerHandler(
-    applicationRef: HttpServer,
-    method: RequestMethod,
+  private registerHandler(
+    router: (...args: any[]) => void,
     path: string,
     proxy: <TRequest, TResponse>(
       req: TRequest,
@@ -273,28 +271,11 @@ export class MiddlewareModule {
   ) {
     const prefix = this.config.getGlobalPrefix();
     const basePath = addLeadingSlash(prefix);
-    if (basePath.endsWith('/') && path.startsWith('/')) {
+    if (basePath && path === '/*') {
       // strip slash when a wildcard is being used
       // and global prefix has been set
-      path = path.slice(1);
+      path = '*';
     }
-    const isMethodAll = isRequestMethodAll(method);
-    const requestMethod = RequestMethod[method];
-    const router = await applicationRef.createMiddlewareFactory();
-    router(
-      basePath + path,
-      isMethodAll
-        ? proxy
-        : <TRequest, TResponse>(
-            req: TRequest,
-            res: TResponse,
-            next: () => void,
-          ) => {
-            if (applicationRef.getRequestMethod(req) === requestMethod) {
-              return proxy(req, res, next);
-            }
-            return next();
-          },
-    );
+    router(basePath + path, proxy);
   }
 }
diff --git a/packages/core/middleware/utils.ts b/packages/core/middleware/utils.ts
index 31e67b67a..6508493ac 100644
--- a/packages/core/middleware/utils.ts
+++ b/packages/core/middleware/utils.ts
@@ -1,3 +1,4 @@
+/* eslint-disable @typescript-eslint/no-use-before-define */
 import { RequestMethod } from '@nestjs/common';
 import { HttpServer, RouteInfo, Type } from '@nestjs/common/interfaces';
 import { isFunction } from '@nestjs/common/utils/shared.utils';
@@ -7,10 +8,6 @@ import { v4 as uuid } from 'uuid';
 
 type RouteInfoRegex = RouteInfo & { regex: RegExp };
 
-export const isRequestMethodAll = (method: RequestMethod) => {
-  return RequestMethod.ALL === method || (method as number) === -1;
-};
-
 export const filterMiddleware = <T extends Function | Type<any> = any>(
   middleware: T[],
   excludedRoutes: RouteInfo[],
@@ -97,7 +94,11 @@ export function isRouteExcluded(
       : originalUrl;
 
   const isExcluded = excludedRoutes.some(({ method, regex }) => {
-    if (isRequestMethodAll(method) || RequestMethod[method] === reqMethod) {
+    if (
+      RequestMethod.ALL === method ||
+      RequestMethod[method] === reqMethod ||
+      (method as number) === -1
+    ) {
       return regex.exec(pathname);
     }
     return false;
diff --git a/packages/core/package.json b/packages/core/package.json
index aa64091e9..996164e8d 100644
--- a/packages/core/package.json
+++ b/packages/core/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/core",
-  "version": "8.0.2",
+  "version": "8.0.4",
   "description": "Nest - modern, fast, powerful node.js web framework (@core)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -36,7 +36,7 @@
     "uuid": "8.3.2"
   },
   "devDependencies": {
-    "@nestjs/common": "8.0.2"
+    "@nestjs/common": "8.0.4"
   },
   "peerDependencies": {
     "@nestjs/common": "^8.0.0",
diff --git a/packages/core/scanner.ts b/packages/core/scanner.ts
index 26a5cb3fa..37072cc92 100644
--- a/packages/core/scanner.ts
+++ b/packages/core/scanner.ts
@@ -54,7 +54,8 @@ interface ApplicationProviderWrapper {
 }
 
 export class DependenciesScanner {
-  private readonly applicationProvidersApplyMap: ApplicationProviderWrapper[] = [];
+  private readonly applicationProvidersApplyMap: ApplicationProviderWrapper[] =
+    [];
 
   constructor(
     private readonly container: NestContainer,
@@ -255,10 +256,9 @@ export class DependenciesScanner {
       component.prototype,
       method => Reflect.getMetadata(metadataKey, component, method),
     );
-    const paramsInjectables = this.flatten(
-      paramsMetadata,
-    ).map((param: Record<string, any>) =>
-      flatten(Object.keys(param).map(k => param[k].pipes)).filter(isFunction),
+    const paramsInjectables = this.flatten(paramsMetadata).map(
+      (param: Record<string, any>) =>
+        flatten(Object.keys(param).map(k => param[k].pipes)).filter(isFunction),
     );
     flatten(paramsInjectables).forEach((injectable: Type<Injectable>) =>
       this.insertInjectable(injectable, token, component),
@@ -292,7 +292,7 @@ export class DependenciesScanner {
     modulesGenerator.next();
 
     const modulesStack = [];
-    const calculateDistance = (moduleRef: Module, distance = 0) => {
+    const calculateDistance = (moduleRef: Module, distance = 1) => {
       if (modulesStack.includes(moduleRef)) {
         return;
       }
@@ -336,11 +336,13 @@ export class DependenciesScanner {
     }
     const applyProvidersMap = this.getApplyProvidersMap();
     const providersKeys = Object.keys(applyProvidersMap);
-    const type = (provider as
-      | ClassProvider
-      | ValueProvider
-      | FactoryProvider
-      | ExistingProvider).provide;
+    const type = (
+      provider as
+        | ClassProvider
+        | ValueProvider
+        | FactoryProvider
+        | ExistingProvider
+    ).provide;
 
     if (!providersKeys.includes(type as string)) {
       return this.container.addProvider(provider as any, token);
diff --git a/packages/core/test/injector/internal-core-module-factory.spec.ts b/packages/core/test/injector/internal-core-module-factory.spec.ts
index 9f8158d5f..85cf9cfe5 100644
--- a/packages/core/test/injector/internal-core-module-factory.spec.ts
+++ b/packages/core/test/injector/internal-core-module-factory.spec.ts
@@ -1,13 +1,39 @@
+import { ClassProvider, FactoryProvider } from '@nestjs/common';
 import { expect } from 'chai';
+import { ExternalContextCreator } from '../../helpers/external-context-creator';
+import { HttpAdapterHost } from '../../helpers/http-adapter-host';
+import { LazyModuleLoader, ModulesContainer } from '../../injector';
 import { NestContainer } from '../../injector/container';
 import { InternalCoreModule } from '../../injector/internal-core-module';
 import { InternalCoreModuleFactory } from '../../injector/internal-core-module-factory';
 
 describe('InternalCoreModuleFactory', () => {
   it('should return the interal core module definition', () => {
-    expect(
-      InternalCoreModuleFactory.create(new NestContainer(), null, null, null)
-        .module,
-    ).to.equal(InternalCoreModule);
+    const moduleDefinition = InternalCoreModuleFactory.create(
+      new NestContainer(),
+      null,
+      null,
+      null,
+    );
+
+    expect(moduleDefinition.module).to.equal(InternalCoreModule);
+
+    const providedInjectables = moduleDefinition.providers.map(
+      item => (item as ClassProvider | FactoryProvider).provide,
+    );
+    expect(providedInjectables).to.deep.equal([
+      ExternalContextCreator,
+      ModulesContainer,
+      HttpAdapterHost,
+      HttpAdapterHost.name,
+      LazyModuleLoader,
+    ]);
+
+    const lazyModuleLoaderProvider = moduleDefinition.providers.find(
+      item => (item as FactoryProvider)?.provide === LazyModuleLoader,
+    ) as FactoryProvider;
+    expect(lazyModuleLoaderProvider.useFactory()).to.be.instanceOf(
+      LazyModuleLoader,
+    );
   });
 });
diff --git a/packages/core/test/middleware/utils.spec.ts b/packages/core/test/middleware/utils.spec.ts
index 50ed8cdc1..fe573b5da 100644
--- a/packages/core/test/middleware/utils.spec.ts
+++ b/packages/core/test/middleware/utils.spec.ts
@@ -100,7 +100,7 @@ describe('middleware utils', () => {
     });
     describe('when route is excluded', () => {
       const path = '/cats/(.*)';
-      const excludedRoutes = [
+      const exludedRoutes = [
         {
           path,
           method: RequestMethod.GET,
@@ -108,7 +108,7 @@ describe('middleware utils', () => {
         },
       ];
       it('should return true', () => {
-        expect(isRouteExcluded({}, excludedRoutes, adapter)).to.be.true;
+        expect(isRouteExcluded({}, exludedRoutes, adapter)).to.be.true;
       });
     });
     describe('when route is not excluded', () => {
diff --git a/packages/core/test/utils/noop-adapter.spec.ts b/packages/core/test/utils/noop-adapter.spec.ts
index 5d15c0dbb..c2e73d09f 100644
--- a/packages/core/test/utils/noop-adapter.spec.ts
+++ b/packages/core/test/utils/noop-adapter.spec.ts
@@ -21,7 +21,7 @@ export class NoopHttpAdapter extends AbstractHttpAdapter {
   setHeader(response: any, name: string, value: string): any {}
   registerParserMiddleware(): any {}
   enableCors(options: any): any {}
-  createMiddlewareFactory(): any {}
+  createMiddlewareFactory(requestMethod: RequestMethod): any {}
   getType() {
     return '';
   }
diff --git a/packages/microservices/package.json b/packages/microservices/package.json
index 1fe3a9a04..ba311583a 100644
--- a/packages/microservices/package.json
+++ b/packages/microservices/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/microservices",
-  "version": "8.0.2",
+  "version": "8.0.4",
   "description": "Nest - modern, fast, powerful node.js web framework (@microservices)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -22,8 +22,8 @@
     "tslib": "2.3.0"
   },
   "devDependencies": {
-    "@nestjs/common": "8.0.2",
-    "@nestjs/core": "8.0.2"
+    "@nestjs/common": "8.0.4",
+    "@nestjs/core": "8.0.4"
   },
   "peerDependencies": {
     "@grpc/grpc-js": "*",
diff --git a/packages/platform-express/adapters/express-adapter.ts b/packages/platform-express/adapters/express-adapter.ts
index a19558c2d..6910f2057 100644
--- a/packages/platform-express/adapters/express-adapter.ts
+++ b/packages/platform-express/adapters/express-adapter.ts
@@ -6,6 +6,7 @@ import {
 import { NestApplicationOptions } from '@nestjs/common/interfaces/nest-application-options.interface';
 import { isFunction, isNil, isObject } from '@nestjs/common/utils/shared.utils';
 import { AbstractHttpAdapter } from '@nestjs/core/adapters/http-adapter';
+import { RouterMethodFactory } from '@nestjs/core/helpers/router-method-factory';
 import * as bodyParser from 'body-parser';
 import * as cors from 'cors';
 import * as express from 'express';
@@ -15,6 +16,8 @@ import { ServeStaticOptions } from '../interfaces/serve-static-options.interface
 import { Readable } from 'stream';
 
 export class ExpressAdapter extends AbstractHttpAdapter {
+  private readonly routerMethodFactory = new RouterMethodFactory();
+
   constructor(instance?: any) {
     super(instance || express());
   }
@@ -117,8 +120,12 @@ export class ExpressAdapter extends AbstractHttpAdapter {
     return this.use(cors(options));
   }
 
-  public createMiddlewareFactory(): (path: string, callback: Function) => any {
-    return this.instance.use.bind(this.instance);
+  public createMiddlewareFactory(
+    requestMethod: RequestMethod,
+  ): (path: string, callback: Function) => any {
+    return this.routerMethodFactory
+      .get(this.instance, requestMethod)
+      .bind(this.instance);
   }
 
   public initHttpServer(options: NestApplicationOptions) {
diff --git a/packages/platform-express/package.json b/packages/platform-express/package.json
index 4b9e65522..086a28575 100644
--- a/packages/platform-express/package.json
+++ b/packages/platform-express/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/platform-express",
-  "version": "8.0.2",
+  "version": "8.0.4",
   "description": "Nest - modern, fast, powerful node.js web framework (@platform-express)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -24,8 +24,8 @@
     "tslib": "2.3.0"
   },
   "devDependencies": {
-    "@nestjs/common": "8.0.2",
-    "@nestjs/core": "8.0.2"
+    "@nestjs/common": "8.0.4",
+    "@nestjs/core": "8.0.4"
   },
   "peerDependencies": {
     "@nestjs/common": "^8.0.0",
diff --git a/packages/platform-fastify/adapters/fastify-adapter.ts b/packages/platform-fastify/adapters/fastify-adapter.ts
index a61526958..63fb7977c 100644
--- a/packages/platform-fastify/adapters/fastify-adapter.ts
+++ b/packages/platform-fastify/adapters/fastify-adapter.ts
@@ -1,4 +1,10 @@
-import { HttpStatus, Logger, StreamableFile } from '@nestjs/common';
+/* eslint-disable @typescript-eslint/no-var-requires */
+import {
+  HttpStatus,
+  Logger,
+  RequestMethod,
+  StreamableFile,
+} from '@nestjs/common';
 import {
   CorsOptions,
   CorsOptionsDelegate,
@@ -11,6 +17,8 @@ import {
   FastifyLoggerInstance,
   FastifyPluginAsync,
   FastifyPluginCallback,
+  FastifyPluginOptions,
+  FastifyRegisterOptions,
   FastifyReply,
   FastifyRequest,
   FastifyServerOptions,
@@ -28,6 +36,7 @@ import {
   InjectOptions,
   Response as LightMyRequestResponse,
 } from 'light-my-request';
+import * as pathToRegexp from 'path-to-regexp';
 import {
   FastifyStaticOptions,
   PointOfViewOptions,
@@ -56,36 +65,20 @@ type FastifyHttpsOptions<
   https: https.ServerOptions;
 };
 
-/**
- * The following type assertion is valid as we enforce "middie" plugin registration
- * which enhances the FastifyRequest.RawRequest with the "originalUrl" property.
- * ref https://github.com/fastify/middie/pull/16
- * ref https://github.com/fastify/fastify/pull/559
- */
-type FastifyRawRequest<TServer extends RawServerBase> =
-  RawRequestDefaultExpression<TServer> & { originalUrl?: string };
-
 export class FastifyAdapter<
   TServer extends RawServerBase = RawServerDefault,
-  TRawRequest extends FastifyRawRequest<TServer> = FastifyRawRequest<TServer>,
+  TRawRequest extends RawRequestDefaultExpression<TServer> = RawRequestDefaultExpression<TServer>,
   TRawResponse extends RawReplyDefaultExpression<TServer> = RawReplyDefaultExpression<TServer>,
-  TRequest extends FastifyRequest<
-    RequestGenericInterface,
-    TServer,
-    TRawRequest
-  > = FastifyRequest<RequestGenericInterface, TServer, TRawRequest>,
-  TReply extends FastifyReply<
-    TServer,
-    TRawRequest,
-    TRawResponse
-  > = FastifyReply<TServer, TRawRequest, TRawResponse>,
-  TInstance extends FastifyInstance<
+> extends AbstractHttpAdapter<
+  TServer,
+  FastifyRequest<RequestGenericInterface, TServer, TRawRequest>,
+  FastifyReply<TServer, TRawRequest, TRawResponse>
+> {
+  protected readonly instance: FastifyInstance<
     TServer,
     TRawRequest,
     TRawResponse
-  > = FastifyInstance<TServer, TRawRequest, TRawResponse>,
-> extends AbstractHttpAdapter<TServer, TRequest, TReply> {
-  protected readonly instance: TInstance;
+  >;
   private _isParserRegistered: boolean;
   private isMiddieRegistered: boolean;
 
@@ -95,14 +88,15 @@ export class FastifyAdapter<
 
   constructor(
     instanceOrOptions:
-      | TInstance
+      | FastifyInstance<TServer>
       | FastifyHttp2Options<any>
       | FastifyHttp2SecureOptions<any>
       | FastifyHttpsOptions<any>
       | FastifyServerOptions<TServer> = fastify() as any,
   ) {
     const instance =
-      instanceOrOptions && (instanceOrOptions as TInstance).server
+      instanceOrOptions &&
+      (instanceOrOptions as FastifyInstance<TServer>).server
         ? instanceOrOptions
         : fastify(instanceOrOptions as FastifyServerOptions);
 
@@ -127,11 +121,11 @@ export class FastifyAdapter<
   }
 
   public reply(
-    response: TRawResponse | TReply,
+    response: TRawResponse | FastifyReply,
     body: any,
     statusCode?: number,
   ) {
-    const fastifyReply: TReply = this.isNativeResponse(response)
+    const fastifyReply: FastifyReply = this.isNativeResponse(response)
       ? new Reply(
           response,
           {
@@ -156,28 +150,32 @@ export class FastifyAdapter<
     return fastifyReply.send(body);
   }
 
-  public status(response: TRawResponse | TReply, statusCode: number) {
+  public status(response: TRawResponse | FastifyReply, statusCode: number) {
     if (this.isNativeResponse(response)) {
       response.statusCode = statusCode;
       return response;
     }
-    return (response as TReply).code(statusCode);
+    return (response as FastifyReply).code(statusCode);
   }
 
   public render(
-    response: TReply & { view: Function },
+    response: FastifyReply & { view: Function },
     view: string,
     options: any,
   ) {
     return response && response.view(view, options);
   }
 
-  public redirect(response: TReply, statusCode: number, url: string) {
+  public redirect(response: FastifyReply, statusCode: number, url: string) {
     const code = statusCode ?? HttpStatus.FOUND;
     return response.status(code).redirect(url);
   }
 
-  public setErrorHandler(handler: Parameters<TInstance['setErrorHandler']>[0]) {
+  public setErrorHandler(
+    handler: Parameters<
+      FastifyInstance<TServer, TRawRequest, TRawResponse>['setErrorHandler']
+    >[0],
+  ) {
     return this.instance.setErrorHandler(handler);
   }
 
@@ -189,13 +187,19 @@ export class FastifyAdapter<
     return this.instance.server as unknown as T;
   }
 
-  public getInstance<T = TInstance>(): T {
+  public getInstance<
+    T = FastifyInstance<TServer, TRawRequest, TRawResponse>,
+  >(): T {
     return this.instance as unknown as T;
   }
 
-  public register<TRegister extends Parameters<TInstance['register']>>(
-    plugin: TRegister['0'],
-    opts?: TRegister['1'],
+  public register<Options extends FastifyPluginOptions = any>(
+    plugin:
+      | FastifyPluginCallback<Options>
+      | FastifyPluginAsync<Options>
+      | Promise<{ default: FastifyPluginCallback<Options> }>
+      | Promise<{ default: FastifyPluginAsync<Options> }>,
+    opts?: FastifyRegisterOptions<Options>,
   ) {
     return this.instance.register(plugin, opts);
   }
@@ -226,9 +230,7 @@ export class FastifyAdapter<
 
   public useStaticAssets(options: FastifyStaticOptions) {
     return this.register(
-      loadPackage('fastify-static', 'FastifyAdapter.useStaticAssets()', () =>
-        require('fastify-static'),
-      ),
+      loadPackage('fastify-static', 'FastifyAdapter.useStaticAssets()'),
       options,
     );
   }
@@ -241,59 +243,87 @@ export class FastifyAdapter<
       process.exit(1);
     }
     return this.register(
-      loadPackage('point-of-view', 'FastifyAdapter.setViewEngine()', () =>
-        require('point-of-view'),
-      ),
+      loadPackage('point-of-view', 'FastifyAdapter.setViewEngine()'),
       options,
     );
   }
 
-  public setHeader(response: TReply, name: string, value: string) {
+  public setHeader(response: FastifyReply, name: string, value: string) {
     return response.header(name, value);
   }
 
-  public getRequestHostname(request: TRequest): string {
+  public getRequestHostname(request: FastifyRequest): string {
     return request.hostname;
   }
 
-  public getRequestMethod(request: TRequest): string {
+  public getRequestMethod(request: FastifyRequest): string {
     return request.raw ? request.raw.method : request.method;
   }
 
-  public getRequestUrl(request: TRequest): string;
-  public getRequestUrl(request: TRawRequest): string;
-  public getRequestUrl(request: TRequest & TRawRequest): string {
-    return this.getRequestOriginalUrl(request.raw || request);
+  public getRequestUrl(request: FastifyRequest): string {
+    return request.raw ? request.raw.url : request.url;
   }
 
-  public enableCors(options: CorsOptions | CorsOptionsDelegate<TRequest>) {
-    this.register(import('fastify-cors'), options);
+  public enableCors(
+    options:
+      | CorsOptions
+      | CorsOptionsDelegate<
+          FastifyRequest<RequestGenericInterface, TServer, TRawRequest>
+        >,
+  ) {
+    if (typeof options === 'function') {
+      this.register(require('fastify-cors'), () => options);
+    } else {
+      this.register(require('fastify-cors'), options);
+    }
   }
 
   public registerParserMiddleware() {
     if (this._isParserRegistered) {
       return;
     }
-    this.register(import('fastify-formbody'));
+    this.register(require('fastify-formbody'));
     this._isParserRegistered = true;
   }
 
-  public async createMiddlewareFactory(): Promise<
-    (path: string, callback: Function) => any
-  > {
+  public async createMiddlewareFactory(
+    requestMethod: RequestMethod,
+  ): Promise<(path: string, callback: Function) => any> {
     if (!this.isMiddieRegistered) {
       await this.registerMiddie();
     }
     return (path: string, callback: Function) => {
-      const normalizedPath = path.endsWith('/*')
-        ? `${path.slice(0, -1)}(.*)`
-        : path;
+      const re = pathToRegexp(path);
+      const normalizedPath = path === '/*' ? '' : path;
 
-      // The following type assertion is valid as we use import('middie') rather than require('middie')
+      // The following type assertion is valid as we enforce "middie" plugin registration
+      // which enhances the FastifyInstance with the "use()" method.
       // ref https://github.com/fastify/middie/pull/55
-      this.instance.use(
+      const instanceWithUseFn = this.instance as unknown as FastifyInstance & {
+        use: Function;
+      };
+
+      instanceWithUseFn.use(
         normalizedPath,
-        callback as Parameters<TInstance['use']>['1'],
+        (req: any, res: any, next: Function) => {
+          const queryParamsIndex = req.originalUrl.indexOf('?');
+          const pathname =
+            queryParamsIndex >= 0
+              ? req.originalUrl.slice(0, queryParamsIndex)
+              : req.originalUrl;
+
+          if (!re.exec(pathname + '/') && normalizedPath) {
+            return next();
+          }
+          if (
+            requestMethod === RequestMethod.ALL ||
+            req.method === RequestMethod[requestMethod] ||
+            (requestMethod as number) === -1
+          ) {
+            return callback(req, res, next);
+          }
+          next();
+        },
       );
     };
   }
@@ -314,17 +344,13 @@ export class FastifyAdapter<
   }
 
   private isNativeResponse(
-    response: TRawResponse | TReply,
+    response: TRawResponse | FastifyReply,
   ): response is TRawResponse {
     return !('status' in response);
   }
 
   private async registerMiddie() {
     this.isMiddieRegistered = true;
-    await this.register(import('middie'));
-  }
-
-  private getRequestOriginalUrl(rawRequest: TRawRequest) {
-    return rawRequest.originalUrl || rawRequest.url;
+    await this.register(require('middie'));
   }
 }
diff --git a/packages/platform-fastify/package.json b/packages/platform-fastify/package.json
index fabeef101..3743f148a 100644
--- a/packages/platform-fastify/package.json
+++ b/packages/platform-fastify/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/platform-fastify",
-  "version": "8.0.2",
+  "version": "8.0.4",
   "description": "Nest - modern, fast, powerful node.js web framework (@platform-fastify)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -17,8 +17,8 @@
     "access": "public"
   },
   "dependencies": {
-    "fastify": "3.19.0",
-    "fastify-cors": "6.0.1",
+    "fastify": "3.19.1",
+    "fastify-cors": "6.0.2",
     "fastify-formbody": "5.0.0",
     "light-my-request": "4.4.1",
     "middie": "5.3.0",
diff --git a/packages/platform-socket.io/package.json b/packages/platform-socket.io/package.json
index 69607a2bc..87abaa6b0 100644
--- a/packages/platform-socket.io/package.json
+++ b/packages/platform-socket.io/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/platform-socket.io",
-  "version": "8.0.2",
+  "version": "8.0.4",
   "description": "Nest - modern, fast, powerful node.js web framework (@platform-socket.io)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
diff --git a/packages/platform-ws/package.json b/packages/platform-ws/package.json
index 034f10dc4..d77e94d3f 100644
--- a/packages/platform-ws/package.json
+++ b/packages/platform-ws/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/platform-ws",
-  "version": "8.0.2",
+  "version": "8.0.4",
   "description": "Nest - modern, fast, powerful node.js web framework (@platform-ws)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
diff --git a/packages/testing/package.json b/packages/testing/package.json
index cea1ce3b3..0fb803afd 100644
--- a/packages/testing/package.json
+++ b/packages/testing/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/testing",
-  "version": "8.0.2",
+  "version": "8.0.4",
   "description": "Nest - modern, fast, powerful node.js web framework (@testing)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
diff --git a/packages/websockets/package.json b/packages/websockets/package.json
index f1cad54a7..d18d1c530 100644
--- a/packages/websockets/package.json
+++ b/packages/websockets/package.json
@@ -1,6 +1,6 @@
 {
   "name": "@nestjs/websockets",
-  "version": "8.0.2",
+  "version": "8.0.4",
   "description": "Nest - modern, fast, powerful node.js web framework (@websockets)",
   "author": "Kamil Mysliwiec",
   "license": "MIT",
@@ -17,8 +17,8 @@
     "tslib": "2.3.0"
   },
   "devDependencies": {
-    "@nestjs/common": "8.0.2",
-    "@nestjs/core": "8.0.2"
+    "@nestjs/common": "8.0.4",
+    "@nestjs/core": "8.0.4"
   },
   "peerDependencies": {
     "@nestjs/common": "^8.0.0",
diff --git a/packages/websockets/test/utils/compare-element.util.spec.ts b/packages/websockets/test/utils/compare-element.util.spec.ts
new file mode 100644
index 000000000..74e4b6c40
--- /dev/null
+++ b/packages/websockets/test/utils/compare-element.util.spec.ts
@@ -0,0 +1,9 @@
+import { expect } from 'chai';
+import { compareElementAt } from '../../utils/compare-element.util';
+
+describe('compareElementAt', () => {
+  it('should compare elements at the specific position in arrays', () => {
+    expect(compareElementAt([0, 1, 0], [2, 1, 7], 1)).to.be.true;
+    expect(compareElementAt([0, 1, 0], [2, 0, 7], 1)).to.be.false;
+  });
+});
diff --git a/sample/01-cats-app/package-lock.json b/sample/01-cats-app/package-lock.json
index 77d919d56..efdeb61dd 100644
Binary files a/sample/01-cats-app/package-lock.json and b/sample/01-cats-app/package-lock.json differ
diff --git a/sample/01-cats-app/package.json b/sample/01-cats-app/package.json
index c3454c50f..2be48ba31 100644
--- a/sample/01-cats-app/package.json
+++ b/sample/01-cats-app/package.json
@@ -30,9 +30,9 @@
   },
   "devDependencies": {
     "@nestjs/cli": "8.0.2",
-    "@nestjs/schematics": "8.0.0",
+    "@nestjs/schematics": "8.0.1",
     "@nestjs/testing": "8.0.2",
-    "@types/express": "4.17.12",
+    "@types/express": "4.17.13",
     "@types/jest": "26.0.24",
     "@types/node": "14.17.5",
     "@types/supertest": "2.0.11",
@@ -43,8 +43,8 @@
     "ts-loader": "9.2.3",
     "ts-node": "10.1.0",
     "tsconfig-paths": "3.10.1",
-    "@typescript-eslint/eslint-plugin": "4.28.2",
-    "@typescript-eslint/parser": "4.28.2",
+    "@typescript-eslint/eslint-plugin": "4.28.3",
+    "@typescript-eslint/parser": "4.28.3",
     "eslint": "7.30.0",
     "eslint-config-prettier": "8.3.0",
     "eslint-plugin-import": "2.23.4",
diff --git a/sample/02-gateways/package-lock.json b/sample/02-gateways/package-lock.json
index f206cb50b..21a05ba48 100644
Binary files a/sample/02-gateways/package-lock.json and b/sample/02-gateways/package-lock.json differ
diff --git a/sample/02-gateways/package.json b/sample/02-gateways/package.json
index 924add593..aaaf67792 100644
--- a/sample/02-gateways/package.json
+++ b/sample/02-gateways/package.json
@@ -37,9 +37,9 @@
     "@types/socket.io-redis": "1.0.27",
     "@types/ws": "7.4.6",
     "@nestjs/cli": "8.0.2",
-    "@nestjs/schematics": "8.0.0",
+    "@nestjs/schematics": "8.0.1",
     "@nestjs/testing": "8.0.2",
-    "@types/express": "4.17.12",
+    "@types/express": "4.17.13",
     "@types/node": "14.17.5",
     "@types/supertest": "2.0.11",
     "jest": "27.0.6",
@@ -49,8 +49,8 @@
     "ts-loader": "9.2.3",
     "ts-node": "10.1.0",
     "tsconfig-paths": "3.10.1",
-    "@typescript-eslint/eslint-plugin": "4.28.2",
-    "@typescript-eslint/parser": "4.28.2",
+    "@typescript-eslint/eslint-plugin": "4.28.3",
+    "@typescript-eslint/parser": "4.28.3",
     "eslint": "7.30.0",
     "eslint-config-prettier": "8.3.0",
     "eslint-plugin-import": "2.23.4",
diff --git a/sample/03-microservices/package-lock.json b/sample/03-microservices/package-lock.json
index 4fea9245f..ea7903c99 100644
Binary files a/sample/03-microservices/package-lock.json and b/sample/03-microservices/package-lock.json differ
diff --git a/sample/03-microservices/package.json b/sample/03-microservices/package.json
index 788c89bf6..d2888a657 100644
--- a/sample/03-microservices/package.json
+++ b/sample/03-microservices/package.json
@@ -31,10 +31,10 @@
   },
   "devDependencies": {
     "@nestjs/cli": "8.0.2",
-    "@nestjs/schematics": "8.0.0",
+    "@nestjs/schematics": "8.0.1",
     "@nestjs/testing": "8.0.2",
     "@types/amqplib": "0.8.1",
-    "@types/express": "4.17.12",
+    "@types/express": "4.17.13",
     "@types/node": "14.17.5",
     "@types/supertest": "2.0.11",
     "jest": "27.0.6",
@@ -44,8 +44,8 @@
     "ts-loader": "9.2.3",
     "ts-node": "10.1.0",
     "tsconfig-paths": "3.10.1",
-    "@typescript-eslint/eslint-plugin": "4.28.2",
-    "@typescript-eslint/parser": "4.28.2",
+    "@typescript-eslint/eslint-plugin": "4.28.3",
+    "@typescript-eslint/parser": "4.28.3",
     "eslint": "7.30.0",
     "eslint-config-prettier": "8.3.0",
     "eslint-plugin-import": "2.23.4",
diff --git a/sample/04-grpc/package-lock.json b/sample/04-grpc/package-lock.json
index 39cb4e6bb..721a9730e 100644
Binary files a/sample/04-grpc/package-lock.json and b/sample/04-grpc/package-lock.json differ
diff --git a/sample/04-grpc/package.json b/sample/04-grpc/package.json
index c2ab56682..73e44a74c 100644
--- a/sample/04-grpc/package.json
+++ b/sample/04-grpc/package.json
@@ -19,7 +19,7 @@
     "test:e2e": "echo 'No e2e tests implemented yet.'"
   },
   "dependencies": {
-    "@grpc/grpc-js": "1.3.4",
+    "@grpc/grpc-js": "1.3.5",
     "@nestjs/common": "8.0.2",
     "@nestjs/core": "8.0.2",
     "@nestjs/microservices": "8.0.2",
@@ -32,9 +32,9 @@
   },
   "devDependencies": {
     "@nestjs/cli": "8.0.2",
-    "@nestjs/schematics": "8.0.0",
+    "@nestjs/schematics": "8.0.1",
     "@nestjs/testing": "8.0.2",
-    "@types/express": "4.17.12",
+    "@types/express": "4.17.13",
     "@types/node": "14.17.5",
     "@types/supertest": "2.0.11",
     "@types/ws": "7.4.6",
@@ -45,8 +45,8 @@
     "ts-loader": "9.2.3",
     "ts-node": "10.1.0",
     "tsconfig-paths": "3.10.1",
-    "@typescript-eslint/eslint-plugin": "4.28.2",
-    "@typescript-eslint/parser": "4.28.2",
+    "@typescript-eslint/eslint-plugin": "4.28.3",
+    "@typescript-eslint/parser": "4.28.3",
     "eslint": "7.30.0",
     "eslint-config-prettier": "8.3.0",
     "eslint-plugin-import": "2.23.4",
diff --git a/sample/05-sql-typeorm/package-lock.json b/sample/05-sql-typeorm/package-lock.json
index a7de7a2a4..cbaa5a95f 100644
Binary files a/sample/05-sql-typeorm/package-lock.json and b/sample/05-sql-typeorm/package-lock.json differ
diff --git a/sample/05-sql-typeorm/package.json b/sample/05-sql-typeorm/package.json
index e28380026..b25c33570 100644
--- a/sample/05-sql-typeorm/package.json
+++ b/sample/05-sql-typeorm/package.json
@@ -31,9 +31,9 @@
   },
   "devDependencies": {
     "@nestjs/cli": "8.0.2",
-    "@nestjs/schematics": "8.0.0",
+    "@nestjs/schematics": "8.0.1",
     "@nestjs/testing": "8.0.2",
-    "@types/express": "4.17.12",
+    "@types/express": "4.17.13",
     "@types/node": "14.17.5",
     "@types/supertest": "2.0.11",
     "@types/ws": "7.4.6",
@@ -44,8 +44,8 @@
     "ts-loader": "9.2.3",
     "ts-node": "10.1.0",
     "tsconfig-paths": "3.10.1",
-    "@typescript-eslint/eslint-plugin": "4.28.2",
-    "@typescript-eslint/parser": "4.28.2",
+    "@typescript-eslint/eslint-plugin": "4.28.3",
+    "@typescript-eslint/parser": "4.28.3",
     "eslint": "7.30.0",
     "eslint-config-prettier": "8.3.0",
     "eslint-plugin-import": "2.23.4",
diff --git a/sample/06-mongoose/package-lock.json b/sample/06-mongoose/package-lock.json
index bf17549d8..529a0a7c4 100644
Binary files a/sample/06-mongoose/package-lock.json and b/sample/06-mongoose/package-lock.json differ
diff --git a/sample/06-mongoose/package.json b/sample/06-mongoose/package.json
index cffef724a..b71e59b78 100644
--- a/sample/06-mongoose/package.json
+++ b/sample/06-mongoose/package.json
@@ -31,9 +31,9 @@
   "devDependencies": {
     "@types/mongoose": "5.11.96",
     "@nestjs/cli": "8.0.2",
-    "@nestjs/schematics": "8.0.0",
+    "@nestjs/schematics": "8.0.1",
     "@nestjs/testing": "8.0.2",
-    "@types/express": "4.17.12",
+    "@types/express": "4.17.13",
     "@types/node": "14.17.5",
     "@types/supertest": "2.0.11",
     "@types/ws": "7.4.6",
@@ -44,8 +44,8 @@
     "ts-loader": "9.2.3",
     "ts-node": "10.1.0",
     "tsconfig-paths": "3.10.1",
-    "@typescript-eslint/eslint-plugin": "4.28.2",
-    "@typescript-eslint/parser": "4.28.2",
+    "@typescript-eslint/eslint-plugin": "4.28.3",
+    "@typescript-eslint/parser": "4.28.3",
     "eslint": "7.30.0",
     "eslint-config-prettier": "8.3.0",
     "eslint-plugin-import": "2.23.4",
diff --git a/sample/07-sequelize/package-lock.json b/sample/07-sequelize/package-lock.json
index 9917f30d7..11e469d62 100644
Binary files a/sample/07-sequelize/package-lock.json and b/sample/07-sequelize/package-lock.json differ
diff --git a/sample/07-sequelize/package.json b/sample/07-sequelize/package.json
index c679a468e..d71b56bbd 100644
--- a/sample/07-sequelize/package.json
+++ b/sample/07-sequelize/package.json
@@ -34,9 +34,9 @@
   "devDependencies": {
     "@types/sequelize": "4.28.10",
     "@nestjs/cli": "8.0.2",
-    "@nestjs/schematics": "8.0.0",
+    "@nestjs/schematics": "8.0.1",
     "@nestjs/testing": "8.0.2",
-    "@types/express": "4.17.12",
+    "@types/express": "4.17.13",
     "@types/node": "14.17.5",
     "@types/supertest": "2.0.11",
     "@types/ws": "7.4.6",
@@ -47,8 +47,8 @@
     "ts-loader": "9.2.3",
     "ts-node": "10.1.0",
     "tsconfig-paths": "3.10.1",
-    "@typescript-eslint/eslint-plugin": "4.28.2",
-    "@typescript-eslint/parser": "4.28.2",
+    "@typescript-eslint/eslint-plugin": "4.28.3",
+    "@typescript-eslint/parser": "4.28.3",
     "eslint": "7.30.0",
     "eslint-config-prettier": "8.3.0",
     "eslint-plugin-import": "2.23.4",
diff --git a/sample/08-webpack/package-lock.json b/sample/08-webpack/package-lock.json
index 29a656a1f..9365056f8 100644
Binary files a/sample/08-webpack/package-lock.json and b/sample/08-webpack/package-lock.json differ
diff --git a/sample/08-webpack/package.json b/sample/08-webpack/package.json
index de1e21d7c..76ba7d7c3 100644
--- a/sample/08-webpack/package.json
+++ b/sample/08-webpack/package.json
@@ -20,10 +20,10 @@
   },
   "devDependencies": {
     "@nestjs/cli": "8.0.2",
-    "@nestjs/schematics": "8.0.0",
+    "@nestjs/schematics": "8.0.1",
     "@types/node": "14.17.5",
-    "@typescript-eslint/eslint-plugin": "4.28.2",
-    "@typescript-eslint/parser": "4.28.2",
+    "@typescript-eslint/eslint-plugin": "4.28.3",
+    "@typescript-eslint/parser": "4.28.3",
     "eslint": "7.30.0",
     "eslint-config-prettier": "8.3.0",
     "eslint-plugin-import": "2.23.4",
diff --git a/sample/10-fastify/package-lock.json b/sample/10-fastify/package-lock.json
index fbeb22960..8ef8e34a4 100644
Binary files a/sample/10-fastify/package-lock.json and b/sample/10-fastify/package-lock.json differ
diff --git a/sample/10-fastify/package.json b/sample/10-fastify/package.json
index 5b9418c87..3ddb3bddb 100644
--- a/sample/10-fastify/package.json
+++ b/sample/10-fastify/package.json
@@ -30,9 +30,9 @@
   },
   "devDependencies": {
     "@nestjs/cli": "8.0.2",
-    "@nestjs/schematics": "8.0.0",
+    "@nestjs/schematics": "8.0.1",
     "@nestjs/testing": "8.0.2",
-    "@types/express": "4.17.12",
+    "@types/express": "4.17.13",
     "@types/node": "14.17.5",
     "@types/supertest": "2.0.11",
     "@types/ws": "7.4.6",
@@ -43,8 +43,8 @@
     "ts-loader": "9.2.3",
     "ts-node": "10.1.0",
     "tsconfig-paths": "3.10.1",
-    "@typescript-eslint/eslint-plugin": "4.28.2",
-    "@typescript-eslint/parser": "4.28.2",
+    "@typescript-eslint/eslint-plugin": "4.28.3",
+    "@typescript-eslint/parser": "4.28.3",
     "eslint": "7.30.0",
     "eslint-config-prettier": "8.3.0",
     "eslint-plugin-import": "2.23.4",
diff --git a/sample/11-swagger/package-lock.json b/sample/11-swagger/package-lock.json
index c5bc6916f..1103c4d13 100644
Binary files a/sample/11-swagger/package-lock.json and b/sample/11-swagger/package-lock.json differ
diff --git a/sample/11-swagger/package.json b/sample/11-swagger/package.json
index 80394d26d..7c8210352 100644
--- a/sample/11-swagger/package.json
+++ b/sample/11-swagger/package.json
@@ -22,7 +22,7 @@
     "@nestjs/common": "8.0.2",
     "@nestjs/core": "8.0.2",
     "@nestjs/platform-express": "8.0.2",
-    "@nestjs/swagger": "5.0.0",
+    "@nestjs/swagger": "5.0.3",
     "class-transformer": "0.4.0",
     "class-validator": "0.13.1",
     "reflect-metadata": "0.1.13",
@@ -32,9 +32,9 @@
   },
   "devDependencies": {
     "@nestjs/cli": "8.0.2",
-    "@nestjs/schematics": "8.0.0",
+    "@nestjs/schematics": "8.0.1",
     "@nestjs/testing": "8.0.2",
-    "@types/express": "4.17.12",
+    "@types/express": "4.17.13",
     "@types/node": "14.17.5",
     "@types/supertest": "2.0.11",
     "jest": "27.0.6",
@@ -44,8 +44,8 @@
     "ts-loader": "9.2.3",
     "ts-node": "10.1.0",
     "tsconfig-paths": "3.10.1",
-    "@typescript-eslint/eslint-plugin": "4.28.2",
-    "@typescript-eslint/parser": "4.28.2",
+    "@typescript-eslint/eslint-plugin": "4.28.3",
+    "@typescript-eslint/parser": "4.28.3",
     "eslint": "7.30.0",
     "eslint-config-prettier": "8.3.0",
     "eslint-plugin-import": "2.23.4",
diff --git a/sample/12-graphql-schema-first/package-lock.json b/sample/12-graphql-schema-first/package-lock.json
index 4266e8219..0582f56da 100644
Binary files a/sample/12-graphql-schema-first/package-lock.json and b/sample/12-graphql-schema-first/package-lock.json differ
diff --git a/sample/12-graphql-schema-first/package.json b/sample/12-graphql-schema-first/package.json
index f2300dc22..438de437d 100644
--- a/sample/12-graphql-schema-first/package.json
+++ b/sample/12-graphql-schema-first/package.json
@@ -21,7 +21,7 @@
   "dependencies": {
     "@nestjs/common": "8.0.2",
     "@nestjs/core": "8.0.2",
-    "@nestjs/graphql": "7.11.0",
+    "@nestjs/graphql": "8.0.2",
     "@nestjs/platform-express": "8.0.2",
     "apollo-server": "2.25.2",
     "apollo-server-express": "2.25.2",
@@ -35,9 +35,9 @@
   },
   "devDependencies": {
     "@nestjs/cli": "8.0.2",
-    "@nestjs/schematics": "8.0.0",
+    "@nestjs/schematics": "8.0.1",
     "@nestjs/testing": "8.0.2",
-    "@types/express": "4.17.12",
+    "@types/express": "4.17.13",
     "@types/node": "14.17.5",
     "@types/supertest": "2.0.11",
     "jest": "27.0.6",
@@ -47,8 +47,8 @@
     "ts-loader": "9.2.3",
     "ts-node": "10.1.0",
     "tsconfig-paths": "3.10.1",
-    "@typescript-eslint/eslint-plugin": "4.28.2",
-    "@typescript-eslint/parser": "4.28.2",
+    "@typescript-eslint/eslint-plugin": "4.28.3",
+    "@typescript-eslint/parser": "4.28.3",
     "eslint": "7.30.0",
     "eslint-config-prettier": "8.3.0",
     "eslint-plugin-import": "2.23.4",
diff --git a/sample/13-mongo-typeorm/package-lock.json b/sample/13-mongo-typeorm/package-lock.json
index d9a12262d..b20bc8a63 100644
Binary files a/sample/13-mongo-typeorm/package-lock.json and b/sample/13-mongo-typeorm/package-lock.json differ
diff --git a/sample/13-mongo-typeorm/package.json b/sample/13-mongo-typeorm/package.json
index 3f0088138..eb16349f2 100644
--- a/sample/13-mongo-typeorm/package.json
+++ b/sample/13-mongo-typeorm/package.json
@@ -23,7 +23,7 @@
     "@nestjs/core": "8.0.2",
     "@nestjs/platform-express": "8.0.2",
     "@nestjs/typeorm": "8.0.1",
-    "mongodb": "3.6.10",
+    "mongodb": "4.0.0",
     "reflect-metadata": "0.1.13",
     "rimraf": "3.0.2",
     "rxjs": "7.2.0",
@@ -31,9 +31,9 @@
   },
   "devDependencies": {
     "@nestjs/cli": "8.0.2",
-    "@nestjs/schematics": "8.0.0",
+    "@nestjs/schematics": "8.0.1",
     "@nestjs/testing": "8.0.2",
-    "@types/express": "4.17.12",
+    "@types/express": "4.17.13",
     "@types/node": "14.17.5",
     "@types/supertest": "2.0.11",
     "jest": "27.0.6",
@@ -43,8 +43,8 @@
     "ts-loader": "9.2.3",
     "ts-node": "10.1.0",
     "tsconfig-paths": "3.10.1",
-    "@typescript-eslint/eslint-plugin": "4.28.2",
-    "@typescript-eslint/parser": "4.28.2",
+    "@typescript-eslint/eslint-plugin": "4.28.3",
+    "@typescript-eslint/parser": "4.28.3",
     "eslint": "7.30.0",
     "eslint-config-prettier": "8.3.0",
     "eslint-plugin-import": "2.23.4",
diff --git a/sample/14-mongoose-base/package-lock.json b/sample/14-mongoose-base/package-lock.json
index cdc52064f..8e4101128 100644
Binary files a/sample/14-mongoose-base/package-lock.json and b/sample/14-mongoose-base/package-lock.json differ
diff --git a/sample/14-mongoose-base/package.json b/sample/14-mongoose-base/package.json
index 1dcd77bf3..6573d5ec7 100644
--- a/sample/14-mongoose-base/package.json
+++ b/sample/14-mongoose-base/package.json
@@ -29,9 +29,9 @@
   },
   "devDependencies": {
     "@nestjs/cli": "8.0.2",
-    "@nestjs/schematics": "8.0.0",
+    "@nestjs/schematics": "8.0.1",
     "@nestjs/testing": "8.0.2",
-    "@types/express": "4.17.12",
+    "@types/express": "4.17.13",
     "@types/node": "14.17.5",
     "@types/supertest": "2.0.11",
     "jest": "27.0.6",
@@ -41,8 +41,8 @@
     "ts-loader": "9.2.3",
     "ts-node": "10.1.0",
     "tsconfig-paths": "3.10.1",
-    "@typescript-eslint/eslint-plugin": "4.28.2",
-    "@typescript-eslint/parser": "4.28.2",
+    "@typescript-eslint/eslint-plugin": "4.28.3",
+    "@typescript-eslint/parser": "4.28.3",
     "eslint": "7.30.0",
     "eslint-config-prettier": "8.3.0",
     "eslint-plugin-import": "2.23.4",
diff --git a/sample/15-mvc/package-lock.json b/sample/15-mvc/package-lock.json
index 8d22bcd88..7f0eb2667 100644
Binary files a/sample/15-mvc/package-lock.json and b/sample/15-mvc/package-lock.json differ
diff --git a/sample/15-mvc/package.json b/sample/15-mvc/package.json
index fdd59805a..8fce54b8d 100644
--- a/sample/15-mvc/package.json
+++ b/sample/15-mvc/package.json
@@ -30,9 +30,9 @@
   },
   "devDependencies": {
     "@nestjs/cli": "8.0.2",
-    "@nestjs/schematics": "8.0.0",
+    "@nestjs/schematics": "8.0.1",
     "@nestjs/testing": "8.0.2",
-    "@types/express": "4.17.12",
+    "@types/express": "4.17.13",
     "@types/node": "14.17.5",
     "@types/supertest": "2.0.11",
     "jest": "27.0.6",
@@ -42,8 +42,8 @@
     "ts-loader": "9.2.3",
     "ts-node": "10.1.0",
     "tsconfig-paths": "3.10.1",
-    "@typescript-eslint/eslint-plugin": "4.28.2",
-    "@typescript-eslint/parser": "4.28.2",
+    "@typescript-eslint/eslint-plugin": "4.28.3",
+    "@typescript-eslint/parser": "4.28.3",
     "eslint": "7.30.0",
     "eslint-config-prettier": "8.3.0",
     "eslint-plugin-import": "2.23.4",
diff --git a/sample/16-gateways-ws/package-lock.json b/sample/16-gateways-ws/package-lock.json
index 0bc388364..a16827246 100644
Binary files a/sample/16-gateways-ws/package-lock.json and b/sample/16-gateways-ws/package-lock.json differ
diff --git a/sample/16-gateways-ws/package.json b/sample/16-gateways-ws/package.json
index e1f2be182..08de9598c 100644
--- a/sample/16-gateways-ws/package.json
+++ b/sample/16-gateways-ws/package.json
@@ -34,9 +34,9 @@
   "devDependencies": {
     "@types/ws": "7.4.6",
     "@nestjs/cli": "8.0.2",
-    "@nestjs/schematics": "8.0.0",
+    "@nestjs/schematics": "8.0.1",
     "@nestjs/testing": "8.0.2",
-    "@types/express": "4.17.12",
+    "@types/express": "4.17.13",
     "@types/node": "14.17.5",
     "@types/supertest": "2.0.11",
     "jest": "27.0.6",
@@ -46,8 +46,8 @@
     "ts-loader": "9.2.3",
     "ts-node": "10.1.0",
     "tsconfig-paths": "3.10.1",
-    "@typescript-eslint/eslint-plugin": "4.28.2",
-    "@typescript-eslint/parser": "4.28.2",
+    "@typescript-eslint/eslint-plugin": "4.28.3",
+    "@typescript-eslint/parser": "4.28.3",
     "eslint": "7.30.0",
     "eslint-config-prettier": "8.3.0",
     "eslint-plugin-import": "2.23.4",
diff --git a/sample/17-mvc-fastify/package-lock.json b/sample/17-mvc-fastify/package-lock.json
index e103f4c7c..f1ec694d7 100644
Binary files a/sample/17-mvc-fastify/package-lock.json and b/sample/17-mvc-fastify/package-lock.json differ
diff --git a/sample/17-mvc-fastify/package.json b/sample/17-mvc-fastify/package.json
index 1b68d81fa..69855347f 100644
--- a/sample/17-mvc-fastify/package.json
+++ b/sample/17-mvc-fastify/package.json
@@ -34,9 +34,9 @@
     "@types/socket.io-redis": "1.0.27",
     "@types/ws": "7.4.6",
     "@nestjs/cli": "8.0.2",
-    "@nestjs/schematics": "8.0.0",
+    "@nestjs/schematics": "8.0.1",
     "@nestjs/testing": "8.0.2",
-    "@types/express": "4.17.12",
+    "@types/express": "4.17.13",
     "@types/node": "14.17.5",
     "@types/supertest": "2.0.11",
     "jest": "27.0.6",
@@ -46,8 +46,8 @@
     "ts-loader": "9.2.3",
     "ts-node": "10.1.0",
     "tsconfig-paths": "3.10.1",
-    "@typescript-eslint/eslint-plugin": "4.28.2",
-    "@typescript-eslint/parser": "4.28.2",
+    "@typescript-eslint/eslint-plugin": "4.28.3",
+    "@typescript-eslint/parser": "4.28.3",
     "eslint": "7.30.0",
     "eslint-config-prettier": "8.3.0",
     "eslint-plugin-import": "2.23.4",
diff --git a/sample/18-context/package-lock.json b/sample/18-context/package-lock.json
index 55bfc4b81..132f617df 100644
Binary files a/sample/18-context/package-lock.json and b/sample/18-context/package-lock.json differ
diff --git a/sample/18-context/package.json b/sample/18-context/package.json
index e5d4308af..4af6fbafc 100644
--- a/sample/18-context/package.json
+++ b/sample/18-context/package.json
@@ -27,7 +27,7 @@
   },
   "devDependencies": {
     "@nestjs/cli": "8.0.2",
-    "@nestjs/schematics": "8.0.0",
+    "@nestjs/schematics": "8.0.1",
     "@types/node": "14.17.5",
     "@types/supertest": "2.0.11",
     "jest": "27.0.6",
@@ -37,8 +37,8 @@
     "ts-loader": "9.2.3",
     "ts-node": "10.1.0",
     "tsconfig-paths": "3.10.1",
-    "@typescript-eslint/eslint-plugin": "4.28.2",
-    "@typescript-eslint/parser": "4.28.2",
+    "@typescript-eslint/eslint-plugin": "4.28.3",
+    "@typescript-eslint/parser": "4.28.3",
     "eslint": "7.30.0",
     "eslint-config-prettier": "8.3.0",
     "eslint-plugin-import": "2.23.4",
diff --git a/sample/19-auth-jwt/package-lock.json b/sample/19-auth-jwt/package-lock.json
index c6991bbfd..310b65e7f 100644
Binary files a/sample/19-auth-jwt/package-lock.json and b/sample/19-auth-jwt/package-lock.json differ
diff --git a/sample/19-auth-jwt/package.json b/sample/19-auth-jwt/package.json
index 5039a84c2..30b175ffc 100644
--- a/sample/19-auth-jwt/package.json
+++ b/sample/19-auth-jwt/package.json
@@ -34,9 +34,9 @@
   },
   "devDependencies": {
     "@nestjs/cli": "8.0.2",
-    "@nestjs/schematics": "8.0.0",
+    "@nestjs/schematics": "8.0.1",
     "@nestjs/testing": "8.0.2",
-    "@types/express": "4.17.12",
+    "@types/express": "4.17.13",
     "@types/jest": "26.0.24",
     "@types/node": "14.17.5",
     "@types/supertest": "2.0.11",
@@ -47,8 +47,8 @@
     "ts-loader": "9.2.3",
     "ts-node": "10.1.0",
     "tsconfig-paths": "3.10.1",
-    "@typescript-eslint/eslint-plugin": "4.28.2",
-    "@typescript-eslint/parser": "4.28.2",
+    "@typescript-eslint/eslint-plugin": "4.28.3",
+    "@typescript-eslint/parser": "4.28.3",
     "eslint": "7.30.0",
     "eslint-config-prettier": "8.3.0",
     "eslint-plugin-import": "2.23.4",
diff --git a/sample/20-cache/package-lock.json b/sample/20-cache/package-lock.json
index 993854535..a8370e9c9 100644
Binary files a/sample/20-cache/package-lock.json and b/sample/20-cache/package-lock.json differ
diff --git a/sample/20-cache/package.json b/sample/20-cache/package.json
index f277fca73..7c9b85a5c 100644
--- a/sample/20-cache/package.json
+++ b/sample/20-cache/package.json
@@ -30,9 +30,9 @@
   },
   "devDependencies": {
     "@nestjs/cli": "8.0.2",
-    "@nestjs/schematics": "8.0.0",
+    "@nestjs/schematics": "8.0.1",
     "@nestjs/testing": "8.0.2",
-    "@types/express": "4.17.12",
+    "@types/express": "4.17.13",
     "@types/node": "14.17.5",
     "@types/supertest": "2.0.11",
     "jest": "27.0.6",
@@ -42,8 +42,8 @@
     "ts-loader": "9.2.3",
     "ts-node": "10.1.0",
     "tsconfig-paths": "3.10.1",
-    "@typescript-eslint/eslint-plugin": "4.28.2",
-    "@typescript-eslint/parser": "4.28.2",
+    "@typescript-eslint/eslint-plugin": "4.28.3",
+    "@typescript-eslint/parser": "4.28.3",
     "eslint": "7.30.0",
     "eslint-config-prettier": "8.3.0",
     "eslint-plugin-import": "2.23.4",
diff --git a/sample/21-serializer/package-lock.json b/sample/21-serializer/package-lock.json
index caf0985bb..0ad63c41f 100644
Binary files a/sample/21-serializer/package-lock.json and b/sample/21-serializer/package-lock.json differ
diff --git a/sample/21-serializer/package.json b/sample/21-serializer/package.json
index f028f9303..f560b5359 100644
--- a/sample/21-serializer/package.json
+++ b/sample/21-serializer/package.json
@@ -29,9 +29,9 @@
   },
   "devDependencies": {
     "@nestjs/cli": "8.0.2",
-    "@nestjs/schematics": "8.0.0",
+    "@nestjs/schematics": "8.0.1",
     "@nestjs/testing": "8.0.2",
-    "@types/express": "4.17.12",
+    "@types/express": "4.17.13",
     "@types/node": "14.17.5",
     "@types/supertest": "2.0.11",
     "jest": "27.0.6",
@@ -41,8 +41,8 @@
     "ts-loader": "9.2.3",
     "ts-node": "10.1.0",
     "tsconfig-paths": "3.10.1",
-    "@typescript-eslint/eslint-plugin": "4.28.2",
-    "@typescript-eslint/parser": "4.28.2",
+    "@typescript-eslint/eslint-plugin": "4.28.3",
+    "@typescript-eslint/parser": "4.28.3",
     "eslint": "7.30.0",
     "eslint-config-prettier": "8.3.0",
     "eslint-plugin-import": "2.23.4",
diff --git a/sample/22-graphql-prisma/package-lock.json b/sample/22-graphql-prisma/package-lock.json
index 6737f3ca2..d0e52e274 100644
Binary files a/sample/22-graphql-prisma/package-lock.json and b/sample/22-graphql-prisma/package-lock.json differ
diff --git a/sample/22-graphql-prisma/package.json b/sample/22-graphql-prisma/package.json
index 1375034e8..fe35170aa 100644
--- a/sample/22-graphql-prisma/package.json
+++ b/sample/22-graphql-prisma/package.json
@@ -21,7 +21,7 @@
   "dependencies": {
     "@nestjs/common": "8.0.2",
     "@nestjs/core": "8.0.2",
-    "@nestjs/graphql": "7.11.0",
+    "@nestjs/graphql": "8.0.2",
     "@nestjs/platform-express": "8.0.2",
     "apollo-server-express": "2.25.2",
     "graphql": "15.5.1",
@@ -33,9 +33,9 @@
   },
   "devDependencies": {
     "@nestjs/cli": "8.0.2",
-    "@nestjs/schematics": "8.0.0",
+    "@nestjs/schematics": "8.0.1",
     "@nestjs/testing": "8.0.2",
-    "@types/express": "4.17.12",
+    "@types/express": "4.17.13",
     "@types/node": "14.17.5",
     "@types/supertest": "2.0.11",
     "jest": "27.0.6",
@@ -45,8 +45,8 @@
     "ts-loader": "9.2.3",
     "ts-node": "10.1.0",
     "tsconfig-paths": "3.10.1",
-    "@typescript-eslint/eslint-plugin": "4.28.2",
-    "@typescript-eslint/parser": "4.28.2",
+    "@typescript-eslint/eslint-plugin": "4.28.3",
+    "@typescript-eslint/parser": "4.28.3",
     "eslint": "7.30.0",
     "eslint-config-prettier": "8.3.0",
     "eslint-plugin-import": "2.23.4",
diff --git a/sample/23-graphql-code-first/package-lock.json b/sample/23-graphql-code-first/package-lock.json
index 8067e2642..299967c7e 100644
Binary files a/sample/23-graphql-code-first/package-lock.json and b/sample/23-graphql-code-first/package-lock.json differ
diff --git a/sample/23-graphql-code-first/package.json b/sample/23-graphql-code-first/package.json
index 1ede786d3..fde916262 100644
--- a/sample/23-graphql-code-first/package.json
+++ b/sample/23-graphql-code-first/package.json
@@ -21,7 +21,7 @@
   "dependencies": {
     "@nestjs/common": "8.0.2",
     "@nestjs/core": "8.0.2",
-    "@nestjs/graphql": "7.11.0",
+    "@nestjs/graphql": "8.0.2",
     "@nestjs/platform-express": "8.0.2",
     "apollo-server": "2.25.2",
     "apollo-server-express": "2.25.2",
@@ -35,9 +35,9 @@
   },
   "devDependencies": {
     "@nestjs/cli": "8.0.2",
-    "@nestjs/schematics": "8.0.0",
+    "@nestjs/schematics": "8.0.1",
     "@nestjs/testing": "8.0.2",
-    "@types/express": "4.17.12",
+    "@types/express": "4.17.13",
     "@types/node": "14.17.5",
     "@types/supertest": "2.0.11",
     "jest": "27.0.6",
@@ -47,8 +47,8 @@
     "ts-loader": "9.2.3",
     "ts-node": "10.1.0",
     "tsconfig-paths": "3.10.1",
-    "@typescript-eslint/eslint-plugin": "4.28.2",
-    "@typescript-eslint/parser": "4.28.2",
+    "@typescript-eslint/eslint-plugin": "4.28.3",
+    "@typescript-eslint/parser": "4.28.3",
     "eslint": "7.30.0",
     "eslint-config-prettier": "8.3.0",
     "eslint-plugin-import": "2.23.4",
diff --git a/sample/24-serve-static/package-lock.json b/sample/24-serve-static/package-lock.json
index d1005cd01..b0d7167ae 100644
Binary files a/sample/24-serve-static/package-lock.json and b/sample/24-serve-static/package-lock.json differ
diff --git a/sample/24-serve-static/package.json b/sample/24-serve-static/package.json
index 9bcda30ae..66cc6f1ee 100644
--- a/sample/24-serve-static/package.json
+++ b/sample/24-serve-static/package.json
@@ -31,9 +31,9 @@
   },
   "devDependencies": {
     "@nestjs/cli": "8.0.2",
-    "@nestjs/schematics": "8.0.0",
+    "@nestjs/schematics": "8.0.1",
     "@nestjs/testing": "8.0.2",
-    "@types/express": "4.17.12",
+    "@types/express": "4.17.13",
     "@types/node": "14.17.5",
     "@types/supertest": "2.0.11",
     "jest": "27.0.6",
@@ -43,8 +43,8 @@
     "ts-loader": "9.2.3",
     "ts-node": "10.1.0",
     "tsconfig-paths": "3.10.1",
-    "@typescript-eslint/eslint-plugin": "4.28.2",
-    "@typescript-eslint/parser": "4.28.2",
+    "@typescript-eslint/eslint-plugin": "4.28.3",
+    "@typescript-eslint/parser": "4.28.3",
     "eslint": "7.30.0",
     "eslint-config-prettier": "8.3.0",
     "eslint-plugin-import": "2.23.4",
diff --git a/sample/25-dynamic-modules/package-lock.json b/sample/25-dynamic-modules/package-lock.json
index 76f526b68..4367d59d2 100644
Binary files a/sample/25-dynamic-modules/package-lock.json and b/sample/25-dynamic-modules/package-lock.json differ
diff --git a/sample/25-dynamic-modules/package.json b/sample/25-dynamic-modules/package.json
index 9970df8da..358c96180 100644
--- a/sample/25-dynamic-modules/package.json
+++ b/sample/25-dynamic-modules/package.json
@@ -30,9 +30,9 @@
   "devDependencies": {
     "@types/dotenv": "8.2.0",
     "@nestjs/cli": "8.0.2",
-    "@nestjs/schematics": "8.0.0",
+    "@nestjs/schematics": "8.0.1",
     "@nestjs/testing": "8.0.2",
-    "@types/express": "4.17.12",
+    "@types/express": "4.17.13",
     "@types/jest": "26.0.24",
     "@types/node": "14.17.5",
     "@types/supertest": "2.0.11",
@@ -43,8 +43,8 @@
     "ts-loader": "9.2.3",
     "ts-node": "10.1.0",
     "tsconfig-paths": "3.10.1",
-    "@typescript-eslint/eslint-plugin": "4.28.2",
-    "@typescript-eslint/parser": "4.28.2",
+    "@typescript-eslint/eslint-plugin": "4.28.3",
+    "@typescript-eslint/parser": "4.28.3",
     "eslint": "7.30.0",
     "eslint-config-prettier": "8.3.0",
     "eslint-plugin-import": "2.23.4",
diff --git a/sample/26-queues/package-lock.json b/sample/26-queues/package-lock.json
index 0231b8160..a7cdc588f 100644
Binary files a/sample/26-queues/package-lock.json and b/sample/26-queues/package-lock.json differ
diff --git a/sample/26-queues/package.json b/sample/26-queues/package.json
index 42b514df1..fbdaf42ae 100644
--- a/sample/26-queues/package.json
+++ b/sample/26-queues/package.json
@@ -23,7 +23,7 @@
     "@nestjs/common": "8.0.2",
     "@nestjs/core": "8.0.2",
     "@nestjs/platform-express": "8.0.2",
-    "bull": "3.22.11",
+    "bull": "3.25.1",
     "dotenv": "10.0.0",
     "reflect-metadata": "0.1.13",
     "rimraf": "3.0.2",
@@ -31,11 +31,11 @@
   },
   "devDependencies": {
     "@nestjs/cli": "8.0.2",
-    "@nestjs/schematics": "8.0.0",
+    "@nestjs/schematics": "8.0.1",
     "@nestjs/testing": "8.0.2",
     "@types/bull": "3.15.2",
     "@types/dotenv": "8.2.0",
-    "@types/express": "4.17.12",
+    "@types/express": "4.17.13",
     "@types/jest": "26.0.24",
     "@types/node": "14.17.5",
     "@types/supertest": "2.0.11",
@@ -46,8 +46,8 @@
     "ts-loader": "9.2.3",
     "ts-node": "10.1.0",
     "tsconfig-paths": "3.10.1",
-    "@typescript-eslint/eslint-plugin": "4.28.2",
-    "@typescript-eslint/parser": "4.28.2",
+    "@typescript-eslint/eslint-plugin": "4.28.3",
+    "@typescript-eslint/parser": "4.28.3",
     "eslint": "7.30.0",
     "eslint-config-prettier": "8.3.0",
     "eslint-plugin-import": "2.23.4",
diff --git a/sample/27-scheduling/package-lock.json b/sample/27-scheduling/package-lock.json
index d7db64f20..1c9d1cfe1 100644
Binary files a/sample/27-scheduling/package-lock.json and b/sample/27-scheduling/package-lock.json differ
diff --git a/sample/27-scheduling/package.json b/sample/27-scheduling/package.json
index 5668439fd..e4fba8530 100644
--- a/sample/27-scheduling/package.json
+++ b/sample/27-scheduling/package.json
@@ -30,11 +30,11 @@
   },
   "devDependencies": {
     "@nestjs/cli": "8.0.2",
-    "@nestjs/schematics": "8.0.0",
+    "@nestjs/schematics": "8.0.1",
     "@nestjs/testing": "8.0.2",
     "@types/bull": "3.15.2",
     "@types/dotenv": "8.2.0",
-    "@types/express": "4.17.12",
+    "@types/express": "4.17.13",
     "@types/jest": "26.0.24",
     "@types/node": "14.17.5",
     "@types/supertest": "2.0.11",
@@ -45,8 +45,8 @@
     "ts-loader": "9.2.3",
     "ts-node": "10.1.0",
     "tsconfig-paths": "3.10.1",
-    "@typescript-eslint/eslint-plugin": "4.28.2",
-    "@typescript-eslint/parser": "4.28.2",
+    "@typescript-eslint/eslint-plugin": "4.28.3",
+    "@typescript-eslint/parser": "4.28.3",
     "eslint": "7.30.0",
     "eslint-config-prettier": "8.3.0",
     "eslint-plugin-import": "2.23.4",
diff --git a/sample/28-sse/package-lock.json b/sample/28-sse/package-lock.json
index 8bae8e270..66e21a3b7 100644
Binary files a/sample/28-sse/package-lock.json and b/sample/28-sse/package-lock.json differ
diff --git a/sample/28-sse/package.json b/sample/28-sse/package.json
index aecf67702..66f135f76 100644
--- a/sample/28-sse/package.json
+++ b/sample/28-sse/package.json
@@ -28,10 +28,10 @@
   },
   "devDependencies": {
     "@nestjs/cli": "8.0.2",
-    "@nestjs/schematics": "8.0.0",
+    "@nestjs/schematics": "8.0.1",
     "@nestjs/testing": "8.0.2",
     "@types/dotenv": "8.2.0",
-    "@types/express": "4.17.12",
+    "@types/express": "4.17.13",
     "@types/jest": "26.0.24",
     "@types/node": "14.17.5",
     "@types/supertest": "2.0.11",
@@ -42,8 +42,8 @@
     "ts-loader": "9.2.3",
     "ts-node": "10.1.0",
     "tsconfig-paths": "3.10.1",
-    "@typescript-eslint/eslint-plugin": "4.28.2",
-    "@typescript-eslint/parser": "4.28.2",
+    "@typescript-eslint/eslint-plugin": "4.28.3",
+    "@typescript-eslint/parser": "4.28.3",
     "eslint": "7.30.0",
     "eslint-config-prettier": "8.3.0",
     "eslint-plugin-import": "2.23.4",
diff --git a/sample/28-sse/src/app.controller.ts b/sample/28-sse/src/app.controller.ts
index 6d243f6f7..2977bd026 100644
--- a/sample/28-sse/src/app.controller.ts
+++ b/sample/28-sse/src/app.controller.ts
@@ -16,6 +16,6 @@ export class AppController {
 
   @Sse('sse')
   sse(): Observable<MessageEvent> {
-    return interval(1000).pipe(map((_) => ({ data: { hello: 'world' } })));
+    return interval(1000).pipe(map((_) => ({ data: { hello: 'world' } } as MessageEvent )));
   }
 }
diff --git a/sample/29-file-upload/package-lock.json b/sample/29-file-upload/package-lock.json
index 876d86807..ca9373ece 100644
Binary files a/sample/29-file-upload/package-lock.json and b/sample/29-file-upload/package-lock.json differ
diff --git a/sample/29-file-upload/package.json b/sample/29-file-upload/package.json
index 315a5e014..9950e7f08 100644
--- a/sample/29-file-upload/package.json
+++ b/sample/29-file-upload/package.json
@@ -30,9 +30,9 @@
   },
   "devDependencies": {
     "@nestjs/cli": "8.0.2",
-    "@nestjs/schematics": "8.0.0",
+    "@nestjs/schematics": "8.0.1",
     "@nestjs/testing": "8.0.2",
-    "@types/express": "4.17.12",
+    "@types/express": "4.17.13",
     "@types/jest": "26.0.24",
     "@types/multer": "1.4.7",
     "@types/node": "14.17.5",
@@ -44,8 +44,8 @@
     "ts-loader": "9.2.3",
     "ts-node": "10.1.0",
     "tsconfig-paths": "3.10.1",
-    "@typescript-eslint/eslint-plugin": "4.28.2",
-    "@typescript-eslint/parser": "4.28.2",
+    "@typescript-eslint/eslint-plugin": "4.28.3",
+    "@typescript-eslint/parser": "4.28.3",
     "eslint": "7.30.0",
     "eslint-config-prettier": "8.3.0",
     "eslint-plugin-import": "2.23.4",
diff --git a/sample/30-event-emitter/package-lock.json b/sample/30-event-emitter/package-lock.json
index 98e93f01b..ddf919c4c 100644
Binary files a/sample/30-event-emitter/package-lock.json and b/sample/30-event-emitter/package-lock.json differ
diff --git a/sample/30-event-emitter/package.json b/sample/30-event-emitter/package.json
index 4d5a595f5..f613b8d35 100644
--- a/sample/30-event-emitter/package.json
+++ b/sample/30-event-emitter/package.json
@@ -29,14 +29,14 @@
   },
   "devDependencies": {
     "@nestjs/cli": "8.0.2",
-    "@nestjs/schematics": "8.0.0",
+    "@nestjs/schematics": "8.0.1",
     "@nestjs/testing": "8.0.2",
-    "@types/express": "4.17.12",
+    "@types/express": "4.17.13",
     "@types/jest": "26.0.24",
     "@types/node": "14.17.5",
     "@types/supertest": "2.0.11",
-    "@typescript-eslint/eslint-plugin": "4.28.2",
-    "@typescript-eslint/parser": "4.28.2",
+    "@typescript-eslint/eslint-plugin": "4.28.3",
+    "@typescript-eslint/parser": "4.28.3",
     "eslint": "7.30.0",
     "eslint-config-prettier": "8.3.0",
     "eslint-plugin-import": "2.23.4",
