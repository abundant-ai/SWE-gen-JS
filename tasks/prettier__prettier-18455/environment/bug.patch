diff --git a/benchmarks/trim-indentation.js b/benchmarks/trim-indentation.js
index f5595d6a1..4795ee6b5 100644
--- a/benchmarks/trim-indentation.js
+++ b/benchmarks/trim-indentation.js
@@ -18,6 +18,7 @@ for (const size of [1, 1e1, 1e2]) {
         (regexp) => () =>
           text.replace(regexp, "")
       )(/[ \t]*$/gu),
+      // eslint-disable-next-line require-unicode-regexp
       "RegExp (no `u` flag)": () => text.replace(/[ \t]*$/, ""),
     },
   );
diff --git a/eslint.config.js b/eslint.config.js
index 17dd73b8e..b32e79a90 100644
--- a/eslint.config.js
+++ b/eslint.config.js
@@ -129,10 +129,7 @@ const configs = [
       "prefer-rest-params": "error",
       "prefer-spread": "error",
       "require-await": "error",
-      // The `u` or `v` flag cause problems when dealing with non-ascii characters
-      // https://github.com/prettier/prettier/pull/18453
-      // https://github.com/prettier/prettier/pull/18455
-      "require-unicode-regexp": "off",
+      "require-unicode-regexp": "error",
       "symbol-description": "error",
       yoda: [
         "error",
@@ -498,6 +495,12 @@ const configs = [
       "prefer-arrow-callback": "off",
     },
   },
+  // ESBuild doesn't support regular expressions with `u` flag
+  // https://github.com/evanw/esbuild/issues/4128
+  {
+    files: ["scripts/build/esbuild-plugins/**/*"],
+    rules: { "require-unicode-regexp": "off" },
+  },
   {
     files: ["src/document/printer/printer.js"],
     rules: {
diff --git a/src/language-css/parser-postcss.js b/src/language-css/parser-postcss.js
index eeb97da8c..ca8d0a25a 100644
--- a/src/language-css/parser-postcss.js
+++ b/src/language-css/parser-postcss.js
@@ -4,7 +4,6 @@ import postcssScssParse from "postcss-scss/lib/scss-parse";
 import createError from "../common/parser-create-error.js";
 import { parseFrontMatter } from "../main/front-matter/index.js";
 import isObject from "../utilities/is-object.js";
-import replaceNonLineBreaksWithSpace from "../utilities/replace-non-line-breaks-with-space.js";
 import {
   calculateLoc,
   locEnd,
@@ -57,8 +56,7 @@ function parseNestedCSS(node, options) {
             node.source.start.offset + node.prop.length,
             node.source.end.offset,
           );
-        const fakeContent =
-          replaceNonLineBreaksWithSpace(textBefore) + nodeText;
+        const fakeContent = textBefore.replaceAll(/[^\n]/gu, " ") + nodeText;
         let parse;
         if (options.parser === "scss") {
           parse = parseScss;
diff --git a/src/language-html/parse/parse.js b/src/language-html/parse/parse.js
index 80548eab1..e1c6d6b35 100644
--- a/src/language-html/parse/parse.js
+++ b/src/language-html/parse/parse.js
@@ -6,7 +6,6 @@ import {
 } from "angular-html-parser";
 import createError from "../../common/parser-create-error.js";
 import { parseFrontMatter } from "../../main/front-matter/index.js";
-import replaceNonLineBreaksWithSpace from "../../utilities/replace-non-line-breaks-with-space.js";
 import {
   normalizeParseOptions,
   toAngularHtmlParserParseOptions,
@@ -144,7 +143,7 @@ function parseSubHtml(
 ) {
   const { offset } = startSpan;
   const textToParse =
-    replaceNonLineBreaksWithSpace(text.slice(0, offset)) + subContent;
+    text.slice(0, offset).replaceAll(/[^\n]/gu, " ") + subContent;
   const subAst = parse(
     textToParse,
     parser,
diff --git a/src/language-js/utilities/get-text-without-comments.js b/src/language-js/utilities/get-text-without-comments.js
index b79ba97e7..bbff70c46 100644
--- a/src/language-js/utilities/get-text-without-comments.js
+++ b/src/language-js/utilities/get-text-without-comments.js
@@ -1,4 +1,4 @@
-import replaceNonLineBreaksWithSpace from "../../utilities/replace-non-line-breaks-with-space.js";
+import * as assert from "#universal/assert";
 import { locEnd, locStart } from "../loc.js";
 
 function getTextWithoutComments(options, start, end) {
@@ -21,10 +21,14 @@ function getTextWithoutComments(options, start, end) {
 
     text =
       text.slice(0, startIndex) +
-      replaceNonLineBreaksWithSpace(text.slice(startIndex, endIndex)) +
+      text.slice(startIndex, endIndex).replaceAll(/[^\n]/gu, " ") +
       text.slice(endIndex);
   }
 
+  if (process.env.NODE_ENV !== "production") {
+    assert.equal(text.length, end - start);
+  }
+
   return text;
 }
 
diff --git a/src/main/front-matter/parse.js b/src/main/front-matter/parse.js
index 24a277d10..43203b01d 100644
--- a/src/main/front-matter/parse.js
+++ b/src/main/front-matter/parse.js
@@ -1,4 +1,3 @@
-import replaceNonLineBreaksWithSpace from "../../utilities/replace-non-line-breaks-with-space.js";
 import { FRONT_MATTER_MARK } from "./constants.js";
 
 const DELIMITER_LENGTH = 3;
@@ -107,7 +106,10 @@ function parse(text) {
     frontMatter,
     get content() {
       const { raw } = frontMatter;
-      return replaceNonLineBreaksWithSpace(raw) + text.slice(raw.length);
+      return (
+        // eslint-disable-next-line require-unicode-regexp -- string length matters so intentionally not using unicode flag
+        raw.replaceAll(/[^\n]/g, " ") + text.slice(raw.length)
+      );
     },
   };
 }
diff --git a/src/utilities/replace-non-line-breaks-with-space.js b/src/utilities/replace-non-line-breaks-with-space.js
deleted file mode 100644
index d88609beb..000000000
--- a/src/utilities/replace-non-line-breaks-with-space.js
+++ /dev/null
@@ -1,19 +0,0 @@
-import * as assert from "#universal/assert";
-
-/**
-Replaces all characters in the input string except line breaks `\n` with a space.
-
-@param {string} string - The input string to process.
-@returns {string}
-*/
-function replaceNonLineBreaksWithSpace(string) {
-  const replaced = string.replaceAll(/[^\n]/g, " ");
-
-  if (process.env.NODE_ENV !== "production") {
-    assert.equal(replaced.length, string.length);
-  }
-
-  return replaced;
-}
-
-export default replaceNonLineBreaksWithSpace;
diff --git a/tests/format/css/custom-properties/__snapshots__/format.test.js.snap b/tests/format/css/custom-properties/__snapshots__/format.test.js.snap
index 4b4778334..1096697a9 100644
--- a/tests/format/css/custom-properties/__snapshots__/format.test.js.snap
+++ b/tests/format/css/custom-properties/__snapshots__/format.test.js.snap
@@ -17,27 +17,3 @@ printWidth: 80
 
 ================================================================================
 `;
-
-exports[`emoji.css format 1`] = `
-====================================options=====================================
-parsers: ["css", "scss", "less"]
-printWidth: 80
-                                                                                | printWidth
-=====================================input======================================
-/* ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ */
-
---foo: {
-  color: red;
-  /* ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ */
-}
-
-=====================================output=====================================
-/* ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ */
-
---foo: {
-  color: red;
-  /* ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ */
-};
-
-================================================================================
-`;
diff --git a/tests/format/css/custom-properties/emoji.css b/tests/format/css/custom-properties/emoji.css
deleted file mode 100644
index 2001a1169..000000000
--- a/tests/format/css/custom-properties/emoji.css
+++ /dev/null
@@ -1,6 +0,0 @@
-/* ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ */
-
---foo: {
-  color: red;
-  /* ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ */
-}
diff --git a/tests/format/js/import/__snapshots__/format.test.js.snap b/tests/format/js/import/__snapshots__/format.test.js.snap
index c71edd7d8..0efcf715f 100644
--- a/tests/format/js/import/__snapshots__/format.test.js.snap
+++ b/tests/format/js/import/__snapshots__/format.test.js.snap
@@ -278,6 +278,201 @@ import x, {
 ================================================================================
 `;
 
+exports[`empty-import.js - {"bracketSpacing":false} format 1`] = `
+====================================options=====================================
+bracketSpacing: false
+parsers: ["babel", "flow", "typescript"]
+printWidth: 80
+                                                                                | printWidth
+=====================================input======================================
+import { } from '@types/googlemaps';
+import 'a';
+import /* comment */ 'a';
+import // comment
+'a';
+import { /* comment */ } from 'a';
+import /* comment */ {} from 'a';
+import {} /* comment */ from 'a';
+import {} from /* comment */ 'a';
+import /* comment */ {/* comment */} /* comment */ from /* comment */ 'a';
+import {
+  // comment
+} from 'a';
+import // comment
+{} from 'a';
+import {}
+// comment
+from 'a';
+import {} from
+// comment
+'a';
+import
+// comment
+{
+// comment
+}
+// comment
+from
+// comment
+'a';
+
+import // {} from
+'a';
+import {} from // comment ends with from
+'a';
+import {} from /* comment ends with from */ 'a';
+import {} from // comment not ends with from ___
+'a';
+import {} from /* comment not ends with from ___ */ 'a';
+
+import // comment ends with from
+'a';
+import /* comment ends with from */ 'a';
+import // comment not ends with from ___
+'a';
+import /* comment not ends with from ___ */ 'a';
+
+=====================================output=====================================
+import {} from "@types/googlemaps";
+import "a";
+import /* comment */ "a";
+import // comment
+"a";
+import {} from /* comment */ "a";
+import {} from /* comment */ "a";
+import {} from /* comment */ "a";
+import {} from /* comment */ "a";
+import {} from /* comment */ /* comment */ /* comment */ /* comment */ "a";
+import {} from // comment
+"a";
+import {} from // comment
+"a";
+import {} from // comment
+"a";
+import {} from // comment
+"a";
+import {} from // comment
+// comment
+// comment
+// comment
+"a";
+
+import // {} from
+"a";
+import {} from // comment ends with from
+"a";
+import {} from /* comment ends with from */ "a";
+import {} from // comment not ends with from ___
+"a";
+import {} from /* comment not ends with from ___ */ "a";
+
+import // comment ends with from
+"a";
+import /* comment ends with from */ "a";
+import // comment not ends with from ___
+"a";
+import /* comment not ends with from ___ */ "a";
+
+================================================================================
+`;
+
+exports[`empty-import.js format 1`] = `
+====================================options=====================================
+parsers: ["babel", "flow", "typescript"]
+printWidth: 80
+                                                                                | printWidth
+=====================================input======================================
+import { } from '@types/googlemaps';
+import 'a';
+import /* comment */ 'a';
+import // comment
+'a';
+import { /* comment */ } from 'a';
+import /* comment */ {} from 'a';
+import {} /* comment */ from 'a';
+import {} from /* comment */ 'a';
+import /* comment */ {/* comment */} /* comment */ from /* comment */ 'a';
+import {
+  // comment
+} from 'a';
+import // comment
+{} from 'a';
+import {}
+// comment
+from 'a';
+import {} from
+// comment
+'a';
+import
+// comment
+{
+// comment
+}
+// comment
+from
+// comment
+'a';
+
+import // {} from
+'a';
+import {} from // comment ends with from
+'a';
+import {} from /* comment ends with from */ 'a';
+import {} from // comment not ends with from ___
+'a';
+import {} from /* comment not ends with from ___ */ 'a';
+
+import // comment ends with from
+'a';
+import /* comment ends with from */ 'a';
+import // comment not ends with from ___
+'a';
+import /* comment not ends with from ___ */ 'a';
+
+=====================================output=====================================
+import {} from "@types/googlemaps";
+import "a";
+import /* comment */ "a";
+import // comment
+"a";
+import {} from /* comment */ "a";
+import {} from /* comment */ "a";
+import {} from /* comment */ "a";
+import {} from /* comment */ "a";
+import {} from /* comment */ /* comment */ /* comment */ /* comment */ "a";
+import {} from // comment
+"a";
+import {} from // comment
+"a";
+import {} from // comment
+"a";
+import {} from // comment
+"a";
+import {} from // comment
+// comment
+// comment
+// comment
+"a";
+
+import // {} from
+"a";
+import {} from // comment ends with from
+"a";
+import {} from /* comment ends with from */ "a";
+import {} from // comment not ends with from ___
+"a";
+import {} from /* comment not ends with from ___ */ "a";
+
+import // comment ends with from
+"a";
+import /* comment ends with from */ "a";
+import // comment not ends with from ___
+"a";
+import /* comment not ends with from ___ */ "a";
+
+================================================================================
+`;
+
 exports[`inline.js - {"bracketSpacing":false} format 1`] = `
 ====================================options=====================================
 bracketSpacing: false
diff --git a/tests/format/js/import/empty-import/empty-import.js b/tests/format/js/import/empty-import.js
similarity index 100%
rename from tests/format/js/import/empty-import/empty-import.js
rename to tests/format/js/import/empty-import.js
diff --git a/tests/format/js/import/empty-import/__snapshots__/format.test.js.snap b/tests/format/js/import/empty-import/__snapshots__/format.test.js.snap
deleted file mode 100644
index 4fce1dcd1..000000000
--- a/tests/format/js/import/empty-import/__snapshots__/format.test.js.snap
+++ /dev/null
@@ -1,118 +0,0 @@
-// Jest Snapshot v1, https://jestjs.io/docs/snapshot-testing
-
-exports[`empty-import.js format 1`] = `
-====================================options=====================================
-parsers: ["babel", "flow", "typescript"]
-printWidth: 80
-                                                                                | printWidth
-=====================================input======================================
-import { } from '@types/googlemaps';
-import 'a';
-import /* comment */ 'a';
-import // comment
-'a';
-import { /* comment */ } from 'a';
-import /* comment */ {} from 'a';
-import {} /* comment */ from 'a';
-import {} from /* comment */ 'a';
-import /* comment */ {/* comment */} /* comment */ from /* comment */ 'a';
-import {
-  // comment
-} from 'a';
-import // comment
-{} from 'a';
-import {}
-// comment
-from 'a';
-import {} from
-// comment
-'a';
-import
-// comment
-{
-// comment
-}
-// comment
-from
-// comment
-'a';
-
-import // {} from
-'a';
-import {} from // comment ends with from
-'a';
-import {} from /* comment ends with from */ 'a';
-import {} from // comment not ends with from ___
-'a';
-import {} from /* comment not ends with from ___ */ 'a';
-
-import // comment ends with from
-'a';
-import /* comment ends with from */ 'a';
-import // comment not ends with from ___
-'a';
-import /* comment not ends with from ___ */ 'a';
-
-=====================================output=====================================
-import {} from "@types/googlemaps";
-import "a";
-import /* comment */ "a";
-import // comment
-"a";
-import {} from /* comment */ "a";
-import {} from /* comment */ "a";
-import {} from /* comment */ "a";
-import {} from /* comment */ "a";
-import {} from /* comment */ /* comment */ /* comment */ /* comment */ "a";
-import {} from // comment
-"a";
-import {} from // comment
-"a";
-import {} from // comment
-"a";
-import {} from // comment
-"a";
-import {} from // comment
-// comment
-// comment
-// comment
-"a";
-
-import // {} from
-"a";
-import {} from // comment ends with from
-"a";
-import {} from /* comment ends with from */ "a";
-import {} from // comment not ends with from ___
-"a";
-import {} from /* comment not ends with from ___ */ "a";
-
-import // comment ends with from
-"a";
-import /* comment ends with from */ "a";
-import // comment not ends with from ___
-"a";
-import /* comment not ends with from ___ */ "a";
-
-================================================================================
-`;
-
-exports[`empty-import-2.js format 1`] = `
-====================================options=====================================
-parsers: ["babel", "flow", "typescript"]
-printWidth: 80
-                                                                                | printWidth
-=====================================input======================================
-import {} from /* ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ */ /* ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ */'a';
-//     ^^^^^^^ SHOLUL print \`from\`
-import /* ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„___ */ /* from */ "a";
-//    ^ Should NOT print \`from\`
-
-=====================================output=====================================
-import {} from /* ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ */ /* ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ */ "a";
-//     ^^^^^^^ SHOLUL print \`from\`
-import /* ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„___ */ /* from */ "a";
-//    ^ Should NOT print \`from\`
-
-================================================================================
-`;
diff --git a/tests/format/js/import/empty-import/empty-import-2.js b/tests/format/js/import/empty-import/empty-import-2.js
deleted file mode 100644
index 8654a8458..000000000
--- a/tests/format/js/import/empty-import/empty-import-2.js
+++ /dev/null
@@ -1,4 +0,0 @@
-import {} from /* ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ */ /* ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ */'a';
-//     ^^^^^^^ SHOLUL print `from`
-import /* ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„ðŸ˜„___ */ /* from */ "a";
-//    ^ Should NOT print `from`
diff --git a/tests/format/js/import/empty-import/format.test.js b/tests/format/js/import/empty-import/format.test.js
deleted file mode 100644
index 67c251cce..000000000
--- a/tests/format/js/import/empty-import/format.test.js
+++ /dev/null
@@ -1 +0,0 @@
-runFormatTest(import.meta, ["babel", "flow", "typescript"]);
